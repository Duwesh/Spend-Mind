var Ope=Object.defineProperty;var Tpe=(t,e,n)=>e in t?Ope(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var P=(t,e,n)=>Tpe(t,typeof e!="symbol"?e+"":e,n);function Cpe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sK={exports:{}},f5={},oK={exports:{}},on={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1=Symbol.for("react.element"),Ppe=Symbol.for("react.portal"),Npe=Symbol.for("react.fragment"),Ipe=Symbol.for("react.strict_mode"),Rpe=Symbol.for("react.profiler"),jpe=Symbol.for("react.provider"),$pe=Symbol.for("react.context"),Mpe=Symbol.for("react.forward_ref"),Lpe=Symbol.for("react.suspense"),Dpe=Symbol.for("react.memo"),Fpe=Symbol.for("react.lazy"),c8=Symbol.iterator;function Bpe(t){return t===null||typeof t!="object"?null:(t=c8&&t[c8]||t["@@iterator"],typeof t=="function"?t:null)}var lK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cK=Object.assign,uK={};function Ky(t,e,n){this.props=t,this.context=e,this.refs=uK,this.updater=n||lK}Ky.prototype.isReactComponent={};Ky.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ky.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fK(){}fK.prototype=Ky.prototype;function d3(t,e,n){this.props=t,this.context=e,this.refs=uK,this.updater=n||lK}var h3=d3.prototype=new fK;h3.constructor=d3;cK(h3,Ky.prototype);h3.isPureReactComponent=!0;var u8=Array.isArray,dK=Object.prototype.hasOwnProperty,p3={current:null},hK={key:!0,ref:!0,__self:!0,__source:!0};function pK(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)dK.call(e,r)&&!hK.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:S1,type:t,key:a,ref:s,props:i,_owner:p3.current}}function Upe(t,e){return{$$typeof:S1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function m3(t){return typeof t=="object"&&t!==null&&t.$$typeof===S1}function zpe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var f8=/\/+/g;function hT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zpe(""+t.key):e.toString(36)}function N2(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case S1:case Ppe:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+hT(s,0):r,u8(i)?(n="",t!=null&&(n=t.replace(f8,"$&/")+"/"),N2(i,e,n,"",function(c){return c})):i!=null&&(m3(i)&&(i=Upe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(f8,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",u8(t))for(var o=0;o<t.length;o++){a=t[o];var l=r+hT(a,o);s+=N2(a,e,n,l,i)}else if(l=Bpe(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=r+hT(a,o++),s+=N2(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ix(t,e,n){if(t==null)return t;var r=[],i=0;return N2(t,r,"","",function(a){return e.call(n,a,i++)}),r}function Vpe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Da={current:null},I2={transition:null},Wpe={ReactCurrentDispatcher:Da,ReactCurrentBatchConfig:I2,ReactCurrentOwner:p3};function mK(){throw Error("act(...) is not supported in production builds of React.")}on.Children={map:ix,forEach:function(t,e,n){ix(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ix(t,function(){e++}),e},toArray:function(t){return ix(t,function(e){return e})||[]},only:function(t){if(!m3(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};on.Component=Ky;on.Fragment=Npe;on.Profiler=Rpe;on.PureComponent=d3;on.StrictMode=Ipe;on.Suspense=Lpe;on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wpe;on.act=mK;on.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cK({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=p3.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)dK.call(e,l)&&!hK.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:S1,type:t.type,key:i,ref:a,props:r,_owner:s}};on.createContext=function(t){return t={$$typeof:$pe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jpe,_context:t},t.Consumer=t};on.createElement=pK;on.createFactory=function(t){var e=pK.bind(null,t);return e.type=t,e};on.createRef=function(){return{current:null}};on.forwardRef=function(t){return{$$typeof:Mpe,render:t}};on.isValidElement=m3;on.lazy=function(t){return{$$typeof:Fpe,_payload:{_status:-1,_result:t},_init:Vpe}};on.memo=function(t,e){return{$$typeof:Dpe,type:t,compare:e===void 0?null:e}};on.startTransition=function(t){var e=I2.transition;I2.transition={};try{t()}finally{I2.transition=e}};on.unstable_act=mK;on.useCallback=function(t,e){return Da.current.useCallback(t,e)};on.useContext=function(t){return Da.current.useContext(t)};on.useDebugValue=function(){};on.useDeferredValue=function(t){return Da.current.useDeferredValue(t)};on.useEffect=function(t,e){return Da.current.useEffect(t,e)};on.useId=function(){return Da.current.useId()};on.useImperativeHandle=function(t,e,n){return Da.current.useImperativeHandle(t,e,n)};on.useInsertionEffect=function(t,e){return Da.current.useInsertionEffect(t,e)};on.useLayoutEffect=function(t,e){return Da.current.useLayoutEffect(t,e)};on.useMemo=function(t,e){return Da.current.useMemo(t,e)};on.useReducer=function(t,e,n){return Da.current.useReducer(t,e,n)};on.useRef=function(t){return Da.current.useRef(t)};on.useState=function(t){return Da.current.useState(t)};on.useSyncExternalStore=function(t,e,n){return Da.current.useSyncExternalStore(t,e,n)};on.useTransition=function(){return Da.current.useTransition()};on.version="18.3.1";oK.exports=on;var k=oK.exports;const se=wn(k),g3=Cpe({__proto__:null,default:se},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hpe=k,qpe=Symbol.for("react.element"),Gpe=Symbol.for("react.fragment"),Kpe=Object.prototype.hasOwnProperty,Ype=Hpe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zpe={key:!0,ref:!0,__self:!0,__source:!0};function gK(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Kpe.call(e,r)&&!Zpe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qpe,type:t,key:a,ref:s,props:i,_owner:Ype.current}}f5.Fragment=Gpe;f5.jsx=gK;f5.jsxs=gK;sK.exports=f5;var S=sK.exports,PN={},yK={exports:{}},Us={},vK={exports:{}},wK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var ae=z.length;z.push(G);e:for(;0<ae;){var ue=ae-1>>>1,L=z[ue];if(0<i(L,G))z[ue]=G,z[ae]=L,ae=ue;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],ae=z.pop();if(ae!==G){z[0]=ae;e:for(var ue=0,L=z.length,K=L>>>1;ue<K;){var Q=2*(ue+1)-1,re=z[Q],F=Q+1,$=z[F];if(0>i(re,ae))F<L&&0>i($,re)?(z[ue]=$,z[F]=ae,ue=F):(z[ue]=re,z[Q]=ae,ue=Q);else if(F<L&&0>i($,ae))z[ue]=$,z[F]=ae,ue=F;else break e}}return G}function i(z,G){var ae=z.sortIndex-G.sortIndex;return ae!==0?ae:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,f=null,d=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(z){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=z)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function _(z){if(m=!1,w(z),!p)if(n(l)!==null)p=!0,Y(x);else{var G=n(c);G!==null&&X(_,G.startTime-z)}}function x(z,G){p=!1,m&&(m=!1,g(O),O=-1),h=!0;var ae=d;try{for(w(G),f=n(l);f!==null&&(!(f.expirationTime>G)||z&&!N());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,d=f.priorityLevel;var L=ue(f.expirationTime<=G);G=t.unstable_now(),typeof L=="function"?f.callback=L:f===n(l)&&r(l),w(G)}else r(l);f=n(l)}if(f!==null)var K=!0;else{var Q=n(c);Q!==null&&X(_,Q.startTime-G),K=!1}return K}finally{f=null,d=ae,h=!1}}var E=!1,T=null,O=-1,R=5,M=-1;function N(){return!(t.unstable_now()-M<R)}function j(){if(T!==null){var z=t.unstable_now();M=z;var G=!0;try{G=T(!0,z)}finally{G?U():(E=!1,T=null)}}else E=!1}var U;if(typeof v=="function")U=function(){v(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=j,U=function(){V.postMessage(null)}}else U=function(){y(j,0)};function Y(z){T=z,E||(E=!0,U())}function X(z,G){O=y(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Y(x))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var ae=d;d=G;try{return z()}finally{d=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ae=d;d=z;try{return G()}finally{d=ae}},t.unstable_scheduleCallback=function(z,G,ae){var ue=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ue+ae:ue):ae=ue,z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ae+L,z={id:u++,callback:G,priorityLevel:z,startTime:ae,expirationTime:L,sortIndex:-1},ae>ue?(z.sortIndex=ae,e(c,z),n(l)===null&&z===n(c)&&(m?(g(O),O=-1):m=!0,X(_,ae-ue))):(z.sortIndex=L,e(l,z),p||h||(p=!0,Y(x))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var G=d;return function(){var ae=d;d=G;try{return z.apply(this,arguments)}finally{d=ae}}}})(wK);vK.exports=wK;var Xpe=vK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jpe=k,Ls=Xpe;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bK=new Set,jw={};function Fp(t,e){Xg(t,e),Xg(t+"Capture",e)}function Xg(t,e){for(jw[t]=e,t=0;t<e.length;t++)bK.add(e[t])}var Eu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NN=Object.prototype.hasOwnProperty,Qpe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d8={},h8={};function eme(t){return NN.call(h8,t)?!0:NN.call(d8,t)?!1:Qpe.test(t)?h8[t]=!0:(d8[t]=!0,!1)}function tme(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nme(t,e,n,r){if(e===null||typeof e>"u"||tme(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fa(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var Qi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qi[t]=new Fa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qi[e]=new Fa(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qi[t]=new Fa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qi[t]=new Fa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qi[t]=new Fa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qi[t]=new Fa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qi[t]=new Fa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qi[t]=new Fa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qi[t]=new Fa(t,5,!1,t.toLowerCase(),null,!1,!1)});var y3=/[\-:]([a-z])/g;function v3(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y3,v3);Qi[e]=new Fa(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y3,v3);Qi[e]=new Fa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y3,v3);Qi[e]=new Fa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qi[t]=new Fa(t,1,!1,t.toLowerCase(),null,!1,!1)});Qi.xlinkHref=new Fa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qi[t]=new Fa(t,1,!1,t.toLowerCase(),null,!0,!0)});function w3(t,e,n,r){var i=Qi.hasOwnProperty(e)?Qi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nme(e,n,i,r)&&(n=null),r||i===null?eme(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wu=Jpe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ax=Symbol.for("react.element"),Gm=Symbol.for("react.portal"),Km=Symbol.for("react.fragment"),b3=Symbol.for("react.strict_mode"),IN=Symbol.for("react.profiler"),_K=Symbol.for("react.provider"),xK=Symbol.for("react.context"),_3=Symbol.for("react.forward_ref"),RN=Symbol.for("react.suspense"),jN=Symbol.for("react.suspense_list"),x3=Symbol.for("react.memo"),Pf=Symbol.for("react.lazy"),SK=Symbol.for("react.offscreen"),p8=Symbol.iterator;function l0(t){return t===null||typeof t!="object"?null:(t=p8&&t[p8]||t["@@iterator"],typeof t=="function"?t:null)}var Sr=Object.assign,pT;function L0(t){if(pT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pT=e&&e[1]||""}return`
`+pT+t}var mT=!1;function gT(t,e){if(!t||mT)return"";mT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{mT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?L0(t):""}function rme(t){switch(t.tag){case 5:return L0(t.type);case 16:return L0("Lazy");case 13:return L0("Suspense");case 19:return L0("SuspenseList");case 0:case 2:case 15:return t=gT(t.type,!1),t;case 11:return t=gT(t.type.render,!1),t;case 1:return t=gT(t.type,!0),t;default:return""}}function $N(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Km:return"Fragment";case Gm:return"Portal";case IN:return"Profiler";case b3:return"StrictMode";case RN:return"Suspense";case jN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xK:return(t.displayName||"Context")+".Consumer";case _K:return(t._context.displayName||"Context")+".Provider";case _3:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x3:return e=t.displayName||null,e!==null?e:$N(t.type)||"Memo";case Pf:e=t._payload,t=t._init;try{return $N(t(e))}catch{}}return null}function ime(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $N(e);case 8:return e===b3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EK(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ame(t){var e=EK(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sx(t){t._valueTracker||(t._valueTracker=ame(t))}function AK(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EK(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function IS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function MN(t,e){var n=e.checked;return Sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function m8(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kK(t,e){e=e.checked,e!=null&&w3(t,"checked",e,!1)}function LN(t,e){kK(t,e);var n=yd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?DN(t,e.type,n):e.hasOwnProperty("defaultValue")&&DN(t,e.type,yd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g8(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function DN(t,e,n){(e!=="number"||IS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var D0=Array.isArray;function kg(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yd(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function FN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Sr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function y8(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(D0(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yd(n)}}function OK(t,e){var n=yd(e.value),r=yd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function v8(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TK(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function BN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TK(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ox,CK=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ox=ox||document.createElement("div"),ox.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ox.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $w(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sme=["Webkit","ms","Moz","O"];Object.keys(tw).forEach(function(t){sme.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tw[e]=tw[t]})});function PK(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tw.hasOwnProperty(t)&&tw[t]?(""+e).trim():e+"px"}function NK(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=PK(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ome=Sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UN(t,e){if(e){if(ome[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function zN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VN=null;function S3(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var WN=null,Og=null,Tg=null;function w8(t){if(t=k1(t)){if(typeof WN!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=g5(e),WN(t.stateNode,t.type,e))}}function IK(t){Og?Tg?Tg.push(t):Tg=[t]:Og=t}function RK(){if(Og){var t=Og,e=Tg;if(Tg=Og=null,w8(t),e)for(t=0;t<e.length;t++)w8(e[t])}}function jK(t,e){return t(e)}function $K(){}var yT=!1;function MK(t,e,n){if(yT)return t(e,n);yT=!0;try{return jK(t,e,n)}finally{yT=!1,(Og!==null||Tg!==null)&&($K(),RK())}}function Mw(t,e){var n=t.stateNode;if(n===null)return null;var r=g5(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var HN=!1;if(Eu)try{var c0={};Object.defineProperty(c0,"passive",{get:function(){HN=!0}}),window.addEventListener("test",c0,c0),window.removeEventListener("test",c0,c0)}catch{HN=!1}function lme(t,e,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var nw=!1,RS=null,jS=!1,qN=null,cme={onError:function(t){nw=!0,RS=t}};function ume(t,e,n,r,i,a,s,o,l){nw=!1,RS=null,lme.apply(cme,arguments)}function fme(t,e,n,r,i,a,s,o,l){if(ume.apply(this,arguments),nw){if(nw){var c=RS;nw=!1,RS=null}else throw Error(Fe(198));jS||(jS=!0,qN=c)}}function Bp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LK(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b8(t){if(Bp(t)!==t)throw Error(Fe(188))}function dme(t){var e=t.alternate;if(!e){if(e=Bp(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return b8(i),t;if(a===r)return b8(i),e;a=a.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function DK(t){return t=dme(t),t!==null?FK(t):null}function FK(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FK(t);if(e!==null)return e;t=t.sibling}return null}var BK=Ls.unstable_scheduleCallback,_8=Ls.unstable_cancelCallback,hme=Ls.unstable_shouldYield,pme=Ls.unstable_requestPaint,Br=Ls.unstable_now,mme=Ls.unstable_getCurrentPriorityLevel,E3=Ls.unstable_ImmediatePriority,UK=Ls.unstable_UserBlockingPriority,$S=Ls.unstable_NormalPriority,gme=Ls.unstable_LowPriority,zK=Ls.unstable_IdlePriority,d5=null,uc=null;function yme(t){if(uc&&typeof uc.onCommitFiberRoot=="function")try{uc.onCommitFiberRoot(d5,t,void 0,(t.current.flags&128)===128)}catch{}}var ml=Math.clz32?Math.clz32:bme,vme=Math.log,wme=Math.LN2;function bme(t){return t>>>=0,t===0?32:31-(vme(t)/wme|0)|0}var lx=64,cx=4194304;function F0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function MS(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=F0(o):(a&=s,a!==0&&(r=F0(a)))}else s=n&~i,s!==0?r=F0(s):a!==0&&(r=F0(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ml(e),i=1<<n,r|=t[n],e&=~i;return r}function _me(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xme(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-ml(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=_me(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function GN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VK(){var t=lx;return lx<<=1,!(lx&4194240)&&(lx=64),t}function vT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function E1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ml(e),t[e]=n}function Sme(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ml(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function A3(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ml(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var jn=0;function WK(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HK,k3,qK,GK,KK,KN=!1,ux=[],Jf=null,Qf=null,ed=null,Lw=new Map,Dw=new Map,Ff=[],Eme="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x8(t,e){switch(t){case"focusin":case"focusout":Jf=null;break;case"dragenter":case"dragleave":Qf=null;break;case"mouseover":case"mouseout":ed=null;break;case"pointerover":case"pointerout":Lw.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dw.delete(e.pointerId)}}function u0(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=k1(e),e!==null&&k3(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ame(t,e,n,r,i){switch(e){case"focusin":return Jf=u0(Jf,t,e,n,r,i),!0;case"dragenter":return Qf=u0(Qf,t,e,n,r,i),!0;case"mouseover":return ed=u0(ed,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Lw.set(a,u0(Lw.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dw.set(a,u0(Dw.get(a)||null,t,e,n,r,i)),!0}return!1}function YK(t){var e=Lh(t.target);if(e!==null){var n=Bp(e);if(n!==null){if(e=n.tag,e===13){if(e=LK(n),e!==null){t.blockedOn=e,KK(t.priority,function(){qK(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function R2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=YN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);VN=r,n.target.dispatchEvent(r),VN=null}else return e=k1(n),e!==null&&k3(e),t.blockedOn=n,!1;e.shift()}return!0}function S8(t,e,n){R2(t)&&n.delete(e)}function kme(){KN=!1,Jf!==null&&R2(Jf)&&(Jf=null),Qf!==null&&R2(Qf)&&(Qf=null),ed!==null&&R2(ed)&&(ed=null),Lw.forEach(S8),Dw.forEach(S8)}function f0(t,e){t.blockedOn===e&&(t.blockedOn=null,KN||(KN=!0,Ls.unstable_scheduleCallback(Ls.unstable_NormalPriority,kme)))}function Fw(t){function e(i){return f0(i,t)}if(0<ux.length){f0(ux[0],t);for(var n=1;n<ux.length;n++){var r=ux[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jf!==null&&f0(Jf,t),Qf!==null&&f0(Qf,t),ed!==null&&f0(ed,t),Lw.forEach(e),Dw.forEach(e),n=0;n<Ff.length;n++)r=Ff[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ff.length&&(n=Ff[0],n.blockedOn===null);)YK(n),n.blockedOn===null&&Ff.shift()}var Cg=Wu.ReactCurrentBatchConfig,LS=!0;function Ome(t,e,n,r){var i=jn,a=Cg.transition;Cg.transition=null;try{jn=1,O3(t,e,n,r)}finally{jn=i,Cg.transition=a}}function Tme(t,e,n,r){var i=jn,a=Cg.transition;Cg.transition=null;try{jn=4,O3(t,e,n,r)}finally{jn=i,Cg.transition=a}}function O3(t,e,n,r){if(LS){var i=YN(t,e,n,r);if(i===null)TT(t,e,r,DS,n),x8(t,r);else if(Ame(i,t,e,n,r))r.stopPropagation();else if(x8(t,r),e&4&&-1<Eme.indexOf(t)){for(;i!==null;){var a=k1(i);if(a!==null&&HK(a),a=YN(t,e,n,r),a===null&&TT(t,e,r,DS,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else TT(t,e,r,null,n)}}var DS=null;function YN(t,e,n,r){if(DS=null,t=S3(r),t=Lh(t),t!==null)if(e=Bp(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LK(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return DS=t,null}function ZK(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mme()){case E3:return 1;case UK:return 4;case $S:case gme:return 16;case zK:return 536870912;default:return 16}default:return 16}}var Wf=null,T3=null,j2=null;function XK(){if(j2)return j2;var t,e=T3,n=e.length,r,i="value"in Wf?Wf.value:Wf.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return j2=i.slice(t,1<r?1-r:void 0)}function $2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fx(){return!0}function E8(){return!1}function zs(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fx:E8,this.isPropagationStopped=E8,this}return Sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fx)},persist:function(){},isPersistent:fx}),e}var Yy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C3=zs(Yy),A1=Sr({},Yy,{view:0,detail:0}),Cme=zs(A1),wT,bT,d0,h5=Sr({},A1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P3,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==d0&&(d0&&t.type==="mousemove"?(wT=t.screenX-d0.screenX,bT=t.screenY-d0.screenY):bT=wT=0,d0=t),wT)},movementY:function(t){return"movementY"in t?t.movementY:bT}}),A8=zs(h5),Pme=Sr({},h5,{dataTransfer:0}),Nme=zs(Pme),Ime=Sr({},A1,{relatedTarget:0}),_T=zs(Ime),Rme=Sr({},Yy,{animationName:0,elapsedTime:0,pseudoElement:0}),jme=zs(Rme),$me=Sr({},Yy,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mme=zs($me),Lme=Sr({},Yy,{data:0}),k8=zs(Lme),Dme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ume(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bme[t])?!!e[t]:!1}function P3(){return Ume}var zme=Sr({},A1,{key:function(t){if(t.key){var e=Dme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fme[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P3,charCode:function(t){return t.type==="keypress"?$2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vme=zs(zme),Wme=Sr({},h5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O8=zs(Wme),Hme=Sr({},A1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P3}),qme=zs(Hme),Gme=Sr({},Yy,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kme=zs(Gme),Yme=Sr({},h5,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zme=zs(Yme),Xme=[9,13,27,32],N3=Eu&&"CompositionEvent"in window,rw=null;Eu&&"documentMode"in document&&(rw=document.documentMode);var Jme=Eu&&"TextEvent"in window&&!rw,JK=Eu&&(!N3||rw&&8<rw&&11>=rw),T8=" ",C8=!1;function QK(t,e){switch(t){case"keyup":return Xme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eY(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ym=!1;function Qme(t,e){switch(t){case"compositionend":return eY(e);case"keypress":return e.which!==32?null:(C8=!0,T8);case"textInput":return t=e.data,t===T8&&C8?null:t;default:return null}}function ege(t,e){if(Ym)return t==="compositionend"||!N3&&QK(t,e)?(t=XK(),j2=T3=Wf=null,Ym=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JK&&e.locale!=="ko"?null:e.data;default:return null}}var tge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tge[t.type]:e==="textarea"}function tY(t,e,n,r){IK(r),e=FS(e,"onChange"),0<e.length&&(n=new C3("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var iw=null,Bw=null;function nge(t){dY(t,0)}function p5(t){var e=Jm(t);if(AK(e))return t}function rge(t,e){if(t==="change")return e}var nY=!1;if(Eu){var xT;if(Eu){var ST="oninput"in document;if(!ST){var N8=document.createElement("div");N8.setAttribute("oninput","return;"),ST=typeof N8.oninput=="function"}xT=ST}else xT=!1;nY=xT&&(!document.documentMode||9<document.documentMode)}function I8(){iw&&(iw.detachEvent("onpropertychange",rY),Bw=iw=null)}function rY(t){if(t.propertyName==="value"&&p5(Bw)){var e=[];tY(e,Bw,t,S3(t)),MK(nge,e)}}function ige(t,e,n){t==="focusin"?(I8(),iw=e,Bw=n,iw.attachEvent("onpropertychange",rY)):t==="focusout"&&I8()}function age(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return p5(Bw)}function sge(t,e){if(t==="click")return p5(e)}function oge(t,e){if(t==="input"||t==="change")return p5(e)}function lge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bl=typeof Object.is=="function"?Object.is:lge;function Uw(t,e){if(bl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!NN.call(e,i)||!bl(t[i],e[i]))return!1}return!0}function R8(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j8(t,e){var n=R8(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R8(n)}}function iY(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iY(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aY(){for(var t=window,e=IS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=IS(t.document)}return e}function I3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cge(t){var e=aY(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iY(n.ownerDocument.documentElement,n)){if(r!==null&&I3(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=j8(n,a);var s=j8(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uge=Eu&&"documentMode"in document&&11>=document.documentMode,Zm=null,ZN=null,aw=null,XN=!1;function $8(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;XN||Zm==null||Zm!==IS(r)||(r=Zm,"selectionStart"in r&&I3(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),aw&&Uw(aw,r)||(aw=r,r=FS(ZN,"onSelect"),0<r.length&&(e=new C3("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zm)))}function dx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xm={animationend:dx("Animation","AnimationEnd"),animationiteration:dx("Animation","AnimationIteration"),animationstart:dx("Animation","AnimationStart"),transitionend:dx("Transition","TransitionEnd")},ET={},sY={};Eu&&(sY=document.createElement("div").style,"AnimationEvent"in window||(delete Xm.animationend.animation,delete Xm.animationiteration.animation,delete Xm.animationstart.animation),"TransitionEvent"in window||delete Xm.transitionend.transition);function m5(t){if(ET[t])return ET[t];if(!Xm[t])return t;var e=Xm[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sY)return ET[t]=e[n];return t}var oY=m5("animationend"),lY=m5("animationiteration"),cY=m5("animationstart"),uY=m5("transitionend"),fY=new Map,M8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nd(t,e){fY.set(t,e),Fp(e,[t])}for(var AT=0;AT<M8.length;AT++){var kT=M8[AT],fge=kT.toLowerCase(),dge=kT[0].toUpperCase()+kT.slice(1);Nd(fge,"on"+dge)}Nd(oY,"onAnimationEnd");Nd(lY,"onAnimationIteration");Nd(cY,"onAnimationStart");Nd("dblclick","onDoubleClick");Nd("focusin","onFocus");Nd("focusout","onBlur");Nd(uY,"onTransitionEnd");Xg("onMouseEnter",["mouseout","mouseover"]);Xg("onMouseLeave",["mouseout","mouseover"]);Xg("onPointerEnter",["pointerout","pointerover"]);Xg("onPointerLeave",["pointerout","pointerover"]);Fp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var B0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hge=new Set("cancel close invalid load scroll toggle".split(" ").concat(B0));function L8(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fme(r,e,void 0,t),t.currentTarget=null}function dY(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;L8(i,o,c),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;L8(i,o,c),a=l}}}if(jS)throw t=qN,jS=!1,qN=null,t}function rr(t,e){var n=e[nI];n===void 0&&(n=e[nI]=new Set);var r=t+"__bubble";n.has(r)||(hY(e,t,2,!1),n.add(r))}function OT(t,e,n){var r=0;e&&(r|=4),hY(n,t,r,e)}var hx="_reactListening"+Math.random().toString(36).slice(2);function zw(t){if(!t[hx]){t[hx]=!0,bK.forEach(function(n){n!=="selectionchange"&&(hge.has(n)||OT(n,!1,t),OT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hx]||(e[hx]=!0,OT("selectionchange",!1,e))}}function hY(t,e,n,r){switch(ZK(e)){case 1:var i=Ome;break;case 4:i=Tme;break;default:i=O3}n=i.bind(null,e,n,t),i=void 0,!HN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function TT(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Lh(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}MK(function(){var c=a,u=S3(n),f=[];e:{var d=fY.get(t);if(d!==void 0){var h=C3,p=t;switch(t){case"keypress":if($2(n)===0)break e;case"keydown":case"keyup":h=Vme;break;case"focusin":p="focus",h=_T;break;case"focusout":p="blur",h=_T;break;case"beforeblur":case"afterblur":h=_T;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=A8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Nme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=qme;break;case oY:case lY:case cY:h=jme;break;case uY:h=Kme;break;case"scroll":h=Cme;break;case"wheel":h=Zme;break;case"copy":case"cut":case"paste":h=Mme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=O8}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var v=c,w;v!==null;){w=v;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,g!==null&&(_=Mw(v,g),_!=null&&m.push(Vw(v,_,w)))),y)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==VN&&(p=n.relatedTarget||n.fromElement)&&(Lh(p)||p[Au]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Lh(p):null,p!==null&&(y=Bp(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=A8,_="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=O8,_="onPointerLeave",g="onPointerEnter",v="pointer"),y=h==null?d:Jm(h),w=p==null?d:Jm(p),d=new m(_,v+"leave",h,n,u),d.target=y,d.relatedTarget=w,_=null,Lh(u)===c&&(m=new m(g,v+"enter",p,n,u),m.target=w,m.relatedTarget=y,_=m),y=_,h&&p)t:{for(m=h,g=p,v=0,w=m;w;w=fm(w))v++;for(w=0,_=g;_;_=fm(_))w++;for(;0<v-w;)m=fm(m),v--;for(;0<w-v;)g=fm(g),w--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=fm(m),g=fm(g)}m=null}else m=null;h!==null&&D8(f,d,h,m,!1),p!==null&&y!==null&&D8(f,y,p,m,!0)}}e:{if(d=c?Jm(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=rge;else if(P8(d))if(nY)x=oge;else{x=age;var E=ige}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=sge);if(x&&(x=x(t,c))){tY(f,x,n,u);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&DN(d,"number",d.value)}switch(E=c?Jm(c):window,t){case"focusin":(P8(E)||E.contentEditable==="true")&&(Zm=E,ZN=c,aw=null);break;case"focusout":aw=ZN=Zm=null;break;case"mousedown":XN=!0;break;case"contextmenu":case"mouseup":case"dragend":XN=!1,$8(f,n,u);break;case"selectionchange":if(uge)break;case"keydown":case"keyup":$8(f,n,u)}var T;if(N3)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Ym?QK(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(JK&&n.locale!=="ko"&&(Ym||O!=="onCompositionStart"?O==="onCompositionEnd"&&Ym&&(T=XK()):(Wf=u,T3="value"in Wf?Wf.value:Wf.textContent,Ym=!0)),E=FS(c,O),0<E.length&&(O=new k8(O,t,null,n,u),f.push({event:O,listeners:E}),T?O.data=T:(T=eY(n),T!==null&&(O.data=T)))),(T=Jme?Qme(t,n):ege(t,n))&&(c=FS(c,"onBeforeInput"),0<c.length&&(u=new k8("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=T))}dY(f,e)})}function Vw(t,e,n){return{instance:t,listener:e,currentTarget:n}}function FS(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Mw(t,n),a!=null&&r.unshift(Vw(t,a,i)),a=Mw(t,e),a!=null&&r.push(Vw(t,a,i))),t=t.return}return r}function fm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function D8(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=Mw(n,a),l!=null&&s.unshift(Vw(n,l,o))):i||(l=Mw(n,a),l!=null&&s.push(Vw(n,l,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var pge=/\r\n?/g,mge=/\u0000|\uFFFD/g;function F8(t){return(typeof t=="string"?t:""+t).replace(pge,`
`).replace(mge,"")}function px(t,e,n){if(e=F8(e),F8(t)!==e&&n)throw Error(Fe(425))}function BS(){}var JN=null,QN=null;function eI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tI=typeof setTimeout=="function"?setTimeout:void 0,gge=typeof clearTimeout=="function"?clearTimeout:void 0,B8=typeof Promise=="function"?Promise:void 0,yge=typeof queueMicrotask=="function"?queueMicrotask:typeof B8<"u"?function(t){return B8.resolve(null).then(t).catch(vge)}:tI;function vge(t){setTimeout(function(){throw t})}function CT(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fw(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fw(e)}function td(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U8(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zy=Math.random().toString(36).slice(2),ec="__reactFiber$"+Zy,Ww="__reactProps$"+Zy,Au="__reactContainer$"+Zy,nI="__reactEvents$"+Zy,wge="__reactListeners$"+Zy,bge="__reactHandles$"+Zy;function Lh(t){var e=t[ec];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Au]||n[ec]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U8(t);t!==null;){if(n=t[ec])return n;t=U8(t)}return e}t=n,n=t.parentNode}return null}function k1(t){return t=t[ec]||t[Au],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jm(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function g5(t){return t[Ww]||null}var rI=[],Qm=-1;function Id(t){return{current:t}}function ur(t){0>Qm||(t.current=rI[Qm],rI[Qm]=null,Qm--)}function Jn(t,e){Qm++,rI[Qm]=t.current,t.current=e}var vd={},ga=Id(vd),Za=Id(!1),fp=vd;function Jg(t,e){var n=t.type.contextTypes;if(!n)return vd;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xa(t){return t=t.childContextTypes,t!=null}function US(){ur(Za),ur(ga)}function z8(t,e,n){if(ga.current!==vd)throw Error(Fe(168));Jn(ga,e),Jn(Za,n)}function pY(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,ime(t)||"Unknown",i));return Sr({},n,r)}function zS(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vd,fp=ga.current,Jn(ga,t),Jn(Za,Za.current),!0}function V8(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=pY(t,e,fp),r.__reactInternalMemoizedMergedChildContext=t,ur(Za),ur(ga),Jn(ga,t)):ur(Za),Jn(Za,n)}var nu=null,y5=!1,PT=!1;function mY(t){nu===null?nu=[t]:nu.push(t)}function _ge(t){y5=!0,mY(t)}function Rd(){if(!PT&&nu!==null){PT=!0;var t=0,e=jn;try{var n=nu;for(jn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}nu=null,y5=!1}catch(i){throw nu!==null&&(nu=nu.slice(t+1)),BK(E3,Rd),i}finally{jn=e,PT=!1}}return null}var eg=[],tg=0,VS=null,WS=0,lo=[],co=0,dp=null,cu=1,uu="";function bh(t,e){eg[tg++]=WS,eg[tg++]=VS,VS=t,WS=e}function gY(t,e,n){lo[co++]=cu,lo[co++]=uu,lo[co++]=dp,dp=t;var r=cu;t=uu;var i=32-ml(r)-1;r&=~(1<<i),n+=1;var a=32-ml(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,cu=1<<32-ml(e)+i|n<<i|r,uu=a+t}else cu=1<<a|n<<i|r,uu=t}function R3(t){t.return!==null&&(bh(t,1),gY(t,1,0))}function j3(t){for(;t===VS;)VS=eg[--tg],eg[tg]=null,WS=eg[--tg],eg[tg]=null;for(;t===dp;)dp=lo[--co],lo[co]=null,uu=lo[--co],lo[co]=null,cu=lo[--co],lo[co]=null}var Rs=null,Ps=null,hr=!1,cl=null;function yY(t,e){var n=po(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function W8(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rs=t,Ps=td(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rs=t,Ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dp!==null?{id:cu,overflow:uu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=po(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rs=t,Ps=null,!0):!1;default:return!1}}function iI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aI(t){if(hr){var e=Ps;if(e){var n=e;if(!W8(t,e)){if(iI(t))throw Error(Fe(418));e=td(n.nextSibling);var r=Rs;e&&W8(t,e)?yY(r,n):(t.flags=t.flags&-4097|2,hr=!1,Rs=t)}}else{if(iI(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,hr=!1,Rs=t}}}function H8(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rs=t}function mx(t){if(t!==Rs)return!1;if(!hr)return H8(t),hr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eI(t.type,t.memoizedProps)),e&&(e=Ps)){if(iI(t))throw vY(),Error(Fe(418));for(;e;)yY(t,e),e=td(e.nextSibling)}if(H8(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ps=td(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ps=null}}else Ps=Rs?td(t.stateNode.nextSibling):null;return!0}function vY(){for(var t=Ps;t;)t=td(t.nextSibling)}function Qg(){Ps=Rs=null,hr=!1}function $3(t){cl===null?cl=[t]:cl.push(t)}var xge=Wu.ReactCurrentBatchConfig;function h0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function gx(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q8(t){var e=t._init;return e(t._payload)}function wY(t){function e(g,v){if(t){var w=g.deletions;w===null?(g.deletions=[v],g.flags|=16):w.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=ad(g,v),g.index=0,g.sibling=null,g}function a(g,v,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<v?(g.flags|=2,v):w):(g.flags|=2,v)):(g.flags|=1048576,v)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,v,w,_){return v===null||v.tag!==6?(v=LT(w,g.mode,_),v.return=g,v):(v=i(v,w),v.return=g,v)}function l(g,v,w,_){var x=w.type;return x===Km?u(g,v,w.props.children,_,w.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Pf&&q8(x)===v.type)?(_=i(v,w.props),_.ref=h0(g,v,w),_.return=g,_):(_=z2(w.type,w.key,w.props,null,g.mode,_),_.ref=h0(g,v,w),_.return=g,_)}function c(g,v,w,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=DT(w,g.mode,_),v.return=g,v):(v=i(v,w.children||[]),v.return=g,v)}function u(g,v,w,_,x){return v===null||v.tag!==7?(v=Qh(w,g.mode,_,x),v.return=g,v):(v=i(v,w),v.return=g,v)}function f(g,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=LT(""+v,g.mode,w),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ax:return w=z2(v.type,v.key,v.props,null,g.mode,w),w.ref=h0(g,null,v),w.return=g,w;case Gm:return v=DT(v,g.mode,w),v.return=g,v;case Pf:var _=v._init;return f(g,_(v._payload),w)}if(D0(v)||l0(v))return v=Qh(v,g.mode,w,null),v.return=g,v;gx(g,v)}return null}function d(g,v,w,_){var x=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return x!==null?null:o(g,v,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ax:return w.key===x?l(g,v,w,_):null;case Gm:return w.key===x?c(g,v,w,_):null;case Pf:return x=w._init,d(g,v,x(w._payload),_)}if(D0(w)||l0(w))return x!==null?null:u(g,v,w,_,null);gx(g,w)}return null}function h(g,v,w,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(w)||null,o(v,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ax:return g=g.get(_.key===null?w:_.key)||null,l(v,g,_,x);case Gm:return g=g.get(_.key===null?w:_.key)||null,c(v,g,_,x);case Pf:var E=_._init;return h(g,v,w,E(_._payload),x)}if(D0(_)||l0(_))return g=g.get(w)||null,u(v,g,_,x,null);gx(v,_)}return null}function p(g,v,w,_){for(var x=null,E=null,T=v,O=v=0,R=null;T!==null&&O<w.length;O++){T.index>O?(R=T,T=null):R=T.sibling;var M=d(g,T,w[O],_);if(M===null){T===null&&(T=R);break}t&&T&&M.alternate===null&&e(g,T),v=a(M,v,O),E===null?x=M:E.sibling=M,E=M,T=R}if(O===w.length)return n(g,T),hr&&bh(g,O),x;if(T===null){for(;O<w.length;O++)T=f(g,w[O],_),T!==null&&(v=a(T,v,O),E===null?x=T:E.sibling=T,E=T);return hr&&bh(g,O),x}for(T=r(g,T);O<w.length;O++)R=h(T,g,O,w[O],_),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?O:R.key),v=a(R,v,O),E===null?x=R:E.sibling=R,E=R);return t&&T.forEach(function(N){return e(g,N)}),hr&&bh(g,O),x}function m(g,v,w,_){var x=l0(w);if(typeof x!="function")throw Error(Fe(150));if(w=x.call(w),w==null)throw Error(Fe(151));for(var E=x=null,T=v,O=v=0,R=null,M=w.next();T!==null&&!M.done;O++,M=w.next()){T.index>O?(R=T,T=null):R=T.sibling;var N=d(g,T,M.value,_);if(N===null){T===null&&(T=R);break}t&&T&&N.alternate===null&&e(g,T),v=a(N,v,O),E===null?x=N:E.sibling=N,E=N,T=R}if(M.done)return n(g,T),hr&&bh(g,O),x;if(T===null){for(;!M.done;O++,M=w.next())M=f(g,M.value,_),M!==null&&(v=a(M,v,O),E===null?x=M:E.sibling=M,E=M);return hr&&bh(g,O),x}for(T=r(g,T);!M.done;O++,M=w.next())M=h(T,g,O,M.value,_),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?O:M.key),v=a(M,v,O),E===null?x=M:E.sibling=M,E=M);return t&&T.forEach(function(j){return e(g,j)}),hr&&bh(g,O),x}function y(g,v,w,_){if(typeof w=="object"&&w!==null&&w.type===Km&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ax:e:{for(var x=w.key,E=v;E!==null;){if(E.key===x){if(x=w.type,x===Km){if(E.tag===7){n(g,E.sibling),v=i(E,w.props.children),v.return=g,g=v;break e}}else if(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Pf&&q8(x)===E.type){n(g,E.sibling),v=i(E,w.props),v.ref=h0(g,E,w),v.return=g,g=v;break e}n(g,E);break}else e(g,E);E=E.sibling}w.type===Km?(v=Qh(w.props.children,g.mode,_,w.key),v.return=g,g=v):(_=z2(w.type,w.key,w.props,null,g.mode,_),_.ref=h0(g,v,w),_.return=g,g=_)}return s(g);case Gm:e:{for(E=w.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(g,v.sibling),v=i(v,w.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=DT(w,g.mode,_),v.return=g,g=v}return s(g);case Pf:return E=w._init,y(g,v,E(w._payload),_)}if(D0(w))return p(g,v,w,_);if(l0(w))return m(g,v,w,_);gx(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,w),v.return=g,g=v):(n(g,v),v=LT(w,g.mode,_),v.return=g,g=v),s(g)):n(g,v)}return y}var ey=wY(!0),bY=wY(!1),HS=Id(null),qS=null,ng=null,M3=null;function L3(){M3=ng=qS=null}function D3(t){var e=HS.current;ur(HS),t._currentValue=e}function sI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pg(t,e){qS=t,M3=ng=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ga=!0),t.firstContext=null)}function Eo(t){var e=t._currentValue;if(M3!==t)if(t={context:t,memoizedValue:e,next:null},ng===null){if(qS===null)throw Error(Fe(308));ng=t,qS.dependencies={lanes:0,firstContext:t}}else ng=ng.next=t;return e}var Dh=null;function F3(t){Dh===null?Dh=[t]:Dh.push(t)}function _Y(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,F3(e)):(n.next=i.next,i.next=n),e.interleaved=n,ku(t,r)}function ku(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nf=!1;function B3(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xY(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nd(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ku(t,n)}return i=r.interleaved,i===null?(e.next=e,F3(r)):(e.next=i.next,i.next=e),r.interleaved=e,ku(t,n)}function M2(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A3(t,n)}}function G8(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function GS(t,e,n,r){var i=t.updateQueue;Nf=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,u=c=l=null,o=a;do{var d=o.lane,h=o.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,m=o;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Sr({},f,d);break e;case 2:Nf=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);pp|=s,t.lanes=s,t.memoizedState=f}}function K8(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var O1={},fc=Id(O1),Hw=Id(O1),qw=Id(O1);function Fh(t){if(t===O1)throw Error(Fe(174));return t}function U3(t,e){switch(Jn(qw,e),Jn(Hw,t),Jn(fc,O1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:BN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=BN(e,t)}ur(fc),Jn(fc,e)}function ty(){ur(fc),ur(Hw),ur(qw)}function SY(t){Fh(qw.current);var e=Fh(fc.current),n=BN(e,t.type);e!==n&&(Jn(Hw,t),Jn(fc,n))}function z3(t){Hw.current===t&&(ur(fc),ur(Hw))}var wr=Id(0);function KS(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var NT=[];function V3(){for(var t=0;t<NT.length;t++)NT[t]._workInProgressVersionPrimary=null;NT.length=0}var L2=Wu.ReactCurrentDispatcher,IT=Wu.ReactCurrentBatchConfig,hp=0,xr=null,vi=null,Pi=null,YS=!1,sw=!1,Gw=0,Sge=0;function na(){throw Error(Fe(321))}function W3(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bl(t[n],e[n]))return!1;return!0}function H3(t,e,n,r,i,a){if(hp=a,xr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,L2.current=t===null||t.memoizedState===null?Oge:Tge,t=n(r,i),sw){a=0;do{if(sw=!1,Gw=0,25<=a)throw Error(Fe(301));a+=1,Pi=vi=null,e.updateQueue=null,L2.current=Cge,t=n(r,i)}while(sw)}if(L2.current=ZS,e=vi!==null&&vi.next!==null,hp=0,Pi=vi=xr=null,YS=!1,e)throw Error(Fe(300));return t}function q3(){var t=Gw!==0;return Gw=0,t}function Yl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pi===null?xr.memoizedState=Pi=t:Pi=Pi.next=t,Pi}function Ao(){if(vi===null){var t=xr.alternate;t=t!==null?t.memoizedState:null}else t=vi.next;var e=Pi===null?xr.memoizedState:Pi.next;if(e!==null)Pi=e,vi=t;else{if(t===null)throw Error(Fe(310));vi=t,t={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},Pi===null?xr.memoizedState=Pi=t:Pi=Pi.next=t}return Pi}function Kw(t,e){return typeof e=="function"?e(t):e}function RT(t){var e=Ao(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=vi,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,c=a;do{var u=c.lane;if((hp&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,xr.lanes|=u,pp|=u}c=c.next}while(c!==null&&c!==a);l===null?s=r:l.next=o,bl(r,e.memoizedState)||(Ga=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,xr.lanes|=a,pp|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jT(t){var e=Ao(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);bl(a,e.memoizedState)||(Ga=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function EY(){}function AY(t,e){var n=xr,r=Ao(),i=e(),a=!bl(r.memoizedState,i);if(a&&(r.memoizedState=i,Ga=!0),r=r.queue,G3(TY.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Pi!==null&&Pi.memoizedState.tag&1){if(n.flags|=2048,Yw(9,OY.bind(null,n,r,i,e),void 0,null),Ri===null)throw Error(Fe(349));hp&30||kY(n,e,i)}return i}function kY(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xr.updateQueue,e===null?(e={lastEffect:null,stores:null},xr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OY(t,e,n,r){e.value=n,e.getSnapshot=r,CY(e)&&PY(t)}function TY(t,e,n){return n(function(){CY(e)&&PY(t)})}function CY(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bl(t,n)}catch{return!0}}function PY(t){var e=ku(t,1);e!==null&&gl(e,t,1,-1)}function Y8(t){var e=Yl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kw,lastRenderedState:t},e.queue=t,t=t.dispatch=kge.bind(null,xr,t),[e.memoizedState,t]}function Yw(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xr.updateQueue,e===null?(e={lastEffect:null,stores:null},xr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function NY(){return Ao().memoizedState}function D2(t,e,n,r){var i=Yl();xr.flags|=t,i.memoizedState=Yw(1|e,n,void 0,r===void 0?null:r)}function v5(t,e,n,r){var i=Ao();r=r===void 0?null:r;var a=void 0;if(vi!==null){var s=vi.memoizedState;if(a=s.destroy,r!==null&&W3(r,s.deps)){i.memoizedState=Yw(e,n,a,r);return}}xr.flags|=t,i.memoizedState=Yw(1|e,n,a,r)}function Z8(t,e){return D2(8390656,8,t,e)}function G3(t,e){return v5(2048,8,t,e)}function IY(t,e){return v5(4,2,t,e)}function RY(t,e){return v5(4,4,t,e)}function jY(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $Y(t,e,n){return n=n!=null?n.concat([t]):null,v5(4,4,jY.bind(null,e,t),n)}function K3(){}function MY(t,e){var n=Ao();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W3(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LY(t,e){var n=Ao();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W3(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DY(t,e,n){return hp&21?(bl(n,e)||(n=VK(),xr.lanes|=n,pp|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ga=!0),t.memoizedState=n)}function Ege(t,e){var n=jn;jn=n!==0&&4>n?n:4,t(!0);var r=IT.transition;IT.transition={};try{t(!1),e()}finally{jn=n,IT.transition=r}}function FY(){return Ao().memoizedState}function Age(t,e,n){var r=id(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BY(t))UY(e,n);else if(n=_Y(t,e,n,r),n!==null){var i=Ra();gl(n,t,r,i),zY(n,e,r)}}function kge(t,e,n){var r=id(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BY(t))UY(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,bl(o,s)){var l=e.interleaved;l===null?(i.next=i,F3(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=_Y(t,e,i,r),n!==null&&(i=Ra(),gl(n,t,r,i),zY(n,e,r))}}function BY(t){var e=t.alternate;return t===xr||e!==null&&e===xr}function UY(t,e){sw=YS=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zY(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A3(t,n)}}var ZS={readContext:Eo,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useInsertionEffect:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useSyncExternalStore:na,useId:na,unstable_isNewReconciler:!1},Oge={readContext:Eo,useCallback:function(t,e){return Yl().memoizedState=[t,e===void 0?null:e],t},useContext:Eo,useEffect:Z8,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,D2(4194308,4,jY.bind(null,e,t),n)},useLayoutEffect:function(t,e){return D2(4194308,4,t,e)},useInsertionEffect:function(t,e){return D2(4,2,t,e)},useMemo:function(t,e){var n=Yl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Age.bind(null,xr,t),[r.memoizedState,t]},useRef:function(t){var e=Yl();return t={current:t},e.memoizedState=t},useState:Y8,useDebugValue:K3,useDeferredValue:function(t){return Yl().memoizedState=t},useTransition:function(){var t=Y8(!1),e=t[0];return t=Ege.bind(null,t[1]),Yl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xr,i=Yl();if(hr){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),Ri===null)throw Error(Fe(349));hp&30||kY(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Z8(TY.bind(null,r,a,t),[t]),r.flags|=2048,Yw(9,OY.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Yl(),e=Ri.identifierPrefix;if(hr){var n=uu,r=cu;n=(r&~(1<<32-ml(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gw++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sge++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tge={readContext:Eo,useCallback:MY,useContext:Eo,useEffect:G3,useImperativeHandle:$Y,useInsertionEffect:IY,useLayoutEffect:RY,useMemo:LY,useReducer:RT,useRef:NY,useState:function(){return RT(Kw)},useDebugValue:K3,useDeferredValue:function(t){var e=Ao();return DY(e,vi.memoizedState,t)},useTransition:function(){var t=RT(Kw)[0],e=Ao().memoizedState;return[t,e]},useMutableSource:EY,useSyncExternalStore:AY,useId:FY,unstable_isNewReconciler:!1},Cge={readContext:Eo,useCallback:MY,useContext:Eo,useEffect:G3,useImperativeHandle:$Y,useInsertionEffect:IY,useLayoutEffect:RY,useMemo:LY,useReducer:jT,useRef:NY,useState:function(){return jT(Kw)},useDebugValue:K3,useDeferredValue:function(t){var e=Ao();return vi===null?e.memoizedState=t:DY(e,vi.memoizedState,t)},useTransition:function(){var t=jT(Kw)[0],e=Ao().memoizedState;return[t,e]},useMutableSource:EY,useSyncExternalStore:AY,useId:FY,unstable_isNewReconciler:!1};function tl(t,e){if(t&&t.defaultProps){e=Sr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function oI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Sr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var w5={isMounted:function(t){return(t=t._reactInternals)?Bp(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ra(),i=id(t),a=vu(r,i);a.payload=e,n!=null&&(a.callback=n),e=nd(t,a,i),e!==null&&(gl(e,t,i,r),M2(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ra(),i=id(t),a=vu(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=nd(t,a,i),e!==null&&(gl(e,t,i,r),M2(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ra(),r=id(t),i=vu(n,r);i.tag=2,e!=null&&(i.callback=e),e=nd(t,i,r),e!==null&&(gl(e,t,r,n),M2(e,t,r))}};function X8(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Uw(n,r)||!Uw(i,a):!0}function VY(t,e,n){var r=!1,i=vd,a=e.contextType;return typeof a=="object"&&a!==null?a=Eo(a):(i=Xa(e)?fp:ga.current,r=e.contextTypes,a=(r=r!=null)?Jg(t,i):vd),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=w5,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function J8(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&w5.enqueueReplaceState(e,e.state,null)}function lI(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},B3(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Eo(a):(a=Xa(e)?fp:ga.current,i.context=Jg(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(oI(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&w5.enqueueReplaceState(i,i.state,null),GS(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ny(t,e){try{var n="",r=e;do n+=rme(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function $T(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Pge=typeof WeakMap=="function"?WeakMap:Map;function WY(t,e,n){n=vu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){JS||(JS=!0,wI=r),cI(t,e)},n}function HY(t,e,n){n=vu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cI(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){cI(t,e),typeof r!="function"&&(rd===null?rd=new Set([this]):rd.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Q8(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Pge;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Wge.bind(null,t,e,n),e.then(t,t))}function eF(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tF(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vu(-1,1),e.tag=2,nd(n,e,1))),n.lanes|=1),t)}var Nge=Wu.ReactCurrentOwner,Ga=!1;function Ea(t,e,n,r){e.child=t===null?bY(e,null,n,r):ey(e,t.child,n,r)}function nF(t,e,n,r,i){n=n.render;var a=e.ref;return Pg(e,i),r=H3(t,e,n,r,a,i),n=q3(),t!==null&&!Ga?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ou(t,e,i)):(hr&&n&&R3(e),e.flags|=1,Ea(t,e,r,i),e.child)}function rF(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!n$(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,qY(t,e,a,r,i)):(t=z2(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Uw,n(s,r)&&t.ref===e.ref)return Ou(t,e,i)}return e.flags|=1,t=ad(a,r),t.ref=e.ref,t.return=e,e.child=t}function qY(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Uw(a,r)&&t.ref===e.ref)if(Ga=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Ga=!0);else return e.lanes=t.lanes,Ou(t,e,i)}return uI(t,e,n,r,i)}function GY(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(ig,bs),bs|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Jn(ig,bs),bs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Jn(ig,bs),bs|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Jn(ig,bs),bs|=r;return Ea(t,e,i,n),e.child}function KY(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uI(t,e,n,r,i){var a=Xa(n)?fp:ga.current;return a=Jg(e,a),Pg(e,i),n=H3(t,e,n,r,a,i),r=q3(),t!==null&&!Ga?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ou(t,e,i)):(hr&&r&&R3(e),e.flags|=1,Ea(t,e,n,i),e.child)}function iF(t,e,n,r,i){if(Xa(n)){var a=!0;zS(e)}else a=!1;if(Pg(e,i),e.stateNode===null)F2(t,e),VY(e,n,r),lI(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Eo(c):(c=Xa(n)?fp:ga.current,c=Jg(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==c)&&J8(e,s,r,c),Nf=!1;var d=e.memoizedState;s.state=d,GS(e,r,s,i),l=e.memoizedState,o!==r||d!==l||Za.current||Nf?(typeof u=="function"&&(oI(e,n,u,r),l=e.memoizedState),(o=Nf||X8(e,n,o,r,d,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,xY(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:tl(e.type,o),s.props=c,f=e.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Eo(l):(l=Xa(n)?fp:ga.current,l=Jg(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||d!==l)&&J8(e,s,r,l),Nf=!1,d=e.memoizedState,s.state=d,GS(e,r,s,i);var p=e.memoizedState;o!==f||d!==p||Za.current||Nf?(typeof h=="function"&&(oI(e,n,h,r),p=e.memoizedState),(c=Nf||X8(e,n,c,r,d,p,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return fI(t,e,n,r,a,i)}function fI(t,e,n,r,i,a){KY(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&V8(e,n,!1),Ou(t,e,a);r=e.stateNode,Nge.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=ey(e,t.child,null,a),e.child=ey(e,null,o,a)):Ea(t,e,o,a),e.memoizedState=r.state,i&&V8(e,n,!0),e.child}function YY(t){var e=t.stateNode;e.pendingContext?z8(t,e.pendingContext,e.pendingContext!==e.context):e.context&&z8(t,e.context,!1),U3(t,e.containerInfo)}function aF(t,e,n,r,i){return Qg(),$3(i),e.flags|=256,Ea(t,e,n,r),e.child}var dI={dehydrated:null,treeContext:null,retryLane:0};function hI(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZY(t,e,n){var r=e.pendingProps,i=wr.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Jn(wr,i&1),t===null)return aI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=x5(s,r,0,null),t=Qh(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=hI(n),e.memoizedState=dI,t):Y3(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Ige(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ad(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ad(o,a):(a=Qh(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?hI(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=dI,r}return a=t.child,t=a.sibling,r=ad(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Y3(t,e){return e=x5({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yx(t,e,n,r){return r!==null&&$3(r),ey(e,t.child,null,n),t=Y3(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ige(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=$T(Error(Fe(422))),yx(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=x5({mode:"visible",children:r.children},i,0,null),a=Qh(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&ey(e,t.child,null,s),e.child.memoizedState=hI(s),e.memoizedState=dI,a);if(!(e.mode&1))return yx(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Fe(419)),r=$T(a,r,void 0),yx(t,e,s,r)}if(o=(s&t.childLanes)!==0,Ga||o){if(r=Ri,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,ku(t,i),gl(r,t,i,-1))}return t$(),r=$T(Error(Fe(421))),yx(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Hge.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Ps=td(i.nextSibling),Rs=e,hr=!0,cl=null,t!==null&&(lo[co++]=cu,lo[co++]=uu,lo[co++]=dp,cu=t.id,uu=t.overflow,dp=e),e=Y3(e,r.children),e.flags|=4096,e)}function sF(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sI(t.return,e,n)}function MT(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function XY(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Ea(t,e,r.children,n),r=wr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sF(t,n,e);else if(t.tag===19)sF(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Jn(wr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&KS(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),MT(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&KS(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}MT(e,!0,n,null,a);break;case"together":MT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function F2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ou(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pp|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=ad(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ad(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rge(t,e,n){switch(e.tag){case 3:YY(e),Qg();break;case 5:SY(e);break;case 1:Xa(e.type)&&zS(e);break;case 4:U3(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Jn(HS,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Jn(wr,wr.current&1),e.flags|=128,null):n&e.child.childLanes?ZY(t,e,n):(Jn(wr,wr.current&1),t=Ou(t,e,n),t!==null?t.sibling:null);Jn(wr,wr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return XY(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Jn(wr,wr.current),r)break;return null;case 22:case 23:return e.lanes=0,GY(t,e,n)}return Ou(t,e,n)}var JY,pI,QY,eZ;JY=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pI=function(){};QY=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fh(fc.current);var a=null;switch(n){case"input":i=MN(t,i),r=MN(t,r),a=[];break;case"select":i=Sr({},i,{value:void 0}),r=Sr({},r,{value:void 0}),a=[];break;case"textarea":i=FN(t,i),r=FN(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=BS)}UN(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(jw.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(jw.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rr("scroll",t),a||o===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};eZ=function(t,e,n,r){n!==r&&(e.flags|=4)};function p0(t,e){if(!hr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ra(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jge(t,e,n){var r=e.pendingProps;switch(j3(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(e),null;case 1:return Xa(e.type)&&US(),ra(e),null;case 3:return r=e.stateNode,ty(),ur(Za),ur(ga),V3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mx(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cl!==null&&(xI(cl),cl=null))),pI(t,e),ra(e),null;case 5:z3(e);var i=Fh(qw.current);if(n=e.type,t!==null&&e.stateNode!=null)QY(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return ra(e),null}if(t=Fh(fc.current),mx(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[ec]=e,r[Ww]=a,t=(e.mode&1)!==0,n){case"dialog":rr("cancel",r),rr("close",r);break;case"iframe":case"object":case"embed":rr("load",r);break;case"video":case"audio":for(i=0;i<B0.length;i++)rr(B0[i],r);break;case"source":rr("error",r);break;case"img":case"image":case"link":rr("error",r),rr("load",r);break;case"details":rr("toggle",r);break;case"input":m8(r,a),rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},rr("invalid",r);break;case"textarea":y8(r,a),rr("invalid",r)}UN(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&px(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&px(r.textContent,o,t),i=["children",""+o]):jw.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&rr("scroll",r)}switch(n){case"input":sx(r),g8(r,a,!0);break;case"textarea":sx(r),v8(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=BS)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TK(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ec]=e,t[Ww]=r,JY(t,e,!1,!1),e.stateNode=t;e:{switch(s=zN(n,r),n){case"dialog":rr("cancel",t),rr("close",t),i=r;break;case"iframe":case"object":case"embed":rr("load",t),i=r;break;case"video":case"audio":for(i=0;i<B0.length;i++)rr(B0[i],t);i=r;break;case"source":rr("error",t),i=r;break;case"img":case"image":case"link":rr("error",t),rr("load",t),i=r;break;case"details":rr("toggle",t),i=r;break;case"input":m8(t,r),i=MN(t,r),rr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Sr({},r,{value:void 0}),rr("invalid",t);break;case"textarea":y8(t,r),i=FN(t,r),rr("invalid",t);break;default:i=r}UN(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?NK(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CK(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$w(t,l):typeof l=="number"&&$w(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jw.hasOwnProperty(a)?l!=null&&a==="onScroll"&&rr("scroll",t):l!=null&&w3(t,a,l,s))}switch(n){case"input":sx(t),g8(t,r,!1);break;case"textarea":sx(t),v8(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yd(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?kg(t,!!r.multiple,a,!1):r.defaultValue!=null&&kg(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=BS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ra(e),null;case 6:if(t&&e.stateNode!=null)eZ(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=Fh(qw.current),Fh(fc.current),mx(e)){if(r=e.stateNode,n=e.memoizedProps,r[ec]=e,(a=r.nodeValue!==n)&&(t=Rs,t!==null))switch(t.tag){case 3:px(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&px(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ec]=e,e.stateNode=r}return ra(e),null;case 13:if(ur(wr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(hr&&Ps!==null&&e.mode&1&&!(e.flags&128))vY(),Qg(),e.flags|=98560,a=!1;else if(a=mx(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Fe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Fe(317));a[ec]=e}else Qg(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ra(e),a=!1}else cl!==null&&(xI(cl),cl=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||wr.current&1?_i===0&&(_i=3):t$())),e.updateQueue!==null&&(e.flags|=4),ra(e),null);case 4:return ty(),pI(t,e),t===null&&zw(e.stateNode.containerInfo),ra(e),null;case 10:return D3(e.type._context),ra(e),null;case 17:return Xa(e.type)&&US(),ra(e),null;case 19:if(ur(wr),a=e.memoizedState,a===null)return ra(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)p0(a,!1);else{if(_i!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=KS(t),s!==null){for(e.flags|=128,p0(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Jn(wr,wr.current&1|2),e.child}t=t.sibling}a.tail!==null&&Br()>ry&&(e.flags|=128,r=!0,p0(a,!1),e.lanes=4194304)}else{if(!r)if(t=KS(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),p0(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!hr)return ra(e),null}else 2*Br()-a.renderingStartTime>ry&&n!==1073741824&&(e.flags|=128,r=!0,p0(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Br(),e.sibling=null,n=wr.current,Jn(wr,r?n&1|2:n&1),e):(ra(e),null);case 22:case 23:return e$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bs&1073741824&&(ra(e),e.subtreeFlags&6&&(e.flags|=8192)):ra(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function $ge(t,e){switch(j3(e),e.tag){case 1:return Xa(e.type)&&US(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ty(),ur(Za),ur(ga),V3(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return z3(e),null;case 13:if(ur(wr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Qg()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ur(wr),null;case 4:return ty(),null;case 10:return D3(e.type._context),null;case 22:case 23:return e$(),null;case 24:return null;default:return null}}var vx=!1,fa=!1,Mge=typeof WeakSet=="function"?WeakSet:Set,it=null;function rg(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ir(t,e,r)}else n.current=null}function mI(t,e,n){try{n()}catch(r){Ir(t,e,r)}}var oF=!1;function Lge(t,e){if(JN=LS,t=aY(),I3(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++c===i&&(o=s),d===a&&++u===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(QN={focusedElem:t,selectionRange:n},LS=!1,it=e;it!==null;)if(e=it,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,it=t;else for(;it!==null;){e=it;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:tl(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(_){Ir(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,it=t;break}it=e.return}return p=oF,oF=!1,p}function ow(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&mI(e,n,a)}i=i.next}while(i!==r)}}function b5(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tZ(t){var e=t.alternate;e!==null&&(t.alternate=null,tZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ec],delete e[Ww],delete e[nI],delete e[wge],delete e[bge])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nZ(t){return t.tag===5||t.tag===3||t.tag===4}function lF(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=BS));else if(r!==4&&(t=t.child,t!==null))for(yI(t,e,n),t=t.sibling;t!==null;)yI(t,e,n),t=t.sibling}function vI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vI(t,e,n),t=t.sibling;t!==null;)vI(t,e,n),t=t.sibling}var Ki=null,il=!1;function vf(t,e,n){for(n=n.child;n!==null;)rZ(t,e,n),n=n.sibling}function rZ(t,e,n){if(uc&&typeof uc.onCommitFiberUnmount=="function")try{uc.onCommitFiberUnmount(d5,n)}catch{}switch(n.tag){case 5:fa||rg(n,e);case 6:var r=Ki,i=il;Ki=null,vf(t,e,n),Ki=r,il=i,Ki!==null&&(il?(t=Ki,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ki.removeChild(n.stateNode));break;case 18:Ki!==null&&(il?(t=Ki,n=n.stateNode,t.nodeType===8?CT(t.parentNode,n):t.nodeType===1&&CT(t,n),Fw(t)):CT(Ki,n.stateNode));break;case 4:r=Ki,i=il,Ki=n.stateNode.containerInfo,il=!0,vf(t,e,n),Ki=r,il=i;break;case 0:case 11:case 14:case 15:if(!fa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&mI(n,e,s),i=i.next}while(i!==r)}vf(t,e,n);break;case 1:if(!fa&&(rg(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ir(n,e,o)}vf(t,e,n);break;case 21:vf(t,e,n);break;case 22:n.mode&1?(fa=(r=fa)||n.memoizedState!==null,vf(t,e,n),fa=r):vf(t,e,n);break;default:vf(t,e,n)}}function cF(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Mge),e.forEach(function(r){var i=qge.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ki=o.stateNode,il=!1;break e;case 3:Ki=o.stateNode.containerInfo,il=!0;break e;case 4:Ki=o.stateNode.containerInfo,il=!0;break e}o=o.return}if(Ki===null)throw Error(Fe(160));rZ(a,s,i),Ki=null,il=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ir(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iZ(e,t),e=e.sibling}function iZ(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zo(e,t),Vl(t),r&4){try{ow(3,t,t.return),b5(3,t)}catch(m){Ir(t,t.return,m)}try{ow(5,t,t.return)}catch(m){Ir(t,t.return,m)}}break;case 1:zo(e,t),Vl(t),r&512&&n!==null&&rg(n,n.return);break;case 5:if(zo(e,t),Vl(t),r&512&&n!==null&&rg(n,n.return),t.flags&32){var i=t.stateNode;try{$w(i,"")}catch(m){Ir(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&kK(i,a),zN(o,s);var c=zN(o,a);for(s=0;s<l.length;s+=2){var u=l[s],f=l[s+1];u==="style"?NK(i,f):u==="dangerouslySetInnerHTML"?CK(i,f):u==="children"?$w(i,f):w3(i,u,f,c)}switch(o){case"input":LN(i,a);break;case"textarea":OK(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?kg(i,!!a.multiple,h,!1):d!==!!a.multiple&&(a.defaultValue!=null?kg(i,!!a.multiple,a.defaultValue,!0):kg(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ww]=a}catch(m){Ir(t,t.return,m)}}break;case 6:if(zo(e,t),Vl(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(m){Ir(t,t.return,m)}}break;case 3:if(zo(e,t),Vl(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fw(e.containerInfo)}catch(m){Ir(t,t.return,m)}break;case 4:zo(e,t),Vl(t);break;case 13:zo(e,t),Vl(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(J3=Br())),r&4&&cF(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(fa=(c=fa)||u,zo(e,t),fa=c):zo(e,t),Vl(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(it=t,u=t.child;u!==null;){for(f=it=u;it!==null;){switch(d=it,h=d.child,d.tag){case 0:case 11:case 14:case 15:ow(4,d,d.return);break;case 1:rg(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ir(r,n,m)}}break;case 5:rg(d,d.return);break;case 22:if(d.memoizedState!==null){fF(f);continue}}h!==null?(h.return=d,it=h):fF(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=PK("display",s))}catch(m){Ir(t,t.return,m)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Ir(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zo(e,t),Vl(t),r&4&&cF(t);break;case 21:break;default:zo(e,t),Vl(t)}}function Vl(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nZ(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($w(i,""),r.flags&=-33);var a=lF(t);vI(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=lF(t);yI(t,o,s);break;default:throw Error(Fe(161))}}catch(l){Ir(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dge(t,e,n){it=t,aZ(t)}function aZ(t,e,n){for(var r=(t.mode&1)!==0;it!==null;){var i=it,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||vx;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||fa;o=vx;var c=fa;if(vx=s,(fa=l)&&!c)for(it=i;it!==null;)s=it,l=s.child,s.tag===22&&s.memoizedState!==null?dF(i):l!==null?(l.return=s,it=l):dF(i);for(;a!==null;)it=a,aZ(a),a=a.sibling;it=i,vx=o,fa=c}uF(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,it=a):uF(t)}}function uF(t){for(;it!==null;){var e=it;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fa||b5(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fa)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&K8(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}K8(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Fw(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}fa||e.flags&512&&gI(e)}catch(d){Ir(e,e.return,d)}}if(e===t){it=null;break}if(n=e.sibling,n!==null){n.return=e.return,it=n;break}it=e.return}}function fF(t){for(;it!==null;){var e=it;if(e===t){it=null;break}var n=e.sibling;if(n!==null){n.return=e.return,it=n;break}it=e.return}}function dF(t){for(;it!==null;){var e=it;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{b5(4,e)}catch(l){Ir(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ir(e,i,l)}}var a=e.return;try{gI(e)}catch(l){Ir(e,a,l)}break;case 5:var s=e.return;try{gI(e)}catch(l){Ir(e,s,l)}}}catch(l){Ir(e,e.return,l)}if(e===t){it=null;break}var o=e.sibling;if(o!==null){o.return=e.return,it=o;break}it=e.return}}var Fge=Math.ceil,XS=Wu.ReactCurrentDispatcher,Z3=Wu.ReactCurrentOwner,wo=Wu.ReactCurrentBatchConfig,vn=0,Ri=null,ni=null,Ji=0,bs=0,ig=Id(0),_i=0,Zw=null,pp=0,_5=0,X3=0,lw=null,qa=null,J3=0,ry=1/0,Qc=null,JS=!1,wI=null,rd=null,wx=!1,Hf=null,QS=0,cw=0,bI=null,B2=-1,U2=0;function Ra(){return vn&6?Br():B2!==-1?B2:B2=Br()}function id(t){return t.mode&1?vn&2&&Ji!==0?Ji&-Ji:xge.transition!==null?(U2===0&&(U2=VK()),U2):(t=jn,t!==0||(t=window.event,t=t===void 0?16:ZK(t.type)),t):1}function gl(t,e,n,r){if(50<cw)throw cw=0,bI=null,Error(Fe(185));E1(t,n,r),(!(vn&2)||t!==Ri)&&(t===Ri&&(!(vn&2)&&(_5|=n),_i===4&&Bf(t,Ji)),Ja(t,r),n===1&&vn===0&&!(e.mode&1)&&(ry=Br()+500,y5&&Rd()))}function Ja(t,e){var n=t.callbackNode;xme(t,e);var r=MS(t,t===Ri?Ji:0);if(r===0)n!==null&&_8(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_8(n),e===1)t.tag===0?_ge(hF.bind(null,t)):mY(hF.bind(null,t)),yge(function(){!(vn&6)&&Rd()}),n=null;else{switch(WK(r)){case 1:n=E3;break;case 4:n=UK;break;case 16:n=$S;break;case 536870912:n=zK;break;default:n=$S}n=hZ(n,sZ.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sZ(t,e){if(B2=-1,U2=0,vn&6)throw Error(Fe(327));var n=t.callbackNode;if(Ng()&&t.callbackNode!==n)return null;var r=MS(t,t===Ri?Ji:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eE(t,r);else{e=r;var i=vn;vn|=2;var a=lZ();(Ri!==t||Ji!==e)&&(Qc=null,ry=Br()+500,Jh(t,e));do try{zge();break}catch(o){oZ(t,o)}while(!0);L3(),XS.current=a,vn=i,ni!==null?e=0:(Ri=null,Ji=0,e=_i)}if(e!==0){if(e===2&&(i=GN(t),i!==0&&(r=i,e=_I(t,i))),e===1)throw n=Zw,Jh(t,0),Bf(t,r),Ja(t,Br()),n;if(e===6)Bf(t,r);else{if(i=t.current.alternate,!(r&30)&&!Bge(i)&&(e=eE(t,r),e===2&&(a=GN(t),a!==0&&(r=a,e=_I(t,a))),e===1))throw n=Zw,Jh(t,0),Bf(t,r),Ja(t,Br()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:_h(t,qa,Qc);break;case 3:if(Bf(t,r),(r&130023424)===r&&(e=J3+500-Br(),10<e)){if(MS(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ra(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tI(_h.bind(null,t,qa,Qc),e);break}_h(t,qa,Qc);break;case 4:if(Bf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ml(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=Br()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fge(r/1960))-r,10<r){t.timeoutHandle=tI(_h.bind(null,t,qa,Qc),r);break}_h(t,qa,Qc);break;case 5:_h(t,qa,Qc);break;default:throw Error(Fe(329))}}}return Ja(t,Br()),t.callbackNode===n?sZ.bind(null,t):null}function _I(t,e){var n=lw;return t.current.memoizedState.isDehydrated&&(Jh(t,e).flags|=256),t=eE(t,e),t!==2&&(e=qa,qa=n,e!==null&&xI(e)),t}function xI(t){qa===null?qa=t:qa.push.apply(qa,t)}function Bge(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!bl(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bf(t,e){for(e&=~X3,e&=~_5,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ml(e),r=1<<n;t[n]=-1,e&=~r}}function hF(t){if(vn&6)throw Error(Fe(327));Ng();var e=MS(t,0);if(!(e&1))return Ja(t,Br()),null;var n=eE(t,e);if(t.tag!==0&&n===2){var r=GN(t);r!==0&&(e=r,n=_I(t,r))}if(n===1)throw n=Zw,Jh(t,0),Bf(t,e),Ja(t,Br()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_h(t,qa,Qc),Ja(t,Br()),null}function Q3(t,e){var n=vn;vn|=1;try{return t(e)}finally{vn=n,vn===0&&(ry=Br()+500,y5&&Rd())}}function mp(t){Hf!==null&&Hf.tag===0&&!(vn&6)&&Ng();var e=vn;vn|=1;var n=wo.transition,r=jn;try{if(wo.transition=null,jn=1,t)return t()}finally{jn=r,wo.transition=n,vn=e,!(vn&6)&&Rd()}}function e$(){bs=ig.current,ur(ig)}function Jh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gge(n)),ni!==null)for(n=ni.return;n!==null;){var r=n;switch(j3(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&US();break;case 3:ty(),ur(Za),ur(ga),V3();break;case 5:z3(r);break;case 4:ty();break;case 13:ur(wr);break;case 19:ur(wr);break;case 10:D3(r.type._context);break;case 22:case 23:e$()}n=n.return}if(Ri=t,ni=t=ad(t.current,null),Ji=bs=e,_i=0,Zw=null,X3=_5=pp=0,qa=lw=null,Dh!==null){for(e=0;e<Dh.length;e++)if(n=Dh[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Dh=null}return t}function oZ(t,e){do{var n=ni;try{if(L3(),L2.current=ZS,YS){for(var r=xr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}YS=!1}if(hp=0,Pi=vi=xr=null,sw=!1,Gw=0,Z3.current=null,n===null||n.return===null){_i=1,Zw=e,ni=null;break}e:{var a=t,s=n.return,o=n,l=e;if(e=Ji,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=eF(s);if(h!==null){h.flags&=-257,tF(h,s,o,a,e),h.mode&1&&Q8(a,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Q8(a,c,e),t$();break e}l=Error(Fe(426))}}else if(hr&&o.mode&1){var y=eF(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),tF(y,s,o,a,e),$3(ny(l,o));break e}}a=l=ny(l,o),_i!==4&&(_i=2),lw===null?lw=[a]:lw.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=WY(a,l,e);G8(a,g);break e;case 1:o=l;var v=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(rd===null||!rd.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var _=HY(a,o,e);G8(a,_);break e}}a=a.return}while(a!==null)}uZ(n)}catch(x){e=x,ni===n&&n!==null&&(ni=n=n.return);continue}break}while(!0)}function lZ(){var t=XS.current;return XS.current=ZS,t===null?ZS:t}function t$(){(_i===0||_i===3||_i===2)&&(_i=4),Ri===null||!(pp&268435455)&&!(_5&268435455)||Bf(Ri,Ji)}function eE(t,e){var n=vn;vn|=2;var r=lZ();(Ri!==t||Ji!==e)&&(Qc=null,Jh(t,e));do try{Uge();break}catch(i){oZ(t,i)}while(!0);if(L3(),vn=n,XS.current=r,ni!==null)throw Error(Fe(261));return Ri=null,Ji=0,_i}function Uge(){for(;ni!==null;)cZ(ni)}function zge(){for(;ni!==null&&!hme();)cZ(ni)}function cZ(t){var e=dZ(t.alternate,t,bs);t.memoizedProps=t.pendingProps,e===null?uZ(t):ni=e,Z3.current=null}function uZ(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$ge(n,e),n!==null){n.flags&=32767,ni=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_i=6,ni=null;return}}else if(n=jge(n,e,bs),n!==null){ni=n;return}if(e=e.sibling,e!==null){ni=e;return}ni=e=t}while(e!==null);_i===0&&(_i=5)}function _h(t,e,n){var r=jn,i=wo.transition;try{wo.transition=null,jn=1,Vge(t,e,n,r)}finally{wo.transition=i,jn=r}return null}function Vge(t,e,n,r){do Ng();while(Hf!==null);if(vn&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Sme(t,a),t===Ri&&(ni=Ri=null,Ji=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wx||(wx=!0,hZ($S,function(){return Ng(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=wo.transition,wo.transition=null;var s=jn;jn=1;var o=vn;vn|=4,Z3.current=null,Lge(t,n),iZ(n,t),cge(QN),LS=!!JN,QN=JN=null,t.current=n,Dge(n),pme(),vn=o,jn=s,wo.transition=a}else t.current=n;if(wx&&(wx=!1,Hf=t,QS=i),a=t.pendingLanes,a===0&&(rd=null),yme(n.stateNode),Ja(t,Br()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(JS)throw JS=!1,t=wI,wI=null,t;return QS&1&&t.tag!==0&&Ng(),a=t.pendingLanes,a&1?t===bI?cw++:(cw=0,bI=t):cw=0,Rd(),null}function Ng(){if(Hf!==null){var t=WK(QS),e=wo.transition,n=jn;try{if(wo.transition=null,jn=16>t?16:t,Hf===null)var r=!1;else{if(t=Hf,Hf=null,QS=0,vn&6)throw Error(Fe(331));var i=vn;for(vn|=4,it=t.current;it!==null;){var a=it,s=a.child;if(it.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(it=c;it!==null;){var u=it;switch(u.tag){case 0:case 11:case 15:ow(8,u,a)}var f=u.child;if(f!==null)f.return=u,it=f;else for(;it!==null;){u=it;var d=u.sibling,h=u.return;if(tZ(u),u===c){it=null;break}if(d!==null){d.return=h,it=d;break}it=h}}}var p=a.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}it=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,it=s;else e:for(;it!==null;){if(a=it,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ow(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,it=g;break e}it=a.return}}var v=t.current;for(it=v;it!==null;){s=it;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,it=w;else e:for(s=v;it!==null;){if(o=it,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:b5(9,o)}}catch(x){Ir(o,o.return,x)}if(o===s){it=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,it=_;break e}it=o.return}}if(vn=i,Rd(),uc&&typeof uc.onPostCommitFiberRoot=="function")try{uc.onPostCommitFiberRoot(d5,t)}catch{}r=!0}return r}finally{jn=n,wo.transition=e}}return!1}function pF(t,e,n){e=ny(n,e),e=WY(t,e,1),t=nd(t,e,1),e=Ra(),t!==null&&(E1(t,1,e),Ja(t,e))}function Ir(t,e,n){if(t.tag===3)pF(t,t,n);else for(;e!==null;){if(e.tag===3){pF(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rd===null||!rd.has(r))){t=ny(n,t),t=HY(e,t,1),e=nd(e,t,1),t=Ra(),e!==null&&(E1(e,1,t),Ja(e,t));break}}e=e.return}}function Wge(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ra(),t.pingedLanes|=t.suspendedLanes&n,Ri===t&&(Ji&n)===n&&(_i===4||_i===3&&(Ji&130023424)===Ji&&500>Br()-J3?Jh(t,0):X3|=n),Ja(t,e)}function fZ(t,e){e===0&&(t.mode&1?(e=cx,cx<<=1,!(cx&130023424)&&(cx=4194304)):e=1);var n=Ra();t=ku(t,e),t!==null&&(E1(t,e,n),Ja(t,n))}function Hge(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fZ(t,n)}function qge(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),fZ(t,n)}var dZ;dZ=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Za.current)Ga=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ga=!1,Rge(t,e,n);Ga=!!(t.flags&131072)}else Ga=!1,hr&&e.flags&1048576&&gY(e,WS,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;F2(t,e),t=e.pendingProps;var i=Jg(e,ga.current);Pg(e,n),i=H3(null,e,r,t,i,n);var a=q3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xa(r)?(a=!0,zS(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,B3(e),i.updater=w5,e.stateNode=i,i._reactInternals=e,lI(e,r,t,n),e=fI(null,e,r,!0,a,n)):(e.tag=0,hr&&a&&R3(e),Ea(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(F2(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Kge(r),t=tl(r,t),i){case 0:e=uI(null,e,r,t,n);break e;case 1:e=iF(null,e,r,t,n);break e;case 11:e=nF(null,e,r,t,n);break e;case 14:e=rF(null,e,r,tl(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tl(r,i),uI(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tl(r,i),iF(t,e,r,i,n);case 3:e:{if(YY(e),t===null)throw Error(Fe(387));r=e.pendingProps,a=e.memoizedState,i=a.element,xY(t,e),GS(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=ny(Error(Fe(423)),e),e=aF(t,e,r,n,i);break e}else if(r!==i){i=ny(Error(Fe(424)),e),e=aF(t,e,r,n,i);break e}else for(Ps=td(e.stateNode.containerInfo.firstChild),Rs=e,hr=!0,cl=null,n=bY(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qg(),r===i){e=Ou(t,e,n);break e}Ea(t,e,r,n)}e=e.child}return e;case 5:return SY(e),t===null&&aI(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,eI(r,i)?s=null:a!==null&&eI(r,a)&&(e.flags|=32),KY(t,e),Ea(t,e,s,n),e.child;case 6:return t===null&&aI(e),null;case 13:return ZY(t,e,n);case 4:return U3(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ey(e,null,r,n):Ea(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tl(r,i),nF(t,e,r,i,n);case 7:return Ea(t,e,e.pendingProps,n),e.child;case 8:return Ea(t,e,e.pendingProps.children,n),e.child;case 12:return Ea(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Jn(HS,r._currentValue),r._currentValue=s,a!==null)if(bl(a.value,s)){if(a.children===i.children&&!Za.current){e=Ou(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=vu(-1,n&-n),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),sI(a.return,n,e),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Fe(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),sI(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ea(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pg(e,n),i=Eo(i),r=r(i),e.flags|=1,Ea(t,e,r,n),e.child;case 14:return r=e.type,i=tl(r,e.pendingProps),i=tl(r.type,i),rF(t,e,r,i,n);case 15:return qY(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tl(r,i),F2(t,e),e.tag=1,Xa(r)?(t=!0,zS(e)):t=!1,Pg(e,n),VY(e,r,i),lI(e,r,i,n),fI(null,e,r,!0,t,n);case 19:return XY(t,e,n);case 22:return GY(t,e,n)}throw Error(Fe(156,e.tag))};function hZ(t,e){return BK(t,e)}function Gge(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(t,e,n,r){return new Gge(t,e,n,r)}function n$(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kge(t){if(typeof t=="function")return n$(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_3)return 11;if(t===x3)return 14}return 2}function ad(t,e){var n=t.alternate;return n===null?(n=po(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function z2(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")n$(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Km:return Qh(n.children,i,a,e);case b3:s=8,i|=8;break;case IN:return t=po(12,n,e,i|2),t.elementType=IN,t.lanes=a,t;case RN:return t=po(13,n,e,i),t.elementType=RN,t.lanes=a,t;case jN:return t=po(19,n,e,i),t.elementType=jN,t.lanes=a,t;case SK:return x5(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _K:s=10;break e;case xK:s=9;break e;case _3:s=11;break e;case x3:s=14;break e;case Pf:s=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=po(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Qh(t,e,n,r){return t=po(7,t,r,e),t.lanes=n,t}function x5(t,e,n,r){return t=po(22,t,r,e),t.elementType=SK,t.lanes=n,t.stateNode={isHidden:!1},t}function LT(t,e,n){return t=po(6,t,null,e),t.lanes=n,t}function DT(t,e,n){return e=po(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yge(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vT(0),this.expirationTimes=vT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function r$(t,e,n,r,i,a,s,o,l){return t=new Yge(t,e,n,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=po(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},B3(a),t}function Zge(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gm,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pZ(t){if(!t)return vd;t=t._reactInternals;e:{if(Bp(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(Xa(n))return pY(t,n,e)}return e}function mZ(t,e,n,r,i,a,s,o,l){return t=r$(n,r,!0,t,i,a,s,o,l),t.context=pZ(null),n=t.current,r=Ra(),i=id(n),a=vu(r,i),a.callback=e??null,nd(n,a,i),t.current.lanes=i,E1(t,i,r),Ja(t,r),t}function S5(t,e,n,r){var i=e.current,a=Ra(),s=id(i);return n=pZ(n),e.context===null?e.context=n:e.pendingContext=n,e=vu(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nd(i,e,s),t!==null&&(gl(t,i,s,a),M2(t,i,s)),s}function tE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function i$(t,e){mF(t,e),(t=t.alternate)&&mF(t,e)}function Xge(){return null}var gZ=typeof reportError=="function"?reportError:function(t){console.error(t)};function a$(t){this._internalRoot=t}E5.prototype.render=a$.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));S5(t,e,null,null)};E5.prototype.unmount=a$.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mp(function(){S5(null,t,null,null)}),e[Au]=null}};function E5(t){this._internalRoot=t}E5.prototype.unstable_scheduleHydration=function(t){if(t){var e=GK();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ff.length&&e!==0&&e<Ff[n].priority;n++);Ff.splice(n,0,t),n===0&&YK(t)}};function s$(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function A5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gF(){}function Jge(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var c=tE(s);a.call(c)}}var s=mZ(e,r,t,0,null,!1,!1,"",gF);return t._reactRootContainer=s,t[Au]=s.current,zw(t.nodeType===8?t.parentNode:t),mp(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=tE(l);o.call(c)}}var l=r$(t,0,!1,null,null,!1,!1,"",gF);return t._reactRootContainer=l,t[Au]=l.current,zw(t.nodeType===8?t.parentNode:t),mp(function(){S5(e,l,n,r)}),l}function k5(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=tE(s);o.call(l)}}S5(e,s,t,i)}else s=Jge(n,e,t,i,r);return tE(s)}HK=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=F0(e.pendingLanes);n!==0&&(A3(e,n|1),Ja(e,Br()),!(vn&6)&&(ry=Br()+500,Rd()))}break;case 13:mp(function(){var r=ku(t,1);if(r!==null){var i=Ra();gl(r,t,1,i)}}),i$(t,1)}};k3=function(t){if(t.tag===13){var e=ku(t,134217728);if(e!==null){var n=Ra();gl(e,t,134217728,n)}i$(t,134217728)}};qK=function(t){if(t.tag===13){var e=id(t),n=ku(t,e);if(n!==null){var r=Ra();gl(n,t,e,r)}i$(t,e)}};GK=function(){return jn};KK=function(t,e){var n=jn;try{return jn=t,e()}finally{jn=n}};WN=function(t,e,n){switch(e){case"input":if(LN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=g5(r);if(!i)throw Error(Fe(90));AK(r),LN(r,i)}}}break;case"textarea":OK(t,n);break;case"select":e=n.value,e!=null&&kg(t,!!n.multiple,e,!1)}};jK=Q3;$K=mp;var Qge={usingClientEntryPoint:!1,Events:[k1,Jm,g5,IK,RK,Q3]},m0={findFiberByHostInstance:Lh,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eye={bundleType:m0.bundleType,version:m0.version,rendererPackageName:m0.rendererPackageName,rendererConfig:m0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wu.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DK(t),t===null?null:t.stateNode},findFiberByHostInstance:m0.findFiberByHostInstance||Xge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bx.isDisabled&&bx.supportsFiber)try{d5=bx.inject(eye),uc=bx}catch{}}Us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qge;Us.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s$(e))throw Error(Fe(200));return Zge(t,e,null,n)};Us.createRoot=function(t,e){if(!s$(t))throw Error(Fe(299));var n=!1,r="",i=gZ;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=r$(t,1,!1,null,null,n,!1,r,i),t[Au]=e.current,zw(t.nodeType===8?t.parentNode:t),new a$(e)};Us.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=DK(e),t=t===null?null:t.stateNode,t};Us.flushSync=function(t){return mp(t)};Us.hydrate=function(t,e,n){if(!A5(e))throw Error(Fe(200));return k5(null,t,e,!0,n)};Us.hydrateRoot=function(t,e,n){if(!s$(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=gZ;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=mZ(e,null,t,1,n??null,i,!1,a,s),t[Au]=e.current,zw(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new E5(e)};Us.render=function(t,e,n){if(!A5(e))throw Error(Fe(200));return k5(null,t,e,!1,n)};Us.unmountComponentAtNode=function(t){if(!A5(t))throw Error(Fe(40));return t._reactRootContainer?(mp(function(){k5(null,null,t,!1,function(){t._reactRootContainer=null,t[Au]=null})}),!0):!1};Us.unstable_batchedUpdates=Q3;Us.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!A5(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return k5(t,e,n,!1,r)};Us.version="18.3.1-next-f1338f8080-20240426";function yZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yZ)}catch(t){console.error(t)}}yZ(),yK.exports=Us;var Xy=yK.exports;const tye=wn(Xy);var yF=Xy;PN.createRoot=yF.createRoot,PN.hydrateRoot=yF.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vF="popstate";function nye(t={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return SI("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xw(i)}return iye(e,n,null,t)}function mr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _l(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rye(){return Math.random().toString(36).substring(2,10)}function wF(t,e){return{usr:t.state,key:t.key,idx:e}}function SI(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jy(e):e,state:n,key:e&&e.key||r||rye()}}function Xw({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jy(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function iye(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",l=null,c=u();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function f(){o="POP";let y=u(),g=y==null?null:y-c;c=y,l&&l({action:o,location:m.location,delta:g})}function d(y,g){o="PUSH";let v=SI(m.location,y,g);c=u()+1;let w=wF(v,c),_=m.createHref(v);try{s.pushState(w,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(_)}a&&l&&l({action:o,location:m.location,delta:1})}function h(y,g){o="REPLACE";let v=SI(m.location,y,g);c=u();let w=wF(v,c),_=m.createHref(v);s.replaceState(w,"",_),a&&l&&l({action:o,location:m.location,delta:0})}function p(y){return aye(y)}let m={get action(){return o},get location(){return t(i,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(vF,f),l=y,()=>{i.removeEventListener(vF,f),l=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:h,go(y){return s.go(y)}};return m}function aye(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mr(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xw(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function vZ(t,e,n="/"){return sye(t,e,n,!1)}function sye(t,e,n,r){let i=typeof e=="string"?Jy(e):e,a=Tu(i.pathname||"/",n);if(a==null)return null;let s=wZ(t);oye(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=vye(a);o=gye(s[l],c,r)}return o}function wZ(t,e=[],n=[],r="",i=!1){let a=(s,o,l=i,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;mr(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let f=wu([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(mr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),wZ(s.children,e,d,f,l)),!(s.path==null&&!s.index)&&e.push({path:f,score:pye(f,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of bZ(s.path))a(s,o,!0,c)}),e}function bZ(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=bZ(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function oye(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mye(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var lye=/^:[\w-]+$/,cye=3,uye=2,fye=1,dye=10,hye=-2,bF=t=>t==="*";function pye(t,e){let n=t.split("/"),r=n.length;return n.some(bF)&&(r+=hye),e&&(r+=uye),n.filter(i=>!bF(i)).reduce((i,a)=>i+(lye.test(a)?cye:a===""?fye:dye),r)}function mye(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function gye(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",f=nE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=nE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:wu([a,f.pathname]),pathnameBase:xye(wu([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=wu([a,f.pathnameBase]))}return s}function nE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yye(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:f},d)=>{if(u==="*"){let p=o[d]||"";s=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const h=o[d];return f&&!h?c[u]=void 0:c[u]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:t}}function yye(t,e=!1,n=!0){_l(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vye(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _l(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Tu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var wye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bye(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Jy(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=_F(n.substring(1),"/"):a=_F(n,e)):a=e,{pathname:a,search:Sye(r),hash:Eye(i)}}function _F(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function FT(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _ye(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o$(t){let e=_ye(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function l$(t,e,n,r=!1){let i;typeof t=="string"?i=Jy(t):(i={...t},mr(!i.pathname||!i.pathname.includes("?"),FT("?","pathname","search",i)),mr(!i.pathname||!i.pathname.includes("#"),FT("#","pathname","hash",i)),mr(!i.search||!i.search.includes("#"),FT("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let f=e.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}o=f>=0?e[f]:"/"}let l=bye(i,o),c=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var wu=t=>t.join("/").replace(/\/\/+/g,"/"),xye=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sye=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Eye=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Aye=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function kye(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Oye(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var _Z=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xZ(t,e){let n=t;if(typeof n!="string"||!wye.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(_Z)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=Tu(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{_l(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var SZ=["POST","PUT","PATCH","DELETE"];new Set(SZ);var Tye=["GET",...SZ];new Set(Tye);var Qy=k.createContext(null);Qy.displayName="DataRouter";var O5=k.createContext(null);O5.displayName="DataRouterState";var Cye=k.createContext(!1),EZ=k.createContext({isTransitioning:!1});EZ.displayName="ViewTransition";var Pye=k.createContext(new Map);Pye.displayName="Fetchers";var Nye=k.createContext(null);Nye.displayName="Await";var Vs=k.createContext(null);Vs.displayName="Navigation";var T1=k.createContext(null);T1.displayName="Location";var Tl=k.createContext({outlet:null,matches:[],isDataRoute:!1});Tl.displayName="Route";var c$=k.createContext(null);c$.displayName="RouteError";var AZ="REACT_ROUTER_ERROR",Iye="REDIRECT",Rye="ROUTE_ERROR_RESPONSE";function jye(t){if(t.startsWith(`${AZ}:${Iye}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function $ye(t){if(t.startsWith(`${AZ}:${Rye}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Aye(e.status,e.statusText,e.data)}catch{}}function Mye(t,{relative:e}={}){mr(ev(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(Vs),{hash:i,pathname:a,search:s}=P1(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:wu([n,a])),r.createHref({pathname:o,search:s,hash:i})}function ev(){return k.useContext(T1)!=null}function jd(){return mr(ev(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(T1).location}var kZ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OZ(t){k.useContext(Vs).static||k.useLayoutEffect(t)}function C1(){let{isDataRoute:t}=k.useContext(Tl);return t?Xye():Lye()}function Lye(){mr(ev(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Qy),{basename:e,navigator:n}=k.useContext(Vs),{matches:r}=k.useContext(Tl),{pathname:i}=jd(),a=JSON.stringify(o$(r)),s=k.useRef(!1);return OZ(()=>{s.current=!0}),k.useCallback((l,c={})=>{if(_l(s.current,kZ),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=l$(l,JSON.parse(a),i,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:wu([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,a,i,t])}var Dye=k.createContext(null);function Fye(t){let e=k.useContext(Tl).outlet;return k.useMemo(()=>e&&k.createElement(Dye.Provider,{value:t},e),[e,t])}function P1(t,{relative:e}={}){let{matches:n}=k.useContext(Tl),{pathname:r}=jd(),i=JSON.stringify(o$(n));return k.useMemo(()=>l$(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Bye(t,e){return TZ(t,e)}function TZ(t,e,n,r,i){var v;mr(ev(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(Vs),{matches:s}=k.useContext(Tl),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let w=f&&f.path||"";PZ(c,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let d=jd(),h;if(e){let w=typeof e=="string"?Jy(e):e;mr(u==="/"||((v=w.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),h=w}else h=d;let p=h.pathname||"/",m=p;if(u!=="/"){let w=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=vZ(t,{pathname:m});_l(f||y!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),_l(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Hye(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:wu([u,a.encodeLocation?a.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:wu([u,a.encodeLocation?a.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),s,n,r,i);return e&&g?k.createElement(T1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function Uye(){let t=Zye(),e=kye(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,s)}var zye=k.createElement(Uye,null),CZ=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=$ye(t.digest);n&&(t=n)}let e=t!==void 0?k.createElement(Tl.Provider,{value:this.props.routeContext},k.createElement(c$.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?k.createElement(Vye,{error:t},e):e}};CZ.contextType=Cye;var BT=new WeakMap;function Vye({children:t,error:e}){let{basename:n}=k.useContext(Vs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=jye(e.digest);if(r){let i=BT.get(e);if(i)throw i;let a=xZ(r.location,n);if(_Z&&!BT.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw BT.set(e,s),s}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function Wye({routeContext:t,match:e,children:n}){let r=k.useContext(Qy);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Tl.Provider,{value:t},n)}function Hye(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n==null?void 0:n.errors;if(s!=null){let u=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);mr(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=u),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let c=n&&r?(u,f)=>{var d,h;r(u,{location:n.location,params:((h=(d=n.matches)==null?void 0:d[0])==null?void 0:h.params)??{},unstable_pattern:Oye(n.matches),errorInfo:f})}:void 0;return a.reduceRight((u,f,d)=>{let h,p=!1,m=null,y=null;n&&(h=s&&f.route.id?s[f.route.id]:void 0,m=f.route.errorElement||zye,o&&(l<0&&d===0?(PZ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,y=null):l===d&&(p=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,d+1)),v=()=>{let w;return h?w=m:p?w=y:f.route.Component?w=k.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=u,k.createElement(Wye,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(CZ,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):v()},null)}function u$(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qye(t){let e=k.useContext(Qy);return mr(e,u$(t)),e}function Gye(t){let e=k.useContext(O5);return mr(e,u$(t)),e}function Kye(t){let e=k.useContext(Tl);return mr(e,u$(t)),e}function f$(t){let e=Kye(t),n=e.matches[e.matches.length-1];return mr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Yye(){return f$("useRouteId")}function Zye(){var r;let t=k.useContext(c$),e=Gye("useRouteError"),n=f$("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Xye(){let{router:t}=qye("useNavigate"),e=f$("useNavigate"),n=k.useRef(!1);return OZ(()=>{n.current=!0}),k.useCallback(async(i,a={})=>{_l(n.current,kZ),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var xF={};function PZ(t,e,n){!e&&!xF[t]&&(xF[t]=!0,_l(!1,n))}k.memo(Jye);function Jye({routes:t,future:e,state:n,onError:r}){return TZ(t,void 0,n,r,e)}function d$({to:t,replace:e,state:n,relative:r}){mr(ev(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Vs);_l(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(Tl),{pathname:s}=jd(),o=C1(),l=l$(t,o$(a),s,r==="path"),c=JSON.stringify(l);return k.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:r})},[o,c,r,e,n]),null}function NZ(t){return Fye(t.context)}function ro(t){mr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qye({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){mr(!ev(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=Jy(n));let{pathname:c="/",search:u="",hash:f="",state:d=null,key:h="default"}=n,p=k.useMemo(()=>{let m=Tu(c,o);return m==null?null:{location:{pathname:m,search:u,hash:f,state:d,key:h},navigationType:r}},[o,c,u,f,d,h,r]);return _l(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:k.createElement(Vs.Provider,{value:l},k.createElement(T1.Provider,{children:e,value:p}))}function eve({children:t,location:e}){return Bye(EI(t),e)}function EI(t,e=[]){let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let a=[...e,i];if(r.type===k.Fragment){n.push.apply(n,EI(r.props.children,a));return}mr(r.type===ro,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=EI(r.props.children,a)),n.push(s)}),n}var V2="get",W2="application/x-www-form-urlencoded";function T5(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function tve(t){return T5(t)&&t.tagName.toLowerCase()==="button"}function nve(t){return T5(t)&&t.tagName.toLowerCase()==="form"}function rve(t){return T5(t)&&t.tagName.toLowerCase()==="input"}function ive(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ave(t,e){return t.button===0&&(!e||e==="_self")&&!ive(t)}var _x=null;function sve(){if(_x===null)try{new FormData(document.createElement("form"),0),_x=!1}catch{_x=!0}return _x}var ove=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function UT(t){return t!=null&&!ove.has(t)?(_l(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${W2}"`),null):t}function lve(t,e){let n,r,i,a,s;if(nve(t)){let o=t.getAttribute("action");r=o?Tu(o,e):null,n=t.getAttribute("method")||V2,i=UT(t.getAttribute("enctype"))||W2,a=new FormData(t)}else if(tve(t)||rve(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?Tu(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||V2,i=UT(t.getAttribute("formenctype"))||UT(o.getAttribute("enctype"))||W2,a=new FormData(o,t),!sve()){let{name:c,type:u,value:f}=t;if(u==="image"){let d=c?`${c}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else c&&a.append(c,f)}}else{if(T5(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=V2,r=null,i=W2,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function h$(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cve(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Tu(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function uve(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fve(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dve(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await uve(a,n);return s.links?s.links():[]}return[]}));return gve(r.flat(1).filter(fve).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function SF(t,e,n,r,i,a){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,c)=>s(l,c)||o(l,c)):a==="data"?e.filter((l,c)=>{var f;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function hve(t,e,{includeHydrateFallback:n}={}){return pve(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function pve(t){return[...new Set(t)]}function mve(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function gve(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(mve(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function IZ(){let t=k.useContext(Qy);return h$(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yve(){let t=k.useContext(O5);return h$(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var p$=k.createContext(void 0);p$.displayName="FrameworkContext";function RZ(){let t=k.useContext(p$);return h$(t,"You must render this element inside a <HydratedRouter> element"),t}function vve(t,e){let n=k.useContext(p$),[r,i]=k.useState(!1),[a,s]=k.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,d=k.useRef(null);k.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let m=g=>{g.forEach(v=>{s(v.isIntersecting)})},y=new IntersectionObserver(m,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[t]),k.useEffect(()=>{if(r){let m=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,d,{}]:[a,d,{onFocus:g0(o,h),onBlur:g0(l,p),onMouseEnter:g0(c,h),onMouseLeave:g0(u,p),onTouchStart:g0(f,h)}]:[!1,d,{}]}function g0(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function wve({page:t,...e}){let{router:n}=IZ(),r=k.useMemo(()=>vZ(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(_ve,{page:t,matches:r,...e}):null}function bve(t){let{manifest:e,routeModules:n}=RZ(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return dve(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function _ve({page:t,matches:e,...n}){let r=jd(),{future:i,manifest:a,routeModules:s}=RZ(),{basename:o}=IZ(),{loaderData:l,matches:c}=yve(),u=k.useMemo(()=>SF(t,e,c,a,r,"data"),[t,e,c,a,r]),f=k.useMemo(()=>SF(t,e,c,a,r,"assets"),[t,e,c,a,r]),d=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let m=new Set,y=!1;if(e.forEach(v=>{var _;let w=a.routes[v.route.id];!w||!w.hasLoader||(!u.some(x=>x.route.id===v.route.id)&&v.route.id in l&&((_=s[v.route.id])!=null&&_.shouldRevalidate)||w.hasClientLoader?y=!0:m.add(v.route.id))}),m.size===0)return[];let g=cve(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return y&&m.size>0&&g.searchParams.set("_routes",e.filter(v=>m.has(v.route.id)).map(v=>v.route.id).join(",")),[g.pathname+g.search]},[o,i.unstable_trailingSlashAwareDataRequests,l,r,a,u,e,t,s]),h=k.useMemo(()=>hve(f,a),[f,a]),p=bve(f);return k.createElement(k.Fragment,null,d.map(m=>k.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),h.map(m=>k.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),p.map(({key:m,link:y})=>k.createElement("link",{key:m,nonce:n.nonce,...y,crossOrigin:y.crossOrigin??n.crossOrigin})))}function xve(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Sve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sve&&(window.__reactRouterVersion="7.13.0")}catch{}function Eve({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=k.useRef();i.current==null&&(i.current=nye({window:r,v5Compat:!0}));let a=i.current,[s,o]=k.useState({action:a.action,location:a.location}),l=k.useCallback(c=>{n===!1?o(c):k.startTransition(()=>o(c))},[n]);return k.useLayoutEffect(()=>a.listen(l),[a,l]),k.createElement(Qye,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}var jZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C5=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:d,...h},p){let{basename:m,unstable_useTransitions:y}=k.useContext(Vs),g=typeof c=="string"&&jZ.test(c),v=xZ(c,m);c=v.to;let w=Mye(c,{relative:i}),[_,x,E]=vve(r,h),T=Ove(c,{replace:s,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:d,unstable_useTransitions:y});function O(M){e&&e(M),M.defaultPrevented||T(M)}let R=k.createElement("a",{...h,...E,href:v.absoluteURL||w,onClick:v.isExternal||a?e:O,ref:xve(p,x),target:l,"data-discover":!g&&n==="render"?"true":void 0});return _&&!g?k.createElement(k.Fragment,null,R,k.createElement(wve,{page:w})):R});C5.displayName="Link";var $Z=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...c},u){let f=P1(s,{relative:c.relative}),d=jd(),h=k.useContext(O5),{navigator:p,basename:m}=k.useContext(Vs),y=h!=null&&Ive(f)&&o===!0,g=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,v=d.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(v=v.toLowerCase(),w=w?w.toLowerCase():null,g=g.toLowerCase()),w&&m&&(w=Tu(w,m)||w);const _=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let x=v===g||!i&&v.startsWith(g)&&v.charAt(_)==="/",E=w!=null&&(w===g||!i&&w.startsWith(g)&&w.charAt(g.length)==="/"),T={isActive:x,isPending:E,isTransitioning:y},O=x?e:void 0,R;typeof r=="function"?R=r(T):R=[r,x?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(T):a;return k.createElement(C5,{...c,"aria-current":O,className:R,ref:u,style:M,to:s,viewTransition:o},typeof l=="function"?l(T):l)});$Z.displayName="NavLink";var Ave=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=V2,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:d,...h},p)=>{let{unstable_useTransitions:m}=k.useContext(Vs),y=Pve(),g=Nve(o,{relative:c}),v=s.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&jZ.test(o),_=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let E=x.nativeEvent.submitter,T=(E==null?void 0:E.getAttribute("formmethod"))||s,O=()=>y(E||x.currentTarget,{fetcherKey:e,method:T,navigate:n,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:d});m&&n!==!1?k.startTransition(()=>O()):O()};return k.createElement("form",{ref:p,method:v,action:g,onSubmit:r?l:_,...h,"data-discover":!w&&t==="render"?"true":void 0})});Ave.displayName="Form";function kve(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MZ(t){let e=k.useContext(Qy);return mr(e,kve(t)),e}function Ove(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=C1(),u=jd(),f=P1(t,{relative:a});return k.useCallback(d=>{if(ave(d,e)){d.preventDefault();let h=n!==void 0?n:Xw(u)===Xw(f),p=()=>c(t,{replace:h,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});l?k.startTransition(()=>p()):p()}},[u,c,f,n,r,e,t,i,a,s,o,l])}var Tve=0,Cve=()=>`__${String(++Tve)}__`;function Pve(){let{router:t}=MZ("useSubmit"),{basename:e}=k.useContext(Vs),n=Yye(),r=t.fetch,i=t.navigate;return k.useCallback(async(a,s={})=>{let{action:o,method:l,encType:c,formData:u,body:f}=lve(a,e);if(s.navigate===!1){let d=s.fetcherKey||Cve();await r(d,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:u,body:f,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:u,body:f,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function Nve(t,{relative:e}={}){let{basename:n}=k.useContext(Vs),r=k.useContext(Tl);mr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...P1(t||".",{relative:e})},s=jd();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();a.search=u?`?${u}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:wu([n,a.pathname])),Xw(a)}function Ive(t,{relative:e}={}){let n=k.useContext(EZ);mr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=MZ("useViewTransitionState"),i=P1(t,{relative:e});if(!n.isTransitioning)return!1;let a=Tu(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Tu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return nE(i.pathname,s)!=null||nE(i.pathname,a)!=null}var tc=function(){return tc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tc.apply(this,arguments)};function tv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Rve(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{c(r.next(u))}catch(f){s(f)}}function l(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function jve(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}const $ve=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class m$ extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Mve extends m${constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class EF extends m${constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AF extends m${constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var AI;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(AI||(AI={}));class Lve{constructor(e,{headers:n={},customFetch:r,region:i=AI.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=$ve(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Rve(this,arguments,void 0,function*(n,r={}){var i;let a,s;try{const{headers:o,method:l,body:c,signal:u,timeout:f}=r;let d={},{region:h}=r;h||(h=this.region);const p=new URL(`${this.url}/${n}`);h&&h!=="any"&&(d["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let m;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=c):typeof c=="string"?(d["Content-Type"]="text/plain",m=c):typeof FormData<"u"&&c instanceof FormData?m=c:(d["Content-Type"]="application/json",m=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?m=JSON.stringify(c):m=c;let y=u;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),u?(y=s.signal,u.addEventListener("abort",()=>s.abort())):y=s.signal);const g=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:m,signal:y}).catch(x=>{throw new Mve(x)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new EF(g);if(!g.ok)throw new AF(g);let w=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield g.json():w==="application/octet-stream"||w==="application/pdf"?_=yield g.blob():w==="text/event-stream"?_=g:w==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof AF||o instanceof EF?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var Dve=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Fve=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let s=null,o=null,l=null,c=a.status,u=a.statusText;if(a.ok){var f,d;if(n.method!=="HEAD"){var h;const g=await a.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((h=n.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?o=g:o=JSON.parse(g))}const m=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),y=(d=a.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");m&&y&&y.length>1&&(l=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var p;const m=await a.text();try{s=JSON.parse(m),Array.isArray(s)&&a.status===404&&(o=[],s=null,c=200,u="OK")}catch{a.status===404&&m===""?(c=204,u="No Content"):s={message:m}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,c=200,u="OK"),s&&n.shouldThrowOnError)throw new Dve(s)}return{error:s,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(a=>{var s;let o="",l="",c="";const u=a==null?void 0:a.cause;if(u){var f,d,h,p;const g=(f=u==null?void 0:u.message)!==null&&f!==void 0?f:"",v=(d=u==null?void 0:u.code)!==null&&d!==void 0?d:"";o=`${(h=a==null?void 0:a.name)!==null&&h!==void 0?h:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(p=u==null?void 0:u.name)!==null&&p!==void 0?p:"Error"}: ${g}`,v&&(o+=` (${v})`),u!=null&&u.stack&&(o+=`
${u.stack}`)}else{var m;o=(m=a==null?void 0:a.stack)!==null&&m!==void 0?m:""}const y=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",y>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${y} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((u==null?void 0:u.name)==="HeadersOverflowError"||(u==null?void 0:u.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",y>this.urlLengthLimit&&(l+=`. Your request URL is ${y} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Bve=class extends Fve{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var s;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const kF=new RegExp("[,()]");var Mm=class extends Bve{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&kF.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&kF.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Uve=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let a=!1;const s=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",s),r&&l.append("Prefer",`count=${r}`),new Mm({method:i,url:o,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:a,headers:s}=this.cloneRequestState();if(e&&s.append("Prefer",`count=${e}`),n||s.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);a.searchParams.set("columns",l.join(","))}}return new Mm({method:i,url:a,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var a;const s="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&o.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);o.searchParams.set("columns",u.join(","))}}return new Mm({method:s,url:o,headers:l,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Mm({method:r,url:i,headers:a,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Mm({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Jw(t){"@babel/helpers - typeof";return Jw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jw(t)}function zve(t,e){if(Jw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vve(t){var e=zve(t,"string");return Jw(e)=="symbol"?e:e+""}function Wve(t,e,n){return(e=Vve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(n),!0).forEach(function(r){Wve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Hve=class LZ{constructor(e,{headers:n={},schema:r,fetch:i,timeout:a,urlLengthLimit:s=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=s;const o=i??globalThis.fetch;a!==void 0&&a>0?this.fetch=(l,c)=>{const u=new AbortController,f=setTimeout(()=>u.abort(),a),d=c==null?void 0:c.signal;if(d){if(d.aborted)return clearTimeout(f),o(l,c);const h=()=>{clearTimeout(f),u.abort()};return d.addEventListener("abort",h,{once:!0}),o(l,xx(xx({},c),{},{signal:u.signal})).finally(()=>{clearTimeout(f),d.removeEventListener("abort",h)})}return o(l,xx(xx({},c),{},{signal:u.signal})).finally(()=>clearTimeout(f))}:this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Uve(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new LZ(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:i=!1,count:a}={}){var s;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(u)),f=r&&Object.values(n).some(u);f?(o="POST",c=n):r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{l.searchParams.append(h,p)})):(o="POST",c=n);const d=new Headers(this.headers);return f?d.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&d.set("Prefer",`count=${a}`),new Mm({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}};class qve{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Gve="2.95.3",Kve=`realtime-js/${Gve}`,Yve="1.0.0",DZ="2.0.0",TF=DZ,kI=1e4,Zve=1e3,Xve=100;var If;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(If||(If={}));var mi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(mi||(mi={}));var al;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(al||(al={}));var OI;(function(t){t.websocket="websocket"})(OI||(OI={}));var Ih;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ih||(Ih={}));class Jve{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,n,r){var i,a;const s=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+s.length+c.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(h),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,l.length),p.setUint8(m++,o.length),p.setUint8(m++,s.length),p.setUint8(m++,c.length),p.setUint8(m++,f.length),p.setUint8(m++,n),Array.from(l,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(o,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(s,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(c,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(f,g=>p.setUint8(m++,g.charCodeAt(0)));var y=new Uint8Array(h.byteLength+r.byteLength);return y.set(new Uint8Array(h),0),y.set(new Uint8Array(r),h.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,a,s,o,l]=r;return n({join_ref:i,ref:a,topic:s,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2),s=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+a));l=l+a;const f=r.decode(e.slice(l,l+s));l=l+s;const d=e.slice(l,e.byteLength),h=o===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,p={type:this.BROADCAST_EVENT,event:u,payload:h};return s>0&&(p.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class FZ{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Kn||(Kn={}));const CF=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=Qve(s,t,e,i),a),{}):{}},Qve=(t,e,n,r)=>{const i=e.find(o=>o.name===t),a=i==null?void 0:i.type,s=n[t];return a&&!r.includes(a)?BZ(a,s):TI(s)},BZ=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return r0e(e,n)}switch(t){case Kn.bool:return e0e(e);case Kn.float4:case Kn.float8:case Kn.int2:case Kn.int4:case Kn.int8:case Kn.numeric:case Kn.oid:return t0e(e);case Kn.json:case Kn.jsonb:return n0e(e);case Kn.timestamp:return i0e(e);case Kn.abstime:case Kn.date:case Kn.daterange:case Kn.int4range:case Kn.int8range:case Kn.money:case Kn.reltime:case Kn.text:case Kn.time:case Kn.timestamptz:case Kn.timetz:case Kn.tsrange:case Kn.tstzrange:return TI(e);default:return TI(e)}},TI=t=>t,e0e=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},t0e=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},n0e=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},r0e=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const s=t.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>BZ(e,o))}return t},i0e=t=>typeof t=="string"?t.replace(" ","T"):t,UZ=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class zT{constructor(e,n,r={},i=kI){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var PF;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(PF||(PF={}));class uw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uw.syncState(this.state,i,a,s),this.pendingDiffs.forEach(l=>{this.state=uw.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=uw.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),s=this.transformState(n),o={},l={};return this.map(a,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const f=a[c];if(f){const d=u.map(y=>y.presence_ref),h=f.map(y=>y.presence_ref),p=u.filter(y=>h.indexOf(y.presence_ref)<0),m=f.filter(y=>d.indexOf(y.presence_ref)<0);p.length>0&&(o[c]=p),m.length>0&&(l[c]=m)}else o[c]=u}),this.syncDiff(a,{joins:o,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const f=e[o].map(h=>h.presence_ref),d=u.filter(h=>f.indexOf(h.presence_ref)<0);e[o].unshift(...d)}r(o,u,l)}),this.map(s,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var NF;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(NF||(NF={}));var fw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fw||(fw={}));var eu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(eu||(eu={}));class ag{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=mi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new zT(this,al.join,this.params,this.timeout),this.rejoinTimer=new FZ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mi.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(al.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new uw(this),this.broadcastEndpointURL=UZ(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==mi.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[fw.PRESENCE]&&this.bindings[fw.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(eu.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(eu.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){e==null||e(eu.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,g=[];for(let v=0;v<y;v++){const w=m[v],{filter:{event:_,schema:x,table:E,filter:T}}=w,O=h&&h[v];if(O&&O.event===_&&ag.isFilterValueEqual(O.schema,x)&&ag.isFilterValueEqual(O.table,E)&&ag.isFilterValueEqual(O.filter,T))g.push(Object.assign(Object.assign({},w),{id:O.id}));else{this.unsubscribe(),this.state=mi.errored,e==null||e(eu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(eu.SUBSCRIBED);return}}).receive("error",h=>{this.state=mi.errored,e==null||e(eu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(eu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===mi.joined&&e===fw.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(al.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new zT(this,al.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mi.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new zT(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Xve){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const s=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=al;if(r&&[o,l,c,u].indexOf(s)>=0&&r!==this._joinRef())return;let d=this._onMessage(s,n,r);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var p,m,y;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(m=h.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(h=>h.callback(d,r)):(a=this.bindings[s])===null||a===void 0||a.filter(h=>{var p,m,y,g,v,w;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const _=h.id,x=(p=h.filter)===null||p===void 0?void 0:p.event;return _&&((m=n.ids)===null||m===void 0?void 0:m.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const _=(v=(g=h==null?void 0:h.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:m,table:y,commit_timestamp:g,type:v,errors:w}=p;d=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:g,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(p))}h.callback(d,r)})}_isClosed(){return this.state===mi.closed}_isJoined(){return this.state===mi.joined}_isJoining(){return this.state===mi.joining}_isLeaving(){return this.state===mi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ag.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(al.close,{},e)}_onError(e){this._on(al.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=CF(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=CF(e.columns,e.old_record)),n}}const VT=()=>{},Sx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a0e=[1e3,2e3,5e3,1e4],s0e=1e4,o0e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l0e{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kI,this.transport=null,this.heartbeatIntervalMs=Sx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=VT,this.ref=0,this.reconnectTimer=null,this.vsn=TF,this.logger=VT,this.conn=null,this.sendBuffer=[],this.serializer=new Jve,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${OI.websocket}`,this.httpEndpoint=UZ(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qve.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case If.connecting:return Ih.Connecting;case If.open:return Ih.Open;case If.closing:return Ih.Closing;default:return Ih.Closed}}isConnected(){return this.connectionState()===Ih.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new ag(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,s=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Zve,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Sx.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:a,ref:s}=n,o=s?`(${s})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),a),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===If.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===If.open||this.conn.readyState===If.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(al.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([o0e],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:Kve};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(al.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new FZ(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,s,o,l,c,u,f,d,h;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:kI,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Sx.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:VT,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:TF,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:p=>a0e[p-1]||s0e,this.vsn){case Yve:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(p,m)=>m(JSON.stringify(p)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(p,m)=>m(JSON.parse(p));break;case DZ:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Qw=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function c0e(t,e,n){const r=new URL(e,t);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function u0e(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function f0e(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:s}){const o=c0e(t.baseUrl,r,i),l=await u0e(t.auth),c=await e(o,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...l,...s},body:a?JSON.stringify(a):void 0}),u=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),d=f&&u?JSON.parse(u):u;if(!c.ok){const h=f?d:void 0,p=h==null?void 0:h.error;throw new Qw((p==null?void 0:p.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:h})}return{status:c.status,headers:c.headers,data:d}}}}function Ex(t){return t.join("")}var d0e=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ex(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ex(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ex(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ex(t.namespace)}`}),!0}catch(e){if(e instanceof Qw&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Qw&&n.status===409)return;throw n}}};function dm(t){return t.join("")}var h0e=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dm(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dm(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dm(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dm(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dm(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dm(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Qw&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Qw&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},p0e=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=f0e({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new d0e(this.client,e),this.tableOps=new h0e(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},P5=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function N5(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Ax=class extends P5{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zZ=class extends P5{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const m0e=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),g0e=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},CI=t=>{if(Array.isArray(t))return t.map(n=>CI(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=CI(r)}),e},y0e=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}function v0e(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w0e(t){var e=v0e(t,"string");return eb(e)=="symbol"?e:e+""}function b0e(t,e,n){return(e=w0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IF(Object(n),!0).forEach(function(r){b0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const RF=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},_0e=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,a=i.status||500;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";e(new Ax(RF(s),a,o,r))}).catch(()=>{if(r==="vectors"){const s=a+"";e(new Ax(i.statusText||`HTTP ${a} error`,a,s,r))}else{const s=a+"";e(new Ax(i.statusText||`HTTP ${a} error`,a,s,r))}});else{const s=a+"";e(new Ax(i.statusText||`HTTP ${a} error`,a,s,r))}}else e(new zZ(RF(t),t,r))},x0e=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?Rt(Rt({},i),n):(g0e(r)?(i.headers=Rt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Rt(Rt({},i),n))};async function y0(t,e,n,r,i,a,s){return new Promise((o,l)=>{t(n,x0e(e,r,i,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;if(s==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>o(c)).catch(c=>_0e(c,l,r,s))})}function VZ(t="storage"){return{get:async(e,n,r,i)=>y0(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,a)=>y0(e,"POST",n,i,a,r,t),put:async(e,n,r,i,a)=>y0(e,"PUT",n,i,a,r,t),head:async(e,n,r,i)=>y0(e,"HEAD",n,Rt(Rt({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,a)=>y0(e,"DELETE",n,i,a,r,t)}}const S0e=VZ("storage"),{get:tb,post:nl,put:PI,head:E0e,remove:g$}=S0e,ks=VZ("vectors");var nv=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=m0e(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(N5(n))return{data:null,error:n};throw n}}},A0e=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(N5(e))return{data:null,error:e};throw e}}};let WZ;WZ=Symbol.toStringTag;var k0e=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[WZ]="BlobDownloadBuilder",this.promise=null}asStream(){return new A0e(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(N5(e))return{data:null,error:e};throw e}}};const O0e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jF={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var T0e=class extends nv{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let a;const s=Rt(Rt({},jF),r);let o=Rt(Rt({},i.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",i.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),l&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(l))):(a=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),r!=null&&r.headers&&(o=Rt(Rt({},o),r.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),f=await(t=="PUT"?PI:nl)(i.fetch,`${i.url}/object/${u}`,a,Rt({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{path:c,id:f.Id,fullPath:f.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const a=i._removeEmptyFolders(t),s=i._getFinalPath(a),o=new URL(i.url+`/object/upload/sign/${s}`);return o.searchParams.set("token",e),i.handleOperation(async()=>{let l;const c=Rt({upsert:jF.upsert},r),u=Rt(Rt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:a,fullPath:(await PI(i.fetch,o.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=Rt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const a=await nl(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+a.url),o=s.searchParams.get("token");if(!o)throw new P5("No token returned by API");return{signedUrl:s.toString(),path:t,token:o}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await nl(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await nl(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),a=await nl(r.fetch,`${r.url}/object/sign/${i}`,Rt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${a.signedURL}${s}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await nl(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>Rt(Rt({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${a}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=i?`?${i}`:"",s=this._getFinalPath(t),o=()=>tb(this.fetch,`${this.url}/${r}/${s}${a}`,{headers:this.headers,noResolveJson:!0},n);return new k0e(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>CI(await tb(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await E0e(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(N5(r)&&r instanceof zZ){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});s!==""&&r.push(s);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${o}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await g$(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=Rt(Rt(Rt({},O0e),e),{},{prefix:t||""});return await nl(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=Rt({},t);return await nl(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const C0e="2.95.3",N1={"X-Client-Info":`storage-js/${C0e}`};var P0e=class extends nv{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),s=Rt(Rt({},N1),e);super(a,s,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await tb(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await tb(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await nl(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await PI(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await nl(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await g$(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},N0e=class extends nv{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=Rt(Rt({},N1),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await nl(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await tb(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await g$(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!y0e(t))throw new P5("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new p0e({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,a){const s=i[a];return typeof s!="function"?s:async(...o)=>{try{return{data:await s.apply(i,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},I0e=class extends nv{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=Rt(Rt({},N1),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await ks.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await ks.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},R0e=class extends nv{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=Rt(Rt({},N1),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},j0e=class extends nv{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=Rt(Rt({},N1),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ks.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},$0e=class extends j0e{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new M0e(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},M0e=class extends I0e{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new L0e(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},L0e=class extends R0e{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Rt(Rt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},D0e=class extends P0e{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new T0e(this.url,this.headers,t,this.fetch)}get vectors(){return new $0e(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new N0e(this.url+"/iceberg",this.headers,this.fetch)}};const HZ="2.95.3",Lm=30*1e3,NI=3,WT=NI*Lm,F0e="http://localhost:9999",B0e="supabase.auth.token",U0e={"X-Client-Info":`gotrue-js/${HZ}`},II="X-Supabase-Api-Version",qZ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},z0e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V0e=10*60*1e3;class nb extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function wt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class W0e extends nb{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function H0e(t){return wt(t)&&t.name==="AuthApiError"}class Rh extends nb{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Hu extends nb{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class ys extends Hu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HT(t){return wt(t)&&t.name==="AuthSessionMissingError"}class hm extends Hu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class kx extends Hu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ox extends Hu{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q0e(t){return wt(t)&&t.name==="AuthImplicitGrantRedirectError"}class $F extends Hu{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class G0e extends Hu{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class RI extends Hu{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function qT(t){return wt(t)&&t.name==="AuthRetryableFetchError"}class MF extends Hu{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class jI extends Hu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const rE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),LF=` 	
\r=`.split(""),K0e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<LF.length;e+=1)t[LF[e].charCodeAt(0)]=-2;for(let e=0;e<rE.length;e+=1)t[rE[e].charCodeAt(0)]=e;return t})();function DF(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(rE[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(rE[r]),e.queuedBits-=6}}function GZ(t,e,n){const r=K0e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function FF(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{X0e(s,r,n)};for(let s=0;s<t.length;s+=1)GZ(t.charCodeAt(s),i,a);return e.join("")}function Y0e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Z0e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Y0e(r,e)}}function X0e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ig(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)GZ(t.charCodeAt(i),n,r);return new Uint8Array(e)}function J0e(t){const e=[];return Z0e(t,n=>e.push(n)),new Uint8Array(e)}function Bh(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>DF(i,n,r)),DF(null,n,r),e.join("")}function Q0e(t){return Math.round(Date.now()/1e3)+t}function ewe(){return Symbol("auth-callback")}const qi=()=>typeof window<"u"&&typeof document<"u",hh={tested:!1,writable:!1},KZ=()=>{if(!qi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hh.tested)return hh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),hh.tested=!0,hh.writable=!0}catch{hh.tested=!0,hh.writable=!1}return hh.writable};function twe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const YZ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nwe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Dm=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ph=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vi=async(t,e)=>{await t.removeItem(e)};class I5{constructor(){this.promise=new I5.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}I5.promiseConstructor=Promise;function Tx(t){const e=t.split(".");if(e.length!==3)throw new jI("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!z0e.test(e[r]))throw new jI("JWT not in base64url format");return{header:JSON.parse(FF(e[0])),payload:JSON.parse(FF(e[1])),signature:Ig(e[2]),raw:{header:e[0],payload:e[1]}}}async function rwe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function iwe(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await t(a);if(!e(a,null,s)){r(s);return}}catch(s){if(!e(a,s)){i(s);return}}})()})}function awe(t){return("0"+t.toString(16)).substr(-2)}function swe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,awe).join("")}async function owe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function lwe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await owe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pm(t,e,n=!1){const r=swe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Dm(t,`${e}-code-verifier`,i);const a=await lwe(r);return[a,r===a?"plain":"s256"]}const cwe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uwe(t){const e=t.headers.get(II);if(!e||!e.match(cwe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fwe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dwe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hwe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mm(t){if(!hwe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function GT(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pwe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function BF(t){return JSON.parse(JSON.stringify(t))}const xh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mwe=[502,503,504];async function UF(t){var e;if(!nwe(t))throw new RI(xh(t),0);if(mwe.includes(t.status))throw new RI(xh(t),t.status);let n;try{n=await t.json()}catch(a){throw new Rh(xh(a),a)}let r;const i=uwe(t);if(i&&i.getTime()>=qZ["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new MF(xh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ys}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new MF(xh(n),t.status,n.weak_password.reasons);throw new W0e(xh(n),t.status||500,r)}const gwe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function It(t,e,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[II]||(a[II]=qZ["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await ywe(t,e,n+o,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ywe(t,e,n,r,i,a){const s=gwe(e,r,i,a);let o;try{o=await t(n,Object.assign({},s))}catch(l){throw console.error(l),new RI(xh(l),0)}if(o.ok||await UF(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await UF(l)}}function Xo(t){var e;let n=null;bwe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Q0e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function zF(t){const e=Xo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Uf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vwe(t){return{data:t,error:null}}function wwe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,s=tv(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},s);return{data:{properties:o,user:l},error:null}}function VF(t){return t}function bwe(t){return t.access_token&&t.refresh_token&&t.expires_in}const KT=["global","local","others"];class _we{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=YZ(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=KT[0]){if(KT.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${KT.join(", ")}`);try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(wt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Uf})}catch(r){if(wt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=tv(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:wwe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(wt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Uf})}catch(n){if(wt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,s,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:VF});if(u.error)throw u.error;const f=await u.json(),d=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=m}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(wt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){mm(e);try{return await It(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Uf})}catch(n){if(wt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){mm(e);try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Uf})}catch(r){if(wt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){mm(e);try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Uf})}catch(r){if(wt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){mm(e.userId);try{const{data:n,error:r}=await It(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(wt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){mm(e.userId),mm(e.id);try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(wt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,s,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await It(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:VF});if(u.error)throw u.error;const f=await u.json(),d=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);c[`${y}Page`]=m}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(wt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await It(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(wt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await It(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(wt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await It(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(wt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await It(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(wt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await It(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(wt(n))return{data:null,error:n};throw n}}}function WF(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const gm={debug:!!(globalThis&&KZ()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ZZ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xwe extends ZZ{}async function Swe(t,e,n){gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),gm.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xwe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(gm.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Ewe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function XZ(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Awe(t){return parseInt(t,16)}function kwe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Owe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:l,resources:c,scheme:u,uri:f,version:d}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=XZ(t.address),p=u?`${u}://${r}`:r,m=t.statement?`${t.statement}
`:"",y=`${p} wants you to sign in with your Ethereum account:
${h}

${m}`;let g=`URI: ${f}
Version: ${d}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),o&&(g+=`
Not Before: ${o.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let v=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);v+=`
- ${w}`}g+=v}return`${y}
${g}`}class Kr extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class iE extends Kr{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Twe({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Kr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Kr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Kr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Kr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Kr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Kr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Kr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Kr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(JZ(s)){if(a.rp.id!==s)return new Kr({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Kr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Kr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Kr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Kr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Cwe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Kr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Kr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(JZ(r)){if(n.rpId!==r)return new Kr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Kr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Kr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Kr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Pwe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Nwe=new Pwe;function Iwe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=tv(t,["challenge","user","excludeCredentials"]),a=Ig(e).buffer,s=Object.assign(Object.assign({},n),{id:Ig(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ig(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function Rwe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=tv(t,["challenge","allowCredentials"]),i=Ig(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const o=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:Ig(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function jwe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Bh(new Uint8Array(t.response.attestationObject)),clientDataJSON:Bh(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $we(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Bh(new Uint8Array(i.authenticatorData)),clientDataJSON:Bh(new Uint8Array(i.clientDataJSON)),signature:Bh(new Uint8Array(i.signature)),userHandle:i.userHandle?Bh(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function JZ(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function HF(){var t,e;return!!(qi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Mwe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new iE("Browser returned unexpected credential type",e)}:{data:null,error:new iE("Empty credential response",e)}}catch(e){return{data:null,error:Twe({error:e,options:t})}}}async function Lwe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new iE("Browser returned unexpected credential type",e)}:{data:null,error:new iE("Empty credential response",e)}}catch(e){return{data:null,error:Cwe({error:e,options:t})}}}const Dwe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Fwe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function aE(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))r[a]=s;else if(n(s))r[a]=s;else if(e(s)){const o=r[a];e(o)?r[a]=aE(o,s):r[a]=aE(s)}else r[a]=s}return r}function Bwe(t,e){return aE(Dwe,t,e||{})}function Uwe(t,e){return aE(Fwe,t,e||{})}class zwe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){var s;try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:l};const c=i??Nwe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;if(!u.name){const f=r;if(f)u.name=`${u.id}:${f}`;else{const h=(await this.client.getUser()).data.user,p=((s=h==null?void 0:h.user_metadata)===null||s===void 0?void 0:s.name)||(h==null?void 0:h.email)||(h==null?void 0:h.id)||"User";u.name=`${u.id}:${p}`}}u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Bwe(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:d}=await Mwe({publicKey:u,signal:c});return f?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=Uwe(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:d}=await Lwe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(o){return wt(o)?{data:null,error:o}:{data:null,error:new Rh("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new nb("rpId is required for WebAuthn authentication")};try{if(!HF())return{data:null,error:new Rh("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:l}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(s){return wt(s)?{data:null,error:s}:{data:null,error:new Rh("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new nb("rpId is required for WebAuthn registration")};try{if(!HF())return{data:null,error:new Rh("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(s){return wt(s)?{data:null,error:s}:{data:null,error:new Rh("Unexpected error in register",s)}}}}Ewe();const Vwe={url:F0e,storageKey:B0e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U0e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function qF(t,e,n){return await n()}const ym={};class rb{get jwks(){var e,n;return(n=(e=ym[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ym[this.storageKey]=Object.assign(Object.assign({},ym[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ym[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ym[this.storageKey]=Object.assign(Object.assign({},ym[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Vwe),e);if(this.storageKey=a.storageKey,this.instanceID=(n=rb.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,rb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&qi()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new _we({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=YZ(a.fetch),this.lock=a.lock||qF,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&qi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Swe:this.lock=qF,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zwe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:KZ()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=WF(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=WF(this.memoryStorage)),qi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s);try{await this._notifyAllSubscribers(s.data.event,s.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(s=>{this._debug("#initialize()","error",s)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${HZ}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(qi()&&(n=twe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),qi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),q0e(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return wt(n)?this._returnResult({error:n}):this._returnResult({error:new Rh("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Xo}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(wt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:u,password:f,options:d}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await pm(this.storage,this.storageKey)),a=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:p},xform:Xo})}else if("phone"in e){const{phone:u,password:f,options:d}=e;a=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Xo})}else throw new kx("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await Vi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:s,options:o}=e;n=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zF})}else if("phone"in e){const{phone:a,password:s,options:o}=e;n=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zF})}else throw new kx("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new hm;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(wt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,s,o,l,c,u,f,d;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:m,wallet:y,statement:g,options:v}=e;let w;if(qi())if(typeof y=="object")w=y;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")w=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const _=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href),x=await w.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=XZ(x[0]);let T=(r=v==null?void 0:v.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const R=await w.request({method:"eth_chainId"});T=Awe(R)}const O={domain:_.host,address:E,statement:g,uri:_.href,version:"1",chainId:T,nonce:(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=v==null?void 0:v.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=Owe(O),p=await w.request({method:"personal_sign",params:[kwe(h),E]})}try{const{data:m,error:y}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Xo});if(y)throw y;if(!m||!m.session||!m.user){const g=new hm;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:y})}catch(m){if(wt(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var n,r,i,a,s,o,l,c,u,f,d,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:g,statement:v,options:w}=e;let _;if(qi())if(typeof g=="object")_=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const x=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),v?{statement:v}:null));let T;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")T=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)T=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)p=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),m=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:y,error:g}=await It(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Bh(m)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Xo});if(g)throw g;if(!y||!y.session||!y.user){const v=new hm;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(wt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const n=await ph(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new G0e;const{data:a,error:s}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Xo});if(await Vi(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new hm;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:s}=e,o=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xo}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new hm;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(wt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,a,s;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await pm(this.storage,this.storageKey));const{error:f}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new kx("You must provide either an email or phone number.")}catch(o){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:o}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Xo});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,c=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(wt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,a,s;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await pm(this.storage,this.storageKey));const c=await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:vwe});return!((a=c.data)===null||a===void 0)&&a.url&&qi()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ys;const{error:i}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(wt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:s}=await It(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:s,error:o}=await It(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new kx("You must provide either an email or phone number and a type")}catch(n){if(wt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ph(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<WT:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await ph(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=GT()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=pwe(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Uf}):await this._useSession(async n=>{var r,i,a;const{data:s,error:o}=n;if(o)throw o;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ys}:await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Uf})})}catch(n){if(wt(n))return HT(n)&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new ys;const s=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await pm(this.storage,this.storageKey));const{data:c,error:u}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:s.access_token,xform:Uf});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ys;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:s}=Tx(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(wt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:o}=n;if(o)throw o;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ys;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(wt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!qi())throw new Ox("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ox(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new $F("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ox("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $F("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:l,token_type:c}=e;if(!a||!o||!s||!c)throw new Ox("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let d=u+f;l&&(d=parseInt(l));const h=d-u;h*1e3<=Lm&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const p=d-f;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:m,error:y}=await this._getUser(a);if(y)throw y;const g={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:d,refresh_token:s,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(wt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ph(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a&&!HT(a))return this._returnResult({error:a});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(H0e(o)&&(o.status===404||o.status===401||o.status===403)||HT(o)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=ewe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await pm(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var s,o,l,c,u;const{data:f,error:d}=a;if(d)throw d;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return qi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(wt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:s,provider:o,token:l,access_token:c,nonce:u}=e,f=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Xo}),{data:d,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new hm}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h}))}catch(i){if(await Vi(this.storage,`${this.storageKey}-code-verifier`),wt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)throw s;return await It(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await iwe(async i=>(i>0&&await rwe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xo})),(i,a)=>{const s=200*Math.pow(2,i);return a&&qT(a)&&Date.now()+s-r<Lm})}catch(r){if(this._debug(n,"error",r),wt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),qi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ph(this.storage,this.storageKey);if(i&&this.userStorage){let s=await ph(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Dm(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:GT()}else if(i&&!i.user&&!i.user){const s=await ph(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Vi(this.storage,this.storageKey+"-user"),await Dm(this.storage,this.storageKey,i)):i.user=GT()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<WT;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${WT}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),qT(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ys;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new I5;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new ys;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),wt(a)){const s={data:null,error:a};return qT(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Vi(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Dm(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=BF(i);await Dm(this.storage,this.storageKey,a)}else{const i=BF(n);await Dm(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vi(this.storage,this.storageKey),await Vi(this.storage,this.storageKey+"-code-verifier"),await Vi(this.storage,this.storageKey+"-user"),this.userStorage&&await Vi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Lm);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Lm);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Lm}ms, refresh threshold is ${NI} ticks`),i<=NI&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ZZ)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,s]=await pm(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await It(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await It(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?jwe(e.webauthn.credential_response):$we(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Iwe(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Rwe(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,a;if(e)try{const{payload:h}=Tx(e);let p=null;h.aal&&(p=h.aal);let m=p;const{data:{user:y},error:g}=await this.getUser(e);if(g)return this._returnResult({data:null,error:g});((r=(n=y==null?void 0:y.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const w=h.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:w},error:null}}catch(h){if(wt(h))return this._returnResult({data:null,error:h});throw h}const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Tx(s.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((a=(i=s.user.factors)===null||i===void 0?void 0:i.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(u="aal2");const d=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await It(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ys})})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ys});const s=await It(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&qi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(wt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ys});const s=await It(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&qi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(wt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await It(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ys})})}catch(e){if(wt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await It(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ys})})}catch(n){if(wt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+V0e>i)return r;const{data:a,error:s}=await It(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return this._returnResult({data:null,error:p});r=h.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:l}}=Tx(r);n!=null&&n.allowExpired||fwe(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:a,header:i,signature:s},error:null}}const u=dwe(i.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,J0e(`${o}.${l}`)))throw new jI("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(r){if(wt(r))return this._returnResult({data:null,error:r});throw r}}}rb.nextInstanceID={};const Wwe=rb,Hwe="2.95.3";let U0="";typeof Deno<"u"?U0="deno":typeof document<"u"?U0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?U0="react-native":U0="node";const qwe={"X-Client-Info":`supabase-js-${U0}/${Hwe}`},Gwe={headers:qwe},Kwe={schema:"public"},Ywe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zwe={};function ib(t){"@babel/helpers - typeof";return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(t)}function Xwe(t,e){if(ib(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ib(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jwe(t){var e=Xwe(t,"string");return ib(e)=="symbol"?e:e+""}function Qwe(t,e,n){return(e=Jwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GF(Object(n),!0).forEach(function(r){Qwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const ebe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),tbe=()=>Headers,nbe=(t,e,n)=>{const r=ebe(n),i=tbe();return async(a,s)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new i(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(a,Cr(Cr({},s),{},{headers:c}))}};function rbe(t){return t.endsWith("/")?t:t+"/"}function ibe(t,e){var n,r;const{db:i,auth:a,realtime:s,global:o}=t,{db:l,auth:c,realtime:u,global:f}=e,d={db:Cr(Cr({},l),i),auth:Cr(Cr({},c),a),realtime:Cr(Cr({},u),s),storage:{},global:Cr(Cr(Cr({},f),o),{},{headers:Cr(Cr({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function abe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rbe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var sbe=class extends Wwe{constructor(t){super(t)}},obe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const a=abe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:Kwe,realtime:Zwe,auth:Cr(Cr({},Ywe),{},{storageKey:s}),global:Gwe},l=ibe(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=nbe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Cr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Hve(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new D0e(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Lve(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:a,flowType:s,lock:o,debug:l,throwOnError:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sbe({url:this.authUrl.href,headers:Cr(Cr({},d),u),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:o,debug:l,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new l0e(this.realtimeUrl.href,Cr(Cr({},t),{},{params:Cr(Cr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const lbe=(t,e,n)=>new obe(t,e,n);function cbe(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}cbe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ube="https://izeqxmfsdaspgshghepz.supabase.co",fbe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6ZXF4bWZzZGFzcGdzaGdoZXB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5ODg2NDIsImV4cCI6MjA4NjU2NDY0Mn0.n6tVCc3-GHu_1t18T7C19RhJvc5cEED4VwISTEyTZh4",Fr=lbe(ube,fbe),QZ=k.createContext({}),qu=()=>k.useContext(QZ),dbe=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(null),[a,s]=k.useState(!0);k.useEffect(()=>{Fr.auth.getSession().then(({data:{session:c}})=>{i(c),n((c==null?void 0:c.user)??null),s(!1)});const{data:{subscription:l}}=Fr.auth.onAuthStateChange((c,u)=>{i(u),n((u==null?void 0:u.user)??null),s(!1)});return()=>l.unsubscribe()},[]);const o={signUp:l=>Fr.auth.signUp(l),signIn:l=>Fr.auth.signInWithPassword(l),signOut:()=>Fr.auth.signOut(),user:e,session:r,loading:a};return S.jsx(QZ.Provider,{value:o,children:!a&&t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hbe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pbe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pt=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...c},u)=>k.createElement("svg",{ref:u,...hbe,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${pbe(t)}`,o].join(" "),...c},[...e.map(([f,d])=>k.createElement(f,d)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mbe=Pt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=Pt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gbe=Pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=Pt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vbe=Pt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Pt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=Pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wbe=Pt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=Pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bbe=Pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=Pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _be=Pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xbe=Pt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sbe=Pt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ebe=Pt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Abe=Pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=Pt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=Pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kbe=Pt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Obe=Pt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tbe=Pt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cbe=Pt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pbe=Pt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Pt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=Pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nbe=Pt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ibe=Pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rbe=Pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jbe=Pt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $be=Pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mbe=Pt("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lbe=Pt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=Pt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dbe=Pt("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=Pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fbe=Pt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bbe=Pt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ube=Pt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=Pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=Pt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=Pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=Pt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=Pt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=Pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Pt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vbe=Pt("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wbe=Pt("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=Pt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function ZF(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ac(...t){return e=>{let n=!1;const r=t.map(i=>{const a=ZF(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():ZF(t[i],null)}}}}function dn(...t){return k.useCallback(Ac(...t),t)}var Hbe=Symbol.for("react.lazy"),lE=g3[" use ".trim().toString()];function qbe(t){return typeof t=="object"&&t!==null&&"then"in t}function cX(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Hbe&&"_payload"in t&&qbe(t._payload)}function j5(t){const e=Kbe(t),n=k.forwardRef((r,i)=>{let{children:a,...s}=r;cX(a)&&typeof lE=="function"&&(a=lE(a._payload));const o=k.Children.toArray(a),l=o.find(Zbe);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var Gbe=j5("Slot");function Kbe(t){const e=k.forwardRef((n,r)=>{let{children:i,...a}=n;if(cX(i)&&typeof lE=="function"&&(i=lE(i._payload)),k.isValidElement(i)){const s=Jbe(i),o=Xbe(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ybe=Symbol("radix.slottable");function Zbe(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ybe}function Xbe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function Jbe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function uX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=uX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function en(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=uX(t))&&(r&&(r+=" "),r+=e);return r}const XF=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,JF=en,_$=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return JF(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=e,s=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],f=a==null?void 0:a[c];if(u===null)return null;const d=XF(u)||XF(f);return i[c][d]}),o=n&&Object.entries(n).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:d,...h}=u;return Object.entries(h).every(p=>{let[m,y]=p;return Array.isArray(y)?y.includes({...a,...o}[m]):{...a,...o}[m]===y})?[...c,f,d]:c},[]);return JF(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},x$="-",Qbe=t=>{const e=t1e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const o=s.split(x$);return o[0]===""&&o.length!==1&&o.shift(),fX(o,e)||e1e(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},fX=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?fX(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(x$);return(s=e.validators.find(({validator:o})=>o(a)))==null?void 0:s.classGroupId},QF=/^\[(.+)\]$/,e1e=t=>{if(QF.test(t)){const e=QF.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},t1e=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return r1e(Object.entries(t.classGroups),n).forEach(([a,s])=>{$I(s,r,a,e)}),r},$I=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:eB(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(n1e(i)){$I(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,s])=>{$I(s,eB(e,a),n,r)})})},eB=(t,e)=>{let n=t;return e.split(x$).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},n1e=t=>t.isThemeGetter,r1e=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,o])=>[e+s,o])):a);return[n,i]}):t,i1e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,s)=>{n.set(a,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let s=n.get(a);if(s!==void 0)return s;if((s=r.get(a))!==void 0)return i(a,s),s},set(a,s){n.has(a)?n.set(a,s):i(a,s)}}},dX="!",a1e=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,s=o=>{const l=[];let c=0,u=0,f;for(let y=0;y<o.length;y++){let g=o[y];if(c===0){if(g===i&&(r||o.slice(y,y+a)===e)){l.push(o.slice(u,y)),u=y+a;continue}if(g==="/"){f=y;continue}}g==="["?c++:g==="]"&&c--}const d=l.length===0?o:o.substring(u),h=d.startsWith(dX),p=h?d.substring(1):d,m=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};return n?o=>n({className:o,parseClassName:s}):s},s1e=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},o1e=t=>({cache:i1e(t.cacheSize),parseClassName:a1e(t),...Qbe(t)}),l1e=/\s+/,c1e=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],s=t.trim().split(l1e);let o="";for(let l=s.length-1;l>=0;l-=1){const c=s[l],{modifiers:u,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}=n(c);let p=!!h,m=r(p?d.substring(0,h):d);if(!m){if(!p){o=c+(o.length>0?" "+o:o);continue}if(m=r(d),!m){o=c+(o.length>0?" "+o:o);continue}p=!1}const y=s1e(u).join(":"),g=f?y+dX:y,v=g+m;if(a.includes(v))continue;a.push(v);const w=i(m,p);for(let _=0;_<w.length;++_){const x=w[_];a.push(g+x)}o=c+(o.length>0?" "+o:o)}return o};function u1e(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=hX(e))&&(r&&(r+=" "),r+=n);return r}const hX=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=hX(t[r]))&&(n&&(n+=" "),n+=e);return n};function f1e(t,...e){let n,r,i,a=s;function s(l){const c=e.reduce((u,f)=>f(u),t());return n=o1e(c),r=n.cache.get,i=n.cache.set,a=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=c1e(l,n);return i(l,u),u}return function(){return a(u1e.apply(null,arguments))}}const nr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},pX=/^\[(?:([a-z-]+):)?(.+)\]$/i,d1e=/^\d+\/\d+$/,h1e=new Set(["px","full","screen"]),p1e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,m1e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,g1e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,y1e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,v1e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kc=t=>Rg(t)||h1e.has(t)||d1e.test(t),wf=t=>rv(t,"length",k1e),Rg=t=>!!t&&!Number.isNaN(Number(t)),YT=t=>rv(t,"number",Rg),v0=t=>!!t&&Number.isInteger(Number(t)),w1e=t=>t.endsWith("%")&&Rg(t.slice(0,-1)),Jt=t=>pX.test(t),bf=t=>p1e.test(t),b1e=new Set(["length","size","percentage"]),_1e=t=>rv(t,b1e,mX),x1e=t=>rv(t,"position",mX),S1e=new Set(["image","url"]),E1e=t=>rv(t,S1e,T1e),A1e=t=>rv(t,"",O1e),w0=()=>!0,rv=(t,e,n)=>{const r=pX.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},k1e=t=>m1e.test(t)&&!g1e.test(t),mX=()=>!1,O1e=t=>y1e.test(t),T1e=t=>v1e.test(t),C1e=()=>{const t=nr("colors"),e=nr("spacing"),n=nr("blur"),r=nr("brightness"),i=nr("borderColor"),a=nr("borderRadius"),s=nr("borderSpacing"),o=nr("borderWidth"),l=nr("contrast"),c=nr("grayscale"),u=nr("hueRotate"),f=nr("invert"),d=nr("gap"),h=nr("gradientColorStops"),p=nr("gradientColorStopPositions"),m=nr("inset"),y=nr("margin"),g=nr("opacity"),v=nr("padding"),w=nr("saturate"),_=nr("scale"),x=nr("sepia"),E=nr("skew"),T=nr("space"),O=nr("translate"),R=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Jt,e],j=()=>[Jt,e],U=()=>["",Kc,wf],B=()=>["auto",Rg,Jt],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",Jt],ae=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[Rg,Jt];return{cacheSize:500,separator:":",theme:{colors:[w0],spacing:[Kc,wf],blur:["none","",bf,Jt],brightness:ue(),borderColor:[t],borderRadius:["none","","full",bf,Jt],borderSpacing:j(),borderWidth:U(),contrast:ue(),grayscale:G(),hueRotate:ue(),invert:G(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[w1e,wf],inset:N(),margin:N(),opacity:ue(),padding:j(),saturate:ue(),scale:ue(),sepia:G(),skew:ue(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",Jt]}],container:["container"],columns:[{columns:[bf]}],"break-after":[{"break-after":ae()}],"break-before":[{"break-before":ae()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),Jt]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",v0,Jt]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Jt]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",v0,Jt]}],"grid-cols":[{"grid-cols":[w0]}],"col-start-end":[{col:["auto",{span:["full",v0,Jt]},Jt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[w0]}],"row-start-end":[{row:["auto",{span:[v0,Jt]},Jt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Jt]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Jt,e]}],"min-w":[{"min-w":[Jt,e,"min","max","fit"]}],"max-w":[{"max-w":[Jt,e,"none","full","min","max","fit","prose",{screen:[bf]},bf]}],h:[{h:[Jt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Jt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Jt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Jt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",bf,wf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",YT]}],"font-family":[{font:[w0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jt]}],"line-clamp":[{"line-clamp":["none",Rg,YT]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kc,Jt]}],"list-image":[{"list-image":["none",Jt]}],"list-style-type":[{list:["none","disc","decimal",Jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kc,wf]}],"underline-offset":[{"underline-offset":["auto",Kc,Jt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),x1e]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_1e]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},E1e]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:Y()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Kc,Jt]}],"outline-w":[{outline:[Kc,wf]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Kc,wf]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",bf,A1e]}],"shadow-color":[{shadow:[w0]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",bf,Jt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Jt]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",Jt]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",Jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[v0,Jt]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kc,wf,YT]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},P1e=f1e(C1e);function xt(...t){return P1e(en(t))}const MI=_$("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),sn=k.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const s=r?Gbe:"button";return S.jsx(s,{className:xt(MI({variant:e,size:n,className:t})),ref:a,...i})});sn.displayName="Button";const gX=k.createContext({theme:"system",setTheme:()=>null});function N1e({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[i,a]=k.useState(()=>localStorage.getItem(n)||e);k.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),i==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(l);return}o.classList.add(i)},[i]);const s={theme:i,setTheme:o=>{localStorage.setItem(n,o),a(o)}};return S.jsx(gX.Provider,{...r,value:s,children:t})}const I1e=()=>{const t=k.useContext(gX);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function rt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function R1e(t,e){const n=k.createContext(e),r=a=>{const{children:s,...o}=a,l=k.useMemo(()=>o,Object.values(o));return S.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function i(a){const s=k.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,i]}function kc(t,e=[]){let n=[];function r(a,s){const o=k.createContext(s),l=n.length;n=[...n,s];const c=f=>{var g;const{scope:d,children:h,...p}=f,m=((g=d==null?void 0:d[t])==null?void 0:g[l])||o,y=k.useMemo(()=>p,Object.values(p));return S.jsx(m.Provider,{value:y,children:h})};c.displayName=a+"Provider";function u(f,d){var m;const h=((m=d==null?void 0:d[t])==null?void 0:m[l])||o,p=k.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=n.map(s=>k.createContext(s));return function(o){const l=(o==null?void 0:o[t])||a;return k.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,j1e(i,...e)]}function j1e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var Si=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},$1e=g3[" useInsertionEffect ".trim().toString()]||Si;function wd({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,s]=M1e({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const u=k.useRef(t!==void 0);k.useEffect(()=>{const f=u.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=k.useCallback(u=>{var f;if(o){const d=L1e(u)?u(t):u;d!==t&&((f=s.current)==null||f.call(s,d))}else a(u)},[o,t,a,s]);return[l,c]}function M1e({defaultProp:t,onChange:e}){const[n,r]=k.useState(t),i=k.useRef(n),a=k.useRef(e);return $1e(()=>{a.current=e},[e]),k.useEffect(()=>{var s;i.current!==n&&((s=a.current)==null||s.call(a,n),i.current=n)},[n,i]),[n,r,a]}function L1e(t){return typeof t=="function"}function D1e(t){const e=F1e(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(U1e);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function F1e(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=V1e(i),o=z1e(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var B1e=Symbol("radix.slottable");function U1e(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===B1e}function z1e(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function V1e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var W1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bt=W1e.reduce((t,e)=>{const n=D1e(`Primitive.${e}`),r=k.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function yX(t,e){t&&Xy.flushSync(()=>t.dispatchEvent(e))}function tB(t){const e=H1e(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(G1e);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function H1e(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=Y1e(i),o=K1e(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var q1e=Symbol("radix.slottable");function G1e(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===q1e}function K1e(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function Y1e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function $5(t){const e=t+"CollectionProvider",[n,r]=kc(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:y,children:g}=m,v=se.useRef(null),w=se.useRef(new Map).current;return S.jsx(i,{scope:y,itemMap:w,collectionRef:v,children:g})};s.displayName=e;const o=t+"CollectionSlot",l=tB(o),c=se.forwardRef((m,y)=>{const{scope:g,children:v}=m,w=a(o,g),_=dn(y,w.collectionRef);return S.jsx(l,{ref:_,children:v})});c.displayName=o;const u=t+"CollectionItemSlot",f="data-radix-collection-item",d=tB(u),h=se.forwardRef((m,y)=>{const{scope:g,children:v,...w}=m,_=se.useRef(null),x=dn(y,_),E=a(u,g);return se.useEffect(()=>(E.itemMap.set(_,{ref:_,...w}),()=>void E.itemMap.delete(_))),S.jsx(d,{[f]:"",ref:x,children:v})});h.displayName=u;function p(m){const y=a(t+"CollectionConsumer",m);return se.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((E,T)=>w.indexOf(E.ref.current)-w.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:s,Slot:c,ItemSlot:h},p,r]}var Z1e=k.createContext(void 0);function R1(t){const e=k.useContext(Z1e);return t||e||"ltr"}function xl(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function X1e(t,e=globalThis==null?void 0:globalThis.document){const n=xl(t);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var J1e="DismissableLayer",LI="dismissableLayer.update",Q1e="dismissableLayer.pointerDownOutside",e_e="dismissableLayer.focusOutside",nB,vX=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),j1=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=t,c=k.useContext(vX),[u,f]=k.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=k.useState({}),p=dn(e,T=>f(T)),m=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=m.indexOf(y),v=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,_=v>=g,x=r_e(T=>{const O=T.target,R=[...c.branches].some(M=>M.contains(O));!_||R||(i==null||i(T),s==null||s(T),T.defaultPrevented||o==null||o())},d),E=i_e(T=>{const O=T.target;[...c.branches].some(M=>M.contains(O))||(a==null||a(T),s==null||s(T),T.defaultPrevented||o==null||o())},d);return X1e(T=>{v===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},d),k.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(nB=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),rB(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=nB)}},[u,d,n,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),rB())},[u,c]),k.useEffect(()=>{const T=()=>h({});return document.addEventListener(LI,T),()=>document.removeEventListener(LI,T)},[]),S.jsx(Bt.div,{...l,ref:p,style:{pointerEvents:w?_?"auto":"none":void 0,...t.style},onFocusCapture:rt(t.onFocusCapture,E.onFocusCapture),onBlurCapture:rt(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:rt(t.onPointerDownCapture,x.onPointerDownCapture)})});j1.displayName=J1e;var t_e="DismissableLayerBranch",n_e=k.forwardRef((t,e)=>{const n=k.useContext(vX),r=k.useRef(null),i=dn(e,r);return k.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),S.jsx(Bt.div,{...t,ref:i})});n_e.displayName=t_e;function r_e(t,e=globalThis==null?void 0:globalThis.document){const n=xl(t),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let l=function(){wX(Q1e,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function i_e(t,e=globalThis==null?void 0:globalThis.document){const n=xl(t),r=k.useRef(!1);return k.useEffect(()=>{const i=a=>{a.target&&!r.current&&wX(e_e,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rB(){const t=new CustomEvent(LI);document.dispatchEvent(t)}function wX(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?yX(i,a):i.dispatchEvent(a)}var ZT=0;function M5(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??iB()),document.body.insertAdjacentElement("beforeend",t[1]??iB()),ZT++,()=>{ZT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ZT--}},[])}function iB(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var XT="focusScope.autoFocusOnMount",JT="focusScope.autoFocusOnUnmount",aB={bubbles:!1,cancelable:!0},a_e="FocusScope",$1=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=t,[o,l]=k.useState(null),c=xl(i),u=xl(a),f=k.useRef(null),d=dn(e,m=>l(m)),h=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let m=function(w){if(h.paused||!o)return;const _=w.target;o.contains(_)?f.current=_:Of(f.current,{select:!0})},y=function(w){if(h.paused||!o)return;const _=w.relatedTarget;_!==null&&(o.contains(_)||Of(f.current,{select:!0}))},g=function(w){if(document.activeElement===document.body)for(const x of w)x.removedNodes.length>0&&Of(o)};document.addEventListener("focusin",m),document.addEventListener("focusout",y);const v=new MutationObserver(g);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",y),v.disconnect()}}},[r,o,h.paused]),k.useEffect(()=>{if(o){oB.add(h);const m=document.activeElement;if(!o.contains(m)){const g=new CustomEvent(XT,aB);o.addEventListener(XT,c),o.dispatchEvent(g),g.defaultPrevented||(s_e(f_e(bX(o)),{select:!0}),document.activeElement===m&&Of(o))}return()=>{o.removeEventListener(XT,c),setTimeout(()=>{const g=new CustomEvent(JT,aB);o.addEventListener(JT,u),o.dispatchEvent(g),g.defaultPrevented||Of(m??document.body,{select:!0}),o.removeEventListener(JT,u),oB.remove(h)},0)}}},[o,c,u,h]);const p=k.useCallback(m=>{if(!n&&!r||h.paused)return;const y=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,g=document.activeElement;if(y&&g){const v=m.currentTarget,[w,_]=o_e(v);w&&_?!m.shiftKey&&g===_?(m.preventDefault(),n&&Of(w,{select:!0})):m.shiftKey&&g===w&&(m.preventDefault(),n&&Of(_,{select:!0})):g===v&&m.preventDefault()}},[n,r,h.paused]);return S.jsx(Bt.div,{tabIndex:-1,...s,ref:d,onKeyDown:p})});$1.displayName=a_e;function s_e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Of(r,{select:e}),document.activeElement!==n)return}function o_e(t){const e=bX(t),n=sB(e,t),r=sB(e.reverse(),t);return[n,r]}function bX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sB(t,e){for(const n of t)if(!l_e(n,{upTo:e}))return n}function l_e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function c_e(t){return t instanceof HTMLInputElement&&"select"in t}function Of(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&c_e(t)&&e&&t.select()}}var oB=u_e();function u_e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=lB(t,e),t.unshift(e)},remove(e){var n;t=lB(t,e),(n=t[0])==null||n.resume()}}}function lB(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function f_e(t){return t.filter(e=>e.tagName!=="A")}var d_e=g3[" useId ".trim().toString()]||(()=>{}),h_e=0;function yl(t){const[e,n]=k.useState(d_e());return Si(()=>{n(r=>r??String(h_e++))},[t]),e?`radix-${e}`:""}const p_e=["top","right","bottom","left"],bd=Math.min,Es=Math.max,cE=Math.round,Cx=Math.floor,dc=t=>({x:t,y:t}),m_e={left:"right",right:"left",bottom:"top",top:"bottom"},g_e={start:"end",end:"start"};function DI(t,e,n){return Es(t,bd(e,n))}function Cu(t,e){return typeof t=="function"?t(e):t}function Pu(t){return t.split("-")[0]}function iv(t){return t.split("-")[1]}function S$(t){return t==="x"?"y":"x"}function E$(t){return t==="y"?"height":"width"}const y_e=new Set(["top","bottom"]);function ic(t){return y_e.has(Pu(t))?"y":"x"}function A$(t){return S$(ic(t))}function v_e(t,e,n){n===void 0&&(n=!1);const r=iv(t),i=A$(t),a=E$(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=uE(s)),[s,uE(s)]}function w_e(t){const e=uE(t);return[FI(t),e,FI(e)]}function FI(t){return t.replace(/start|end/g,e=>g_e[e])}const cB=["left","right"],uB=["right","left"],b_e=["top","bottom"],__e=["bottom","top"];function x_e(t,e,n){switch(t){case"top":case"bottom":return n?e?uB:cB:e?cB:uB;case"left":case"right":return e?b_e:__e;default:return[]}}function S_e(t,e,n,r){const i=iv(t);let a=x_e(Pu(t),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(FI)))),a}function uE(t){return t.replace(/left|right|bottom|top/g,e=>m_e[e])}function E_e(t){return{top:0,right:0,bottom:0,left:0,...t}}function _X(t){return typeof t!="number"?E_e(t):{top:t,right:t,bottom:t,left:t}}function fE(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function fB(t,e,n){let{reference:r,floating:i}=t;const a=ic(e),s=A$(e),o=E$(s),l=Pu(e),c=a==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[o]/2-i[o]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(iv(e)){case"start":h[s]-=d*(n&&c?-1:1);break;case"end":h[s]+=d*(n&&c?-1:1);break}return h}async function A_e(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Cu(e,t),p=_X(h),y=o[d?f==="floating"?"reference":"floating":f],g=fE(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),v=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),_=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},x=fE(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:w,strategy:l}):v);return{top:(g.top-x.top+p.top)/_.y,bottom:(x.bottom-g.bottom+p.bottom)/_.y,left:(g.left-x.left+p.left)/_.x,right:(x.right-g.right+p.right)/_.x}}const k_e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=fB(c,r,l),d=r,h={},p=0;for(let y=0;y<o.length;y++){var m;const{name:g,fn:v}=o[y],{x:w,y:_,data:x,reset:E}=await v({x:u,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:c,platform:{...s,detectOverflow:(m=s.detectOverflow)!=null?m:A_e},elements:{reference:t,floating:e}});u=w??u,f=_??f,h={...h,[g]:{...h[g],...x}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(c=E.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:f}=fB(c,d,l)),y=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}},O_e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=Cu(t,e)||{};if(c==null)return{};const f=_X(u),d={x:n,y:r},h=A$(i),p=E$(h),m=await s.getDimensions(c),y=h==="y",g=y?"top":"left",v=y?"bottom":"right",w=y?"clientHeight":"clientWidth",_=a.reference[p]+a.reference[h]-d[h]-a.floating[p],x=d[h]-a.reference[h],E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let T=E?E[w]:0;(!T||!await(s.isElement==null?void 0:s.isElement(E)))&&(T=o.floating[w]||a.floating[p]);const O=_/2-x/2,R=T/2-m[p]/2-1,M=bd(f[g],R),N=bd(f[v],R),j=M,U=T-m[p]-N,B=T/2-m[p]/2+O,V=DI(j,B,U),Y=!l.arrow&&iv(i)!=null&&B!==V&&a.reference[p]/2-(B<j?M:N)-m[p]/2<0,X=Y?B<j?B-j:B-U:0;return{[h]:d[h]+X,data:{[h]:V,centerOffset:B-V-X,...Y&&{alignmentOffset:X}},reset:Y}}}),T_e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=Cu(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const g=Pu(i),v=ic(o),w=Pu(o)===o,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=d||(w||!m?[uE(o)]:w_e(o)),E=p!=="none";!d&&E&&x.push(...S_e(o,m,p,_));const T=[o,...x],O=await l.detectOverflow(e,y),R=[];let M=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&R.push(O[g]),f){const B=v_e(i,s,_);R.push(O[B[0]],O[B[1]])}if(M=[...M,{placement:i,overflows:R}],!R.every(B=>B<=0)){var N,j;const B=(((N=a.flip)==null?void 0:N.index)||0)+1,V=T[B];if(V&&(!(f==="alignment"?v!==ic(V):!1)||M.every(z=>ic(z.placement)===v?z.overflows[0]>0:!0)))return{data:{index:B,overflows:M},reset:{placement:V}};let Y=(j=M.filter(X=>X.overflows[0]<=0).sort((X,z)=>X.overflows[1]-z.overflows[1])[0])==null?void 0:j.placement;if(!Y)switch(h){case"bestFit":{var U;const X=(U=M.filter(z=>{if(E){const G=ic(z.placement);return G===v||G==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,ae)=>G+ae,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:U[0];X&&(Y=X);break}case"initialPlacement":Y=o;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};function dB(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function hB(t){return p_e.some(e=>t[e]>=0)}const C_e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:i="referenceHidden",...a}=Cu(t,e);switch(i){case"referenceHidden":{const s=await r.detectOverflow(e,{...a,elementContext:"reference"}),o=dB(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:hB(o)}}}case"escaped":{const s=await r.detectOverflow(e,{...a,altBoundary:!0}),o=dB(s,n.floating);return{data:{escapedOffsets:o,escaped:hB(o)}}}default:return{}}}}},xX=new Set(["left","top"]);async function P_e(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Pu(n),o=iv(n),l=ic(n)==="y",c=xX.has(s)?-1:1,u=a&&l?-1:1,f=Cu(e,t);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof p=="number"&&(h=o==="end"?p*-1:p),l?{x:h*u,y:d*c}:{x:d*c,y:h*u}}const N_e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:s,middlewareData:o}=e,l=await P_e(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},I_e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i,platform:a}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:v,y:w}=g;return{x:v,y:w}}},...c}=Cu(t,e),u={x:n,y:r},f=await a.detectOverflow(e,c),d=ic(Pu(i)),h=S$(d);let p=u[h],m=u[d];if(s){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",w=p+f[g],_=p-f[v];p=DI(w,p,_)}if(o){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=m+f[g],_=m-f[v];m=DI(w,m,_)}const y=l.fn({...e,[h]:p,[d]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:s,[d]:o}}}}}},R_e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Cu(t,e),u={x:n,y:r},f=ic(i),d=S$(f);let h=u[d],p=u[f];const m=Cu(o,e),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=d==="y"?"height":"width",_=a.reference[d]-a.floating[w]+y.mainAxis,x=a.reference[d]+a.reference[w]-y.mainAxis;h<_?h=_:h>x&&(h=x)}if(c){var g,v;const w=d==="y"?"width":"height",_=xX.has(Pu(i)),x=a.reference[f]-a.floating[w]+(_&&((g=s.offset)==null?void 0:g[f])||0)+(_?0:y.crossAxis),E=a.reference[f]+a.reference[w]+(_?0:((v=s.offset)==null?void 0:v[f])||0)-(_?y.crossAxis:0);p<x?p=x:p>E&&(p=E)}return{[d]:h,[f]:p}}}},j_e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...c}=Cu(t,e),u=await s.detectOverflow(e,c),f=Pu(i),d=iv(i),h=ic(i)==="y",{width:p,height:m}=a.floating;let y,g;f==="top"||f==="bottom"?(y=f,g=d===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(g=f,y=d==="end"?"top":"bottom");const v=m-u.top-u.bottom,w=p-u.left-u.right,_=bd(m-u[y],v),x=bd(p-u[g],w),E=!e.middlewareData.shift;let T=_,O=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(O=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=v),E&&!d){const M=Es(u.left,0),N=Es(u.right,0),j=Es(u.top,0),U=Es(u.bottom,0);h?O=p-2*(M!==0||N!==0?M+N:Es(u.left,u.right)):T=m-2*(j!==0||U!==0?j+U:Es(u.top,u.bottom))}await l({...e,availableWidth:O,availableHeight:T});const R=await s.getDimensions(o.floating);return p!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function L5(){return typeof window<"u"}function av(t){return SX(t)?(t.nodeName||"").toLowerCase():"#document"}function js(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Oc(t){var e;return(e=(SX(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function SX(t){return L5()?t instanceof Node||t instanceof js(t).Node:!1}function Sl(t){return L5()?t instanceof Element||t instanceof js(t).Element:!1}function bc(t){return L5()?t instanceof HTMLElement||t instanceof js(t).HTMLElement:!1}function pB(t){return!L5()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof js(t).ShadowRoot}const $_e=new Set(["inline","contents"]);function M1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=El(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!$_e.has(i)}const M_e=new Set(["table","td","th"]);function L_e(t){return M_e.has(av(t))}const D_e=[":popover-open",":modal"];function D5(t){return D_e.some(e=>{try{return t.matches(e)}catch{return!1}})}const F_e=["transform","translate","scale","rotate","perspective"],B_e=["transform","translate","scale","rotate","perspective","filter"],U_e=["paint","layout","strict","content"];function k$(t){const e=O$(),n=Sl(t)?El(t):t;return F_e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||B_e.some(r=>(n.willChange||"").includes(r))||U_e.some(r=>(n.contain||"").includes(r))}function z_e(t){let e=_d(t);for(;bc(e)&&!iy(e);){if(k$(e))return e;if(D5(e))return null;e=_d(e)}return null}function O$(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const V_e=new Set(["html","body","#document"]);function iy(t){return V_e.has(av(t))}function El(t){return js(t).getComputedStyle(t)}function F5(t){return Sl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _d(t){if(av(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pB(t)&&t.host||Oc(t);return pB(e)?e.host:e}function EX(t){const e=_d(t);return iy(e)?t.ownerDocument?t.ownerDocument.body:t.body:bc(e)&&M1(e)?e:EX(e)}function sb(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=EX(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),s=js(i);if(a){const o=BI(s);return e.concat(s,s.visualViewport||[],M1(i)?i:[],o&&n?sb(o):[])}return e.concat(i,sb(i,[],n))}function BI(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AX(t){const e=El(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=bc(t),a=i?t.offsetWidth:n,s=i?t.offsetHeight:r,o=cE(n)!==a||cE(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function T$(t){return Sl(t)?t:t.contextElement}function jg(t){const e=T$(t);if(!bc(e))return dc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=AX(e);let s=(a?cE(n.width):n.width)/r,o=(a?cE(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const W_e=dc(0);function kX(t){const e=js(t);return!O$()||!e.visualViewport?W_e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function H_e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==js(t)?!1:e}function gp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=T$(t);let s=dc(1);e&&(r?Sl(r)&&(s=jg(r)):s=jg(t));const o=H_e(a,n,r)?kX(a):dc(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,u=i.width/s.x,f=i.height/s.y;if(a){const d=js(a),h=r&&Sl(r)?js(r):r;let p=d,m=BI(p);for(;m&&r&&h!==p;){const y=jg(m),g=m.getBoundingClientRect(),v=El(m),w=g.left+(m.clientLeft+parseFloat(v.paddingLeft))*y.x,_=g.top+(m.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,f*=y.y,l+=w,c+=_,p=js(m),m=BI(p)}}return fE({width:u,height:f,x:l,y:c})}function B5(t,e){const n=F5(t).scrollLeft;return e?e.left+n:gp(Oc(t)).left+n}function OX(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-B5(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function q_e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",s=Oc(r),o=e?D5(e.floating):!1;if(r===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=dc(1);const u=dc(0),f=bc(r);if((f||!f&&!a)&&((av(r)!=="body"||M1(s))&&(l=F5(r)),bc(r))){const h=gp(r);c=jg(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const d=s&&!f&&!a?OX(s,l):dc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:n.y*c.y-l.scrollTop*c.y+u.y+d.y}}function G_e(t){return Array.from(t.getClientRects())}function K_e(t){const e=Oc(t),n=F5(t),r=t.ownerDocument.body,i=Es(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Es(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+B5(t);const o=-n.scrollTop;return El(r).direction==="rtl"&&(s+=Es(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}const mB=25;function Y_e(t,e){const n=js(t),r=Oc(t),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const u=O$();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=B5(r);if(c<=0){const u=r.ownerDocument,f=u.body,d=getComputedStyle(f),h=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,p=Math.abs(r.clientWidth-f.clientWidth-h);p<=mB&&(a-=p)}else c<=mB&&(a+=c);return{width:a,height:s,x:o,y:l}}const Z_e=new Set(["absolute","fixed"]);function X_e(t,e){const n=gp(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=bc(t)?jg(t):dc(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,l=i*a.x,c=r*a.y;return{width:s,height:o,x:l,y:c}}function gB(t,e,n){let r;if(e==="viewport")r=Y_e(t,n);else if(e==="document")r=K_e(Oc(t));else if(Sl(e))r=X_e(e,n);else{const i=kX(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return fE(r)}function TX(t,e){const n=_d(t);return n===e||!Sl(n)||iy(n)?!1:El(n).position==="fixed"||TX(n,e)}function J_e(t,e){const n=e.get(t);if(n)return n;let r=sb(t,[],!1).filter(o=>Sl(o)&&av(o)!=="body"),i=null;const a=El(t).position==="fixed";let s=a?_d(t):t;for(;Sl(s)&&!iy(s);){const o=El(s),l=k$(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&Z_e.has(i.position)||M1(s)&&!l&&TX(t,s))?r=r.filter(u=>u!==s):i=o,s=_d(s)}return e.set(t,r),r}function Q_e(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?D5(e)?[]:J_e(e,this._c):[].concat(n),r],o=s[0],l=s.reduce((c,u)=>{const f=gB(e,u,i);return c.top=Es(f.top,c.top),c.right=bd(f.right,c.right),c.bottom=bd(f.bottom,c.bottom),c.left=Es(f.left,c.left),c},gB(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function exe(t){const{width:e,height:n}=AX(t);return{width:e,height:n}}function txe(t,e,n){const r=bc(e),i=Oc(e),a=n==="fixed",s=gp(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=dc(0);function c(){l.x=B5(i)}if(r||!r&&!a)if((av(e)!=="body"||M1(i))&&(o=F5(e)),r){const h=gp(e,!0,a,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&c();a&&!r&&i&&c();const u=i&&!r&&!a?OX(i,o):dc(0),f=s.left+o.scrollLeft-l.x-u.x,d=s.top+o.scrollTop-l.y-u.y;return{x:f,y:d,width:s.width,height:s.height}}function QT(t){return El(t).position==="static"}function yB(t,e){if(!bc(t)||El(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Oc(t)===n&&(n=n.ownerDocument.body),n}function CX(t,e){const n=js(t);if(D5(t))return n;if(!bc(t)){let i=_d(t);for(;i&&!iy(i);){if(Sl(i)&&!QT(i))return i;i=_d(i)}return n}let r=yB(t,e);for(;r&&L_e(r)&&QT(r);)r=yB(r,e);return r&&iy(r)&&QT(r)&&!k$(r)?n:r||z_e(t)||n}const nxe=async function(t){const e=this.getOffsetParent||CX,n=this.getDimensions,r=await n(t.floating);return{reference:txe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rxe(t){return El(t).direction==="rtl"}const ixe={convertOffsetParentRelativeRectToViewportRelativeRect:q_e,getDocumentElement:Oc,getClippingRect:Q_e,getOffsetParent:CX,getElementRects:nxe,getClientRects:G_e,getDimensions:exe,getScale:jg,isElement:Sl,isRTL:rxe};function PX(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function axe(t,e){let n=null,r;const i=Oc(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=t.getBoundingClientRect(),{left:u,top:f,width:d,height:h}=c;if(o||e(),!d||!h)return;const p=Cx(f),m=Cx(i.clientWidth-(u+d)),y=Cx(i.clientHeight-(f+h)),g=Cx(u),w={rootMargin:-p+"px "+-m+"px "+-y+"px "+-g+"px",threshold:Es(0,bd(1,l))||1};let _=!0;function x(E){const T=E[0].intersectionRatio;if(T!==l){if(!_)return s();T?s(!1,T):r=setTimeout(()=>{s(!1,1e-7)},1e3)}T===1&&!PX(c,t.getBoundingClientRect())&&s(),_=!1}try{n=new IntersectionObserver(x,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,w)}n.observe(t)}return s(!0),a}function sxe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=T$(t),u=i||a?[...c?sb(c):[],...sb(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),a&&g.addEventListener("resize",n)});const f=c&&o?axe(c,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(g=>{let[v]=g;v&&v.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?gp(t):null;l&&y();function y(){const g=gp(t);m&&!PX(m,g)&&n(),m=g,p=requestAnimationFrame(y)}return n(),()=>{var g;u.forEach(v=>{i&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),f==null||f(),(g=h)==null||g.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const oxe=N_e,lxe=I_e,cxe=T_e,uxe=j_e,fxe=C_e,vB=O_e,dxe=R_e,hxe=(t,e,n)=>{const r=new Map,i={platform:ixe,...n},a={...i.platform,_c:r};return k_e(t,e,{...i,platform:a})};var pxe=typeof document<"u",mxe=function(){},H2=pxe?k.useLayoutEffect:mxe;function dE(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!dE(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!dE(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function NX(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function wB(t,e){const n=NX(t);return Math.round(e*n)/n}function eC(t){const e=k.useRef(t);return H2(()=>{e.current=t}),e}function gxe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,f]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=k.useState(r);dE(d,r)||h(r);const[p,m]=k.useState(null),[y,g]=k.useState(null),v=k.useCallback(z=>{z!==E.current&&(E.current=z,m(z))},[]),w=k.useCallback(z=>{z!==T.current&&(T.current=z,g(z))},[]),_=a||p,x=s||y,E=k.useRef(null),T=k.useRef(null),O=k.useRef(u),R=l!=null,M=eC(l),N=eC(i),j=eC(c),U=k.useCallback(()=>{if(!E.current||!T.current)return;const z={placement:e,strategy:n,middleware:d};N.current&&(z.platform=N.current),hxe(E.current,T.current,z).then(G=>{const ae={...G,isPositioned:j.current!==!1};B.current&&!dE(O.current,ae)&&(O.current=ae,Xy.flushSync(()=>{f(ae)}))})},[d,e,n,N,j]);H2(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,f(z=>({...z,isPositioned:!1})))},[c]);const B=k.useRef(!1);H2(()=>(B.current=!0,()=>{B.current=!1}),[]),H2(()=>{if(_&&(E.current=_),x&&(T.current=x),_&&x){if(M.current)return M.current(_,x,U);U()}},[_,x,U,M,R]);const V=k.useMemo(()=>({reference:E,floating:T,setReference:v,setFloating:w}),[v,w]),Y=k.useMemo(()=>({reference:_,floating:x}),[_,x]),X=k.useMemo(()=>{const z={position:n,left:0,top:0};if(!Y.floating)return z;const G=wB(Y.floating,u.x),ae=wB(Y.floating,u.y);return o?{...z,transform:"translate("+G+"px, "+ae+"px)",...NX(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:ae}},[n,o,Y.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:U,refs:V,elements:Y,floatingStyles:X}),[u,U,V,Y,X])}const yxe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?vB({element:r.current,padding:i}).fn(n):{}:r?vB({element:r,padding:i}).fn(n):{}}}},vxe=(t,e)=>({...oxe(t),options:[t,e]}),wxe=(t,e)=>({...lxe(t),options:[t,e]}),bxe=(t,e)=>({...dxe(t),options:[t,e]}),_xe=(t,e)=>({...cxe(t),options:[t,e]}),xxe=(t,e)=>({...uxe(t),options:[t,e]}),Sxe=(t,e)=>({...fxe(t),options:[t,e]}),Exe=(t,e)=>({...yxe(t),options:[t,e]});var Axe="Arrow",IX=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return S.jsx(Bt.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});IX.displayName=Axe;var kxe=IX;function RX(t){const[e,n]=k.useState(void 0);return Si(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,o=c.blockSize}else s=t.offsetWidth,o=t.offsetHeight;n({width:s,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var C$="Popper",[jX,sv]=kc(C$),[Oxe,$X]=jX(C$),MX=t=>{const{__scopePopper:e,children:n}=t,[r,i]=k.useState(null);return S.jsx(Oxe,{scope:e,anchor:r,onAnchorChange:i,children:n})};MX.displayName=C$;var LX="PopperAnchor",DX=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=$X(LX,n),s=k.useRef(null),o=dn(e,s),l=k.useRef(null);return k.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||s.current,c!==l.current&&a.onAnchorChange(l.current)}),r?null:S.jsx(Bt.div,{...i,ref:o})});DX.displayName=LX;var P$="PopperContent",[Txe,Cxe]=jX(P$),FX=k.forwardRef((t,e)=>{var $,ie,q,fe,me,de;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=t,y=$X(P$,n),[g,v]=k.useState(null),w=dn(e,_e=>v(_e)),[_,x]=k.useState(null),E=RX(_),T=(E==null?void 0:E.width)??0,O=(E==null?void 0:E.height)??0,R=r+(a!=="center"?"-"+a:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(c)?c:[c],j=N.length>0,U={padding:M,boundary:N.filter(Nxe),altBoundary:j},{refs:B,floatingStyles:V,placement:Y,isPositioned:X,middlewareData:z}=gxe({strategy:"fixed",placement:R,whileElementsMounted:(..._e)=>sxe(..._e,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[vxe({mainAxis:i+O,alignmentAxis:s}),l&&wxe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?bxe():void 0,...U}),l&&_xe({...U}),xxe({...U,apply:({elements:_e,rects:Oe,availableWidth:ee,availableHeight:Ee})=>{const{width:Qe,height:tt}=Oe.reference,Pe=_e.floating.style;Pe.setProperty("--radix-popper-available-width",`${ee}px`),Pe.setProperty("--radix-popper-available-height",`${Ee}px`),Pe.setProperty("--radix-popper-anchor-width",`${Qe}px`),Pe.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),_&&Exe({element:_,padding:o}),Ixe({arrowWidth:T,arrowHeight:O}),d&&Sxe({strategy:"referenceHidden",...U})]}),[G,ae]=zX(Y),ue=xl(p);Si(()=>{X&&(ue==null||ue())},[X,ue]);const L=($=z.arrow)==null?void 0:$.x,K=(ie=z.arrow)==null?void 0:ie.y,Q=((q=z.arrow)==null?void 0:q.centerOffset)!==0,[re,F]=k.useState();return Si(()=>{g&&F(window.getComputedStyle(g).zIndex)},[g]),S.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:X?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(fe=z.transformOrigin)==null?void 0:fe.x,(me=z.transformOrigin)==null?void 0:me.y].join(" "),...((de=z.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:S.jsx(Txe,{scope:n,placedSide:G,onArrowChange:x,arrowX:L,arrowY:K,shouldHideArrow:Q,children:S.jsx(Bt.div,{"data-side":G,"data-align":ae,...m,ref:w,style:{...m.style,animation:X?void 0:"none"}})})})});FX.displayName=P$;var BX="PopperArrow",Pxe={top:"bottom",right:"left",bottom:"top",left:"right"},UX=k.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=Cxe(BX,r),s=Pxe[a.placedSide];return S.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:S.jsx(kxe,{...i,ref:n,style:{...i.style,display:"block"}})})});UX.displayName=BX;function Nxe(t){return t!==null}var Ixe=t=>({name:"transformOrigin",options:t,fn(e){var y,g,v;const{placement:n,rects:r,middlewareData:i}=e,s=((y=i.arrow)==null?void 0:y.centerOffset)!==0,o=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=zX(n),f={start:"0%",center:"50%",end:"100%"}[u],d=(((g=i.arrow)==null?void 0:g.x)??0)+o/2,h=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let p="",m="";return c==="bottom"?(p=s?f:`${d}px`,m=`${-l}px`):c==="top"?(p=s?f:`${d}px`,m=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=s?f:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,m=s?f:`${h}px`),{data:{x:p,y:m}}}});function zX(t){const[e,n="center"]=t.split("-");return[e,n]}var N$=MX,U5=DX,I$=FX,R$=UX,Rxe="Portal",L1=k.forwardRef((t,e)=>{var o;const{container:n,...r}=t,[i,a]=k.useState(!1);Si(()=>a(!0),[]);const s=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?tye.createPortal(S.jsx(Bt.div,{...r,ref:e}),s):null});L1.displayName=Rxe;function jxe(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var Cl=t=>{const{present:e,children:n}=t,r=$xe(e),i=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),a=dn(r.ref,Mxe(i));return typeof n=="function"||r.isPresent?k.cloneElement(i,{ref:a}):null};Cl.displayName="Presence";function $xe(t){const[e,n]=k.useState(),r=k.useRef(null),i=k.useRef(t),a=k.useRef("none"),s=t?"mounted":"unmounted",[o,l]=jxe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=Px(r.current);a.current=o==="mounted"?c:"none"},[o]),Si(()=>{const c=r.current,u=i.current;if(u!==t){const d=a.current,h=Px(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Si(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=h=>{const m=Px(r.current).includes(CSS.escape(h.animationName));if(h.target===e&&m&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},d=h=>{h.target===e&&(a.current=Px(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:k.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Px(t){return(t==null?void 0:t.animationName)||"none"}function Mxe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tC="rovingFocusGroup.onEntryFocus",Lxe={bubbles:!1,cancelable:!0},D1="RovingFocusGroup",[UI,VX,Dxe]=$5(D1),[Fxe,z5]=kc(D1,[Dxe]),[Bxe,Uxe]=Fxe(D1),WX=k.forwardRef((t,e)=>S.jsx(UI.Provider,{scope:t.__scopeRovingFocusGroup,children:S.jsx(UI.Slot,{scope:t.__scopeRovingFocusGroup,children:S.jsx(zxe,{...t,ref:e})})}));WX.displayName=D1;var zxe=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,d=k.useRef(null),h=dn(e,d),p=R1(a),[m,y]=wd({prop:s,defaultProp:o??null,onChange:l,caller:D1}),[g,v]=k.useState(!1),w=xl(c),_=VX(n),x=k.useRef(!1),[E,T]=k.useState(0);return k.useEffect(()=>{const O=d.current;if(O)return O.addEventListener(tC,w),()=>O.removeEventListener(tC,w)},[w]),S.jsx(Bxe,{scope:n,orientation:r,dir:p,loop:i,currentTabStopId:m,onItemFocus:k.useCallback(O=>y(O),[y]),onItemShiftTab:k.useCallback(()=>v(!0),[]),onFocusableItemAdd:k.useCallback(()=>T(O=>O+1),[]),onFocusableItemRemove:k.useCallback(()=>T(O=>O-1),[]),children:S.jsx(Bt.div,{tabIndex:g||E===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...t.style},onMouseDown:rt(t.onMouseDown,()=>{x.current=!0}),onFocus:rt(t.onFocus,O=>{const R=!x.current;if(O.target===O.currentTarget&&R&&!g){const M=new CustomEvent(tC,Lxe);if(O.currentTarget.dispatchEvent(M),!M.defaultPrevented){const N=_().filter(Y=>Y.focusable),j=N.find(Y=>Y.active),U=N.find(Y=>Y.id===m),V=[j,U,...N].filter(Boolean).map(Y=>Y.ref.current);GX(V,u)}}x.current=!1}),onBlur:rt(t.onBlur,()=>v(!1))})})}),HX="RovingFocusGroupItem",qX=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:s,...o}=t,l=yl(),c=a||l,u=Uxe(HX,n),f=u.currentTabStopId===c,d=VX(n),{onFocusableItemAdd:h,onFocusableItemRemove:p,currentTabStopId:m}=u;return k.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),S.jsx(UI.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:S.jsx(Bt.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:rt(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:rt(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:rt(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=Hxe(y,u.orientation,u.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=d().filter(_=>_.focusable).map(_=>_.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const _=w.indexOf(y.currentTarget);w=u.loop?qxe(w,_+1):w.slice(_+1)}setTimeout(()=>GX(w))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:m!=null}):s})})});qX.displayName=HX;var Vxe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Wxe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Hxe(t,e,n){const r=Wxe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Vxe[r]}function GX(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function qxe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var KX=WX,YX=qX;function Gxe(t){const e=Kxe(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(Zxe);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function Kxe(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=Jxe(i),o=Xxe(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Yxe=Symbol("radix.slottable");function Zxe(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Yxe}function Xxe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function Jxe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Qxe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},vm=new WeakMap,Nx=new WeakMap,Ix={},nC=0,ZX=function(t){return t&&(t.host||ZX(t.parentNode))},e2e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ZX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},t2e=function(t,e,n,r){var i=e2e(e,Array.isArray(t)?t:[t]);Ix[n]||(Ix[n]=new WeakMap);var a=Ix[n],s=[],o=new Set,l=new Set(i),c=function(f){!f||o.has(f)||(o.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(o.has(d))u(d);else try{var h=d.getAttribute(r),p=h!==null&&h!=="false",m=(vm.get(d)||0)+1,y=(a.get(d)||0)+1;vm.set(d,m),a.set(d,y),s.push(d),m===1&&p&&Nx.set(d,!0),y===1&&d.setAttribute(n,"true"),p||d.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",d,g)}})};return u(e),o.clear(),nC++,function(){s.forEach(function(f){var d=vm.get(f)-1,h=a.get(f)-1;vm.set(f,d),a.set(f,h),d||(Nx.has(f)||f.removeAttribute(r),Nx.delete(f)),h||f.removeAttribute(n)}),nC--,nC||(vm=new WeakMap,vm=new WeakMap,Nx=new WeakMap,Ix={})}},V5=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Qxe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),t2e(r,i,n,"aria-hidden")):function(){return null}},q2="right-scroll-bar-position",G2="width-before-scroll-bar",n2e="with-scroll-bars-hidden",r2e="--removed-body-scroll-bar-size";function rC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function i2e(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var a2e=typeof window<"u"?k.useLayoutEffect:k.useEffect,bB=new WeakMap;function s2e(t,e){var n=i2e(null,function(r){return t.forEach(function(i){return rC(i,r)})});return a2e(function(){var r=bB.get(n);if(r){var i=new Set(r),a=new Set(t),s=n.current;i.forEach(function(o){a.has(o)||rC(o,null)}),a.forEach(function(o){i.has(o)||rC(o,s)})}bB.set(n,t)},[t]),n}function o2e(t){return t}function l2e(t,e){e===void 0&&(e=o2e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var s=e(a,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(r=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(a),s=n}var l=function(){var u=s;s=[],u.forEach(a)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function c2e(t){t===void 0&&(t={});var e=l2e(null);return e.options=tc({async:!0,ssr:!1},t),e}var XX=function(t){var e=t.sideCar,n=tv(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,tc({},n))};XX.isSideCarExport=!0;function u2e(t,e){return t.useMedium(e),XX}var JX=c2e(),iC=function(){},W5=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:iC,onWheelCapture:iC,onTouchMoveCapture:iC}),i=r[0],a=r[1],s=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,d=t.sideCar,h=t.noRelative,p=t.noIsolation,m=t.inert,y=t.allowPinchZoom,g=t.as,v=g===void 0?"div":g,w=t.gapMode,_=tv(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=d,E=s2e([n,e]),T=tc(tc({},_),i);return k.createElement(k.Fragment,null,u&&k.createElement(x,{sideCar:JX,removeScrollBar:c,shards:f,noRelative:h,noIsolation:p,inert:m,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:w}),s?k.cloneElement(k.Children.only(o),tc(tc({},T),{ref:E})):k.createElement(v,tc({},T,{className:l,ref:E}),o))});W5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};W5.classNames={fullWidth:G2,zeroRight:q2};var f2e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function d2e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=f2e();return e&&t.setAttribute("nonce",e),t}function h2e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function p2e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var m2e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=d2e())&&(h2e(e,n),p2e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},g2e=function(){var t=m2e();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},QX=function(){var t=g2e(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},y2e={left:0,top:0,right:0,gap:0},aC=function(t){return parseInt(t||"",10)||0},v2e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[aC(n),aC(r),aC(i)]},w2e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return y2e;var e=v2e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},b2e=QX(),$g="data-scroll-locked",_2e=function(t,e,n,r){var i=t.left,a=t.top,s=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(n2e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat($g,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(q2,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(G2,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(q2," .").concat(q2,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(G2," .").concat(G2,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($g,`] {
    `).concat(r2e,": ").concat(o,`px;
  }
`)},_B=function(){var t=parseInt(document.body.getAttribute($g)||"0",10);return isFinite(t)?t:0},x2e=function(){k.useEffect(function(){return document.body.setAttribute($g,(_B()+1).toString()),function(){var t=_B()-1;t<=0?document.body.removeAttribute($g):document.body.setAttribute($g,t.toString())}},[])},S2e=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;x2e();var a=k.useMemo(function(){return w2e(i)},[i]);return k.createElement(b2e,{styles:_2e(a,!e,i,n?"":"!important")})},zI=!1;if(typeof window<"u")try{var Rx=Object.defineProperty({},"passive",{get:function(){return zI=!0,!0}});window.addEventListener("test",Rx,Rx),window.removeEventListener("test",Rx,Rx)}catch{zI=!1}var wm=zI?{passive:!1}:!1,E2e=function(t){return t.tagName==="TEXTAREA"},eJ=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!E2e(t)&&n[e]==="visible")},A2e=function(t){return eJ(t,"overflowY")},k2e=function(t){return eJ(t,"overflowX")},xB=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=tJ(t,r);if(i){var a=nJ(t,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},O2e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},T2e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},tJ=function(t,e){return t==="v"?A2e(e):k2e(e)},nJ=function(t,e){return t==="v"?O2e(e):T2e(e)},C2e=function(t,e){return t==="h"&&e==="rtl"?-1:1},P2e=function(t,e,n,r,i){var a=C2e(t,window.getComputedStyle(e).direction),s=a*r,o=n.target,l=e.contains(o),c=!1,u=s>0,f=0,d=0;do{if(!o)break;var h=nJ(t,o),p=h[0],m=h[1],y=h[2],g=m-y-a*p;(p||g)&&tJ(t,o)&&(f+=g,d+=p);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(f)<1||!u&&Math.abs(d)<1)&&(c=!0),c},jx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},SB=function(t){return[t.deltaX,t.deltaY]},EB=function(t){return t&&"current"in t?t.current:t},N2e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},I2e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},R2e=0,bm=[];function j2e(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(R2e++)[0],a=k.useState(QX)[0],s=k.useRef(t);k.useEffect(function(){s.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=jve([t.lockRef.current],(t.shards||[]).map(EB),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=k.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!s.current.allowPinchZoom;var g=jx(m),v=n.current,w="deltaX"in m?m.deltaX:v[0]-g[0],_="deltaY"in m?m.deltaY:v[1]-g[1],x,E=m.target,T=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in m&&T==="h"&&E.type==="range")return!1;var O=window.getSelection(),R=O&&O.anchorNode,M=R?R===E||R.contains(E):!1;if(M)return!1;var N=xB(T,E);if(!N)return!0;if(N?x=T:(x=T==="v"?"h":"v",N=xB(T,E)),!N)return!1;if(!r.current&&"changedTouches"in m&&(w||_)&&(r.current=x),!x)return!0;var j=r.current||x;return P2e(j,y,m,j==="h"?w:_)},[]),l=k.useCallback(function(m){var y=m;if(!(!bm.length||bm[bm.length-1]!==a)){var g="deltaY"in y?SB(y):jx(y),v=e.current.filter(function(x){return x.name===y.type&&(x.target===y.target||y.target===x.shadowParent)&&N2e(x.delta,g)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var w=(s.current.shards||[]).map(EB).filter(Boolean).filter(function(x){return x.contains(y.target)}),_=w.length>0?o(y,w[0]):!s.current.noIsolation;_&&y.cancelable&&y.preventDefault()}}},[]),c=k.useCallback(function(m,y,g,v){var w={name:m,delta:y,target:g,should:v,shadowParent:$2e(g)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(_){return _!==w})},1)},[]),u=k.useCallback(function(m){n.current=jx(m),r.current=void 0},[]),f=k.useCallback(function(m){c(m.type,SB(m),m.target,o(m,t.lockRef.current))},[]),d=k.useCallback(function(m){c(m.type,jx(m),m.target,o(m,t.lockRef.current))},[]);k.useEffect(function(){return bm.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,wm),document.addEventListener("touchmove",l,wm),document.addEventListener("touchstart",u,wm),function(){bm=bm.filter(function(m){return m!==a}),document.removeEventListener("wheel",l,wm),document.removeEventListener("touchmove",l,wm),document.removeEventListener("touchstart",u,wm)}},[]);var h=t.removeScrollBar,p=t.inert;return k.createElement(k.Fragment,null,p?k.createElement(a,{styles:I2e(i)}):null,h?k.createElement(S2e,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function $2e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const M2e=u2e(JX,j2e);var F1=k.forwardRef(function(t,e){return k.createElement(W5,tc({},t,{ref:e,sideCar:M2e}))});F1.classNames=W5.classNames;var VI=["Enter"," "],L2e=["ArrowDown","PageUp","Home"],rJ=["ArrowUp","PageDown","End"],D2e=[...L2e,...rJ],F2e={ltr:[...VI,"ArrowRight"],rtl:[...VI,"ArrowLeft"]},B2e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},B1="Menu",[ob,U2e,z2e]=$5(B1),[Up,iJ]=kc(B1,[z2e,sv,z5]),H5=sv(),aJ=z5(),[V2e,zp]=Up(B1),[W2e,U1]=Up(B1),sJ=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:a,modal:s=!0}=t,o=H5(e),[l,c]=k.useState(null),u=k.useRef(!1),f=xl(a),d=R1(i);return k.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),S.jsx(N$,{...o,children:S.jsx(V2e,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:c,children:S.jsx(W2e,{scope:e,onClose:k.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:d,modal:s,children:r})})})};sJ.displayName=B1;var H2e="MenuAnchor",j$=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=H5(n);return S.jsx(U5,{...i,...r,ref:e})});j$.displayName=H2e;var $$="MenuPortal",[q2e,oJ]=Up($$,{forceMount:void 0}),lJ=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,a=zp($$,e);return S.jsx(q2e,{scope:e,forceMount:n,children:S.jsx(Cl,{present:n||a.open,children:S.jsx(L1,{asChild:!0,container:i,children:r})})})};lJ.displayName=$$;var bo="MenuContent",[G2e,M$]=Up(bo),cJ=k.forwardRef((t,e)=>{const n=oJ(bo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=zp(bo,t.__scopeMenu),s=U1(bo,t.__scopeMenu);return S.jsx(ob.Provider,{scope:t.__scopeMenu,children:S.jsx(Cl,{present:r||a.open,children:S.jsx(ob.Slot,{scope:t.__scopeMenu,children:s.modal?S.jsx(K2e,{...i,ref:e}):S.jsx(Y2e,{...i,ref:e})})})})}),K2e=k.forwardRef((t,e)=>{const n=zp(bo,t.__scopeMenu),r=k.useRef(null),i=dn(e,r);return k.useEffect(()=>{const a=r.current;if(a)return V5(a)},[]),S.jsx(L$,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:rt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Y2e=k.forwardRef((t,e)=>{const n=zp(bo,t.__scopeMenu);return S.jsx(L$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Z2e=Gxe("MenuContent.ScrollLock"),L$=k.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:h,disableOutsideScroll:p,...m}=t,y=zp(bo,n),g=U1(bo,n),v=H5(n),w=aJ(n),_=U2e(n),[x,E]=k.useState(null),T=k.useRef(null),O=dn(e,T,y.onContentChange),R=k.useRef(0),M=k.useRef(""),N=k.useRef(0),j=k.useRef(null),U=k.useRef("right"),B=k.useRef(0),V=p?F1:k.Fragment,Y=p?{as:Z2e,allowPinchZoom:!0}:void 0,X=G=>{var $,ie;const ae=M.current+G,ue=_().filter(q=>!q.disabled),L=document.activeElement,K=($=ue.find(q=>q.ref.current===L))==null?void 0:$.textValue,Q=ue.map(q=>q.textValue),re=lSe(Q,ae,K),F=(ie=ue.find(q=>q.textValue===re))==null?void 0:ie.ref.current;(function q(fe){M.current=fe,window.clearTimeout(R.current),fe!==""&&(R.current=window.setTimeout(()=>q(""),1e3))})(ae),F&&setTimeout(()=>F.focus())};k.useEffect(()=>()=>window.clearTimeout(R.current),[]),M5();const z=k.useCallback(G=>{var ue,L;return U.current===((ue=j.current)==null?void 0:ue.side)&&uSe(G,(L=j.current)==null?void 0:L.area)},[]);return S.jsx(G2e,{scope:n,searchRef:M,onItemEnter:k.useCallback(G=>{z(G)&&G.preventDefault()},[z]),onItemLeave:k.useCallback(G=>{var ae;z(G)||((ae=T.current)==null||ae.focus(),E(null))},[z]),onTriggerLeave:k.useCallback(G=>{z(G)&&G.preventDefault()},[z]),pointerGraceTimerRef:N,onPointerGraceIntentChange:k.useCallback(G=>{j.current=G},[]),children:S.jsx(V,{...Y,children:S.jsx($1,{asChild:!0,trapped:i,onMountAutoFocus:rt(a,G=>{var ae;G.preventDefault(),(ae=T.current)==null||ae.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:S.jsx(j1,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:h,children:S.jsx(KX,{asChild:!0,...w,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:x,onCurrentTabStopIdChange:E,onEntryFocus:rt(l,G=>{g.isUsingKeyboardRef.current||G.preventDefault()}),preventScrollOnEntryFocus:!0,children:S.jsx(I$,{role:"menu","aria-orientation":"vertical","data-state":AJ(y.open),"data-radix-menu-content":"",dir:g.dir,...v,...m,ref:O,style:{outline:"none",...m.style},onKeyDown:rt(m.onKeyDown,G=>{const ue=G.target.closest("[data-radix-menu-content]")===G.currentTarget,L=G.ctrlKey||G.altKey||G.metaKey,K=G.key.length===1;ue&&(G.key==="Tab"&&G.preventDefault(),!L&&K&&X(G.key));const Q=T.current;if(G.target!==Q||!D2e.includes(G.key))return;G.preventDefault();const F=_().filter($=>!$.disabled).map($=>$.ref.current);rJ.includes(G.key)&&F.reverse(),sSe(F)}),onBlur:rt(t.onBlur,G=>{G.currentTarget.contains(G.target)||(window.clearTimeout(R.current),M.current="")}),onPointerMove:rt(t.onPointerMove,lb(G=>{const ae=G.target,ue=B.current!==G.clientX;if(G.currentTarget.contains(ae)&&ue){const L=G.clientX>B.current?"right":"left";U.current=L,B.current=G.clientX}}))})})})})})})});cJ.displayName=bo;var X2e="MenuGroup",D$=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.jsx(Bt.div,{role:"group",...r,ref:e})});D$.displayName=X2e;var J2e="MenuLabel",uJ=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.jsx(Bt.div,{...r,ref:e})});uJ.displayName=J2e;var hE="MenuItem",AB="menu.itemSelect",q5=k.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,a=k.useRef(null),s=U1(hE,t.__scopeMenu),o=M$(hE,t.__scopeMenu),l=dn(e,a),c=k.useRef(!1),u=()=>{const f=a.current;if(!n&&f){const d=new CustomEvent(AB,{bubbles:!0,cancelable:!0});f.addEventListener(AB,h=>r==null?void 0:r(h),{once:!0}),yX(f,d),d.defaultPrevented?c.current=!1:s.onClose()}};return S.jsx(fJ,{...i,ref:l,disabled:n,onClick:rt(t.onClick,u),onPointerDown:f=>{var d;(d=t.onPointerDown)==null||d.call(t,f),c.current=!0},onPointerUp:rt(t.onPointerUp,f=>{var d;c.current||(d=f.currentTarget)==null||d.click()}),onKeyDown:rt(t.onKeyDown,f=>{const d=o.searchRef.current!=="";n||d&&f.key===" "||VI.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});q5.displayName=hE;var fJ=k.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=t,s=M$(hE,n),o=aJ(n),l=k.useRef(null),c=dn(e,l),[u,f]=k.useState(!1),[d,h]=k.useState("");return k.useEffect(()=>{const p=l.current;p&&h((p.textContent??"").trim())},[a.children]),S.jsx(ob.ItemSlot,{scope:n,disabled:r,textValue:i??d,children:S.jsx(YX,{asChild:!0,...o,focusable:!r,children:S.jsx(Bt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:c,onPointerMove:rt(t.onPointerMove,lb(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:rt(t.onPointerLeave,lb(p=>s.onItemLeave(p))),onFocus:rt(t.onFocus,()=>f(!0)),onBlur:rt(t.onBlur,()=>f(!1))})})})}),Q2e="MenuCheckboxItem",dJ=k.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return S.jsx(yJ,{scope:t.__scopeMenu,checked:n,children:S.jsx(q5,{role:"menuitemcheckbox","aria-checked":pE(n)?"mixed":n,...i,ref:e,"data-state":B$(n),onSelect:rt(i.onSelect,()=>r==null?void 0:r(pE(n)?!0:!n),{checkForDefaultPrevented:!1})})})});dJ.displayName=Q2e;var hJ="MenuRadioGroup",[eSe,tSe]=Up(hJ,{value:void 0,onValueChange:()=>{}}),pJ=k.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,a=xl(r);return S.jsx(eSe,{scope:t.__scopeMenu,value:n,onValueChange:a,children:S.jsx(D$,{...i,ref:e})})});pJ.displayName=hJ;var mJ="MenuRadioItem",gJ=k.forwardRef((t,e)=>{const{value:n,...r}=t,i=tSe(mJ,t.__scopeMenu),a=n===i.value;return S.jsx(yJ,{scope:t.__scopeMenu,checked:a,children:S.jsx(q5,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":B$(a),onSelect:rt(r.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,n)},{checkForDefaultPrevented:!1})})})});gJ.displayName=mJ;var F$="MenuItemIndicator",[yJ,nSe]=Up(F$,{checked:!1}),vJ=k.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,a=nSe(F$,n);return S.jsx(Cl,{present:r||pE(a.checked)||a.checked===!0,children:S.jsx(Bt.span,{...i,ref:e,"data-state":B$(a.checked)})})});vJ.displayName=F$;var rSe="MenuSeparator",wJ=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.jsx(Bt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});wJ.displayName=rSe;var iSe="MenuArrow",bJ=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=H5(n);return S.jsx(R$,{...i,...r,ref:e})});bJ.displayName=iSe;var aSe="MenuSub",[Kwt,_J]=Up(aSe),z0="MenuSubTrigger",xJ=k.forwardRef((t,e)=>{const n=zp(z0,t.__scopeMenu),r=U1(z0,t.__scopeMenu),i=_J(z0,t.__scopeMenu),a=M$(z0,t.__scopeMenu),s=k.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,c={__scopeMenu:t.__scopeMenu},u=k.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return k.useEffect(()=>u,[u]),k.useEffect(()=>{const f=o.current;return()=>{window.clearTimeout(f),l(null)}},[o,l]),S.jsx(j$,{asChild:!0,...c,children:S.jsx(fJ,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":AJ(n.open),...t,ref:Ac(e,i.onTriggerChange),onClick:f=>{var d;(d=t.onClick)==null||d.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:rt(t.onPointerMove,lb(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:rt(t.onPointerLeave,lb(f=>{var h,p;u();const d=(h=n.content)==null?void 0:h.getBoundingClientRect();if(d){const m=(p=n.content)==null?void 0:p.dataset.side,y=m==="right",g=y?-5:5,v=d[y?"left":"right"],w=d[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+g,y:f.clientY},{x:v,y:d.top},{x:w,y:d.top},{x:w,y:d.bottom},{x:v,y:d.bottom}],side:m}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:rt(t.onKeyDown,f=>{var h;const d=a.searchRef.current!=="";t.disabled||d&&f.key===" "||F2e[r.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});xJ.displayName=z0;var SJ="MenuSubContent",EJ=k.forwardRef((t,e)=>{const n=oJ(bo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,a=zp(bo,t.__scopeMenu),s=U1(bo,t.__scopeMenu),o=_J(SJ,t.__scopeMenu),l=k.useRef(null),c=dn(e,l);return S.jsx(ob.Provider,{scope:t.__scopeMenu,children:S.jsx(Cl,{present:r||a.open,children:S.jsx(ob.Slot,{scope:t.__scopeMenu,children:S.jsx(L$,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;s.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:rt(t.onFocusOutside,u=>{u.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:rt(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:rt(t.onKeyDown,u=>{var h;const f=u.currentTarget.contains(u.target),d=B2e[s.dir].includes(u.key);f&&d&&(a.onOpenChange(!1),(h=o.trigger)==null||h.focus(),u.preventDefault())})})})})})});EJ.displayName=SJ;function AJ(t){return t?"open":"closed"}function pE(t){return t==="indeterminate"}function B$(t){return pE(t)?"indeterminate":t?"checked":"unchecked"}function sSe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function oSe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function lSe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let s=oSe(t,Math.max(a,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function cSe(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],l=e[s],c=o.x,u=o.y,f=l.x,d=l.y;u>r!=d>r&&n<(f-c)*(r-u)/(d-u)+c&&(i=!i)}return i}function uSe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return cSe(n,e)}function lb(t){return e=>e.pointerType==="mouse"?t(e):void 0}var fSe=sJ,dSe=j$,hSe=lJ,pSe=cJ,mSe=D$,gSe=uJ,ySe=q5,vSe=dJ,wSe=pJ,bSe=gJ,_Se=vJ,xSe=wJ,SSe=bJ,ESe=xJ,ASe=EJ,G5="DropdownMenu",[kSe]=kc(G5,[iJ]),Ba=iJ(),[OSe,kJ]=kSe(G5),OJ=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:s,modal:o=!0}=t,l=Ba(e),c=k.useRef(null),[u,f]=wd({prop:i,defaultProp:a??!1,onChange:s,caller:G5});return S.jsx(OSe,{scope:e,triggerId:yl(),triggerRef:c,contentId:yl(),open:u,onOpenChange:f,onOpenToggle:k.useCallback(()=>f(d=>!d),[f]),modal:o,children:S.jsx(fSe,{...l,open:u,onOpenChange:f,dir:r,modal:o,children:n})})};OJ.displayName=G5;var TJ="DropdownMenuTrigger",CJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,a=kJ(TJ,n),s=Ba(n);return S.jsx(dSe,{asChild:!0,...s,children:S.jsx(Bt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Ac(e,a.triggerRef),onPointerDown:rt(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(a.onOpenToggle(),a.open||o.preventDefault())}),onKeyDown:rt(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&a.onOpenToggle(),o.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});CJ.displayName=TJ;var TSe="DropdownMenuPortal",PJ=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ba(e);return S.jsx(hSe,{...r,...n})};PJ.displayName=TSe;var NJ="DropdownMenuContent",IJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=kJ(NJ,n),a=Ba(n),s=k.useRef(!1);return S.jsx(pSe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:e,onCloseAutoFocus:rt(t.onCloseAutoFocus,o=>{var l;s.current||(l=i.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:rt(t.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IJ.displayName=NJ;var CSe="DropdownMenuGroup",PSe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(mSe,{...i,...r,ref:e})});PSe.displayName=CSe;var NSe="DropdownMenuLabel",RJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(gSe,{...i,...r,ref:e})});RJ.displayName=NSe;var ISe="DropdownMenuItem",jJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(ySe,{...i,...r,ref:e})});jJ.displayName=ISe;var RSe="DropdownMenuCheckboxItem",$J=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(vSe,{...i,...r,ref:e})});$J.displayName=RSe;var jSe="DropdownMenuRadioGroup",$Se=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(wSe,{...i,...r,ref:e})});$Se.displayName=jSe;var MSe="DropdownMenuRadioItem",MJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(bSe,{...i,...r,ref:e})});MJ.displayName=MSe;var LSe="DropdownMenuItemIndicator",LJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(_Se,{...i,...r,ref:e})});LJ.displayName=LSe;var DSe="DropdownMenuSeparator",DJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(xSe,{...i,...r,ref:e})});DJ.displayName=DSe;var FSe="DropdownMenuArrow",BSe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(SSe,{...i,...r,ref:e})});BSe.displayName=FSe;var USe="DropdownMenuSubTrigger",FJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(ESe,{...i,...r,ref:e})});FJ.displayName=USe;var zSe="DropdownMenuSubContent",BJ=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ba(n);return S.jsx(ASe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BJ.displayName=zSe;var VSe=OJ,WSe=CJ,HSe=PJ,UJ=IJ,zJ=RJ,VJ=jJ,WJ=$J,HJ=MJ,qJ=LJ,GJ=DJ,KJ=FJ,YJ=BJ;const ZJ=VSe,XJ=WSe,qSe=k.forwardRef(({className:t,inset:e,children:n,...r},i)=>S.jsxs(KJ,{ref:i,className:xt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,S.jsx(tX,{className:"ml-auto h-4 w-4"})]}));qSe.displayName=KJ.displayName;const GSe=k.forwardRef(({className:t,...e},n)=>S.jsx(YJ,{ref:n,className:xt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));GSe.displayName=YJ.displayName;const U$=k.forwardRef(({className:t,sideOffset:e=4,...n},r)=>S.jsx(HSe,{children:S.jsx(UJ,{ref:r,sideOffset:e,className:xt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));U$.displayName=UJ.displayName;const hw=k.forwardRef(({className:t,inset:e,...n},r)=>S.jsx(VJ,{ref:r,className:xt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));hw.displayName=VJ.displayName;const KSe=k.forwardRef(({className:t,children:e,checked:n,...r},i)=>S.jsxs(WJ,{ref:i,className:xt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(qJ,{children:S.jsx(v$,{className:"h-4 w-4"})})}),e]}));KSe.displayName=WJ.displayName;const YSe=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(HJ,{ref:r,className:xt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(qJ,{children:S.jsx(xbe,{className:"h-2 w-2 fill-current"})})}),e]}));YSe.displayName=HJ.displayName;const JJ=k.forwardRef(({className:t,inset:e,...n},r)=>S.jsx(zJ,{ref:r,className:xt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));JJ.displayName=zJ.displayName;const QJ=k.forwardRef(({className:t,...e},n)=>S.jsx(GJ,{ref:n,className:xt("-mx-1 my-1 h-px bg-muted",t),...e}));QJ.displayName=GJ.displayName;function ZSe(t,e=[]){let n=[];function r(a,s){const o=k.createContext(s);o.displayName=a+"Context";const l=n.length;n=[...n,s];const c=f=>{var g;const{scope:d,children:h,...p}=f,m=((g=d==null?void 0:d[t])==null?void 0:g[l])||o,y=k.useMemo(()=>p,Object.values(p));return S.jsx(m.Provider,{value:y,children:h})};c.displayName=a+"Provider";function u(f,d){var m;const h=((m=d==null?void 0:d[t])==null?void 0:m[l])||o,p=k.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=n.map(s=>k.createContext(s));return function(o){const l=(o==null?void 0:o[t])||a;return k.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,XSe(i,...e)]}function XSe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var JSe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],z$=JSe.reduce((t,e)=>{const n=j5(`Primitive.${e}`),r=k.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),eQ={exports:{}},tQ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay=k;function QSe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eEe=typeof Object.is=="function"?Object.is:QSe,tEe=ay.useState,nEe=ay.useEffect,rEe=ay.useLayoutEffect,iEe=ay.useDebugValue;function aEe(t,e){var n=e(),r=tEe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return rEe(function(){i.value=n,i.getSnapshot=e,sC(i)&&a({inst:i})},[t,n,e]),nEe(function(){return sC(i)&&a({inst:i}),t(function(){sC(i)&&a({inst:i})})},[t]),iEe(n),n}function sC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!eEe(t,n)}catch{return!0}}function sEe(t,e){return e()}var oEe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sEe:aEe;tQ.useSyncExternalStore=ay.useSyncExternalStore!==void 0?ay.useSyncExternalStore:oEe;eQ.exports=tQ;var lEe=eQ.exports;function cEe(){return lEe.useSyncExternalStore(uEe,()=>!0,()=>!1)}function uEe(){return()=>{}}var V$="Avatar",[fEe]=ZSe(V$),[dEe,nQ]=fEe(V$),rQ=k.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,a]=k.useState("idle");return S.jsx(dEe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:S.jsx(z$.span,{...r,ref:e})})});rQ.displayName=V$;var iQ="AvatarImage",aQ=k.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=t,s=nQ(iQ,n),o=hEe(r,a),l=xl(c=>{i(c),s.onImageLoadingStatusChange(c)});return Si(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?S.jsx(z$.img,{...a,ref:e,src:r}):null});aQ.displayName=iQ;var sQ="AvatarFallback",oQ=k.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,a=nQ(sQ,n),[s,o]=k.useState(r===void 0);return k.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(l)}},[r]),s&&a.imageLoadingStatus!=="loaded"?S.jsx(z$.span,{...i,ref:e}):null});oQ.displayName=sQ;function kB(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hEe(t,{referrerPolicy:e,crossOrigin:n}){const r=cEe(),i=k.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[s,o]=k.useState(()=>kB(a,t));return Si(()=>{o(kB(a,t))},[a,t]),Si(()=>{const l=f=>()=>{o(f)};if(!a)return;const c=l("loaded"),u=l("error");return a.addEventListener("load",c),a.addEventListener("error",u),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",c),a.removeEventListener("error",u)}},[a,n,e]),s}var lQ=rQ,cQ=aQ,uQ=oQ;const W$=k.forwardRef(({className:t,...e},n)=>S.jsx(lQ,{ref:n,className:xt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));W$.displayName=lQ.displayName;const H$=k.forwardRef(({className:t,...e},n)=>S.jsx(cQ,{ref:n,className:xt("aspect-square h-full w-full",t),...e}));H$.displayName=cQ.displayName;const q$=k.forwardRef(({className:t,...e},n)=>S.jsx(uQ,{ref:n,className:xt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));q$.displayName=uQ.displayName;const OB=({className:t,onNavigate:e})=>{var s,o,l,c,u;const{setTheme:n}=I1e(),{user:r,signOut:i}=qu(),a=[{id:"dashboard",label:"Dashboard",icon:Tbe,path:"/"},{id:"transactions",label:"Expenses",icon:Fbe,path:"/expenses"},{id:"budgets",label:"Budgets",icon:aX,path:"/budgets"},{id:"reports",label:"Reports",icon:ybe,path:"/reports"},{id:"ai-advisor",label:"AI Advisor",icon:oX,path:"/ai-advisor"},{id:"settings",label:"Settings",icon:sX,path:"/settings"}];return S.jsxs("div",{className:xt("w-64 bg-card border-r border-border h-screen flex flex-col p-4 shadow-sm",t),children:[S.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2 pl-2",children:[S.jsx("div",{className:"bg-cyan-500 text-white p-1.5 rounded-lg shadow-sm",children:S.jsx(R5,{className:"h-5 w-5"})}),S.jsx("span",{className:"text-xl font-bold tracking-tight text-foreground",children:"SpendMind"})]}),S.jsx("nav",{className:"flex-1 space-y-1",children:a.map(f=>{const d=f.icon;return S.jsxs($Z,{to:f.path,onClick:e,className:({isActive:h})=>xt("flex items-center w-full justify-start gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 group text-sm font-medium",h?"bg-cyan-500/10 text-cyan-600 dark:text-cyan-400 font-bold border border-cyan-500/20 shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[S.jsx(d,{className:xt("h-4 w-4","transition-colors")}),S.jsx("span",{className:"flex-1",children:f.label}),f.id==="dashboard"&&S.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 hidden group-[.active]:block"})]},f.id)})}),S.jsxs("div",{className:"mt-auto pt-6 border-t border-border space-y-4",children:[S.jsxs("div",{className:"flex items-center gap-3 px-2 py-3 bg-accent/30 rounded-xl border border-border/50",children:[S.jsxs(W$,{className:"h-9 w-9 border-2 border-border transition-transform hover:scale-105",children:[S.jsx(H$,{src:(s=r==null?void 0:r.user_metadata)==null?void 0:s.avatar_url}),S.jsx(q$,{className:"bg-secondary text-secondary-foreground font-bold",children:((l=(o=r==null?void 0:r.user_metadata)==null?void 0:o.full_name)==null?void 0:l.charAt(0))||((c=r==null?void 0:r.email)==null?void 0:c.charAt(0).toUpperCase())})]}),S.jsxs("div",{className:"flex-1 min-w-0 px-1",children:[S.jsx("p",{className:"text-xs font-bold text-foreground truncate",children:((u=r==null?void 0:r.user_metadata)==null?void 0:u.full_name)||"User Name"}),S.jsx("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-500 font-bold",children:"Premium Member"})]}),S.jsx(sn,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",children:S.jsx(iX,{className:"h-4 w-4"})})]}),S.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[S.jsxs(ZJ,{children:[S.jsx(XJ,{asChild:!0,children:S.jsxs(sn,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground gap-2 px-2 hover:bg-accent/50 transition-colors",children:[S.jsxs("div",{className:"relative w-4 h-4 flex items-center justify-center",children:[S.jsx(zbe,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),S.jsx($be,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),S.jsx("span",{className:"text-xs font-medium",children:"Appearance"})]})}),S.jsxs(U$,{align:"start",className:"bg-popover border-border text-popover-foreground shadow-lg",children:[S.jsx(hw,{onClick:()=>n("light"),className:"cursor-pointer",children:"Light"}),S.jsx(hw,{onClick:()=>n("dark"),className:"cursor-pointer",children:"Dark"}),S.jsx(hw,{onClick:()=>n("system"),className:"cursor-pointer",children:"System"})]})]}),S.jsx("span",{className:"text-[10px] text-muted-foreground/60 font-medium",children:"v1.2.0"})]})]})]})};function pEe({onMenuClick:t}){var a,s;const{user:e,signOut:n}=qu(),r=(e==null?void 0:e.email)||"",i=r.charAt(0).toUpperCase();return S.jsxs("header",{className:"bg-card/50 backdrop-blur-sm border-b h-16 flex items-center justify-between px-6 sticky top-0 z-40",children:[S.jsxs("div",{className:"flex items-center gap-4 md:hidden",children:[S.jsx(sn,{variant:"ghost",size:"icon",onClick:t,className:"hover:bg-accent/50",children:S.jsx(Ibe,{className:"h-5 w-5"})}),S.jsx("div",{className:"font-bold text-lg tracking-tight text-foreground",children:"SpendMind"})]}),S.jsx("div",{className:"hidden md:block flex-1"})," ",S.jsx("div",{className:"flex items-center gap-4 ml-auto",children:S.jsxs(ZJ,{children:[S.jsx(XJ,{asChild:!0,children:S.jsx(sn,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:S.jsxs(W$,{className:"h-8 w-8",children:[S.jsx(H$,{src:(a=e==null?void 0:e.user_metadata)==null?void 0:a.avatar_url,alt:r}),S.jsx(q$,{children:i})]})})}),S.jsxs(U$,{className:"w-56",align:"end",forceMount:!0,children:[S.jsx(JJ,{className:"font-normal",children:S.jsxs("div",{className:"flex flex-col space-y-1",children:[S.jsx("p",{className:"text-sm font-medium leading-none",children:((s=e==null?void 0:e.user_metadata)==null?void 0:s.full_name)||"User"}),S.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r})]})}),S.jsx(QJ,{}),S.jsxs(hw,{onClick:()=>n(),className:"text-red-500 focus:text-red-500",children:[S.jsx(iX,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})})]})}const fQ=k.createContext();function mEe({children:t}){const{user:e}=qu(),[n,r]=k.useState([]),[i,a]=k.useState([]),[s,o]=k.useState([]),[l,c]=k.useState({currency:{code:"USD",symbol:"$",locale:"en-US"},country:"US"}),[u,f]=k.useState(!0),[d,h]=k.useState([]);k.useEffect(()=>{if(!e){r([]),a([]),o([]),f(!1);return}(async()=>{var N,j,U;f(!0);try{const{data:B}=await Fr.from("settings").select("*, currencies(*)").single();B&&c({currency:{code:((N=B.currencies)==null?void 0:N.code)||"USD",symbol:((j=B.currencies)==null?void 0:j.symbol)||"$",locale:((U=B.currencies)==null?void 0:U.locale)||"en-US"},country:B.country_code,theme:B.theme||"system"});const{data:V}=await Fr.from("categories").select("*").order("name");V&&a(V);const{data:Y}=await Fr.from("expenses").select("*").order("date",{ascending:!1});Y&&r(Y.map(G=>({...G,amount:Number(G.amount),category:G.category_name})));const{data:X}=await Fr.from("goals").select("*");X&&o(X);const{data:z}=await Fr.from("currencies").select("*").order("code");z&&h(z)}catch(B){console.error("Error fetching data:",B)}finally{f(!1)}})()},[e]);const p=async M=>{if(e)try{const{data:N,error:j}=await Fr.from("expenses").insert([{user_id:e.id,amount:M.amount,category_name:M.category,date:M.date,description:M.description}]).select().single();if(j)throw j;r(U=>[{...N,amount:Number(N.amount)},...U])}catch(N){console.error("Error adding expense:",N)}},m=async M=>{if(e)try{const{error:N}=await Fr.from("expenses").delete().eq("id",M);if(N)throw N;r(j=>j.filter(U=>U.id!==M))}catch(N){console.error("Error deleting expense:",N)}},y=async M=>{if(e)try{const{data:N,error:j}=await Fr.from("categories").insert([{user_id:e.id,name:M,budget_limit:0}]).select().single();if(j)throw j;a(U=>[...U,N])}catch(N){console.error("Error adding category:",N)}},g=async M=>{if(e)try{const{error:N}=await Fr.from("categories").delete().eq("id",M);if(N)throw N;a(j=>j.filter(U=>U.id!==M))}catch(N){console.error("Error deleting category:",N)}},v=async(M,N)=>{if(!e)return;const j=i.find(U=>U.name===M);if(j)try{const{error:U}=await Fr.from("categories").update({budget_limit:N}).eq("id",j.id);if(U)throw U;a(B=>B.map(V=>V.id===j.id?{...V,budget_limit:N}:V))}catch(U){console.error("Error updating limit:",U)}},w=async M=>{if(e)try{const{data:N,error:j}=await Fr.from("goals").insert([{user_id:e.id,title:M.title,target_amount:M.amount,months:M.months}]).select().single();if(j)throw j;o(U=>[...U,N])}catch(N){console.error("Error adding goal:",N)}},_=async M=>{if(e)try{const{error:N}=await Fr.from("goals").delete().eq("id",M);if(N)throw N;o(j=>j.filter(U=>U.id!==M))}catch(N){console.error("Error deleting goal:",N)}},x=async M=>{var N,j,U;if(e)try{const B={};M.currency&&(B.currency_code=M.currency.code),M.theme&&(B.theme=M.theme),M.country&&(B.country_code=M.country);const{data:V,error:Y}=await Fr.from("settings").update(B).eq("user_id",e.id).select("*, currencies(*)").single();if(Y)throw Y;V&&c({currency:{code:((N=V.currencies)==null?void 0:N.code)||"USD",symbol:((j=V.currencies)==null?void 0:j.symbol)||"$",locale:((U=V.currencies)==null?void 0:U.locale)||"en-US"},theme:V.theme,country:V.country_code})}catch(B){console.error("Error updating settings:",B)}},E=()=>n.reduce((M,N)=>M+N.amount,0),T=M=>n.filter(N=>N.category_name===M).reduce((N,j)=>N+j.amount,0),O=M=>{const N=i.find(B=>B.name===M),j=(N==null?void 0:N.budget_limit)||0;if(j===0)return 1/0;const U=T(M);return j-U},R=M=>{const{locale:N,code:j}=l.currency;return new Intl.NumberFormat(N,{style:"currency",currency:j}).format(M)};return S.jsx(fQ.Provider,{value:{expenses:n,categories:i.map(M=>M.name),categoriesRaw:i,budgetLimits:i.reduce((M,N)=>({...M,[N.name]:N.budget_limit}),{}),goals:s,settings:l,isLoading:u,addExpense:p,deleteExpense:m,updateLimit:v,addCategory:y,deleteCategory:g,addGoal:w,deleteGoal:_,updateSettings:x,getTotalSpent:E,getCategorySpent:T,getRemainingBudget:O,formatCurrency:R,availableCurrencies:d},children:t})}const Gu=()=>k.useContext(fQ);var gEe=Object.defineProperty,At=(t,e)=>{for(var n in e)gEe(t,n,{get:e[n],enumerable:!0})};function nn(t,e,n){function r(o,l){var c;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(c=o._zod).traits??(c.traits=new Set),o._zod.traits.add(t),e(o,l);for(const u in s.prototype)u in o||Object.defineProperty(o,u,{value:s.prototype[u].bind(o)});o._zod.constr=s,o._zod.def=l}const i=(n==null?void 0:n.Parent)??Object;class a extends i{}Object.defineProperty(a,"name",{value:t});function s(o){var l;const c=n!=null&&n.Parent?new a:this;r(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:o=>{var l,c;return n!=null&&n.Parent&&o instanceof n.Parent?!0:(c=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:c.has(t)}}),Object.defineProperty(s,"name",{value:t}),s}class cb extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const yEe={};function yp(t){return yEe}function vEe(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function wEe(t,e){return typeof e=="bigint"?e.toString():e}function G$(t){return t==null}function K$(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function jr(t,e,n){Object.defineProperty(t,e,{get(){{const r=n();return t[e]=r,r}},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function bEe(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}const dQ=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function TB(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function WI(t){if(TB(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(TB(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function mo(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function Ku(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function _Ee(t,e){if(!WI(e))throw new Error("Invalid input to extend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return bEe(this,"shape",r),r},checks:[]};return mo(t,n)}function xEe(t,e,n){const r=e._zod.def.shape,i={...r};for(const a in r)i[a]=t?new t({type:"optional",innerType:r[a]}):r[a];return mo(e,{...e._zod.def,shape:i,checks:[]})}function pw(t,e=0){var n;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function SEe(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function $x(t){return typeof t=="string"?t:t==null?void 0:t.message}function vp(t,e,n){var i,a,s,o,l,c;const r={...t,path:t.path??[]};if(!t.message){const u=$x((s=(a=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:a.error)==null?void 0:s.call(a,t))??$x((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??$x((l=n.customError)==null?void 0:l.call(n,t))??$x((c=n.localeError)==null?void 0:c.call(n,t))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Y$(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function ub(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const hQ=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,wEe,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},pQ=nn("$ZodError",hQ),K5=nn("$ZodError",hQ,{Parent:Error});function EEe(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function AEe(t,e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(o=>i({issues:o}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(t),r}function kEe(t){const e=[];for(const n of t)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}function OEe(t){var r;const e=[],n=[...t.issues].sort((i,a)=>i.path.length-a.path.length);for(const i of n)e.push(` ${i.message}`),(r=i.path)!=null&&r.length&&e.push(`   at ${kEe(i.path)}`);return e.join(`
`)}const mQ=t=>(e,n,r,i)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new cb;if(s.issues.length){const o=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>vp(l,a,yp())));throw dQ(o,i==null?void 0:i.callee),o}return s.value},Z$=mQ(K5),gQ=t=>async(e,n,r,i)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:n,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const o=new((i==null?void 0:i.Err)??t)(s.issues.map(l=>vp(l,a,yp())));throw dQ(o,i==null?void 0:i.callee),o}return s.value},yQ=gQ(K5),vQ=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},a=e._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new cb;return a.issues.length?{success:!1,error:new(t??pQ)(a.issues.map(s=>vp(s,i,yp())))}:{success:!0,data:a.value}},TEe=vQ(K5),wQ=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new t(a.issues.map(s=>vp(s,i,yp())))}:{success:!0,data:a.value}},CEe=wQ(K5),ov=nn("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),PEe=nn("$ZodCheckMaxLength",(t,e)=>{var n;ov.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!G$(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const s=Y$(i);r.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),NEe=nn("$ZodCheckMinLength",(t,e)=>{var n;ov.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!G$(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const s=Y$(i);r.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),IEe=nn("$ZodCheckLengthEquals",(t,e)=>{var n;ov.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!G$(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,a=i.length;if(a===e.length)return;const s=Y$(i),o=a>e.length;r.issues.push({origin:s,...o?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),REe=nn("$ZodCheckOverwrite",(t,e)=>{ov.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}}),jEe={major:4,minor:0,patch:0},ea=nn("$ZodType",(t,e)=>{var i;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=jEe;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)for(const s of a._zod.onattach)s(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(i=t._zod.deferred)==null||i.push(()=>{t._zod.run=t._zod.parse});else{const a=(s,o,l)=>{let c=pw(s),u;for(const f of o){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(c)continue;const d=s.issues.length,h=f._zod.check(s);if(h instanceof Promise&&(l==null?void 0:l.async)===!1)throw new cb;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,s.issues.length!==d&&(c||(c=pw(s,d)))});else{if(s.issues.length===d)continue;c||(c=pw(s,d))}}return u?u.then(()=>s):s};t._zod.run=(s,o)=>{const l=t._zod.parse(s,o);if(l instanceof Promise){if(o.async===!1)throw new cb;return l.then(c=>a(c,r,o))}return a(l,r,o)}}t["~standard"]={validate:a=>{var s;try{const o=TEe(t,a);return o.success?{value:o.data}:{issues:(s=o.error)==null?void 0:s.issues}}catch{return CEe(t,a).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),$Ee=nn("$ZodAny",(t,e)=>{ea.init(t,e),t._zod.parse=n=>n}),MEe=nn("$ZodUnknown",(t,e)=>{ea.init(t,e),t._zod.parse=n=>n}),LEe=nn("$ZodNever",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function CB(t,e,n){t.issues.length&&e.issues.push(...SEe(n,t.issues)),e.value[n]=t.value}const DEe=nn("$ZodArray",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const a=[];for(let s=0;s<i.length;s++){const o=i[s],l=e.element._zod.run({value:o,issues:[]},r);l instanceof Promise?a.push(l.then(c=>CB(c,n,s))):CB(l,n,s)}return a.length?Promise.all(a).then(()=>n):n}});function PB(t,e,n,r){for(const i of t)if(i.issues.length===0)return e.value=i.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(i=>i.issues.map(a=>vp(a,r,yp())))}),e}const FEe=nn("$ZodUnion",(t,e)=>{ea.init(t,e),jr(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),jr(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),jr(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),jr(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>K$(r.source)).join("|")})$`)}}),t._zod.parse=(n,r)=>{let i=!1;const a=[];for(const s of e.options){const o=s._zod.run({value:n.value,issues:[]},r);if(o instanceof Promise)a.push(o),i=!0;else{if(o.issues.length===0)return o;a.push(o)}}return i?Promise.all(a).then(s=>PB(s,n,t,r)):PB(a,n,t,r)}}),BEe=nn("$ZodIntersection",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,a=e.left._zod.run({value:i,issues:[]},r),s=e.right._zod.run({value:i,issues:[]},r);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then(([l,c])=>NB(n,l,c)):NB(n,a,s)}});function HI(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(WI(t)&&WI(e)){const n=Object.keys(e),r=Object.keys(t).filter(a=>n.indexOf(a)!==-1),i={...t,...e};for(const a of r){const s=HI(t[a],e[a]);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};i[a]=s.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=e[r],s=HI(i,a);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function NB(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),pw(t))return t;const r=HI(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const UEe=nn("$ZodTransform",(t,e)=>{ea.init(t,e),t._zod.parse=(n,r)=>{const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new cb;return n.value=i,n}}),X$=nn("$ZodOptional",(t,e)=>{ea.init(t,e),t._zod.optin="optional",t._zod.optout="optional",jr(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),jr(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${K$(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(n,r):n.value===void 0?n:e.innerType._zod.run(n,r)}),zEe=nn("$ZodNullable",(t,e)=>{ea.init(t,e),jr(t._zod,"optin",()=>e.innerType._zod.optin),jr(t._zod,"optout",()=>e.innerType._zod.optout),jr(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${K$(n.source)}|null)$`):void 0}),jr(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),VEe=nn("$ZodDefault",(t,e)=>{ea.init(t,e),t._zod.optin="optional",jr(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>IB(a,e)):IB(i,e)}});function IB(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const WEe=nn("$ZodPrefault",(t,e)=>{ea.init(t,e),t._zod.optin="optional",jr(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),HEe=nn("$ZodNonOptional",(t,e)=>{ea.init(t,e),jr(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>RB(a,t)):RB(i,t)}});function RB(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const qEe=nn("$ZodCatch",(t,e)=>{ea.init(t,e),t._zod.optin="optional",jr(t._zod,"optout",()=>e.innerType._zod.optout),jr(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(a=>(n.value=a.value,a.issues.length&&(n.value=e.catchValue({...n,error:{issues:a.issues.map(s=>vp(s,r,yp()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(a=>vp(a,r,yp()))},input:n.value}),n.issues=[]),n)}}),GEe=nn("$ZodPipe",(t,e)=>{ea.init(t,e),jr(t._zod,"values",()=>e.in._zod.values),jr(t._zod,"optin",()=>e.in._zod.optin),jr(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(n,r)=>{const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(a=>jB(a,e,r)):jB(i,e,r)}});function jB(t,e,n){return pw(t)?t:e.out._zod.run({value:t.value,issues:t.issues},n)}const KEe=nn("$ZodReadonly",(t,e)=>{ea.init(t,e),jr(t._zod,"propValues",()=>e.innerType._zod.propValues),jr(t._zod,"values",()=>e.innerType._zod.values),jr(t._zod,"optin",()=>e.innerType._zod.optin),jr(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then($B):$B(i)}});function $B(t){return t.value=Object.freeze(t.value),t}const YEe=nn("$ZodCustom",(t,e)=>{ov.init(t,e),ea.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(a=>MB(a,n,r,t));MB(i,n,r,t)}});function MB(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(ub(i))}}class bQ{constructor(){this._map=new Map,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function ZEe(){return new bQ}const Ii=ZEe();function XEe(t){return new t({type:"any"})}function JEe(t){return new t({type:"unknown"})}function QEe(t,e){return new t({type:"never",...Ku(e)})}function eAe(t,e){return new PEe({check:"max_length",...Ku(e),maximum:t})}function LB(t,e){return new NEe({check:"min_length",...Ku(e),minimum:t})}function tAe(t,e){return new IEe({check:"length_equals",...Ku(e),length:t})}function nAe(t){return new REe({check:"overwrite",tx:t})}function rAe(t,e,n){return new t({type:"array",element:e,...Ku(n)})}function iAe(t,e,n){const r=Ku(n);return r.abort??(r.abort=!0),new t({type:"custom",check:"custom",fn:e,...r})}function aAe(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Ku(n)})}class DB{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??Ii,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var f,d,h;var r;const i=e._zod.def,a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;const o={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,o);const l=(d=(f=e._zod).toJSONSchema)==null?void 0:d.call(f);if(l)o.schema=l;else{const p={...n,schemaPath:[...n.schemaPath,e],path:n.path},m=e._zod.parent;if(m)o.ref=m,this.process(m,p),this.seen.get(m).isParent=!0;else{const y=o.schema;switch(i.type){case"string":{const g=y;g.type="string";const{minimum:v,maximum:w,format:_,patterns:x,contentEncoding:E}=e._zod.bag;if(typeof v=="number"&&(g.minLength=v),typeof w=="number"&&(g.maxLength=w),_&&(g.format=a[_]??_,g.format===""&&delete g.format),E&&(g.contentEncoding=E),x&&x.size>0){const T=[...x];T.length===1?g.pattern=T[0].source:T.length>1&&(o.schema.allOf=[...T.map(O=>({...this.target==="draft-7"?{type:"string"}:{},pattern:O.source}))])}break}case"number":{const g=y,{minimum:v,maximum:w,format:_,multipleOf:x,exclusiveMaximum:E,exclusiveMinimum:T}=e._zod.bag;typeof _=="string"&&_.includes("int")?g.type="integer":g.type="number",typeof T=="number"&&(g.exclusiveMinimum=T),typeof v=="number"&&(g.minimum=v,typeof T=="number"&&(T>=v?delete g.minimum:delete g.exclusiveMinimum)),typeof E=="number"&&(g.exclusiveMaximum=E),typeof w=="number"&&(g.maximum=w,typeof E=="number"&&(E<=w?delete g.maximum:delete g.exclusiveMaximum)),typeof x=="number"&&(g.multipleOf=x);break}case"boolean":{const g=y;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const g=y,{minimum:v,maximum:w}=e._zod.bag;typeof v=="number"&&(g.minItems=v),typeof w=="number"&&(g.maxItems=w),g.type="array",g.items=this.process(i.element,{...p,path:[...p.path,"items"]});break}case"object":{const g=y;g.type="object",g.properties={};const v=i.shape;for(const x in v)g.properties[x]=this.process(v[x],{...p,path:[...p.path,"properties",x]});const w=new Set(Object.keys(v)),_=new Set([...w].filter(x=>{const E=i.shape[x]._zod;return this.io==="input"?E.optin===void 0:E.optout===void 0}));_.size>0&&(g.required=Array.from(_)),((h=i.catchall)==null?void 0:h._zod.def.type)==="never"?g.additionalProperties=!1:i.catchall?i.catchall&&(g.additionalProperties=this.process(i.catchall,{...p,path:[...p.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{const g=y;g.anyOf=i.options.map((v,w)=>this.process(v,{...p,path:[...p.path,"anyOf",w]}));break}case"intersection":{const g=y,v=this.process(i.left,{...p,path:[...p.path,"allOf",0]}),w=this.process(i.right,{...p,path:[...p.path,"allOf",1]}),_=E=>"allOf"in E&&Object.keys(E).length===1,x=[..._(v)?v.allOf:[v],..._(w)?w.allOf:[w]];g.allOf=x;break}case"tuple":{const g=y;g.type="array";const v=i.items.map((x,E)=>this.process(x,{...p,path:[...p.path,"prefixItems",E]}));if(this.target==="draft-2020-12"?g.prefixItems=v:g.items=v,i.rest){const x=this.process(i.rest,{...p,path:[...p.path,"items"]});this.target==="draft-2020-12"?g.items=x:g.additionalItems=x}i.rest&&(g.items=this.process(i.rest,{...p,path:[...p.path,"items"]}));const{minimum:w,maximum:_}=e._zod.bag;typeof w=="number"&&(g.minItems=w),typeof _=="number"&&(g.maxItems=_);break}case"record":{const g=y;g.type="object",g.propertyNames=this.process(i.keyType,{...p,path:[...p.path,"propertyNames"]}),g.additionalProperties=this.process(i.valueType,{...p,path:[...p.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const g=y,v=vEe(i.entries);v.every(w=>typeof w=="number")&&(g.type="number"),v.every(w=>typeof w=="string")&&(g.type="string"),g.enum=v;break}case"literal":{const g=y,v=[];for(const w of i.values)if(w===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof w=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");v.push(Number(w))}else v.push(w);if(v.length!==0)if(v.length===1){const w=v[0];g.type=w===null?"null":typeof w,g.const=w}else v.every(w=>typeof w=="number")&&(g.type="number"),v.every(w=>typeof w=="string")&&(g.type="string"),v.every(w=>typeof w=="boolean")&&(g.type="string"),v.every(w=>w===null)&&(g.type="null"),g.enum=v;break}case"file":{const g=y,v={type:"string",format:"binary",contentEncoding:"binary"},{minimum:w,maximum:_,mime:x}=e._zod.bag;w!==void 0&&(v.minLength=w),_!==void 0&&(v.maxLength=_),x?x.length===1?(v.contentMediaType=x[0],Object.assign(g,v)):g.anyOf=x.map(E=>({...v,contentMediaType:E})):Object.assign(g,v);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const g=this.process(i.innerType,p);y.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,p),o.ref=i.innerType;break}case"success":{const g=y;g.type="boolean";break}case"default":{this.process(i.innerType,p),o.ref=i.innerType,y.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,p),o.ref=i.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,p),o.ref=i.innerType;let g;try{g=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const g=y,v=e._zod.pattern;if(!v)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=v.source;break}case"pipe":{const g=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(g,p),o.ref=g;break}case"readonly":{this.process(i.innerType,p),o.ref=i.innerType,y.readOnly=!0;break}case"promise":{this.process(i.innerType,p),o.ref=i.innerType;break}case"optional":{this.process(i.innerType,p),o.ref=i.innerType;break}case"lazy":{const g=e._zod.innerType;this.process(g,p),o.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(e);return c&&Object.assign(o.schema,c),this.io==="input"&&hi(e)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((r=o.schema).default??(r.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(e).schema}emit(e,n){var u,f,d,h,p,m;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=y=>{var x;const g=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const E=(x=r.external.registry.get(y[0]))==null?void 0:x.id,T=r.external.uri??(R=>R);if(E)return{ref:T(E)};const O=y[1].defId??y[1].schema.id??`schema${this.counter++}`;return y[1].defId=O,{defId:O,ref:`${T("__shared")}#/${g}/${O}`}}if(y[1]===i)return{ref:"#"};const w=`#/${g}/`,_=y[1].schema.id??`__schema${this.counter++}`;return{defId:_,ref:w+_}},s=y=>{if(y[1].schema.$ref)return;const g=y[1],{ref:v,defId:w}=a(y);g.def={...g.schema},w&&(g.defId=w);const _=g.schema;for(const x in _)delete _[x];_.$ref=v};if(r.cycles==="throw")for(const y of this.seen.entries()){const g=y[1];if(g.cycle)throw new Error(`Cycle detected: #/${(u=g.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const y of this.seen.entries()){const g=y[1];if(e===y[0]){s(y);continue}if(r.external){const w=(f=r.external.registry.get(y[0]))==null?void 0:f.id;if(e!==y[0]&&w){s(y);continue}}if((d=this.metadataRegistry.get(y[0]))==null?void 0:d.id){s(y);continue}if(g.cycle){s(y);continue}if(g.count>1&&r.reused==="ref"){s(y);continue}}const o=(y,g)=>{const v=this.seen.get(y),w=v.def??v.schema,_={...w};if(v.ref===null)return;const x=v.ref;if(v.ref=null,x){o(x,g);const E=this.seen.get(x).schema;E.$ref&&g.target==="draft-7"?(w.allOf=w.allOf??[],w.allOf.push(E)):(Object.assign(w,E),Object.assign(w,_))}v.isParent||this.override({zodSchema:y,jsonSchema:w,path:v.path??[]})};for(const y of[...this.seen.entries()].reverse())o(y[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(h=r.external)!=null&&h.uri){const y=(p=r.external.registry.get(e))==null?void 0:p.id;if(!y)throw new Error("Schema is missing an `id` property");l.$id=r.external.uri(y)}Object.assign(l,i.def);const c=((m=r.external)==null?void 0:m.defs)??{};for(const y of this.seen.entries()){const g=y[1];g.def&&g.defId&&(c[g.defId]=g.def)}r.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function FB(t,e){if(t instanceof bQ){const r=new DB(e),i={};for(const o of t._idmap.entries()){const[l,c]=o;r.process(c)}const a={},s={registry:t,uri:e==null?void 0:e.uri,defs:i};for(const o of t._idmap.entries()){const[l,c]=o;a[l]=r.emit(c,{...e,external:s})}if(Object.keys(i).length>0){const o=r.target==="draft-2020-12"?"$defs":"definitions";a.__shared={[o]:i}}return{schemas:a}}const n=new DB(e);return n.process(t),n.emit(t,e)}function hi(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const i=t._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return hi(i.element,n);case"object":{for(const a in i.shape)if(hi(i.shape[a],n))return!0;return!1}case"union":{for(const a of i.options)if(hi(a,n))return!0;return!1}case"intersection":return hi(i.left,n)||hi(i.right,n);case"tuple":{for(const a of i.items)if(hi(a,n))return!0;return!!(i.rest&&hi(i.rest,n))}case"record":return hi(i.keyType,n)||hi(i.valueType,n);case"map":return hi(i.keyType,n)||hi(i.valueType,n);case"set":return hi(i.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return hi(i.innerType,n);case"lazy":return hi(i.getter(),n);case"default":return hi(i.innerType,n);case"prefault":return hi(i.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return hi(i.in,n)||hi(i.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${i.type}`)}function Er(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_zod"in e))return!1;const n=e._zod;return typeof n=="object"&&n!==null&&"def"in n}function ai(t){if(typeof t!="object"||t===null)return!1;const e=t;if(!("_def"in e)||"_zod"in e)return!1;const n=e._def;return typeof n=="object"&&n!=null&&"typeName"in n}function sAe(t){return Er(t)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),ai(t)}function $d(t){return!t||typeof t!="object"||Array.isArray(t)?!1:!!(Er(t)||ai(t))}function _Q(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodLiteral"}function xQ(t){return Er(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="literal":!1}function oAe(t){return!!(_Q(t)||xQ(t))}async function J$(t,e){if(Er(t))try{return{success:!0,data:await yQ(t,e)}}catch(n){return{success:!1,error:n}}if(ai(t))return await t.safeParseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function Y5(t,e){if(Er(t))return await yQ(t,e);if(ai(t))return await t.parseAsync(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function lAe(t,e){if(Er(t))try{return{success:!0,data:Z$(t,e)}}catch(n){return{success:!1,error:n}}if(ai(t))return t.safeParse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function K2(t,e){if(Er(t))return Z$(t,e);if(ai(t))return t.parse(e);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function fb(t){var e;if(Er(t))return(e=Ii.get(t))==null?void 0:e.description;if(ai(t)||"description"in t&&typeof t.description=="string")return t.description}function cAe(t){if(!$d(t))return!1;if(ai(t)){const e=t._def;if(e.typeName==="ZodObject"){const n=t;return!n.shape||Object.keys(n.shape).length===0}if(e.typeName==="ZodRecord")return!0}if(Er(t)){const e=t._zod.def;if(e.type==="object"){const n=t;return!n.shape||Object.keys(n.shape).length===0}if(e.type==="record")return!0}return typeof t=="object"&&t!==null&&!("shape"in t)}function Q$(t){return $d(t)?ai(t)?t._def.typeName==="ZodString":Er(t)?t._zod.def.type==="string":!1:!1}function eM(t){return typeof t=="object"&&t!==null&&"_def"in t&&typeof t._def=="object"&&t._def!==null&&"typeName"in t._def&&t._def.typeName==="ZodObject"}function hc(t){return Er(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="object":!1}function Z5(t){return Er(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="array":!1}function SQ(t){return Er(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="optional":!1}function EQ(t){return Er(t)?typeof t=="object"&&t!==null&&"_zod"in t&&typeof t._zod=="object"&&t._zod!==null&&"def"in t._zod&&typeof t._zod.def=="object"&&t._zod.def!==null&&"type"in t._zod.def&&t._zod.def.type==="nullable":!1}function oo(t){return!!(eM(t)||hc(t))}function db(t){if(ai(t))return t.shape;if(Er(t))return t._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function AQ(t,e){if(ai(t))return t.extend(e);if(Er(t))return _Ee(t,e);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function tM(t){if(ai(t))return t.partial();if(Er(t))return xEe(X$,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function mE(t,e=!1){if(ai(t))return t.strict();if(hc(t)){const n=t._zod.def.shape;if(e)for(const[a,s]of Object.entries(t._zod.def.shape)){if(hc(s)){const l=mE(s,e);n[a]=l}else if(Z5(s)){let l=s._zod.def.element;hc(l)&&(l=mE(l,e)),n[a]=mo(s,{...s._zod.def,element:l})}else n[a]=s;const o=Ii.get(s);o&&Ii.add(n[a],o)}const r=mo(t,{...t._zod.def,shape:n,catchall:QEe(LEe)}),i=Ii.get(t);return i&&Ii.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function qI(t,e=!1){if(eM(t))return t.passthrough();if(hc(t)){const n=t._zod.def.shape;if(e)for(const[a,s]of Object.entries(t._zod.def.shape)){if(hc(s)){const l=qI(s,e);n[a]=l}else if(Z5(s)){let l=s._zod.def.element;hc(l)&&(l=qI(l,e)),n[a]=mo(s,{...s._zod.def,element:l})}else n[a]=s;const o=Ii.get(s);o&&Ii.add(n[a],o)}const r=mo(t,{...t._zod.def,shape:n,catchall:JEe(MEe)}),i=Ii.get(t);return i&&Ii.add(r,i),r}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function kQ(t){if(ai(t))try{const e=t.parse(void 0);return()=>e}catch{return}if(Er(t))try{const e=Z$(t,void 0);return()=>e}catch{return}}function uAe(t){return ai(t)&&"typeName"in t._def&&t._def.typeName==="ZodEffects"}function fAe(t){return Er(t)&&t._zod.def.type==="pipe"}function Sh(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(ai(t))return uAe(t)?Sh(t._def.schema,e,n):t;if(Er(t)){let i=t;if(fAe(t)&&(i=Sh(t._zod.def.in,e,n)),e){if(hc(i)){const s={};for(const[o,l]of Object.entries(i._zod.def.shape))s[o]=Sh(l,e,n);i=mo(i,{...i._zod.def,shape:s})}else if(Z5(i)){const s=Sh(i._zod.def.element,e,n);i=mo(i,{...i._zod.def,element:s})}else if(SQ(i)){const s=Sh(i._zod.def.innerType,e,n);i=mo(i,{...i._zod.def,innerType:s})}else if(EQ(i)){const s=Sh(i._zod.def.innerType,e,n);i=mo(i,{...i._zod.def,innerType:s})}}const a=Ii.get(t);return a&&Ii.add(i,a),n.set(t,i),i}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function OQ(t,e=!1){return Sh(t,e,new WeakMap)}function dAe(t,e){if(ai(t)){const n=db(t),r={};for(const[i,a]of Object.entries(n))e(i,a)?r[i]=a.optional():r[i]=a;return t.extend(r)}if(Er(t)){const n=db(t),r={...t._zod.def.shape};for(const[s,o]of Object.entries(n))e(s,o)&&(r[s]=new X$({type:"optional",innerType:o}));const i=mo(t,{...t._zod.def,shape:r}),a=Ii.get(t);return a&&Ii.add(i,a),i}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function TQ(t){return t instanceof Error&&(t.constructor.name==="ZodError"||t.constructor.name==="$ZodError")}var CQ={};At(CQ,{extendInteropZodObject:()=>AQ,getInteropZodDefaultGetter:()=>kQ,getInteropZodObjectShape:()=>db,getSchemaDescription:()=>fb,interopParse:()=>K2,interopParseAsync:()=>Y5,interopSafeParse:()=>lAe,interopSafeParseAsync:()=>J$,interopZodObjectMakeFieldsOptional:()=>dAe,interopZodObjectPartial:()=>tM,interopZodObjectPassthrough:()=>qI,interopZodObjectStrict:()=>mE,interopZodTransformInputSchema:()=>OQ,isInteropZodError:()=>TQ,isInteropZodLiteral:()=>oAe,isInteropZodObject:()=>oo,isInteropZodSchema:()=>$d,isShapelessZodSchema:()=>cAe,isSimpleStringZodSchema:()=>Q$,isZodArrayV4:()=>Z5,isZodLiteralV3:()=>_Q,isZodLiteralV4:()=>xQ,isZodNullableV4:()=>EQ,isZodObjectV3:()=>eM,isZodObjectV4:()=>hc,isZodOptionalV4:()=>SQ,isZodSchema:()=>sAe,isZodSchemaV3:()=>ai,isZodSchemaV4:()=>Er});const hAe=Symbol("Let zodToJsonSchema decide on which parser to use"),pAe={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},mAe=t=>({...pAe,...t}),gAe=t=>{const e=mAe(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}},PQ=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function Ds(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?PQ(e,t.currentPath):e.join("/")}}function NQ(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Nn(t,e,n,r,i){t[e]=n,NQ(t,e,r,i)}var xn;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(const o of a)s[o]=i[o];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},t.find=(i,a)=>{for(const s of i)if(a(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(xn||(xn={}));var BB;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(BB||(BB={}));const ht=xn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rf=t=>{switch(typeof t){case"undefined":return ht.undefined;case"string":return ht.string;case"number":return Number.isNaN(t)?ht.nan:ht.number;case"boolean":return ht.boolean;case"function":return ht.function;case"bigint":return ht.bigint;case"symbol":return ht.symbol;case"object":return Array.isArray(t)?ht.array:t===null?ht.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ht.promise:typeof Map<"u"&&t instanceof Map?ht.map:typeof Set<"u"&&t instanceof Set?ht.set:typeof Date<"u"&&t instanceof Date?ht.date:ht.object;default:return ht.unknown}},Ve=xn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Nu extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof Nu))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Nu.create=t=>new Nu(t);const GI=(t,e)=>{let n;switch(t.code){case Ve.invalid_type:t.received===ht.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ve.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,xn.jsonStringifyReplacer)}`;break;case Ve.unrecognized_keys:n=`Unrecognized key(s) in object: ${xn.joinValues(t.keys,", ")}`;break;case Ve.invalid_union:n="Invalid input";break;case Ve.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${xn.joinValues(t.options)}`;break;case Ve.invalid_enum_value:n=`Invalid enum value. Expected ${xn.joinValues(t.options)}, received '${t.received}'`;break;case Ve.invalid_arguments:n="Invalid function arguments";break;case Ve.invalid_return_type:n="Invalid function return type";break;case Ve.invalid_date:n="Invalid date";break;case Ve.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:xn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ve.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ve.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ve.custom:n="Invalid input";break;case Ve.invalid_intersection_types:n="Intersection results could not be merged";break;case Ve.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ve.not_finite:n="Number must be finite";break;default:n=e.defaultError,xn.assertNever(t)}return{message:n}};let yAe=GI;function vAe(){return yAe}const wAe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(s,{data:e,defaultError:o}).message;return{...i,path:a,message:o}};function nt(t,e){const n=vAe(),r=wAe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===GI?void 0:GI].filter(i=>!!i)});t.common.issues.push(r)}class Fs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Wt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,s=await i.value;r.push({key:a,value:s})}return Fs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return Wt;a.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(r[a.value]=s.value)}return{status:e.value,value:r}}}const Wt=Object.freeze({status:"aborted"}),V0=t=>({status:"dirty",value:t}),Po=t=>({status:"valid",value:t}),UB=t=>t.status==="aborted",zB=t=>t.status==="dirty",sy=t=>t.status==="valid",gE=t=>typeof Promise<"u"&&t instanceof Promise;var yt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(yt||(yt={}));class xd{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VB=(t,e)=>{if(sy(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Nu(t.common.issues);return this._error=n,this._error}}};function rn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,o)=>{const{message:l}=t;return s.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:i}}let bn=class{get description(){return this._def.description}_getType(e){return Rf(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Rf(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Fs,ctx:{common:e.parent.common,data:e.data,parsedType:Rf(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(gE(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rf(e)},i=this._parseSync({data:e,path:r.path,parent:r});return VB(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rf(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return sy(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>sy(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rf(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(gE(i)?i:Promise.resolve(i));return VB(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const s=e(i),o=()=>a.addIssue({code:Ve.custom,...r(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new cy({schema:this,typeName:qe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return sd.create(this,this._def)}nullable(){return uy.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return oy.create(this)}promise(){return _E.create(this,this._def)}or(e){return wE.create([this,e],this._def)}and(e){return bE.create(this,e,this._def)}transform(e){return new cy({...rn(this._def),schema:this,typeName:qe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new YI({...rn(this._def),innerType:this,defaultValue:n,typeName:qe.ZodDefault})}brand(){return new zAe({typeName:qe.ZodBranded,type:this,...rn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ZI({...rn(this._def),innerType:this,catchValue:n,typeName:qe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return nM.create(this,e)}readonly(){return XI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const bAe=/^c[^\s-]{8,}$/i,_Ae=/^[0-9a-z]+$/,xAe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,SAe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,EAe=/^[a-z0-9_-]{21}$/i,AAe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kAe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,OAe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,TAe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let oC;const CAe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PAe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,NAe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,IAe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RAe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,jAe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,IQ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$Ae=new RegExp(`^${IQ}$`);function RQ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function MAe(t){return new RegExp(`^${RQ(t)}$`)}function LAe(t){let e=`${IQ}T${RQ(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function DAe(t,e){return!!((e==="v4"||!e)&&CAe.test(t)||(e==="v6"||!e)&&NAe.test(t))}function FAe(t,e){if(!AAe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function BAe(t,e){return!!((e==="v4"||!e)&&PAe.test(t)||(e==="v6"||!e)&&IAe.test(t))}class qf extends bn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ht.string){const a=this._getOrReturnCtx(e);return nt(a,{code:Ve.invalid_type,expected:ht.string,received:a.parsedType}),Wt}const r=new Fs;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const s=e.data.length>a.value,o=e.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(e,i),s?nt(i,{code:Ve.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&nt(i,{code:Ve.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")OAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"email",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")oC||(oC=new RegExp(TAe,"u")),oC.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"emoji",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")SAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"uuid",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")EAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"nanoid",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")bAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"cuid",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")_Ae.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"cuid2",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")xAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"ulid",code:Ve.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),nt(i,{validation:"url",code:Ve.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"regex",code:Ve.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?LAe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?$Ae.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?MAe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?kAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"duration",code:Ve.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?DAe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"ip",code:Ve.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?FAe(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"jwt",code:Ve.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?BAe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"cidr",code:Ve.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?RAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"base64",code:Ve.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?jAe.test(e.data)||(i=this._getOrReturnCtx(e,i),nt(i,{validation:"base64url",code:Ve.invalid_string,message:a.message}),r.dirty()):xn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Ve.invalid_string,...yt.errToObj(r)})}_addCheck(e){return new qf({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...yt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...yt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...yt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...yt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...yt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...yt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...yt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...yt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...yt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...yt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...yt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...yt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...yt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...yt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...yt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...yt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...yt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...yt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...yt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...yt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...yt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...yt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...yt.errToObj(n)})}nonempty(e){return this.min(1,yt.errToObj(e))}trim(){return new qf({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qf({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qf({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}qf.create=t=>new qf({checks:[],typeName:qe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...rn(t)});function UAe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return a%s/10**i}class hb extends bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ht.number){const a=this._getOrReturnCtx(e);return nt(a,{code:Ve.invalid_type,expected:ht.number,received:a.parsedType}),Wt}let r;const i=new Fs;for(const a of this._def.checks)a.kind==="int"?xn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?UAe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.not_finite,message:a.message}),i.dirty()):xn.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,yt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,yt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,yt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,yt.toString(n))}setLimit(e,n,r,i){return new hb({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:yt.toString(i)}]})}_addCheck(e){return new hb({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:yt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:yt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:yt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:yt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:yt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:yt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:yt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:yt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:yt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&xn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}hb.create=t=>new hb({checks:[],typeName:qe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rn(t)});class pb extends bn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ht.bigint)return this._getInvalidInput(e);let r;const i=new Fs;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),nt(r,{code:Ve.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):xn.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return nt(n,{code:Ve.invalid_type,expected:ht.bigint,received:n.parsedType}),Wt}gte(e,n){return this.setLimit("min",e,!0,yt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,yt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,yt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,yt.toString(n))}setLimit(e,n,r,i){return new pb({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:yt.toString(i)}]})}_addCheck(e){return new pb({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:yt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:yt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:yt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:yt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:yt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}pb.create=t=>new pb({checks:[],typeName:qe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...rn(t)});class WB extends bn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ht.boolean){const r=this._getOrReturnCtx(e);return nt(r,{code:Ve.invalid_type,expected:ht.boolean,received:r.parsedType}),Wt}return Po(e.data)}}WB.create=t=>new WB({typeName:qe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rn(t)});class yE extends bn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ht.date){const a=this._getOrReturnCtx(e);return nt(a,{code:Ve.invalid_type,expected:ht.date,received:a.parsedType}),Wt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return nt(a,{code:Ve.invalid_date}),Wt}const r=new Fs;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),nt(i,{code:Ve.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):xn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new yE({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:yt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:yt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}yE.create=t=>new yE({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:qe.ZodDate,...rn(t)});class HB extends bn{_parse(e){if(this._getType(e)!==ht.symbol){const r=this._getOrReturnCtx(e);return nt(r,{code:Ve.invalid_type,expected:ht.symbol,received:r.parsedType}),Wt}return Po(e.data)}}HB.create=t=>new HB({typeName:qe.ZodSymbol,...rn(t)});class qB extends bn{_parse(e){if(this._getType(e)!==ht.undefined){const r=this._getOrReturnCtx(e);return nt(r,{code:Ve.invalid_type,expected:ht.undefined,received:r.parsedType}),Wt}return Po(e.data)}}qB.create=t=>new qB({typeName:qe.ZodUndefined,...rn(t)});class GB extends bn{_parse(e){if(this._getType(e)!==ht.null){const r=this._getOrReturnCtx(e);return nt(r,{code:Ve.invalid_type,expected:ht.null,received:r.parsedType}),Wt}return Po(e.data)}}GB.create=t=>new GB({typeName:qe.ZodNull,...rn(t)});let vE=class extends bn{constructor(){super(...arguments),this._any=!0}_parse(e){return Po(e.data)}};vE.create=t=>new vE({typeName:qe.ZodAny,...rn(t)});class KB extends bn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Po(e.data)}}KB.create=t=>new KB({typeName:qe.ZodUnknown,...rn(t)});class Sd extends bn{_parse(e){const n=this._getOrReturnCtx(e);return nt(n,{code:Ve.invalid_type,expected:ht.never,received:n.parsedType}),Wt}}Sd.create=t=>new Sd({typeName:qe.ZodNever,...rn(t)});class YB extends bn{_parse(e){if(this._getType(e)!==ht.undefined){const r=this._getOrReturnCtx(e);return nt(r,{code:Ve.invalid_type,expected:ht.void,received:r.parsedType}),Wt}return Po(e.data)}}YB.create=t=>new YB({typeName:qe.ZodVoid,...rn(t)});let oy=class Y2 extends bn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ht.array)return nt(n,{code:Ve.invalid_type,expected:ht.array,received:n.parsedType}),Wt;if(i.exactLength!==null){const s=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(s||o)&&(nt(n,{code:s?Ve.too_big:Ve.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(nt(n,{code:Ve.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(nt(n,{code:Ve.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>i.type._parseAsync(new xd(n,s,n.path,o)))).then(s=>Fs.mergeArray(r,s));const a=[...n.data].map((s,o)=>i.type._parseSync(new xd(n,s,n.path,o)));return Fs.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Y2({...this._def,minLength:{value:e,message:yt.toString(n)}})}max(e,n){return new Y2({...this._def,maxLength:{value:e,message:yt.toString(n)}})}length(e,n){return new Y2({...this._def,exactLength:{value:e,message:yt.toString(n)}})}nonempty(e){return this.min(1,e)}};oy.create=(t,e)=>new oy({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qe.ZodArray,...rn(e)});function Fm(t){if(t instanceof Zr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=sd.create(Fm(r))}return new Zr({...t._def,shape:()=>e})}else return t instanceof oy?new oy({...t._def,type:Fm(t.element)}):t instanceof sd?sd.create(Fm(t.unwrap())):t instanceof uy?uy.create(Fm(t.unwrap())):t instanceof wp?wp.create(t.items.map(e=>Fm(e))):t}class Zr extends bn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=xn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ht.object){const c=this._getOrReturnCtx(e);return nt(c,{code:Ve.invalid_type,expected:ht.object,received:c.parsedType}),Wt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Sd&&this._def.unknownKeys==="strip"))for(const c in i.data)s.includes(c)||o.push(c);const l=[];for(const c of s){const u=a[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new xd(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Sd){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")o.length>0&&(nt(i,{code:Ve.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new xd(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,d=await u.value;c.push({key:f,value:d,alwaysSet:u.alwaysSet})}return c}).then(c=>Fs.mergeObjectSync(r,c)):Fs.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return yt.errToObj,new Zr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,s;const i=((s=(a=this._def).errorMap)==null?void 0:s.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:yt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Zr({...this._def,unknownKeys:"strip"})}passthrough(){return new Zr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Zr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Zr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Zr({...this._def,catchall:e})}pick(e){const n={};for(const r of xn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Zr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of xn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Zr({...this._def,shape:()=>n})}deepPartial(){return Fm(this)}partial(e){const n={};for(const r of xn.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Zr({...this._def,shape:()=>n})}required(e){const n={};for(const r of xn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof sd;)a=a._def.innerType;n[r]=a}return new Zr({...this._def,shape:()=>n})}keyof(){return jQ(xn.objectKeys(this.shape))}}Zr.create=(t,e)=>new Zr({shape:()=>t,unknownKeys:"strip",catchall:Sd.create(),typeName:qe.ZodObject,...rn(e)});Zr.strictCreate=(t,e)=>new Zr({shape:()=>t,unknownKeys:"strict",catchall:Sd.create(),typeName:qe.ZodObject,...rn(e)});Zr.lazycreate=(t,e)=>new Zr({shape:t,unknownKeys:"strip",catchall:Sd.create(),typeName:qe.ZodObject,...rn(e)});let wE=class extends bn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=a.map(o=>new Nu(o.ctx.common.issues));return nt(n,{code:Ve.invalid_union,unionErrors:s}),Wt}if(n.common.async)return Promise.all(r.map(async a=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(l=>new Nu(l));return nt(n,{code:Ve.invalid_union,unionErrors:o}),Wt}}get options(){return this._def.options}};wE.create=(t,e)=>new wE({options:t,typeName:qe.ZodUnion,...rn(e)});function KI(t,e){const n=Rf(t),r=Rf(e);if(t===e)return{valid:!0,data:t};if(n===ht.object&&r===ht.object){const i=xn.objectKeys(e),a=xn.objectKeys(t).filter(o=>i.indexOf(o)!==-1),s={...t,...e};for(const o of a){const l=KI(t[o],e[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===ht.array&&r===ht.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const s=t[a],o=e[a],l=KI(s,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ht.date&&r===ht.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let bE=class extends bn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,s)=>{if(UB(a)||UB(s))return Wt;const o=KI(a.value,s.value);return o.valid?((zB(a)||zB(s))&&n.dirty(),{status:n.value,value:o.data}):(nt(r,{code:Ve.invalid_intersection_types}),Wt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};bE.create=(t,e,n)=>new bE({left:t,right:e,typeName:qe.ZodIntersection,...rn(n)});class wp extends bn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.array)return nt(r,{code:Ve.invalid_type,expected:ht.array,received:r.parsedType}),Wt;if(r.data.length<this._def.items.length)return nt(r,{code:Ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Wt;!this._def.rest&&r.data.length>this._def.items.length&&(nt(r,{code:Ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new xd(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(a).then(s=>Fs.mergeArray(n,s)):Fs.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new wp({...this._def,rest:e})}}wp.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wp({items:t,typeName:qe.ZodTuple,rest:null,...rn(e)})};class ZB extends bn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.map)return nt(r,{code:Ve.invalid_type,expected:ht.map,received:r.parsedType}),Wt;const i=this._def.keyType,a=this._def.valueType,s=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new xd(r,o,r.path,[c,"key"])),value:a._parse(new xd(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Wt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Wt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}}}}ZB.create=(t,e,n)=>new ZB({valueType:e,keyType:t,typeName:qe.ZodMap,...rn(n)});class mb extends bn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ht.set)return nt(r,{code:Ve.invalid_type,expected:ht.set,received:r.parsedType}),Wt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(nt(r,{code:Ve.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(nt(r,{code:Ve.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Wt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>a._parse(new xd(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(e,n){return new mb({...this._def,minSize:{value:e,message:yt.toString(n)}})}max(e,n){return new mb({...this._def,maxSize:{value:e,message:yt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}mb.create=(t,e)=>new mb({valueType:t,minSize:null,maxSize:null,typeName:qe.ZodSet,...rn(e)});class XB extends bn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}XB.create=(t,e)=>new XB({getter:t,typeName:qe.ZodLazy,...rn(e)});class JB extends bn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return nt(n,{received:n.data,code:Ve.invalid_literal,expected:this._def.value}),Wt}return{status:"valid",value:e.data}}get value(){return this._def.value}}JB.create=(t,e)=>new JB({value:t,typeName:qe.ZodLiteral,...rn(e)});function jQ(t,e){return new ly({values:t,typeName:qe.ZodEnum,...rn(e)})}class ly extends bn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return nt(n,{expected:xn.joinValues(r),received:n.parsedType,code:Ve.invalid_type}),Wt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return nt(n,{received:n.data,code:Ve.invalid_enum_value,options:r}),Wt}return Po(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ly.create(e,{...this._def,...n})}exclude(e,n=this._def){return ly.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ly.create=jQ;class QB extends bn{_parse(e){const n=xn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ht.string&&r.parsedType!==ht.number){const i=xn.objectValues(n);return nt(r,{expected:xn.joinValues(i),received:r.parsedType,code:Ve.invalid_type}),Wt}if(this._cache||(this._cache=new Set(xn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=xn.objectValues(n);return nt(r,{received:r.data,code:Ve.invalid_enum_value,options:i}),Wt}return Po(e.data)}get enum(){return this._def.values}}QB.create=(t,e)=>new QB({values:t,typeName:qe.ZodNativeEnum,...rn(e)});class _E extends bn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ht.promise&&n.common.async===!1)return nt(n,{code:Ve.invalid_type,expected:ht.promise,received:n.parsedType}),Wt;const r=n.parsedType===ht.promise?n.data:Promise.resolve(n.data);return Po(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_E.create=(t,e)=>new _E({type:t,typeName:qe.ZodPromise,...rn(e)});class cy extends bn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:s=>{nt(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(r.data,a);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return Wt;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Wt:l.status==="dirty"||n.value==="dirty"?V0(l.value):l});{if(n.value==="aborted")return Wt;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?Wt:o.status==="dirty"||n.value==="dirty"?V0(o.value):o}}if(i.type==="refinement"){const s=o=>{const l=i.refinement(o,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Wt:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Wt:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!sy(s))return Wt;const o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>sy(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:n.value,value:o})):Wt);xn.assertNever(i)}}cy.create=(t,e,n)=>new cy({schema:t,typeName:qe.ZodEffects,effect:e,...rn(n)});cy.createWithPreprocess=(t,e,n)=>new cy({schema:e,effect:{type:"preprocess",transform:t},typeName:qe.ZodEffects,...rn(n)});let sd=class extends bn{_parse(e){return this._getType(e)===ht.undefined?Po(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};sd.create=(t,e)=>new sd({innerType:t,typeName:qe.ZodOptional,...rn(e)});let uy=class extends bn{_parse(e){return this._getType(e)===ht.null?Po(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};uy.create=(t,e)=>new uy({innerType:t,typeName:qe.ZodNullable,...rn(e)});let YI=class extends bn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ht.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};YI.create=(t,e)=>new YI({innerType:t,typeName:qe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rn(e)});let ZI=class extends bn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gE(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Nu(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Nu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};ZI.create=(t,e)=>new ZI({innerType:t,typeName:qe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rn(e)});class e7 extends bn{_parse(e){if(this._getType(e)!==ht.nan){const r=this._getOrReturnCtx(e);return nt(r,{code:Ve.invalid_type,expected:ht.nan,received:r.parsedType}),Wt}return{status:"valid",value:e.data}}}e7.create=t=>new e7({typeName:qe.ZodNaN,...rn(t)});class zAe extends bn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class nM extends bn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Wt:a.status==="dirty"?(n.dirty(),V0(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Wt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new nM({in:e,out:n,typeName:qe.ZodPipeline})}}let XI=class extends bn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(sy(i)&&(i.value=Object.freeze(i.value)),i);return gE(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};XI.create=(t,e)=>new XI({innerType:t,typeName:qe.ZodReadonly,...rn(e)});function VAe(t,e={},n){return vE.create()}var qe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qe||(qe={}));const Vp=qf.create,t7=vE.create;Sd.create;oy.create;const Md=Zr.create;wE.create;bE.create;wp.create;ly.create;_E.create;sd.create;uy.create;function WAe(t,e){var r,i,a;const n={type:"array"};return(r=t.type)!=null&&r._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==qe.ZodAny&&(n.items=On(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Nn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Nn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Nn(n,"minItems",t.exactLength.value,t.exactLength.message,e),Nn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function HAe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Nn(n,"minimum",r.value,r.message,e):Nn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Nn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Nn(n,"maximum",r.value,r.message,e):Nn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Nn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Nn(n,"multipleOf",r.value,r.message,e);break}return n}function qAe(){return{type:"boolean"}}function $Q(t,e){return On(t.type._def,e)}const GAe=(t,e)=>On(t.innerType._def,e);function MQ(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(i=>MQ(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return KAe(t,e)}}const KAe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Nn(n,"minimum",r.value,r.message,e);break;case"max":Nn(n,"maximum",r.value,r.message,e);break}return n};function YAe(t,e){return{...On(t.innerType._def,e),default:t.defaultValue()}}function ZAe(t,e){return e.effectStrategy==="input"?On(t.schema._def,e):Ds(e)}function XAe(t){return{type:"string",enum:Array.from(t.values)}}const JAe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function QAe(t,e){const n=[On(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),On(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(JAe(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else r=void 0;i.push(s)}}),i.length?{allOf:i,...r}:void 0}function e5e(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let lC;const Vo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(lC===void 0&&(lC=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),lC),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function LQ(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Nn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Nn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Wo(n,"email",r.message,e);break;case"format:idn-email":Wo(n,"idn-email",r.message,e);break;case"pattern:zod":xa(n,Vo.email,r.message,e);break}break;case"url":Wo(n,"uri",r.message,e);break;case"uuid":Wo(n,"uuid",r.message,e);break;case"regex":xa(n,r.regex,r.message,e);break;case"cuid":xa(n,Vo.cuid,r.message,e);break;case"cuid2":xa(n,Vo.cuid2,r.message,e);break;case"startsWith":xa(n,RegExp(`^${cC(r.value,e)}`),r.message,e);break;case"endsWith":xa(n,RegExp(`${cC(r.value,e)}$`),r.message,e);break;case"datetime":Wo(n,"date-time",r.message,e);break;case"date":Wo(n,"date",r.message,e);break;case"time":Wo(n,"time",r.message,e);break;case"duration":Wo(n,"duration",r.message,e);break;case"length":Nn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Nn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":xa(n,RegExp(cC(r.value,e)),r.message,e);break;case"ip":r.version!=="v6"&&Wo(n,"ipv4",r.message,e),r.version!=="v4"&&Wo(n,"ipv6",r.message,e);break;case"base64url":xa(n,Vo.base64url,r.message,e);break;case"jwt":xa(n,Vo.jwt,r.message,e);break;case"cidr":r.version!=="v6"&&xa(n,Vo.ipv4Cidr,r.message,e),r.version!=="v4"&&xa(n,Vo.ipv6Cidr,r.message,e);break;case"emoji":xa(n,Vo.emoji(),r.message,e);break;case"ulid":xa(n,Vo.ulid,r.message,e);break;case"base64":switch(e.base64Strategy){case"format:binary":Wo(n,"binary",r.message,e);break;case"contentEncoding:base64":Nn(n,"contentEncoding","base64",r.message,e);break;case"pattern:zod":xa(n,Vo.base64,r.message,e);break}break;case"nanoid":xa(n,Vo.nanoid,r.message,e);break}return n}function cC(t,e){return e.patternStrategy==="escape"?n5e(t):t}const t5e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function n5e(t){let e="";for(let n=0;n<t.length;n++)t5e.has(t[n])||(e+="\\"),e+=t[n];return e}function Wo(t,e,n,r){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Nn(t,"format",e,n,r)}function xa(t,e,n,r){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:n7(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Nn(t,"pattern",n7(e,r),n,r)}function n7(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let i="",a=!1,s=!1,o=!1;for(let c=0;c<r.length;c++){if(a){i+=r[c],a=!1;continue}if(n.i){if(s){if(r[c].match(/[a-z]/)){o?(i+=r[c],i+=`${r[c-2]}-${r[c]}`.toUpperCase(),o=!1):r[c+1]==="-"&&((l=r[c+2])!=null&&l.match(/[a-z]/))?(i+=r[c],o=!0):i+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){i+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){i+=s?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}i+=r[c],r[c]==="\\"?a=!0:s&&r[c]==="]"?s=!1:!s&&r[c]==="["&&(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function DQ(t,e){var r,i,a,s,o,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===qe.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,u)=>({...c,[u]:On(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]})??Ds(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:On(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===qe.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const{type:c,...u}=LQ(t.keyType._def,e);return{...n,propertyNames:u}}else{if(((s=t.keyType)==null?void 0:s._def.typeName)===qe.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((o=t.keyType)==null?void 0:o._def.typeName)===qe.ZodBranded&&t.keyType._def.type._def.typeName===qe.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...u}=$Q(t.keyType._def,e);return{...n,propertyNames:u}}}return n}function r5e(t,e){if(e.mapStrategy==="record")return DQ(t,e);const n=On(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Ds(e),r=On(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Ds(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function i5e(t){const e=t.values,r=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(r.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function a5e(t){return t.target==="openAi"?void 0:{not:Ds({...t,currentPath:[...t.currentPath,"not"]})}}function s5e(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const xE={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function o5e(t,e){if(e.target==="openApi3")return r7(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in xE&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const s=xE[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":return a._def.value===null?[...i,"null"]:i;case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:n.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return r7(t,e)}const r7=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>On(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function l5e(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:xE[t.innerType._def.typeName],nullable:!0}:{type:[xE[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=On(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=On(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function c5e(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",NQ(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Nn(n,"minimum",r.value,r.message,e):Nn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Nn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Nn(n,"maximum",r.value,r.message,e):Nn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Nn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Nn(n,"multipleOf",r.value,r.message,e);break}return n}function u5e(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},i=[],a=t.shape();for(const o in a){let l=a[o];if(l===void 0||l._def===void 0)continue;let c=d5e(l);c&&n&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=On(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});u!==void 0&&(r.properties[o]=u,c||i.push(o))}i.length&&(r.required=i);const s=f5e(t,e);return s!==void 0&&(r.additionalProperties=s),r}function f5e(t,e){if(t.catchall._def.typeName!=="ZodNever")return On(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function d5e(t){try{return t.isOptional()}catch{return!0}}const h5e=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return On(t.innerType._def,e);const n=On(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:Ds(e)},n]}:Ds(e)},p5e=(t,e)=>{if(e.pipeStrategy==="input")return On(t.in._def,e);if(e.pipeStrategy==="output")return On(t.out._def,e);const n=On(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=On(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function m5e(t,e){return On(t.type._def,e)}function g5e(t,e){const r={type:"array",uniqueItems:!0,items:On(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Nn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Nn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function y5e(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>On(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:On(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>On(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function v5e(t){return{not:Ds(t)}}function w5e(t){return Ds(t)}const b5e=(t,e)=>On(t.innerType._def,e),_5e=(t,e,n)=>{switch(e){case qe.ZodString:return LQ(t,n);case qe.ZodNumber:return c5e(t,n);case qe.ZodObject:return u5e(t,n);case qe.ZodBigInt:return HAe(t,n);case qe.ZodBoolean:return qAe();case qe.ZodDate:return MQ(t,n);case qe.ZodUndefined:return v5e(n);case qe.ZodNull:return s5e(n);case qe.ZodArray:return WAe(t,n);case qe.ZodUnion:case qe.ZodDiscriminatedUnion:return o5e(t,n);case qe.ZodIntersection:return QAe(t,n);case qe.ZodTuple:return y5e(t,n);case qe.ZodRecord:return DQ(t,n);case qe.ZodLiteral:return e5e(t,n);case qe.ZodEnum:return XAe(t);case qe.ZodNativeEnum:return i5e(t);case qe.ZodNullable:return l5e(t,n);case qe.ZodOptional:return h5e(t,n);case qe.ZodMap:return r5e(t,n);case qe.ZodSet:return g5e(t,n);case qe.ZodLazy:return()=>t.getter()._def;case qe.ZodPromise:return m5e(t,n);case qe.ZodNaN:case qe.ZodNever:return a5e(n);case qe.ZodEffects:return ZAe(t,n);case qe.ZodAny:return Ds(n);case qe.ZodUnknown:return w5e(n);case qe.ZodDefault:return YAe(t,n);case qe.ZodBranded:return $Q(t,n);case qe.ZodReadonly:return b5e(t,n);case qe.ZodCatch:return GAe(t,n);case qe.ZodPipeline:return p5e(t,n);case qe.ZodFunction:case qe.ZodVoid:case qe.ZodSymbol:return;default:return(r=>{})()}};function On(t,e,n=!1){var o;const r=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,r,n);if(l!==hAe)return l}if(r&&!n){const l=x5e(r,e);if(l!==void 0)return l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=_5e(t,t.typeName,e),s=typeof a=="function"?On(a(),e):a;if(s&&S5e(t,e,s),e.postProcess){const l=e.postProcess(s,t,e);return i.jsonSchema=s,l}return i.jsonSchema=s,s}const x5e=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:PQ(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Ds(e)):e.$refStrategy==="seen"?Ds(e):void 0}},S5e=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),E5e=(t,e)=>{const n=gAe(e);let r;const i=On(t._def,n,!1)??Ds(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=r?{...i,[n.definitionPath]:r}:i;return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function ep(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!ep(t[i],e[i]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!ep(t[s],e[s]))return!1;return!0}return t===e}function Jo(t){return encodeURI(A5e(t))}function A5e(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}const k5e={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},O5e={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},T5e={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let C5e=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function Gf(t,e=Object.create(null),n=C5e,r=""){if(t&&typeof t=="object"&&!Array.isArray(t)){const a=t.$id||t.id;if(a){const s=new URL(a,n.href);s.hash.length>1?e[s.href]=t:(s.hash="",r===""?n=s:Gf(t,e,n))}}else if(t!==!0&&t!==!1)return e;const i=n.href+(r?"#"+r:"");if(e[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(e[i]=t,t===!0||t===!1)return e;if(t.__absolute_uri__===void 0&&Object.defineProperty(t,"__absolute_uri__",{enumerable:!1,value:i}),t.$ref&&t.__absolute_ref__===void 0){const a=new URL(t.$ref,n.href);a.hash=a.hash,Object.defineProperty(t,"__absolute_ref__",{enumerable:!1,value:a.href})}if(t.$recursiveRef&&t.__absolute_recursive_ref__===void 0){const a=new URL(t.$recursiveRef,n.href);a.hash=a.hash,Object.defineProperty(t,"__absolute_recursive_ref__",{enumerable:!1,value:a.href})}if(t.$anchor){const a=new URL("#"+t.$anchor,n.href);e[a.href]=t}for(let a in t){if(T5e[a])continue;const s=`${r}/${Jo(a)}`,o=t[a];if(Array.isArray(o)){if(k5e[a]){const l=o.length;for(let c=0;c<l;c++)Gf(o[c],e,n,`${s}/${c}`)}}else if(O5e[a])for(let l in o)Gf(o[l],e,n,`${s}/${Jo(l)}`);else Gf(o,e,n,s)}return e}const P5e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,N5e=[0,31,28,31,30,31,30,31,31,30,31,30,31],I5e=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,R5e=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,j5e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,$5e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,M5e=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,L5e=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,D5e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,F5e=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,B5e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,U5e=t=>{if(t[0]==='"')return!1;const[e,n,...r]=t.split("@");return!e||!n||r.length!==0||e.length>64||n.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(n)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:n.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},z5e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,V5e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,W5e=t=>t.length>1&&t.length<80&&(/^P\d+([.,]\d+)?W$/.test(t)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(t)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(t));function Wl(t){return t.test.bind(t)}const i7={date:FQ,time:BQ.bind(void 0,!1),"date-time":G5e,duration:W5e,uri:Z5e,"uri-reference":Wl(j5e),"uri-template":Wl($5e),url:Wl(M5e),email:U5e,hostname:Wl(R5e),ipv4:Wl(z5e),ipv6:Wl(V5e),regex:J5e,uuid:Wl(L5e),"json-pointer":Wl(D5e),"json-pointer-uri-fragment":Wl(F5e),"relative-json-pointer":Wl(B5e)};function H5e(t){return t%4===0&&(t%100!==0||t%400===0)}function FQ(t){const e=t.match(P5e);if(!e)return!1;const n=+e[1],r=+e[2],i=+e[3];return r>=1&&r<=12&&i>=1&&i<=(r==2&&H5e(n)?29:N5e[r])}function BQ(t,e){const n=e.match(I5e);if(!n)return!1;const r=+n[1],i=+n[2],a=+n[3],s=!!n[5];return(r<=23&&i<=59&&a<=59||r==23&&i==59&&a==60)&&(!t||s)}const q5e=/t|\s/i;function G5e(t){const e=t.split(q5e);return e.length==2&&FQ(e[0])&&BQ(!0,e[1])}const K5e=/\/|:/,Y5e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Z5e(t){return K5e.test(t)&&Y5e.test(t)}const X5e=/[^\\]\\Z/;function J5e(t){if(X5e.test(t))return!1;try{return new RegExp(t,"u"),!0}catch{return!1}}function Q5e(t){let e=0,n=t.length,r=0,i;for(;r<n;)e++,i=t.charCodeAt(r++),i>=55296&&i<=56319&&r<n&&(i=t.charCodeAt(r),(i&64512)==56320&&r++);return e}function dr(t,e,n="2019-09",r=Gf(e),i=!0,a=null,s="#",o="#",l=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:s,keyword:"false",keywordLocation:s,error:"False boolean schema."}]};const c=typeof t;let u;switch(c){case"boolean":case"number":case"string":u=c;break;case"object":t===null?u="null":Array.isArray(t)?u="array":u="object";break;default:throw new Error(`Instances of "${c}" type are not supported.`)}const{$ref:f,$recursiveRef:d,$recursiveAnchor:h,type:p,const:m,enum:y,required:g,not:v,anyOf:w,allOf:_,oneOf:x,if:E,then:T,else:O,format:R,properties:M,patternProperties:N,additionalProperties:j,unevaluatedProperties:U,minProperties:B,maxProperties:V,propertyNames:Y,dependentRequired:X,dependentSchemas:z,dependencies:G,prefixItems:ae,items:ue,additionalItems:L,unevaluatedItems:K,contains:Q,minContains:re,maxContains:F,minItems:$,maxItems:ie,uniqueItems:q,minimum:fe,maximum:me,exclusiveMinimum:de,exclusiveMaximum:_e,multipleOf:Oe,minLength:ee,maxLength:Ee,pattern:Qe,__absolute_ref__:tt,__absolute_recursive_ref__:Pe}=e,xe=[];if(h===!0&&a===null&&(a=e),d==="#"){const Re=a===null?r[Pe]:a,Ie=`${o}/$recursiveRef`,Ye=dr(t,a===null?e:a,n,r,i,Re,s,Ie,l);Ye.valid||xe.push({instanceLocation:s,keyword:"$recursiveRef",keywordLocation:Ie,error:"A subschema had errors."},...Ye.errors)}if(f!==void 0){const Ie=r[tt||f];if(Ie===void 0){let Ne=`Unresolved $ref "${f}".`;throw tt&&tt!==f&&(Ne+=`  Absolute URI "${tt}".`),Ne+=`
Known schemas:
- ${Object.keys(r).join(`
- `)}`,new Error(Ne)}const Ye=`${o}/$ref`,je=dr(t,Ie,n,r,i,a,s,Ye,l);if(je.valid||xe.push({instanceLocation:s,keyword:"$ref",keywordLocation:Ye,error:"A subschema had errors."},...je.errors),n==="4"||n==="7")return{valid:xe.length===0,errors:xe}}if(Array.isArray(p)){let Re=p.length,Ie=!1;for(let Ye=0;Ye<Re;Ye++)if(u===p[Ye]||p[Ye]==="integer"&&u==="number"&&t%1===0&&t===t){Ie=!0;break}Ie||xe.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${u}" is invalid. Expected "${p.join('", "')}".`})}else p==="integer"?(u!=="number"||t%1||t!==t)&&xe.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${u}" is invalid. Expected "${p}".`}):p!==void 0&&u!==p&&xe.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${u}" is invalid. Expected "${p}".`});if(m!==void 0&&(u==="object"||u==="array"?ep(t,m)||xe.push({instanceLocation:s,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(m)}.`}):t!==m&&xe.push({instanceLocation:s,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(m)}.`})),y!==void 0&&(u==="object"||u==="array"?y.some(Re=>ep(t,Re))||xe.push({instanceLocation:s,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`}):y.some(Re=>t===Re)||xe.push({instanceLocation:s,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`})),v!==void 0){const Re=`${o}/not`;dr(t,v,n,r,i,a,s,Re).valid&&xe.push({instanceLocation:s,keyword:"not",keywordLocation:Re,error:'Instance matched "not" schema.'})}let Ze=[];if(w!==void 0){const Re=`${o}/anyOf`,Ie=xe.length;let Ye=!1;for(let je=0;je<w.length;je++){const Ne=w[je],Ke=Object.create(l),He=dr(t,Ne,n,r,i,h===!0?a:null,s,`${Re}/${je}`,Ke);xe.push(...He.errors),Ye=Ye||He.valid,He.valid&&Ze.push(Ke)}Ye?xe.length=Ie:xe.splice(Ie,0,{instanceLocation:s,keyword:"anyOf",keywordLocation:Re,error:"Instance does not match any subschemas."})}if(_!==void 0){const Re=`${o}/allOf`,Ie=xe.length;let Ye=!0;for(let je=0;je<_.length;je++){const Ne=_[je],Ke=Object.create(l),He=dr(t,Ne,n,r,i,h===!0?a:null,s,`${Re}/${je}`,Ke);xe.push(...He.errors),Ye=Ye&&He.valid,He.valid&&Ze.push(Ke)}Ye?xe.length=Ie:xe.splice(Ie,0,{instanceLocation:s,keyword:"allOf",keywordLocation:Re,error:"Instance does not match every subschema."})}if(x!==void 0){const Re=`${o}/oneOf`,Ie=xe.length,Ye=x.filter((je,Ne)=>{const Ke=Object.create(l),He=dr(t,je,n,r,i,h===!0?a:null,s,`${Re}/${Ne}`,Ke);return xe.push(...He.errors),He.valid&&Ze.push(Ke),He.valid}).length;Ye===1?xe.length=Ie:xe.splice(Ie,0,{instanceLocation:s,keyword:"oneOf",keywordLocation:Re,error:`Instance does not match exactly one subschema (${Ye} matches).`})}if((u==="object"||u==="array")&&Object.assign(l,...Ze),E!==void 0){const Re=`${o}/if`;if(dr(t,E,n,r,i,a,s,Re,l).valid){if(T!==void 0){const Ye=dr(t,T,n,r,i,a,s,`${o}/then`,l);Ye.valid||xe.push({instanceLocation:s,keyword:"if",keywordLocation:Re,error:'Instance does not match "then" schema.'},...Ye.errors)}}else if(O!==void 0){const Ye=dr(t,O,n,r,i,a,s,`${o}/else`,l);Ye.valid||xe.push({instanceLocation:s,keyword:"if",keywordLocation:Re,error:'Instance does not match "else" schema.'},...Ye.errors)}}if(u==="object"){if(g!==void 0)for(const je of g)je in t||xe.push({instanceLocation:s,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${je}".`});const Re=Object.keys(t);if(B!==void 0&&Re.length<B&&xe.push({instanceLocation:s,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${B} properties.`}),V!==void 0&&Re.length>V&&xe.push({instanceLocation:s,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${V} properties.`}),Y!==void 0){const je=`${o}/propertyNames`;for(const Ne in t){const Ke=`${s}/${Jo(Ne)}`,He=dr(Ne,Y,n,r,i,a,Ke,je);He.valid||xe.push({instanceLocation:s,keyword:"propertyNames",keywordLocation:je,error:`Property name "${Ne}" does not match schema.`},...He.errors)}}if(X!==void 0){const je=`${o}/dependantRequired`;for(const Ne in X)if(Ne in t){const Ke=X[Ne];for(const He of Ke)He in t||xe.push({instanceLocation:s,keyword:"dependentRequired",keywordLocation:je,error:`Instance has "${Ne}" but does not have "${He}".`})}}if(z!==void 0)for(const je in z){const Ne=`${o}/dependentSchemas`;if(je in t){const Ke=dr(t,z[je],n,r,i,a,s,`${Ne}/${Jo(je)}`,l);Ke.valid||xe.push({instanceLocation:s,keyword:"dependentSchemas",keywordLocation:Ne,error:`Instance has "${je}" but does not match dependant schema.`},...Ke.errors)}}if(G!==void 0){const je=`${o}/dependencies`;for(const Ne in G)if(Ne in t){const Ke=G[Ne];if(Array.isArray(Ke))for(const He of Ke)He in t||xe.push({instanceLocation:s,keyword:"dependencies",keywordLocation:je,error:`Instance has "${Ne}" but does not have "${He}".`});else{const He=dr(t,Ke,n,r,i,a,s,`${je}/${Jo(Ne)}`);He.valid||xe.push({instanceLocation:s,keyword:"dependencies",keywordLocation:je,error:`Instance has "${Ne}" but does not match dependant schema.`},...He.errors)}}}const Ie=Object.create(null);let Ye=!1;if(M!==void 0){const je=`${o}/properties`;for(const Ne in M){if(!(Ne in t))continue;const Ke=`${s}/${Jo(Ne)}`,He=dr(t[Ne],M[Ne],n,r,i,a,Ke,`${je}/${Jo(Ne)}`);if(He.valid)l[Ne]=Ie[Ne]=!0;else if(Ye=i,xe.push({instanceLocation:s,keyword:"properties",keywordLocation:je,error:`Property "${Ne}" does not match schema.`},...He.errors),Ye)break}}if(!Ye&&N!==void 0){const je=`${o}/patternProperties`;for(const Ne in N){const Ke=new RegExp(Ne,"u"),He=N[Ne];for(const et in t){if(!Ke.test(et))continue;const $t=`${s}/${Jo(et)}`,dt=dr(t[et],He,n,r,i,a,$t,`${je}/${Jo(Ne)}`);dt.valid?l[et]=Ie[et]=!0:(Ye=i,xe.push({instanceLocation:s,keyword:"patternProperties",keywordLocation:je,error:`Property "${et}" matches pattern "${Ne}" but does not match associated schema.`},...dt.errors))}}}if(!Ye&&j!==void 0){const je=`${o}/additionalProperties`;for(const Ne in t){if(Ie[Ne])continue;const Ke=`${s}/${Jo(Ne)}`,He=dr(t[Ne],j,n,r,i,a,Ke,je);He.valid?l[Ne]=!0:(Ye=i,xe.push({instanceLocation:s,keyword:"additionalProperties",keywordLocation:je,error:`Property "${Ne}" does not match additional properties schema.`},...He.errors))}}else if(!Ye&&U!==void 0){const je=`${o}/unevaluatedProperties`;for(const Ne in t)if(!l[Ne]){const Ke=`${s}/${Jo(Ne)}`,He=dr(t[Ne],U,n,r,i,a,Ke,je);He.valid?l[Ne]=!0:xe.push({instanceLocation:s,keyword:"unevaluatedProperties",keywordLocation:je,error:`Property "${Ne}" does not match unevaluated properties schema.`},...He.errors)}}}else if(u==="array"){ie!==void 0&&t.length>ie&&xe.push({instanceLocation:s,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${t.length} > ${ie}).`}),$!==void 0&&t.length<$&&xe.push({instanceLocation:s,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${t.length} < ${$}).`});const Re=t.length;let Ie=0,Ye=!1;if(ae!==void 0){const je=`${o}/prefixItems`,Ne=Math.min(ae.length,Re);for(;Ie<Ne;Ie++){const Ke=dr(t[Ie],ae[Ie],n,r,i,a,`${s}/${Ie}`,`${je}/${Ie}`);if(l[Ie]=!0,!Ke.valid&&(Ye=i,xe.push({instanceLocation:s,keyword:"prefixItems",keywordLocation:je,error:"Items did not match schema."},...Ke.errors),Ye))break}}if(ue!==void 0){const je=`${o}/items`;if(Array.isArray(ue)){const Ne=Math.min(ue.length,Re);for(;Ie<Ne;Ie++){const Ke=dr(t[Ie],ue[Ie],n,r,i,a,`${s}/${Ie}`,`${je}/${Ie}`);if(l[Ie]=!0,!Ke.valid&&(Ye=i,xe.push({instanceLocation:s,keyword:"items",keywordLocation:je,error:"Items did not match schema."},...Ke.errors),Ye))break}}else for(;Ie<Re;Ie++){const Ne=dr(t[Ie],ue,n,r,i,a,`${s}/${Ie}`,je);if(l[Ie]=!0,!Ne.valid&&(Ye=i,xe.push({instanceLocation:s,keyword:"items",keywordLocation:je,error:"Items did not match schema."},...Ne.errors),Ye))break}if(!Ye&&L!==void 0){const Ne=`${o}/additionalItems`;for(;Ie<Re;Ie++){const Ke=dr(t[Ie],L,n,r,i,a,`${s}/${Ie}`,Ne);l[Ie]=!0,Ke.valid||(Ye=i,xe.push({instanceLocation:s,keyword:"additionalItems",keywordLocation:Ne,error:"Items did not match additional items schema."},...Ke.errors))}}}if(Q!==void 0)if(Re===0&&re===void 0)xe.push({instanceLocation:s,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(re!==void 0&&Re<re)xe.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${Re}) than minContains (${re}).`});else{const je=`${o}/contains`,Ne=xe.length;let Ke=0;for(let He=0;He<Re;He++){const et=dr(t[He],Q,n,r,i,a,`${s}/${He}`,je);et.valid?(l[He]=!0,Ke++):xe.push(...et.errors)}Ke>=(re||0)&&(xe.length=Ne),re===void 0&&F===void 0&&Ke===0?xe.splice(Ne,0,{instanceLocation:s,keyword:"contains",keywordLocation:je,error:"Array does not contain item matching schema."}):re!==void 0&&Ke<re?xe.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${re} items matching schema. Only ${Ke} items were found.`}):F!==void 0&&Ke>F&&xe.push({instanceLocation:s,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${F} items matching schema. ${Ke} items were found.`})}if(!Ye&&K!==void 0){const je=`${o}/unevaluatedItems`;for(Ie;Ie<Re;Ie++){if(l[Ie])continue;const Ne=dr(t[Ie],K,n,r,i,a,`${s}/${Ie}`,je);l[Ie]=!0,Ne.valid||xe.push({instanceLocation:s,keyword:"unevaluatedItems",keywordLocation:je,error:"Items did not match unevaluated items schema."},...Ne.errors)}}if(q)for(let je=0;je<Re;je++){const Ne=t[je],Ke=typeof Ne=="object"&&Ne!==null;for(let He=0;He<Re;He++){if(je===He)continue;const et=t[He];(Ne===et||Ke&&(typeof et=="object"&&et!==null)&&ep(Ne,et))&&(xe.push({instanceLocation:s,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${je} and ${He}.`}),je=Number.MAX_SAFE_INTEGER,He=Number.MAX_SAFE_INTEGER)}}}else if(u==="number"){if(n==="4"?(fe!==void 0&&(de===!0&&t<=fe||t<fe)&&xe.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${t} is less than ${de?"or equal to ":""} ${fe}.`}),me!==void 0&&(_e===!0&&t>=me||t>me)&&xe.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${t} is greater than ${_e?"or equal to ":""} ${me}.`})):(fe!==void 0&&t<fe&&xe.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${t} is less than ${fe}.`}),me!==void 0&&t>me&&xe.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${t} is greater than ${me}.`}),de!==void 0&&t<=de&&xe.push({instanceLocation:s,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${t} is less than ${de}.`}),_e!==void 0&&t>=_e&&xe.push({instanceLocation:s,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${t} is greater than or equal to ${_e}.`})),Oe!==void 0){const Re=t%Oe;Math.abs(0-Re)>=11920929e-14&&Math.abs(Oe-Re)>=11920929e-14&&xe.push({instanceLocation:s,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${t} is not a multiple of ${Oe}.`})}}else if(u==="string"){const Re=ee===void 0&&Ee===void 0?0:Q5e(t);ee!==void 0&&Re<ee&&xe.push({instanceLocation:s,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${Re} < ${ee}).`}),Ee!==void 0&&Re>Ee&&xe.push({instanceLocation:s,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${Re} > ${Ee}).`}),Qe!==void 0&&!new RegExp(Qe,"u").test(t)&&xe.push({instanceLocation:s,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),R!==void 0&&i7[R]&&!i7[R](t)&&xe.push({instanceLocation:s,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${R}".`})}return{valid:xe.length===0,errors:xe}}class eke{constructor(e,n="2019-09",r=!0){P(this,"schema");P(this,"draft");P(this,"shortCircuit");P(this,"lookup");this.schema=e,this.draft=n,this.shortCircuit=r,this.lookup=Gf(e)}validate(e){return dr(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,n){n&&(e={...e,$id:n}),Gf(e,this.lookup)}}var UQ={};At(UQ,{Validator:()=>eke,deepCompareStrict:()=>ep,toJsonSchema:()=>Oa,validatesOnlyStrings:()=>mw});function Oa(t,e){if(Er(t)){const n=OQ(t,!0);if(hc(n)){const r=mE(n,!0);return FB(r,e)}else return FB(t,e)}return ai(t)?E5e(t):t}function mw(t){if(!t||typeof t!="object"||Object.keys(t).length===0||Array.isArray(t))return!1;if("type"in t)return typeof t.type=="string"?t.type==="string":Array.isArray(t.type)?t.type.every(e=>e==="string"):!1;if("enum"in t)return Array.isArray(t.enum)&&t.enum.length>0&&t.enum.every(e=>typeof e=="string");if("const"in t)return typeof t.const=="string";if("allOf"in t&&Array.isArray(t.allOf))return t.allOf.some(e=>mw(e));if("anyOf"in t&&Array.isArray(t.anyOf)||"oneOf"in t&&Array.isArray(t.oneOf)){const e="anyOf"in t?t.anyOf:t.oneOf;return e.length>0&&e.every(n=>mw(n))}if("not"in t)return!1;if("$ref"in t&&typeof t.$ref=="string"){const e=t.$ref,n=Gf(t);return n[e]?mw(n[e]):!1}return!1}function bp(t){if(typeof t=="object"&&t!==null){const e={...t};"additionalProperties"in e&&delete e.additionalProperties,"$schema"in e&&delete e.$schema,"strict"in e&&delete e.strict;for(const n in e)n in e&&(Array.isArray(e[n])?e[n]=e[n].map(bp):typeof e[n]=="object"&&e[n]!==null&&(e[n]=bp(e[n])));return e}return t}function JI(t){const e=bp($d(t)?Oa(t):t),{$schema:n,...r}=e;return r}function tke(t){const e=bp(t),{$schema:n,...r}=e;return r}function sg(t,e,n=[]){if(t==null||typeof t!="object")return;const r=t;if(Array.isArray(r.enum)&&r.enum.some(i=>i==="")){const i=n.length?` at path "${n.join(".")}"`:"",a=e?` in tool "${e}"`:"";throw new Error(`Invalid enum: empty string not allowed${a}${i}. Gemini API rejects empty strings in enums.`)}if(r.type==="object"&&r.properties&&typeof r.properties=="object")for(const[i,a]of Object.entries(r.properties))sg(a,e,[...n,i]);r.items&&sg(r.items,e,[...n,"[]"]);for(const i of["anyOf","oneOf","allOf"]){const a=r[i];Array.isArray(a)&&a.forEach((s,o)=>sg(s,e,[...n,`${i}[${o}]`]))}r.additionalProperties&&typeof r.additionalProperties=="object"&&sg(r.additionalProperties,e,[...n,"additionalProperties"])}function Iu(t){return typeof t=="object"&&t!==null&&"type"in t&&typeof t.type=="string"&&"source_type"in t&&(t.source_type==="url"||t.source_type==="base64"||t.source_type==="text"||t.source_type==="id")}function rM(t){return Iu(t)&&t.source_type==="url"&&"url"in t&&typeof t.url=="string"}function iM(t){return Iu(t)&&t.source_type==="base64"&&"data"in t&&typeof t.data=="string"}function nke(t){return Iu(t)&&t.source_type==="text"&&"text"in t&&typeof t.text=="string"}function zQ(t){return Iu(t)&&t.source_type==="id"&&"id"in t&&typeof t.id=="string"}function VQ(t){if(Iu(t)){if(t.source_type==="url")return{type:"image_url",image_url:{url:t.url}};if(t.source_type==="base64"){if(!t.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${t.mime_type};base64,${t.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function rke(t){const e=t.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${t}" - does not match type/subtype format.`);const n=e[0].trim(),r=e[1].trim();if(n===""||r==="")throw new Error(`Invalid mime type: "${t}" - type or subtype is empty.`);const i={};for(const a of t.split(";").slice(1)){const s=a.split("=");if(s.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${t}".`);const o=s[0].trim(),l=s[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${t}".`);i[o]=l}return{type:n,subtype:r,parameters:i}}function Mg({dataUrl:t,asTypedArray:e=!1}){const n=t.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(n){r=n[1].toLowerCase();const i=e?Uint8Array.from(atob(n[2]),a=>a.charCodeAt(0)):n[2];return{mime_type:r,data:i}}}function WQ(t,e){if(t.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(t)}if(t.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(t)}if(t.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(t)}if(t.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(t)}throw new Error(`Unable to convert content block type '${t.type}' to provider-specific format: not recognized.`)}function HQ(t){return typeof t=="object"&&t!==null&&"type"in t&&"content"in t&&(typeof t.content=="string"||Array.isArray(t.content))}var ike=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const ake=wn(ike);var aM={exports:{}};const ske=/[\p{Lu}]/u,oke=/[\p{Ll}]/u,a7=/^[\p{Lu}](?![\p{Lu}])/gu,qQ=/([\p{Alpha}\p{N}_]|$)/u,GQ=/[_.\- ]+/,lke=new RegExp("^"+GQ.source),s7=new RegExp(GQ.source+qQ.source,"gu"),o7=new RegExp("\\d+"+qQ.source,"gu"),cke=(t,e,n)=>{let r=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){const o=t[s];r&&ske.test(o)?(t=t.slice(0,s)+"-"+t.slice(s),r=!1,a=i,i=!0,s++):i&&a&&oke.test(o)?(t=t.slice(0,s-1)+"-"+t.slice(s-1),a=i,i=!1,r=!0):(r=e(o)===o&&n(o)!==o,a=i,i=n(o)===o&&e(o)!==o)}return t},uke=(t,e)=>(a7.lastIndex=0,t.replace(a7,n=>e(n))),fke=(t,e)=>(s7.lastIndex=0,o7.lastIndex=0,t.replace(s7,(n,r)=>e(r)).replace(o7,n=>e(n))),KQ=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(a=>a.trim()).filter(a=>a.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(e.locale),r=e.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=cke(t,n,r)),t=t.replace(lke,""),e.preserveConsecutiveUppercase?t=uke(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),fke(t,r))};aM.exports=KQ;aM.exports.default=KQ;var dke=aM.exports;const hke=wn(dke);function pke(t,e){return(e==null?void 0:e[t])||ake(t)}function mke(t,e){return(e==null?void 0:e[t])||hke(t)}function YQ(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}const X5="__lc_escaped__";function gke(t){return"lc"in t||Object.keys(t).length===1&&X5 in t}function yke(t){return{[X5]:t}}function ZQ(t){return Object.keys(t).length===1&&X5 in t}function vke(t){return t!==null&&typeof t=="object"&&"lc_serializable"in t&&typeof t.toJSON=="function"}function wke(t){var n;let e;return t!==null&&typeof t=="object"?"lc_id"in t&&Array.isArray(t.lc_id)?e=t.lc_id:e=[((n=t.constructor)==null?void 0:n.name)??"Object"]:e=[typeof t],{lc:1,type:"not_implemented",id:e}}function QI(t,e=new WeakSet){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){if(e.has(t))return wke(t);if(vke(t))return t;e.add(t);const n=t;if(gke(n))return e.delete(t),yke(n);const r={};for(const[i,a]of Object.entries(n))r[i]=QI(a,e);return e.delete(t),r}return Array.isArray(t)?t.map(n=>QI(n,e)):t}function eR(t){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){const e=t;if(ZQ(e))return e[X5];const n={};for(const[r,i]of Object.entries(e))n[r]=eR(i);return n}return Array.isArray(t)?t.map(e=>eR(e)):t}var XQ={};At(XQ,{Serializable:()=>ko,get_lc_unique_name:()=>J5});function l7(t){return Array.isArray(t)?[...t]:{...t}}function bke(t,e){const n=l7(t);for(const[r,i]of Object.entries(e)){const[a,...s]=r.split(".").reverse();let o=n;for(const l of s.reverse()){if(o[l]===void 0)break;o[l]=l7(o[l]),o=o[l]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return n}function J5(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var ko=class JQ{constructor(e,...n){P(this,"lc_serializable",!1);P(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(r)})):this.lc_kwargs=e??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,J5(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof JQ||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((l,c)=>(l[c]=c in this?this[c]:this.lc_kwargs[c],l),{});for(let l=Object.getPrototypeOf(this);l;l=Object.getPrototypeOf(l))Object.assign(e,Reflect.get(l,"lc_aliases",this)),Object.assign(n,Reflect.get(l,"lc_secrets",this)),Object.assign(r,Reflect.get(l,"lc_attributes",this));Object.keys(n).forEach(l=>{let c=this,u=r;const[f,...d]=l.split(".").reverse();for(const h of d.reverse()){if(!(h in c)||c[h]===void 0)return;(!(h in u)||u[h]===void 0)&&(typeof c[h]=="object"&&c[h]!=null?u[h]={}:Array.isArray(c[h])&&(u[h]=[])),c=c[h],u=u[h]}f in c&&c[f]!==void 0&&(u[f]=u[f]||c[f])});const i={},a=new WeakSet;a.add(this);for(const[l,c]of Object.entries(r))i[l]=QI(c,a);const s=Object.keys(n).length?bke(i,n):i,o=YQ(s,pke,e);return{lc:1,type:"constructor",id:this.lc_id,kwargs:o}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function ut(t,e){return Ct(t)&&t.type===e}function Ct(t){return typeof t=="object"&&t!==null}function Os(t){return Array.isArray(t)}function Be(t){return typeof t=="string"}function rl(t){return typeof t=="number"}function sM(t){return t instanceof Uint8Array}function c7(t){try{return JSON.parse(t)}catch{return}}const od=t=>t();function _ke(t){if(t.type==="char_location"&&Be(t.document_title)&&rl(t.start_char_index)&&rl(t.end_char_index)&&Be(t.cited_text)){const{document_title:e,start_char_index:n,end_char_index:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"char",title:e??void 0,startIndex:n,endIndex:r,citedText:i}}if(t.type==="page_location"&&Be(t.document_title)&&rl(t.start_page_number)&&rl(t.end_page_number)&&Be(t.cited_text)){const{document_title:e,start_page_number:n,end_page_number:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"page",title:e??void 0,startIndex:n,endIndex:r,citedText:i}}if(t.type==="content_block_location"&&Be(t.document_title)&&rl(t.start_block_index)&&rl(t.end_block_index)&&Be(t.cited_text)){const{document_title:e,start_block_index:n,end_block_index:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"block",title:e??void 0,startIndex:n,endIndex:r,citedText:i}}if(t.type==="web_search_result_location"&&Be(t.url)&&Be(t.title)&&Be(t.encrypted_index)&&Be(t.cited_text)){const{url:e,title:n,encrypted_index:r,cited_text:i,...a}=t;return{...a,type:"citation",source:"url",url:e,title:n,startIndex:Number(r),endIndex:Number(r),citedText:i}}if(t.type==="search_result_location"&&Be(t.source)&&Be(t.title)&&rl(t.start_block_index)&&rl(t.end_block_index)&&Be(t.cited_text)){const{source:e,title:n,start_block_index:r,end_block_index:i,cited_text:a,...s}=t;return{...s,type:"citation",source:"search",url:e,title:n??void 0,startIndex:r,endIndex:i,citedText:a}}}function QQ(t){if(ut(t,"document")&&Ct(t.source)&&"type"in t.source){if(t.source.type==="base64"&&Be(t.source.media_type)&&Be(t.source.data))return{type:"file",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&Be(t.source.url))return{type:"file",url:t.source.url};if(t.source.type==="file"&&Be(t.source.file_id))return{type:"file",fileId:t.source.file_id};if(t.source.type==="text"&&Be(t.source.data))return{type:"file",mimeType:String(t.source.media_type??"text/plain"),data:t.source.data}}else if(ut(t,"image")&&Ct(t.source)&&"type"in t.source){if(t.source.type==="base64"&&Be(t.source.media_type)&&Be(t.source.data))return{type:"image",mimeType:t.source.media_type,data:t.source.data};if(t.source.type==="url"&&Be(t.source.url))return{type:"image",url:t.source.url};if(t.source.type==="file"&&Be(t.source.file_id))return{type:"image",fileId:t.source.file_id}}}function xke(t){function*e(){for(const n of t){const r=QQ(n);r?yield r:yield n}}return Array.from(e())}function u7(t){function*e(){var r;const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const i of n){if(ut(i,"text")&&Be(i.text)){const{text:a,citations:s,...o}=i;if(Os(s)&&s.length){const l=s.reduce((c,u)=>{const f=_ke(u);return f?[...c,f]:c},[]);yield{...o,type:"text",text:a,annotations:l};continue}else{yield{...o,type:"text",text:a};continue}}else if(ut(i,"thinking")&&Be(i.thinking)){const{thinking:a,signature:s,...o}=i;yield{...o,type:"reasoning",reasoning:a,signature:s};continue}else if(ut(i,"redacted_thinking")){yield{type:"non_standard",value:i};continue}else if(ut(i,"tool_use")&&Be(i.name)&&Be(i.id)){yield{type:"tool_call",id:i.id,name:i.name,args:i.input};continue}else if(ut(i,"input_json_delta")){if(Eke(t)&&((r=t.tool_call_chunks)!=null&&r.length)){const a=t.tool_call_chunks[0];yield{type:"tool_call_chunk",id:a.id,name:a.name,args:a.args,index:a.index};continue}}else if(ut(i,"server_tool_use")&&Be(i.name)&&Be(i.id)){const{name:a,id:s}=i;if(a==="web_search"){const o=od(()=>{if(typeof i.input=="string")return i.input;if(Ct(i.input)&&Be(i.input.query))return i.input.query;if(Be(i.partial_json)){const l=c7(i.partial_json);if(l!=null&&l.query)return l.query}return""});yield{id:s,type:"server_tool_call",name:"web_search",args:{query:o}};continue}else if(i.name==="code_execution"){const o=od(()=>{if(typeof i.input=="string")return i.input;if(Ct(i.input)&&Be(i.input.code))return i.input.code;if(Be(i.partial_json)){const l=c7(i.partial_json);if(l!=null&&l.code)return l.code}return""});yield{id:s,type:"server_tool_call",name:"code_execution",args:{code:o}};continue}}else if(ut(i,"web_search_tool_result")&&Be(i.tool_use_id)&&Os(i.content)){const{content:a,tool_use_id:s}=i,o=a.reduce((l,c)=>ut(c,"web_search_result")?[...l,c.url]:l,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:s,status:"success",output:{urls:o}};continue}else if(ut(i,"code_execution_tool_result")&&Be(i.tool_use_id)&&Ct(i.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(ut(i,"mcp_tool_use")){yield{id:i.id,type:"server_tool_call",name:"mcp_tool_use",args:i.input};continue}else if(ut(i,"mcp_tool_result")&&Be(i.tool_use_id)&&Ct(i.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(ut(i,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:i.input};continue}else if(ut(i,"search_result")){yield{id:i.id,type:"non_standard",value:i};continue}else if(ut(i,"tool_result")){yield{id:i.id,type:"non_standard",value:i};continue}else{const a=QQ(i);if(a){yield a;continue}}yield{type:"non_standard",value:i}}}return Array.from(e())}const Ske={translateContent:u7,translateContentChunk:u7};function Eke(t){return typeof(t==null?void 0:t._getType)=="function"&&typeof t.concat=="function"&&t._getType()==="ai"}function Ake(t){return rM(t)?{type:t.type,mimeType:t.mime_type,url:t.url,metadata:t.metadata}:iM(t)?{type:t.type,mimeType:t.mime_type??"application/octet-stream",data:t.data,metadata:t.metadata}:zQ(t)?{type:t.type,mimeType:t.mime_type,fileId:t.id,metadata:t.metadata}:t}function kke(t){return t.map(Ake)}function Oke(t){return!!(ut(t,"image_url")&&Ct(t.image_url)||ut(t,"input_audio")&&Ct(t.input_audio)||ut(t,"file")&&Ct(t.file))}function Tke(t){if(ut(t,"image_url")&&Ct(t.image_url)&&Be(t.image_url.url)){const e=Mg({dataUrl:t.image_url.url});return e?{type:"image",mimeType:e.mime_type,data:e.data}:{type:"image",url:t.image_url.url}}else{if(ut(t,"input_audio")&&Ct(t.input_audio)&&Be(t.input_audio.data)&&Be(t.input_audio.format))return{type:"audio",data:t.input_audio.data,mimeType:`audio/${t.input_audio.format}`};if(ut(t,"file")&&Ct(t.file)&&Be(t.file.data)){const e=Mg({dataUrl:t.file.data});if(e)return{type:"file",data:e.data,mimeType:e.mime_type};if(Be(t.file.file_id))return{type:"file",fileId:t.file.file_id}}}return t}function Cke(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...oM(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function Pke(t){const e=[];typeof t.content=="string"?t.content.length>0&&e.push({type:"text",text:t.content}):e.push(...oM(t.content));for(const n of t.tool_calls??[])e.push({type:"tool_call",id:n.id,name:n.name,args:n.args});return e}function oM(t){const e=[];for(const n of t)Oke(n)?e.push(Tke(n)):e.push(n);return e}function Nke(t){if(t.type==="url_citation"){const{url:e,title:n,start_index:r,end_index:i}=t;return{type:"citation",url:e,title:n,startIndex:r,endIndex:i}}if(t.type==="file_citation"){const{file_id:e,filename:n,index:r}=t;return{type:"citation",title:n,startIndex:r,endIndex:r,fileId:e}}return t}function eee(t){function*e(){var r;Ct((r=t.additional_kwargs)==null?void 0:r.reasoning)&&Os(t.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:t.additional_kwargs.reasoning.summary.reduce((a,s)=>Ct(s)&&Be(s.text)?`${a}${s.text}`:a,"")});const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const i of n)if(ut(i,"text")){const{text:a,annotations:s,...o}=i;Array.isArray(s)?yield{...o,type:"text",text:String(a),annotations:s.map(Nke)}:yield{...o,type:"text",text:String(a)}}for(const i of t.tool_calls??[])yield{type:"tool_call",id:i.id,name:i.name,args:i.args};if(Ct(t.additional_kwargs)&&Os(t.additional_kwargs.tool_outputs))for(const i of t.additional_kwargs.tool_outputs){if(ut(i,"web_search_call")){const a={};if(Ct(i.action)&&Be(i.action.query)&&(a.query=i.action.query),yield{id:i.id,type:"server_tool_call",name:"web_search",args:a},i.status==="completed"||i.status==="failed"){const s={};Ct(i.action)&&(s.action=i.action),yield{type:"server_tool_call_result",toolCallId:Be(i.id)?i.id:"",status:i.status==="completed"?"success":"error",output:s}}continue}else if(ut(i,"file_search_call")){yield{id:i.id,type:"server_tool_call",name:"file_search",args:{queries:Os(i.queries)?i.queries:[]}},(i.status==="completed"||i.status==="failed")&&(yield{type:"server_tool_call_result",toolCallId:Be(i.id)?i.id:"",status:i.status==="completed"?"success":"error",output:Os(i.results)?{results:i.results}:{}});continue}else if(ut(i,"computer_call")){yield{type:"non_standard",value:i};continue}else if(ut(i,"code_interpreter_call")){if(Be(i.code)&&(yield{id:i.id,type:"server_tool_call",name:"code_interpreter",args:{code:i.code}}),Os(i.outputs)){const a=od(()=>{if(i.status!=="in_progress"){if(i.status==="completed")return 0;if(i.status==="incomplete")return 127;if(i.status!=="interpreting"&&i.status==="failed")return 1}});for(const s of i.outputs)if(ut(s,"logs")){yield{type:"server_tool_call_result",toolCallId:i.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:a??0,stderr:[0,void 0].includes(a)?void 0:String(s.logs),stdout:[0,void 0].includes(a)?String(s.logs):void 0}};continue}}continue}else if(ut(i,"mcp_call")){yield{id:i.id,type:"server_tool_call",name:"mcp_call",args:i.input};continue}else if(ut(i,"mcp_list_tools")){yield{id:i.id,type:"server_tool_call",name:"mcp_list_tools",args:i.input};continue}else if(ut(i,"mcp_approval_request")){yield{type:"non_standard",value:i};continue}else if(ut(i,"image_generation_call")){Be(i.result)&&(yield{type:"image",mimeType:"image/png",data:i.result,id:Be(i.id)?i.id:void 0,metadata:{status:Be(i.status)?i.status:void 0}}),yield{type:"non_standard",value:i};continue}Ct(i)&&(yield{type:"non_standard",value:i})}}return Array.from(e())}function Ike(t){function*e(){yield*eee(t);for(const n of t.tool_call_chunks??[])yield{type:"tool_call_chunk",id:n.id,name:n.name,args:n.args}}return Array.from(e())}const Rke={translateContent:t=>typeof t.content=="string"?Cke(t):eee(t),translateContentChunk:t=>typeof t.content=="string"?Pke(t):Ike(t)};function jke(t,e="pretty"){return e==="pretty"?$ke(t):JSON.stringify(t)}function $ke(t){const e=[],n=` ${t.type.charAt(0).toUpperCase()+t.type.slice(1)} Message `,r=Math.floor((80-n.length)/2),i="=".repeat(r),a=n.length%2===0?i:`${i}=`;if(e.push(`${i}${n}${a}`),t.type==="ai"){const s=t;if(s.tool_calls&&s.tool_calls.length>0){e.push("Tool Calls:");for(const o of s.tool_calls){e.push(`  ${o.name} (${o.id})`),e.push(` Call ID: ${o.id}`),e.push("  Args:");for(const[l,c]of Object.entries(o.args))e.push(`    ${l}: ${typeof c=="object"?JSON.stringify(c):c}`)}}}if(t.type==="tool"){const s=t;s.name&&e.push(`Name: ${s.name}`)}return typeof t.content=="string"&&t.content.trim()&&(e.length>1&&e.push(""),e.push(t.content)),e.join(`
`)}const uC=Symbol.for("langchain.message");function Ru(t,e){return typeof t=="string"?t===""?e:typeof e=="string"?t+e:Array.isArray(e)&&e.length===0?t:Array.isArray(e)&&e.some(n=>Iu(n))?[{type:"text",source_type:"text",text:t},...e]:[{type:"text",text:t},...e]:Array.isArray(e)?z1(t,e)??[...t,...e]:e===""?t:Array.isArray(t)&&t.some(n=>Iu(n))?[...t,{type:"file",source_type:"text",text:e}]:[...t,{type:"text",text:e}]}function tee(t,e){return t==="error"||e==="error"?"error":"success"}function Mke(t,e){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(s=>n(s,i+1));const a={};for(const s of Object.keys(r))a[s]=n(r[s],i+1);return a}return JSON.stringify(n(t,0),null,2)}var tK,_o=class extends ko{constructor(e){const n=typeof e=="string"||Array.isArray(e)?{content:e}:e;n.additional_kwargs||(n.additional_kwargs={}),n.response_metadata||(n.response_metadata={});super(n);P(this,"lc_namespace",["langchain_core","messages"]);P(this,"lc_serializable",!0);P(this,tK,!0);P(this,"id");P(this,"name");P(this,"content");P(this,"additional_kwargs");P(this,"response_metadata");this.name=n.name,n.content===void 0&&n.contentBlocks!==void 0?(this.content=n.contentBlocks,this.response_metadata={output_version:"v1",...n.response_metadata}):n.content!==void 0?(this.content=n.content??[],this.response_metadata=n.response_metadata):(this.content=[],this.response_metadata=n.response_metadata),this.additional_kwargs=n.additional_kwargs,this.id=n.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}get contentBlocks(){const e=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[kke,oM,xke].reduce((i,a)=>a(i),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return typeof e=="object"&&e!==null&&uC in e&&e[uC]===!0&&HQ(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[(tK=uC,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=Mke(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}toFormattedString(e="pretty"){return jke(this,e)}};function Lke(t){return Array.isArray(t)&&t.every(e=>typeof e.index=="number")}const nee=["index","created","timestamp"];function ya(t,e,n){const r=(n==null?void 0:n.ignoreKeys)??nee;if(t==null&&e==null)return;if(t==null||e==null)return t??e;const i={...t};for(const[a,s]of Object.entries(e))if(i[a]==null)i[a]=s;else{if(s==null)continue;if(typeof i[a]!=typeof s||Array.isArray(i[a])!==Array.isArray(s))throw new Error(`field[${a}] already exists in the message chunk, but with a different type.`);if(typeof i[a]=="string"){if(a==="type")continue;if(["id","name","output_version","model_provider"].includes(a))s&&(i[a]=s);else{if(r.includes(a))continue;i[a]+=s}}else if(typeof i[a]=="number"){if(r.includes(a))continue;i[a]=i[a]+s}else if(typeof i[a]=="object"&&!Array.isArray(i[a]))i[a]=ya(i[a],s,n);else if(Array.isArray(i[a]))i[a]=z1(i[a],s,n);else{if(i[a]===s)continue;console.warn(`field[${a}] already exists in this message chunk and value has unsupported type.`)}}return i}function z1(t,e,n){if(!(t==null&&e==null)){if(t==null||e==null)return t||e;{const r=[...t];for(const i of e)if(typeof i=="object"&&i!==null&&"index"in i&&typeof i.index=="number"){const a=r.findIndex(s=>{const o=typeof s=="object",l="index"in s&&s.index===i.index,c="id"in s&&"id"in i&&(s==null?void 0:s.id)===(i==null?void 0:i.id),u=!("id"in s)||!(s!=null&&s.id)||!("id"in i)||!(i!=null&&i.id);return o&&l&&(c||u)});a!==-1&&typeof r[a]=="object"&&r[a]!==null?r[a]=ya(r[a],i,n):r.push(i)}else{if(typeof i=="object"&&i!==null&&"text"in i&&i.text==="")continue;r.push(i)}return r}}}function ree(t,e,n){if(!(t==null&&e==null)){if(t==null||e==null)return t??e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return z1(t,e,n);if(typeof t=="object"&&typeof e=="object")return ya(t,e,n);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}}var Ld=class iee extends _o{static isInstance(e){if(!super.isInstance(e))return!1;let n=Object.getPrototypeOf(e);for(;n!==null;){if(n===iee.prototype)return!0;n=Object.getPrototypeOf(n)}return!1}};function aee(t){return typeof t.role=="string"}function Jr(t){return typeof(t==null?void 0:t._getType)=="function"}function gb(t){return Ld.isInstance(t)}function see(t,e){return ya(t,e)??{}}function oee(t,e){const n={};return((t==null?void 0:t.audio)!==void 0||(e==null?void 0:e.audio)!==void 0)&&(n.audio=((t==null?void 0:t.audio)??0)+((e==null?void 0:e.audio)??0)),((t==null?void 0:t.image)!==void 0||(e==null?void 0:e.image)!==void 0)&&(n.image=((t==null?void 0:t.image)??0)+((e==null?void 0:e.image)??0)),((t==null?void 0:t.video)!==void 0||(e==null?void 0:e.video)!==void 0)&&(n.video=((t==null?void 0:t.video)??0)+((e==null?void 0:e.video)??0)),((t==null?void 0:t.document)!==void 0||(e==null?void 0:e.document)!==void 0)&&(n.document=((t==null?void 0:t.document)??0)+((e==null?void 0:e.document)??0)),((t==null?void 0:t.text)!==void 0||(e==null?void 0:e.text)!==void 0)&&(n.text=((t==null?void 0:t.text)??0)+((e==null?void 0:e.text)??0)),n}function Dke(t,e){const n={...oee(t,e)};return((t==null?void 0:t.cache_read)!==void 0||(e==null?void 0:e.cache_read)!==void 0)&&(n.cache_read=((t==null?void 0:t.cache_read)??0)+((e==null?void 0:e.cache_read)??0)),((t==null?void 0:t.cache_creation)!==void 0||(e==null?void 0:e.cache_creation)!==void 0)&&(n.cache_creation=((t==null?void 0:t.cache_creation)??0)+((e==null?void 0:e.cache_creation)??0)),n}function Fke(t,e){const n={...oee(t,e)};return((t==null?void 0:t.reasoning)!==void 0||(e==null?void 0:e.reasoning)!==void 0)&&(n.reasoning=((t==null?void 0:t.reasoning)??0)+((e==null?void 0:e.reasoning)??0)),n}function lM(t,e){return{input_tokens:((t==null?void 0:t.input_tokens)??0)+((e==null?void 0:e.input_tokens)??0),output_tokens:((t==null?void 0:t.output_tokens)??0)+((e==null?void 0:e.output_tokens)??0),total_tokens:((t==null?void 0:t.total_tokens)??0)+((e==null?void 0:e.total_tokens)??0),input_token_details:Dke(t==null?void 0:t.input_token_details,e==null?void 0:e.input_token_details),output_token_details:Fke(t==null?void 0:t.output_token_details,e==null?void 0:e.output_token_details)}}var lee={};At(lee,{ToolMessage:()=>_c,ToolMessageChunk:()=>Q5,defaultToolCallParser:()=>uM,isDirectToolOutput:()=>cM,isToolMessage:()=>ek,isToolMessageChunk:()=>cee});function cM(t){return t!=null&&typeof t=="object"&&"lc_direct_tool_output"in t&&t.lc_direct_tool_output===!0}var _c=class extends _o{constructor(e,n,r){const i=typeof e=="string"||Array.isArray(e)?{content:e,name:r,tool_call_id:n}:e;super(i);P(this,"lc_direct_tool_output",!0);P(this,"type","tool");P(this,"status");P(this,"tool_call_id");P(this,"metadata");P(this,"artifact");this.tool_call_id=i.tool_call_id,this.artifact=i.artifact,this.status=i.status,this.metadata=i.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(e){return super.isInstance(e)&&e.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},Q5=class extends Ld{constructor(e){super(e);P(this,"type","tool");P(this,"tool_call_id");P(this,"status");P(this,"artifact");this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){const n=this.constructor;return new n({content:Ru(this.content,e.content),additional_kwargs:ya(this.additional_kwargs,e.additional_kwargs),response_metadata:ya(this.response_metadata,e.response_metadata),artifact:ree(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:tee(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function uM(t){const e=[],n=[];for(const r of t)if(r.function){const i=r.function.name;try{const a=JSON.parse(r.function.arguments);e.push({name:i||"",args:a||{},id:r.id})}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}function ek(t){return typeof t=="object"&&t!==null&&"getType"in t&&typeof t.getType=="function"&&t.getType()==="tool"}function cee(t){return t._getType()==="tool"}var Dd=class uee extends _o{constructor(n,r){(typeof n=="string"||Array.isArray(n))&&(n={content:n,role:r});super(n);P(this,"type","generic");P(this,"role");this.role=n.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return uee}static isInstance(n){return super.isInstance(n)&&n.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},tk=class extends Ld{constructor(e,n){(typeof e=="string"||Array.isArray(e))&&(e={content:e,role:n});super(e);P(this,"type","generic");P(this,"role");this.role=e.role}static lc_name(){return"ChatMessageChunk"}concat(e){const n=this.constructor;return new n({content:Ru(this.content,e.content),additional_kwargs:ya(this.additional_kwargs,e.additional_kwargs),response_metadata:ya(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function Bke(t){return t._getType()==="generic"}function Uke(t){return t._getType()==="generic"}var nk=class extends _o{constructor(e){super(e);P(this,"type","function");P(this,"name");this.name=e.name}static lc_name(){return"FunctionMessage"}},rk=class extends Ld{constructor(){super(...arguments);P(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(e){const n=this.constructor;return new n({content:Ru(this.content,e.content),additional_kwargs:ya(this.additional_kwargs,e.additional_kwargs),response_metadata:ya(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}};function zke(t){return t._getType()==="function"}function Vke(t){return t._getType()==="function"}var Ma=class extends _o{constructor(e){super(e);P(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(e){return super.isInstance(e)&&e.type==="human"}},ik=class extends Ld{constructor(e){super(e);P(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(e){const n=this.constructor;return new n({content:Ru(this.content,e.content),additional_kwargs:ya(this.additional_kwargs,e.additional_kwargs),response_metadata:ya(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="human"}};function Wke(t){return t.getType()==="human"}function Hke(t){return t.getType()==="human"}var tp=class extends _o{constructor(e){super({...e,content:[]});P(this,"type","remove");P(this,"id");this.id=e.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(e){return super.isInstance(e)&&e.type==="remove"}},Al=class Z2 extends _o{constructor(n){super(n);P(this,"type","system")}static lc_name(){return"SystemMessage"}concat(n){if(typeof n=="string")return new Z2({...this,content:Ru(this.content,n)});if(Z2.isInstance(n))return new Z2({...this,additional_kwargs:{...this.additional_kwargs,...n.additional_kwargs},response_metadata:{...this.response_metadata,...n.response_metadata},content:Ru(this.content,n.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(n){return super.isInstance(n)&&n.type==="system"}},fy=class extends Ld{constructor(e){super(e);P(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(e){const n=this.constructor;return new n({content:Ru(this.content,e.content),additional_kwargs:ya(this.additional_kwargs,e.additional_kwargs),response_metadata:ya(this.response_metadata,e.response_metadata),id:this.id??e.id})}static isInstance(e){return super.isInstance(e)&&e.type==="system"}};function qke(t){return t._getType()==="system"}function Gke(t){return t._getType()==="system"}var fee={};At(fee,{ModelAbortError:()=>tR,addLangChainErrorFields:()=>V1});function V1(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${e}/
`,t}var tR=class dee extends Error{constructor(n,r){super(n);P(this,"name","ModelAbortError");P(this,"lc_error_code","MODEL_ABORTED");P(this,"partialOutput");this.partialOutput=r,Error.captureStackTrace&&Error.captureStackTrace(this,dee)}static isInstance(n){return typeof n=="object"&&n!==null&&"name"in n&&n.name==="ModelAbortError"&&"lc_error_code"in n&&n.lc_error_code==="MODEL_ABORTED"}};function gw(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}function Kke(t){return!!(t&&typeof t=="object"&&"toolCall"in t&&t.toolCall!=null&&typeof t.toolCall=="object"&&"id"in t.toolCall&&typeof t.toolCall.id=="string")}var SE=class extends Error{constructor(e,n){super(e);P(this,"output");this.output=n}};function nR(t,e=dy){t=t.trim();const n=t.indexOf("```");if(n===-1)return e(t);let r=t.substring(n+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const i=r.indexOf("```");let a=r;return i!==-1&&(a=r.substring(0,i)),e(a.trim())}function Yke(t){try{return JSON.parse(t)}catch{}const e=t.trim();if(e.length===0)throw new Error("Unexpected end of JSON input");let n=0;function r(){for(;n<e.length&&/\s/.test(e[n]);)n+=1}function i(){if(e[n]!=='"')throw new Error(`Expected '"' at position ${n}, got '${e[n]}'`);n+=1;let u="",f=!1;for(;n<e.length;){const d=e[n];if(f){if(d==="n")u+=`
`;else if(d==="t")u+="	";else if(d==="r")u+="\r";else if(d==="\\")u+="\\";else if(d==='"')u+='"';else if(d==="b")u+="\b";else if(d==="f")u+="\f";else if(d==="/")u+="/";else if(d==="u"){const h=e.substring(n+1,n+5);if(/^[0-9A-Fa-f]{0,4}$/.test(h))h.length===4?u+=String.fromCharCode(Number.parseInt(h,16)):u+=`u${h}`,n+=h.length;else throw new Error(`Invalid unicode escape sequence '\\u${h}' at position ${n}`)}else throw new Error(`Invalid escape sequence '\\${d}' at position ${n}`);f=!1}else if(d==="\\")f=!0;else{if(d==='"')return n+=1,u;u+=d}n+=1}return f&&(u+="\\"),u}function a(){const u=n;let f="";if(e[n]==="-"&&(f+="-",n+=1),n<e.length&&e[n]==="0"&&(f+="0",n+=1,e[n]>="0"&&e[n]<="9"))throw new Error(`Invalid number at position ${u}`);if(n<e.length&&e[n]>="1"&&e[n]<="9")for(;n<e.length&&e[n]>="0"&&e[n]<="9";)f+=e[n],n+=1;if(n<e.length&&e[n]===".")for(f+=".",n+=1;n<e.length&&e[n]>="0"&&e[n]<="9";)f+=e[n],n+=1;if(n<e.length&&(e[n]==="e"||e[n]==="E"))for(f+=e[n],n+=1,n<e.length&&(e[n]==="+"||e[n]==="-")&&(f+=e[n],n+=1);n<e.length&&e[n]>="0"&&e[n]<="9";)f+=e[n],n+=1;if(f==="-")return-0;const d=Number.parseFloat(f);if(Number.isNaN(d))throw n=u,new Error(`Invalid number '${f}' at position ${u}`);return d}function s(){if(r(),n>=e.length)throw new Error(`Unexpected end of input at position ${n}`);const u=e[n];if(u==="{")return l();if(u==="[")return o();if(u==='"')return i();if("null".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),null;if("true".startsWith(e.substring(n,n+4)))return n+=Math.min(4,e.length-n),!0;if("false".startsWith(e.substring(n,n+5)))return n+=Math.min(5,e.length-n),!1;if(u==="-"||u>="0"&&u<="9")return a();throw new Error(`Unexpected character '${u}' at position ${n}`)}function o(){if(e[n]!=="[")throw new Error(`Expected '[' at position ${n}, got '${e[n]}'`);const u=[];if(n+=1,r(),n>=e.length)return u;if(e[n]==="]")return n+=1,u;for(;n<e.length;){if(r(),n>=e.length||(u.push(s()),r(),n>=e.length))return u;if(e[n]==="]")return n+=1,u;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or ']' at position ${n}, got '${e[n]}'`)}return u}function l(){if(e[n]!=="{")throw new Error(`Expected '{' at position ${n}, got '${e[n]}'`);const u={};if(n+=1,r(),n>=e.length)return u;if(e[n]==="}")return n+=1,u;for(;n<e.length;){if(r(),n>=e.length)return u;const f=i();if(r(),n>=e.length)return u;if(e[n]!==":")throw new Error(`Expected ':' at position ${n}, got '${e[n]}'`);if(n+=1,r(),n>=e.length||(u[f]=s(),r(),n>=e.length))return u;if(e[n]==="}")return n+=1,u;if(e[n]===","){n+=1;continue}throw new Error(`Expected ',' or '}' at position ${n}, got '${e[n]}'`)}return u}const c=s();if(r(),n<e.length)throw new Error(`Unexpected character '${e[n]}' at position ${n}`);return c}function dy(t){try{return typeof t>"u"?null:Yke(t)}catch{return null}}function fM(t){switch(t){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function Zke(t){if(Ct(t.document)&&Ct(t.document.source)){const e=Ct(t.document)&&Be(t.document.format)?t.document.format:"",n=fM(e);if(Ct(t.document.source)){if(Ct(t.document.source.s3Location)&&Be(t.document.source.s3Location.uri))return{type:"file",mimeType:n,fileId:t.document.source.s3Location.uri};if(sM(t.document.source.bytes))return{type:"file",mimeType:n,data:t.document.source.bytes};if(Be(t.document.source.text))return{type:"file",mimeType:n,data:Buffer.from(t.document.source.text).toString("base64")};if(Os(t.document.source.content)){const r=t.document.source.content.reduce((i,a)=>Ct(a)&&Be(a.text)?i+a.text:i,"");return{type:"file",mimeType:n,data:r}}}}return{type:"non_standard",value:t}}function Xke(t){if(ut(t,"image")&&Ct(t.image)){const e=Ct(t.image)&&Be(t.image.format)?t.image.format:"",n=fM(e);if(Ct(t.image.source)){if(Ct(t.image.source.s3Location)&&Be(t.image.source.s3Location.uri))return{type:"image",mimeType:n,fileId:t.image.source.s3Location.uri};if(sM(t.image.source.bytes))return{type:"image",mimeType:n,data:t.image.source.bytes}}}return{type:"non_standard",value:t}}function Jke(t){if(ut(t,"video")&&Ct(t.video)){const e=Ct(t.video)&&Be(t.video.format)?t.video.format:"",n=fM(e);if(Ct(t.video.source)){if(Ct(t.video.source.s3Location)&&Be(t.video.source.s3Location.uri))return{type:"video",mimeType:n,fileId:t.video.source.s3Location.uri};if(sM(t.video.source.bytes))return{type:"video",mimeType:n,data:t.video.source.bytes}}}return{type:"non_standard",value:t}}function f7(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(ut(r,"cache_point")){yield{type:"non_standard",value:r};continue}else if(ut(r,"citations_content")&&Ct(r.citationsContent)){const i=Os(r.citationsContent.content)?r.citationsContent.content.reduce((s,o)=>Ct(o)&&Be(o.text)?s+o.text:s,""):"",a=Os(r.citationsContent.citations)?r.citationsContent.citations.reduce((s,o)=>{if(Ct(o)){const l=Os(o.sourceContent)?o.sourceContent.reduce((u,f)=>Ct(f)&&Be(f.text)?u+f.text:u,""):"",c=od(()=>{if(Ct(o.location)){const u=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(Ct(u))return{source:rl(u.documentIndex)?u.documentIndex.toString():void 0,startIndex:rl(u.start)?u.start:void 0,endIndex:rl(u.end)?u.end:void 0}}return{}});s.push({type:"citation",citedText:l,...c})}return s},[]):[];yield{type:"text",text:i,annotations:a};continue}else if(ut(r,"document")&&Ct(r.document)){yield Zke(r);continue}else if(ut(r,"guard_content")){yield{type:"non_standard",value:r};continue}else if(ut(r,"image")&&Ct(r.image)){yield Xke(r);continue}else if(ut(r,"reasoning_content")&&Be(r.reasoningText)){yield{type:"reasoning",reasoning:r.reasoningText};continue}else if(ut(r,"text")&&Be(r.text)){yield{type:"text",text:r.text};continue}else if(ut(r,"tool_result")){yield{type:"non_standard",value:r};continue}else{if(ut(r,"tool_call"))continue;if(ut(r,"video")&&Ct(r.video)){yield Jke(r);continue}}yield{type:"non_standard",value:r}}}return Array.from(e())}const Qke={translateContent:f7,translateContentChunk:f7};function d7(t){var r;const e=[],n=(r=t.additional_kwargs)==null?void 0:r.reasoning_content;if(Be(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const i of t.content)typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&Be(i.text)&&e.push({type:"text",text:i.text});for(const i of t.tool_calls??[])e.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return e}const eOe={translateContent:d7,translateContentChunk:d7};function h7(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(ut(r,"text")&&Be(r.text)){yield{type:"text",text:r.text};continue}else if(ut(r,"thinking")&&Be(r.thinking)){yield{type:"reasoning",reasoning:r.thinking,...r.signature?{signature:r.signature}:{}};continue}else if(ut(r,"inlineData")&&Ct(r.inlineData)&&Be(r.inlineData.mimeType)&&Be(r.inlineData.data)){yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data};continue}else if(ut(r,"functionCall")&&Ct(r.functionCall)&&Be(r.functionCall.name)&&Ct(r.functionCall.args)){yield{type:"tool_call",id:t.id,name:r.functionCall.name,args:r.functionCall.args};continue}else if(ut(r,"functionResponse")){yield{type:"non_standard",value:r};continue}else if(ut(r,"fileData")&&Ct(r.fileData)&&Be(r.fileData.mimeType)&&Be(r.fileData.fileUri)){yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri};continue}else if(ut(r,"executableCode")){yield{type:"non_standard",value:r};continue}else if(ut(r,"codeExecutionResult")){yield{type:"non_standard",value:r};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const tOe={translateContent:h7,translateContentChunk:h7};function p7(t){function*e(){const n=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content;for(const r of n){if(ut(r,"reasoning")&&Be(r.reasoning)){const i=od(()=>{var s;const a=n.indexOf(r);if(Os((s=t.additional_kwargs)==null?void 0:s.signatures)&&a>=0)return t.additional_kwargs.signatures.at(a)});Be(i)?yield{type:"reasoning",reasoning:r.reasoning,signature:i}:yield{type:"reasoning",reasoning:r.reasoning};continue}else if(ut(r,"thinking")&&Be(r.thinking)){yield{type:"reasoning",reasoning:r.thinking,...r.signature?{signature:r.signature}:{}};continue}else if(ut(r,"text")&&Be(r.text)){yield{type:"text",text:r.text};continue}else if(ut(r,"image_url")){if(Be(r.image_url))if(r.image_url.startsWith("data:")){const i=/^data:([^;]+);base64,(.+)$/,a=r.image_url.match(i);a?yield{type:"image",data:a[2],mimeType:a[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url};continue}else if(ut(r,"media")&&Be(r.mimeType)&&Be(r.data)){yield{type:"file",mimeType:r.mimeType,data:r.data};continue}yield{type:"non_standard",value:r}}}return Array.from(e())}const nOe={translateContent:p7,translateContentChunk:p7};function m7(t){var r;const e=[],n=(r=t.additional_kwargs)==null?void 0:r.reasoning;if(Be(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string"){let i=t.content;const a=i.match(/<think>([\s\S]*?)<\/think>/);if(a){const s=a[1].trim();s.length>0&&e.push({type:"reasoning",reasoning:s}),i=i.replace(/<think>[\s\S]*?<\/think>/,"").trim()}i.length>0&&e.push({type:"text",text:i})}else for(const i of t.content)if(typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&Be(i.text)){let a=i.text;const s=a.match(/<think>([\s\S]*?)<\/think>/);if(s){const o=s[1].trim();o.length>0&&e.push({type:"reasoning",reasoning:o}),a=a.replace(/<think>[\s\S]*?<\/think>/,"").trim()}a.length>0&&e.push({type:"text",text:a})}for(const i of t.tool_calls??[])e.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return e}const rOe={translateContent:m7,translateContentChunk:m7};function g7(t){var r;const e=[],n=(r=t.additional_kwargs)==null?void 0:r.reasoning_content;if(Be(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const i of t.content)typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&Be(i.text)&&e.push({type:"text",text:i.text});for(const i of t.tool_calls??[])e.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return e}const iOe={translateContent:g7,translateContentChunk:g7};function y7(t){var r,i;const e=[];if(Ct((r=t.additional_kwargs)==null?void 0:r.reasoning)){const a=t.additional_kwargs.reasoning;if(Os(a.summary)){const s=a.summary.reduce((o,l)=>Ct(l)&&Be(l.text)?`${o}${l.text}`:o,"");s.length>0&&e.push({type:"reasoning",reasoning:s})}}const n=(i=t.additional_kwargs)==null?void 0:i.reasoning_content;if(Be(n)&&n.length>0&&e.push({type:"reasoning",reasoning:n}),typeof t.content=="string")t.content.length>0&&e.push({type:"text",text:t.content});else for(const a of t.content)typeof a=="object"&&"type"in a&&a.type==="text"&&"text"in a&&Be(a.text)&&e.push({type:"text",text:a.text});for(const a of t.tool_calls??[])e.push({type:"tool_call",id:a.id,name:a.name,args:a.args});return e}const aOe={translateContent:y7,translateContentChunk:y7};function v7(t){function*e(){const n=od(()=>typeof t.content=="string"?t.additional_kwargs.originalTextContentBlock?[{...t.additional_kwargs.originalTextContentBlock,type:"text"}]:[{type:"text",text:t.content}]:t.content);for(const r of n){const i=od(()=>ut(r,"text")&&Be(r.text)?{type:"text",text:r.text}:ut(r,"inlineData")&&Ct(r.inlineData)&&Be(r.inlineData.mimeType)&&Be(r.inlineData.data)?{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data}:ut(r,"functionCall")&&Ct(r.functionCall)&&Be(r.functionCall.name)&&Ct(r.functionCall.args)?{type:"tool_call",id:t.id,name:r.functionCall.name,args:r.functionCall.args}:ut(r,"functionResponse")?{type:"non_standard",value:r}:ut(r,"fileData")&&Ct(r.fileData)&&Be(r.fileData.mimeType)&&Be(r.fileData.fileUri)?{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri}:ut(r,"executableCode")?{type:"non_standard",value:r}:ut(r,"codeExecutionResult")?{type:"non_standard",value:r}:{type:"non_standard",value:r}),a=od(()=>"thought"in r&&r.thought?{type:"reasoning",reasoning:i.type==="text"?i.text:"",reasoningContentBlock:i}:i),s={thought:r.thought,thoughtSignature:r.thoughtSignature,partMetadata:r.partMetadata,...a};for(const o in s)s[o]===void 0&&delete s[o];yield s}}return Array.from(e())}const sOe={translateContent:v7,translateContentChunk:v7};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",Ske],["bedrock-converse",Qke],["deepseek",eOe],["google",sOe],["google-genai",tOe],["google-vertexai",nOe],["groq",rOe],["ollama",iOe],["openai",Rke],["xai",aOe]]));function hee(t){return globalThis.lc_block_translators_registry.get(t)}var Ei=class extends _o{constructor(e){var r;let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{n=e;const i=(r=n.additional_kwargs)==null?void 0:r.tool_calls,a=n.tool_calls;i!=null&&i.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(i!=null&&a===void 0){const[s,o]=uM(i);n.tool_calls=s??[],n.invalid_tool_calls=o??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch{n.tool_calls=[],n.invalid_tool_calls=[]}if(n.response_metadata!==void 0&&"output_version"in n.response_metadata&&n.response_metadata.output_version==="v1"&&(n.contentBlocks=n.content,n.content=void 0),n.contentBlocks!==void 0){n.tool_calls&&n.contentBlocks.push(...n.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));const s=n.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>{var l;return!((l=n.tool_calls)!=null&&l.some(c=>c.id===o.id&&c.name===o.name))});s.length>0&&(n.tool_calls=s.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(n);P(this,"type","ai");P(this,"tool_calls",[]);P(this,"invalid_tool_calls",[]);P(this,"usage_metadata");typeof n!="string"&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=hee(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls){const n=this.tool_calls.filter(r=>!e.some(i=>i.id===r.id&&i.name===r.name));e.push(...n.map(r=>({type:"tool_call",id:r.id,name:r.name,args:r.args})))}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};function _p(t){return t._getType()==="ai"}function rR(t){return t._getType()==="ai"}var Oo=class extends Ld{constructor(e){let n;if(typeof e=="string"||Array.isArray(e))n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0||e.tool_call_chunks.length===0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=pee(e.tool_call_chunks??[]);n={...e,tool_call_chunks:r.tool_call_chunks,tool_calls:r.tool_calls,invalid_tool_calls:r.invalid_tool_calls,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n);P(this,"type","ai");P(this,"tool_calls",[]);P(this,"invalid_tool_calls",[]);P(this,"tool_call_chunks",[]);P(this,"usage_metadata");this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const n=hee(this.response_metadata.model_provider);if(n)return n.translateContent(this)}const e=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const n=this.content.filter(r=>r.type==="tool_call").map(r=>r.id);for(const r of this.tool_calls)r.id&&!n.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:Ru(this.content,e.content),additional_kwargs:ya(this.additional_kwargs,e.additional_kwargs),response_metadata:see(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const i=z1(this.tool_call_chunks,e.tool_call_chunks);i!==void 0&&i.length>0&&(n.tool_call_chunks=i)}(this.usage_metadata!==void 0||e.usage_metadata!==void 0)&&(n.usage_metadata=lM(this.usage_metadata,e.usage_metadata));const r=this.constructor;return new r(n)}static isInstance(e){return super.isInstance(e)&&e.type==="ai"}};const oOe=t=>t();function lOe(t){return gw(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function cOe(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function fC(t){let e,n;if(cOe(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",n=t.kwargs}else{const{type:r,...i}=t;e=r,n=i}if(e==="human"||e==="user")return new Ma(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=n;if(!Array.isArray(r))return new Ei(n);const a=r.map(lOe);return new Ei({...i,tool_calls:a})}else{if(e==="system")return new Al(n);if(e==="developer")return new Al({...n,additional_kwargs:{...n.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in n)return new _c({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});if(e==="remove"&&"id"in n&&typeof n.id=="string")return new tp({...n,id:n.id});throw V1(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function pc(t){if(typeof t=="string")return new Ma(t);if(Jr(t))return t;if(Array.isArray(t)){const[e,n]=t;return fC({type:e,content:n})}else if(aee(t)){const{role:e,...n}=t;return fC({...n,type:e})}else return fC(t)}function dM(t,e="Human",n="AI"){const r=[];for(const i of t){let a;if(i.type==="human")a=e;else if(i.type==="ai")a=n;else if(i.type==="system")a="System";else if(i.type==="tool")a="Tool";else if(i.type==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i.type}`);const s=i.name?`${i.name}, `:"",o=i.text;let l=`${a}: ${s}${o}`;if(i.type==="ai"){const c=i;c.tool_calls&&c.tool_calls.length>0?l+=JSON.stringify(c.tool_calls):c.additional_kwargs&&"function_call"in c.additional_kwargs&&(l+=JSON.stringify(c.additional_kwargs.function_call))}r.push(l)}return r.join(`
`)}function uOe(t){if(t.data!==void 0)return t;{const e=t;return{type:e.type,data:{content:e.text,role:e.role,name:void 0,tool_call_id:void 0}}}}function hM(t){const e=uOe(t);switch(e.type){case"human":return new Ma(e.data);case"ai":return new Ei(e.data);case"system":return new Al(e.data);case"function":if(e.data.name===void 0)throw new Error("Name must be defined for function messages");return new nk(e.data);case"tool":if(e.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new _c(e.data);case"generic":if(e.data.role===void 0)throw new Error("Role must be defined for chat messages");return new Dd(e.data);default:throw new Error(`Got unexpected type: ${e.type}`)}}function fOe(t){return t.map(hM)}function dOe(t){return t.map(e=>e.toDict())}function EE(t){var n;const e=t._getType();if(e==="human")return new ik({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Oo({...r})}else{if(e==="system")return new fy({...t});if(e==="function")return new rk({...t});if(Dd.isInstance(t))return new tk({...t});throw new Error("Unknown message type.")}}function pee(t){var i,a;const e=t.reduce((s,o)=>{const l=s.findIndex(([c])=>"id"in o&&o.id&&"index"in o&&o.index!==void 0?o.id===c.id&&o.index===c.index:"id"in o&&o.id?o.id===c.id:"index"in o&&o.index!==void 0?o.index===c.index:!1);return l!==-1?s[l].push(o):s.push([o]),s},[]),n=[],r=[];for(const s of e){let o=null;const l=((i=s[0])==null?void 0:i.name)??"",c=s.map(d=>d.args||"").join("").trim(),u=c.length?c:"{}",f=(a=s[0])==null?void 0:a.id;try{if(o=dy(u),!f||o===null||typeof o!="object"||Array.isArray(o))throw new Error("Malformed tool call chunk args.");n.push({name:l,args:o,id:f,type:"tool_call"})}catch{r.push({name:l,args:u,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:t,tool_calls:n,invalid_tool_calls:r}}const mee=Symbol.for("ls:tracing_async_local_storage"),yw=Symbol.for("lc:context_variables"),hOe=t=>{globalThis[mee]=t},yb=()=>globalThis[mee];var dC={},gee={};At(gee,{getEnv:()=>_ee,getEnvironmentVariable:()=>mc,getRuntimeEnvironment:()=>xee,isBrowser:()=>yee,isDeno:()=>ak,isJsDom:()=>wee,isNode:()=>bee,isWebWorker:()=>vee});const yee=()=>typeof window<"u"&&typeof window.document<"u",vee=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",wee=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),ak=()=>typeof Deno<"u",bee=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!ak(),_ee=()=>{let t;return yee()?t="browser":bee()?t="node":vee()?t="webworker":wee()?t="jsdom":ak()?t="deno":t="other",t};let hC;function xee(){return hC===void 0&&(hC={library:"langchain-js",runtime:_ee()}),hC}function mc(t){try{return typeof process<"u"?dC==null?void 0:dC[t]:ak()?Deno==null?void 0:Deno.env.get(t):void 0}catch{return}}const pOe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function np(t){return typeof t=="string"&&pOe.test(t)}function See(t){if(!np(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Wi=[];for(var pC=0;pC<256;++pC)Wi.push((pC+256).toString(16).slice(1));function lv(t,e=0){return(Wi[t[e+0]]+Wi[t[e+1]]+Wi[t[e+2]]+Wi[t[e+3]]+"-"+Wi[t[e+4]]+Wi[t[e+5]]+"-"+Wi[t[e+6]]+Wi[t[e+7]]+"-"+Wi[t[e+8]]+Wi[t[e+9]]+"-"+Wi[t[e+10]]+Wi[t[e+11]]+Wi[t[e+12]]+Wi[t[e+13]]+Wi[t[e+14]]+Wi[t[e+15]]).toLowerCase()}var Mx,mOe=new Uint8Array(16);function pM(){if(!Mx&&(Mx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Mx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mx(mOe)}var mC,Lx,gC=0,yC=0;function gOe(t,e,n){var r=0,i=e||new Array(16);t=t||{};var a=t.node,s=t.clockseq;if(t._v6||(a||(a=mC),s==null&&(s=Lx)),a==null||s==null){var o=t.random||(t.rng||pM)();a==null&&(a=[o[0],o[1],o[2],o[3],o[4],o[5]],!mC&&!t._v6&&(a[0]|=1,mC=a)),s==null&&(s=(o[6]<<8|o[7])&16383,Lx===void 0&&!t._v6&&(Lx=s))}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:yC+1,u=l-gC+(c-yC)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||l>gC)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");gC=l,yC=c,Lx=s,l+=122192928e5;var f=((l&268435455)*1e4+c)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var d=l/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;for(var h=0;h<6;++h)i[r+h]=a[h];return e||lv(i)}function yOe(t){var e=typeof t=="string"?See(t):t,n=vOe(e);return typeof t=="string"?lv(n):n}function vOe(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function wOe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var bOe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_Oe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function xOe(t,e,n){function r(i,a,s,o){var l;if(typeof i=="string"&&(i=wOe(i)),typeof a=="string"&&(a=See(a)),((l=a)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){o=o||0;for(var u=0;u<16;++u)s[o+u]=c[u];return s}return lv(c)}try{r.name=t}catch{}return r.DNS=bOe,r.URL=_Oe,r}var SOe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const w7={randomUUID:SOe};function lu(t,e,n){if(w7.randomUUID&&!t)return w7.randomUUID();t=t||{};var r=t.random||(t.rng||pM)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,lv(r)}function EOe(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function vC(t,e){return t<<e|t>>>32-e}function AOe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var a=t.length/4+2,s=Math.ceil(a/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];o[l]=c}o[s-1][14]=(t.length-1)*8/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(t.length-1)*8&4294967295;for(var f=0;f<s;++f){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=o[f][h];for(var p=16;p<80;++p)d[p]=vC(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var m=n[0],y=n[1],g=n[2],v=n[3],w=n[4],_=0;_<80;++_){var x=Math.floor(_/20),E=vC(m,5)+EOe(x,y,g,v)+w+e[x]+d[_]>>>0;w=v,v=g,g=vC(y,30)>>>0,y=m,m=E}n[0]=n[0]+m>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var AE=xOe("v5",80,AOe);function b7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b7(Object(n),!0).forEach(function(r){kOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kOe(t,e,n){return(e=OOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OOe(t){var e=TOe(t,"string");return typeof e=="symbol"?e:e+""}function TOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function COe(t={},e,n=0){var r=gOe(_7(_7({},t),{},{_v6:!0}),new Uint8Array(16));return r=yOe(r),lv(r)}var x7=null,S7=null,Ho=0;function jf(t,e,n){t=t||{};var r=0,i=new Uint8Array(16),a=t.random||(t.rng||pM)(),s=t.msecs!==void 0?t.msecs:Date.now(),o=t.seq!==void 0?t.seq:null,l=S7,c=x7;return s>Ho&&t.msecs===void 0&&(Ho=s,o!==null&&(l=null,c=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,c=o&524287),(l===null||c===null)&&(l=a[6]&127,l=l<<8|a[7],c=a[8]&63,c=c<<8|a[9],c=c<<5|a[10]>>>3),s+1e4>Ho&&o===null?++c>524287&&(c=0,++l>4095&&(l=0,Ho++)):Ho=s,S7=l,x7=c,i[r++]=Ho/1099511627776&255,i[r++]=Ho/4294967296&255,i[r++]=Ho/16777216&255,i[r++]=Ho/65536&255,i[r++]=Ho/256&255,i[r++]=Ho&255,i[r++]=l>>>4&15|112,i[r++]=l&255,i[r++]=c>>>13&63|128,i[r++]=c>>>5&255,i[r++]=c<<3&255|a[10]&7,i[r++]=a[11],i[r++]=a[12],i[r++]=a[13],i[r++]=a[14],i[r++]=a[15],e||lv(i)}var Eee={};At(Eee,{BaseCallbackHandler:()=>cv,callbackHandlerPrefersStreaming:()=>mM,isBaseCallbackHandler:()=>Aee});var POe=class{};function mM(t){return"lc_prefer_streaming"in t&&t.lc_prefer_streaming}var cv=class extends POe{constructor(e){super();P(this,"lc_serializable",!1);P(this,"lc_kwargs");P(this,"ignoreLLM",!1);P(this,"ignoreChain",!1);P(this,"ignoreAgent",!1);P(this,"ignoreRetriever",!1);P(this,"ignoreCustomEvent",!1);P(this,"raiseError",!1);P(this,"awaitHandlers",mc("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,J5(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return ko.prototype.toJSON.call(this)}toJSONNotImplemented(){return ko.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends cv{constructor(){super();P(this,"name",jf());Object.assign(this,e)}}return new n}};const Aee=t=>{const e=t;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"},NOe="gen_ai.operation.name",IOe="gen_ai.system",E7="gen_ai.request.model",ROe="gen_ai.response.model",A7="gen_ai.usage.input_tokens",k7="gen_ai.usage.output_tokens",O7="gen_ai.usage.total_tokens",jOe="gen_ai.request.max_tokens",$Oe="gen_ai.request.temperature",MOe="gen_ai.request.top_p",LOe="gen_ai.request.frequency_penalty",DOe="gen_ai.request.presence_penalty",FOe="gen_ai.response.finish_reasons",BOe="gen_ai.prompt",UOe="gen_ai.completion",zOe="gen_ai.request.extra_query",VOe="gen_ai.request.extra_body",WOe="gen_ai.serialized.name",HOe="gen_ai.serialized.signature",qOe="gen_ai.serialized.doc",GOe="gen_ai.response.id",KOe="gen_ai.response.service_tier",YOe="gen_ai.response.system_fingerprint",ZOe="gen_ai.usage.input_token_details",XOe="gen_ai.usage.output_token_details",JOe="langsmith.trace.session_id",QOe="langsmith.trace.session_name",eTe="langsmith.span.kind",tTe="langsmith.trace.name",nTe="langsmith.metadata",T7="langsmith.span.tags",rTe="langsmith.request.streaming",iTe="langsmith.request.headers",aTe=(...t)=>fetch(...t),kee=Symbol.for("ls:fetch_implementation"),sTe=()=>globalThis[kee]===void 0,oTe=t=>async(...e)=>{if(t||Aa("DEBUG")==="true"){const[r,i]=e;console.log(` ${(i==null?void 0:i.method)||"GET"} ${r}`)}const n=await(globalThis[kee]??aTe)(...e);return(t||Aa("DEBUG")==="true")&&console.log(` ${n.status} ${n.statusText} ${n.url}`),n},Oee=()=>Aa("PROJECT")??xc("LANGCHAIN_SESSION")??"default",C7={};function X2(t){C7[t]||(console.warn(t),C7[t]=!0)}const Le=t=>BigInt(t),Tee=Le("0x9E3779B1"),Cee=Le("0x85EBCA77"),lTe=Le("0xC2B2AE3D"),Ed=Le("0x9E3779B185EBCA87"),xp=Le("0xC2B2AE3D27D4EB4F"),Pee=Le("0x165667B19E3779F9"),gM=Le("0x85EBCA77C2B2AE63"),cTe=Le("0x27D4EB2F165667C5"),uTe=Le("0x165667919E3779F9"),fTe=Le("0x9FB21C651E98DF25");function dTe(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=parseInt(t.substring(n,n+2),16);return e}const Jl=dTe("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),Lg=(Le(1)<<Le(128))-Le(1),Qt=(Le(1)<<Le(64))-Le(1),kE=(Le(1)<<Le(32))-Le(1),ru=64,Nee=ru/8,hTe=8,Dx=4;function Xn(t,e=0){return new Uint8Array(t.buffer,t.byteOffset+e,t.length-e)}function or(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getBigUint64(0,!0)}function og(t,e=0){return new DataView(t.buffer,t.byteOffset+e).getUint32(0,!0)}function wC(t,e=0){return t[e]}const pTe=t=>(t&Le(255))<<Le(56)|(t&Le(65280))<<Le(40)|(t&Le(16711680))<<Le(24)|(t&Le(4278190080))<<Le(8)|(t&Le(0xff00000000))>>Le(8)|(t&Le(0xff0000000000))>>Le(24)|(t&Le(0xff000000000000))>>Le(40)|(t&Le(0xff00000000000000))>>Le(56),mTe=t=>(t=(t&Le(65535))<<Le(16)|(t&Le(4294901760))>>Le(16),t=(t&Le(16711935))<<Le(8)|(t&Le(4278255360))>>Le(8),t),gTe=(t,e)=>(t&kE)*(e&kE)&Qt,hy=t=>{if(!t)throw new Error("Assert failed")};function yTe(t,e){return(t<<e|t>>Le(32)-e)&kE}function Iee(t,e,n){for(let r=0;r<Nee;r++){const i=or(e,r*8),a=i^or(n,r*8);t[r^1]+=i,t[r]+=gTe(a,a>>Le(32))}return t}function P7(t,e,n,r){for(let i=0;i<r;i++)Iee(t,Xn(e,i*ru),Xn(n,i*8));return t}function vTe(t,e){for(let n=0;n<Nee;n++){const r=or(e,n*8);let i=t[n];i=iR(i,Le(47)),i^=r,i*=Tee,t[n]=i&Qt}return t}function Fx(t,e){return Ree(t[0]^or(e,0),t[1]^or(e,hTe))}function N7(t,e,n){let r=n;return r+=Fx(t.slice(0),Xn(e,0*Dx)),r+=Fx(t.slice(2),Xn(e,4*Dx)),r+=Fx(t.slice(4),Xn(e,8*Dx)),r+=Fx(t.slice(6),Xn(e,12*Dx)),ac(r&Qt)}function wTe(t,e,n,r,i){const a=Math.floor((n.byteLength-ru)/8),s=ru*a,o=Math.floor((e.byteLength-1)/s);for(let l=0;l<o;l++)t=P7(t,Xn(e,l*s),n,a),t=i(t,Xn(n,n.byteLength-ru));{const l=Math.floor((e.byteLength-1-s*o)/ru);t=P7(t,Xn(e,o*s),n,l),t=r(t,Xn(e,e.byteLength-ru),Xn(n,n.byteLength-ru-7))}return t}function bTe(t,e,n){let r=new BigUint64Array([lTe,Ed,xp,Pee,gM,Cee,cTe,Tee]);hy(t.length>128),r=wTe(r,t,e,Iee,vTe),hy(r.length*8==64);{const i=N7(r,Xn(e,11),Le(t.byteLength)*Ed&Qt);return N7(r,Xn(e,e.byteLength-ru-11),~(Le(t.byteLength)*xp)&Qt)<<Le(64)|i}}function Ree(t,e){const n=t*e&Lg;return n&Qt^n>>Le(64)}function I7(t,e,n){return Ree((or(t,0)^or(e,0)+n)&Qt,(or(t,8)^or(e,8)-n)&Qt)}function J2(t,e,n,r,i){let a=t&Qt,s=t>>Le(64)&Qt;return a+=I7(e,r,i),a^=or(n,0)+or(n,8),a&=Qt,s+=I7(n,Xn(r,16),i),s^=or(e,0)+or(e,8),s&=Qt,s<<Le(64)|a}function ac(t){return t^=t>>Le(37),t*=uTe,t&=Qt,t^=t>>Le(32),t}function OE(t){return t^=t>>Le(33),t*=xp,t&=Qt,t^=t>>Le(29),t*=Pee,t&=Qt,t^=t>>Le(32),t}function _Te(t,e,n){const r=t.byteLength;hy(r>0&&r<=3);const i=Le(wC(t,r-1))|Le(r<<8)|Le(wC(t,0)<<16)|Le(wC(t,r>>1)<<24),a=(Le(og(e,0))^Le(og(e,4)))+n,s=(i^a)&Qt,o=(Le(og(e,8))^Le(og(e,12)))-n,l=(yTe(mTe(i),Le(13))^o)&Qt;return(OE(l)&Qt)<<Le(64)|OE(s)}function iR(t,e){return t^t>>e}function xTe(t,e,n){const r=t.byteLength;hy(r>=4&&r<=8);{const i=og(t,0),a=og(t,r-4),s=Le(i)|Le(a)<<Le(32),o=(or(e,16)^or(e,24))+n&Qt;let c=(s^o)*(Ed+(Le(r)<<Le(2)))&Lg;return c+=(c&Qt)<<Le(65),c&=Lg,c^=c>>Le(67),iR(iR(c&Qt,Le(35))*fTe&Qt,Le(28))|ac(c>>Le(64))<<Le(64)}}function STe(t,e,n){const r=t.byteLength;hy(r>=9&&r<=16);{const i=(or(e,32)^or(e,40))+n&Qt,a=(or(e,48)^or(e,56))-n&Qt,s=or(t);let o=or(t,r-8),l=(s^o^i)*Ed;const c=(l&Qt)+(Le(r-1)<<Le(54));l=l&(Lg^Qt)|c,o^=a,l+=o+(o&kE)*(Cee-Le(1))<<Le(64),l&=Lg,l^=pTe(l>>Le(64));let u=(l&Qt)*xp;return u+=(l>>Le(64))*xp<<Le(64),u&=Lg,ac(u&Qt)|ac(u>>Le(64))<<Le(64)}}function ETe(t,e){const n=t.byteLength;return hy(n<=16),n>8?STe(t,Jl,e):n>=4?xTe(t,Jl,e):n>0?_Te(t,Jl,e):OE(e^or(Jl,64)^or(Jl,72))|OE(e^or(Jl,80)^or(Jl,88))<<Le(64)}function aR(t){return~t+Le(1)&Qt}function ATe(t,e,n){let r=Le(t.byteLength)*Ed&Qt,i=Le(t.byteLength-1)/Le(32);for(;i>=0;){const o=Number(i);r=J2(r,Xn(t,16*o),Xn(t,t.byteLength-16*(o+1)),Xn(e,32*o),n),i--}let a=r+(r>>Le(64))&Qt;a=ac(a);let s=(r&Qt)*Ed+(r>>Le(64))*gM+(Le(t.byteLength)-n&Qt)*xp;return s&=Qt,s=aR(ac(s)),a|s<<Le(64)}function kTe(t,e,n){let r=Le(t.byteLength)*Ed&Qt;for(let s=32;s<160;s+=32)r=J2(r,Xn(t,s-32),Xn(t,s-16),Xn(e,s-32),n);r=ac(r&Qt)|ac(r>>Le(64))<<Le(64);for(let s=160;s<=t.byteLength;s+=32)r=J2(r,Xn(t,s-32),Xn(t,s-16),Xn(e,3+s-160),n);r=J2(r,Xn(t,t.byteLength-16),Xn(t,t.byteLength-32),Xn(e,103),aR(n));let i=r+(r>>Le(64))&Qt;i=ac(i);let a=(r&Qt)*Ed+(r>>Le(64))*gM+(Le(t.byteLength)-n&Qt)*xp;return a&=Qt,a=aR(ac(a)),i|a<<Le(64)}function OTe(t,e=Le(0)){const n=t.byteLength;return n<=16?ETe(t,e):n<=128?ATe(t,Jl,e):n<=240?kTe(t,Jl,e):bTe(t,Jl)}function TTe(t){const e=new Uint8Array(16),n=new DataView(e.buffer),r=t&Qt,i=t>>Le(64);return n.setBigUint64(0,i,!1),n.setBigUint64(8,r,!1),e}const jee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function zt(t,e){if(!jee.test(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}function CTe(t){const e=typeof t=="string"?Date.parse(t):t;return jf({msecs:e,seq:0})}function PTe(t){if(!jee.test(t))return null;const e=t[14];return parseInt(e,16)}function NTe(t){const e=t.replace(/-/g,""),n=new Uint8Array(16);for(let r=0;r<16;r++)n[r]=parseInt(e.slice(r*2,r*2+2),16);return n}function ITe(t){const e=Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("");return`${e.slice(0,8)}-${e.slice(8,12)}-${e.slice(12,16)}-${e.slice(16,20)}-${e.slice(20)}`}const RTe=new TextEncoder;function jTe(t){const e=RTe.encode(t),n=OTe(e);return TTe(n)}function Bx(t,e){const n=`${t}:${e}`,r=jTe(n),i=new Uint8Array(16);if(PTe(t)===7){const s=NTe(t);i.set(s.slice(0,6),0)}else{const s=Date.now();i[0]=s/1099511627776&255,i[1]=s/4294967296&255,i[2]=s/16777216&255,i[3]=s/65536&255,i[4]=s/256&255,i[5]=s&255}return i[6]=112|r[0]&15,i[7]=r[1],i[8]=128|r[2]&63,i.set(r.slice(3,10),9),ITe(i)}function $Te(t,e){throw new Error("dump() is not supported in browser environments.")}function MTe(t){throw new Error("load() is not supported in browser environments.")}function LTe(t,e){return e===null?!1:Date.now()-t.createdAt>e*1e3}class DTe{constructor(e={}){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ttlSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshIntervalSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_metrics",{enumerable:!0,configurable:!0,writable:!0,value:{hits:0,misses:0,refreshes:0,refreshErrors:0}}),this.configure(e)}get metrics(){return{...this._metrics}}get totalRequests(){return this._metrics.hits+this._metrics.misses}get hitRate(){const e=this.totalRequests;return e>0?this._metrics.hits/e:0}resetMetrics(){this._metrics={hits:0,misses:0,refreshes:0,refreshErrors:0}}get(e,n){if(this.maxSize===0)return;const r=this.cache.get(e);if(!r){this._metrics.misses+=1;return}return this.cache.delete(e),this.cache.set(e,{...r,refreshFunc:n}),this._metrics.hits+=1,r.value}set(e,n,r){if(this.maxSize===0)return;if(this.refreshTimer===void 0&&this.startRefreshLoop(),!this.cache.has(e)&&this.cache.size>=this.maxSize){const a=this.cache.keys().next().value;a!==void 0&&this.cache.delete(a)}const i={value:n,createdAt:Date.now(),refreshFunc:r};this.cache.delete(e),this.cache.set(e,i)}invalidate(e){this.cache.delete(e)}clear(){this.cache.clear()}get size(){return this.cache.size}stop(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=void 0)}dump(e){for(const[n,r]of this.cache.entries())r.value;$Te()}load(e){const n=MTe();if(!n)return 0;let r=0;const i=Date.now();for(const[a,s]of Object.entries(n)){if(this.cache.size>=this.maxSize)break;const o={value:s,createdAt:i};this.cache.set(a,o),r+=1}return r}startRefreshLoop(){this.stop(),this.ttlSeconds!==null&&(this.refreshTimer=setInterval(()=>{this.refreshStaleEntries().catch(e=>{console.warn("Unexpected error in cache refresh loop:",e)})},this.refreshIntervalSeconds*1e3),this.refreshTimer.unref&&this.refreshTimer.unref())}getStaleEntries(){const e=[];for(const[n,r]of this.cache.entries())LTe(r,this.ttlSeconds)&&e.push([n,r]);return e}async refreshStaleEntries(){const e=this.getStaleEntries();if(e.length!==0){for(const[n,r]of e)if(r.refreshFunc!==void 0)try{const i=await r.refreshFunc();this.set(n,i,r.refreshFunc),this._metrics.refreshes+=1}catch(i){this._metrics.refreshErrors+=1,console.warn(`Failed to refresh cache entry ${n}:`,i)}}}configure(e){this.stop(),this.refreshIntervalSeconds=e.refreshIntervalSeconds??60,this.maxSize=e.maxSize??100,this.ttlSeconds=e.ttlSeconds??5*60}}const R7=new DTe,$ee="0.5.4";var vw={};let Hl;const FTe=()=>typeof window<"u"&&typeof window.document<"u",BTe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",UTe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),Mee=()=>typeof Deno<"u",zTe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Mee(),Lee=()=>Hl||(typeof Bun<"u"?Hl="bun":FTe()?Hl="browser":zTe()?Hl="node":BTe()?Hl="webworker":UTe()?Hl="jsdom":Mee()?Hl="deno":Hl="other",Hl);let bC;function Dee(){if(bC===void 0){const t=Lee(),e=WTe();bC={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:$ee,...e}}return bC}function Fee(){const t=VTe(),e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,i]of Object.entries(t))typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function VTe(){const t={};try{if(typeof process<"u"&&vw)for(const[e,n]of Object.entries(vw))(e.startsWith("LANGCHAIN_")||e.startsWith("LANGSMITH_"))&&n!=null&&((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&typeof n=="string"?t[e]=n.slice(0,2)+"*".repeat(n.length-4)+n.slice(-2):t[e]=n)}catch{}return t}function xc(t){try{return typeof process<"u"?vw==null?void 0:vw[t]:void 0}catch{return}}function Aa(t){return xc(`LANGSMITH_${t}`)||xc(`LANGCHAIN_${t}`)}let _C;function WTe(){if(_C!==void 0)return _C;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=xc(n);r!==void 0&&(e[n]=r)}return _C=e,e}function Bee(){return xc("OTEL_ENABLED")==="true"||Aa("OTEL_ENABLED")==="true"}class HTe{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...n){!this.hasWarned&&Bee()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let r;if(n.length===1&&typeof n[0]=="function"?r=n[0]:n.length===2&&typeof n[1]=="function"?r=n[1]:n.length===3&&typeof n[2]=="function"&&(r=n[2]),typeof r=="function")return r()}}class qTe{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new HTe})}getTracer(e,n){return this.mockTracer}getActiveSpan(){}setSpan(e,n){return e}getSpan(e){}setSpanContext(e,n){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class GTe{active(){return{}}with(e,n){return n()}}const xC=Symbol.for("ls:otel_trace"),SC=Symbol.for("ls:otel_context"),j7=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),KTe=new qTe,YTe=new GTe;class ZTe{getTraceInstance(){return globalThis[xC]??KTe}getContextInstance(){return globalThis[SC]??YTe}initializeGlobalInstances(e){globalThis[xC]===void 0&&(globalThis[xC]=e.trace),globalThis[SC]===void 0&&(globalThis[SC]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[j7]=e}getDefaultOTLPTracerComponents(){return globalThis[j7]??void 0}}const yM=new ZTe;function Uee(){return yM.getTraceInstance()}function XTe(){return yM.getContextInstance()}function JTe(){return yM.getDefaultOTLPTracerComponents()}const QTe={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function eCe(t){return QTe[t]||t}class tCe{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,n){for(const r of e)try{if(!r.run)continue;if(r.operation==="post"){const i=this.createSpanForRun(r,r.run,n.get(r.id));i&&!r.run.end_time&&this.spans.set(r.id,i)}else this.updateSpanForRun(r,r.run)}catch(i){console.error(`Error processing operation ${r.id}:`,i)}}createSpanForRun(e,n,r){const i=r&&Uee().getSpan(r);if(i)try{return this.finishSpanSetup(i,n,e)}catch(a){console.error(`Failed to create span for run ${e.id}:`,a);return}}finishSpanSetup(e,n,r){return this.setSpanAttributes(e,n,r),n.error?(e.setStatus({code:2}),e.recordException(new Error(n.error))):e.setStatus({code:1}),n.end_time&&e.end(new Date(n.end_time)),e}updateSpanForRun(e,n){try{const r=this.spans.get(e.id);if(!r){console.debug(`No span found for run ${e.id} during update`);return}this.setSpanAttributes(r,n,e),n.error?(r.setStatus({code:2}),r.recordException(new Error(n.error))):r.setStatus({code:1});const i=n.end_time;i&&(r.end(new Date(i)),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){var n;if((n=e.extra)!=null&&n.metadata){const r=e.extra.metadata;if(r.ls_model_name)return r.ls_model_name;if(r.invocation_params){const i=r.invocation_params;if(i.model)return i.model;if(i.model_name)return i.model_name}}}setSpanAttributes(e,n,r){var o;if("run_type"in n&&n.run_type){e.setAttribute(eTe,n.run_type);const l=eCe(n.run_type||"chain");e.setAttribute(NOe,l)}"name"in n&&n.name&&e.setAttribute(tTe,n.name),"session_id"in n&&n.session_id&&e.setAttribute(JOe,n.session_id),"session_name"in n&&n.session_name&&e.setAttribute(QOe,n.session_name),this.setGenAiSystem(e,n);const i=this.extractModelName(n);i&&e.setAttribute(E7,i),"prompt_tokens"in n&&typeof n.prompt_tokens=="number"&&e.setAttribute(A7,n.prompt_tokens),"completion_tokens"in n&&typeof n.completion_tokens=="number"&&e.setAttribute(k7,n.completion_tokens),"total_tokens"in n&&typeof n.total_tokens=="number"&&e.setAttribute(O7,n.total_tokens),this.setInvocationParameters(e,n);const a=((o=n.extra)==null?void 0:o.metadata)||{};for(const[l,c]of Object.entries(a))c!=null&&e.setAttribute(`${nTe}.${l}`,String(c));const s=n.tags;if(s&&Array.isArray(s)?e.setAttribute(T7,s.join(", ")):s&&e.setAttribute(T7,String(s)),"serialized"in n&&typeof n.serialized=="object"){const l=n.serialized;l.name&&e.setAttribute(WOe,String(l.name)),l.signature&&e.setAttribute(HOe,String(l.signature)),l.doc&&e.setAttribute(qOe,String(l.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,n){let r="langchain";const i=this.extractModelName(n);if(i){const a=i.toLowerCase();a.includes("anthropic")||a.startsWith("claude")?r="anthropic":a.includes("bedrock")?r="aws.bedrock":a.includes("azure")&&a.includes("openai")?r="az.ai.openai":a.includes("azure")&&a.includes("inference")?r="az.ai.inference":a.includes("cohere")?r="cohere":a.includes("deepseek")?r="deepseek":a.includes("gemini")?r="gemini":a.includes("groq")?r="groq":a.includes("watson")||a.includes("ibm")?r="ibm.watsonx.ai":a.includes("mistral")?r="mistral_ai":a.includes("gpt")||a.includes("openai")?r="openai":a.includes("perplexity")||a.includes("sonar")?r="perplexity":a.includes("vertex")?r="vertex_ai":(a.includes("xai")||a.includes("grok"))&&(r="xai")}e.setAttribute(IOe,r)}setInvocationParameters(e,n){var i,a;if(!((a=(i=n.extra)==null?void 0:i.metadata)!=null&&a.invocation_params))return;const r=n.extra.metadata.invocation_params;r.max_tokens!==void 0&&e.setAttribute(jOe,r.max_tokens),r.temperature!==void 0&&e.setAttribute($Oe,r.temperature),r.top_p!==void 0&&e.setAttribute(MOe,r.top_p),r.frequency_penalty!==void 0&&e.setAttribute(LOe,r.frequency_penalty),r.presence_penalty!==void 0&&e.setAttribute(DOe,r.presence_penalty)}setIOAttributes(e,n){if(n.run.inputs)try{const r=n.run.inputs;typeof r=="object"&&r!==null&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(E7,r.model),r.stream!==void 0&&e.setAttribute(rTe,r.stream),r.extra_headers&&e.setAttribute(iTe,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(zOe,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(VOe,JSON.stringify(r.extra_body))),e.setAttribute(BOe,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${n.id}`,r)}if(n.run.outputs)try{const r=n.run.outputs,i=this.getUnifiedRunTokens(r);if(i&&(e.setAttribute(A7,i[0]),e.setAttribute(k7,i[1]),e.setAttribute(O7,i[0]+i[1])),r&&typeof r=="object"){if(r.model&&e.setAttribute(ROe,String(r.model)),r.id&&e.setAttribute(GOe,r.id),r.choices&&Array.isArray(r.choices)){const a=r.choices.map(s=>s.finish_reason).filter(s=>s).map(String);a.length>0&&e.setAttribute(FOe,a.join(", "))}if(r.service_tier&&e.setAttribute(KOe,r.service_tier),r.system_fingerprint&&e.setAttribute(YOe,r.system_fingerprint),r.usage_metadata&&typeof r.usage_metadata=="object"){const a=r.usage_metadata;a.input_token_details&&e.setAttribute(ZOe,JSON.stringify(a.input_token_details)),a.output_token_details&&e.setAttribute(XOe,JSON.stringify(a.output_token_details))}}e.setAttribute(UOe,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${n.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let n=this.extractUnifiedRunTokens(e.usage_metadata);if(n)return n;const r=Object.keys(e);for(const s of r){const o=e[s];if(!(!o||typeof o!="object")&&(n=this.extractUnifiedRunTokens(o.usage_metadata),n||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(n=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),n)))return n}const i=e.generations||[];if(!Array.isArray(i))return null;const a=Array.isArray(i[0])?i.flat():i;for(const s of a)if(typeof s=="object"&&s.message&&typeof s.message=="object"&&s.message.kwargs&&typeof s.message.kwargs=="object"&&(n=this.extractUnifiedRunTokens(s.message.kwargs.usage_metadata),n))return n;return null}extractUnifiedRunTokens(e){return!e||typeof e!="object"||typeof e.input_tokens!="number"||typeof e.output_tokens!="number"?null:[e.input_tokens,e.output_tokens]}}const nCe=Object.prototype.toString,rCe=t=>nCe.call(t)==="[object Error]",iCe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function aCe(t){if(!(t&&rCe(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:iCe.has(n)}function sCe(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Ux(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}let oCe=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function lCe(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function $7(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function cCe({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){var h,p,m;const a=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(a instanceof oCe)throw a.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,o=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:a,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await i.onFailedAttempt(l),$7(r,o)<=0)throw a;const c=await i.shouldConsumeRetry(l),u=$7(r,o);if(u<=0||s<=0)throw a;if(a instanceof TypeError&&!aCe(a)){if(c)throw a;return(h=i.signal)==null||h.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!c)return(p=i.signal)==null||p.throwIfAborted(),!1;const f=lCe(n,i),d=Math.min(f,u);return d>0&&await new Promise((y,g)=>{var _,x;const v=()=>{var E;clearTimeout(w),(E=i.signal)==null||E.removeEventListener("abort",v),g(i.signal.reason)},w=setTimeout(()=>{var E;(E=i.signal)==null||E.removeEventListener("abort",v),y()},d);i.unref&&((_=w.unref)==null||_.call(w)),(x=i.signal)==null||x.addEventListener("abort",v,{once:!0})}),(m=i.signal)==null||m.throwIfAborted(),!0}async function uCe(t,e={}){var a,s,o;if(e={...e},sCe(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Ux("factor",e.factor,{min:0,allowInfinity:!1}),Ux("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Ux("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Ux("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let n=0,r=0;const i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(s=e.signal)==null||s.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await cCe({error:l,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var zee={},Vee={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,f||l,d),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,p=new Array(h);d<h;d++)p[d]=f[d].fn;return p},o.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,d,h,p){var m=n?n+c:c;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,w;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,d),!0;case 5:return y.fn.call(y.context,u,f,d,h),!0;case 6:return y.fn.call(y.context,u,f,d,h,p),!0}for(w=1,v=new Array(g-1);w<g;w++)v[w-1]=arguments[w];y.fn.apply(y.context,v)}else{var _=y.length,x;for(w=0;w<_;w++)switch(y[w].once&&this.removeListener(c,y[w].fn,void 0,!0),g){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,f);break;case 4:y[w].fn.call(y[w].context,u,f,d);break;default:if(!v)for(x=1,v=new Array(g-1);x<g;x++)v[x-1]=arguments[x];y[w].fn.apply(y[w].context,v)}}return!0},o.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,d){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return s(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!d||p.once)&&(!f||p.context===f)&&s(this,h);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==u||d&&!p[m].once||f&&p[m].context!==f)&&y.push(p[m]);y.length?this._events[h]=y.length===1?y[0]:y:s(this,h)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(Vee);var Wee=Vee.exports;const fCe=wn(Wee);var sk={exports:{}},dCe=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const hCe=dCe;class Hee extends Error{constructor(e){super(e),this.name="TimeoutError"}}const qee=(t,e,n)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const a=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){i(l)}return}const s=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new Hee(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);hCe(t.then(r,i),()=>{clearTimeout(a)})});sk.exports=qee;sk.exports.default=qee;sk.exports.TimeoutError=Hee;var pCe=sk.exports,vM={},wM={};Object.defineProperty(wM,"__esModule",{value:!0});function mCe(t,e,n){let r=0,i=t.length;for(;i>0;){const a=i/2|0;let s=r+a;n(t[s],e)<=0?(r=++s,i-=a+1):i=a}return r}wM.default=mCe;Object.defineProperty(vM,"__esModule",{value:!0});const gCe=wM;class yCe{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const i=gCe.default(this._queue,r,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}vM.default=yCe;Object.defineProperty(zee,"__esModule",{value:!0});const vCe=Wee,Gee=pCe,wCe=vM,zx=()=>{},bCe=new Gee.TimeoutError;let _Ce=class extends vCe{constructor(e){var n,r,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=zx,this._resolveIdle=zx,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:wCe.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=zx,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=zx,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const s=this._timeout===void 0&&n.timeout===void 0?e():Gee.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(bCe)});r(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};var bu=zee.default=_Ce;const xCe="default"in bu?bu.default:bu,SCe=[408,425,429,500,502,503,504];let M7=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,this.queue=new xCe({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){return this.callWithOptions({},e,...n)}callWithOptions(e,n,...r){const i=e.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&i>0&&this.queueSizeBytes+i>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${i} bytes.`));i>0&&(this.queueSizeBytes+=i);const a=this.onFailedResponseHook;let s=this.queue.add(()=>uCe(()=>n(...r).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt({error:o}){if(typeof o!="object"||o==null)throw o;const l="message"in o&&typeof o.message=="string"?o.message:void 0;if(l!=null&&l.startsWith("Cancel")||l!=null&&l.startsWith("TimeoutError")||l!=null&&l.startsWith("AbortError")||"name"in o&&o.name==="TimeoutError"||"code"in o&&o.code==="ECONNABORTED")throw o;const c="response"in o?o.response:void 0;if(a&&await a(c))return;const u=(c==null?void 0:c.status)??("status"in o?o.status:void 0);if(u!=null&&(typeof u=="number"||typeof u=="string")&&!SCe.includes(+u))throw o},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return i>0&&(s=s.finally(()=>{this.queueSizeBytes-=i})),e.signal?Promise.race([s,new Promise((o,l)=>{var c;(c=e.signal)==null||c.addEventListener("abort",()=>{l(new Error("AbortError"))})})]):s}};function L7(t){return typeof(t==null?void 0:t._getType)=="function"}function D7(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var sR={exports:{}};const ECe="2.0.0",Kee=256,ACe=Number.MAX_SAFE_INTEGER||9007199254740991,kCe=16,OCe=Kee-6,TCe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ok={MAX_LENGTH:Kee,MAX_SAFE_COMPONENT_LENGTH:kCe,MAX_SAFE_BUILD_LENGTH:OCe,MAX_SAFE_INTEGER:ACe,RELEASE_TYPES:TCe,SEMVER_SPEC_VERSION:ECe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},EC={};const CCe=typeof process=="object"&&EC&&EC.NODE_DEBUG&&/\bsemver\b/i.test(EC.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var lk=CCe;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=ok,a=lk;e=t.exports={};const s=e.re=[],o=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],u=e.t={};let f=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,r]],p=y=>{for(const[g,v]of h)y=y.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return y},m=(y,g,v)=>{const w=p(g),_=f++;a(y,_,g),u[y]=_,l[_]=g,c[_]=w,s[_]=new RegExp(g,v?"g":void 0),o[_]=new RegExp(w,v?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),m("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${d}+`),m("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),m("FULL",`^${l[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),m("LOOSE",`^${l[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),m("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",l[u.COERCE],!0),m("COERCERTLFULL",l[u.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",m("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",m("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(sR,sR.exports);var W1=sR.exports;const PCe=Object.freeze({loose:!0}),NCe=Object.freeze({}),ICe=t=>t?typeof t!="object"?PCe:t:NCe;var bM=ICe;const F7=/^[0-9]+$/,Yee=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;const n=F7.test(t),r=F7.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},RCe=(t,e)=>Yee(e,t);var Zee={compareIdentifiers:Yee,rcompareIdentifiers:RCe};const Vx=lk,{MAX_LENGTH:B7,MAX_SAFE_INTEGER:Wx}=ok,{safeRe:Hx,t:qx}=W1,jCe=bM,{compareIdentifiers:AC}=Zee;let $Ce=class Gl{constructor(e,n){if(n=jCe(n),e instanceof Gl){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>B7)throw new TypeError(`version is longer than ${B7} characters`);Vx("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?Hx[qx.LOOSE]:Hx[qx.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Wx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Wx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Wx||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<Wx)return a}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Vx("SemVer.compare",this.version,this.options,e),!(e instanceof Gl)){if(typeof e=="string"&&e===this.version)return 0;e=new Gl(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Gl||(e=new Gl(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof Gl||(e=new Gl(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=e.prerelease[n];if(Vx("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return AC(r,i)}while(++n)}compareBuild(e){e instanceof Gl||(e=new Gl(e,this.options));let n=0;do{const r=this.build[n],i=e.build[n];if(Vx("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return AC(r,i)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const i=`-${n}`.match(this.options.loose?Hx[qx.PRERELEASELOOSE]:Hx[qx.PRERELEASE]);if(!i||i[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let a=[n,i];r===!1&&(a=[n]),AC(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var _M=$Ce;const U7=_M,MCe=(t,e,n)=>new U7(t,n).compare(new U7(e,n));var uv=MCe;const LCe=uv,DCe=(t,e,n)=>LCe(t,e,n)>0;var FCe=DCe;const BCe=uv,UCe=(t,e,n)=>BCe(t,e,n)<0;var zCe=UCe;const VCe=uv,WCe=(t,e,n)=>VCe(t,e,n)===0;var HCe=WCe;const qCe=uv,GCe=(t,e,n)=>qCe(t,e,n)!==0;var KCe=GCe;const YCe=uv,ZCe=(t,e,n)=>YCe(t,e,n)>=0;var XCe=ZCe;const JCe=uv,QCe=(t,e,n)=>JCe(t,e,n)<=0;var ePe=QCe;const tPe=HCe,nPe=KCe,rPe=FCe,iPe=XCe,aPe=zCe,sPe=ePe,oPe=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return tPe(t,n,r);case"!=":return nPe(t,n,r);case">":return rPe(t,n,r);case">=":return iPe(t,n,r);case"<":return aPe(t,n,r);case"<=":return sPe(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var lPe=oPe;const{safeRe:obt,t:lbt}=W1;class cPe{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}}var uPe=cPe,kC,z7;function Pl(){if(z7)return kC;z7=1;const t=/\s+/g;class e{constructor(V,Y){if(Y=i(Y),V instanceof e)return V.loose===!!Y.loose&&V.includePrerelease===!!Y.includePrerelease?V:new e(V.raw,Y);if(V instanceof a)return this.raw=V.value,this.set=[[V]],this.formatted=void 0,this;if(this.options=Y,this.loose=!!Y.loose,this.includePrerelease=!!Y.includePrerelease,this.raw=V.trim().replace(t," "),this.set=this.raw.split("||").map(X=>this.parseRange(X.trim())).filter(X=>X.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const X=this.set[0];if(this.set=this.set.filter(z=>!m(z[0])),this.set.length===0)this.set=[X];else if(this.set.length>1){for(const z of this.set)if(z.length===1&&y(z[0])){this.set=[z];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let V=0;V<this.set.length;V++){V>0&&(this.formatted+="||");const Y=this.set[V];for(let X=0;X<Y.length;X++)X>0&&(this.formatted+=" "),this.formatted+=Y[X].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(V){const X=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+V,z=r.get(X);if(z)return z;const G=this.options.loose,ae=G?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];V=V.replace(ae,j(this.options.includePrerelease)),s("hyphen replace",V),V=V.replace(l[c.COMPARATORTRIM],u),s("comparator trim",V),V=V.replace(l[c.TILDETRIM],f),s("tilde trim",V),V=V.replace(l[c.CARETTRIM],d),s("caret trim",V);let ue=V.split(" ").map(re=>v(re,this.options)).join(" ").split(/\s+/).map(re=>N(re,this.options));G&&(ue=ue.filter(re=>(s("loose invalid filter",re,this.options),!!re.match(l[c.COMPARATORLOOSE])))),s("range list",ue);const L=new Map,K=ue.map(re=>new a(re,this.options));for(const re of K){if(m(re))return[re];L.set(re.value,re)}L.size>1&&L.has("")&&L.delete("");const Q=[...L.values()];return r.set(X,Q),Q}intersects(V,Y){if(!(V instanceof e))throw new TypeError("a Range is required");return this.set.some(X=>g(X,Y)&&V.set.some(z=>g(z,Y)&&X.every(G=>z.every(ae=>G.intersects(ae,Y)))))}test(V){if(!V)return!1;if(typeof V=="string")try{V=new o(V,this.options)}catch{return!1}for(let Y=0;Y<this.set.length;Y++)if(U(this.set[Y],V,this.options))return!0;return!1}}kC=e;const n=uPe,r=new n,i=bM,a=ck(),s=lk,o=_M,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:d}=W1,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=ok,m=B=>B.value==="<0.0.0-0",y=B=>B.value==="",g=(B,V)=>{let Y=!0;const X=B.slice();let z=X.pop();for(;Y&&X.length;)Y=X.every(G=>z.intersects(G,V)),z=X.pop();return Y},v=(B,V)=>(B=B.replace(l[c.BUILD],""),s("comp",B,V),B=E(B,V),s("caret",B),B=_(B,V),s("tildes",B),B=O(B,V),s("xrange",B),B=M(B,V),s("stars",B),B),w=B=>!B||B.toLowerCase()==="x"||B==="*",_=(B,V)=>B.trim().split(/\s+/).map(Y=>x(Y,V)).join(" "),x=(B,V)=>{const Y=V.loose?l[c.TILDELOOSE]:l[c.TILDE];return B.replace(Y,(X,z,G,ae,ue)=>{s("tilde",B,X,z,G,ae,ue);let L;return w(z)?L="":w(G)?L=`>=${z}.0.0 <${+z+1}.0.0-0`:w(ae)?L=`>=${z}.${G}.0 <${z}.${+G+1}.0-0`:ue?(s("replaceTilde pr",ue),L=`>=${z}.${G}.${ae}-${ue} <${z}.${+G+1}.0-0`):L=`>=${z}.${G}.${ae} <${z}.${+G+1}.0-0`,s("tilde return",L),L})},E=(B,V)=>B.trim().split(/\s+/).map(Y=>T(Y,V)).join(" "),T=(B,V)=>{s("caret",B,V);const Y=V.loose?l[c.CARETLOOSE]:l[c.CARET],X=V.includePrerelease?"-0":"";return B.replace(Y,(z,G,ae,ue,L)=>{s("caret",B,z,G,ae,ue,L);let K;return w(G)?K="":w(ae)?K=`>=${G}.0.0${X} <${+G+1}.0.0-0`:w(ue)?G==="0"?K=`>=${G}.${ae}.0${X} <${G}.${+ae+1}.0-0`:K=`>=${G}.${ae}.0${X} <${+G+1}.0.0-0`:L?(s("replaceCaret pr",L),G==="0"?ae==="0"?K=`>=${G}.${ae}.${ue}-${L} <${G}.${ae}.${+ue+1}-0`:K=`>=${G}.${ae}.${ue}-${L} <${G}.${+ae+1}.0-0`:K=`>=${G}.${ae}.${ue}-${L} <${+G+1}.0.0-0`):(s("no pr"),G==="0"?ae==="0"?K=`>=${G}.${ae}.${ue}${X} <${G}.${ae}.${+ue+1}-0`:K=`>=${G}.${ae}.${ue}${X} <${G}.${+ae+1}.0-0`:K=`>=${G}.${ae}.${ue} <${+G+1}.0.0-0`),s("caret return",K),K})},O=(B,V)=>(s("replaceXRanges",B,V),B.split(/\s+/).map(Y=>R(Y,V)).join(" ")),R=(B,V)=>{B=B.trim();const Y=V.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return B.replace(Y,(X,z,G,ae,ue,L)=>{s("xRange",B,X,z,G,ae,ue,L);const K=w(G),Q=K||w(ae),re=Q||w(ue),F=re;return z==="="&&F&&(z=""),L=V.includePrerelease?"-0":"",K?z===">"||z==="<"?X="<0.0.0-0":X="*":z&&F?(Q&&(ae=0),ue=0,z===">"?(z=">=",Q?(G=+G+1,ae=0,ue=0):(ae=+ae+1,ue=0)):z==="<="&&(z="<",Q?G=+G+1:ae=+ae+1),z==="<"&&(L="-0"),X=`${z+G}.${ae}.${ue}${L}`):Q?X=`>=${G}.0.0${L} <${+G+1}.0.0-0`:re&&(X=`>=${G}.${ae}.0${L} <${G}.${+ae+1}.0-0`),s("xRange return",X),X})},M=(B,V)=>(s("replaceStars",B,V),B.trim().replace(l[c.STAR],"")),N=(B,V)=>(s("replaceGTE0",B,V),B.trim().replace(l[V.includePrerelease?c.GTE0PRE:c.GTE0],"")),j=B=>(V,Y,X,z,G,ae,ue,L,K,Q,re,F)=>(w(X)?Y="":w(z)?Y=`>=${X}.0.0${B?"-0":""}`:w(G)?Y=`>=${X}.${z}.0${B?"-0":""}`:ae?Y=`>=${Y}`:Y=`>=${Y}${B?"-0":""}`,w(K)?L="":w(Q)?L=`<${+K+1}.0.0-0`:w(re)?L=`<${K}.${+Q+1}.0-0`:F?L=`<=${K}.${Q}.${re}-${F}`:B?L=`<${K}.${Q}.${+re+1}-0`:L=`<=${L}`,`${Y} ${L}`.trim()),U=(B,V,Y)=>{for(let X=0;X<B.length;X++)if(!B[X].test(V))return!1;if(V.prerelease.length&&!Y.includePrerelease){for(let X=0;X<B.length;X++)if(s(B[X].semver),B[X].semver!==a.ANY&&B[X].semver.prerelease.length>0){const z=B[X].semver;if(z.major===V.major&&z.minor===V.minor&&z.patch===V.patch)return!0}return!1}return!0};return kC}var OC,V7;function ck(){if(V7)return OC;V7=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,f){if(f=n(f),u instanceof e){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(u){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new o(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}OC=e;const n=bM,{safeRe:r,t:i}=W1,a=lPe,s=lk,o=_M,l=Pl();return OC}Pl();Pl();Pl();Pl();Pl();Pl();const fPe=ck(),{ANY:cbt}=fPe;Pl();Pl();Pl();const xM=ck(),{ANY:ubt}=xM;new xM(">=0.0.0-0");new xM(">=0.0.0");const TC=W1,W7=ok,H7=Zee;ck();Pl();TC.re,TC.src,TC.t,W7.SEMVER_SPEC_VERSION,W7.RELEASE_TYPES,H7.compareIdentifiers,H7.rcompareIdentifiers;function _f(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[i,a]=e.split("/",2);if(!i||!a)throw new Error(`Invalid identifier format: ${t}`);return[i,a,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class dPe extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class hPe extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function q7(t){return t!=null&&typeof t=="object"&&"name"in t&&(t==null?void 0:t.name)==="LangSmithNotFoundError"}async function gt(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}if(t.status===403)try{const s=await t.json();(s==null?void 0:s.error)==="org_scoped_key_requires_workspace"&&(r="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${t.status} ${t.statusText}`);throw o.status=t==null?void 0:t.status,o}if(r===void 0)try{r=await t.text()}catch{r=""}const i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Message: ${r}`;if(t.status===404)throw new hPe(i);if(t.status===409)throw new dPe(i);const a=new Error(i);throw a.status=t.status,a}const Xee="ERR_CONFLICTING_ENDPOINTS";class pPe extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:Xee}),this.name="ConflictingEndpointsError"}}function mPe(t){return typeof t=="object"&&t!==null&&t.code===Xee}var G7="[...]",gPe={result:"[Circular]"},TE=[],lg=[];const yPe=new TextEncoder;function vPe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Gx(t){return yPe.encode(t)}function Jee(t){if(t&&typeof t=="object"&&t!==null){if(t instanceof Map)return Object.fromEntries(t);if(t instanceof Set)return Array.from(t);if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(t instanceof Error)return{name:t.name,message:t.message}}else if(typeof t=="bigint")return t.toString();return t}function wPe(t){return function(e,n){return Jee(n)}}function vs(t,e,n,r,i){var a;try{const s=JSON.stringify(t,wPe(n),r);return Gx(s)}catch(s){if(!((a=s.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),Gx("[Unserializable]");Aa("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i>"u"&&(i=vPe()),oR(t,"",0,[],void 0,0,i);let o;try{lg.length===0?o=JSON.stringify(t,n,r):o=JSON.stringify(t,bPe(n),r)}catch{return Gx("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;TE.length!==0;){const l=TE.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return Gx(o)}}function CC(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),TE.push([r,n,e,i])):lg.push([e,n,t]):(r[n]=t,TE.push([r,n,e]))}function oR(t,e,n,r,i,a,s){a+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){CC(gPe,t,e,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){CC(G7,t,e,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){CC(G7,t,e,i);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)oR(t[o],o,o,r,t,a,s);else{t=Jee(t);var l=Object.keys(t);for(o=0;o<l.length;o++){var c=l[o];oR(t[c],c,o,r,t,a,s)}}r.pop()}}function bPe(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(lg.length>0)for(var r=0;r<lg.length;r++){var i=lg[r];if(i[1]===e&&i[0]===n){n=i[2],lg.splice(r,1);break}}return t.call(this,e,n)}}function K7(t,e,n){if(n)return t;const r=Dee(),i=e??Fee(),a=t.extra??{},s=a.metadata;return t.extra={...a,runtime:{...r,...a==null?void 0:a.runtime},metadata:{...i,...i.revision_id||"revision_id"in t&&t.revision_id?{revision_id:("revision_id"in t?t.revision_id:void 0)??i.revision_id}:{},...s}},t}const _Pe=t=>{const e=(t==null?void 0:t.toString())??Aa("TRACING_SAMPLING_RATE");if(e===void 0)return;const n=parseFloat(e);if(n<0||n>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${n}`);return n},xPe=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function SPe(t){const e=[];for await(const n of t)e.push(n);return e}function Kx(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const EPe=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"10",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};function Y7(t){return typeof t=="number"?Number(t.toFixed(4)):t}const APe=24*1024*1024,Qee=1024*1024*1024,kPe=1e4,OPe=100,Z7="https://api.smith.langchain.com";class TPe{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??Qee}peek(){return this.items[0]}push(e){let n;const r=new Promise(a=>{n=a}),i=vs(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+i>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${i} bytes.`),n(),r):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:n,itemPromise:r,size:i}),this.sizeBytes+=i,r)}pop({upToSizeBytes:e,upToSize:n}){var a;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const r=[];let i=0;for(;i+(((a=this.peek())==null?void 0:a.size)??0)<e&&this.items.length>0&&r.length<n;){const s=this.items.shift();s&&(r.push(s),i+=s.size,this.sizeBytes-=s.size)}if(r.length===0&&this.items.length>0){const s=this.items.shift();r.push(s),i+=s.size,this.sizeBytes-=s.size}return[r.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl,size:s.size})),()=>r.forEach(s=>s.itemPromiseResolve())]}}class py{get _fetch(){return this.fetchImplementation||oTe(this.debug)}constructor(e={}){var i;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:xc("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promptCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_multipartDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_runCompressionDisabled",{enumerable:!0,configurable:!0,writable:!0,value:Aa("DISABLE_RUN_COMPRESSION")==="true"}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:xc("LANGSMITH_DEBUG")==="true"});const n=py.getDefaultClientConfig();if(this.tracingSampleRate=_Pe(e.tracingSamplingRate),this.apiUrl=Kx(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Kx(e.apiKey??n.apiKey),this.webUrl=Kx(e.webUrl??n.webUrl),(i=this.webUrl)!=null&&i.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=Kx(e.workspaceId??Aa("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new M7({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;const r=e.maxIngestMemoryBytes??Qee;this.batchIngestCaller=new M7({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r,...e.callerOptions??{},onFailedResponseHook:EPe,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.omitTracedRuntimeInfo=e.omitTracedRuntimeInfo??!1,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new TPe(r),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,Bee()&&(this.langSmithToOTELTranslator=new tCe),this.cachedLSEnvVarsForMetadata=Fee(),e.cache!==void 0&&e.disablePromptCache&&X2("Both 'cache' and 'disablePromptCache' were provided. The 'cache' parameter is deprecated and will be removed in a future version. Using 'cache' parameter value."),e.cache!==void 0?(X2("The 'cache' parameter is deprecated and will be removed in a future version. Use 'configureGlobalPromptCache()' to configure the global cache, or 'disablePromptCache: true' to disable caching for this client."),e.cache===!1?this._promptCache=void 0:e.cache===!0?this._promptCache=R7:this._promptCache=e.cache):e.disablePromptCache||(this._promptCache=R7)}static getDefaultClientConfig(){const e=Aa("API_KEY"),n=Aa("ENDPOINT")??Z7,r=Aa("HIDE_INPUTS")==="true",i=Aa("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:xPe(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${$ee}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=await this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=await this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",i=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{const s=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(s,`fetch ${e}`),s})}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let i=Number(n.get("offset"))||0;const a=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(a));const s=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(async()=>{const c=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(c,`fetch ${e}`),c}),l=r?r(await o.json()):await o.json();if(l.length===0||(yield l,l.length<a))break;i+=l.length}}async*_getCursorPaginatedList(e,n=null,r="POST",i="runs"){const a=n?{...n}:{};for(;;){const s=JSON.stringify(a),l=await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(u,`fetch ${e}`),u})).json();if(!l||!l[i])break;yield l[i];const c=l.cursors;if(!c||!c.next)break;a.cursor=c.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const i of e)this.filteredPostUuids.has(i.trace_id)?i.id===i.trace_id&&this.filteredPostUuids.delete(i.trace_id):r.push(i);return r}else{const r=[];for(const i of e){const a=i.trace_id??i.id;this.filteredPostUuids.has(a)||(i.id===a?this._shouldSample()?r.push(i):this.filteredPostUuids.add(a):r.push(i))}return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??APe}async _getBatchSizeLimit(){var n;const e=await this._ensureServerInfo();return this.batchSizeLimit??((n=e==null?void 0:e.batch_ingest_config)==null?void 0:n.size_limit)??OPe}async _getDatasetExamplesMultiPartSupport(){var n;return((n=(await this._ensureServerInfo()).instance_flags)==null?void 0:n.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n}){const r=[];for(;this.autoBatchQueue.items.length>0;){const[i,a]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:n});if(!i.length){a();break}const s=i.reduce((c,u)=>{const f=u.apiUrl??this.apiUrl,d=u.apiKey??this.apiKey,p=u.apiKey===this.apiKey&&u.apiUrl===this.apiUrl?"default":`${f}|${d}`;return c[p]||(c[p]=[]),c[p].push(u),c},{}),o=[];for(const[c,u]of Object.entries(s)){const f=this._processBatch(u,{apiUrl:c==="default"?void 0:c.split("|")[0],apiKey:c==="default"?void 0:c.split("|")[1]});o.push(f)}const l=Promise.all(o).finally(a);r.push(l)}return Promise.all(r)}async _processBatch(e,n){var i,a;if(!e.length)return;const r=e.reduce((s,o)=>s+(o.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(e);else{const s={runCreates:e.filter(c=>c.action==="create").map(c=>c.item),runUpdates:e.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();if(!this._multipartDisabled&&(((i=o==null?void 0:o.batch_ingest_config)==null?void 0:i.use_multipart_endpoint)??!0)){const c=!this._runCompressionDisabled&&((a=o==null?void 0:o.instance_flags)==null?void 0:a.gzip_body_enabled);try{await this.multipartIngestRuns(s,{...n,useGzip:c,sizeBytes:r})}catch(u){if(q7(u))this._multipartDisabled=!0,await this.batchIngestRuns(s,{...n,sizeBytes:r});else throw u}}else await this.batchIngestRuns(s,{...n,sizeBytes:r})}}catch(s){console.error("Error exporting batch:",s)}}_sendBatchToOTELTranslator(e){if(this.langSmithToOTELTranslator!==void 0){const n=new Map,r=[];for(const i of e)i.item.id&&i.otelContext&&(n.set(i.item.id,i.otelContext),i.action==="create"?r.push({operation:"post",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}):r.push({operation:"patch",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}));this.langSmithToOTELTranslator.exportBatch(r,n)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=K7(e.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);const n=this.autoBatchQueue.push(e);if(this.manualFlushMode)return n;const r=await this._getBatchSizeLimitBytes(),i=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>i)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:i})},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const n=await(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(kPe),...this.fetchOptions});return await gt(r,"get server info"),r})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(n,null,2)+`
`),n}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${e.status??"Unspecified status code"} ${e.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:n})}_cloneCurrentOTELContext(){const e=Uee(),n=XTe();if(this.langSmithToOTELTranslator!==void 0){const r=e.getActiveSpan();if(r)return e.setSpan(n.active(),r)}}async createRun(e,n){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},i=e.project_name;delete e.project_name;const a=await this.prepareRunCreateOrUpdateInputs({session_name:i,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){const l=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:a,otelContext:l,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const s=K7(a,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(r["x-tenant-id"]=n.workspaceId);const o=vs(s,`Creating run with id: ${s.id}`);await this.caller.call(async()=>{const l=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await gt(l,"create run",!0),l})}async batchIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;let i=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),a=await Promise.all((n==null?void 0:n.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(i.length>0&&a.length>0){const l=i.reduce((u,f)=>(f.id&&(u[f.id]=f),u),{}),c=[];for(const u of a)u.id!==void 0&&l[u.id]?l[u.id]={...l[u.id],...u}:c.push(u);i=Object.values(l),a=c}const s={post:i,patch:a};if(!s.post.length&&!s.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const c=l,u=s[c].reverse();let f=u.pop();for(;f!==void 0;)o[c].push(f),f=u.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(c=>c.id).concat(o.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(vs(o,`Ingesting runs with ids: ${l}`),r)}}async _postBatchIngestRuns(e,n){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(r["x-api-key"]=n.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const i=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await gt(i,"batch create run",!0),i})}async multipartIngestRuns({runCreates:e,runUpdates:n},r){if(e===void 0&&n===void 0)return;const i={};let a=[];for(const f of e??[]){const d=await this.prepareRunCreateOrUpdateInputs(f);d.id!==void 0&&d.attachments!==void 0&&(i[d.id]=d.attachments),delete d.attachments,a.push(d)}let s=[];for(const f of n??[])s.push(await this.prepareRunCreateOrUpdateInputs(f));if(a.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&s.length>0){const f=a.reduce((h,p)=>(p.id&&(h[p.id]=p),h),{}),d=[];for(const h of s)h.id!==void 0&&f[h.id]?f[h.id]={...f[h.id],...h}:d.push(h);a=Object.values(f),s=d}if(a.length===0&&s.length===0)return;const c=[],u=[];for(const[f,d]of[["post",a],["patch",s]])for(const h of d){const{inputs:p,outputs:m,events:y,extra:g,error:v,serialized:w,attachments:_,...x}=h,E={inputs:p,outputs:m,events:y,extra:g,error:v,serialized:w},T=vs(x,`Serializing for multipart ingestion of run with id: ${x.id}`);u.push({name:`${f}.${x.id}`,payload:new Blob([T],{type:`application/json; length=${T.length}`})});for(const[O,R]of Object.entries(E)){if(R===void 0)continue;const M=vs(R,`Serializing ${O} for multipart ingestion of run with id: ${x.id}`);u.push({name:`${f}.${x.id}.${O}`,payload:new Blob([M],{type:`application/json; length=${M.length}`})})}if(x.id!==void 0){const O=i[x.id];if(O){delete i[x.id];for(const[R,M]of Object.entries(O)){let N,j;if(Array.isArray(M)?[N,j]=M:(N=M.mimeType,j=M.data),R.includes(".")){console.warn(`Skipping attachment '${R}' for run ${x.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}u.push({name:`attachment.${x.id}.${R}`,payload:new Blob([j],{type:`${N}; length=${j.byteLength}`})})}}}c.push(`trace=${x.trace_id},id=${x.id}`)}await this._sendMultipartRequest(u,c.join("; "),r)}async _createNodeFetchBody(e,n){const r=[];for(const s of e)r.push(new Blob([`--${n}\r
`])),r.push(new Blob([`Content-Disposition: form-data; name="${s.name}"\r
`,`Content-Type: ${s.payload.type}\r
\r
`])),r.push(s.payload),r.push(new Blob([`\r
`]));return r.push(new Blob([`--${n}--\r
`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,n){const r=new TextEncoder;return new ReadableStream({async start(a){const s=async o=>{typeof o=="string"?a.enqueue(r.encode(o)):a.enqueue(o)};for(const o of e){await s(`--${n}\r
`),await s(`Content-Disposition: form-data; name="${o.name}"\r
`),await s(`Content-Type: ${o.payload.type}\r
\r
`);const c=o.payload.stream().getReader();try{let u;for(;!(u=await c.read()).done;)a.enqueue(u.value)}finally{c.releaseLock()}await s(`\r
`)}await s(`--${n}--\r
`),a.close()}})}async _sendMultipartRequest(e,n,r){const i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),a=()=>this._createNodeFetchBody(e,i),s=()=>this._createMultipartStream(e,i),o=async l=>this.batchIngestCaller.callWithOptions({sizeBytes:r==null?void 0:r.sizeBytes},async()=>{const c=await l(),u={...this.headers,"Content-Type":`multipart/form-data; boundary=${i}`};(r==null?void 0:r.apiKey)!==void 0&&(u["x-api-key"]=r.apiKey);let f=c;r!=null&&r.useGzip&&typeof c=="object"&&"pipeThrough"in c&&(f=c.pipeThrough(new CompressionStream("gzip")),u["Content-Encoding"]="gzip");const d=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:u,body:f,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(d,"Failed to send multipart request",!0),d});try{let l,c=!1;sTe()&&!this.multipartStreamingDisabled&&Lee()!=="bun"?(c=!0,l=await o(s)):l=await o(a),(!this.multipartStreamingDisabled||c)&&l.status===422&&((r==null?void 0:r.apiUrl)??this.apiUrl)!==Z7&&(console.warn(`Streaming multipart upload to ${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${n}".`),this.multipartStreamingDisabled=!0,l=await o(a))}catch(l){if(q7(l))throw l;console.warn(`${l.message.trim()}

Context: ${n}`)}}async updateRun(e,n,r){zt(e),n.inputs&&(n.inputs=await this.processInputs(n.inputs)),n.outputs&&(n.outputs=await this.processOutputs(n.outputs));const i={...n,id:e};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(n.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const a={...this.headers,"Content-Type":"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(a["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(a["x-tenant-id"]=r.workspaceId);const s=vs(n,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{const o=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(o,"update run",!0),o})}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){zt(e);let r=await this._get(`/runs/${e}`);return n&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:Aa("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){var a;const n=await SPe(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},i={};n.sort((s,o)=>((s==null?void 0:s.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const s of n){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);(a=s.dotted_order)!=null&&a.startsWith(e.dotted_order??"")&&s.id!==e.id&&(s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),i[s.id]=s)}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(i[s].child_runs=r[s]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:i,traceId:a,referenceExampleId:s,startTime:o,executionOrder:l,isRoot:c,runType:u,error:f,id:d,query:h,filter:p,traceFilter:m,treeFilter:y,limit:g,select:v,order:w}=e;let _=[];if(n&&(_=Array.isArray(n)?n:[n]),r){const O=Array.isArray(r)?r:[r],R=await Promise.all(O.map(M=>this.readProject({projectName:M}).then(N=>N.id)));_.push(...R)}const x=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],E={session:_.length?_:null,run_type:u,reference_example:s,query:h,filter:p,trace_filter:m,tree_filter:y,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:f,id:d,limit:g,trace:a,select:v||x,is_root:c,order:w};E.select.includes("child_run_ids")&&X2("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let T=0;for await(const O of this._getCursorPaginatedList("/runs/query",E))if(g){if(T>=g)break;if(O.length+T>g){yield*O.slice(0,g-T);break}T+=O.length,yield*O}else yield*O}async*listGroupRuns(e){const{projectId:n,projectName:r,groupBy:i,filter:a,startTime:s,endTime:o,limit:l,offset:c}=e,f={session_id:n||(await this.readProject({projectName:r})).id,group_by:i,filter:a,start_time:s?s.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100};let d=Number(c)||0;const h="/runs/group",p=`${this.apiUrl}${h}`;for(;;){const m={...f,offset:d},y=Object.fromEntries(Object.entries(m).filter(([E,T])=>T!==void 0)),g=JSON.stringify(y),w=await(await this.caller.call(async()=>{const E=await this._fetch(p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:g});return await gt(E,`Failed to fetch ${h}`),E})).json(),{groups:_,total:x}=w;if(_.length===0)break;for(const E of _)yield E;if(d+=_.length,d>=x)break}}async getRunStats({id:e,trace:n,parentRun:r,runType:i,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:l,endTime:c,error:u,query:f,filter:d,traceFilter:h,treeFilter:p,isRoot:m,dataSourceType:y}){let g=s||[];a&&(g=[...s||[],...await Promise.all(a.map(T=>this.readProject({projectName:T}).then(O=>O.id)))]);const w=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:i,session:g,reference_example:o,start_time:l,end_time:c,error:u,query:f,filter:d,trace_filter:h,tree_filter:p,is_root:m,data_source_type:y}).filter(([T,O])=>O!==void 0)),_=JSON.stringify(w);return await(await this.caller.call(async()=>{const T=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:_});return await gt(T,"get run stats"),T})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||lu()};zt(e);const i=JSON.stringify(r),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await gt(o,"share run"),o})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){zt(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(n,"unshare run",!0),n})}async readRunSharedLink(e){zt(e);const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(i,"read run shared link"),i})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const s of n)r.append("id",s);return zt(e),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(s,"list shared runs"),s})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),zt(e);const i=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(a,"read dataset shared schema"),a})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};zt(e);const i=JSON.stringify(r),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await gt(o,"share dataset"),o})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){zt(e),await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(n,"unshare dataset",!0),n})}async readSharedDataset(e){return zt(e),await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(i,"read shared dataset"),i})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([o,l])=>{Array.isArray(l)?l.forEach(c=>i.append(o,c)):i.append(o,l)});const a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(o,"list shared examples"),o}),s=await a.json();if(!a.ok)throw"detail"in s?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(s.detail)?s.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return s.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:s=null}){const o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,c=a||{};r&&(c.metadata=r);const u={name:e,extra:c,description:n};s!==null&&(u.reference_dataset_id=s);const f=JSON.stringify(u);return await(await this.caller.call(async()=>{const p=await this._fetch(l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await gt(p,"create project"),p})).json()}async updateProject(e,{name:n=null,description:r=null,metadata:i=null,projectExtra:a=null,endTime:s=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=a;i&&(l={...l||{},metadata:i});const c=JSON.stringify({name:n,extra:l,description:r,end_time:s?new Date(s).toISOString():null});return await(await this.caller.call(async()=>{const d=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await gt(d,"update project"),d})).json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)zt(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(s,"has project"),s});try{const s=await a.json();return a.ok?Array.isArray(s)?s.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let i="/sessions";const a=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)zt(e),i+=`/${e}`;else if(n!==void 0)a.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&a.append("include_stats",r.toString());const s=await this._get(i,a);let o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=s[0]}else o=s;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:a,includeStats:s,datasetVersion:o,referenceFree:l,metadata:c}={}){const u=new URLSearchParams;if(e!==void 0)for(const f of e)u.append("id",f);if(n!==void 0&&u.append("name",n),r!==void 0&&u.append("name_contains",r),i!==void 0)u.append("reference_dataset",i);else if(a!==void 0){const f=await this.readDataset({datasetName:a});u.append("reference_dataset",f.id)}s!==void 0&&u.append("include_stats",s.toString()),o!==void 0&&u.append("dataset_version",o),l!==void 0&&u.append("reference_free",l.toString()),c!==void 0&&u.append("metadata",JSON.stringify(c));for await(const f of this._getPaginated("/sessions",u))yield*f}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,zt(r),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(i,`delete session ${r} (${n})`,!0),i})}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:a,dataType:s,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData,u=new Blob([e],{type:"text/csv"});return c.append("file",u,n),r.forEach(h=>{c.append("input_keys",h)}),i.forEach(h=>{c.append("output_keys",h)}),a&&c.append("description",a),s&&c.append("data_type",s),o&&c.append("name",o),await(await this.caller.call(async()=>{const h=await this._fetch(l,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await gt(h,"upload CSV"),h})).json()}async createDataset(e,{description:n,dataType:r,inputsSchema:i,outputsSchema:a,metadata:s}={}){const o={name:e,description:n,extra:s?{metadata:s}:void 0};r&&(o.data_type=r),i&&(o.inputs_schema_definition=i),a&&(o.outputs_schema_definition=a);const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await gt(f,"create dataset"),f})).json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(e)zt(e),r+=`/${e}`;else if(n)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(r,i);let s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);s=a[0]}else s=a;return s}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:i}){let a=e;if(a===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:n})).id);const s=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:a,metadata:s}={}){const o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const c of r)l.append("id",c);i!==void 0&&l.append("name",i),a!==void 0&&l.append("name_contains",a),s!==void 0&&l.append("metadata",JSON.stringify(s));for await(const c of this._getPaginated(o,l))yield*c}async updateDataset(e){const{datasetId:n,datasetName:r,...i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const a=n??(await this.readDataset({datasetName:r})).id;zt(a);const s=JSON.stringify(i);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(l,"update dataset"),l})).json()}async updateDatasetTag(e){const{datasetId:n,datasetName:r,asOf:i,tag:a}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const s=n??(await this.readDataset({datasetName:r})).id;zt(s);const o=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:a});await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${s}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await gt(l,"update dataset tags",!0),l})}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)zt(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(a,`delete ${r}`,!0),a})}async indexDataset({datasetId:e,datasetName:n,tag:r}){let i=e;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:n})).id),zt(i);const s=JSON.stringify({tag:r});await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(l,"index dataset"),l})).json()}async similarExamples(e,n,r,{filter:i}={}){const a={limit:r,inputs:e};i!==void 0&&(a.filter=i),zt(n);const s=JSON.stringify(a);return(await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${n}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:s});return await gt(c,"fetch similar examples"),c})).json()).examples}async createExample(e,n,r){var u;if(X7(e)&&(n!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=n?r==null?void 0:r.datasetId:e.dataset_id;const a=n?r==null?void 0:r.datasetName:e.dataset_name;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const s=(n?r==null?void 0:r.createdAt:e.created_at)||new Date;let o;X7(e)?o=e:o={inputs:e,outputs:n,created_at:s==null?void 0:s.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const l=await this._uploadExamplesMultipart(i,[o]);return await this.readExample(((u=l.example_ids)==null?void 0:u[0])??lu())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const v=e;let w=v[0].dataset_id;const _=v[0].dataset_name;if(w===void 0&&_===void 0)throw new Error("Must provide either datasetName or datasetId");if(w!==void 0&&_!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");w===void 0&&(w=(await this.readDataset({datasetName:_})).id);const x=await this._uploadExamplesMultipart(w,v);return await Promise.all(x.example_ids.map(T=>this.readExample(T)))}const{inputs:n,outputs:r,metadata:i,splits:a,sourceRunIds:s,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:c,exampleIds:u,datasetId:f,datasetName:d}=e;if(n===void 0)throw new Error("Must provide inputs when using legacy parameters");let h=f;const p=d;if(h===void 0&&p===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&p!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(await this.readDataset({datasetName:p})).id);const m=n.map((v,w)=>({dataset_id:h,inputs:v,outputs:r==null?void 0:r[w],metadata:i==null?void 0:i[w],split:a==null?void 0:a[w],id:u==null?void 0:u[w],attachments:c==null?void 0:c[w],source_run_id:s==null?void 0:s[w],use_source_run_io:o==null?void 0:o[w],use_source_run_attachments:l==null?void 0:l[w]})),y=await this._uploadExamplesMultipart(h,m);return await Promise.all(y.example_ids.map(v=>this.readExample(v)))}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(s=>L7(s)?D7(s):s),a=L7(n)?D7(n):n;return this.createExample({input:i},{output:a},r)}async readExample(e){zt(e);const n=`/examples/${e}`,r=await this._get(n),{attachment_urls:i,...a}=r,s=a;return i&&(s.attachments=Object.entries(i).reduce((o,[l,c])=>(o[l.slice(11)]={presigned_url:c.presigned_url,mime_type:c.mime_type},o),{})),s}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:i,splits:a,inlineS3Urls:s,metadata:o,limit:l,offset:c,filter:u,includeAttachments:f}={}){let d;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)d=e;else if(n!==void 0)d=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const h=new URLSearchParams({dataset:d}),p=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;p&&h.append("as_of",p);const m=s??!0;if(h.append("inline_s3_urls",m.toString()),r!==void 0)for(const g of r)h.append("id",g);if(a!==void 0)for(const g of a)h.append("splits",g);if(o!==void 0){const g=JSON.stringify(o);h.append("metadata",g)}l!==void 0&&h.append("limit",l.toString()),c!==void 0&&h.append("offset",c.toString()),u!==void 0&&h.append("filter",u),f===!0&&["attachment_urls","outputs","metadata"].forEach(g=>h.append("select",g));let y=0;for await(const g of this._getPaginated("/examples",h)){for(const v of g){const{attachment_urls:w,..._}=v,x=_;w&&(x.attachments=Object.entries(w).reduce((E,[T,O])=>(E[T.slice(11)]={presigned_url:O.presigned_url,mime_type:O.mime_type||void 0},E),{})),yield x,y++}if(l!==void 0&&y>=l)break}}async deleteExample(e){zt(e);const n=`/examples/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(r,`delete ${n}`,!0),r})}async deleteExamples(e,n){if(e.forEach(r=>zt(r)),n!=null&&n.hardDelete){const r=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${r}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:e,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(i,"hard delete examples",!0),i})}else{const r=new URLSearchParams;e.forEach(i=>r.append("example_ids",i)),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/examples?${r.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(i,"delete examples",!0),i})}}async updateExample(e,n){let r;n?r=e:r=e.id,zt(r);let i;n?i={id:r,...n}:i=e;let a;return i.dataset_id!==void 0?a=i.dataset_id:a=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(a,[i])}async updateExamples(e){let n;return e[0].dataset_id===void 0?n=(await this.readExample(e[0].id)).dataset_id:n=e[0].dataset_id,this._updateExamplesMultipart(n,e)}async readDatasetVersion({datasetId:e,datasetName:n,asOf:r,tag:i}){let a;if(e?a=e:a=(await this.readDataset({datasetName:n})).id,zt(a),r&&i||!r&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const s=new URLSearchParams;return r!==void 0&&s.append("as_of",typeof r=="string"?r:r.toISOString()),i!==void 0&&s.append("tag",i),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/version?${s.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(l,"read dataset version"),l})).json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let i;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:n})).id:i=e,zt(i);const a=new URLSearchParams,s=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return s&&a.append("as_of",s),await this._get(`/datasets/${i}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:i,remove:a=!1}){let s;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:n})).id:s=e,zt(s);const o={split_name:r,examples:i.map(c=>(zt(c),c)),remove:a},l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${s}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await gt(c,"update dataset splits",!0),c})}async createFeedback(e,n,{score:r,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:u,feedbackConfig:f,projectId:d,comparativeExperimentId:h,sessionId:p,startTime:m}){var _;if(!e&&!d)throw new Error("One of runId or projectId must be provided");if(e&&d)throw new Error("Only one of runId or projectId can be provided");const y={type:l??"api",metadata:o??{}};c!==void 0&&(y==null?void 0:y.metadata)!==void 0&&!y.metadata.__run&&(y.metadata.__run={run_id:c}),(y==null?void 0:y.metadata)!==void 0&&((_=y.metadata.__run)==null?void 0:_.run_id)!==void 0&&zt(y.metadata.__run.run_id);const g={id:u??lu(),run_id:e,key:n,score:Y7(r),value:i,correction:a,comment:s,feedback_source:y,comparative_experiment_id:h,feedbackConfig:f,session_id:p??d,start_time:m},v=JSON.stringify(g),w=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const x=await this._fetch(w,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:v});return await gt(x,"create feedback",!0),x}),g}async updateFeedback(e,{score:n,value:r,correction:i,comment:a}){const s={};n!=null&&(s.score=Y7(n)),r!=null&&(s.value=r),i!=null&&(s.correction=i),a!=null&&(s.comment=a),zt(e);const o=JSON.stringify(s);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await gt(l,"update feedback",!0),l})}async readFeedback(e){zt(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){zt(e);const n=`/feedback/${e}`;await this.caller.call(async()=>{const r=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(r,`delete ${n}`,!0),r})}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e)for(const a of e)zt(a),i.append("run",a);if(n)for(const a of n)i.append("key",a);if(r)for(const a of r)i.append("source",a);for await(const a of this._getPaginated("/feedback",i))yield*a}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:i}={}){const a={run_id:e,feedback_key:n,feedback_config:i};r?typeof r=="string"?a.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(a.expires_in=r):a.expires_in={hours:3};const s=JSON.stringify(a);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(l,"create presigned feedback token"),l})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:i,description:a,metadata:s,id:o}){var f;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const l={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:a,created_at:(f=i??new Date)==null?void 0:f.toISOString(),extra:{}};s&&(l.extra.metadata=s);const c=JSON.stringify(l);return(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await gt(d,"create comparative experiment"),d})).json()}async*listPresignedFeedbackTokens(e){zt(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:Array.isArray(e)?n=e:n=[e],n}async _logEvaluationFeedback(e,n,r){const i=this._selectEvalResults(e),a=[];for(const s of i){let o=r||{};s.evaluatorInfo&&(o={...s.evaluatorInfo,...o});let l=null;s.targetRunId?l=s.targetRunId:n&&(l=n.id),a.push(await this.createFeedback(l,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:o,sourceRunId:s.sourceRunId,feedbackConfig:s.feedbackConfig,feedbackSourceType:"model",sessionId:n==null?void 0:n.session_id,startTime:n==null?void 0:n.start_time}))}return[i,a]}async logEvaluationFeedback(e,n,r){const[i]=await this._logEvaluationFeedback(e,n,r);return i}async createFeedbackConfig(e){const{feedbackKey:n,feedbackConfig:r,isLowerScoreBetter:i=!1}=e,a={feedback_key:n,feedback_config:r,is_lower_score_better:i};return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)});return await gt(o,"create feedback config"),o})).json()}async*listFeedbackConfigs(e={}){const{feedbackKeys:n,nameContains:r,limit:i}=e,a=new URLSearchParams;n&&n.forEach(o=>{a.append("key",o)}),r&&a.append("name_contains",r),a.append("limit",(i!==void 0?Math.min(i,100):100).toString());let s=0;for await(const o of this._getPaginated("/feedback-configs",a))if(yield*o,s+=o.length,i!==void 0&&s>=i)break}async updateFeedbackConfig(e,n={}){const{feedbackConfig:r,isLowerScoreBetter:i}=n,a={feedback_key:e};return r!==void 0&&(a.feedback_config=r),i!==void 0&&(a.is_lower_score_better=i),(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)});return await gt(o,"update feedback config"),o})).json()}async deleteFeedbackConfig(e){const n=new URLSearchParams({feedback_key:e});await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/feedback-configs?${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(r,"delete feedback config",!0),r})}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:i,limit:a}=e,s=new URLSearchParams;n&&n.forEach((l,c)=>{zt(l,`queueIds[${c}]`),s.append("ids",l)}),r&&s.append("name",r),i&&s.append("name_contains",i),s.append("limit",(a!==void 0?Math.min(a,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",s))if(yield*l,o++,a!==void 0&&o>=a)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:i,rubricInstructions:a,rubricItems:s}=e,o={name:n,description:r,id:i||lu(),rubric_instructions:a,rubric_items:s},l=JSON.stringify(Object.fromEntries(Object.entries(o).filter(([u,f])=>f!==void 0)));return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await gt(u,"create annotation queue"),u})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${zt(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(r,"read annotation queue"),r})).json()}async updateAnnotationQueue(e,n){const{name:r,description:i,rubricInstructions:a,rubricItems:s}=n,o={};r!==void 0&&(o.name=r),i!==void 0&&(o.description=i),a!==void 0&&(o.rubric_instructions=a),s!==void 0&&(o.rubric_items=s);const l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues/${zt(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await gt(c,"update annotation queue",!0),c})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${zt(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(n,"delete annotation queue",!0),n})}async addRunsToAnnotationQueue(e,n){const r=JSON.stringify(n.map((i,a)=>zt(i,`runIds[${a}]`).toString()));await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${zt(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await gt(i,"add runs to annotation queue",!0),i})}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${zt(e,"queueId")}/run`;return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(a,"get run from annotation queue"),a})).json()}async deleteRunFromAnnotationQueue(e,n){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${zt(e,"queueId")}/runs/${zt(n,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${zt(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(r,"get size from annotation queue"),r})).json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const r=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(i,"get latest commit hash"),i})).json();if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,i,a]=_f(e),s=JSON.stringify({like:n});return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(l,`${n?"like":"unlike"} prompt`),l})).json()}async _getPromptUrl(e){const[n,r,i]=_f(e);if(await this._currentTenantIsOwner(n)){const a=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${a.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,i=>i.repos))yield*r}async getPrompt(e){const[n,r,i]=_f(e),a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(o==null?void 0:o.status)===404?null:(await gt(o,"get prompt"),o)}),s=await(a==null?void 0:a.json());return s!=null&&s.repo?s.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,a,s]=_f(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const o={repo_handle:a,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},l=JSON.stringify(o),c=await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await gt(f,"create prompt"),f}),{repo:u}=await c.json();return u}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,a,s]=_f(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${a}`):r==null?void 0:r.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},c=JSON.stringify(l),f=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/commits/${i}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await gt(d,"create commit"),d})).json();return this._getPromptUrl(`${i}/${a}${f.commit_hash?`:${f.commit_hash}`:""}`)}async updateExamplesMultipart(e,n=[]){return this._updateExamplesMultipart(e,n)}async _updateExamplesMultipart(e,n=[]){var s;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of n){const l=o.id,c={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},u=vs(c,`Serializing body for example with id: ${l}`),f=new Blob([u],{type:"application/json"});if(r.append(l,f),o.inputs){const d=vs(o.inputs,`Serializing inputs for example with id: ${l}`),h=new Blob([d],{type:"application/json"});r.append(`${l}.inputs`,h)}if(o.outputs){const d=vs(o.outputs,`Serializing outputs whle updating example with id: ${l}`),h=new Blob([d],{type:"application/json"});r.append(`${l}.outputs`,h)}if(o.attachments)for(const[d,h]of Object.entries(o.attachments)){let p,m;Array.isArray(h)?[p,m]=h:(p=h.mimeType,m=h.data);const y=new Blob([m],{type:`${p}; length=${m.byteLength}`});r.append(`${l}.attachment.${d}`,y)}if(o.attachments_operations){const d=vs(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),h=new Blob([d],{type:"application/json"});r.append(`${l}.attachments_operations`,h)}}const i=e??((s=n[0])==null?void 0:s.dataset_id);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${i}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await gt(o,"update examples"),o})).json()}async uploadExamplesMultipart(e,n=[]){return this._uploadExamplesMultipart(e,n)}async _uploadExamplesMultipart(e,n=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const a of n){const s=(a.id??lu()).toString(),o={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},l=vs(o,`Serializing body for uploaded example with id: ${s}`),c=new Blob([l],{type:"application/json"});if(r.append(s,c),a.inputs){const u=vs(a.inputs,`Serializing inputs for uploaded example with id: ${s}`),f=new Blob([u],{type:"application/json"});r.append(`${s}.inputs`,f)}if(a.outputs){const u=vs(a.outputs,`Serializing outputs for uploaded example with id: ${s}`),f=new Blob([u],{type:"application/json"});r.append(`${s}.outputs`,f)}if(a.attachments)for(const[u,f]of Object.entries(a.attachments)){let d,h;Array.isArray(f)?[d,h]=f:(d=f.mimeType,h=f.data);const p=new Blob([h],{type:`${d}; length=${h.byteLength}`});r.append(`${s}.attachment.${u}`,p)}}return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await gt(a,"upload examples"),a})).json()}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=_f(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if((n==null?void 0:n.description)!==void 0&&(a.description=n.description),(n==null?void 0:n.readme)!==void 0&&(a.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(a.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(a.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(a.is_archived=n.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const s=JSON.stringify(a);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await gt(l,"update prompt"),l})).json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,i]=_f(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(s,"delete prompt"),s})).json()}_getPromptCacheKey(e,n){return`${e}${n?":with_model":""}`}async _fetchPromptFromApi(e,n){const[r,i,a]=_f(e),o=await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/commits/${r}/${i}/${a}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await gt(l,"pull prompt commit"),l})).json();return{owner:r,repo:i,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async pullPromptCommit(e,n){const r=this._fetchPromptFromApi.bind(this,e,n);if(!(n!=null&&n.skipCache)&&this._promptCache){const i=this._getPromptCacheKey(e,n==null?void 0:n.includeModel),a=this._promptCache.get(i,r);if(a)return a;const s=await r();return this._promptCache.set(i,s,r),s}return this._fetchPromptFromApi(e,n)}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel,skipCache:n==null?void 0:n.skipCache});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(i=>i!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=n,[a,s]=this.parseTokenOrUrl(e,r),o=new py({apiUrl:a,apiKey:"placeholder"}),l=await o.readSharedDataset(s),c=i||l.name;try{if(await this.hasDataset({datasetId:c})){console.log(`Dataset ${c} already exists in your tenant. Skipping.`);return}}catch{}const u=await o.listSharedExamples(s),f=await this.createDataset(c,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map(d=>d.inputs),outputs:u.flatMap(d=>d.outputs?[d.outputs]:[]),datasetId:f.id})}catch(d){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),d}}parseTokenOrUrl(e,n,r=2,i="dataset"){try{return zt(e),[n,e]}catch{}try{const s=new URL(e).pathname.split("/").filter(o=>o!=="");if(s.length>=r){const o=s[s.length-r];return[n,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}cleanup(){this._promptCache&&this._promptCache.stop()}async awaitPendingTraceBatches(){var e,n;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await new Promise(r=>setTimeout(r,1)),await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:r})=>r),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((n=(e=JTe())==null?void 0:e.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:n.forceFlush())}}function X7(t){return"dataset_id"in t||"dataset_name"in t}const CPe=t=>!!["TRACING_V2","TRACING"].find(n=>Aa(n)==="true"),ld=Symbol.for("lc:context_variables"),PC=Symbol.for("langsmith:replica_trace_roots");function J7(t,e){if(ld in t)return t[ld][e]}function PPe(t,e,n){const r=ld in t?t[ld]:{};r[e]=n,t[ld]=r}const NPe="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function Q7(t){const n=Object.keys(t).sort().map(r=>`${r}:${t[r]??""}`).join("|");return AE(n,NPe)}function IPe(t){return t.replace(/[-:.]/g,"")}function ete(t,e=1){const n=e.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(t).toISOString().slice(0,-1)}${n}Z`}function tte(t,e,n=1){const r=ete(t,n);return{dottedOrder:IPe(r)+e,microsecondPrecisionDatestring:r}}const RPe=new Set(["projectName","updates","reroot"]);function jPe(t){const e={};for(const n of Object.keys(t))RPe.has(n)&&(e[n]=t[n]);return e}class CE{constructor(e,n,r,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n,this.project_name=r,this.replicas=i}static fromHeader(e){const n=e.split(",");let r={},i=[],a,s;for(const o of n){const[l,c]=o.split("="),u=decodeURIComponent(c);l==="langsmith-metadata"?r=JSON.parse(u):l==="langsmith-tags"?i=u.split(","):l==="langsmith-project"?a=u:l==="langsmith-replicas"&&(s=JSON.parse(u).map(d=>Array.isArray(d)?d:jPe(d)))}return new CE(r,i,a,s)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class Ha{constructor(e){var o;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),$Pe(e)){Object.assign(this,{...e});return}const n=Ha.getDefaultConfig(),{metadata:r,...i}=e,a=i.client??Ha.getSharedClient(),s={...r,...(o=i==null?void 0:i.extra)==null?void 0:o.metadata};if(i.extra={...i.extra,metadata:s},"id"in i&&i.id==null&&delete i.id,Object.assign(this,{...n,...i,client:a}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=ete(this.start_time,this.execution_order)),this.id||(this.id=CTe(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=FPe(this.replicas),!this.dotted_order){const{dottedOrder:l}=tte(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l}}set metadata(e){var n;this.extra={...this.extra,metadata:{...(n=this.extra)==null?void 0:n.metadata,...e}}}get metadata(){var e;return(e=this.extra)==null?void 0:e.metadata}static getDefaultConfig(){const e=Date.now();return{run_type:"chain",project_name:Oee(),child_runs:[],api_url:xc("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:xc("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Ha.sharedClient||(Ha.sharedClient=new py),Ha.sharedClient}createChild(e){var u,f,d,h,p,m,y;const n=this.child_execution_order+1,r=(u=this.replicas)==null?void 0:u.map(g=>{const{reroot:v,...w}=g;return w}),i=e.replicas??r,a=new Ha({...e,parent_run:this,project_name:this.project_name,replicas:i,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});ld in this&&(a[ld]=this[ld]);const s=Symbol.for("lc:child_config"),o=((f=e.extra)==null?void 0:f[s])??this.extra[s];if(LPe(o)){const g={...o},v=MPe(g.callbacks)?(h=(d=g.callbacks).copy)==null?void 0:h.call(d):void 0;v&&(Object.assign(v,{_parentRunId:a.id}),(y=(m=(p=v.handlers)==null?void 0:p.find(nte))==null?void 0:m.updateFromRunTree)==null||y.call(m,a),g.callbacks=v),a.extra[s]=g}const l=new Set;let c=this;for(;c!=null&&!l.has(c.id);)l.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,n),c=c.parent_run;return this.child_runs.push(a),a}async end(e,n,r=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,n,r=!0){var o,l;const i=e.extra??{};if(((o=i==null?void 0:i.runtime)==null?void 0:o.library)===void 0&&(i.runtime||(i.runtime={}),n))for(const[c,u]of Object.entries(n))i.runtime[c]||(i.runtime[c]=u);let a,s;return r?(s=((l=e.parent_run)==null?void 0:l.id)??e.parent_run_id,a=[]):(a=e.child_runs.map(c=>this._convertToCreate(c,n,r)),s=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:s,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_sliceParentId(e,n){if(n.dotted_order){const r=n.dotted_order.split(".");let i=null;for(let a=0;a<r.length;a++)if(r[a].slice(-36)===e){i=a;break}if(i!==null){const a=r.slice(i+1);n.dotted_order=a.join("."),a.length>0?n.trace_id=a[0].slice(-36):n.trace_id=n.id}}n.parent_run_id===e&&(n.parent_run_id=void 0)}_setReplicaTraceRoot(e,n){const r=J7(this,PC)??{};r[e]=n,PPe(this,PC,r);for(const i of this.child_runs)i._setReplicaTraceRoot(e,n)}_remapForProject(e){const{projectName:n,runtimeEnv:r,excludeChildRuns:i=!0,reroot:a=!1,distributedParentId:s,apiUrl:o,apiKey:l,workspaceId:c}=e,u=this._convertToCreate(this,r,i);if(n===this.project_name)return{...u,session_name:n};if(a){if(s)this._sliceParentId(s,u);else if(u.parent_run_id=void 0,u.dotted_order){const v=u.dotted_order.split(".");v.length>0&&(u.dotted_order=v[v.length-1],u.trace_id=u.id)}const g=Q7({projectName:n,apiUrl:o,apiKey:l,workspaceId:c});this._setReplicaTraceRoot(g,u.id)}let f;if(!a){const g=J7(this,PC)??{},v=Q7({projectName:n,apiUrl:o,apiKey:l,workspaceId:c});if(f=g[v],f&&(u.trace_id=f,u.dotted_order)){const w=u.dotted_order.split(".");let _=null;for(let x=0;x<w.length;x++)if(w[x].slice(-36)===f){_=x;break}if(_!==null){const x=w.slice(_);u.dotted_order=x.join(".")}}}const d=u.id,h=Bx(d,n);let p;u.trace_id?p=Bx(u.trace_id,n):p=h;let m;u.parent_run_id&&(m=Bx(u.parent_run_id,n));let y;return u.dotted_order&&(y=u.dotted_order.split(".").map(w=>{const _=w.slice(-36),x=Bx(_,n);return w.slice(0,-36)+x}).join(".")),{...u,id:h,trace_id:p,parent_run_id:m,dotted_order:y,session_name:n}}async postRun(e=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{const n=Dee();if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:a,workspaceId:s,reroot:o}of this.replicas){const l=this._remapForProject({projectName:r??this.project_name,runtimeEnv:n,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:i,workspaceId:s});await this.client.createRun(l,{apiKey:i,apiUrl:a,workspaceId:s})}else{const r=this._convertToCreate(this,n,e);await this.client.createRun(r)}if(!e){X2("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const r of this.child_runs)await r.postRun(!1)}this.child_runs=[]}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(e){var n;if(this.replicas&&this.replicas.length>0)for(const{projectName:r,apiKey:i,apiUrl:a,workspaceId:s,updates:o,reroot:l}of this.replicas){const c=this._remapForProject({projectName:r??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:l,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:i,workspaceId:s}),u={id:c.id,name:c.name,run_type:c.run_type,start_time:c.start_time,outputs:c.outputs,error:c.error,parent_run_id:c.parent_run_id,session_name:c.session_name,reference_example_id:c.reference_example_id,end_time:c.end_time,dotted_order:c.dotted_order,trace_id:c.trace_id,events:c.events,tags:c.tags,extra:c.extra,attachments:this.attachments,...o};e!=null&&e.excludeInputs||(u.inputs=c.inputs),await this.client.updateRun(c.id,u,{apiKey:i,apiUrl:a,workspaceId:s})}else try{const r={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((n=this.parent_run)==null?void 0:n.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e!=null&&e.excludeInputs||(r.inputs=this.inputs),await this.client.updateRun(this.id,r)}catch(r){console.error(`Error in patchRun for run ${this.id}`,r)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,n){var c,u,f,d;const r=e==null?void 0:e.callbacks;let i,a,s,o=CPe();if(r){const h=((c=r==null?void 0:r.getParentRunId)==null?void 0:c.call(r))??"",p=(u=r==null?void 0:r.handlers)==null?void 0:u.find(m=>(m==null?void 0:m.name)=="langchain_tracer");i=(f=p==null?void 0:p.getRun)==null?void 0:f.call(p,h),a=p==null?void 0:p.projectName,s=p==null?void 0:p.client,o=o||!!p}return i?new Ha({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:s,tracingEnabled:o,project_name:a,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(d=i==null?void 0:i.extra)==null?void 0:d.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new Ha({...n,client:s,tracingEnabled:o,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var u;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const a=i.trim(),s=a.split(".").map(f=>{const[d,h]=f.split("Z");return{strTime:d,time:Date.parse(d+"Z"),uuid:h}}),o=s[0].uuid,l={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(u=s.at(-1))==null?void 0:u.uuid,trace_id:o,dotted_order:a};if(r.baggage&&typeof r.baggage=="string"){const f=CE.fromHeader(r.baggage);l.metadata=f.metadata,l.tags=f.tags,l.project_name=f.project_name,l.replicas=f.replicas}const c=new Ha(l);return c.distributedParentId=c.id,c}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new CE((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[i,a]of Object.entries(n))e.set(i,a);return n}}Object.defineProperty(Ha,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function $Pe(t){return t!=null&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function nte(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function eU(t){return Array.isArray(t)&&t.some(e=>nte(e))}function MPe(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function LPe(t){const e=t==null?void 0:t.callbacks;return t!=null&&typeof e=="object"&&(eU(e==null?void 0:e.handlers)||eU(e))}function DPe(){const t=xc("LANGSMITH_RUNS_ENDPOINTS");if(!t)return[];try{const e=JSON.parse(t);if(Array.isArray(e)){const n=[];for(const r of e){if(typeof r!="object"||r===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof r}`);continue}if(typeof r.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_url}`);continue}if(typeof r.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof r.api_key}`);continue}n.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key})}return n}else if(typeof e=="object"&&e!==null){BPe(e);const n=[];for(const[r,i]of Object.entries(e)){const a=r.replace(/\/$/,"");if(typeof i=="string")n.push({apiUrl:a,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof i}`);continue}}return n}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof e}`),[]}catch(e){if(mPe(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function FPe(t){return t?t.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):DPe()}function BPe(t){if(Object.keys(t).length>0&&Aa("ENDPOINT"))throw new pPe}var rte={};At(rte,{BaseTracer:()=>Yu,isBaseTracer:()=>Bm});const UPe=t=>{if(t)return t.events=t.events??[],t.child_runs=t.child_runs??[],t};function lR(t,e){if(t)return new Ha({...t,start_time:t._serialized_start_time??t.start_time,parent_run:lR(e),child_runs:t.child_runs.map(n=>lR(n)).filter(n=>n!==void 0),extra:{...t.extra,runtime:xee()},tracingEnabled:!1})}function NC(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function Bm(t){return typeof t._addRunToRunMap=="function"}var Yu=class extends cv{constructor(e){super(...arguments);P(this,"runMap",new Map);P(this,"runTreeMap",new Map);P(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(e){if(e!==void 0)return this.usesRunTreeMap?UPe(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const{dottedOrder:n,microsecondPrecisionDatestring:r}=tte(new Date(e.start_time).getTime(),e.id,e.execution_order),i={...e},a=this.getRunById(i.parent_run_id);if(i.parent_run_id!==void 0?a?(this._addChildRun(a,i),a.child_execution_order=Math.max(a.child_execution_order,i.child_execution_order),i.trace_id=a.trace_id,a.dotted_order!==void 0&&(i.dotted_order=[a.dotted_order,n].join("."),i._serialized_start_time=r)):i.parent_run_id=void 0:(i.trace_id=i.id,i.dotted_order=n,i._serialized_start_time=r),this.usesRunTreeMap){const s=lR(i,a);s!==void 0&&this.runTreeMap.set(i.id,s)}else this.runMap.set(i.id,i);return i}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.getRunById(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),await((r=this.onRunUpdate)==null?void 0:r.call(this,e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const n=e!==void 0&&this.getRunById(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),u=Date.now(),f=o?{...a,metadata:o}:a,d={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:f??{},tags:s||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,n,r,i,a,s,o,l){var u,f;const c=this.getRunById(r)??this._createRunForLLMStart(e,n,r,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onLLMStart)==null?void 0:f.call(this,c)),c}_createRunForChatModelStart(e,n,r,i,a,s,o,l){const c=this._getExecutionOrder(i),u=Date.now(),f=o?{...a,metadata:o}:a,d={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:f??{},tags:s||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,n,r,i,a,s,o,l){var u,f;const c=this.getRunById(r)??this._createRunForChatModelStart(e,n,r,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onLLMStart)==null?void 0:f.call(this,c)),c}async handleLLMEnd(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.outputs=e,s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleLLMError(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForChainStart(e,n,r,i,a,s,o,l,c){const u=this._getExecutionOrder(i),f=Date.now(),d={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:n,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:s?{...c,metadata:s}:{...c},tags:a||[]};return this._addRunToRunMap(d)}async handleChainStart(e,n,r,i,a,s,o,l){var u,f;const c=this.getRunById(r)??this._createRunForChainStart(e,n,r,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onChainStart)==null?void 0:f.call(this,c)),c}async handleChainEnd(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=NC(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=NC(a.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleChainError(e,n,r,i,a){var o;const s=this.getRunById(n);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=NC(a.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForToolStart(e,n,r,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),u={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(u)}async handleToolStart(e,n,r,i,a,s,o){var c,u;const l=this.getRunById(r)??this._createRunForToolStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((u=this.onToolStart)==null?void 0:u.call(this,l)),l}async handleToolEnd(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var a;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,n,r,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),u={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,n,r,i,a,s,o){var c,u;const l=this.getRunById(r)??this._createRunForRetrieverStart(e,n,r,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((u=this.onRetrieverStart)==null?void 0:u.call(this,l)),l}async handleRetrieverEnd(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.getRunById(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.getRunById(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,a,s){var l;const o=this.getRunById(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:s==null?void 0:s.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:s==null?void 0:s.chunk})),o}},SM={exports:{}};SM.exports;(function(t){const n=(a=0)=>s=>`\x1B[${38+a};5;${s}m`,r=(a=0)=>(s,o,l)=>`\x1B[${38+a};2;${s};${o};${l}m`;function i(){const a=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[o,l]of Object.entries(s)){for(const[c,u]of Object.entries(l))s[c]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},l[c]=s[c],a.set(u[0],u[1]);Object.defineProperty(s,o,{value:l,enumerable:!1})}return Object.defineProperty(s,"codes",{value:a,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=n(),s.color.ansi16m=r(),s.bgColor.ansi256=n(10),s.bgColor.ansi16m=r(10),Object.defineProperties(s,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(f=>f+f).join(""));const u=Number.parseInt(c,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:o=>s.rgbToAnsi256(...s.hexToRgb(o)),enumerable:!1}}),s}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(SM);var zPe=SM.exports;const ite=wn(zPe);var ate={};At(ate,{ConsoleCallbackHandler:()=>cR});function Sa(t,e){return`${t.open}${e}${t.close}`}function io(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function tU(t){return typeof t=="string"?t.trim():t==null?t:io(t,t.toString())}function xf(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Wa}=ite;var cR=class extends Yu{constructor(){super(...arguments);P(this,"name","console_callback_handler")}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,a,s)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?Sa(ite.bold,o):o}).join(" > ");return Sa(Wa.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.green,"[chain/start]")} [${n}] Entering Chain run with input: ${io(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.cyan,"[chain/end]")} [${n}] [${xf(e)}] Exiting Chain run with output: ${io(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.red,"[chain/error]")} [${n}] [${xf(e)}] Chain run errored with error: ${io(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Sa(Wa.green,"[llm/start]")} [${n}] Entering LLM run with input: ${io(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.cyan,"[llm/end]")} [${n}] [${xf(e)}] Exiting LLM run with output: ${io(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.red,"[llm/error]")} [${n}] [${xf(e)}] LLM run errored with error: ${io(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.green,"[tool/start]")} [${n}] Entering Tool run with input: "${tU(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.cyan,"[tool/end]")} [${n}] [${xf(e)}] Exiting Tool run with output: "${tU((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.red,"[tool/error]")} [${n}] [${xf(e)}] Tool run errored with error: ${io(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${io(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.cyan,"[retriever/end]")} [${n}] [${xf(e)}] Exiting Retriever run with output: ${io(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Sa(Wa.red,"[retriever/error]")} [${n}] [${xf(e)}] Retriever run errored with error: ${io(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Sa(Wa.blue,"[agent/action]")} [${r}] Agent selected action: ${io(n.actions[n.actions.length-1],"[action]")}`)}};let IC;const ste=()=>{if(IC===void 0){const t=mc("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};IC=new py(t)}return IC};let VPe=class{getStore(){}run(e,n){return n()}};const RC=Symbol.for("ls:tracing_async_local_storage"),WPe=new VPe;let HPe=class{getInstance(){return globalThis[RC]??WPe}initializeGlobalInstance(e){globalThis[RC]===void 0&&(globalThis[RC]=e)}};const qPe=new HPe;function GPe(t=!1){const e=qPe.getInstance().getStore();if(!t&&e===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function EM(t){return typeof t=="function"&&"langsmith:traceable"in t}var ote={};At(ote,{LangChainTracer:()=>Q2});function KPe(t){let e;for(const n of t)for(const r of n)Ei.isInstance(r.message)&&r.message.usage_metadata!==void 0&&(e=lM(e,r.message.usage_metadata));return e}var Q2=class lte extends Yu{constructor(n={}){super(n);P(this,"name","langchain_tracer");P(this,"projectName");P(this,"exampleId");P(this,"client");P(this,"replicas");P(this,"usesRunTreeMap",!0);const{exampleId:r,projectName:i,client:a,replicas:s}=n;this.projectName=i??Oee(),this.replicas=s,this.exampleId=r,this.client=a??ste();const o=lte.getTraceableRunTree();o&&this.updateFromRunTree(o)}async persistRun(n){}async onRunCreate(n){var r;if(!((r=n.extra)!=null&&r.lc_defers_inputs)){const i=this.getRunTreeWithTracingConfig(n.id);await(i==null?void 0:i.postRun())}}async onRunUpdate(n){var i;const r=this.getRunTreeWithTracingConfig(n.id);(i=n.extra)!=null&&i.lc_defers_inputs?await(r==null?void 0:r.postRun()):await(r==null?void 0:r.patchRun())}onLLMEnd(n){const r=n.outputs;if(r!=null&&r.generations){const i=KPe(r.generations);if(i!==void 0){n.extra=n.extra??{};const a=n.extra.metadata??{};a.usage_metadata=i,n.extra.metadata=a}}}getRun(n){return this.runTreeMap.get(n)}updateFromRunTree(n){this.runTreeMap.set(n.id,n);let r=n;const i=new Set;for(;r.parent_run&&!(i.has(r.id)||(i.add(r.id),!r.parent_run));)r=r.parent_run;i.clear();const a=[r];for(;a.length>0;){const s=a.shift();!s||i.has(s.id)||(i.add(s.id),this.runTreeMap.set(s.id,s),s.child_runs&&a.push(...s.child_runs))}this.client=n.client??this.client,this.replicas=n.replicas??this.replicas,this.projectName=n.project_name??this.projectName,this.exampleId=n.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(n){const r=this.runTreeMap.get(n);if(r)return new Ha({...r,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return GPe(!0)}catch{return}}};let rp;function YPe(){const t="default"in bu?bu.default:bu;return new t({autoStart:!0,concurrency:1})}function ZPe(){return typeof rp>"u"&&(rp=YPe()),rp}async function Qr(t,e){if(e===!0){const n=yb();n!==void 0?await n.run(void 0,async()=>t()):await t()}else rp=ZPe(),rp.add(async()=>{const n=yb();n!==void 0?await n.run(void 0,async()=>t()):await t()})}async function XPe(){const t=ste();await Promise.allSettled([typeof rp<"u"?rp.onIdle():Promise.resolve(),t.awaitPendingTraceBatches()])}var cte={};At(cte,{awaitAllCallbacks:()=>XPe,consumeCallback:()=>Qr});const JPe=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>mc(n)==="true");function ute(t){var r;const e=yb();if(e===void 0)return;const n=e.getStore();return(r=n==null?void 0:n[yw])==null?void 0:r[t]}const QPe=Symbol("lc:configure_hooks"),eNe=()=>ute(QPe)||[];var fte={};At(fte,{BaseCallbackManager:()=>dte,BaseRunManager:()=>q1,CallbackManager:()=>ja,CallbackManagerForChainRun:()=>pte,CallbackManagerForLLMRun:()=>uR,CallbackManagerForRetrieverRun:()=>hte,CallbackManagerForToolRun:()=>mte,ensureHandler:()=>vb,parseCallbackConfigArg:()=>H1});function H1(t){return t?Array.isArray(t)||"name"in t?{callbacks:t}:t:{}}var dte=class{setHandler(t){return this.setHandlers([t])}},q1=class{constructor(t,e,n,r,i,a,s,o){this.runId=t,this.handlers=e,this.inheritableHandlers=n,this.tags=r,this.inheritableTags=i,this.metadata=a,this.inheritableMetadata=s,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;try{await((n=e.handleText)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleText: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleCustomEvent(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Qr(async()=>{var s;try{await((s=a.handleCustomEvent)==null?void 0:s.call(a,t,e,this.runId,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}},hte=class extends q1{getChild(t){const e=new ja(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleRetrieverEnd(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetriever`),e.raiseError)throw r}},e.awaitHandlers)))}async handleRetrieverError(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;if(!e.ignoreRetriever)try{await((n=e.handleRetrieverError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleRetrieverError: ${r}`),e.raiseError)throw t}},e.awaitHandlers)))}},uR=class extends q1{async handleLLMNewToken(t,e,n,r,i,a){await Promise.all(this.handlers.map(s=>Qr(async()=>{var o;if(!s.ignoreLLM)try{await((o=s.handleLLMNewToken)==null?void 0:o.call(s,t,e??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMNewToken: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleLLMError(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Qr(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMError)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleLLMEnd(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Qr(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMEnd)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}},pte=class extends q1{getChild(t){const e=new ja(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleChainError(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Qr(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainError)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleChainEnd(t,e,n,r,i){await Promise.all(this.handlers.map(a=>Qr(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainEnd)==null?void 0:s.call(a,t,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleAgentAction(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentAction)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentAction: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleAgentEnd(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleAgentEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleAgentEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},mte=class extends q1{getChild(t){const e=new ja(this.runId);return e.setHandlers(this.inheritableHandlers),e.addTags(this.inheritableTags),e.addMetadata(this.inheritableMetadata),t&&e.addTags([t],!1),e}async handleToolError(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolError)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolError: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}async handleToolEnd(t){await Promise.all(this.handlers.map(e=>Qr(async()=>{var n;if(!e.ignoreAgent)try{await((n=e.handleToolEnd)==null?void 0:n.call(e,t,this.runId,this._parentRunId,this.tags))}catch(r){if((e.raiseError?console.error:console.warn)(`Error in handler ${e.constructor.name}, handleToolEnd: ${r}`),e.raiseError)throw r}},e.awaitHandlers)))}},ja=class W0 extends dte{constructor(n,r){super();P(this,"handlers",[]);P(this,"inheritableHandlers",[]);P(this,"tags",[]);P(this,"inheritableTags",[]);P(this,"metadata",{});P(this,"inheritableMetadata",{});P(this,"name","callback_manager");P(this,"_parentRunId");this.handlers=(r==null?void 0:r.handlers)??this.handlers,this.inheritableHandlers=(r==null?void 0:r.inheritableHandlers)??this.inheritableHandlers,this.tags=(r==null?void 0:r.tags)??this.tags,this.inheritableTags=(r==null?void 0:r.inheritableTags)??this.inheritableTags,this.metadata=(r==null?void 0:r.metadata)??this.metadata,this.inheritableMetadata=(r==null?void 0:r.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=n}getParentRunId(){return this._parentRunId}async handleLLMStart(n,r,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(u,f)=>{const d=f===0&&i?i:jf();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return Bm(h)&&h._createRunForLLMStart(n,[u],d,this._parentRunId,s,this.tags,this.metadata,c),Qr(async()=>{var p;try{await((p=h.handleLLMStart)==null?void 0:p.call(h,n,[u],d,this._parentRunId,s,this.tags,this.metadata,c))}catch(m){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${m}`),h.raiseError)throw m}},h.awaitHandlers)})),new uR(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(n,r,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(r.map(async(u,f)=>{const d=f===0&&i?i:jf();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return Bm(h)&&h._createRunForChatModelStart(n,[u],d,this._parentRunId,s,this.tags,this.metadata,c),Qr(async()=>{var p,m;try{if(h.handleChatModelStart)await((p=h.handleChatModelStart)==null?void 0:p.call(h,n,[u],d,this._parentRunId,s,this.tags,this.metadata,c));else if(h.handleLLMStart){const y=dM(u);await((m=h.handleLLMStart)==null?void 0:m.call(h,n,[y],d,this._parentRunId,s,this.tags,this.metadata,c))}}catch(y){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${y}`),h.raiseError)throw y}},h.awaitHandlers)})),new uR(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(n,r,i=jf(),a=void 0,s=void 0,o=void 0,l=void 0,c=void 0,u=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreChain)return Bm(f)&&f._createRunForChainStart(n,r,i,this._parentRunId,this.tags,this.metadata,a,l,u),Qr(async()=>{var d;try{await((d=f.handleChainStart)==null?void 0:d.call(f,n,r,i,this._parentRunId,this.tags,this.metadata,a,l,u))}catch(h){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleChainStart: ${h}`),f.raiseError)throw h}},f.awaitHandlers)})),new pte(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(n,r,i=jf(),a=void 0,s=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreAgent)return Bm(c)&&c._createRunForToolStart(n,r,i,this._parentRunId,this.tags,this.metadata,l),Qr(async()=>{var u;try{await((u=c.handleToolStart)==null?void 0:u.call(c,n,r,i,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleToolStart: ${f}`),c.raiseError)throw f}},c.awaitHandlers)})),new mte(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(n,r,i=jf(),a=void 0,s=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreRetriever)return Bm(c)&&c._createRunForRetrieverStart(n,r,i,this._parentRunId,this.tags,this.metadata,l),Qr(async()=>{var u;try{await((u=c.handleRetrieverStart)==null?void 0:u.call(c,n,r,i,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleRetrieverStart: ${f}`),c.raiseError)throw f}},c.awaitHandlers)})),new hte(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(n,r,i,a,s){await Promise.all(this.handlers.map(o=>Qr(async()=>{var l;if(!o.ignoreCustomEvent)try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,n,r,i,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}addHandler(n,r=!0){this.handlers.push(n),r&&this.inheritableHandlers.push(n)}removeHandler(n){this.handlers=this.handlers.filter(r=>r!==n),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==n)}setHandlers(n,r=!0){this.handlers=[],this.inheritableHandlers=[];for(const i of n)this.addHandler(i,r)}addTags(n,r=!0){this.removeTags(n),this.tags.push(...n),r&&this.inheritableTags.push(...n)}removeTags(n){this.tags=this.tags.filter(r=>!n.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!n.includes(r))}addMetadata(n,r=!0){this.metadata={...this.metadata,...n},r&&(this.inheritableMetadata={...this.inheritableMetadata,...n})}removeMetadata(n){for(const r of Object.keys(n))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(n=[],r=!0){const i=new W0(this._parentRunId);for(const a of this.handlers){const s=this.inheritableHandlers.includes(a);i.addHandler(a,s)}for(const a of this.tags){const s=this.inheritableTags.includes(a);i.addTags([a],s)}for(const a of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(a);i.addMetadata({[a]:this.metadata[a]},s)}for(const a of n)i.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===a.name)||i.addHandler(a,r);return i}static fromHandlers(n){class r extends cv{constructor(){super();P(this,"name",jf());Object.assign(this,n)}}const i=new this;return i.addHandler(new r),i}static configure(n,r,i,a,s,o,l){return this._configureSync(n,r,i,a,s,o,l)}static _configureSync(n,r,i,a,s,o,l){var h;let c;(n||r)&&(Array.isArray(n)||!n?(c=new W0,c.setHandlers((n==null?void 0:n.map(vb))??[],!0)):c=n,c=c.copy(Array.isArray(r)?r.map(vb):r==null?void 0:r.handlers,!1));const u=mc("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),f=((h=Q2.getTraceableRunTree())==null?void 0:h.tracingEnabled)??JPe(),d=f||(mc("LANGCHAIN_TRACING")??!1);if(u||d){if(c||(c=new W0),u&&!c.handlers.some(p=>p.name===cR.prototype.name)){const p=new cR;c.addHandler(p,!0)}if(d&&!c.handlers.some(p=>p.name==="langchain_tracer")&&f){const p=new Q2;c.addHandler(p,!0)}if(f){const p=Q2.getTraceableRunTree();if(p&&c._parentRunId===void 0){c._parentRunId=p.id;const m=c.handlers.find(y=>y.name==="langchain_tracer");m==null||m.updateFromRunTree(p)}}}for(const{contextVar:p,inheritable:m=!0,handlerClass:y,envVar:g}of eNe()){const v=g&&mc(g)==="true"&&y;let w;const _=p!==void 0?ute(p):void 0;_&&Aee(_)?w=_:v&&(w=new y({})),w!==void 0&&(c||(c=new W0),c.handlers.some(x=>x.name===w.name)||c.addHandler(w,m))}return(i||a)&&c&&(c.addTags(i??[]),c.addTags(a??[],!1)),(s||o)&&c&&(c.addMetadata(s??{}),c.addMetadata(o??{},!1)),c}};function vb(t){return"name"in t?t:cv.fromMethods(t)}var gte=class{getStore(){}run(t,e){return e()}enterWith(t){}};const tNe=new gte,nU=Symbol.for("lc:child_config");var nNe=class{getInstance(){return yb()??tNe}getRunnableConfig(){var e,n;return(n=(e=this.getInstance().getStore())==null?void 0:e.extra)==null?void 0:n[nU]}runWithConfig(t,e,n){var c;const r=ja._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata),i=this.getInstance(),a=i.getStore(),s=r==null?void 0:r.getParentRunId(),o=(c=r==null?void 0:r.handlers)==null?void 0:c.find(u=>(u==null?void 0:u.name)==="langchain_tracer");let l;return o&&s?l=o.getRunTreeWithTracingConfig(s):n||(l=new Ha({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[nU]:t}),a!==void 0&&a[yw]!==void 0&&(l===void 0&&(l={}),l[yw]=a[yw]),i.run(l,e)}initializeGlobalInstance(t){yb()===void 0&&hOe(t)}};const ji=new nNe;var yte={};At(yte,{AsyncLocalStorageProviderSingleton:()=>ji,MockAsyncLocalStorage:()=>gte,_CONTEXT_VARIABLES_KEY:()=>yw});const jC=25;async function Qa(t){return ja._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function go(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const i=e.callbacks,a=n.callbacks;if(Array.isArray(a))if(!i)e.callbacks=a;else if(Array.isArray(i))e.callbacks=i.concat(a);else{const s=i.copy();for(const o of a)s.addHandler(vb(o),!0);e.callbacks=s}else if(a)if(!i)e.callbacks=a;else if(Array.isArray(i)){const s=a.copy();for(const o of i)s.addHandler(vb(o),!0);e.callbacks=s}else e.callbacks=new ja(a._parentRunId,{handlers:i.handlers.concat(a.handlers),inheritableHandlers:i.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(a.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(a.inheritableTags))),metadata:{...i.metadata,...a.metadata}})}else{const i=r;e[i]=n[i]??e[i]}return e}const rNe=new Set(["string","number","boolean"]);function yn(t){var r;const e=ji.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:a,...s}=e;n=Object.entries(s).reduce((o,[l,c])=>(c!==void 0&&(o[l]=c),o),n)}if(t&&(n=Object.entries(t).reduce((i,[a,s])=>(s!==void 0&&(i[a]=s),i),n)),n!=null&&n.configurable)for(const i of Object.keys(n.configurable))rNe.has(typeof n.configurable[i])&&!((r=n.metadata)!=null&&r[i])&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const i=n.timeout,a=AbortSignal.timeout(i);n.metadata||(n.metadata={}),n.metadata.timeoutMs===void 0&&(n.metadata.timeoutMs=i),n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,a])):n.signal=a,delete n.timeout}return n}function kn(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:i,configurable:a,runId:s}={}){const o=yn(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),i!==void 0&&(o.runName=i),a!==void 0&&(o.configurable={...o.configurable,...a}),s!==void 0&&delete o.runId,o}function ju(t){if(t)return{configurable:t.configurable,recursionLimit:t.recursionLimit,callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,maxConcurrency:t.maxConcurrency,timeout:t.timeout,signal:t.signal,store:t.store}}async function $u(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{n=()=>{i(wb(e))},e.addEventListener("abort",n,{once:!0}),e.aborted&&i(wb(e))})]).finally(()=>e.removeEventListener("abort",n))}function wb(t){return(t==null?void 0:t.reason)instanceof Error?t.reason:typeof(t==null?void 0:t.reason)=="string"?new Error(t.reason):new Error("Aborted")}var vte={};At(vte,{AsyncGeneratorWithSetup:()=>Wp,IterableReadableStream:()=>ns,atee:()=>AM,concat:()=>Ad,pipeGeneratorWithSetup:()=>wte});var ns=class fR extends ReadableStream{constructor(){super(...arguments);P(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const n=await this.reader.read();return n.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:n.value}}catch(n){throw this.reader.releaseLock(),n}}async return(){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}return{done:!0,value:void 0}}async throw(n){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}throw n}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(n){const r=n.getReader();return new fR({start(i){return a();function a(){return r.read().then(({done:s,value:o})=>{if(s){i.close();return}return i.enqueue(o),a()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(n){return new fR({async pull(r){const{value:i,done:a}=await n.next();a&&r.close(),r.enqueue(i)},async cancel(r){await n.return(r)}})}};function AM(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(i){for(;;)if(i.length===0){const a=await t.next();for(const s of n)s.push(a)}else{if(i[0].done)return;yield i.shift().value}})}function Ad(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,i]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=Ad(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var Wp=class{constructor(t){P(this,"generator");P(this,"setup");P(this,"config");P(this,"signal");P(this,"firstResult");P(this,"firstResultUsed",!1);var e;this.generator=t.generator,this.config=t.config,this.signal=t.signal??((e=this.config)==null?void 0:e.signal),this.setup=new Promise((n,r)=>{ji.runWithConfig(ju(t.config),async()=>{this.firstResult=t.generator.next(),t.startSetup?this.firstResult.then(t.startSetup).then(n,r):this.firstResult.then(i=>n(void 0),r)},!0)})}async next(...t){var e;return(e=this.signal)==null||e.throwIfAborted(),this.firstResultUsed?ji.runWithConfig(ju(this.config),this.signal?async()=>$u(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(t){return this.generator.return(t)}async throw(t){return this.generator.throw(t)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function wte(t,e,n,r,...i){const a=new Wp({generator:e,startSetup:n,signal:r}),s=await a.setup;return{output:t(a,s,...i),setup:s}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const iNe=Object.prototype.hasOwnProperty;function dR(t,e){return iNe.call(t,e)}function hR(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)dR(t,n)&&e.push(n);return e}function dl(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function pR(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function _m(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function aNe(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function mR(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(mR(t[n]))return!0}else if(typeof t=="object"){const n=hR(t),r=n.length;for(var e=0;e<r;e++)if(mR(t[n[e]]))return!0}}return!1}function rU(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}var sNe=class extends Error{constructor(t,e,n,r,i){super(rU(t,{name:e,index:n,operation:r,tree:i})),this.name=e,this.index=n,this.operation=r,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=rU(t,{name:e,index:n,operation:r,tree:i})}},bte={};At(bte,{JsonPatchError:()=>Pr,_areEquals:()=>bb,applyOperation:()=>ip,applyPatch:()=>my,applyReducer:()=>cNe,deepClone:()=>oNe,getValueByPointer:()=>PE,validate:()=>_te,validator:()=>NE});const Pr=sNe,oNe=dl,cg={add:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){if(e==="__proto__"||e==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=PE(n,this.path);r&&(r=dl(r));const i=ip(n,{op:"remove",path:this.from}).removed;return ip(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=PE(n,this.from);return ip(n,{op:"add",path:this.path,value:dl(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:bb(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var lNe={add:function(t,e,n){return pR(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:cg.move,copy:cg.copy,test:cg.test,_get:cg._get};function PE(t,e){if(e=="")return t;var n={op:"_get",path:e};return ip(t,n),n.value}function ip(t,e,n=!1,r=!0,i=!0,a=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):NE(e,0)),e.path===""){let s={newDocument:t};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=t,s;if(e.op==="move"||e.op==="copy")return s.newDocument=PE(t,e.from),e.op==="move"&&(s.removed=t),s;if(e.op==="test"){if(s.test=bb(t,e.value),s.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return s.newDocument=t,s}else{if(e.op==="remove")return s.removed=t,s.newDocument=null,s;if(e.op==="_get")return e.value=t,s;if(n)throw new Pr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return s}}else{r||(t=dl(t));const o=(e.path||"").split("/");let l=t,c=1,u=o.length,f,d,h;for(typeof n=="function"?h=n:h=NE;;){if(d=o[c],d&&d.indexOf("~")!=-1&&(d=aNe(d)),i&&(d=="__proto__"||d=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(l[d]===void 0?f=o.slice(0,c).join("/"):c==u-1&&(f=e.path),f!==void 0&&h(e,0,t,f)),c++,Array.isArray(l)){if(d==="-")d=l.length;else{if(n&&!pR(d))throw new Pr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);pR(d)&&(d=~~d)}if(c>=u){if(n&&e.op==="add"&&d>l.length)throw new Pr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);const p=lNe[e.op].call(e,l,d,t);if(p.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return p}}else if(c>=u){const p=cg[e.op].call(e,l,d,t);if(p.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return p}if(l=l[d],n&&c<u&&(!l||typeof l!="object"))throw new Pr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function my(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new Pr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=dl(t));const a=new Array(e.length);for(let s=0,o=e.length;s<o;s++)a[s]=ip(t,e[s],n,!0,i,s),t=a[s].newDocument;return a.newDocument=t,a}function cNe(t,e,n){const r=ip(t,e);if(r.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function NE(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new Pr("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(cg[t.op]){if(typeof t.path!="string")throw new Pr("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Pr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Pr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Pr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&mR(t.value))throw new Pr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,a=r.split("/").length;if(i!==a+1&&i!==a)throw new Pr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new Pr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var s={op:"_get",path:t.from,value:void 0},o=_te([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Pr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function _te(t,e,n){try{if(!Array.isArray(t))throw new Pr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)my(dl(e),dl(t),n||!0);else{n=n||NE;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof Pr)return i;throw i}}function bb(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,a,s;if(n&&r){if(a=t.length,a!=e.length)return!1;for(i=a;i--!==0;)if(!bb(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(a=o.length,a!==Object.keys(e).length)return!1;for(i=a;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=a;i--!==0;)if(s=o[i],!bb(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}function xte(t,e,n,r,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=hR(e),s=hR(t),o=!1,l=s.length-1;l>=0;l--){var c=s[l],u=t[c];if(dR(e,c)&&!(e[c]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var f=e[c];typeof u=="object"&&u!=null&&typeof f=="object"&&f!=null&&Array.isArray(u)===Array.isArray(f)?xte(u,f,n,r+"/"+_m(c),i):u!==f&&(i&&n.push({op:"test",path:r+"/"+_m(c),value:dl(u)}),n.push({op:"replace",path:r+"/"+_m(c),value:dl(f)}))}else Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+_m(c),value:dl(u)}),n.push({op:"remove",path:r+"/"+_m(c)}),o=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var c=a[l];!dR(t,c)&&e[c]!==void 0&&n.push({op:"add",path:r+"/"+_m(c),value:dl(e[c])})}}}function uk(t,e,n=!1){var r=[];return xte(t,e,r,"",n),r}({...bte});var Ste={};At(Ste,{LogStreamCallbackHandler:()=>yR,RunLog:()=>kM,RunLogPatch:()=>iu,isLogStreamHandler:()=>Ete});var iu=class{constructor(t){P(this,"ops");this.ops=t.ops??[]}concat(t){const e=this.ops.concat(t.ops),n=my({},e);return new kM({ops:e,state:n[n.length-1].newDocument})}},kM=class gR extends iu{constructor(n){super(n);P(this,"state");this.state=n.state}concat(n){const r=this.ops.concat(n.ops),i=my(this.state,n.ops);return new gR({ops:r,state:i[i.length-1].newDocument})}static fromRunLogPatch(n){const r=my({},n.ops);return new gR({ops:n.ops,state:r[r.length-1].newDocument})}};const Ete=t=>t.name==="log_stream_tracer";async function iU(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function aU(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function uNe(t){return t!==void 0&&t.message!==void 0}var yR=class extends Yu{constructor(e){super({_awaitHandler:!0,...e});P(this,"autoClose",!0);P(this,"includeNames");P(this,"includeTypes");P(this,"includeTags");P(this,"excludeNames");P(this,"excludeTypes");P(this,"excludeTags");P(this,"_schemaFormat","original");P(this,"rootId");P(this,"keyMapByRunId",{});P(this,"counterMapByRunName",{});P(this,"transformStream");P(this,"writer");P(this,"receiveStream");P(this,"name","log_stream_tracer");P(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ns.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new iu({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new iu({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await iU(e,this._schemaFormat)),await this.writer.write(new iu({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await iU(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await aU(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new iu({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const n=new iu({ops:[{op:"replace",path:"/final_output",value:await aU(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const a=e.inputs.messages!==void 0;let s;a?uNe(r==null?void 0:r.chunk)?s=r==null?void 0:r.chunk:s=new Oo({id:`run-${e.id}`,content:n}):s=n;const o=new iu({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${i}/streamed_output/-`,value:s}]});await this.writer.write(o)}},Ate={};At(Ate,{ChatGenerationChunk:()=>Sp,GenerationChunk:()=>gy,RUN_KEY:()=>_b});const _b="__run";var gy=class kte{constructor(e){P(this,"text");P(this,"generationInfo");this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new kte({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Sp=class Ote extends gy{constructor(n){super(n);P(this,"message");this.message=n.message}concat(n){return new Ote({text:this.text+n.text,generationInfo:{...this.generationInfo,...n.generationInfo},message:this.message.concat(n.message)})}};function Yx({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const fNe=t=>t.name==="event_stream_tracer";var dNe=class extends Yu{constructor(e){super({_awaitHandler:!0,...e});P(this,"autoClose",!0);P(this,"includeNames");P(this,"includeTypes");P(this,"includeTags");P(this,"excludeNames");P(this,"excludeTypes");P(this,"excludeTags");P(this,"runInfoMap",new Map);P(this,"tappedPromises",new Map);P(this,"transformStream");P(this,"writer");P(this,"receiveStream");P(this,"readableStreamClosed",!1);P(this,"name","event_stream_tracer");P(this,"lc_prefer_streaming",!0);this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ns.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function a(o,l){return o==="llm"&&typeof l=="string"?new gy({text:l}):l}let s=this.tappedPromises.get(e);if(s===void 0){let o;s=new Promise(l=>{o=l}),this.tappedPromises.set(e,s);try{const l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:a(i.runType,r.value)}},i),yield r.value;for await(const c of n)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:a(i.runType,c)}},i),yield c}finally{o==null||o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this.readableStreamClosed||this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var s,o;const n=Yx(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onLLMNewToken(e,n,r){const i=this.runInfoMap.get(e.id);let a,s;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")s="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?a=new Oo({content:n,id:`run-${e.id}`}):a=r.chunk.message;else if(i.runType==="llm")s="on_llm_stream",(r==null?void 0:r.chunk)===void 0?a=new gy({text:n}):a=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:s,data:{chunk:a},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var s,o,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(s=e.outputs)==null?void 0:s.generations;let a;if(n.runType==="chat_model"){for(const c of i??[]){if(a!==void 0)break;a=(o=c[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")a={generations:i==null?void 0:i.map(c=>c.map(u=>({text:u.text,generationInfo:u.generationInfo}))),llmOutput:((l=e.outputs)==null?void 0:l.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:a,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var s,o;const n=Yx(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},i.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,i.inputs=e.inputs.input):(a.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:a,name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onChainEnd(e){var o;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??n.inputs??{},s={output:((o=e.outputs)==null?void 0:o.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(s.input=i.input,n.inputs=i.input),await this.sendEndEvent({event:r,data:s,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var i,a;const n=Yx(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{}},r)}async onToolEnd(e){var i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onToolError(e){const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);await this.sendEndEvent({event:"on_tool_error",data:{input:n.inputs,error:e.error},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var a,s;const n=Yx(e),i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((s=e.extra)==null?void 0:s.metadata)??{}},i)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:n},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};const hNe=Object.prototype.toString,pNe=t=>hNe.call(t)==="[object Error]",mNe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function gNe(t){if(!(t&&pNe(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:n,stack:r}=t;return n==="Load failed"?r===void 0||"__sentry_captured__"in t:n.startsWith("error sending request for url")?!0:mNe.has(n)}function yNe(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Zx(t,e,{min:n=0,allowInfinity:r=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${r?" or Infinity":""}.`);if(!r&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<n)throw new TypeError(`Expected \`${t}\` to be  ${n}.`)}}var vNe=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function wNe(t,e){const n=Math.max(1,t+1),r=e.randomize?Math.random()+1:1;let i=Math.round(r*e.minTimeout*e.factor**(n-1));return i=Math.min(i,e.maxTimeout),i}function sU(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function bNe({error:t,attemptNumber:e,retriesConsumed:n,startTime:r,options:i}){var h,p,m;const a=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(a instanceof vNe)throw a.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,o=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:a,attemptNumber:e,retriesLeft:s,retriesConsumed:n});if(await i.onFailedAttempt(l),sU(r,o)<=0)throw a;const c=await i.shouldConsumeRetry(l),u=sU(r,o);if(u<=0||s<=0)throw a;if(a instanceof TypeError&&!gNe(a)){if(c)throw a;return(h=i.signal)==null||h.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!c)return(p=i.signal)==null||p.throwIfAborted(),!1;const f=wNe(n,i),d=Math.min(f,u);return d>0&&await new Promise((y,g)=>{var _,x;const v=()=>{var E;clearTimeout(w),(E=i.signal)==null||E.removeEventListener("abort",v),g(i.signal.reason)},w=setTimeout(()=>{var E;(E=i.signal)==null||E.removeEventListener("abort",v),y()},d);i.unref&&((_=w.unref)==null||_.call(w)),(x=i.signal)==null||x.addEventListener("abort",v,{once:!0})}),(m=i.signal)==null||m.throwIfAborted(),!0}async function vR(t,e={}){var a,s,o;if(e={...e},yNe(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Zx("factor",e.factor,{min:0,allowInfinity:!1}),Zx("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Zx("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Zx("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let n=0,r=0;const i=performance.now();for(;!Number.isFinite(e.retries)||r<=e.retries;){n++;try{(s=e.signal)==null||s.throwIfAborted();const l=await t(n);return(o=e.signal)==null||o.throwIfAborted(),l}catch(l){await bNe({error:l,attemptNumber:n,retriesConsumed:r,startTime:i,options:e})&&r++}}throw new Error("Retry attempts exhausted without throwing an error.")}var Tte={};At(Tte,{AsyncCaller:()=>G1});const _Ne=[400,401,402,403,404,405,406,407,409],xNe=t=>{if(typeof t!="object"||t===null)return;if("message"in t&&typeof t.message=="string"&&(t.message.startsWith("Cancel")||t.message.startsWith("AbortError"))||"name"in t&&typeof t.name=="string"&&t.name==="AbortError"||"code"in t&&typeof t.code=="string"&&t.code==="ECONNABORTED")throw t;const e="response"in t&&typeof t.response=="object"&&t.response!==null&&"status"in t.response&&typeof t.response.status=="number"?t.response.status:void 0,n="status"in t&&typeof t.status=="number"?t.status:void 0,r=e??n;if(r&&_Ne.includes(+r))throw t;if(("error"in t&&typeof t.error=="object"&&t.error!==null&&"code"in t.error&&typeof t.error.code=="string"?t.error.code:void 0)==="insufficient_quota"){const a=new Error("message"in t&&typeof t.message=="string"?t.message:"Insufficient quota");throw a.name="InsufficientQuotaError",a}};var G1=class{constructor(t){P(this,"maxConcurrency");P(this,"maxRetries");P(this,"onFailedAttempt");P(this,"queue");this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.onFailedAttempt=t.onFailedAttempt??xNe;const e="default"in bu?bu.default:bu;this.queue=new e({concurrency:this.maxConcurrency})}async call(t,...e){return this.queue.add(()=>vR(()=>t(...e).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:({error:n})=>{var r;return(r=this.onFailedAttempt)==null?void 0:r.call(this,n)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(t,e,...n){if(t.signal){let r;return Promise.race([this.call(e,...n),new Promise((i,a)=>{var s;r=()=>{a(wb(t.signal))},(s=t.signal)==null||s.addEventListener("abort",r,{once:!0})})]).finally(()=>{t.signal&&r&&t.signal.removeEventListener("abort",r)})}return this.call(e,...n)}fetch(...t){return this.call(()=>fetch(...t).then(e=>e.ok?e:Promise.reject(e)))}},Cte=class extends Yu{constructor({config:e,onStart:n,onEnd:r,onError:i}){super({_awaitHandler:!0});P(this,"name","RootListenersTracer");P(this,"rootId");P(this,"config");P(this,"argOnStart");P(this,"argOnEnd");P(this,"argOnError");this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function OM(t){return t?t.lc_runnable:!1}var SNe=class{constructor(t){P(this,"includeNames");P(this,"includeTypes");P(this,"includeTags");P(this,"excludeNames");P(this,"excludeTypes");P(this,"excludeTags");this.includeNames=t.includeNames,this.includeTypes=t.includeTypes,this.includeTags=t.includeTags,this.excludeNames=t.excludeNames,this.excludeTypes=t.excludeTypes,this.excludeTags=t.excludeTags}includeEvent(t,e){let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const r=t.tags??[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e)),this.includeTags!==void 0&&(n=n||r.some(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),n}};const ENe=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");function $C(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const ANe=["*","_","`"];function kNe(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function ONe(t,e,n){const{firstNode:r,lastNode:i,nodeColors:a,withStyles:s=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=n??{};let c=s?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(s){const p="default",m={[p]:"{0}({1})"};r!==void 0&&(m[r]="{0}([{1}]):::first"),i!==void 0&&(m[i]="{0}([{1}]):::last");for(const[y,g]of Object.entries(t)){const v=g.name.split(":").pop()??"";let _=ANe.some(E=>v.startsWith(E)&&v.endsWith(E))?`<p>${v}</p>`:v;Object.keys(g.metadata??{}).length&&(_+=`<hr/><small><em>${Object.entries(g.metadata??{}).map(([E,T])=>`${E} = ${T}`).join(`
`)}</em></small>`);const x=(m[y]??m[p]).replace("{0}",$C(y)).replace("{1}",_);c+=`	${x}
`}}const u={};for(const p of e){const m=p.source.split(":"),y=p.target.split(":"),g=m.filter((v,w)=>v===y[w]).join(":");u[g]||(u[g]=[]),u[g].push(p)}const f=new Set;function d(p){return[...p].sort((m,y)=>m.split(":").length-y.split(":").length)}function h(p,m){const y=p.length===1&&p[0].source===p[0].target;if(m&&!y){const v=m.split(":").pop();if(f.has(m))throw new Error(`Found duplicate subgraph '${v}' at '${m} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);f.add(m),c+=`	subgraph ${v}
`}const g=d(Object.keys(u).filter(v=>v.startsWith(`${m}:`)&&v!==m&&v.split(":").length===m.split(":").length+1));for(const v of g)h(u[v],v);for(const v of p){const{source:w,target:_,data:x,conditional:E}=v;let T="";if(x!==void 0){let O=x;const R=O.split(" ");R.length>l&&(O=Array.from({length:Math.ceil(R.length/l)},(M,N)=>R.slice(N*l,(N+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),T=E?` -. &nbsp;${O}&nbsp; .-> `:` -- &nbsp;${O}&nbsp; --> `}else T=E?" -.-> ":" --> ";c+=`	${$C(w)}${T}${$C(_)};
`}m&&!y&&(c+=`	end
`)}h(u[""]??[],"");for(const p in u)!p.includes(":")&&p!==""&&h(u[p],p);return s&&(c+=kNe(a??{})),c}async function TNe(t,e){let n=(e==null?void 0:e.backgroundColor)??"white";const r=(e==null?void 0:e.imageType)??"png",i=ENe(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const a=`https://mermaid.ink/img/${i}?bgColor=${n}&type=${r}`,s=await fetch(a);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}var Pte={};At(Pte,{Graph:()=>xb});function CNe(t,e){if(t!==void 0&&!np(t))return t;if(OM(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function PNe(t){return OM(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Oa(t.data.schema),title:t.data.name}}}var xb=class Nte{constructor(e){P(this,"nodes",{});P(this,"edges",[]);this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=np(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...PNe(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const i=n??lu(),a={id:i,data:e,name:CNe(n,e),metadata:r};return this.nodes[i]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const a={source:e.id,target:n.id,data:r,conditional:i};return this.edges.push(a),a}firstNode(){return oU(this)}lastNode(){return lU(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(c=>c.id).every(np)&&(r="");const a=c=>r?`${r}:${c}`:c;Object.entries(e.nodes).forEach(([c,u])=>{this.nodes[a(c)]={...u,id:a(c)}});const s=e.edges.map(c=>({...c,source:a(c.source),target:a(c.target)}));this.edges=[...this.edges,...s];const o=e.firstNode(),l=e.lastNode();return[o?{id:a(o.id),data:o.data}:void 0,l?{id:a(l.id),data:l.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&oU(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&lU(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(e).forEach(i=>{n.set(i,(n.get(i)||0)+1)});const r=i=>{const a=e[i];return np(i)&&n.get(a)===1?a:i};return new Nte({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,a])=>[r(i),{...a,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},s=this.reid(),o=s.firstNode(),l=s.lastNode();return ONe(s.nodes,s.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:a})}async drawMermaidPng(e){const n=this.drawMermaid(e);return TNe(n,{backgroundColor:e==null?void 0:e.backgroundColor})}};function oU(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function lU(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function NNe(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const i of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return ns.fromReadableStream(n)}function cU(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const INe=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function wR(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*uU(t,e){for(;;){const{value:n,done:r}=ji.runWithConfig(ju(t),e.next.bind(e),!0);if(r)break;yield n}}async function*bR(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await ji.runWithConfig(ju(t),n.next.bind(e),!0);if(i)break;yield r}}function wi(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var fn=class extends ko{constructor(){super(...arguments);P(this,"lc_runnable",!0);P(this,"name")}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}withRetry(e){return new TM({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new kd({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new Lte({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(yn);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:n},(i,a)=>yn(a===0?e:r))}return Array.from({length:n},()=>yn(e))}async batch(e,n,r){var l;const i=this._getOptionsList(n??{},e.length),a=((l=i[0])==null?void 0:l.maxConcurrency)??(r==null?void 0:r.maxConcurrency),s=new G1({maxConcurrency:a,onFailedAttempt:c=>{throw c}}),o=e.map((c,u)=>s.call(async()=>{try{return await this.invoke(c,i[u])}catch(f){if(r!=null&&r.returnExceptions)return f;throw f}}));return Promise.all(o)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=yn(n),i=new Wp({generator:this._streamIterator(e,r),config:r});return await i.setup,ns.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=yn(e):n=yn({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const i=yn(r),a=await Qa(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),wi(n,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let o;try{const l=e.call(this,n,i,s);o=await $u(l,r==null?void 0:r.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(wi(o,"output"))),o}async _batchWithConfig(e,n,r,i){var c;const a=this._getOptionsList(r??{},n.length),s=await Promise.all(a.map(Qa)),o=await Promise.all(s.map(async(u,f)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),wi(n[f],"input"),a[f].runId,a[f].runType,void 0,void 0,a[f].runName??this.getName()));return delete a[f].runId,d}));let l;try{const u=e.call(this,n,a,o,i);l=await $u(u,(c=a==null?void 0:a[0])==null?void 0:c.signal)}catch(u){throw await Promise.all(o.map(f=>f==null?void 0:f.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(wi(l,"output")))),l}_concatOutputChunks(e,n){return Ad(e,n)}async*_transformStreamWithConfig(e,n,r){let i,a=!0,s,o=!0;const l=yn(r),c=await Qa(l),u=this;async function*f(){for await(const h of e){if(a)if(i===void 0)i=h;else try{i=u._concatOutputChunks(i,h)}catch{i=void 0,a=!1}yield h}}let d;try{const h=await wte(n.bind(this),f(),async()=>c==null?void 0:c.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName(),void 0,{lc_defers_inputs:!0}),r==null?void 0:r.signal,l);delete l.runId,d=h.setup;const p=d==null?void 0:d.handlers.find(fNe);let m=h.output;p!==void 0&&d!==void 0&&(m=p.tapOutputIterable(d.runId,m));const y=d==null?void 0:d.handlers.find(Ete);y!==void 0&&d!==void 0&&(m=y.tapOutputIterable(d.runId,m));for await(const g of m)if(yield g,o)if(s===void 0)s=g;else try{s=this._concatOutputChunks(s,g)}catch{s=void 0,o=!1}}catch(h){throw await(d==null?void 0:d.handleChainError(h,void 0,void 0,void 0,{inputs:wi(i,"input")})),h}await(d==null?void 0:d.handleChainEnd(s??{},void 0,void 0,void 0,{inputs:wi(i,"input")}))}getGraph(e){const n=new xb,r=n.addNode({name:`${this.getName()}Input`,schema:t7()}),i=n.addNode(this),a=n.addNode({name:`${this.getName()}Output`,schema:t7()});return n.addEdge(r,i),n.addEdge(i,a),n}pipe(e){return new Mu({first:this,last:Zi(e)})}pick(e){return this.pipe(new Dte(e))}assign(e){return this.pipe(new CM(new fv({steps:e})))}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=this._concatOutputChunks(r,i);yield*this._streamIterator(r,yn(n))}async*streamLog(e,n,r){const i=new yR({...r,autoClose:!1,_schemaFormat:"original"}),a=yn(n);yield*this._streamLog(e,i,a)}async*_streamLog(e,n,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[n];else if(Array.isArray(i))r.callbacks=i.concat([n]);else{const l=i.copy();l.addHandler(n,!0),r.callbacks=l}const a=this.stream(e,r);async function s(){try{const l=await a;for await(const c of l){const u=new iu({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await n.writer.write(u)}}finally{await n.writer.close()}}const o=s();try{for await(const l of n)yield l}finally{await o}}streamEvents(e,n,r){let i;if(n.version==="v1")i=this._streamEventsV1(e,n,r);else if(n.version==="v2")i=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?NNe(i):ns.fromAsyncGenerator(i)}async*_streamEventsV2(e,n,r){var p;const i=new dNe({...r,autoClose:!1}),a=yn(n),s=a.runId??lu();a.runId=s;const o=a.callbacks;if(o===void 0)a.callbacks=[i];else if(Array.isArray(o))a.callbacks=o.concat(i);else{const m=o.copy();m.addHandler(i,!0),a.callbacks=m}const l=new AbortController,c=this;async function u(){let m,y=null;try{n!=null&&n.signal?"any"in AbortSignal?m=AbortSignal.any([l.signal,n.signal]):(m=n.signal,y=()=>{l.abort()},n.signal.addEventListener("abort",y,{once:!0})):m=l.signal;const g=await c.stream(e,{...a,signal:m}),v=i.tapOutputIterable(s,g);for await(const w of v)if(l.signal.aborted)break}finally{await i.finish(),m&&y&&m.removeEventListener("abort",y)}}const f=u();let d=!1,h;try{for await(const m of i){if(!d){m.data.input=e,d=!0,h=m.run_id,yield m;continue}m.run_id===h&&m.event.endsWith("_end")&&(p=m.data)!=null&&p.input&&delete m.data.input,yield m}}finally{l.abort(),await f}}async*_streamEventsV1(e,n,r){let i,a=!1;const s=yn(n),o=s.tags??[],l=s.metadata??{},c=s.runName??this.getName(),u=new yR({...r,autoClose:!1,_schemaFormat:"streaming_events"}),f=new SNe({...r}),d=this._streamLog(e,u,s);for await(const p of d){if(i?i=i.concat(p):i=kM.fromRunLogPatch(p),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const v={...i.state},w={run_id:v.id,event:`on_${v.type}_start`,name:c,tags:o,metadata:l,data:{input:e}};f.includeEvent(w,v.type)&&(yield w)}const m=p.ops.filter(v=>v.path.startsWith("/logs/")).map(v=>v.path.split("/")[2]),y=[...new Set(m)];for(const v of y){let w,_={};const x=i.state.logs[v];if(x.end_time===void 0?x.streamed_output.length>0?w="stream":w="start":w="end",w==="start")x.inputs!==void 0&&(_.input=x.inputs);else if(w==="end")x.inputs!==void 0&&(_.input=x.inputs),_.output=x.final_output;else if(w==="stream"){const E=x.streamed_output.length;if(E!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${E} instead. Encountered in: "${x.name}"`);_={chunk:x.streamed_output[0]},x.streamed_output=[]}yield{event:`on_${x.type}_${w}`,name:x.name,run_id:x.id,tags:x.tags,metadata:x.metadata,data:_}}const{state:g}=i;if(g.streamed_output.length>0){const v=g.streamed_output.length;if(v!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${v} instead. Encountered in: "${g.name}"`);const w={chunk:g.streamed_output[0]};g.streamed_output=[];const _={event:`on_${g.type}_stream`,run_id:g.id,tags:o,metadata:l,name:c,data:w};f.includeEvent(_,g.type)&&(yield _)}}const h=i==null?void 0:i.state;if(h!==void 0){const p={event:`on_${h.type}_end`,name:c,run_id:h.id,tags:o,metadata:l,data:{output:h.final_output}};f.includeEvent(p,h.type)&&(yield p)}}static isRunnable(e){return OM(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new kd({bound:this,config:{},configFactories:[i=>({callbacks:[new Cte({config:i,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return LNe(this,e)}},kd=class Ite extends fn{constructor(n){super(n);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"bound");P(this,"config");P(this,"kwargs");P(this,"configFactories");this.bound=n.bound,this.kwargs=n.kwargs,this.config=n.config,this.configFactories=n.configFactories}static lc_name(){return"RunnableBinding"}getName(n){return this.bound.getName(n)}async _mergeConfig(...n){const r=go(this.config,...n);return go(r,...this.configFactories?await Promise.all(this.configFactories.map(async i=>await i(r))):[])}withConfig(n){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...n}})}withRetry(n){return new TM({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:n==null?void 0:n.stopAfterAttempt,...n})}async invoke(n,r){return this.bound.invoke(n,await this._mergeConfig(r,this.kwargs))}async batch(n,r,i){const a=Array.isArray(r)?await Promise.all(r.map(async s=>this._mergeConfig(yn(s),this.kwargs))):await this._mergeConfig(yn(r),this.kwargs);return this.bound.batch(n,a,i)}_concatOutputChunks(n,r){return this.bound._concatOutputChunks(n,r)}async*_streamIterator(n,r){yield*this.bound._streamIterator(n,await this._mergeConfig(yn(r),this.kwargs))}async stream(n,r){return this.bound.stream(n,await this._mergeConfig(yn(r),this.kwargs))}async*transform(n,r){yield*this.bound.transform(n,await this._mergeConfig(yn(r),this.kwargs))}streamEvents(n,r,i){const a=this,s=async function*(){yield*a.bound.streamEvents(n,{...await a._mergeConfig(yn(r),a.kwargs),version:r.version},i)};return ns.fromAsyncGenerator(s())}static isRunnableBinding(n){return n.bound&&fn.isRunnable(n.bound)}withListeners({onStart:n,onEnd:r,onError:i}){return new Ite({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[a=>({callbacks:[new Cte({config:a,onStart:n,onEnd:r,onError:i})]})]})}},RNe=class Rte extends fn{constructor(n){super(n);P(this,"lc_serializable",!0);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"bound");this.bound=n.bound}static lc_name(){return"RunnableEach"}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async _invoke(n,r,i){return this.bound.batch(n,kn(r,{callbacks:i==null?void 0:i.getChild()}))}withListeners({onStart:n,onEnd:r,onError:i}){return new Rte({bound:this.bound.withListeners({onStart:n,onEnd:r,onError:i})})}},TM=class extends kd{constructor(e){super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"maxAttemptNumber",3);P(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return kn(n,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,n,r){return vR(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:({error:i})=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,i){const a={};try{await vR(async s=>{const o=e.map((d,h)=>h).filter(d=>a[d.toString()]===void 0||a[d.toString()]instanceof Error),l=o.map(d=>e[d]),c=o.map(d=>this._patchConfigForRetry(s,n==null?void 0:n[d],r==null?void 0:r[d])),u=await super.batch(l,c,{...i,returnExceptions:!0});let f;for(let d=0;d<u.length;d+=1){const h=u[d],p=o[d];h instanceof Error&&f===void 0&&(f=h,f.input=l[d]),a[p.toString()]=h}if(f)throw f;return u},{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,s.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(s){if((i==null?void 0:i.returnExceptions)!==!0)throw s}return Object.keys(a).sort((s,o)=>parseInt(s,10)-parseInt(o,10)).map(s=>a[parseInt(s,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}},Mu=class H0 extends fn{constructor(n){super(n);P(this,"first");P(this,"middle",[]);P(this,"last");P(this,"omitSequenceTags",!1);P(this,"lc_serializable",!0);P(this,"lc_namespace",["langchain_core","runnables"]);this.first=n.first,this.middle=n.middle??this.middle,this.last=n.last,this.name=n.name,this.omitSequenceTags=n.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(n,r){var c;const i=yn(r),a=await Qa(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),wi(n,"input"),i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;let o=n,l;try{const u=[this.first,...this.middle];for(let f=0;f<u.length;f+=1){const h=u[f].invoke(o,kn(i,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));o=await $u(h,r==null?void 0:r.signal)}if((c=r==null?void 0:r.signal)!=null&&c.aborted)throw wb(r.signal);l=await this.last.invoke(o,kn(i,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(u){throw await(s==null?void 0:s.handleChainError(u)),u}return await(s==null?void 0:s.handleChainEnd(wi(l,"output"))),l}async batch(n,r,i){var c;const a=this._getOptionsList(r??{},n.length),s=await Promise.all(a.map(Qa)),o=await Promise.all(s.map(async(u,f)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),wi(n[f],"input"),a[f].runId,void 0,void 0,void 0,a[f].runName));return delete a[f].runId,d}));let l=n;try{for(let u=0;u<this.steps.length;u+=1){const d=this.steps[u].batch(l,o.map((h,p)=>{const m=h==null?void 0:h.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`);return kn(a[p],{callbacks:m})}),i);l=await $u(d,(c=a[0])==null?void 0:c.signal)}}catch(u){throw await Promise.all(o.map(f=>f==null?void 0:f.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(wi(l,"output")))),l}_concatOutputChunks(n,r){return this.last._concatOutputChunks(n,r)}async*_streamIterator(n,r){var d;const i=await Qa(r),{runId:a,...s}=r??{},o=await(i==null?void 0:i.handleChainStart(this.toJSON(),wi(n,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=[this.first,...this.middle,this.last];let c=!0,u;async function*f(){yield n}try{let h=l[0].transform(f(),kn(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let p=1;p<l.length;p+=1)h=await l[p].transform(h,kn(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${p+1}`)}));for await(const p of h)if((d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield p,c)if(u===void 0)u=p;else try{u=this._concatOutputChunks(u,p)}catch{u=void 0,c=!1}}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}await(o==null?void 0:o.handleChainEnd(wi(u,"output")))}getGraph(n){const r=new xb;let i=null;return this.steps.forEach((a,s)=>{const o=a.getGraph(n);s!==0&&o.trimFirstNode(),s!==this.steps.length-1&&o.trimLastNode(),r.extend(o);const l=o.firstNode();if(!l)throw new Error(`Runnable ${a} has no first node`);i&&r.addEdge(i,l),i=o.lastNode()}),r}pipe(n){return H0.isRunnableSequence(n)?new H0({first:this.first,middle:this.middle.concat([this.last,n.first,...n.middle]),last:n.last,name:this.name??n.name}):new H0({first:this.first,middle:[...this.middle,this.last],last:Zi(n),name:this.name})}static isRunnableSequence(n){return Array.isArray(n.middle)&&fn.isRunnable(n)}static from([n,...r],i){let a={};return typeof i=="string"?a.name=i:i!==void 0&&(a=i),new H0({...a,first:Zi(n),middle:r.slice(0,-1).map(Zi),last:Zi(r[r.length-1])})}},fv=class jte extends fn{constructor(n){super(n);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"steps");this.steps={};for(const[r,i]of Object.entries(n.steps))this.steps[r]=Zi(i)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(n){return new jte({steps:n})}async invoke(n,r){const i=yn(r),a=await Qa(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),{input:n},i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;const o={};try{const l=Object.entries(this.steps).map(async([c,u])=>{o[c]=await u.invoke(n,kn(i,{callbacks:s==null?void 0:s.getChild(`map:key:${c}`)}))});await $u(Promise.all(l),r==null?void 0:r.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(o)),o}async*_transform(n,r,i){const a={...this.steps},s=AM(n,Object.keys(a).length),o=new Map(Object.entries(a).map(([l,c],u)=>{const f=c.transform(s[u],kn(i,{callbacks:r==null?void 0:r.getChild(`map:key:${l}`)}));return[l,f.next().then(d=>({key:l,gen:f,result:d}))]}));for(;o.size;){const l=Promise.race(o.values()),{key:c,result:u,gen:f}=await $u(l,i==null?void 0:i.signal);o.delete(c),u.done||(yield{[c]:u.value},o.set(c,f.next().then(d=>({key:c,gen:f,result:d}))))}}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*i(){yield n}const a=yn(r),s=new Wp({generator:this.transform(i(),a),config:a});return await s.setup,ns.fromAsyncGenerator(s)}},jNe=class $te extends fn{constructor(n){super(n);P(this,"lc_serializable",!1);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"func");if(!EM(n.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=n.func}async invoke(n,r){const[i]=this._getOptionsList(r??{},1),a=await Qa(i),s=this.func(kn(i,{callbacks:a}),n);return $u(s,i==null?void 0:i.signal)}async*_streamIterator(n,r){var s,o;const[i]=this._getOptionsList(r??{},1),a=await this.invoke(n,r);if(wR(a)){for await(const l of a)(s=i==null?void 0:i.signal)==null||s.throwIfAborted(),yield l;return}if(INe(a)){for(;;){(o=i==null?void 0:i.signal)==null||o.throwIfAborted();const l=a.next();if(l.done)break;yield l.value}return}yield a}static from(n){return new $te({func:n})}};function $Ne(t){if(EM(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Zu=class Mte extends fn{constructor(n){if(EM(n.func))return jNe.from(n.func);super(n);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"func");$Ne(n.func),this.func=n.func}static lc_name(){return"RunnableLambda"}static from(n){return new Mte({func:n})}async _invoke(n,r,i){return new Promise((a,s)=>{const o=kn(r,{callbacks:i==null?void 0:i.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??jC)-1});ji.runWithConfig(ju(o),async()=>{var l,c;try{let u=await this.func(n,{...o});if(u&&fn.isRunnable(u)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");u=await u.invoke(n,{...o,recursionLimit:(o.recursionLimit??jC)-1})}else if(wR(u)){let f;for await(const d of bR(o,u))if((l=r==null?void 0:r.signal)==null||l.throwIfAborted(),f===void 0)f=d;else try{f=this._concatOutputChunks(f,d)}catch{f=d}u=f}else if(cU(u)){let f;for(const d of uU(o,u))if((c=r==null?void 0:r.signal)==null||c.throwIfAborted(),f===void 0)f=d;else try{f=this._concatOutputChunks(f,d)}catch{f=d}u=f}a(u)}catch(u){s(u)}})})}async invoke(n,r){return this._callWithConfig(this._invoke.bind(this),n,r)}async*_transform(n,r,i){var l,c;let a;for await(const u of n)if(a===void 0)a=u;else try{a=this._concatOutputChunks(a,u)}catch{a=u}const s=kn(i,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((i==null?void 0:i.recursionLimit)??jC)-1}),o=await new Promise((u,f)=>{ji.runWithConfig(ju(s),async()=>{try{const d=await this.func(a,{...s,config:s});u(d)}catch(d){f(d)}})});if(o&&fn.isRunnable(o)){if((i==null?void 0:i.recursionLimit)===0)throw new Error("Recursion limit reached.");const u=await o.stream(a,s);for await(const f of u)yield f}else if(wR(o))for await(const u of bR(s,o))(l=i==null?void 0:i.signal)==null||l.throwIfAborted(),yield u;else if(cU(o))for(const u of uU(s,o))(c=i==null?void 0:i.signal)==null||c.throwIfAborted(),yield u;else yield o}transform(n,r){return this._transformStreamWithConfig(n,this._transform.bind(this),r)}async stream(n,r){async function*i(){yield n}const a=yn(r),s=new Wp({generator:this.transform(i(),a),config:a});return await s.setup,ns.fromAsyncGenerator(s)}},MNe=class extends fv{},Lte=class extends fn{constructor(e){super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"runnable");P(this,"fallbacks");this.runnable=e.runnable,this.fallbacks=e.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){const r=yn(n),i=await Qa(r),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),wi(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=kn(s,{callbacks:o==null?void 0:o.getChild()});return await ji.runWithConfig(l,async()=>{var f;let u;for(const d of this.runnables()){(f=r==null?void 0:r.signal)==null||f.throwIfAborted();try{const h=await d.invoke(e,l);return await(o==null?void 0:o.handleChainEnd(wi(h,"output"))),h}catch(h){u===void 0&&(u=h)}}throw u===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(u)),u)})}async*_streamIterator(e,n){var f;const r=yn(n),i=await Qa(r),{runId:a,...s}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),wi(e,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName));let l,c;for(const d of this.runnables()){(f=r==null?void 0:r.signal)==null||f.throwIfAborted();const h=kn(s,{callbacks:o==null?void 0:o.getChild()});try{const p=await d.stream(e,h);c=bR(h,p);break}catch(p){l===void 0&&(l=p)}}if(c===void 0){const d=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(d)),d}let u;try{for await(const d of c){yield d;try{u=u===void 0?u:this._concatOutputChunks(u,d)}catch{u=void 0}}}catch(d){throw await(o==null?void 0:o.handleChainError(d)),d}await(o==null?void 0:o.handleChainEnd(wi(u,"output")))}async batch(e,n,r){var l;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n??{},e.length),a=await Promise.all(i.map(c=>Qa(c))),s=await Promise.all(a.map(async(c,u)=>{const f=await(c==null?void 0:c.handleChainStart(this.toJSON(),wi(e[u],"input"),i[u].runId,void 0,void 0,void 0,i[u].runName));return delete i[u].runId,f}));let o;for(const c of this.runnables()){(l=i[0].signal)==null||l.throwIfAborted();try{const u=await c.batch(e,s.map((f,d)=>kn(i[d],{callbacks:f==null?void 0:f.getChild()})),r);return await Promise.all(s.map((f,d)=>f==null?void 0:f.handleChainEnd(wi(u[d],"output")))),u}catch(u){o===void 0&&(o=u)}}throw o?(await Promise.all(s.map(c=>c==null?void 0:c.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};function Zi(t){if(typeof t=="function")return new Zu({func:t});if(fn.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Zi(r);return new fv({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var CM=class extends fn{constructor(e){e instanceof fv&&(e={mapper:e});super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"mapper");this.mapper=e.mapper}static lc_name(){return"RunnableAssign"}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const i=this.mapper.getStepsKeys(),[a,s]=AM(e),o=this.mapper.transform(s,kn(r,{callbacks:n==null?void 0:n.getChild()})),l=o.next();for await(const c of a){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const u=Object.fromEntries(Object.entries(c).filter(([f])=>!i.includes(f)));Object.keys(u).length>0&&(yield u)}yield(await l).value;for await(const c of o)yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=yn(n),a=new Wp({generator:this.transform(r(),i),config:i});return await a.setup,ns.fromAsyncGenerator(a)}},Dte=class extends fn{constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e});super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"keys");this.keys=e.keys}static lc_name(){return"RunnablePick"}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=yn(n),a=new Wp({generator:this.transform(r(),i),config:i});return await a.setup,ns.fromAsyncGenerator(a)}},_R=class extends kd{constructor(e){const n=Mu.from([Zu.from(async r=>{let i;if(gw(r))try{i=await Y5(this.schema,r.args)}catch{throw new SE("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}});P(this,"name");P(this,"description");P(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function LNe(t,e){const n=e.name??t.getName(),r=e.description??fb(e.schema);return Q$(e.schema)?new _R({name:n,description:r,schema:Md({input:Vp()}).transform(i=>i.input),bound:t}):new _R({name:n,description:r,schema:e.schema,bound:t})}const IE=(t,e)=>{const n=[...new Set(e==null?void 0:e.map(i=>{if(typeof i=="string")return i;const a=new i({});if(!("getType"in a)||typeof a.getType!="function")throw new Error("Invalid type provided.");return a.getType()}))],r=t.getType();return n.some(i=>i===r)};function DNe(t,e){return Array.isArray(t)?fU(t,e):Zu.from(n=>fU(n,t))}function fU(t,e={}){const{includeNames:n,excludeNames:r,includeTypes:i,excludeTypes:a,includeIds:s,excludeIds:o}=e,l=[];for(const c of t)if(!(r&&c.name&&r.includes(c.name))){{if(a&&IE(c,a))continue;if(o&&c.id&&o.includes(c.id))continue}i||s||n?(n&&c.name&&n.some(u=>u===c.name)||i&&IE(c,i)||s&&c.id&&s.some(u=>u===c.id))&&l.push(c):l.push(c)}return l}function FNe(t){return Array.isArray(t)?dU(t):Zu.from(dU)}function dU(t){if(!t.length)return[];const e=[];for(const n of t){const r=n,i=e.pop();if(!i)e.push(r);else if(r.getType()==="tool"||r.getType()!==i.getType())e.push(i,r);else{const a=EE(i),s=EE(r),o=a.concat(s);typeof a.content=="string"&&typeof s.content=="string"&&(o.content=`${a.content}
${s.content}`),e.push(zNe(o))}}return e}function BNe(t,e){if(Array.isArray(t)){const n=t;if(!e)throw new Error("Options parameter is required when providing messages.");return hU(n,e)}else{const n=t;return Zu.from(r=>hU(r,n)).withConfig({runName:"trim_messages"})}}async function hU(t,e){const{maxTokens:n,tokenCounter:r,strategy:i="last",allowPartial:a=!1,endOn:s,startOn:o,includeSystem:l=!1,textSplitter:c}=e;if(o&&i==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(l&&i==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let u;"getNumTokens"in r?u=async d=>(await Promise.all(d.map(p=>r.getNumTokens(p.content)))).reduce((p,m)=>p+m,0):u=async d=>r(d);let f=Bte;if(c&&("splitText"in c?f=c.splitText:f=async d=>c(d)),i==="first")return Fte(t,{maxTokens:n,tokenCounter:u,textSplitter:f,partialStrategy:a?"first":void 0,endOn:s});if(i==="last")return UNe(t,{maxTokens:n,tokenCounter:u,textSplitter:f,allowPartial:a,includeSystem:l,startOn:o,endOn:s});throw new Error(`Unrecognized strategy: '${i}'. Must be one of 'first' or 'last'.`)}async function Fte(t,e){const{maxTokens:n,tokenCounter:r,textSplitter:i,partialStrategy:a,endOn:s}=e;let o=[...t],l=0;for(let c=0;c<o.length;c+=1){const u=c>0?o.slice(0,-c):o;if(await r(u)<=n){l=o.length-c;break}}if(l<o.length&&a){let c=!1;if(Array.isArray(o[l].content)){const u=o[l];if(typeof u.content=="string")throw new Error("Expected content to be an array.");const f=u.content.length,d=a==="last"?[...u.content].reverse():u.content;for(let h=1;h<=f;h+=1){const p=a==="first"?d.slice(0,h):d.slice(-h),m=Object.fromEntries(Object.entries(u).filter(([v])=>v!=="type"&&!v.startsWith("lc_"))),y=PM(u.getType(),{...m,content:p}),g=[...o.slice(0,l),y];if(await r(g)<=n)o=g,l+=1,c=!0;else break}c&&a==="last"&&(u.content=[...d].reverse())}if(!c){const u=o[l];let f;if(Array.isArray(u.content)&&u.content.some(d=>typeof d=="string"||d.type==="text")){const d=u.content.find(h=>h.type==="text"&&h.text);f=d==null?void 0:d.text}else typeof u.content=="string"&&(f=u.content);if(f){const d=await i(f),h=d.length;a==="last"&&d.reverse();for(let p=0;p<h-1;p+=1)if(d.pop(),u.content=d.join(""),await r([...o.slice(0,l),u])<=n){a==="last"&&(u.content=[...d].reverse().join("")),o=[...o.slice(0,l),u],l+=1;break}}}}if(s){const c=Array.isArray(s)?s:[s];for(;l>0&&!IE(o[l-1],c);)l-=1}return o.slice(0,l)}async function UNe(t,e){var u;const{allowPartial:n=!1,includeSystem:r=!1,endOn:i,startOn:a,...s}=e;let o=t.map(f=>{const d=Object.fromEntries(Object.entries(f).filter(([h])=>h!=="type"&&!h.startsWith("lc_")));return PM(f.getType(),d,gb(f))});if(i){const f=Array.isArray(i)?i:[i];for(;o.length>0&&!IE(o[o.length-1],f);)o=o.slice(0,-1)}const l=r&&((u=o[0])==null?void 0:u.getType())==="system";let c=l?o.slice(0,1).concat(o.slice(1).reverse()):o.reverse();return c=await Fte(c,{...s,partialStrategy:n?"last":void 0,endOn:a}),l?[c[0],...c.slice(1).reverse()]:c.reverse()}const pU={human:{message:Ma,messageChunk:ik},ai:{message:Ei,messageChunk:Oo},system:{message:Al,messageChunk:fy},developer:{message:Al,messageChunk:fy},tool:{message:_c,messageChunk:Q5},function:{message:nk,messageChunk:rk},generic:{message:Dd,messageChunk:tk},remove:{message:tp,messageChunk:tp}};function PM(t,e,n){var a;let r,i;switch(t){case"human":n?r=new ik(e):i=new Ma(e);break;case"ai":if(n){let s={...e};"tool_calls"in s&&(s={...s,tool_call_chunks:(a=s.tool_calls)==null?void 0:a.map(o=>({...o,type:"tool_call_chunk",index:void 0,args:JSON.stringify(o.args)}))}),r=new Oo(s)}else i=new Ei(e);break;case"system":n?r=new fy(e):i=new Al(e);break;case"developer":n?r=new fy({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}}):i=new Al({...e,additional_kwargs:{...e.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in e)n?r=new Q5(e):i=new _c(e);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(n)r=new rk(e);else{if(!e.name)throw new Error("FunctionMessage must have a 'name' field");i=new nk(e)}break;case"generic":if("role"in e)n?r=new tk(e):i=new Dd(e);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${t}`)}if(n&&r)return r;if(i)return i;throw new Error(`Unrecognized message type ${t}`)}function zNe(t){const e=t.getType();let n;const r=Object.fromEntries(Object.entries(t).filter(([i])=>!["type","tool_call_chunks"].includes(i)&&!i.startsWith("lc_")));if(e in pU&&(n=PM(e,r)),!n)throw new Error(`Unrecognized message chunk class ${e}. Supported classes are ${Object.keys(pU)}`);return n}function Bte(t){const e=t.split(`
`);return Promise.resolve([...e.slice(0,-1).map(n=>`${n}
`),e[e.length-1]])}const VNe=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"],WNe=["image","video","audio","text-plain","file"],HNe=["text","reasoning",...VNe,...WNe];var Ute={};At(Ute,{AIMessage:()=>Ei,AIMessageChunk:()=>Oo,BaseMessage:()=>_o,BaseMessageChunk:()=>Ld,ChatMessage:()=>Dd,ChatMessageChunk:()=>tk,DEFAULT_MERGE_IGNORE_KEYS:()=>nee,FunctionMessage:()=>nk,FunctionMessageChunk:()=>rk,HumanMessage:()=>Ma,HumanMessageChunk:()=>ik,KNOWN_BLOCK_TYPES:()=>HNe,RemoveMessage:()=>tp,SystemMessage:()=>Al,SystemMessageChunk:()=>fy,ToolMessage:()=>_c,ToolMessageChunk:()=>Q5,_isMessageFieldWithRole:()=>aee,_mergeDicts:()=>ya,_mergeLists:()=>z1,_mergeObj:()=>ree,_mergeStatus:()=>tee,coerceMessageLikeToMessage:()=>pc,collapseToolCallChunks:()=>pee,convertToChunk:()=>EE,convertToOpenAIImageBlock:()=>VQ,convertToProviderContentBlock:()=>WQ,defaultTextSplitter:()=>Bte,defaultToolCallParser:()=>uM,filterMessages:()=>DNe,getBufferString:()=>dM,iife:()=>oOe,isAIMessage:()=>_p,isAIMessageChunk:()=>rR,isBase64ContentBlock:()=>iM,isBaseMessage:()=>Jr,isBaseMessageChunk:()=>gb,isChatMessage:()=>Bke,isChatMessageChunk:()=>Uke,isDataContentBlock:()=>Iu,isDirectToolOutput:()=>cM,isFunctionMessage:()=>zke,isFunctionMessageChunk:()=>Vke,isHumanMessage:()=>Wke,isHumanMessageChunk:()=>Hke,isIDContentBlock:()=>zQ,isMessage:()=>HQ,isOpenAIToolCallArray:()=>Lke,isPlainTextContentBlock:()=>nke,isSystemMessage:()=>qke,isSystemMessageChunk:()=>Gke,isToolMessage:()=>ek,isToolMessageChunk:()=>cee,isURLContentBlock:()=>rM,mapChatMessagesToStoredMessages:()=>dOe,mapStoredMessageToChatMessage:()=>hM,mapStoredMessagesToChatMessages:()=>fOe,mergeContent:()=>Ru,mergeMessageRuns:()=>FNe,mergeResponseMetadata:()=>see,mergeUsageMetadata:()=>lM,parseBase64DataUrl:()=>Mg,parseMimeType:()=>rke,trimMessages:()=>BNe});function NM(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function IM(t){return t!==void 0&&fn.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function RM(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&($d(t.schema)||t.schema!=null&&typeof t.schema=="object"&&"type"in t.schema&&typeof t.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(t.schema.type))}function K1(t){return RM(t)||IM(t)||NM(t)}var zte={};At(zte,{convertToOpenAIFunction:()=>Vte,convertToOpenAITool:()=>qNe,isLangChainTool:()=>K1,isRunnableToolLike:()=>IM,isStructuredTool:()=>NM,isStructuredToolParams:()=>RM});function Vte(t,e){const n=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:Oa(t.schema),...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}}function qNe(t,e){const n=typeof e=="number"?void 0:e;let r;return K1(t)?r={type:"function",function:Vte(t)}:r=t,(n==null?void 0:n.strict)!==void 0&&(r.function.strict=n.strict),r}var Wte={};At(Wte,{BasePromptValue:()=>fk,ChatPromptValue:()=>$M,ImagePromptValue:()=>Hte,StringPromptValue:()=>jM});var fk=class extends ko{},jM=class extends fk{constructor(e){super({value:e});P(this,"lc_namespace",["langchain_core","prompt_values"]);P(this,"lc_serializable",!0);P(this,"value");this.value=e}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new Ma(this.value)]}},$M=class extends fk{constructor(e){Array.isArray(e)&&(e={messages:e});super(e);P(this,"lc_namespace",["langchain_core","prompt_values"]);P(this,"lc_serializable",!0);P(this,"messages");this.messages=e.messages}static lc_name(){return"ChatPromptValue"}toString(){return dM(this.messages)}toChatMessages(){return this.messages}},Hte=class extends fk{constructor(e){"imageUrl"in e||(e={imageUrl:e});super(e);P(this,"lc_namespace",["langchain_core","prompt_values"]);P(this,"lc_serializable",!0);P(this,"imageUrl");P(this,"value");this.imageUrl=e.imageUrl}static lc_name(){return"ImagePromptValue"}toString(){return this.imageUrl.url}toChatMessages(){return[new Ma({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}},ot="0123456789abcdef".split(""),GNe=[-2147483648,8388608,32768,128],qo=[24,16,8,0],Xx=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ti=[];function kl(t,e){e?(Ti[0]=Ti[16]=Ti[1]=Ti[2]=Ti[3]=Ti[4]=Ti[5]=Ti[6]=Ti[7]=Ti[8]=Ti[9]=Ti[10]=Ti[11]=Ti[12]=Ti[13]=Ti[14]=Ti[15]=0,this.blocks=Ti):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}kl.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if(n!=="string"){if(n==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var r,i=0,a,s=t.length,o=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,this.block=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(a=this.start;i<s&&a<64;++i)o[a>>>2]|=t[i]<<qo[a++&3];else for(a=this.start;i<s&&a<64;++i)r=t.charCodeAt(i),r<128?o[a>>>2]|=r<<qo[a++&3]:r<2048?(o[a>>>2]|=(192|r>>>6)<<qo[a++&3],o[a>>>2]|=(128|r&63)<<qo[a++&3]):r<55296||r>=57344?(o[a>>>2]|=(224|r>>>12)<<qo[a++&3],o[a>>>2]|=(128|r>>>6&63)<<qo[a++&3],o[a>>>2]|=(128|r&63)<<qo[a++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++i)&1023),o[a>>>2]|=(240|r>>>18)<<qo[a++&3],o[a>>>2]|=(128|r>>>12&63)<<qo[a++&3],o[a>>>2]|=(128|r>>>6&63)<<qo[a++&3],o[a>>>2]|=(128|r&63)<<qo[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=o[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};kl.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>>2]|=GNe[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};kl.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=this.blocks,c,u,f,d,h,p,m,y,g,v,w;for(c=16;c<64;++c)h=l[c-15],u=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=l[c-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,l[c]=l[c-16]+u+l[c-7]+f<<0;for(w=e&n,c=0;c<64;c+=4)this.first?(this.is224?(y=300032,h=l[0]-1413257819,o=h-150054599<<0,r=h+24177077<<0):(y=704751109,h=l[0]-210244248,o=h-1521486534<<0,r=h+143694565<<0),this.first=!1):(u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),y=t&e,d=y^t&n^w,m=i&a^~i&s,h=o+f+m+Xx[c]+l[c],p=u+d,o=r+h<<0,r=h+p<<0),u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),g=r&t,d=g^r&e^y,m=s&o^~s&i,h=a+f+m+Xx[c+1]+l[c+1],p=u+d,s=n+h<<0,n=h+p<<0,u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),v=n&r,d=v^n&t^g,m=a&s^~a&o,h=i+f+m+Xx[c+2]+l[c+2],p=u+d,a=e+h<<0,e=h+p<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),w=e&n,d=w^e&r^v,m=a&s^~a&o,h=i+f+m+Xx[c+3]+l[c+3],p=u+d,i=t+h<<0,t=h+p<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0,this.h5=this.h5+a<<0,this.h6=this.h6+s<<0,this.h7=this.h7+o<<0};kl.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=ot[t>>>28&15]+ot[t>>>24&15]+ot[t>>>20&15]+ot[t>>>16&15]+ot[t>>>12&15]+ot[t>>>8&15]+ot[t>>>4&15]+ot[t&15]+ot[e>>>28&15]+ot[e>>>24&15]+ot[e>>>20&15]+ot[e>>>16&15]+ot[e>>>12&15]+ot[e>>>8&15]+ot[e>>>4&15]+ot[e&15]+ot[n>>>28&15]+ot[n>>>24&15]+ot[n>>>20&15]+ot[n>>>16&15]+ot[n>>>12&15]+ot[n>>>8&15]+ot[n>>>4&15]+ot[n&15]+ot[r>>>28&15]+ot[r>>>24&15]+ot[r>>>20&15]+ot[r>>>16&15]+ot[r>>>12&15]+ot[r>>>8&15]+ot[r>>>4&15]+ot[r&15]+ot[i>>>28&15]+ot[i>>>24&15]+ot[i>>>20&15]+ot[i>>>16&15]+ot[i>>>12&15]+ot[i>>>8&15]+ot[i>>>4&15]+ot[i&15]+ot[a>>>28&15]+ot[a>>>24&15]+ot[a>>>20&15]+ot[a>>>16&15]+ot[a>>>12&15]+ot[a>>>8&15]+ot[a>>>4&15]+ot[a&15]+ot[s>>>28&15]+ot[s>>>24&15]+ot[s>>>20&15]+ot[s>>>16&15]+ot[s>>>12&15]+ot[s>>>8&15]+ot[s>>>4&15]+ot[s&15];return this.is224||(l+=ot[o>>>28&15]+ot[o>>>24&15]+ot[o>>>20&15]+ot[o>>>16&15]+ot[o>>>12&15]+ot[o>>>8&15]+ot[o>>>4&15]+ot[o&15]),l};kl.prototype.toString=kl.prototype.hex;kl.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=[t>>>24&255,t>>>16&255,t>>>8&255,t&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,o&255),l};kl.prototype.array=kl.prototype.digest;kl.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};const MM=(...t)=>new kl(!1,!0).update(t.join("")).hex();var qte={};At(qte,{sha256:()=>MM});var Gte={};At(Gte,{BaseCache:()=>Yte,InMemoryCache:()=>Zte,defaultHashKeyEncoder:()=>Kte,deserializeStoredGeneration:()=>KNe,serializeGeneration:()=>YNe});const Kte=(...t)=>MM(t.join("_"));function KNe(t){return t.message!==void 0?{text:t.text,message:hM(t.message)}:{text:t.text}}function YNe(t){const e={text:t.text};return t.message!==void 0&&(e.message=t.message.toDict()),e}var Yte=class{constructor(){P(this,"keyEncoder",Kte)}makeDefaultKeyEncoder(e){this.keyEncoder=e}};const ZNe=new Map;var Zte=class Xte extends Yte{constructor(n){super();P(this,"cache");this.cache=n??new Map}lookup(n,r){return Promise.resolve(this.cache.get(this.keyEncoder(n,r))??null)}async update(n,r,i){this.cache.set(this.keyEncoder(n,r),i)}static global(){return new Xte(ZNe)}},dk={};dk.byteLength=QNe;dk.toByteArray=tIe;dk.fromByteArray=iIe;var nc=[],ao=[],XNe=typeof Uint8Array<"u"?Uint8Array:Array,MC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var xm=0,JNe=MC.length;xm<JNe;++xm)nc[xm]=MC[xm],ao[MC.charCodeAt(xm)]=xm;ao[45]=62;ao[95]=63;function Jte(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function QNe(t){var e=Jte(t),n=e[0],r=e[1];return(n+r)*3/4-r}function eIe(t,e,n){return(e+n)*3/4-n}function tIe(t){var e,n=Jte(t),r=n[0],i=n[1],a=new XNe(eIe(t,r,i)),s=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)e=ao[t.charCodeAt(l)]<<18|ao[t.charCodeAt(l+1)]<<12|ao[t.charCodeAt(l+2)]<<6|ao[t.charCodeAt(l+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=ao[t.charCodeAt(l)]<<2|ao[t.charCodeAt(l+1)]>>4,a[s++]=e&255),i===1&&(e=ao[t.charCodeAt(l)]<<10|ao[t.charCodeAt(l+1)]<<4|ao[t.charCodeAt(l+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function nIe(t){return nc[t>>18&63]+nc[t>>12&63]+nc[t>>6&63]+nc[t&63]}function rIe(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(nIe(r));return i.join("")}function iIe(t){for(var e,n=t.length,r=n%3,i=[],a=16383,s=0,o=n-r;s<o;s+=a)i.push(rIe(t,s,s+a>o?o:s+a));return r===1?(e=t[n-1],i.push(nc[e>>2]+nc[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(nc[e>>10]+nc[e>>4&63]+nc[e<<2&63]+"=")),i.join("")}var aIe=Object.defineProperty,sIe=(t,e,n)=>e in t?aIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oIe=(t,e,n)=>(sIe(t,e+"",n),n);function lIe(t,e){let n=Array.from({length:t.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const a=t.slice(n[i].start,n[i+1].end),s=e.get(a.join(","));s!=null&&(r==null||s<r[0])&&(r=[s,i])}if(r!=null){const i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function cIe(t,e){return t.length===1?[e.get(t.join(","))]:lIe(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function uIe(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var xR=class{constructor(t,e){P(this,"specialTokens");P(this,"inverseSpecialTokens");P(this,"patStr");P(this,"textEncoder",new TextEncoder);P(this,"textDecoder",new TextDecoder("utf-8"));P(this,"rankMap",new Map);P(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[a,s,...o]=i.split(" "),l=Number.parseInt(s,10);return o.forEach((c,u)=>r[c]=l+u),r},{});for(const[r,i]of Object.entries(n)){const a=dk.toByteArray(r);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,a])=>(r[a]=this.textEncoder.encode(i),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),i=xR.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(c=>!s.has(c)):n);if(o.size>0){const c=xR.specialTokenRegex([...o]),u=t.match(c);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let l=0;for(;;){let c=null,u=l;for(;i.lastIndex=u,c=i.exec(t),!(c==null||s.has(c[0]));)u=c.index+1;const f=(c==null?void 0:c.index)??t.length;for(const h of t.substring(l,f).matchAll(r)){const p=this.textEncoder.encode(h[0]),m=this.rankMap.get(p.join(","));if(m!=null){a.push(m);continue}a.push(...cIe(p,this.rankMap))}if(c==null)break;let d=this.specialTokens[c[0]];a.push(d),l=c.index+c[0].length}return a}decode(t){const e=[];let n=0;for(let a=0;a<t.length;++a){const s=t[a],o=this.textMap.get(s)??this.inverseSpecialTokens[s];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let i=0;for(const a of e)r.set(a,i),i+=a.length;return this.textDecoder.decode(r)}},Qte=xR;oIe(Qte,"specialTokenRegex",t=>new RegExp(t.map(e=>uIe(e)).join("|"),"g"));function fIe(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var ene={};At(ene,{encodingForModel:()=>LM,getEncoding:()=>tne});const Jx={},dIe=new G1({});async function tne(t){return t in Jx||(Jx[t]=dIe.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Qte(e)).catch(e=>{throw delete Jx[t],e})),await Jx[t]}async function LM(t){return tne(fIe(t))}var nne={};At(nne,{BaseLangChain:()=>FM,BaseLanguageModel:()=>BM,calculateMaxTokens:()=>pIe,getEmbeddingContextSize:()=>hIe,getModelContextSize:()=>rne,getModelNameForTiktoken:()=>hk,isOpenAITool:()=>DM});const hk=t=>t.startsWith("gpt-5")?"gpt-5":t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t,hIe=t=>{switch(t){case"text-embedding-ada-002":return 8191;default:return 2046}},rne=t=>{switch(hk(t)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function DM(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const pIe=async({prompt:t,modelName:e})=>{let n;try{n=(await LM(hk(e))).encode(t).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),n=Math.ceil(t.length/4)}return rne(e)-n},mIe=()=>!1;var FM=class extends fn{constructor(e){super(e);P(this,"verbose");P(this,"callbacks");P(this,"tags");P(this,"metadata");this.verbose=e.verbose??mIe(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},BM=class extends FM{constructor({callbacks:e,callbackManager:n,...r}){const{cache:i,...a}=r;super({callbacks:e??n,...a});P(this,"caller");P(this,"cache");P(this,"_encoding");typeof i=="object"?this.cache=i:i?this.cache=Zte.global():this.cache=void 0,this.caller=new G1(r??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(e){let n;typeof e=="string"?n=e:n=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let r=Math.ceil(n.length/4);if(!this._encoding)try{this._encoding=await LM("modelName"in this?hk(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{r=this._encoding.encode(n).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new jM(e):Array.isArray(e)?new $M(e.map(pc)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([s,o])=>o!==void 0).map(([s,o])=>`${s}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}get profile(){return{}}};const Hi=[];for(let t=0;t<256;++t)Hi.push((t+256).toString(16).slice(1));function gIe(t,e=0){return(Hi[t[e+0]]+Hi[t[e+1]]+Hi[t[e+2]]+Hi[t[e+3]]+"-"+Hi[t[e+4]]+Hi[t[e+5]]+"-"+Hi[t[e+6]]+Hi[t[e+7]]+"-"+Hi[t[e+8]]+Hi[t[e+9]]+"-"+Hi[t[e+10]]+Hi[t[e+11]]+Hi[t[e+12]]+Hi[t[e+13]]+Hi[t[e+14]]+Hi[t[e+15]]).toLowerCase()}let LC;const yIe=new Uint8Array(16);function vIe(){if(!LC){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");LC=crypto.getRandomValues.bind(crypto)}return LC(yIe)}const wIe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mU={randomUUID:wIe};function ine(t,e,n){var i;if(mU.randomUUID&&!t)return mU.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??vIe();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,gIe(r)}const UM="__gemini_function_call_thought_signatures__",bIe="ErYCCrMCAdHtim9kOoOkrPiCNVsmlpMIKd7ZMxgiFbVQOkgp7nlLcDMzVsZwIzvuT7nQROivoXA72ccC2lSDvR0Gh7dkWaGuj7ctv6t7ZceHnecx0QYa+ix8tYpRfjhyWozQ49lWiws6+YGjCt10KRTyWsZ2h6O7iHTYJwKIRwGUHRKy/qK/6kFxJm5ML00gLq4D8s5Z6DBpp2ZlR+uF4G8jJgeWQgyHWVdx2wGYElaceVAc66tZdPQRdOHpWtgYSI1YdaXgVI8KHY3/EfNc2YqqMIulvkDBAnuMhkAjV9xmBa54Tq+ih3Im4+r3DzqhGqYdsSkhS0kZMwte4Hjs65dZzCw9lANxIqYi1DJ639WNPYihp/DCJCos7o+/EeSPJaio5sgWDyUnMGkY1atsJZ+m7pj7DD5tvQ==",_Ie=t=>t();function xIe(t){return Dd.isInstance(t)?t.role:t.type}function SIe(t){switch(t){case"supervisor":case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${t}`)}}function EIe(t){if("mimeType"in t&&"data"in t)return{inlineData:{mimeType:t.mimeType,data:t.data}};if("mimeType"in t&&"fileUri"in t)return{fileData:{mimeType:t.mimeType,fileUri:t.fileUri}};throw new Error("Invalid media content")}function AIe(t,e){var n;return(n=e.map(r=>_p(r)?r.tool_calls??[]:[]).flat().find(r=>r.id===t.tool_call_id))==null?void 0:n.name}function kIe(t){return{providerName:"Google Gemini",fromStandardTextBlock(n){return{text:n.text}},fromStandardImageBlock(n){if(!t)throw new Error("This model does not support images");if(n.source_type==="url"){const r=Mg({dataUrl:n.url});return r?{inlineData:{mimeType:r.mime_type,data:r.data}}:{fileData:{mimeType:n.mime_type??"",fileUri:n.url}}}if(n.source_type==="base64")return{inlineData:{mimeType:n.mime_type??"",data:n.data}};throw new Error(`Unsupported source type: ${n.source_type}`)},fromStandardAudioBlock(n){if(!t)throw new Error("This model does not support audio");if(n.source_type==="url"){const r=Mg({dataUrl:n.url});return r?{inlineData:{mimeType:r.mime_type,data:r.data}}:{fileData:{mimeType:n.mime_type??"",fileUri:n.url}}}if(n.source_type==="base64")return{inlineData:{mimeType:n.mime_type??"",data:n.data}};throw new Error(`Unsupported source type: ${n.source_type}`)},fromStandardFileBlock(n){if(!t)throw new Error("This model does not support files");if(n.source_type==="text")return{text:n.text};if(n.source_type==="url"){const r=Mg({dataUrl:n.url});return r?{inlineData:{mimeType:r.mime_type,data:r.data}}:{fileData:{mimeType:n.mime_type??"",fileUri:n.url}}}if(n.source_type==="base64")return{inlineData:{mimeType:n.mime_type??"",data:n.data}};throw new Error(`Unsupported source type: ${n.source_type}`)}}}function gU(t,e){var n;if(Iu(t))return WQ(t,kIe(e));if(t.type==="text")return{text:t.text};if(t.type==="executableCode")return{executableCode:t.executableCode};if(t.type==="codeExecutionResult")return{codeExecutionResult:t.codeExecutionResult};if(t.type==="image_url"){if(!e)throw new Error("This model does not support images");let r;if(typeof t.image_url=="string")r=t.image_url;else if(typeof t.image_url=="object"&&"url"in t.image_url)r=t.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[i,a]=r.split(",");if(!i.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[s,o]=i.replace(/^data:/,"").split(";");if(o!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:a,mimeType:s}}}else{if(t.type==="media")return EIe(t);if(t.type==="tool_use")return{functionCall:{name:t.name,args:t.input}};if(t.type==="tool_call")return{functionCall:{name:t.name,args:t.args}};if((n=t.type)!=null&&n.includes("/")&&t.type.split("/").length===2&&"data"in t&&typeof t.data=="string")return{inlineData:{mimeType:t.type,data:t.data}};if("functionCall"in t)return;throw"type"in t?new Error(`Unknown content type ${t.type}`):new Error(`Unknown content ${JSON.stringify(t)}`)}}function OIe(t,e,n,r){var o,l;if(ek(t)){const c=t.name??AIe(t,n);if(c===void 0)throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage "${t.id}" from your passed messages. Please populate a "name" field on that ToolMessage explicitly.`);const u=Array.isArray(t.content)?t.content.map(f=>gU(f,e)).filter(f=>f!==void 0):t.content;return t.status==="error"?[{functionResponse:{name:c,response:{error:{details:u}}}}]:[{functionResponse:{name:c,response:{result:u}}}]}let i=[];const a=[];typeof t.content=="string"&&t.content&&a.push({text:t.content}),Array.isArray(t.content)&&a.push(...t.content.map(c=>gU(c,e)).filter(c=>c!==void 0));const s=(o=t.additional_kwargs)==null?void 0:o[UM];return _p(t)&&((l=t.tool_calls)!=null&&l.length)&&(i=t.tool_calls.map(c=>{const u=_Ie(()=>{if(c.id){const f=s==null?void 0:s[c.id];if(f)return f}return r!=null&&r.includes("gemini-3")?bIe:""});return{functionCall:{name:c.name,args:c.args},...u?{thoughtSignature:u}:{}}})),[...a,...i]}function yU(t,e,n=!1,r){return t.reduce((i,a,s)=>{if(!Jr(a))throw new Error("Unsupported message input");const o=xIe(a);if(o==="system"&&s!==0)throw new Error("System message should be the first one");const l=SIe(o),c=i.content[i.content.length];if(!i.mergeWithPreviousContent&&c&&c.role===l)throw new Error("Google Generative AI requires alternate messages between authors");const u=OIe(a,e,t.slice(0,s),r);if(i.mergeWithPreviousContent){const h=i.content[i.content.length-1];if(!h)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return h.parts.push(...u),{mergeWithPreviousContent:!1,content:i.content}}let f=l;(f==="function"||f==="system"&&!n)&&(f="user");const d={role:f,parts:u};return{mergeWithPreviousContent:o==="system"&&!n,content:[...i.content,d]}},{content:[],mergeWithPreviousContent:!1}).content}function TIe(t,e){var f,d,h,p;if(!t.candidates||t.candidates.length===0||!t.candidates[0])return{generations:[],llmOutput:{filters:t.promptFeedback}};const[n]=t.candidates,{content:r,...i}=n,a=(f=r.parts)==null?void 0:f.reduce((m,y)=>("functionCall"in y&&y.functionCall&&m.push({...y,id:"id"in y.functionCall&&typeof y.functionCall.id=="string"?y.functionCall.id:ine()}),m),[]);let s;const o=r==null?void 0:r.parts;Array.isArray(o)&&o.length===1&&"text"in o[0]&&o[0].text&&!o[0].thought?s=o[0].text:Array.isArray(o)&&o.length>0?s=o.map(m=>m.thought&&"text"in m&&m.text?{type:"thinking",thinking:m.text,...m.thoughtSignature?{signature:m.thoughtSignature}:{}}:"text"in m?{type:"text",text:m.text}:"inlineData"in m?{type:"inlineData",inlineData:m.inlineData}:"functionCall"in m?{type:"functionCall",functionCall:m.functionCall}:"functionResponse"in m?{type:"functionResponse",functionResponse:m.functionResponse}:"fileData"in m?{type:"fileData",fileData:m.fileData}:"executableCode"in m?{type:"executableCode",executableCode:m.executableCode}:"codeExecutionResult"in m?{type:"codeExecutionResult",codeExecutionResult:m.codeExecutionResult}:m):s=[];const l=a==null?void 0:a.reduce((m,y)=>("thoughtSignature"in y&&typeof y.thoughtSignature=="string"&&(m[y.id]=y.thoughtSignature),m),{});let c="";if(typeof s=="string")c=s;else if(Array.isArray(s)&&s.length>0){const m=s.find(y=>"text"in y);c=(m==null?void 0:m.text)??c}return{generations:[{text:c,message:new Ei({content:s??"",tool_calls:a==null?void 0:a.map(m=>({type:"tool_call",id:m.id,name:m.functionCall.name,args:m.functionCall.args})),additional_kwargs:{...i,[UM]:l},usage_metadata:e==null?void 0:e.usageMetadata}),generationInfo:i}],llmOutput:{tokenUsage:{promptTokens:(d=e==null?void 0:e.usageMetadata)==null?void 0:d.input_tokens,completionTokens:(h=e==null?void 0:e.usageMetadata)==null?void 0:h.output_tokens,totalTokens:(p=e==null?void 0:e.usageMetadata)==null?void 0:p.total_tokens}}}}function CIe(t,e){var f;if(!t.candidates||t.candidates.length===0)return null;const[n]=t.candidates,{content:r,...i}=n,a=(f=r.parts)==null?void 0:f.reduce((d,h)=>("functionCall"in h&&h.functionCall&&d.push({...h,id:"id"in h.functionCall&&typeof h.functionCall.id=="string"?h.functionCall.id:ine()}),d),[]);let s;const o=r==null?void 0:r.parts;Array.isArray(o)&&o.every(d=>"text"in d&&!d.thought)?s=o.map(d=>d.text).join(""):Array.isArray(o)?s=o.map(d=>d.thought&&"text"in d&&d.text?{type:"thinking",thinking:d.text,...d.thoughtSignature?{signature:d.thoughtSignature}:{}}:"text"in d?{type:"text",text:d.text}:"inlineData"in d?{type:"inlineData",inlineData:d.inlineData}:"functionCall"in d?{type:"functionCall",functionCall:d.functionCall}:"functionResponse"in d?{type:"functionResponse",functionResponse:d.functionResponse}:"fileData"in d?{type:"fileData",fileData:d.fileData}:"executableCode"in d?{type:"executableCode",executableCode:d.executableCode}:"codeExecutionResult"in d?{type:"codeExecutionResult",codeExecutionResult:d.codeExecutionResult}:d):s=[];let l="";if(s&&typeof s=="string")l=s;else if(Array.isArray(s)){const d=s.find(h=>"text"in h);l=(d==null?void 0:d.text)??""}const c=[];a&&c.push(...a.map(d=>({type:"tool_call_chunk",id:d.id,name:d.functionCall.name,args:JSON.stringify(d.functionCall.args)})));const u=a==null?void 0:a.reduce((d,h)=>("thoughtSignature"in h&&typeof h.thoughtSignature=="string"&&(d[h.id]=h.thoughtSignature),d),{});return new Sp({text:l,message:new Oo({content:s||"",name:r?r.role:void 0,tool_call_chunks:c,additional_kwargs:{[UM]:u},response_metadata:{model_provider:"google-genai"},usage_metadata:e.usageMetadata}),generationInfo:i})}function PIe(t){return t.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?t:[{functionDeclarations:t.map(e=>{if(K1(e)){const n=JI(e.schema);return n.type==="object"&&"properties"in n&&Object.keys(n.properties).length===0?{name:e.name,description:e.description}:(sg(n,e.name),{name:e.name,description:e.description,parameters:n})}if(DM(e)){const n=tke(e.function.parameters);return sg(n,e.function.name),{name:e.function.name,description:e.function.description??"A function available to call.",parameters:n}}return e})}]}function vU(t,e){const n={input_tokens:(t==null?void 0:t.promptTokenCount)??0,output_tokens:(t==null?void 0:t.candidatesTokenCount)??0,total_tokens:(t==null?void 0:t.totalTokenCount)??0};if(t!=null&&t.cachedContentTokenCount&&(n.input_token_details??(n.input_token_details={}),n.input_token_details.cache_read=t.cachedContentTokenCount),e==="gemini-3-pro-preview"){const r=Math.max(0,(t==null?void 0:t.promptTokenCount)??-2e5),i=Math.max(0,(t==null?void 0:t.cachedContentTokenCount)??-2e5);r&&(n.input_token_details={...n.input_token_details,over_200k:r}),i&&(n.input_token_details={...n.input_token_details,cache_read_over_200k:i})}return n}var Ep=class extends fn{constructor(e){super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"func");e&&(this.func=e.func)}static lc_name(){return"RunnablePassthrough"}async invoke(e,n){const r=yn(n);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,n){const r=yn(n);let i,a=!0;for await(const s of this._transformStreamWithConfig(e,o=>o,r))if(yield s,a)if(i===void 0)i=s;else try{i=Ad(i,s)}catch{i=void 0,a=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new CM(new fv({steps:e}))}},NIe=class extends fn{constructor(e){super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"runnables");this.runnables=e.runnables}static lc_name(){return"RouterRunnable"}async invoke(e,n){const{key:r,input:i}=e,a=this.runnables[r];if(a===void 0)throw new Error(`No runnable associated with key "${r}".`);return a.invoke(i,yn(n))}async batch(e,n,r){var d;const i=e.map(h=>h.key),a=e.map(h=>h.input);if(i.find(h=>this.runnables[h]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");const o=i.map(h=>this.runnables[h]),l=this._getOptionsList(n??{},e.length),c=((d=l[0])==null?void 0:d.maxConcurrency)??(r==null?void 0:r.maxConcurrency),u=c&&c>0?c:e.length,f=[];for(let h=0;h<a.length;h+=u){const p=a.slice(h,h+u).map((y,g)=>o[g].invoke(y,l[g])),m=await Promise.all(p);f.push(m)}return f.flat()}async stream(e,n){const{key:r,input:i}=e,a=this.runnables[r];if(a===void 0)throw new Error(`No runnable associated with key "${r}".`);return a.stream(i,n)}},IIe=class extends fn{constructor(e){super(e);P(this,"lc_namespace",["langchain_core","runnables"]);P(this,"lc_serializable",!0);P(this,"default");P(this,"branches");this.branches=e.branches,this.default=e.default}static lc_name(){return"RunnableBranch"}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");const r=e.slice(0,-1).map(([a,s])=>[Zi(a),Zi(s)]),i=Zi(e[e.length-1]);return new this({branches:r,default:i})}async _invoke(e,n,r){let i;for(let a=0;a<this.branches.length;a+=1){const[s,o]=this.branches[a];if(await s.invoke(e,kn(n,{callbacks:r==null?void 0:r.getChild(`condition:${a+1}`)}))){i=await o.invoke(e,kn(n,{callbacks:r==null?void 0:r.getChild(`branch:${a+1}`)}));break}}return i||(i=await this.default.invoke(e,kn(n,{callbacks:r==null?void 0:r.getChild("branch:default")}))),i}async invoke(e,n={}){return this._callWithConfig(this._invoke,e,n)}async*_streamIterator(e,n){const r=await Qa(n),i=await(r==null?void 0:r.handleChainStart(this.toJSON(),wi(e,"input"),n==null?void 0:n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));let a,s=!0,o;try{for(let l=0;l<this.branches.length;l+=1){const[c,u]=this.branches[l];if(await c.invoke(e,kn(n,{callbacks:i==null?void 0:i.getChild(`condition:${l+1}`)}))){o=await u.stream(e,kn(n,{callbacks:i==null?void 0:i.getChild(`branch:${l+1}`)}));for await(const d of o)if(yield d,s)if(a===void 0)a=d;else try{a=Ad(a,d)}catch{a=void 0,s=!1}break}}if(o===void 0){o=await this.default.stream(e,kn(n,{callbacks:i==null?void 0:i.getChild("branch:default")}));for await(const l of o)if(yield l,s)if(a===void 0)a=l;else try{a=Ad(a,l)}catch{a=void 0,s=!1}}}catch(l){throw await(i==null?void 0:i.handleChainError(l)),l}await(i==null?void 0:i.handleChainEnd(a??{}))}},RIe=class extends kd{constructor(e){let n=Zu.from((s,o)=>this._enterHistory(s,o??{})).withConfig({runName:"loadHistory"});const r=e.historyMessagesKey??e.inputMessagesKey;r&&(n=Ep.assign({[r]:n}).withConfig({runName:"insertHistory"}));const i=n.pipe(e.runnable.withListeners({onEnd:(s,o)=>this._exitHistory(s,o??{})})).withConfig({runName:"RunnableWithMessageHistory"}),a=e.config??{};super({...e,config:a,bound:i});P(this,"runnable");P(this,"inputMessagesKey");P(this,"outputMessagesKey");P(this,"historyMessagesKey");P(this,"getMessageHistory");this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let n;if(typeof e=="object"&&!Array.isArray(e)&&!Jr(e)){let r;this.inputMessagesKey?r=this.inputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="input",Array.isArray(e[r])&&Array.isArray(e[r][0])?n=e[r][0]:n=e[r]}else n=e;if(typeof n=="string")return[new Ma(n)];if(Array.isArray(n))return n;if(Jr(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(n,null,2)}`)}_getOutputMessages(e){let n;if(!Array.isArray(e)&&!Jr(e)&&typeof e!="string"){let r;this.outputMessagesKey!==void 0?r=this.outputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="output",e.generations!==void 0?n=e.generations[0][0].message:n=e[r]}else n=e;if(typeof n=="string")return[new Ei(n)];if(Array.isArray(n))return n;if(Jr(n))return[n];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(n,null,2)}`)}async _enterHistory(e,n){var a;const i=await((a=n==null?void 0:n.configurable)==null?void 0:a.messageHistory).getMessages();return this.historyMessagesKey===void 0?i.concat(this._getInputMessages(e)):i}async _exitHistory(e,n){var l;const r=(l=n.configurable)==null?void 0:l.messageHistory;let i;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?i=e.inputs[0]:i=e.inputs;let a=this._getInputMessages(i);if(this.historyMessagesKey===void 0){const c=await r.getMessages();a=a.slice(c.length)}const s=e.outputs;if(!s)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);const o=this._getOutputMessages(s);await r.addMessages([...a,...o])}async _mergeConfig(...e){const n=await super._mergeConfig(...e);if(!n.configurable||!n.configurable.sessionId){const i={[this.inputMessagesKey??"input"]:"foo"},a={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(i)}, ${JSON.stringify(a)})`)}const{sessionId:r}=n.configurable;return n.configurable.messageHistory=await this.getMessageHistory(r),n}},ane={};At(ane,{RouterRunnable:()=>NIe,Runnable:()=>fn,RunnableAssign:()=>CM,RunnableBinding:()=>kd,RunnableBranch:()=>IIe,RunnableEach:()=>RNe,RunnableLambda:()=>Zu,RunnableMap:()=>fv,RunnableParallel:()=>MNe,RunnablePassthrough:()=>Ep,RunnablePick:()=>Dte,RunnableRetry:()=>TM,RunnableSequence:()=>Mu,RunnableToolLike:()=>_R,RunnableWithFallbacks:()=>Lte,RunnableWithMessageHistory:()=>RIe,_coerceToRunnable:()=>Zi,ensureConfig:()=>yn,getCallbackManagerForConfig:()=>Qa,mergeConfigs:()=>go,patchConfig:()=>kn,pickRunnableConfigKeys:()=>ju,raceWithSignal:()=>$u});var Y1=class extends fn{parseResultWithPrompt(t,e,n){return this.parseResult(t,n)}_baseMessageToString(t){return typeof t.content=="string"?t.content:this._baseMessageContentToString(t.content)}_baseMessageContentToString(t){return JSON.stringify(t)}async invoke(t,e){return typeof t=="string"?this._callWithConfig(async(n,r)=>this.parseResult([{text:n}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"}):this._callWithConfig(async(n,r)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],r==null?void 0:r.callbacks),t,{...e,runType:"parser"})}},Z1=class extends Y1{parseResult(t,e){return this.parse(t[0].text,e)}async parseWithPrompt(t,e,n){return this.parse(t,n)}_type(){throw new Error("_type not implemented")}},gc=class extends Error{constructor(e,n,r,i=!1){super(e);P(this,"llmOutput");P(this,"observation");P(this,"sendToLLM");if(this.llmOutput=n,this.observation=r,this.sendToLLM=i,i&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");V1(this,"OUTPUT_PARSING_FAILURE")}},X1=class extends Z1{async*_transform(t){for await(const e of t)typeof e=="string"?yield this.parseResult([{text:e}]):yield this.parseResult([{message:e,text:this._baseMessageToString(e)}])}async*transform(t,e){yield*this._transformStreamWithConfig(t,this._transform.bind(this),{...e,runType:"parser"})}},J1=class extends X1{constructor(e){super(e);P(this,"diff",!1);this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let a;if(gb(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new Sp({message:i,text:i.content})}else if(Jr(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new Sp({message:EE(i),text:i.content})}else a=new gy({text:i});r===void 0?r=a:r=r.concat(a);const s=await this.parsePartialResult([r]);s!=null&&!ep(s,n)&&(this.diff?yield this._diff(n,s):yield s,n=s)}}getFormatInstructions(){return""}},jIe=class extends X1{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers","bytes"]);P(this,"lc_serializable",!0);P(this,"textEncoder",new TextEncoder)}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}},Q1=class extends X1{constructor(){super(...arguments);P(this,"re")}async*_transform(e){let n="";for await(const r of e)if(typeof r=="string"?n+=r:n+=r.content,this.re){const i=[...n.matchAll(this.re)];if(i.length>1){let a=0;for(const s of i.slice(0,-1))yield[s[1]],a+=(s.index??0)+s[0].length;n=n.slice(a)}}else{const i=await this.parse(n);if(i.length>1){for(const a of i.slice(0,-1))yield[a];n=i[i.length-1]}}for(const r of await this.parse(n))yield[r]}},$Ie=class extends Q1{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers","list"]);P(this,"lc_serializable",!0)}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(n=>n.trim())}catch{throw new gc(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},MIe=class extends Q1{constructor({length:e,separator:n}){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers","list"]);P(this,"length");P(this,"separator");this.length=e,this.separator=n||","}async parse(e){try{const n=e.trim().split(this.separator).map(r=>r.trim());if(this.length!==void 0&&n.length!==this.length)throw new gc(`Incorrect number of items. Expected ${this.length}, got ${n.length}.`);return n}catch(n){throw Object.getPrototypeOf(n)===gc.prototype?n:new gc(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},LIe=class extends Q1{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers","list"]);P(this,"lc_serializable",!0);P(this,"re",/\d+\.\s([^\n]+)/g)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(n=>n[1])}},DIe=class extends Q1{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers","list"]);P(this,"lc_serializable",!0);P(this,"re",/^\s*[-*]\s([^\n]+)$/gm)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(e){return[...e.matchAll(this.re)??[]].map(n=>n[1])}},FIe=class extends X1{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers","string"]);P(this,"lc_serializable",!0)}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((n,r)=>n+this._messageContentToString(r),"")}},sne=class extends Z1{constructor(e){super(e);P(this,"lc_namespace",["langchain","output_parsers","structured"]);this.schema=e}static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Md(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Vp().describe(i)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Oa(this.schema))}
\`\`\`
`}async parse(e){var n,r;try{const i=e.trim(),s=(((n=i.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:n[1])||((r=i.match(/```json\s*([\s\S]*?)```/))==null?void 0:r[1])||i).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(o,l)=>`"${l.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await Y5(this.schema,JSON.parse(s))}catch(i){throw new gc(`Failed to parse. Text: "${e}". Error: ${i}`,e)}}},one=class extends sne{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(t){const e=(t==null?void 0:t.interpolationDepth)??1;if(e<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Oa(this.schema)).replaceAll("{","{".repeat(e)).replaceAll("}","}".repeat(e))}
\`\`\``}_schemaToInstruction(t,e=2){const n=t;if("type"in n){let r=!1,i;if(Array.isArray(n.type)){const o=n.type.findIndex(l=>l==="null");o!==-1&&(r=!0,n.type.splice(o,1)),i=n.type.join(" | ")}else i=n.type;if(n.type==="object"&&n.properties){const o=n.description?` // ${n.description}`:"";return`{
${Object.entries(n.properties).map(([c,u])=>{var d;const f=(d=n.required)!=null&&d.includes(c)?"":" (optional)";return`${" ".repeat(e)}"${c}": ${this._schemaToInstruction(u,e+2)}${f}`}).join(`
`)}
${" ".repeat(e-2)}}${o}`}if(n.type==="array"&&n.items){const o=n.description?` // ${n.description}`:"";return`array[
${" ".repeat(e)}${this._schemaToInstruction(n.items,e+2)}
${" ".repeat(e-2)}] ${o}`}const a=r?" (nullable)":"",s=n.description?` // ${n.description}`:"";return`${i}${s}${a}`}if("anyOf"in n)return n.anyOf.map(r=>this._schemaToInstruction(r,e)).join(`
${" ".repeat(e-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(t){return new this(t)}static fromNamesAndDescriptions(t){const e=Md(Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Vp().describe(r)])));return new this(e)}},BIe=class extends Z1{constructor({inputSchema:e}){super(...arguments);P(this,"structuredInputParser");this.structuredInputParser=new one(e)}async parse(e){let n;try{n=await this.structuredInputParser.parse(e)}catch(r){throw new gc(`Failed to parse. Text: "${e}". Error: ${r}`,e)}return this.outputProcessor(n)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}},lne={};At(lne,{applyPatch:()=>my,compare:()=>uk});var cne=class extends J1{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","output_parsers"]);P(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(e,n){return this.diff?super._concatOutputChunks(e,n):n}_diff(e,n){if(n)return e?uk(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return nR(e[0].text)}async parse(e){return nR(e,JSON.parse)}getFormatInstructions(){return""}_baseMessageToString(e){return e.text}};const UIe=function(){const t={};t.parser=function(F,$){return new n(F,$)},t.SAXParser=n,t.SAXStream=c,t.createStream=l,t.MAX_BUFFER_LENGTH=64*1024;const e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(F,$){if(!(this instanceof n))return new n(F,$);var ie=this;i(ie),ie.q=ie.c="",ie.bufferCheckPosition=t.MAX_BUFFER_LENGTH,ie.opt=$||{},ie.opt.lowercase=ie.opt.lowercase||ie.opt.lowercasetags,ie.looseCase=ie.opt.lowercase?"toLowerCase":"toUpperCase",ie.tags=[],ie.closed=ie.closedRoot=ie.sawRoot=!1,ie.tag=ie.error=null,ie.strict=!!F,ie.noscript=!!(F||ie.opt.noscript),ie.state=O.BEGIN,ie.strictEntities=ie.opt.strictEntities,ie.ENTITIES=ie.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),ie.attribList=[],ie.opt.xmlns&&(ie.ns=Object.create(p)),ie.trackPosition=ie.opt.position!==!1,ie.trackPosition&&(ie.position=ie.line=ie.column=0),M(ie,"onready")}Object.create||(Object.create=function(F){function $(){}$.prototype=F;var ie=new $;return ie}),Object.keys||(Object.keys=function(F){var $=[];for(var ie in F)F.hasOwnProperty(ie)&&$.push(ie);return $});function r(F){for(var $=Math.max(t.MAX_BUFFER_LENGTH,10),ie=0,q=0,fe=e.length;q<fe;q++){var me=F[e[q]].length;if(me>$)switch(e[q]){case"textNode":j(F);break;case"cdata":N(F,"oncdata",F.cdata),F.cdata="";break;case"script":N(F,"onscript",F.script),F.script="";break;default:B(F,"Max buffer length exceeded: "+e[q])}ie=Math.max(ie,me)}var de=t.MAX_BUFFER_LENGTH-ie;F.bufferCheckPosition=de+F.position}function i(F){for(var $=0,ie=e.length;$<ie;$++)F[e[$]]=""}function a(F){j(F),F.cdata!==""&&(N(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(N(F,"onscript",F.script),F.script="")}n.prototype={end:function(){V(this)},write:re,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s=ReadableStream;s||(s=function(){});var o=t.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function l(F,$){return new c(F,$)}function c(F,$){if(!(this instanceof c))return new c(F,$);s.apply(this),this._parser=new n(F,$),this.writable=!0,this.readable=!0;var ie=this;this._parser.onend=function(){ie.emit("end")},this._parser.onerror=function(q){ie.emit("error",q),ie._parser.error=null},this._decoder=null,o.forEach(function(q){Object.defineProperty(ie,"on"+q,{get:function(){return ie._parser["on"+q]},set:function(fe){if(!fe)return ie.removeAllListeners(q),ie._parser["on"+q]=fe,fe;ie.on(q,fe)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(F){return this._parser.write(F.toString()),this.emit("data",F),!0},c.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},c.prototype.on=function(F,$){var ie=this;return!ie._parser["on"+F]&&o.indexOf(F)!==-1&&(ie._parser["on"+F]=function(){var q=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);q.splice(0,0,F),ie.emit.apply(ie,q)}),s.prototype.on.call(ie,F,$)};var u="[CDATA[",f="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",p={xml:d,xmlns:h},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function w(F){return F===" "||F===`
`||F==="\r"||F==="	"}function _(F){return F==='"'||F==="'"}function x(F){return F===">"||w(F)}function E(F,$){return F.test($)}function T(F,$){return!E(F,$)}var O=0;t.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(F){var $=t.ENTITIES[F],ie=typeof $=="number"?String.fromCharCode($):$;t.ENTITIES[F]=ie});for(var R in t.STATE)t.STATE[t.STATE[R]]=R;O=t.STATE;function M(F,$,ie){F[$]&&F[$](ie)}function N(F,$,ie){F.textNode&&j(F),M(F,$,ie)}function j(F){F.textNode=U(F.opt,F.textNode),F.textNode&&M(F,"ontext",F.textNode),F.textNode=""}function U(F,$){return F.trim&&($=$.trim()),F.normalize&&($=$.replace(/\s+/g," ")),$}function B(F,$){return j(F),F.trackPosition&&($+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),$=new Error($),F.error=$,M(F,"onerror",$),F}function V(F){return F.sawRoot&&!F.closedRoot&&Y(F,"Unclosed root tag"),F.state!==O.BEGIN&&F.state!==O.BEGIN_WHITESPACE&&F.state!==O.TEXT&&B(F,"Unexpected end"),j(F),F.c="",F.closed=!0,M(F,"onend"),n.call(F,F.strict,F.opt),F}function Y(F,$){if(typeof F!="object"||!(F instanceof n))throw new Error("bad call to strictFail");F.strict&&B(F,$)}function X(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var $=F.tags[F.tags.length-1]||F,ie=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(ie.ns=$.ns),F.attribList.length=0,N(F,"onopentagstart",ie)}function z(F,$){var ie=F.indexOf(":"),q=ie<0?["",F]:F.split(":"),fe=q[0],me=q[1];return $&&F==="xmlns"&&(fe="xmlns",me=""),{prefix:fe,local:me}}function G(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var $=z(F.attribName,!0),ie=$.prefix,q=$.local;if(ie==="xmlns")if(q==="xml"&&F.attribValue!==d)Y(F,"xml: prefix must be bound to "+d+`
Actual: `+F.attribValue);else if(q==="xmlns"&&F.attribValue!==h)Y(F,"xmlns: prefix must be bound to "+h+`
Actual: `+F.attribValue);else{var fe=F.tag,me=F.tags[F.tags.length-1]||F;fe.ns===me.ns&&(fe.ns=Object.create(me.ns)),fe.ns[q]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,N(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function ae(F,$){if(F.opt.xmlns){var ie=F.tag,q=z(F.tagName);ie.prefix=q.prefix,ie.local=q.local,ie.uri=ie.ns[q.prefix]||"",ie.prefix&&!ie.uri&&(Y(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),ie.uri=q.prefix);var fe=F.tags[F.tags.length-1]||F;ie.ns&&fe.ns!==ie.ns&&Object.keys(ie.ns).forEach(function(Ze){N(F,"onopennamespace",{prefix:Ze,uri:ie.ns[Ze]})});for(var me=0,de=F.attribList.length;me<de;me++){var _e=F.attribList[me],Oe=_e[0],ee=_e[1],Ee=z(Oe,!0),Qe=Ee.prefix,tt=Ee.local,Pe=Qe===""?"":ie.ns[Qe]||"",xe={name:Oe,value:ee,prefix:Qe,local:tt,uri:Pe};Qe&&Qe!=="xmlns"&&!Pe&&(Y(F,"Unbound namespace prefix: "+JSON.stringify(Qe)),xe.uri=Qe),F.tag.attributes[Oe]=xe,N(F,"onattribute",xe)}F.attribList.length=0}F.tag.isSelfClosing=!!$,F.sawRoot=!0,F.tags.push(F.tag),N(F,"onopentag",F.tag),$||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=O.SCRIPT:F.state=O.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function ue(F){if(!F.tagName){Y(F,"Weird empty close tag."),F.textNode+="</>",F.state=O.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=O.SCRIPT;return}N(F,"onscript",F.script),F.script=""}var $=F.tags.length,ie=F.tagName;F.strict||(ie=ie[F.looseCase]());for(var q=ie;$--;){var fe=F.tags[$];if(fe.name!==q)Y(F,"Unexpected close tag");else break}if($<0){Y(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=O.TEXT;return}F.tagName=ie;for(var me=F.tags.length;me-- >$;){var de=F.tag=F.tags.pop();F.tagName=F.tag.name,N(F,"onclosetag",F.tagName);var _e={};for(var Oe in de.ns)_e[Oe]=de.ns[Oe];var ee=F.tags[F.tags.length-1]||F;F.opt.xmlns&&de.ns!==ee.ns&&Object.keys(de.ns).forEach(function(Ee){var Qe=de.ns[Ee];N(F,"onclosenamespace",{prefix:Ee,uri:Qe})})}$===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=O.TEXT}function L(F){var $=F.entity,ie=$.toLowerCase(),q,fe="";return F.ENTITIES[$]?F.ENTITIES[$]:F.ENTITIES[ie]?F.ENTITIES[ie]:($=ie,$.charAt(0)==="#"&&($.charAt(1)==="x"?($=$.slice(2),q=parseInt($,16),fe=q.toString(16)):($=$.slice(1),q=parseInt($,10),fe=q.toString(10))),$=$.replace(/^0+/,""),isNaN(q)||fe.toLowerCase()!==$?(Y(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(q))}function K(F,$){$==="<"?(F.state=O.OPEN_WAKA,F.startTagPosition=F.position):w($)||(Y(F,"Non-whitespace before first tag."),F.textNode=$,F.state=O.TEXT)}function Q(F,$){var ie="";return $<F.length&&(ie=F.charAt($)),ie}function re(F){var $=this;if(this.error)throw this.error;if($.closed)return B($,"Cannot write after close. Assign an onready handler.");if(F===null)return V($);typeof F=="object"&&(F=F.toString());for(var ie=0,q="";q=Q(F,ie++),$.c=q,!!q;)switch($.trackPosition&&($.position++,q===`
`?($.line++,$.column=0):$.column++),$.state){case O.BEGIN:if($.state=O.BEGIN_WHITESPACE,q==="\uFEFF")continue;K($,q);continue;case O.BEGIN_WHITESPACE:K($,q);continue;case O.TEXT:if($.sawRoot&&!$.closedRoot){for(var fe=ie-1;q&&q!=="<"&&q!=="&";)q=Q(F,ie++),q&&$.trackPosition&&($.position++,q===`
`?($.line++,$.column=0):$.column++);$.textNode+=F.substring(fe,ie-1)}q==="<"&&!($.sawRoot&&$.closedRoot&&!$.strict)?($.state=O.OPEN_WAKA,$.startTagPosition=$.position):(!w(q)&&(!$.sawRoot||$.closedRoot)&&Y($,"Text data outside of root node."),q==="&"?$.state=O.TEXT_ENTITY:$.textNode+=q);continue;case O.SCRIPT:q==="<"?$.state=O.SCRIPT_ENDING:$.script+=q;continue;case O.SCRIPT_ENDING:q==="/"?$.state=O.CLOSE_TAG:($.script+="<"+q,$.state=O.SCRIPT);continue;case O.OPEN_WAKA:if(q==="!")$.state=O.SGML_DECL,$.sgmlDecl="";else if(!w(q))if(E(m,q))$.state=O.OPEN_TAG,$.tagName=q;else if(q==="/")$.state=O.CLOSE_TAG,$.tagName="";else if(q==="?")$.state=O.PROC_INST,$.procInstName=$.procInstBody="";else{if(Y($,"Unencoded <"),$.startTagPosition+1<$.position){var me=$.position-$.startTagPosition;q=new Array(me).join(" ")+q}$.textNode+="<"+q,$.state=O.TEXT}continue;case O.SGML_DECL:($.sgmlDecl+q).toUpperCase()===u?(N($,"onopencdata"),$.state=O.CDATA,$.sgmlDecl="",$.cdata=""):$.sgmlDecl+q==="--"?($.state=O.COMMENT,$.comment="",$.sgmlDecl=""):($.sgmlDecl+q).toUpperCase()===f?($.state=O.DOCTYPE,($.doctype||$.sawRoot)&&Y($,"Inappropriately located doctype declaration"),$.doctype="",$.sgmlDecl=""):q===">"?(N($,"onsgmldeclaration",$.sgmlDecl),$.sgmlDecl="",$.state=O.TEXT):(_(q)&&($.state=O.SGML_DECL_QUOTED),$.sgmlDecl+=q);continue;case O.SGML_DECL_QUOTED:q===$.q&&($.state=O.SGML_DECL,$.q=""),$.sgmlDecl+=q;continue;case O.DOCTYPE:q===">"?($.state=O.TEXT,N($,"ondoctype",$.doctype),$.doctype=!0):($.doctype+=q,q==="["?$.state=O.DOCTYPE_DTD:_(q)&&($.state=O.DOCTYPE_QUOTED,$.q=q));continue;case O.DOCTYPE_QUOTED:$.doctype+=q,q===$.q&&($.q="",$.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:$.doctype+=q,q==="]"?$.state=O.DOCTYPE:_(q)&&($.state=O.DOCTYPE_DTD_QUOTED,$.q=q);continue;case O.DOCTYPE_DTD_QUOTED:$.doctype+=q,q===$.q&&($.state=O.DOCTYPE_DTD,$.q="");continue;case O.COMMENT:q==="-"?$.state=O.COMMENT_ENDING:$.comment+=q;continue;case O.COMMENT_ENDING:q==="-"?($.state=O.COMMENT_ENDED,$.comment=U($.opt,$.comment),$.comment&&N($,"oncomment",$.comment),$.comment=""):($.comment+="-"+q,$.state=O.COMMENT);continue;case O.COMMENT_ENDED:q!==">"?(Y($,"Malformed comment"),$.comment+="--"+q,$.state=O.COMMENT):$.state=O.TEXT;continue;case O.CDATA:q==="]"?$.state=O.CDATA_ENDING:$.cdata+=q;continue;case O.CDATA_ENDING:q==="]"?$.state=O.CDATA_ENDING_2:($.cdata+="]"+q,$.state=O.CDATA);continue;case O.CDATA_ENDING_2:q===">"?($.cdata&&N($,"oncdata",$.cdata),N($,"onclosecdata"),$.cdata="",$.state=O.TEXT):q==="]"?$.cdata+="]":($.cdata+="]]"+q,$.state=O.CDATA);continue;case O.PROC_INST:q==="?"?$.state=O.PROC_INST_ENDING:w(q)?$.state=O.PROC_INST_BODY:$.procInstName+=q;continue;case O.PROC_INST_BODY:if(!$.procInstBody&&w(q))continue;q==="?"?$.state=O.PROC_INST_ENDING:$.procInstBody+=q;continue;case O.PROC_INST_ENDING:q===">"?(N($,"onprocessinginstruction",{name:$.procInstName,body:$.procInstBody}),$.procInstName=$.procInstBody="",$.state=O.TEXT):($.procInstBody+="?"+q,$.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:E(y,q)?$.tagName+=q:(X($),q===">"?ae($):q==="/"?$.state=O.OPEN_TAG_SLASH:(w(q)||Y($,"Invalid character in tag name"),$.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:q===">"?(ae($,!0),ue($)):(Y($,"Forward-slash in opening tag not followed by >"),$.state=O.ATTRIB);continue;case O.ATTRIB:if(w(q))continue;q===">"?ae($):q==="/"?$.state=O.OPEN_TAG_SLASH:E(m,q)?($.attribName=q,$.attribValue="",$.state=O.ATTRIB_NAME):Y($,"Invalid attribute name");continue;case O.ATTRIB_NAME:q==="="?$.state=O.ATTRIB_VALUE:q===">"?(Y($,"Attribute without value"),$.attribValue=$.attribName,G($),ae($)):w(q)?$.state=O.ATTRIB_NAME_SAW_WHITE:E(y,q)?$.attribName+=q:Y($,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if(q==="=")$.state=O.ATTRIB_VALUE;else{if(w(q))continue;Y($,"Attribute without value"),$.tag.attributes[$.attribName]="",$.attribValue="",N($,"onattribute",{name:$.attribName,value:""}),$.attribName="",q===">"?ae($):E(m,q)?($.attribName=q,$.state=O.ATTRIB_NAME):(Y($,"Invalid attribute name"),$.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(w(q))continue;_(q)?($.q=q,$.state=O.ATTRIB_VALUE_QUOTED):(Y($,"Unquoted attribute value"),$.state=O.ATTRIB_VALUE_UNQUOTED,$.attribValue=q);continue;case O.ATTRIB_VALUE_QUOTED:if(q!==$.q){q==="&"?$.state=O.ATTRIB_VALUE_ENTITY_Q:$.attribValue+=q;continue}G($),$.q="",$.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:w(q)?$.state=O.ATTRIB:q===">"?ae($):q==="/"?$.state=O.OPEN_TAG_SLASH:E(m,q)?(Y($,"No whitespace between attributes"),$.attribName=q,$.attribValue="",$.state=O.ATTRIB_NAME):Y($,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(!x(q)){q==="&"?$.state=O.ATTRIB_VALUE_ENTITY_U:$.attribValue+=q;continue}G($),q===">"?ae($):$.state=O.ATTRIB;continue;case O.CLOSE_TAG:if($.tagName)q===">"?ue($):E(y,q)?$.tagName+=q:$.script?($.script+="</"+$.tagName,$.tagName="",$.state=O.SCRIPT):(w(q)||Y($,"Invalid tagname in closing tag"),$.state=O.CLOSE_TAG_SAW_WHITE);else{if(w(q))continue;T(m,q)?$.script?($.script+="</"+q,$.state=O.SCRIPT):Y($,"Invalid tagname in closing tag."):$.tagName=q}continue;case O.CLOSE_TAG_SAW_WHITE:if(w(q))continue;q===">"?ue($):Y($,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var de,_e;switch($.state){case O.TEXT_ENTITY:de=O.TEXT,_e="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:de=O.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:de=O.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(q===";")if($.opt.unparsedEntities){var Oe=L($);$.entity="",$.state=de,$.write(Oe)}else $[_e]+=L($),$.entity="",$.state=de;else E($.entity.length?v:g,q)?$.entity+=q:(Y($,"Invalid character in entity name"),$[_e]+="&"+$.entity+q,$.entity="",$.state=de);continue;default:throw new Error($,"Unknown state: "+$.state)}return $.position>=$.bufferCheckPosition&&r($),$}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||function(){var F=String.fromCharCode,$=Math.floor,ie=function(){var q=16384,fe=[],me,de,_e=-1,Oe=arguments.length;if(!Oe)return"";for(var ee="";++_e<Oe;){var Ee=Number(arguments[_e]);if(!isFinite(Ee)||Ee<0||Ee>1114111||$(Ee)!==Ee)throw RangeError("Invalid code point: "+Ee);Ee<=65535?fe.push(Ee):(Ee-=65536,me=(Ee>>10)+55296,de=Ee%1024+56320,fe.push(me,de)),(_e+1===Oe||fe.length>q)&&(ee+=F.apply(null,fe),fe.length=0)}return ee};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ie,configurable:!0,writable:!0}):String.fromCodePoint=ie}(),t},zIe=UIe(),SR=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var VIe=class extends J1{constructor(e){super(e);P(this,"tags");P(this,"lc_namespace",["langchain_core","output_parsers"]);P(this,"lc_serializable",!0);this.tags=e==null?void 0:e.tags}static lc_name(){return"XMLOutputParser"}_diff(e,n){if(n)return e?uk(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return ER(e[0].text)}async parse(e){return ER(e)}getFormatInstructions(){var n;return!!(this.tags&&this.tags.length>0)?SR.replace("{tags}",((n=this.tags)==null?void 0:n.join(", "))??""):SR}};const WIe=t=>t.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),une=t=>{if(Object.keys(t).length===0)return{};const e={};return t.children.length>0?(e[t.name]=t.children.map(une),e):(e[t.name]=t.text??void 0,e)};function ER(t){const e=WIe(t),n=zIe.parser(!0);let r={};const i=[];n.onopentag=o=>{const l={name:o.name,attributes:o.attributes,children:[],text:"",isSelfClosing:o.isSelfClosing};i.length>0?i[i.length-1].children.push(l):r=l,o.isSelfClosing||i.push(l)},n.onclosetag=()=>{if(i.length>0){const o=i.pop();i.length===0&&o&&(r=o)}},n.ontext=o=>{if(i.length>0){const l=i[i.length-1];l.text+=o}},n.onattribute=o=>{if(i.length>0){const l=i[i.length-1];l.attributes[o.name]=o.value}};const a=/```(xml)?(.*)```/s.exec(e),s=a?a[2]:e;return n.write(s).close(),r&&r.name==="?xml"&&(r=r.children[0]),une(r)}var fne={};At(fne,{AsymmetricStructuredOutputParser:()=>BIe,BaseCumulativeTransformOutputParser:()=>J1,BaseLLMOutputParser:()=>Y1,BaseOutputParser:()=>Z1,BaseTransformOutputParser:()=>X1,BytesOutputParser:()=>jIe,CommaSeparatedListOutputParser:()=>$Ie,CustomListOutputParser:()=>MIe,JsonMarkdownStructuredOutputParser:()=>one,JsonOutputParser:()=>cne,ListOutputParser:()=>Q1,MarkdownListOutputParser:()=>DIe,NumberedListOutputParser:()=>LIe,OutputParserException:()=>gc,StringOutputParser:()=>FIe,StructuredOutputParser:()=>sne,XMLOutputParser:()=>VIe,XML_FORMAT_INSTRUCTIONS:()=>SR,parseJsonMarkdown:()=>nR,parsePartialJson:()=>dy,parseXMLMarkdown:()=>ER});var wU=class extends Y1{constructor(e){super(e);P(this,"lc_namespace",["langchain","google_genai","output_parsers"]);P(this,"returnId",!1);P(this,"keyName");P(this,"returnSingle",!1);P(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await J$(this.zodSchema,e);if(n.success)return n.data;throw new gc(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.issues)}`,JSON.stringify(e,null,2))}async parseResult(e){const n=e.flatMap(a=>{const{message:s}=a;return!("tool_calls"in s)||!Array.isArray(s.tool_calls)?[]:s.tool_calls});if(n[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[r]=n;return await this._validateResult(r.args)}},bU;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(bU||(bU={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _U;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(_U||(_U={}));var xU;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(xU||(xU={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=["user","model","function","system"];var EU;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(EU||(EU={}));var AU;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(AU||(AU={}));var kU;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(kU||(kU={}));var OU;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(OU||(OU={}));var ww;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(ww||(ww={}));var TU;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(TU||(TU={}));var ug;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(ug||(ug={}));var CU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(CU||(CU={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Sm extends ha{constructor(e,n){super(e),this.response=n}}class dne extends ha{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}}class cd extends ha{}class hne extends ha{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HIe="https://generativelanguage.googleapis.com",qIe="v1beta",GIe="0.24.1",KIe="genai-js";var Ap;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ap||(Ap={}));class YIe{constructor(e,n,r,i,a){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=a}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||qIe;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||HIe}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function ZIe(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${KIe}/${GIe}`),e.join(" ")}async function XIe(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",ZIe(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new cd(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,a]of r.entries()){if(i==="x-goog-api-key")throw new cd(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new cd(`Header name ${i} can only be set using the apiClient field`);n.append(i,a)}}return n}async function JIe(t,e,n,r,i,a){const s=new YIe(t,e,n,r,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},nRe(a)),{method:"POST",headers:await XIe(s),body:i})}}async function e_(t,e,n,r,i,a={},s=fetch){const{url:o,fetchOptions:l}=await JIe(t,e,n,r,i,a);return QIe(o,l,s)}async function QIe(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){eRe(i,t)}return r.ok||await tRe(r,t),r}function eRe(t,e){let n=t;throw n.name==="AbortError"?(n=new hne(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof dne||t instanceof cd||(n=new ha(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function tRe(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new dne(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function nRe(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),eS(t.candidates[0]))throw new Sm(`${$f(t)}`,t);return rRe(t)}else if(t.promptFeedback)throw new Sm(`Text not available. ${$f(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eS(t.candidates[0]))throw new Sm(`${$f(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),PU(t)[0]}else if(t.promptFeedback)throw new Sm(`Function call not available. ${$f(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),eS(t.candidates[0]))throw new Sm(`${$f(t)}`,t);return PU(t)}else if(t.promptFeedback)throw new Sm(`Function call not available. ${$f(t)}`,t)},t}function rRe(t){var e,n,r,i;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function PU(t){var e,n,r,i;const a=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const s of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}const iRe=[ww.RECITATION,ww.SAFETY,ww.LANGUAGE];function eS(t){return!!t.finishReason&&iRe.includes(t.finishReason)}function $f(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];eS(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function Sb(t){return this instanceof Sb?(this.v=t,this):new Sb(t)}function aRe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){a.push([d,h,p,m])>1||o(d,h)})})}function o(d,h){try{l(r[d](h))}catch(p){f(a[0][3],p)}}function l(d){d.value instanceof Sb?Promise.resolve(d.value.v).then(c,u):f(a[0][2],d)}function c(d){o("next",d)}function u(d){o("throw",d)}function f(d,h){d(h),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function sRe(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=cRe(e),[r,i]=n.tee();return{stream:lRe(r),response:oRe(i)}}async function oRe(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return zM(uRe(e));e.push(i)}}function lRe(t){return aRe(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield Sb(n.read());if(i)break;yield yield Sb(zM(r))}})}function cRe(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return a();function a(){return e.read().then(({value:s,done:o})=>{if(o){if(i.trim()){r.error(new ha("Failed to parse stream"));return}r.close();return}i+=s;let l=i.match(NU),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new ha(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(NU)}return a()}).catch(s=>{let o=s;throw o.stack=s.stack,o.name==="AbortError"?o=new hne("Request aborted when reading from the stream"):o=new ha("Error reading from the stream"),o})}}})}function uRe(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let i=0;for(const a of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=a.citationMetadata,n.candidates[i].groundingMetadata=a.groundingMetadata,n.candidates[i].finishReason=a.finishReason,n.candidates[i].finishMessage=a.finishMessage,n.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[i].content||(n.candidates[i].content={role:a.content.role||"user",parts:[]});const s={};for(const o of a.content.parts)o.text&&(s.text=o.text),o.functionCall&&(s.functionCall=o.functionCall),o.executableCode&&(s.executableCode=o.executableCode),o.codeExecutionResult&&(s.codeExecutionResult=o.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),n.candidates[i].content.parts.push(s)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pne(t,e,n,r){const i=await e_(e,Ap.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return sRe(i)}async function mne(t,e,n,r){const a=await(await e_(e,Ap.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:zM(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gne(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Eb(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return fRe(e)}function fRe(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const a of t)"functionResponse"in a?(n.parts.push(a),i=!0):(e.parts.push(a),r=!0);if(r&&i)throw new ha("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new ha("No content is provided for sending chat message.");return r?e:n}function dRe(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new cd("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const a=Eb(t);r.contents=[a]}return{generateContentRequest:r}}function IU(t){let e;return t.contents?e=t:e={contents:[Eb(t)]},t.systemInstruction&&(e.systemInstruction=gne(t.systemInstruction)),e}function hRe(t){return typeof t=="string"||Array.isArray(t)?{content:Eb(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],pRe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function mRe(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new ha(`First content should be with role 'user', got ${r}`);if(!SU.includes(r))throw new ha(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(SU)}`);if(!Array.isArray(i))throw new ha("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new ha("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of i)for(const l of RU)l in o&&(a[l]+=1);const s=pRe[r];for(const o of RU)if(!s.includes(o)&&a[o]>0)throw new ha(`Content with role '${r}' can't contain '${o}' part`);e=!0}}function jU(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="SILENT_ERROR";class gRe{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(mRe(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,a,s,o,l;await this._sendPromise;const c=Eb(e),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),n);let d;return this._sendPromise=this._sendPromise.then(()=>mne(this._apiKey,this.model,u,f)).then(h=>{var p;if(jU(h.response)){this._history.push(c);const m=Object.assign({parts:[],role:"model"},(p=h.response.candidates)===null||p===void 0?void 0:p[0].content);this._history.push(m)}else{const m=$f(h.response);m&&console.warn(`sendMessage() was unsuccessful. ${m}. Inspect response object for details.`)}d=h}).catch(h=>{throw this._sendPromise=Promise.resolve(),h}),await this._sendPromise,d}async sendMessageStream(e,n={}){var r,i,a,s,o,l;await this._sendPromise;const c=Eb(e),u={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),n),d=pne(this._apiKey,this.model,u,f);return this._sendPromise=this._sendPromise.then(()=>d).catch(h=>{throw new Error($U)}).then(h=>h.response).then(h=>{if(jU(h)){this._history.push(c);const p=Object.assign({},h.candidates[0].content);p.role||(p.role="model"),this._history.push(p)}else{const p=$f(h);p&&console.warn(`sendMessageStream() was unsuccessful. ${p}. Inspect response object for details.`)}}).catch(h=>{h.message!==$U&&console.error(h)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yRe(t,e,n,r){return(await e_(e,Ap.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vRe(t,e,n,r){return(await e_(e,Ap.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function wRe(t,e,n,r){const i=n.requests.map(s=>Object.assign(Object.assign({},s),{model:e}));return(await e_(e,Ap.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=gne(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=IU(e),a=Object.assign(Object.assign({},this._requestOptions),n);return mne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}async generateContentStream(e,n={}){var r;const i=IU(e),a=Object.assign(Object.assign({},this._requestOptions),n);return pne(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),a)}startChat(e){var n;return new gRe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=dRe(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return yRe(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=hRe(e),i=Object.assign(Object.assign({},this._requestOptions),n);return vRe(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return wRe(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new ha("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new MU(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new cd("Cached content must contain a `name` field.");if(!e.model)throw new cd("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const s of i)if(n!=null&&n[s]&&e[s]&&(n==null?void 0:n[s])!==e[s]){if(s==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new cd(`Different value for "${s}" specified in modelParams (${n[s]}) and cachedContent (${e[s]})`)}const a=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new MU(this.apiKey,a,r)}}function DU(t,e){const n=bRe(t),r=xRe(n,e);return{tools:n,toolConfig:r}}function bRe(t){let e=[];const n=[];return t.forEach(i=>{if(K1(i)){const[a]=PIe([i]);a.functionDeclarations&&e.push(...a.functionDeclarations)}else if(DM(i)){const{functionDeclarations:a}=_Re(i);if(a)e.push(...a);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else n.push(i)}),n.find(i=>"functionDeclarations"in i)?n.map(i=>{if((e==null?void 0:e.length)>0&&"functionDeclarations"in i){const a={functionDeclarations:[...i.functionDeclarations||[],...e]};return e=[],a}return i}):[...n,...e.length>0?[{functionDeclarations:e}]:[]]}function _Re(t){return{functionDeclarations:[{name:t.function.name,description:t.function.description,parameters:bp(t.function.parameters)}]}}function xRe(t,e){if(!t.length||!e)return;const{toolChoice:n,allowedFunctionNames:r}=e,i={any:ug.ANY,auto:ug.AUTO,none:ug.NONE};if(n&&["any","auto","none"].includes(n))return{functionCallingConfig:{mode:i[n]??"MODE_UNSPECIFIED",allowedFunctionNames:r}};if(typeof n=="string"||r)return{functionCallingConfig:{mode:ug.ANY,allowedFunctionNames:[...r??[],...n&&typeof n=="string"?[n]:[]]}}}const SRe={"gemini-embedding-001":{maxInputTokens:2048,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-image":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-preview-05-20":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-flash-lite-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-flash-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-05-06":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.0-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash-preview-native-audio":{maxInputTokens:131072,imageInputs:!1,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.0-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-06-05":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite-preview-06-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-image-preview":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-04-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-pro-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-pro":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-flash":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-1.5-flash-8b":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-pro":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1}};var ERe=SRe;const ARe=t=>t();function DC(t){const e=t.constructor;return new e({...t,content:t.contentBlocks,response_metadata:{...t.response_metadata,output_version:"v1"}})}var yne={};At(yne,{BaseChatModel:()=>dv,SimpleChatModel:()=>kRe});function FC(t){const e=[];for(const n of t){let r=n;if(Array.isArray(n.content))for(let i=0;i<n.content.length;i++){const a=n.content[i];(rM(a)||iM(a))&&r===n&&(r=new n.constructor({...r,content:[...n.content.slice(0,i),VQ(a),...n.content.slice(i+1)]}))}e.push(r)}return e}var dv=class Eh extends BM{constructor(n){super(n);P(this,"lc_namespace",["langchain","chat_models",this._llmType()]);P(this,"disableStreaming",!1);P(this,"outputVersion");this.outputVersion=ARe(()=>{const r=n.outputVersion??mc("LC_OUTPUT_VERSION");return r&&["v0","v1"].includes(r)?r:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(n){const[r,i]=super._separateRunnableConfigFromCallOptions(n);return i.signal=r.signal,[r,i]}async invoke(n,r){const i=Eh._convertInputToPromptValue(n);return(await this.generatePrompt([i],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(n,r,i){throw new Error("Not implemented.")}async*_streamIterator(n,r){var i,a,s;if(this._streamResponseChunks===Eh.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(n,r);else{const l=Eh._convertInputToPromptValue(n).toChatMessages(),[c,u]=this._separateRunnableConfigFromCallOptionsCompat(r),f={...c.metadata,...this.getLsParams(u)},d=await ja.configure(c.callbacks,this.callbacks,c.tags,this.tags,f,this.metadata,{verbose:this.verbose}),h={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:1},p=u.outputVersion??this.outputVersion,m=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),[FC(l)],c.runId,void 0,h,void 0,void 0,c.runName));let y,g;try{for await(const v of this._streamResponseChunks(l,u,m==null?void 0:m[0])){if((i=u.signal)==null||i.throwIfAborted(),v.message.id==null){const w=(a=m==null?void 0:m.at(0))==null?void 0:a.runId;w!=null&&v.message._updateId(`run-${w}`)}v.message.response_metadata={...v.generationInfo,...v.message.response_metadata},p==="v1"?yield DC(v.message):yield v.message,y?y=y.concat(v):y=v,rR(v.message)&&v.message.usage_metadata!==void 0&&(g={tokenUsage:{promptTokens:v.message.usage_metadata.input_tokens,completionTokens:v.message.usage_metadata.output_tokens,totalTokens:v.message.usage_metadata.total_tokens}})}(s=u.signal)==null||s.throwIfAborted()}catch(v){throw await Promise.all((m??[]).map(w=>w==null?void 0:w.handleLLMError(v))),v}await Promise.all((m??[]).map(v=>v==null?void 0:v.handleLLMEnd({generations:[[y]],llmOutput:g})))}}getLsParams(n){const r=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:n.stop,ls_provider:r}}async _generateUncached(n,r,i,a){var h,p,m,y;const s=n.map(g=>g.map(pc));let o;if(a!==void 0&&a.length===s.length)o=a;else{const g={...i.metadata,...this.getLsParams(r)},v=await ja.configure(i.callbacks,this.callbacks,i.tags,this.tags,g,this.metadata,{verbose:this.verbose}),w={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:1};o=await(v==null?void 0:v.handleChatModelStart(this.toJSON(),s.map(FC),i.runId,void 0,w,void 0,void 0,i.runName))}const l=r.outputVersion??this.outputVersion,c=[],u=[];if(!!(o!=null&&o[0].handlers.find(mM))&&!this.disableStreaming&&s.length===1&&this._streamResponseChunks!==Eh.prototype._streamResponseChunks)try{const g=await this._streamResponseChunks(s[0],r,o==null?void 0:o[0]);let v,w;for await(const _ of g){if((h=r.signal)!=null&&h.aborted){const x=v==null?void 0:v.message;throw new tR("Model invocation was aborted.",x)}if(_.message.id==null){const x=(p=o==null?void 0:o.at(0))==null?void 0:p.runId;x!=null&&_.message._updateId(`run-${x}`)}v===void 0?v=_:v=Ad(v,_),rR(_.message)&&_.message.usage_metadata!==void 0&&(w={tokenUsage:{promptTokens:_.message.usage_metadata.input_tokens,completionTokens:_.message.usage_metadata.output_tokens,totalTokens:_.message.usage_metadata.total_tokens}})}if((m=r.signal)!=null&&m.aborted){const _=v==null?void 0:v.message;throw new tR("Model invocation was aborted.",_)}if(v===void 0)throw new Error("Received empty response from chat model call.");c.push([v]),await(o==null?void 0:o[0].handleLLMEnd({generations:c,llmOutput:w}))}catch(g){throw await(o==null?void 0:o[0].handleLLMError(g)),g}else{const g=await Promise.allSettled(s.map(async(v,w)=>{const _=await this._generate(v,{...r,promptIndex:w},o==null?void 0:o[w]);if(l==="v1")for(const x of _.generations)x.message=DC(x.message);return _}));await Promise.all(g.map(async(v,w)=>{var _,x,E;if(v.status==="fulfilled"){const T=v.value;for(const O of T.generations){if(O.message.id==null){const R=(_=o==null?void 0:o.at(0))==null?void 0:_.runId;R!=null&&O.message._updateId(`run-${R}`)}O.message.response_metadata={...O.generationInfo,...O.message.response_metadata}}return T.generations.length===1&&(T.generations[0].message.response_metadata={...T.llmOutput,...T.generations[0].message.response_metadata}),c[w]=T.generations,u[w]=T.llmOutput,(x=o==null?void 0:o[w])==null?void 0:x.handleLLMEnd({generations:[T.generations],llmOutput:T.llmOutput})}else return await((E=o==null?void 0:o[w])==null?void 0:E.handleLLMError(v.reason)),Promise.reject(v.reason)}))}const d={generations:c,llmOutput:u.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...u):void 0};return Object.defineProperty(d,_b,{value:o?{runIds:o==null?void 0:o.map(g=>g.runId)}:void 0,configurable:!0}),d}async _generateCached({messages:n,cache:r,llmStringKey:i,parsedOptions:a,handledOptions:s}){const o=n.map(v=>v.map(pc)),l={...s.metadata,...this.getLsParams(a)},c=await ja.configure(s.callbacks,this.callbacks,s.tags,this.tags,l,this.metadata,{verbose:this.verbose}),u={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},f=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),o.map(FC),s.runId,void 0,u,void 0,void 0,s.runName)),d=[],p=(await Promise.allSettled(o.map(async(v,w)=>{const _=Eh._convertInputToPromptValue(v).toString(),x=await r.lookup(_,i);return x==null&&d.push(w),x}))).map((v,w)=>({result:v,runManager:f==null?void 0:f[w]})).filter(({result:v})=>v.status==="fulfilled"&&v.value!=null||v.status==="rejected"),m=a.outputVersion??this.outputVersion,y=[];await Promise.all(p.map(async({result:v,runManager:w},_)=>{if(v.status==="fulfilled"){const x=v.value;return y[_]=x.map(E=>("message"in E&&Jr(E.message)&&_p(E.message)&&(E.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},m==="v1"&&(E.message=DC(E.message))),E.generationInfo={...E.generationInfo,tokenUsage:{}},E)),x.length&&await(w==null?void 0:w.handleLLMNewToken(x[0].text)),w==null?void 0:w.handleLLMEnd({generations:[x]},void 0,void 0,void 0,{cached:!0})}else return await(w==null?void 0:w.handleLLMError(v.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(v.reason)}));const g={generations:y,missingPromptIndices:d,startedRunManagers:f};return Object.defineProperty(g,_b,{value:f?{runIds:f==null?void 0:f.map(v=>v.runId)}:void 0,configurable:!0}),g}async generate(n,r,i){let a;Array.isArray(r)?a={stop:r}:a=r;const s=n.map(m=>m.map(pc)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(a);if(o.callbacks=o.callbacks??i,!this.cache)return this._generateUncached(s,l,o);const{cache:c}=this,u=this._getSerializedCacheKeyParametersForCall(l),{generations:f,missingPromptIndices:d,startedRunManagers:h}=await this._generateCached({messages:s,cache:c,llmStringKey:u,parsedOptions:l,handledOptions:o});let p={};if(d.length>0){const m=await this._generateUncached(d.map(y=>s[y]),l,o,h!==void 0?d.map(y=>h==null?void 0:h[y]):void 0);await Promise.all(m.generations.map(async(y,g)=>{const v=d[g];f[v]=y;const w=Eh._convertInputToPromptValue(s[v]).toString();return c.update(w,u,y)})),p=m.llmOutput??{}}return{generations:f,llmOutput:p}}invocationParams(n){return{}}_modelType(){return"base_chat_model"}async generatePrompt(n,r,i){const a=n.map(s=>s.toChatMessages());return this.generate(a,r,i)}withStructuredOutput(n,r){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(r!=null&&r.strict)throw new Error('"strict" mode is not supported for this model by default.');const i=n,a=r==null?void 0:r.name,s=fb(i)??"A function available to call.",o=r==null?void 0:r.method,l=r==null?void 0:r.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=a??"extract",u;$d(i)?u=[{type:"function",function:{name:c,description:s,parameters:Oa(i)}}]:("name"in i&&(c=i.name),u=[{type:"function",function:{name:c,description:s,parameters:i}}]);const f=this.bindTools(u),d=Zu.from(y=>{if(!Oo.isInstance(y))throw new Error("Input is not an AIMessageChunk.");if(!y.tool_calls||y.tool_calls.length===0)throw new Error("No tool calls found in the response.");const g=y.tool_calls.find(v=>v.name===c);if(!g)throw new Error(`No tool call found with name ${c}.`);return g.args});if(!l)return f.pipe(d).withConfig({runName:"StructuredOutput"});const h=Ep.assign({parsed:(y,g)=>d.invoke(y.raw,g)}),p=Ep.assign({parsed:()=>null}),m=h.withFallbacks({fallbacks:[p]});return Mu.from([{raw:f},m]).withConfig({runName:"StructuredOutputRunnable"})}},kRe=class extends dv{async _generate(t,e,n){const r=await this._call(t,e,n),i=new Ei(r);if(typeof i.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}}},ORe=class extends dv{constructor(e){super(e);P(this,"lc_serializable",!0);P(this,"lc_namespace",["langchain","chat_models","google_genai"]);P(this,"model");P(this,"temperature");P(this,"maxOutputTokens");P(this,"topP");P(this,"topK");P(this,"stopSequences",[]);P(this,"safetySettings");P(this,"apiKey");P(this,"streaming",!1);P(this,"json");P(this,"streamUsage",!0);P(this,"convertSystemMessageToHumanContent");P(this,"thinkingConfig");P(this,"client");if(this.model=e.model.replace(/^models\//,""),this.maxOutputTokens=e.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=e.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=e.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=e.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=e.stopSequences??this.stopSequences,this.apiKey=e.apiKey??mc("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=e.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(r=>r.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=e.streaming??this.streaming,this.json=e.json,this.thinkingConfig=e.thinkingConfig??this.thinkingConfig,this.client=new LU(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...this.json?{responseMimeType:"application/json"}:{},...this.thinkingConfig?{thinkingConfig:this.thinkingConfig}:{}}},{apiVersion:e.apiVersion,baseUrl:e.baseUrl,customHeaders:e.customHeaders}),this.streamUsage=e.streamUsage??this.streamUsage}static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")||this.model.startsWith("gemma-3-")&&!this.model.startsWith("gemma-3-1b")||this.model.startsWith("gemini-3")}useCachedContent(e,n,r){this.apiKey&&(this.client=new LU(this.apiKey).getGenerativeModelFromCachedContent(e,n,r))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.model==="gemini-1.0-pro-001"||this.model.startsWith("gemini-pro-vision")||this.model.startsWith("gemini-1.0-pro-vision")?!1:this.model!=="gemini-pro"}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,n){var r;return this.withConfig({tools:(r=DU(e))==null?void 0:r.tools,...n})}invocationParams(e){var r;const n=(r=e==null?void 0:e.tools)!=null&&r.length?DU(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return e!=null&&e.responseSchema?(this.client.generationConfig.responseSchema=e.responseSchema,this.client.generationConfig.responseMimeType="application/json"):(this.client.generationConfig.responseSchema=void 0,this.client.generationConfig.responseMimeType=this.json?"application/json":void 0),{...n!=null&&n.tools?{tools:n.tools}:{},...n!=null&&n.toolConfig?{toolConfig:n.toolConfig}:{}}}async _generate(e,n,r){var u,f,d,h;(u=n.signal)==null||u.throwIfAborted();const i=yU(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let a=i;if(i[0].role==="system"){const[p]=i;this.client.systemInstruction=p,a=i.slice(1)}const s=this.invocationParams(n);if(this.streaming){const p={},m=this._streamResponseChunks(e,n,r),y=[];for await(const v of m){const w=((f=v.generationInfo)==null?void 0:f.completion)??0;y[w]===void 0?y[w]=v:y[w]=y[w].concat(v)}return{generations:y.filter(v=>v!==void 0),llmOutput:{estimatedTokenUsage:p}}}const o=await this.completionWithRetry({...s,contents:a});let l;"usageMetadata"in o.response&&(l=vU(o.response.usageMetadata,this.model));const c=TIe(o.response,{usageMetadata:l});return((d=c.generations)==null?void 0:d.length)>0&&await(r==null?void 0:r.handleLLMNewToken(((h=c.generations[0])==null?void 0:h.text)??"")),c}async*_streamResponseChunks(e,n,r){var h;const i=yU(e,this._isMultimodalModel,this.useSystemInstruction,this.model);let a=i;if(i[0].role==="system"){const[p]=i;this.client.systemInstruction=p,a=i.slice(1)}const o={...this.invocationParams(n),contents:a},l=await this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{const{stream:p}=await this.client.generateContentStream(o,{signal:n==null?void 0:n.signal});return p});let c,u=0,f=0,d=0;for await(const p of l){if((h=n.signal)!=null&&h.aborted)return;if("usageMetadata"in p&&p.usageMetadata!==void 0&&this.streamUsage!==!1&&n.streamUsage!==!1){c=vU(p.usageMetadata,this.model);const y=p.usageMetadata.promptTokenCount??0;c.input_tokens=Math.max(0,y-u),u=y;const g=p.usageMetadata.candidatesTokenCount??0;c.output_tokens=Math.max(0,g-f),f=g;const v=p.usageMetadata.totalTokenCount??0;c.total_tokens=Math.max(0,v-d),d=v}const m=CIe(p,{usageMetadata:c});m&&(yield m,await(r==null?void 0:r.handleLLMNewToken(m.text??"")))}}async completionWithRetry(e,n){return this.caller.callWithOptions({signal:n==null?void 0:n.signal},async()=>{var r;try{return await this.client.generateContent(e,{signal:n==null?void 0:n.signal})}catch(i){throw(r=i.message)!=null&&r.includes("400 Bad Request")&&(i.status=400),i}})}get profile(){return ERe[this.model]??{}}withStructuredOutput(e,n){const r=e,i=n==null?void 0:n.name,a=n==null?void 0:n.method,s=n==null?void 0:n.includeRaw;if(a==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "jsonSchema" or "functionCalling" as a method.');let o,l;if(a==="functionCalling"){let d=i??"extract",h;if($d(r)){const p=JI(r);h=[{functionDeclarations:[{name:d,description:p.description??"A function available to call.",parameters:p}]}],l=new wU({returnSingle:!0,keyName:d,zodSchema:r})}else{let p;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(p=r,p.parameters=bp(r.parameters),d=r.name):p={name:d,description:r.description??"",parameters:bp(r)},h=[{functionDeclarations:[p]}],l=new wU({returnSingle:!0,keyName:d})}o=this.bindTools(h).withConfig({allowedFunctionNames:[d]})}else{const d=JI(r);o=this.withConfig({responseSchema:d}),l=new cne}if(!s)return o.pipe(l).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const c=Ep.assign({parsed:(d,h)=>l.invoke(d.raw,h)}),u=Ep.assign({parsed:()=>null}),f=c.withFallbacks({fallbacks:[u]});return Mu.from([{raw:o},f]).withConfig({runName:"StructuredOutputRunnable"})}},vne={};At(vne,{Embeddings:()=>VM});var VM=class{constructor(t){P(this,"caller");this.caller=new G1(t??{})}},wne={};At(wne,{chunkArray:()=>TRe});const TRe=(t,e)=>t.reduce((n,r,i)=>{const a=Math.floor(i/e),s=n[a]||[];return n[a]=s.concat([r]),n},[]),CRe=()=>{const t="AIzaSyBh3s61fNcNiV620kICjm-zZd1BLvqu4VI";return t==null?void 0:t.trim()},bne=async(t=[])=>{const e=CRe();if(!e)throw console.error("PennyWise: Missing API Key! (VITE_GEMINI_API_KEY or GOOGLE_API_KEY)"),new Error("PennyWise is missing its Gemini API Key. Please check your .env file!");console.log("PennyWise: Initializing Gemini Model...");try{const n=new ORe({apiKey:e,model:"gemini-3-flash-preview",maxOutputTokens:2048,temperature:0});return t.length>0?n.bindTools(t):n}catch(n){throw console.error("PennyWise: Failed to create model:",n),n}};class PRe{disable(){}getStore(){}run(e,n,...r){return n(...r)}exit(e,...n){return e(...n)}enterWith(e){}}function NRe(){ji.initializeGlobalInstance(new PRe)}var Fd=class extends Error{constructor(e,n){let r=e??"";n!=null&&n.lc_error_code&&(r=`${r}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langgraph/${n.lc_error_code}/
`);super(r);P(this,"lc_error_code");this.lc_error_code=n==null?void 0:n.lc_error_code}},_ne=class extends Fd{get is_bubble_up(){return!0}},IRe=class extends Fd{constructor(t,e){super(t,e),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},tS=class extends Fd{constructor(t,e){super(t,e),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},Dg=class extends _ne{constructor(e,n){super(JSON.stringify(e,null,2),n);P(this,"interrupts");this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}},xne=class extends Dg{constructor(t,e){super([{value:t}],e),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},Sne=class extends _ne{constructor(e){super();P(this,"command");this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};function RRe(t){return t!==void 0&&t.name===Sne.unminifiable_name}function nS(t){return t!==void 0&&t.is_bubble_up===!0}function Uh(t){return t!==void 0&&[Dg.unminifiable_name,xne.unminifiable_name].includes(t.name)}var FU=class extends Fd{constructor(t,e){super(t,e),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},$i=class extends Fd{constructor(t,e){super(t,e),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},ar=class extends Fd{constructor(t,e){super(t,e),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}},jRe=class extends Fd{constructor(t,e){super(t,e),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}},BC=class extends Fd{constructor(t,e){super(t,e),this.name="StateGraphInputError",this.message="Invalid StateGraph input. Make sure to pass a valid StateDefinition, Annotation.Root, or Zod schema."}static get unminifiable_name(){return"StateGraphInputError"}};function Ene(t){return COe({clockseq:t})}function fg(t,e){const n=e.replace(/-/g,"").match(/.{2}/g).map(r=>parseInt(r,16));return AE(t,new Uint8Array(n))}const $Re="__error__",rS="__scheduled__",MRe="__interrupt__",LRe="__resume__";var BU="[...]",DRe="[Circular]",RE=[],dg=[];function FRe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function BRe(t,e,n,r){typeof r>"u"&&(r=FRe()),AR(t,"",0,[],void 0,0,r);var i;try{dg.length===0?i=JSON.stringify(t,e,n):i=JSON.stringify(t,URe(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;RE.length!==0;){var a=RE.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function UC(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),RE.push([r,n,e,i])):dg.push([e,n,t]):(r[n]=t,RE.push([r,n,e]))}function AR(t,e,n,r,i,a,s){a+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){UC(DRe,t,e,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){UC(BU,t,e,i);return}if(typeof s.edgesLimit<"u"&&n+1>s.edgesLimit){UC(BU,t,e,i);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)AR(t[o],o,o,r,t,a,s);else{var l=Object.keys(t);for(o=0;o<l.length;o++){var c=l[o];AR(t[c],c,o,r,t,a,s)}}r.pop()}}function URe(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(dg.length>0)for(var r=0;r<dg.length;r++){var i=dg[r];if(i[1]===e&&i[0]===n){n=i[2],dg.splice(r,1);break}}return t.call(this,e,n)}}const zRe=[];var VRe={},Ane={};At(Ane,{BaseChatMessageHistory:()=>kne,BaseListChatMessageHistory:()=>WM,InMemoryChatMessageHistory:()=>WRe});var kne=class extends ko{async addMessages(t){for(const e of t)await this.addMessage(e)}},WM=class extends ko{addUserMessage(t){return this.addMessage(new Ma(t))}addAIMessage(t){return this.addMessage(new Ei(t))}async addMessages(t){for(const e of t)await this.addMessage(e)}clear(){throw new Error("Not implemented.")}},WRe=class extends WM{constructor(e){super(...arguments);P(this,"lc_namespace",["langchain","stores","message","in_memory"]);P(this,"messages",[]);this.messages=e??[]}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async clear(){this.messages=[]}},HRe={},One={};At(One,{BaseMemory:()=>qRe,getInputValue:()=>GRe,getOutputValue:()=>KRe,getPromptInputKey:()=>YRe});var qRe=class{};const Tne=(t,e)=>{if(e!==void 0)return t[e];const n=Object.keys(t);if(n.length===1)return t[n[0]]},GRe=(t,e)=>{const n=Tne(t,e);if(!n){const r=Object.keys(t);throw new Error(`input values have ${r.length} keys, you must specify an input key or pass only 1 key as input`)}return n},KRe=(t,e)=>{const n=Tne(t,e);if(!n&&n!==""){const r=Object.keys(t);throw new Error(`output values have ${r.length} keys, you must specify an output key or pass only 1 key as output`)}return n};function YRe(t,e){const n=Object.keys(t).filter(r=>!e.includes(r)&&r!=="stop");if(n.length!==1)throw new Error(`One input key expected, but got ${n.length}`);return n[0]}var Cne={};At(Cne,{BaseStore:()=>Pne,InMemoryStore:()=>ZRe});var Pne=class extends ko{},ZRe=class extends Pne{constructor(){super(...arguments);P(this,"lc_namespace",["langchain","storage"]);P(this,"store",{})}async mget(e){return e.map(n=>this.store[n])}async mset(e){for(const[n,r]of e)this.store[n]=r}async mdelete(e){for(const n of e)delete this.store[n]}async*yieldKeys(e){const n=Object.keys(this.store);for(const r of n)(e===void 0||r.startsWith(e))&&(yield r)}},Nne={};At(Nne,{BaseRetriever:()=>HM});var HM=class extends fn{constructor(e){super(e);P(this,"callbacks");P(this,"tags");P(this,"metadata");P(this,"verbose");this.callbacks=e==null?void 0:e.callbacks,this.tags=(e==null?void 0:e.tags)??[],this.metadata=(e==null?void 0:e.metadata)??{},this.verbose=(e==null?void 0:e.verbose)??!1}_getRelevantDocuments(e,n){throw new Error("Not implemented!")}async invoke(e,n){const r=yn(H1(n)),i=await ja.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),a=await(i==null?void 0:i.handleRetrieverStart(this.toJSON(),e,r.runId,void 0,void 0,void 0,r.runName));try{const s=await this._getRelevantDocuments(e,a);return await(a==null?void 0:a.handleRetrieverEnd(s)),s}catch(s){throw await(a==null?void 0:a.handleRetrieverError(s)),s}}},Ine={};At(Ine,{SaveableVectorStore:()=>XRe,VectorStore:()=>qM,VectorStoreRetriever:()=>iS});var iS=class extends HM{constructor(e){super(e);P(this,"vectorStore");P(this,"k",4);P(this,"searchType","similarity");P(this,"searchKwargs");P(this,"filter");this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}async _getRelevantDocuments(e,n){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},n==null?void 0:n.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,n==null?void 0:n.getChild("vectorstore"))}async addDocuments(e,n){return this.vectorStore.addDocuments(e,n)}},qM=class extends ko{constructor(e,n){super(n);P(this,"lc_namespace",["langchain","vectorstores",this._vectorstoreType()]);P(this,"embeddings");this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,n=4,r=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),n,r)).map(s=>s[0])}async similaritySearchWithScore(e,n=4,r=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),n,r)}static fromTexts(e,n,r,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,n,r){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,n,r,i,a,s){if(typeof e=="number")return new iS({vectorStore:this,k:e,filter:n,tags:[...i??[],this._vectorstoreType()],metadata:a,verbose:s,callbacks:r});{const o={vectorStore:this,k:e==null?void 0:e.k,filter:e==null?void 0:e.filter,tags:[...(e==null?void 0:e.tags)??[],this._vectorstoreType()],metadata:e==null?void 0:e.metadata,verbose:e==null?void 0:e.verbose,callbacks:e==null?void 0:e.callbacks,searchType:e==null?void 0:e.searchType};return(e==null?void 0:e.searchType)==="mmr"?new iS({...o,searchKwargs:e.searchKwargs}):new iS({...o})}}},XRe=class extends qM{static load(t,e){throw new Error("Not implemented")}},Rne={};At(Rne,{BaseDocumentLoader:()=>jne});var jne=class{},$ne={};At($ne,{LangSmithLoader:()=>JRe});var JRe=class extends jne{constructor(e){super();P(this,"datasetId");P(this,"datasetName");P(this,"exampleIds");P(this,"asOf");P(this,"splits");P(this,"inlineS3Urls");P(this,"offset");P(this,"limit");P(this,"metadata");P(this,"filter");P(this,"contentKey");P(this,"formatContent");P(this,"client");if(e.client&&e.clientConfig)throw new Error("client and clientConfig cannot both be provided.");this.client=e.client??new py(e==null?void 0:e.clientConfig),this.contentKey=e.contentKey?e.contentKey.split("."):[],this.formatContent=e.formatContent??QRe,this.datasetId=e.datasetId,this.datasetName=e.datasetName,this.exampleIds=e.exampleIds,this.asOf=e.asOf,this.splits=e.splits,this.inlineS3Urls=e.inlineS3Urls,this.offset=e.offset,this.limit=e.limit,this.metadata=e.metadata,this.filter=e.filter}async load(){const e=[];for await(const n of this.client.listExamples({datasetId:this.datasetId,datasetName:this.datasetName,exampleIds:this.exampleIds,asOf:this.asOf,splits:this.splits,inlineS3Urls:this.inlineS3Urls,offset:this.offset,limit:this.limit,metadata:this.metadata,filter:this.filter})){let r=n.inputs;for(const s of this.contentKey)r=r[s];const i=this.formatContent(r),a=n;["created_at","modified_at"].forEach(s=>{s in a&&typeof a[s]=="object"&&(a[s]=a[s].toString())}),e.push({pageContent:i,metadata:a})}return e}};function QRe(t){if(typeof t=="string")return t;try{return JSON.stringify(t,null,2)}catch{return String(t)}}var ud=class{constructor(t){P(this,"pageContent");P(this,"metadata");P(this,"id");this.pageContent=t.pageContent!==void 0?t.pageContent.toString():"",this.metadata=t.metadata??{},this.id=t.id}},Mne=class extends fn{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","documents","transformers"])}invoke(e,n){return this.transformDocuments(e)}},eje=class extends Mne{async transformDocuments(t){const e=[];for(const n of t){const r=await this._transformDocument(n);e.push(r)}return e}},Lne={};At(Lne,{BaseDocumentTransformer:()=>Mne,Document:()=>ud,MappingDocumentTransformer:()=>eje});var GM=class extends ko{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","example_selectors","base"])}},Dne=class{async getPromptAsync(t,e){return this.getPrompt(t).partial((e==null?void 0:e.partialVariables)??{})}},tje=class extends Dne{constructor(e,n=[]){super();P(this,"defaultPrompt");P(this,"conditionals");this.defaultPrompt=e,this.conditionals=n}getPrompt(e){for(const[n,r]of this.conditionals)if(n(e))return r;return this.defaultPrompt}};function nje(t){return t._modelType()==="base_llm"}function rje(t){return t._modelType()==="base_chat_model"}function UU(t){return t.split(/\n| /).length}var ije=class Fne extends GM{constructor(n){super(n);P(this,"examples",[]);P(this,"examplePrompt");P(this,"getTextLength",UU);P(this,"maxLength",2048);P(this,"exampleTextLengths",[]);this.examplePrompt=n.examplePrompt,this.maxLength=n.maxLength??2048,this.getTextLength=n.getTextLength??UU}async addExample(n){this.examples.push(n);const r=await this.examplePrompt.format(n);this.exampleTextLengths.push(this.getTextLength(r))}async calculateExampleTextLengths(n,r){if(n.length>0)return n;const{examples:i,examplePrompt:a}=r;return(await Promise.all(i.map(o=>a.format(o)))).map(o=>this.getTextLength(o))}async selectExamples(n){const r=Object.values(n).join(" ");let i=this.maxLength-this.getTextLength(r),a=0;const s=[];for(;i>0&&a<this.examples.length;){const o=i-this.exampleTextLengths[a];if(o<0)break;s.push(this.examples[a]),i=o,a+=1}return s}static async fromExamples(n,r){const i=new Fne(r);return await Promise.all(n.map(a=>i.addExample(a))),i}};function zC(t){return Object.keys(t).sort().map(e=>t[e])}var aje=class Bne extends GM{constructor(n){super(n);P(this,"vectorStoreRetriever");P(this,"exampleKeys");P(this,"inputKeys");if(this.exampleKeys=n.exampleKeys,this.inputKeys=n.inputKeys,n.vectorStore!==void 0)this.vectorStoreRetriever=n.vectorStore.asRetriever({k:n.k??4,filter:n.filter});else if(n.vectorStoreRetriever)this.vectorStoreRetriever=n.vectorStoreRetriever;else throw new Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}async addExample(n){const r=this.inputKeys??Object.keys(n),i=zC(r.reduce((a,s)=>({...a,[s]:n[s]}),{})).join(" ");await this.vectorStoreRetriever.addDocuments([new ud({pageContent:i,metadata:n})])}async selectExamples(n){const r=this.inputKeys??Object.keys(n),i=zC(r.reduce((o,l)=>({...o,[l]:n[l]}),{})).join(" "),s=(await this.vectorStoreRetriever.invoke(i)).map(o=>o.metadata);return this.exampleKeys?s.map(o=>this.exampleKeys.reduce((l,c)=>({...l,[c]:o[c]}),{})):s}static async fromExamples(n,r,i,a={}){const s=a.inputKeys??null,o=n.map(c=>zC(s?s.reduce((u,f)=>({...u,[f]:c[f]}),{}):c).join(" ")),l=await i.fromTexts(o,n,r,a);return new Bne({vectorStore:l,k:a.k??4,exampleKeys:a.exampleKeys,inputKeys:a.inputKeys})}},Une={};At(Une,{BaseExampleSelector:()=>GM,BasePromptSelector:()=>Dne,ConditionalPromptSelector:()=>tje,LengthBasedExampleSelector:()=>ije,SemanticSimilarityExampleSelector:()=>aje,isChatModel:()=>rje,isLLM:()=>nje});const kR="10f90ea3-90a4-4962-bf75-83a0f3c1c62a";var sje=class extends ko{constructor(){super(...arguments);P(this,"lc_namespace",["langchain","recordmanagers"])}},zne=class{constructor(t){P(this,"uid");P(this,"hash_");P(this,"contentHash");P(this,"metadataHash");P(this,"pageContent");P(this,"metadata");P(this,"keyEncoder",MM);this.uid=t.uid,this.pageContent=t.pageContent,this.metadata=t.metadata}makeDefaultKeyEncoder(t){this.keyEncoder=t}calculateHashes(){const t=["hash_","content_hash","metadata_hash"];for(const n of t)if(n in this.metadata)throw new Error(`Metadata cannot contain key ${n} as it is reserved for internal use. Restricted keys: [${t.join(", ")}]`);const e=this._hashStringToUUID(this.pageContent);try{const n=this._hashNestedDictToUUID(this.metadata);this.contentHash=e,this.metadataHash=n}catch(n){throw new Error(`Failed to hash metadata: ${n}. Please use a dict that can be serialized using json.`)}this.hash_=this._hashStringToUUID(this.contentHash+this.metadataHash),this.uid||(this.uid=this.hash_)}toDocument(){return new ud({pageContent:this.pageContent,metadata:this.metadata})}static fromDocument(t,e){const n=new this({pageContent:t.pageContent,metadata:t.metadata,uid:e||t.uid});return n.calculateHashes(),n}_hashStringToUUID(t){const e=this.keyEncoder(t);return AE(e,kR)}_hashNestedDictToUUID(t){const e=JSON.stringify(t,Object.keys(t).sort()),n=this.keyEncoder(e);return AE(n,kR)}};function Vne(t,e){const n=[];let r=[];return e.forEach(i=>{r.push(i),r.length>=t&&(n.push(r),r=[])}),r.length>0&&n.push(r),n}function Wne(t){const e=new Set,n=[];for(const r of t){if(!r.hash_)throw new Error("Hashed document does not have a hash");e.has(r.hash_)||(e.add(r.hash_),n.push(r))}return n}function Hne(t){if(t===null)return e=>null;if(typeof t=="string")return e=>e.metadata[t];if(typeof t=="function")return t;throw new Error(`sourceIdKey should be null, a string or a function, got ${typeof t}`)}const qne=t=>"load"in t&&typeof t.load=="function"&&"loadAndSplit"in t&&typeof t.loadAndSplit=="function";async function oje(t){const{docsSource:e,recordManager:n,vectorStore:r,options:i}=t,{batchSize:a=100,cleanup:s,sourceIdKey:o,cleanupBatchSize:l=1e3,forceUpdate:c=!1}=i??{};if(s==="incremental"&&!o)throw new Error("sourceIdKey is required when cleanup mode is incremental. Please provide through 'options.sourceIdKey'.");const u=qne(e)?await e.load():e,f=Hne(o??null),d=await n.getTime();let h=0,p=0,m=0,y=0;const g=Vne(a??100,u);for(const v of g){const w=Wne(v.map(M=>zne.fromDocument(M))),_=w.map(M=>f(M));s==="incremental"&&w.forEach((M,N)=>{if(_[N]===null)throw new Error("sourceIdKey must be provided when cleanup is incremental")});const x=await n.exists(w.map(M=>M.uid)),E=[],T=[],O=[],R=new Set;if(w.forEach((M,N)=>{if(x[N])if(c)R.add(M.uid);else{O.push(M.uid);return}E.push(M.uid),T.push(M.toDocument())}),O.length>0&&(await n.update(O,{timeAtLeast:d}),y+=O.length),T.length>0&&(await r.addDocuments(T,{ids:E}),h+=T.length-R.size,m+=R.size),await n.update(w.map(M=>M.uid),{timeAtLeast:d,groupIds:_}),s==="incremental"){_.forEach(N=>{if(!N)throw new Error("Source id cannot be null")});const M=await n.listKeys({before:d,groupIds:_});M.length>0&&(await r.delete({ids:M}),await n.deleteKeys(M),p+=M.length)}}if(s==="full"){let v=await n.listKeys({before:d,limit:l});for(;v.length>0;)await r.delete({ids:v}),await n.deleteKeys(v),p+=v.length,v=await n.listKeys({before:d,limit:l})}return{numAdded:h,numDeleted:p,numUpdated:m,numSkipped:y}}var Gne={};At(Gne,{RecordManager:()=>sje,UUIDV5_NAMESPACE:()=>kR,_HashedDocument:()=>zne,_batch:()=>Vne,_deduplicateInOrder:()=>Wne,_getSourceIdAssigner:()=>Hne,_isBaseDocumentLoader:()=>qne,index:()=>oje});var Kne={};At(Kne,{BaseLLM:()=>Yne,LLM:()=>KM});var Yne=class q0 extends BM{constructor(){super(...arguments);P(this,"lc_namespace",["langchain","llms",this._llmType()])}async invoke(n,r){const i=q0._convertInputToPromptValue(n);return(await this.generatePrompt([i],r,r==null?void 0:r.callbacks)).generations[0][0].text}async*_streamResponseChunks(n,r,i){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(n){const[r,i]=super._separateRunnableConfigFromCallOptions(n);return i.signal=r.signal,[r,i]}async*_streamIterator(n,r){if(this._streamResponseChunks===q0.prototype._streamResponseChunks)yield this.invoke(n,r);else{const i=q0._convertInputToPromptValue(n),[a,s]=this._separateRunnableConfigFromCallOptionsCompat(r),o=await ja.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),l={options:s,invocation_params:this==null?void 0:this.invocationParams(s),batch_size:1},c=await(o==null?void 0:o.handleLLMStart(this.toJSON(),[i.toString()],a.runId,void 0,l,void 0,void 0,a.runName));let u=new gy({text:""});try{for await(const f of this._streamResponseChunks(i.toString(),s,c==null?void 0:c[0]))u?u=u.concat(f):u=f,typeof f.text=="string"&&(yield f.text)}catch(f){throw await Promise.all((c??[]).map(d=>d==null?void 0:d.handleLLMError(f))),f}await Promise.all((c??[]).map(f=>f==null?void 0:f.handleLLMEnd({generations:[[u]]})))}}async generatePrompt(n,r,i){const a=n.map(s=>s.toString());return this.generate(a,r,i)}invocationParams(n){return{}}_flattenLLMResult(n){const r=[];for(let i=0;i<n.generations.length;i+=1){const a=n.generations[i];if(i===0)r.push({generations:[a],llmOutput:n.llmOutput});else{const s=n.llmOutput?{...n.llmOutput,tokenUsage:{}}:void 0;r.push({generations:[a],llmOutput:s})}}return r}async _generateUncached(n,r,i,a){let s;if(a!==void 0&&a.length===n.length)s=a;else{const u=await ja.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),f={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:n.length};s=await(u==null?void 0:u.handleLLMStart(this.toJSON(),n,i.runId,void 0,f,void 0,void 0,i==null?void 0:i.runName))}const o=!!(s!=null&&s[0].handlers.find(mM));let l;if(o&&n.length===1&&this._streamResponseChunks!==q0.prototype._streamResponseChunks)try{const u=await this._streamResponseChunks(n[0],r,s==null?void 0:s[0]);let f;for await(const d of u)f===void 0?f=d:f=Ad(f,d);if(f===void 0)throw new Error("Received empty response from chat model call.");l={generations:[[f]],llmOutput:{}},await(s==null?void 0:s[0].handleLLMEnd(l))}catch(u){throw await(s==null?void 0:s[0].handleLLMError(u)),u}else{try{l=await this._generate(n,r,s==null?void 0:s[0])}catch(f){throw await Promise.all((s??[]).map(d=>d==null?void 0:d.handleLLMError(f))),f}const u=this._flattenLLMResult(l);await Promise.all((s??[]).map((f,d)=>f==null?void 0:f.handleLLMEnd(u[d])))}const c=(s==null?void 0:s.map(u=>u.runId))||void 0;return Object.defineProperty(l,_b,{value:c?{runIds:c}:void 0,configurable:!0}),l}async _generateCached({prompts:n,cache:r,llmStringKey:i,parsedOptions:a,handledOptions:s,runId:o}){const l=await ja.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),c={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:n.length},u=await(l==null?void 0:l.handleLLMStart(this.toJSON(),n,o,void 0,c,void 0,void 0,s==null?void 0:s.runName)),f=[],h=(await Promise.allSettled(n.map(async(y,g)=>{const v=await r.lookup(y,i);return v==null&&f.push(g),v}))).map((y,g)=>({result:y,runManager:u==null?void 0:u[g]})).filter(({result:y})=>y.status==="fulfilled"&&y.value!=null||y.status==="rejected"),p=[];await Promise.all(h.map(async({result:y,runManager:g},v)=>{if(y.status==="fulfilled"){const w=y.value;return p[v]=w.map(_=>(_.generationInfo={..._.generationInfo,tokenUsage:{}},_)),w.length&&await(g==null?void 0:g.handleLLMNewToken(w[0].text)),g==null?void 0:g.handleLLMEnd({generations:[w]},void 0,void 0,void 0,{cached:!0})}else return await(g==null?void 0:g.handleLLMError(y.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(y.reason)}));const m={generations:p,missingPromptIndices:f,startedRunManagers:u};return Object.defineProperty(m,_b,{value:u?{runIds:u==null?void 0:u.map(y=>y.runId)}:void 0,configurable:!0}),m}async generate(n,r,i){if(!Array.isArray(n))throw new Error("Argument 'prompts' is expected to be a string[]");let a;Array.isArray(r)?a={stop:r}:a=r;const[s,o]=this._separateRunnableConfigFromCallOptionsCompat(a);if(s.callbacks=s.callbacks??i,!this.cache)return this._generateUncached(n,o,s);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:u,missingPromptIndices:f,startedRunManagers:d}=await this._generateCached({prompts:n,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:s,runId:s.runId});let h={};if(f.length>0){const p=await this._generateUncached(f.map(m=>n[m]),o,s,d!==void 0?f.map(m=>d==null?void 0:d[m]):void 0);await Promise.all(p.generations.map(async(m,y)=>{const g=f[y];return u[g]=m,l.update(n[g],c,m)})),h=p.llmOutput??{}}return{generations:u,llmOutput:h}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},KM=class extends Yne{async _generate(t,e,n){return{generations:await Promise.all(t.map((i,a)=>this._call(i,{...e,promptIndex:a},n).then(s=>[{text:s}])))}}},lje={},Zne=class extends Y1{constructor(e){super();P(this,"lc_namespace",["langchain","output_parsers","openai_functions"]);P(this,"lc_serializable",!0);P(this,"argsOnly",!0);this.argsOnly=(e==null?void 0:e.argsOnly)??this.argsOnly}static lc_name(){return"OutputFunctionsParser"}async parseResult(e){if("message"in e[0]){const r=e[0].message.additional_kwargs.function_call;if(!r)throw new Error(`No function_call in message ${JSON.stringify(e)}`);if(!r.arguments)throw new Error(`No arguments in function_call ${JSON.stringify(e)}`);return this.argsOnly?r.arguments:JSON.stringify(r)}else throw new Error(`No message in generations ${JSON.stringify(e)}`)}},Xne=class extends J1{constructor(e){super(e);P(this,"lc_namespace",["langchain","output_parsers","openai_functions"]);P(this,"lc_serializable",!0);P(this,"outputParser");P(this,"argsOnly",!0);this.argsOnly=(e==null?void 0:e.argsOnly)??this.argsOnly,this.outputParser=new Zne(e)}static lc_name(){return"JsonOutputFunctionsParser"}_diff(e,n){return n?uk(e??{},n):void 0}async parsePartialResult(e){const n=e[0];if(!n.message)return;const{message:r}=n,i=r.additional_kwargs.function_call;if(i)return this.argsOnly?dy(i.arguments):{...i,arguments:dy(i.arguments)}}async parseResult(e){const n=await this.outputParser.parseResult(e);if(!n)throw new Error(`No result from "OutputFunctionsParser" ${JSON.stringify(e)}`);return this.parse(n)}async parse(e){const n=JSON.parse(e);return this.argsOnly||(n.arguments=JSON.parse(n.arguments)),n}getFormatInstructions(){return""}},cje=class extends Y1{constructor(e){super(e);P(this,"lc_namespace",["langchain","output_parsers","openai_functions"]);P(this,"lc_serializable",!0);P(this,"outputParser",new Xne);P(this,"attrName");this.attrName=e.attrName}static lc_name(){return"JsonKeyOutputFunctionsParser"}get lc_aliases(){return{attrName:"key_name"}}async parseResult(e){return(await this.outputParser.parseResult(e))[this.attrName]}},Jne={};At(Jne,{JsonKeyOutputFunctionsParser:()=>cje,JsonOutputFunctionsParser:()=>Xne,OutputFunctionsParser:()=>Zne});function Qne(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=dy(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(i){throw new gc([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function uje(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function fje(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}var ere=class extends J1{constructor(e){super(e);P(this,"returnId",!1);P(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);P(this,"lc_serializable",!0);this.returnId=(e==null?void 0:e.returnId)??this.returnId}static lc_name(){return"JsonOutputToolsParser"}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var s;const r=e[0].message;let i;if(_p(r)&&((s=r.tool_calls)!=null&&s.length)?i=r.tool_calls.map(o=>{const{id:l,...c}=o;return this.returnId?{id:l,...c}:c}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(l=>Qne(l,{returnId:this.returnId,partial:n}))),!i)return[];const a=[];for(const o of i)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};a.push(l)}return a}},dje=class extends ere{constructor(e){super(e);P(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);P(this,"lc_serializable",!0);P(this,"returnId",!1);P(this,"keyName");P(this,"returnSingle",!1);P(this,"zodSchema");this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}static lc_name(){return"JsonOutputKeyToolsParser"}async _validateResult(e){var r;if(this.zodSchema===void 0)return e;const n=await J$(this.zodSchema,e);if(n.success)return n.data;throw new gc(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify((r=n.error)==null?void 0:r.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(a=>a.type===this.keyName);let i=r;if(r.length)return this.returnId||(i=r.map(a=>a.args)),this.returnSingle?i[0]:i}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(s=>s.type===this.keyName);let i=r;return r.length?(this.returnId||(i=r.map(s=>s.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(s=>this._validateResult(s)))):void 0}},tre={};At(tre,{JsonOutputKeyToolsParser:()=>dje,JsonOutputToolsParser:()=>ere,convertLangChainToolCallToOpenAI:()=>uje,makeInvalidToolCall:()=>fje,parseToolCall:()=>Qne});var t_=class extends fn{constructor(e){super(e);P(this,"lc_serializable",!0);P(this,"lc_namespace",["langchain_core","prompts",this._getPromptType()]);P(this,"inputVariables");P(this,"outputParser");P(this,"partialVariables");P(this,"metadata");P(this,"tags");const{inputVariables:n}=e;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}get lc_attributes(){return{partialVariables:void 0}}async mergePartialAndUserVariables(e){const n=this.partialVariables??{},r={};for(const[a,s]of Object.entries(n))typeof s=="string"?r[a]=s:r[a]=await s();return{...r,...e}}async invoke(e,n){const r={...this.metadata,...n==null?void 0:n.metadata},i=[...this.tags??[],...(n==null?void 0:n.tags)??[]];return this._callWithConfig(a=>this.formatPromptValue(a),e,{...n,tags:i,metadata:r,runType:"prompt"})}},Ab=class extends t_{async formatPromptValue(t){const e=await this.format(t);return new jM(e)}};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var hje=Object.prototype.toString,hv=Array.isArray||function(e){return hje.call(e)==="[object Array]"};function YM(t){return typeof t=="function"}function pje(t){return hv(t)?"array":typeof t}function VC(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function zU(t,e){return t!=null&&typeof t=="object"&&e in t}function mje(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var gje=RegExp.prototype.test;function yje(t,e){return gje.call(t,e)}var vje=/\S/;function wje(t){return!yje(vje,t)}var bje={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function _je(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return bje[n]})}var xje=/\s*/,Sje=/\s+/,VU=/\s*=/,Eje=/\s*\}/,Aje=/#|\^|\/|>|\{|&|=|!/;function kje(t,e){if(!t)return[];var n=!1,r=[],i=[],a=[],s=!1,o=!1,l="",c=0;function u(){if(s&&!o)for(;a.length;)delete i[a.pop()];else a=[];s=!1,o=!1}var f,d,h;function p(O){if(typeof O=="string"&&(O=O.split(Sje,2)),!hv(O)||O.length!==2)throw new Error("Invalid tags: "+O);f=new RegExp(VC(O[0])+"\\s*"),d=new RegExp("\\s*"+VC(O[1])),h=new RegExp("\\s*"+VC("}"+O[1]))}p(e||rs.tags);for(var m=new n_(t),y,g,v,w,_,x;!m.eos();){if(y=m.pos,v=m.scanUntil(f),v)for(var E=0,T=v.length;E<T;++E)w=v.charAt(E),wje(w)?(a.push(i.length),l+=w):(o=!0,n=!0,l+=" "),i.push(["text",w,y,y+1]),y+=1,w===`
`&&(u(),l="",c=0,n=!1);if(!m.scan(f))break;if(s=!0,g=m.scan(Aje)||"name",m.scan(xje),g==="="?(v=m.scanUntil(VU),m.scan(VU),m.scanUntil(d)):g==="{"?(v=m.scanUntil(h),m.scan(Eje),m.scanUntil(d),g="&"):v=m.scanUntil(d),!m.scan(d))throw new Error("Unclosed tag at "+m.pos);if(g==">"?_=[g,v,y,m.pos,l,c,n]:_=[g,v,y,m.pos],c++,i.push(_),g==="#"||g==="^")r.push(_);else if(g==="/"){if(x=r.pop(),!x)throw new Error('Unopened section "'+v+'" at '+y);if(x[1]!==v)throw new Error('Unclosed section "'+x[1]+'" at '+y)}else g==="name"||g==="{"||g==="&"?o=!0:g==="="&&p(v)}if(u(),x=r.pop(),x)throw new Error('Unclosed section "'+x[1]+'" at '+m.pos);return Tje(Oje(i))}function Oje(t){for(var e=[],n,r,i=0,a=t.length;i<a;++i)n=t[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function Tje(t){for(var e=[],n=e,r=[],i,a,s=0,o=t.length;s<o;++s)switch(i=t[s],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":a=r.pop(),a[5]=i[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(i)}return e}function n_(t){this.string=t,this.tail=t,this.pos=0}n_.prototype.eos=function(){return this.tail===""};n_.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};n_.prototype.scanUntil=function(e){var n=this.tail.search(e),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function yy(t,e){this.view=t,this.cache={".":this.view},this.parent=e}yy.prototype.push=function(e){return new yy(e,this)};yy.prototype.lookup=function(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var i=this,a,s,o,l=!1;i;){if(e.indexOf(".")>0)for(a=i.view,s=e.split("."),o=0;a!=null&&o<s.length;)o===s.length-1&&(l=zU(a,s[o])||mje(a,s[o])),a=a[s[o++]];else a=i.view[e],l=zU(i.view,e);if(l){r=a;break}i=i.parent}n[e]=r}return YM(r)&&(r=r.call(this.view)),r};function Ua(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Ua.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Ua.prototype.parse=function(e,n){var r=this.templateCache,i=e+":"+(n||rs.tags).join(":"),a=typeof r<"u",s=a?r.get(i):void 0;return s==null&&(s=kje(e,n),a&&r.set(i,s)),s};Ua.prototype.render=function(e,n,r,i){var a=this.getConfigTags(i),s=this.parse(e,a),o=n instanceof yy?n:new yy(n,void 0);return this.renderTokens(s,o,r,e,i)};Ua.prototype.renderTokens=function(e,n,r,i,a){for(var s="",o,l,c,u=0,f=e.length;u<f;++u)c=void 0,o=e[u],l=o[0],l==="#"?c=this.renderSection(o,n,r,i,a):l==="^"?c=this.renderInverted(o,n,r,i,a):l===">"?c=this.renderPartial(o,n,r,a):l==="&"?c=this.unescapedValue(o,n):l==="name"?c=this.escapedValue(o,n,a):l==="text"&&(c=this.rawValue(o)),c!==void 0&&(s+=c);return s};Ua.prototype.renderSection=function(e,n,r,i,a){var s=this,o="",l=n.lookup(e[1]);function c(d){return s.render(d,n,r,a)}if(l){if(hv(l))for(var u=0,f=l.length;u<f;++u)o+=this.renderTokens(e[4],n.push(l[u]),r,i,a);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],n.push(l),r,i,a);else if(YM(l)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(e[3],e[5]),c),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],n,r,i,a);return o}};Ua.prototype.renderInverted=function(e,n,r,i,a){var s=n.lookup(e[1]);if(!s||hv(s)&&s.length===0)return this.renderTokens(e[4],n,r,i,a)};Ua.prototype.indentPartial=function(e,n,r){for(var i=n.replace(/[^ \t]/g,""),a=e.split(`
`),s=0;s<a.length;s++)a[s].length&&(s>0||!r)&&(a[s]=i+a[s]);return a.join(`
`)};Ua.prototype.renderPartial=function(e,n,r,i){if(r){var a=this.getConfigTags(i),s=YM(r)?r(e[1]):r[e[1]];if(s!=null){var o=e[6],l=e[5],c=e[4],u=s;l==0&&c&&(u=this.indentPartial(s,c,o));var f=this.parse(u,a);return this.renderTokens(f,n,r,u,i)}}};Ua.prototype.unescapedValue=function(e,n){var r=n.lookup(e[1]);if(r!=null)return r};Ua.prototype.escapedValue=function(e,n,r){var i=this.getConfigEscape(r)||rs.escape,a=n.lookup(e[1]);if(a!=null)return typeof a=="number"&&i===rs.escape?String(a):i(a)};Ua.prototype.rawValue=function(e){return e[1]};Ua.prototype.getConfigTags=function(e){return hv(e)?e:e&&typeof e=="object"?e.tags:void 0};Ua.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!hv(e))return e.escape};var rs={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){kb.templateCache=t},get templateCache(){return kb.templateCache}},kb=new Ua;rs.clearCache=function(){return kb.clearCache()};rs.parse=function(e,n){return kb.parse(e,n)};rs.render=function(e,n,r,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+pje(e)+'" was given as the first argument for mustache#render(template, view, partials)');return kb.render(e,n,r,i)};rs.escape=_je;rs.Scanner=n_;rs.Context=yy;rs.Writer=Ua;function nre(){rs.escape=t=>t}const Ob=t=>{const e=t.split(""),n=[],r=(a,s)=>{for(let o=s;o<e.length;o+=1)if(a.includes(e[o]))return o;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")n.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")n.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const a=r("}",i);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:e.slice(i+1,a).join("")}),i=a+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const a=r("{}",i),s=(a<0?e.slice(i):e.slice(i,a)).join("");n.push({type:"literal",text:s}),i=a<0?e.length:a}}return n},rre=(t,e=[])=>{const n=[];for(const r of t)if(r[0]==="name"){const i=r[1].includes(".")?r[1].split(".")[0]:r[1];n.push({type:"variable",name:i})}else if(["#","&","^",">"].includes(r[0])){if(n.push({type:"variable",name:r[1]}),r[0]==="#"&&r.length>4&&Array.isArray(r[4])){const i=[...e,r[1]],a=rre(r[4],i);n.push(...a)}}else n.push({type:"literal",text:r[1]});return n},jE=t=>{nre();const e=rs.parse(t);return rre(e)},ire=(t,e)=>Ob(t).reduce((n,r)=>{if(r.type==="variable"){if(r.name in e){const i=typeof e[r.name]=="string"?e[r.name]:JSON.stringify(e[r.name]);return n+i}throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),are=(t,e)=>(nre(),rs.render(t,e)),$E={"f-string":ire,mustache:are},sre={"f-string":Ob,mustache:jE},hl=(t,e,n)=>{try{return $E[e](t,n)}catch(r){throw V1(r,"INVALID_PROMPT_INPUT")}},ME=(t,e)=>sre[e](t),r_=(t,e,n)=>{if(!(e in $E)){const r=Object.keys($E);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=Object.fromEntries(n.map(i=>[i,"foo"]));Array.isArray(t)?t.forEach(i=>{if(i.type==="text"&&"text"in i&&typeof i.text=="string")hl(i.text,e,r);else if(i.type==="image_url"){if(typeof i.image_url=="string")hl(i.image_url,e,r);else if(typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url&&typeof i.image_url.url=="string"){const a=i.image_url.url;hl(a,e,r)}}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):hl(t,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};var fd=class G0 extends Ab{constructor(n){super(n);P(this,"template");P(this,"templateFormat","f-string");P(this,"validateTemplate",!0);P(this,"additionalContentFields");if(n.templateFormat==="mustache"&&n.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,n),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),r_(this.template,this.templateFormat,r)}}static lc_name(){return"PromptTemplate"}_getPromptType(){return"prompt"}async format(n){const r=await this.mergePartialAndUserVariables(n);return hl(this.template,this.templateFormat,r)}static fromExamples(n,r,i,a=`

`,s=""){const o=[s,...n,r].join(a);return new G0({inputVariables:i,template:o})}static fromTemplate(n,r){const{templateFormat:i="f-string",...a}=r??{},s=new Set;return ME(n,i).forEach(o=>{o.type==="variable"&&s.add(o.name)}),new G0({inputVariables:[...s],templateFormat:i,template:n,...a})}async partial(n){const r=this.inputVariables.filter(s=>!(s in n)),i={...this.partialVariables??{},...n},a={...this,inputVariables:r,partialVariables:i};return new G0(a)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(n){if(!n.template)throw new Error("Prompt template must have a template");return new G0({inputVariables:n.input_variables,template:n.template,templateFormat:n.template_format})}},aS=class ore extends t_{constructor(n){super(n);P(this,"lc_namespace",["langchain_core","prompts","image"]);P(this,"template");P(this,"templateFormat","f-string");P(this,"validateTemplate",!0);P(this,"additionalContentFields");if(this.template=n.template,this.templateFormat=n.templateFormat??this.templateFormat,this.validateTemplate=n.validateTemplate??this.validateTemplate,this.additionalContentFields=n.additionalContentFields,this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),r_([{type:"image_url",image_url:this.template}],this.templateFormat,r)}}static lc_name(){return"ImagePromptTemplate"}_getPromptType(){return"prompt"}async partial(n){const r=this.inputVariables.filter(s=>!(s in n)),i={...this.partialVariables??{},...n},a={...this,inputVariables:r,partialVariables:i};return new ore(a)}async format(n){const r={};for(const[o,l]of Object.entries(this.template))typeof l=="string"?r[o]=hl(l,this.templateFormat,n):r[o]=l;const i=n.url||r.url,a=n.detail||r.detail;if(!i)throw new Error("Must provide either an image URL.");if(typeof i!="string")throw new Error("url must be a string.");const s={url:i};return a&&(s.detail=a),s}async formatPromptValue(n){const r=await this.format(n);return new Hte(r)}},OR=class extends fn{constructor(e){const n=e.templateFormat??"f-string",r=TR(e.template,n);super({inputVariables:r,...e});P(this,"lc_namespace",["langchain_core","prompts","dict"]);P(this,"lc_serializable",!0);P(this,"template");P(this,"templateFormat");P(this,"inputVariables");this.template=e.template,this.templateFormat=n,this.inputVariables=r}static lc_name(){return"DictPromptTemplate"}async format(e){return CR(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}};function TR(t,e){const n=[];for(const r of Object.values(t))if(typeof r=="string")ME(r,e).forEach(i=>{i.type==="variable"&&n.push(i.name)});else if(Array.isArray(r))for(const i of r)typeof i=="string"?ME(i,e).forEach(a=>{a.type==="variable"&&n.push(a.name)}):typeof i=="object"&&n.push(...TR(i,e));else typeof r=="object"&&r!==null&&n.push(...TR(r,e));return Array.from(new Set(n))}function CR(t,e,n){const r={};for(const[i,a]of Object.entries(t))if(typeof a=="string")r[i]=hl(a,n,e);else if(Array.isArray(a)){const s=[];for(const o of a)typeof o=="string"?s.push(hl(o,n,e)):typeof o=="object"&&s.push(CR(o,e,n));r[i]=s}else typeof a=="object"&&a!==null?r[i]=CR(a,e,n):r[i]=a;return r}var pk=class extends fn{constructor(){super(...arguments);P(this,"lc_namespace",["langchain_core","prompts","chat"]);P(this,"lc_serializable",!0)}async invoke(e,n){return this._callWithConfig(r=>this.formatMessages(r),e,{...n,runType:"prompt"})}},PR=class extends pk{constructor(e){typeof e=="string"&&(e={variableName:e});super(e);P(this,"variableName");P(this,"optional");this.variableName=e.variableName,this.optional=e.optional??!1}static lc_name(){return"MessagesPlaceholder"}get inputVariables(){return[this.variableName]}async formatMessages(e){const n=e[this.variableName];if(this.optional&&!n)return[];if(!n){const i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let r;try{Array.isArray(n)?r=n.map(pc):r=[pc(n)]}catch(i){const a=typeof n=="string"?n:JSON.stringify(n,null,2),s=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${a}`,`Additional message: ${i.message}`].join(`

`));throw s.name="InputFormatError",s.lc_error_code=i.lc_error_code,s}return r}},lre=class extends pk{constructor(e){"prompt"in e||(e={prompt:e});super(e);P(this,"prompt");this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},ZM=class extends t_{constructor(t){super(t)}async format(t){return(await this.formatPromptValue(t)).toString()}async formatPromptValue(t){const e=await this.formatMessages(t);return new $M(e)}},cre=class extends lre{constructor(e,n){"prompt"in e||(e={prompt:e,role:n});super(e);P(this,"role");this.role=e.role}static lc_name(){return"ChatMessagePromptTemplate"}async format(e){return new Dd(await this.prompt.format(e),this.role)}static fromTemplate(e,n,r){return new this(fd.fromTemplate(e,{templateFormat:r==null?void 0:r.templateFormat}),n)}};function Cje(t){return t===null||typeof t!="object"||Array.isArray(t)?!1:Object.keys(t).length===1&&"text"in t&&typeof t.text=="string"}function Pje(t){return t===null||typeof t!="object"||Array.isArray(t)?!1:"image_url"in t&&(typeof t.image_url=="string"||typeof t.image_url=="object"&&t.image_url!==null&&"url"in t.image_url&&typeof t.image_url.url=="string")}var XM=class extends pk{constructor(e,n){"prompt"in e||(e={prompt:e});super(e);P(this,"lc_namespace",["langchain_core","prompts","chat"]);P(this,"lc_serializable",!0);P(this,"inputVariables",[]);P(this,"additionalOptions",{});P(this,"prompt");P(this,"messageClass");P(this,"chatMessageClass");if(this.prompt=e.prompt,Array.isArray(this.prompt)){let r=[];this.prompt.forEach(i=>{"inputVariables"in i&&(r=r.concat(i.inputVariables))}),this.inputVariables=r}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=n??this.additionalOptions}static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}createMessage(e){const n=this.constructor;if(n._messageClass()){const r=n._messageClass();return new r({content:e})}else if(n.chatMessageClass){const r=n.chatMessageClass();return new r({content:e,role:this.getRoleFromMessageClass(r.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,n){if(typeof e=="string")return new this(fd.fromTemplate(e,n));const r=[];for(const i of e)if(typeof i=="string")r.push(fd.fromTemplate(i,n));else if(i!==null)if(Cje(i)){let a="";typeof i.text=="string"&&(a=i.text??"");const s={...n,additionalContentFields:i};r.push(fd.fromTemplate(a,s))}else if(Pje(i)){let a=i.image_url??"",s,o=[];if(typeof a=="string"){let l;(n==null?void 0:n.templateFormat)==="mustache"?l=jE(a):l=Ob(a);const c=l.flatMap(u=>u.type==="variable"?[u.name]:[]);if(((c==null?void 0:c.length)??0)>0){if(c.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${c}
From: ${a}`);o=[c[0]]}else o=[];a={url:a},s=new aS({template:a,inputVariables:o,templateFormat:n==null?void 0:n.templateFormat,additionalContentFields:i})}else if(typeof a=="object"){if("url"in a){let l;(n==null?void 0:n.templateFormat)==="mustache"?l=jE(a.url):l=Ob(a.url),o=l.flatMap(c=>c.type==="variable"?[c.name]:[])}else o=[];s=new aS({template:a,inputVariables:o,templateFormat:n==null?void 0:n.templateFormat,additionalContentFields:i})}else throw new Error("Invalid image template");r.push(s)}else typeof i=="object"&&r.push(new OR({template:i,templateFormat:n==null?void 0:n.templateFormat}));return new this({prompt:r,additionalOptions:n})}async format(e){if(this.prompt instanceof Ab){const n=await this.prompt.format(e);return this.createMessage(n)}else{const n=[];for(const r of this.prompt){let i={};if(!("inputVariables"in r))throw new Error(`Prompt ${r} does not have inputVariables defined.`);for(const a of r.inputVariables)i||(i={[a]:e[a]}),i={...i,[a]:e[a]};if(r instanceof Ab){const a=await r.format(i);let s;"additionalContentFields"in r&&(s=r.additionalContentFields),a!==""&&n.push({...s,type:"text",text:a})}else if(r instanceof aS){const a=await r.format(i);let s;"additionalContentFields"in r&&(s=r.additionalContentFields),n.push({...s,type:"image_url",image_url:a})}else if(r instanceof OR){const a=await r.format(i);let s;"additionalContentFields"in r&&(s=r.additionalContentFields),n.push({...s,...a})}}return this.createMessage(n)}}async formatMessages(e){return[await this.format(e)]}},JM=class extends XM{static _messageClass(){return Ma}static lc_name(){return"HumanMessagePromptTemplate"}},ure=class extends XM{static _messageClass(){return Ei}static lc_name(){return"AIMessagePromptTemplate"}},fre=class extends XM{static _messageClass(){return Al}static lc_name(){return"SystemMessagePromptTemplate"}};function Nje(t){return typeof t.formatMessages=="function"}function Ije(t,e){if(Nje(t)||Jr(t))return t;if(Array.isArray(t)&&t[0]==="placeholder"){const i=t[1];if((e==null?void 0:e.templateFormat)==="mustache"&&typeof i=="string"&&i.slice(0,2)==="{{"&&i.slice(-2)==="}}"){const a=i.slice(2,-2);return new PR({variableName:a,optional:!0})}else if(typeof i=="string"&&i[0]==="{"&&i[i.length-1]==="}"){const a=i.slice(1,-1);return new PR({variableName:a,optional:!0})}throw new Error(`Invalid placeholder template for format ${(e==null?void 0:e.templateFormat)??'"f-string"'}: "${t[1]}". Expected a variable name surrounded by ${(e==null?void 0:e.templateFormat)==="mustache"?"double":"single"} curly braces.`)}const n=pc(t);let r;if(typeof n.content=="string"?r=n.content:r=n.content.map(i=>"text"in i?{...i,text:i.text}:"image_url"in i?{...i,image_url:i.image_url}:i),n._getType()==="human")return JM.fromTemplate(r,e);if(n._getType()==="ai")return ure.fromTemplate(r,e);if(n._getType()==="system")return fre.fromTemplate(r,e);if(Dd.isInstance(n))return cre.fromTemplate(n.content,n.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${n._getType()}".`)}function Rje(t){return t.constructor.lc_name()==="MessagesPlaceholder"}var QM=class sS extends ZM{constructor(n){super(n);P(this,"promptMessages");P(this,"validateTemplate",!0);P(this,"templateFormat","f-string");if(n.templateFormat==="mustache"&&n.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,n),this.validateTemplate){const r=new Set;for(const l of this.promptMessages)if(!(l instanceof _o))for(const c of l.inputVariables)r.add(c);const i=this.inputVariables,a=new Set(this.partialVariables?i.concat(Object.keys(this.partialVariables)):i),s=new Set([...a].filter(l=>!r.has(l)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const o=new Set([...r].filter(l=>!a.has(l)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are used in prompt messages but not in the prompt template.`)}}static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}_getPromptType(){return"chat"}async _parseImagePrompts(n,r){if(typeof n.content=="string")return n;const i=await Promise.all(n.content.map(async a=>{if(a.type!=="image_url")return a;let s="";typeof a.image_url=="string"?s=a.image_url:typeof a.image_url=="object"&&a.image_url!==null&&"url"in a.image_url&&typeof a.image_url.url=="string"&&(s=a.image_url.url);const l=await fd.fromTemplate(s,{templateFormat:this.templateFormat}).format(r);return typeof a.image_url=="object"&&a.image_url!==null&&"url"in a.image_url?a.image_url.url=l:a.image_url=l,a}));return n.content=i,n}async formatMessages(n){const r=await this.mergePartialAndUserVariables(n);let i=[];for(const a of this.promptMessages)if(a instanceof _o)i.push(await this._parseImagePrompts(a,r));else{let s;this.templateFormat==="mustache"?s={...r}:s=a.inputVariables.reduce((l,c)=>{if(!(c in r)&&!(Rje(a)&&a.optional))throw V1(new Error(`Missing value for input variable \`${c.toString()}\``),"INVALID_PROMPT_INPUT");return l[c]=r[c],l},{});const o=await a.formatMessages(s);i=i.concat(o)}return i}async partial(n){const r=this.inputVariables.filter(s=>!(s in n)),i={...this.partialVariables??{},...n},a={...this,inputVariables:r,partialVariables:i};return new sS(a)}static fromTemplate(n,r){const i=fd.fromTemplate(n,r),a=new JM({prompt:i});return this.fromMessages([a])}static fromMessages(n,r){const i=n.reduce((o,l)=>o.concat(l instanceof sS?l.promptMessages:[Ije(l,r)]),[]),a=n.reduce((o,l)=>l instanceof sS?Object.assign(o,l.partialVariables):o,Object.create(null)),s=new Set;for(const o of i)if(!(o instanceof _o))for(const l of o.inputVariables)l in a||s.add(l);return new this({...r,inputVariables:[...s],promptMessages:i,partialVariables:a,templateFormat:r==null?void 0:r.templateFormat})}},jje=class NR extends Ab{constructor(n){super(n);P(this,"lc_serializable",!1);P(this,"examples");P(this,"exampleSelector");P(this,"examplePrompt");P(this,"suffix","");P(this,"exampleSeparator",`

`);P(this,"prefix","");P(this,"templateFormat","f-string");P(this,"validateTemplate",!0);if(Object.assign(this,n),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),r_(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(n){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(n);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(n){const r=this.inputVariables.filter(s=>!(s in n)),i={...this.partialVariables??{},...n},a={...this,inputVariables:r,partialVariables:i};return new NR(a)}async format(n){const r=await this.mergePartialAndUserVariables(n),i=await this.getExamples(r),a=await Promise.all(i.map(o=>this.examplePrompt.format(o))),s=[this.prefix,...a,this.suffix].join(this.exampleSeparator);return hl(s,this.templateFormat,r)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(n){const{example_prompt:r}=n;if(!r)throw new Error("Missing example prompt");const i=await fd.deserialize(r);let a;if(Array.isArray(n.examples))a=n.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new NR({inputVariables:n.input_variables,examplePrompt:i,examples:a,exampleSeparator:n.example_separator,prefix:n.prefix,suffix:n.suffix,templateFormat:n.template_format})}},$je=class dre extends ZM{constructor(n){super(n);P(this,"lc_serializable",!0);P(this,"examples");P(this,"exampleSelector");P(this,"examplePrompt");P(this,"suffix","");P(this,"exampleSeparator",`

`);P(this,"prefix","");P(this,"templateFormat","f-string");P(this,"validateTemplate",!0);if(this.examples=n.examples,this.examplePrompt=n.examplePrompt,this.exampleSeparator=n.exampleSeparator??`

`,this.exampleSelector=n.exampleSelector,this.prefix=n.prefix??"",this.suffix=n.suffix??"",this.templateFormat=n.templateFormat??"f-string",this.validateTemplate=n.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let r=this.inputVariables;this.partialVariables&&(r=r.concat(Object.keys(this.partialVariables))),r_(this.prefix+this.suffix,this.templateFormat,r)}}_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}async getExamples(n){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(n);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(n){const r=await this.mergePartialAndUserVariables(n);let i=await this.getExamples(r);i=i.map(s=>{const o={};return this.examplePrompt.inputVariables.forEach(l=>{o[l]=s[l]}),o});const a=[];for(const s of i){const o=await this.examplePrompt.formatMessages(s);a.push(...o)}return a}async format(n){const r=await this.mergePartialAndUserVariables(n),i=await this.getExamples(r),s=(await Promise.all(i.map(l=>this.examplePrompt.formatMessages(l)))).flat().map(l=>l.content),o=[this.prefix,...s,this.suffix].join(this.exampleSeparator);return hl(o,this.templateFormat,r)}async partial(n){const r=this.inputVariables.filter(s=>!(s in n)),i={...this.partialVariables??{},...n},a={...this,inputVariables:r,partialVariables:i};return new dre(a)}},Mje=class oS extends t_{constructor(n){super({...n,inputVariables:[]});P(this,"pipelinePrompts");P(this,"finalPrompt");this.pipelinePrompts=n.pipelinePrompts,this.finalPrompt=n.finalPrompt,this.inputVariables=this.computeInputValues()}static lc_name(){return"PipelinePromptTemplate"}computeInputValues(){const n=this.pipelinePrompts.map(i=>i.name),r=this.pipelinePrompts.map(i=>i.prompt.inputVariables.filter(a=>!n.includes(a))).flat();return[...new Set(r)]}static extractRequiredInputValues(n,r){return r.reduce((i,a)=>(i[a]=n[a],i),{})}async formatPipelinePrompts(n){const r=await this.mergePartialAndUserVariables(n);for(const{name:i,prompt:a}of this.pipelinePrompts){const s=oS.extractRequiredInputValues(r,a.inputVariables);a instanceof QM?r[i]=await a.formatMessages(s):r[i]=await a.format(s)}return oS.extractRequiredInputValues(r,this.finalPrompt.inputVariables)}async formatPromptValue(n){return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(n))}async format(n){return this.finalPrompt.format(await this.formatPipelinePrompts(n))}async partial(n){const r={...this};return r.inputVariables=this.inputVariables.filter(i=>!(i in n)),r.partialVariables={...this.partialVariables??{},...n},new oS(r)}serialize(){throw new Error("Not implemented.")}_getPromptType(){return"pipeline"}};function WU(t){return typeof t=="object"&&t!=null&&"withStructuredOutput"in t&&typeof t.withStructuredOutput=="function"}function Lje(t){return typeof t=="object"&&t!=null&&"lc_id"in t&&Array.isArray(t.lc_id)&&t.lc_id.join("/")==="langchain_core/runnables/RunnableBinding"}var Dje=class hre extends QM{constructor(n){super(n);P(this,"schema");P(this,"method");P(this,"lc_namespace",["langchain_core","prompts","structured"]);this.schema=n.schema,this.method=n.method}get lc_aliases(){return{...super.lc_aliases,schema:"schema_"}}pipe(n){if(WU(n))return super.pipe(n.withStructuredOutput(this.schema));if(Lje(n)&&WU(n.bound))return super.pipe(new kd({bound:n.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:n.kwargs??{},config:n.config,configFactories:n.configFactories}));throw new Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(n,r,i){return hre.fromMessages(n,{schema:r,method:i})}},pre={};At(pre,{AIMessagePromptTemplate:()=>ure,BaseChatPromptTemplate:()=>ZM,BaseMessagePromptTemplate:()=>pk,BaseMessageStringPromptTemplate:()=>lre,BasePromptTemplate:()=>t_,BaseStringPromptTemplate:()=>Ab,ChatMessagePromptTemplate:()=>cre,ChatPromptTemplate:()=>QM,DEFAULT_FORMATTER_MAPPING:()=>$E,DEFAULT_PARSER_MAPPING:()=>sre,DictPromptTemplate:()=>OR,FewShotChatMessagePromptTemplate:()=>$je,FewShotPromptTemplate:()=>jje,HumanMessagePromptTemplate:()=>JM,ImagePromptTemplate:()=>aS,MessagesPlaceholder:()=>PR,PipelinePromptTemplate:()=>Mje,PromptTemplate:()=>fd,StructuredPrompt:()=>Dje,SystemMessagePromptTemplate:()=>fre,checkValidTemplate:()=>r_,interpolateFString:()=>ire,interpolateMustache:()=>are,parseFString:()=>Ob,parseMustache:()=>jE,parseTemplate:()=>ME,renderTemplate:()=>hl});var mre={};At(mre,{BaseDocumentCompressor:()=>Fje});var Fje=class{static isBaseDocumentCompressor(t){return(t==null?void 0:t.compressDocuments)!==void 0}};const Kf={and:"and",or:"or",not:"not"},un={eq:"eq",ne:"ne",lt:"lt",gt:"gt",lte:"lte",gte:"gte"};var gre=class{},eL=class{accept(t){if(this.exprName==="Operation")return t.visitOperation(this);if(this.exprName==="Comparison")return t.visitComparison(this);if(this.exprName==="StructuredQuery")return t.visitStructuredQuery(this);throw new Error("Unknown Expression type")}},tL=class extends eL{},Bje=class extends tL{constructor(e,n,r){super();P(this,"exprName","Comparison");this.comparator=e,this.attribute=n,this.value=r}},Uje=class extends tL{constructor(e,n){super();P(this,"exprName","Operation");this.operator=e,this.args=n}},zje=class extends eL{constructor(e,n){super();P(this,"exprName","StructuredQuery");this.query=e,this.filter=n}};function yre(t){return t&&typeof t=="object"&&!Array.isArray(t)}function ul(t){return t?typeof t=="string"&&t.length>0||typeof t=="function"?!1:yre(t)&&Object.keys(t).length===0:!0}function vre(t){if(typeof t=="number")return t%1===0;if(typeof t=="string"){const e=parseInt(t,10);return!Number.isNaN(e)&&e%1===0&&e.toString()===t}return!1}function wre(t){if(typeof t=="number")return t%1!==0;if(typeof t=="string"){const e=parseFloat(t);return!Number.isNaN(e)&&e%1!==0&&e.toString()===t}return!1}function bre(t){return typeof t=="string"&&(Number.isNaN(parseFloat(t))||parseFloat(t).toString()!==t)}function _re(t){return typeof t=="boolean"}function nL(t){let e;if(bre(t))e=t;else if(vre(t))e=parseInt(t,10);else if(wre(t))e=parseFloat(t);else if(_re(t))e=!!t;else throw new Error("Unsupported value type");return e}var rL=class extends gre{},Vje=class extends rL{constructor(e){super();P(this,"allowedOperators");P(this,"allowedComparators");this.allowedOperators=(e==null?void 0:e.allowedOperators)??[Kf.and,Kf.or],this.allowedComparators=(e==null?void 0:e.allowedComparators)??[un.eq,un.ne,un.gt,un.gte,un.lt,un.lte]}formatFunction(e){if(e in un){if(this.allowedComparators.length>0&&this.allowedComparators.indexOf(e)===-1)throw new Error(`Comparator ${e} not allowed. Allowed comparators: ${this.allowedComparators.join(", ")}`)}else if(e in Kf){if(this.allowedOperators.length>0&&this.allowedOperators.indexOf(e)===-1)throw new Error(`Operator ${e} not allowed. Allowed operators: ${this.allowedOperators.join(", ")}`)}else throw new Error("Unknown comparator or operator");return`$${e}`}visitOperation(e){var r;const n=(r=e.args)==null?void 0:r.map(i=>i.accept(this));return{[this.formatFunction(e.operator)]:n}}visitComparison(e){return{[e.attribute]:{[this.formatFunction(e.comparator)]:nL(e.value)}}}visitStructuredQuery(e){let n={};return e.filter&&(n={filter:e.filter.accept(this)}),n}mergeFilters(e,n,r="and",i=!1){if(!(ul(e)&&ul(n))){if(ul(e)||r==="replace")return ul(n)?void 0:n;if(ul(n))return i?e:r==="and"?void 0:e;if(r==="and")return{$and:[e,n]};if(r==="or")return{$or:[e,n]};throw new Error("Unknown merge type")}}},Wje=class extends rL{constructor(){super(...arguments);P(this,"allowedOperators",[Kf.and,Kf.or]);P(this,"allowedComparators",[un.eq,un.ne,un.gt,un.gte,un.lt,un.lte])}formatFunction(){throw new Error("Not implemented")}getAllowedComparatorsForType(e){switch(e){case"string":return[un.eq,un.ne,un.gt,un.gte,un.lt,un.lte];case"number":return[un.eq,un.ne,un.gt,un.gte,un.lt,un.lte];case"boolean":return[un.eq,un.ne];default:throw new Error(`Unsupported data type: ${e}`)}}getComparatorFunction(e){switch(e){case un.eq:return(n,r)=>n===r;case un.ne:return(n,r)=>n!==r;case un.gt:return(n,r)=>n>r;case un.gte:return(n,r)=>n>=r;case un.lt:return(n,r)=>n<r;case un.lte:return(n,r)=>n<=r;default:throw new Error("Unknown comparator")}}getOperatorFunction(e){switch(e){case Kf.and:return(n,r)=>n&&r;case Kf.or:return(n,r)=>n||r;default:throw new Error("Unknown operator")}}visitOperation(e){const{operator:n,args:r}=e;if(this.allowedOperators.includes(n)){const i=this.getOperatorFunction(n);return a=>r?r.reduce((s,o)=>{const l=o.accept(this);if(typeof l=="function")return i(s,l(a));throw new Error("Filter is not a function")},!0):!0}else throw new Error("Operator not allowed")}visitComparison(e){const{comparator:n,attribute:r,value:i}=e,a=[un.ne];if(this.allowedComparators.includes(n)){if(!this.getAllowedComparatorsForType(typeof i).includes(n))throw new Error(`'${n}' comparator not allowed to be used with ${typeof i}`);const s=this.getComparatorFunction(n);return o=>{const l=o.metadata[r];return l===void 0?!!a.includes(n):s(l,nL(i))}}else throw new Error("Comparator not allowed")}visitStructuredQuery(e){var r;if(!e.filter)return{};const n=(r=e.filter)==null?void 0:r.accept(this);if(typeof n!="function")throw new Error("Structured query filter is not a function");return{filter:n}}mergeFilters(e,n,r="and"){if(!(ul(e)&&ul(n))){if(ul(e)||r==="replace")return ul(n)?void 0:n;if(ul(n))return r==="and"?void 0:e;if(r==="and")return i=>e(i)&&n(i);if(r==="or")return i=>e(i)||n(i);throw new Error("Unknown merge type")}}},xre={};At(xre,{BaseTranslator:()=>rL,BasicTranslator:()=>Vje,Comparators:()=>un,Comparison:()=>Bje,Expression:()=>eL,FilterDirective:()=>tL,FunctionalTranslator:()=>Wje,Operation:()=>Uje,Operators:()=>Kf,StructuredQuery:()=>zje,Visitor:()=>gre,castValue:()=>nL,isBoolean:()=>_re,isFilterEmpty:()=>ul,isFloat:()=>wre,isInt:()=>vre,isObject:()=>yre,isString:()=>bre});const Hje=(t,e)=>{pQ.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>AEe(t,n)},flatten:{value:n=>EEe(t,n)},addIssue:{value:n=>t.issues.push(n)},addIssues:{value:n=>t.issues.push(...n)},isEmpty:{get(){return t.issues.length===0}}})},mk=nn("ZodError",Hje,{Parent:Error}),qje=mQ(mk),Gje=gQ(mk),Kje=vQ(mk),Yje=wQ(mk),is=nn("ZodType",(t,e)=>(ea.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(n,r)=>mo(t,n,r),t.brand=()=>t,t.register=(n,r)=>(n.add(t,r),t),t.parse=(n,r)=>qje(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>Kje(t,n,r),t.parseAsync=async(n,r)=>Gje(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>Yje(t,n,r),t.spa=t.safeParseAsync,t.refine=(n,r)=>t.check(w4e(n,r)),t.superRefine=n=>t.check(b4e(n)),t.overwrite=n=>t.check(nAe(n)),t.optional=()=>HU(t),t.nullable=()=>qU(t),t.nullish=()=>HU(qU(t)),t.nonoptional=n=>d4e(t,n),t.array=()=>Jje(t),t.or=n=>e4e([t,n]),t.and=n=>n4e(t,n),t.transform=n=>GU(t,i4e(n)),t.default=n=>l4e(t,n),t.prefault=n=>u4e(t,n),t.catch=n=>p4e(t,n),t.pipe=n=>GU(t,n),t.readonly=()=>y4e(t),t.describe=n=>{const r=t.clone();return Ii.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=Ii.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Ii.get(t);const r=t.clone();return Ii.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Zje=nn("ZodAny",(t,e)=>{$Ee.init(t,e),is.init(t,e)});function Qx(){return XEe(Zje)}const Xje=nn("ZodArray",(t,e)=>{DEe.init(t,e),is.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(LB(n,r)),t.nonempty=n=>t.check(LB(1,n)),t.max=(n,r)=>t.check(eAe(n,r)),t.length=(n,r)=>t.check(tAe(n,r)),t.unwrap=()=>t.element});function Jje(t,e){return rAe(Xje,t,e)}const Qje=nn("ZodUnion",(t,e)=>{FEe.init(t,e),is.init(t,e),t.options=e.options});function e4e(t,e){return new Qje({type:"union",options:t,...Ku(e)})}const t4e=nn("ZodIntersection",(t,e)=>{BEe.init(t,e),is.init(t,e)});function n4e(t,e){return new t4e({type:"intersection",left:t,right:e})}const r4e=nn("ZodTransform",(t,e)=>{UEe.init(t,e),is.init(t,e),t._zod.parse=(n,r)=>{n.addIssue=a=>{if(typeof a=="string")n.issues.push(ub(a,n.value,e));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!0),n.issues.push(ub(s))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(a=>(n.value=a,n)):(n.value=i,n)}});function i4e(t){return new r4e({type:"transform",transform:t})}const a4e=nn("ZodOptional",(t,e)=>{X$.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function HU(t){return new a4e({type:"optional",innerType:t})}const s4e=nn("ZodNullable",(t,e)=>{zEe.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function qU(t){return new s4e({type:"nullable",innerType:t})}const o4e=nn("ZodDefault",(t,e)=>{VEe.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function l4e(t,e){return new o4e({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const c4e=nn("ZodPrefault",(t,e)=>{WEe.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function u4e(t,e){return new c4e({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const f4e=nn("ZodNonOptional",(t,e)=>{HEe.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function d4e(t,e){return new f4e({type:"nonoptional",innerType:t,...Ku(e)})}const h4e=nn("ZodCatch",(t,e)=>{qEe.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function p4e(t,e){return new h4e({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const m4e=nn("ZodPipe",(t,e)=>{GEe.init(t,e),is.init(t,e),t.in=e.in,t.out=e.out});function GU(t,e){return new m4e({type:"pipe",in:t,out:e})}const g4e=nn("ZodReadonly",(t,e)=>{KEe.init(t,e),is.init(t,e)});function y4e(t){return new g4e({type:"readonly",innerType:t})}const Sre=nn("ZodCustom",(t,e)=>{YEe.init(t,e),is.init(t,e)});function v4e(t){const e=new ov({check:"custom"});return e._zod.check=t,e}function Ere(t,e){return iAe(Sre,()=>!0,e)}function w4e(t,e={}){return aAe(Sre,t,e)}function b4e(t){const e=v4e(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(ub(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(ub(i))}},t(n.value,n)));return e}var Are={};At(Are,{BaseToolkit:()=>_4e,DynamicStructuredTool:()=>Tre,DynamicTool:()=>Ore,StructuredTool:()=>gk,Tool:()=>kre,ToolInputParsingException:()=>SE,isLangChainTool:()=>K1,isRunnableToolLike:()=>IM,isStructuredTool:()=>NM,isStructuredToolParams:()=>RM,tool:()=>yk});var gk=class extends FM{constructor(e){super(e??{});P(this,"extras");P(this,"returnDirect",!1);P(this,"verboseParsingErrors",!1);P(this,"responseFormat","content");P(this,"defaultConfig");this.verboseParsingErrors=(e==null?void 0:e.verboseParsingErrors)??this.verboseParsingErrors,this.responseFormat=(e==null?void 0:e.responseFormat)??this.responseFormat,this.defaultConfig=(e==null?void 0:e.defaultConfig)??this.defaultConfig,this.metadata=(e==null?void 0:e.metadata)??this.metadata,this.extras=(e==null?void 0:e.extras)??this.extras}get lc_namespace(){return["langchain","tools"]}async invoke(e,n){let r,i=yn(go(this.defaultConfig,n));return gw(e)?(r=e.args,i={...i,toolCall:e}):r=e,this.call(r,i)}async call(e,n,r){const i=gw(e)?e.args:e;let a;if($d(this.schema))try{a=await Y5(this.schema,i)}catch(p){let m="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(m=`${m}
Details: ${p.message}`),TQ(p)&&(m=`${m}

${OEe(p)}`),new SE(m,JSON.stringify(e))}else{const p=dr(i,this.schema);if(!p.valid){let m="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(m=`${m}
Details: ${p.errors.map(y=>`${y.keywordLocation}: ${y.error}`).join(`
`)}`),new SE(m,JSON.stringify(e))}a=i}const s=H1(n),o=ja.configure(s.callbacks,this.callbacks,s.tags||r,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l=await(o==null?void 0:o.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),s.runId,void 0,void 0,void 0,s.runName));delete s.runId;let c;try{c=await this._call(a,l,s)}catch(p){throw await(l==null?void 0:l.handleToolError(p)),p}let u,f;if(this.responseFormat==="content_and_artifact")if(Array.isArray(c)&&c.length===2)[u,f]=c;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(c)}`);else u=c;let d;gw(e)&&(d=e.id),!d&&Kke(s)&&(d=s.toolCall.id);const h=x4e({content:u,artifact:f,toolCallId:d,name:this.name,metadata:this.metadata});return await(l==null?void 0:l.handleToolEnd(h)),h}},kre=class extends gk{constructor(e){super(e);P(this,"schema",Md({input:Vp().optional()}).transform(e=>e.input))}call(e,n){const r=typeof e=="string"||e==null?{input:e}:e;return super.call(r,n)}},Ore=class extends kre{constructor(e){super(e);P(this,"name");P(this,"description");P(this,"func");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}static lc_name(){return"DynamicTool"}async call(e,n){const r=H1(n);return r.runName===void 0&&(r.runName=this.name),super.call(e,r)}async _call(e,n,r){return this.func(e,n,r)}},Tre=class extends gk{constructor(e){super(e);P(this,"description");P(this,"func");P(this,"schema");this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}static lc_name(){return"DynamicStructuredTool"}async call(e,n,r){const i=H1(n);return i.runName===void 0&&(i.runName=this.name),super.call(e,i,r)}_call(e,n,r){return this.func(e,n,r)}},_4e=class{getTools(){return this.tools}};function yk(t,e){var s;const n=Q$(e.schema),r=mw(e.schema);if(!e.schema||n||r)return new Ore({...e,description:e.description??((s=e.schema)==null?void 0:s.description)??`${e.name} tool`,func:async(o,l,c)=>new Promise((u,f)=>{const d=kn(c,{callbacks:l==null?void 0:l.getChild()});ji.runWithConfig(ju(d),async()=>{try{u(t(o,d))}catch(h){f(h)}})})});const i=e.schema,a=e.description??e.schema.description??`${e.name} tool`;return new Tre({...e,description:a,schema:i,func:async(o,l,c)=>new Promise((u,f)=>{let d;const h=()=>{c!=null&&c.signal&&d&&c.signal.removeEventListener("abort",d)};c!=null&&c.signal&&(d=()=>{h(),f(wb(c.signal))},c.signal.addEventListener("abort",d,{once:!0}));const p=kn(c,{callbacks:l==null?void 0:l.getChild()});ji.runWithConfig(ju(p),async()=>{var m;try{const y=await t(o,p);if((m=c==null?void 0:c.signal)!=null&&m.aborted){h();return}h(),u(y)}catch(y){h(),f(y)}})})})}function x4e(t){const{content:e,artifact:n,toolCallId:r,metadata:i}=t;return r&&!cM(e)?typeof e=="string"||Array.isArray(e)&&e.every(a=>typeof a=="object")?new _c({status:"success",content:e,artifact:n,tool_call_id:r,name:t.name,metadata:i}):new _c({status:"success",content:S4e(e),artifact:n,tool_call_id:r,name:t.name,metadata:i}):e}function S4e(t){try{return JSON.stringify(t)??""}catch{return`${t}`}}var Cre={};At(Cre,{RunCollectorCallbackHandler:()=>E4e});var E4e=class extends Yu{constructor({exampleId:e}={}){super({_awaitHandler:!0});P(this,"name","run_collector");P(this,"exampleId");P(this,"tracedRuns");this.exampleId=e,this.tracedRuns=[]}async persistRun(e){const n={...e};n.reference_example_id=this.exampleId,this.tracedRuns.push(n)}},A4e={},Pre={};At(Pre,{context:()=>k4e});function k4e(t,...e){const n=t.raw;let r="";for(let i=0;i<n.length;i++){const a=n[i].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{");if(r+=a,i<e.length){const s=O4e(e[i],r);r+=typeof s=="string"?s:JSON.stringify(s)}}return r=T4e(r),r=r.trim(),r=r.replace(/\\n/g,`
`),r}function O4e(t,e){if(typeof t!="string"||!t.includes(`
`))return t;const r=e.slice(e.lastIndexOf(`
`)+1).match(/^(\s+)/);if(r){const i=r[1];return t.replace(/\n/g,`
${i}`)}return t}function T4e(t){const e=t.split(`
`);let n=null;for(const r of e){const i=r.match(/^(\s+)\S+/);if(i){const a=i[1].length;n===null?n=a:n=Math.min(n,a)}}return n===null?t:e.map(r=>r[0]===" "||r[0]==="	"?r.slice(n):r).join(`
`)}var Nre={};At(Nre,{EventStreamContentType:()=>C4e,convertEventStreamToIterableReadableDataStream:()=>N4e,getBytes:()=>Ire,getLines:()=>Rre,getMessages:()=>jre});const C4e="text/event-stream";async function Ire(t,e){if(t instanceof ReadableStream){const n=t.getReader();for(;;){const r=await n.read();if(r.done){e(new Uint8Array,!0);break}e(r.value)}}else try{for await(const n of t)e(new Uint8Array(n));e(new Uint8Array,!0)}catch(n){throw new Error(["Parsing event source stream failed.","Ensure your implementation of fetch returns a web or Node readable stream.",`Error: ${n.message}`].join(`
`))}}var hg=function(t){return t[t.NewLine=10]="NewLine",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Colon=58]="Colon",t}(hg||{});function Rre(t){let e,n,r,i=!1;return function(s,o){if(o){t(s,0,!0);return}e===void 0?(e=s,n=0,r=-1):e=P4e(e,s);const l=e.length;let c=0;for(;n<l;){i&&(e[n]===hg.NewLine&&(c=++n),i=!1);let u=-1;for(;n<l&&u===-1;++n)switch(e[n]){case hg.Colon:r===-1&&(r=n-c);break;case hg.CarriageReturn:i=!0;case hg.NewLine:u=n;break}if(u===-1)break;t(e.subarray(c,u),r),c=n,r=-1}c===l?e=void 0:c!==0&&(e=e.subarray(c),n-=c)}}function jre(t,e,n){let r=WC();const i=new TextDecoder;return function(s,o,l){if(l){I4e(r)||(t==null||t(r),r=WC());return}if(s.length===0)t==null||t(r),r=WC();else if(o>0){const c=i.decode(s.subarray(0,o)),u=o+(s[o+1]===hg.Space?2:1),f=i.decode(s.subarray(u));switch(c){case"data":r.data=r.data?r.data+`
`+f:f;break;case"event":r.event=f;break;case"id":e==null||e(r.id=f);break;case"retry":{const d=parseInt(f,10);Number.isNaN(d)||n==null||n(r.retry=d);break}}}}}function P4e(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function WC(){return{data:"",event:"",id:"",retry:void 0}}function N4e(t,e){const n=new ReadableStream({async start(r){const i=jre(s=>{if(s.event==="error")throw new Error(s.data??"Unspecified event streaming error.");s.event==="metadata"?e==null||e(s):s.data&&r.enqueue(s.data)});await Ire(t,Rre((s,o,l)=>{i(s,o,l),l&&r.close()}))}});return ns.fromReadableStream(n)}function I4e(t){return t.data===""&&t.event===""&&t.id===""&&t.retry===void 0}var R4e={};function $re(t,e){let n=0,r=0,i=0;for(let a=0;a<t.length;a++)n+=t[a]*e[a],r+=t[a]*t[a],i+=e[a]*e[a];return n/(Math.sqrt(r)*Math.sqrt(i))}function j4e(t,e){let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];return n}function $4e(t,e){let n=0;for(let r=0;r<t.length;r++)n+=(t[r]-e[r])*(t[r]-e[r]);return n}function M4e(t,e){return Math.sqrt($4e(t,e))}var Mre={};At(Mre,{cosineSimilarity:()=>IR,euclideanDistance:()=>F4e,innerProduct:()=>D4e,matrixFunc:()=>vk,maximalMarginalRelevance:()=>B4e,normalize:()=>L4e});function vk(t,e,n){if(t.length===0||t[0].length===0||e.length===0||e[0].length===0)return[[]];if(t[0].length!==e[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[t.length,t[0].length]} and Y has shape ${[e.length,e[0].length]}.`);return t.map(r=>e.map(i=>n(r,i)).map(i=>Number.isNaN(i)?0:i))}function L4e(t,e=!1){const n=U4e(t);return t.map(r=>r.map(i=>e?1-i/n:i/n))}function IR(t,e){return vk(t,e,$re)}function D4e(t,e){return vk(t,e,j4e)}function F4e(t,e){return vk(t,e,M4e)}function B4e(t,e,n=.5,r=4){if(Math.min(r,e.length)<=0)return[];const i=Array.isArray(t[0])?t:[t],a=IR(i,e)[0],s=Lre(a).maxIndex,o=[e[s]],l=[s];for(;l.length<Math.min(r,e.length);){let c=-1/0,u=-1;const f=IR(e,o);a.forEach((d,h)=>{if(l.includes(h))return;const p=Math.max(...f[h]),m=n*d-(1-n)*p;m>c&&(c=m,u=h)}),o.push(e[u]),l.push(u)}return l}function Lre(t){if(t.length===0)return{maxIndex:-1,maxValue:NaN};let e=t[0],n=0;for(let r=1;r<t.length;r+=1)t[r]>e&&(n=r,e=t[r]);return{maxIndex:n,maxValue:e}}function U4e(t){return t.reduce((e,n)=>Math.max(e,Lre(n).maxValue),0)}var Dre={};At(Dre,{isCloudMetadata:()=>RR,isLocalhost:()=>jR,isPrivateIp:()=>Vre,isSafeUrl:()=>Y4e,isSameOrigin:()=>Z4e,validateSafeUrl:()=>Wre});const z4e=["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","127.0.0.0/8","169.254.0.0/16","0.0.0.0/8","::1/128","fc00::/7","fe80::/10","ff00::/8"],V4e=["169.254.169.254","169.254.170.2","100.100.100.200"],W4e=["metadata.google.internal","metadata","instance-data"],H4e=["localhost","localhost.localdomain"],q4e=/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/;function Fre(t){return q4e.test(t)}function wk(t){return zre(t)!==null}function Bre(t){return Fre(t)||wk(t)}function Ure(t){if(Fre(t))return t.split(".").map(e=>parseInt(e,10));if(wk(t)){const e=zre(t);if(!e)return null;const n=e.split(":"),r=[];for(const i of n)r.push(parseInt(i,16));return r}return null}function zre(t){if(!t||typeof t!="string"||!t.includes(":")||!/^[0-9a-fA-F:]+$/.test(t))return null;let e=t;if(e.includes("::")){const r=e.split("::");if(r.length>2)return null;const[i,a]=r,s=i?i.split(":"):[],o=a?a.split(":"):[],l=8-(s.length+o.length);if(l<0)return null;const c=Array(l).fill("0");e=[...s,...c,...o].filter(u=>u!=="").join(":")}const n=e.split(":");if(n.length!==8)return null;for(const r of n)if(r.length===0||r.length>4||!/^[0-9a-fA-F]+$/.test(r))return null;return n.map(r=>r.padStart(4,"0").toLowerCase()).join(":")}function G4e(t){const[e,n]=t.split("/");if(!e||!n)return null;const r=Ure(e);if(!r)return null;const i=parseInt(n,10);if(isNaN(i))return null;const a=wk(e);return a&&i>128||!a&&i>32?null:{addr:r,prefixLen:i,isIpv6:a}}function K4e(t,e){const n=Ure(t);if(!n)return!1;const r=G4e(e);if(!r)return!1;const i=wk(t);if(i!==r.isIpv6)return!1;const{addr:a,prefixLen:s}=r;if(i)for(let o=0;o<Math.ceil(s/16);o++){const c=65535<<16-Math.min(16,s-o*16)&65535;if((n[o]&c)!==(a[o]&c))return!1}else for(let o=0;o<Math.ceil(s/8);o++){const c=255<<8-Math.min(8,s-o*8)&255;if((n[o]&c)!==(a[o]&c))return!1}return!0}function Vre(t){if(!Bre(t))return!1;for(const e of z4e)if(K4e(t,e))return!0;return!1}function RR(t,e){if(V4e.includes(e||""))return!0;const n=t.toLowerCase();return!!W4e.includes(n)}function jR(t,e){if(e&&(e==="127.0.0.1"||e==="::1"||e==="0.0.0.0"||e.startsWith("127.")))return!0;const n=t.toLowerCase();return!!H4e.includes(n)}function Wre(t,e){const n=(e==null?void 0:e.allowPrivate)??!1,r=(e==null?void 0:e.allowHttp)??!1;try{let i;try{i=new URL(t)}catch{throw new Error(`Invalid URL: ${t}`)}const a=i.hostname;if(!a)throw new Error("URL missing hostname.");if(RR(a))throw new Error(`URL points to cloud metadata endpoint: ${a}`);if(jR(a)){if(!n)throw new Error(`URL points to localhost: ${a}`);return t}const s=i.protocol;if(s!=="http:"&&s!=="https:")throw new Error(`Invalid URL scheme: ${s}. Only http and https are allowed.`);if(s==="http:"&&!r)throw new Error("HTTP scheme not allowed. Use HTTPS or set allowHttp: true.");if(Bre(a)){const o=a;if(jR(a,o)){if(!n)throw new Error(`URL points to localhost: ${a}`);return t}if(RR(a,o))throw new Error(`URL resolves to cloud metadata IP: ${o} (${a})`);if(Vre(o)&&!n)throw new Error(`URL resolves to private IP: ${o} (${a}). Set allowPrivate: true to allow.`);return t}return t}catch(i){throw i&&typeof i=="object"&&"message"in i?i:new Error(`URL validation failed: ${i}`)}}function Y4e(t,e){try{return Wre(t,e),!0}catch{return!1}}function Z4e(t,e){try{return new URL(t).origin===new URL(e).origin}catch{return!1}}var X4e=class extends dv{_combineLLMOutput(){return[]}_llmType(){return"fake"}async _generate(t,e,n){var i;if((i=e==null?void 0:e.stop)!=null&&i.length)return{generations:[{message:new Ei(e.stop[0]),text:e.stop[0]}]};const r=t.map(a=>typeof a.content=="string"?a.content:JSON.stringify(a.content,null,2)).join(`
`);return await(n==null?void 0:n.handleLLMNewToken(r)),{generations:[{message:new Ei(r),text:r}],llmOutput:{}}}},J4e=class Hre extends dv{constructor({sleep:n=50,responses:r=[],chunks:i=[],toolStyle:a="openai",thrownErrorString:s,...o}){super(o);P(this,"sleep",50);P(this,"responses",[]);P(this,"chunks",[]);P(this,"toolStyle","openai");P(this,"thrownErrorString");P(this,"tools",[]);this.sleep=n,this.responses=r,this.chunks=i,this.toolStyle=a,this.thrownErrorString=s}_llmType(){return"fake"}bindTools(n){const r=[...this.tools,...n],i=r.map(o=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:o.name,description:o.description,parameters:Oa(o.schema)}};case"anthropic":return{name:o.name,description:o.description,input_schema:Oa(o.schema)};case"bedrock":return{toolSpec:{name:o.name,description:o.description,inputSchema:Oa(o.schema)}};case"google":return{name:o.name,description:o.description,parameters:Oa(o.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),a=this.toolStyle==="google"?[{functionDeclarations:i}]:i,s=new Hre({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return s.tools=r,s.withConfig({tools:a})}async _generate(n,r,i){var o,l,c,u;if(this.thrownErrorString)throw new Error(this.thrownErrorString);const a=((l=(o=this.responses)==null?void 0:o[0])==null?void 0:l.content)??n[0].content??"";return{generations:[{text:"",message:new Ei({content:a,tool_calls:(u=(c=this.chunks)==null?void 0:c[0])==null?void 0:u.tool_calls})}]}}async*_streamResponseChunks(n,r,i){var o,l,c,u,f;if(this.thrownErrorString)throw new Error(this.thrownErrorString);if((o=this.chunks)!=null&&o.length){for(const d of this.chunks){const h=new Sp({message:new Oo({content:d.content,tool_calls:d.tool_calls,additional_kwargs:d.additional_kwargs??{}}),text:((l=d.content)==null?void 0:l.toString())??""});if((c=r.signal)!=null&&c.aborted)break;yield h,await(i==null?void 0:i.handleLLMNewToken(d.content,void 0,void 0,void 0,void 0,{chunk:h}))}return}const a=((u=this.responses)==null?void 0:u[0])??new Ei(typeof n[0].content=="string"?n[0].content:""),s=typeof a.content=="string"?a.content:"";for(const d of s){await new Promise(p=>setTimeout(p,this.sleep));const h=new Sp({message:new Oo({content:d}),text:d});if((f=r.signal)!=null&&f.aborted)break;yield h,await(i==null?void 0:i.handleLLMNewToken(d,void 0,void 0,void 0,void 0,{chunk:h}))}}},Q4e=class qre extends dv{constructor(n){super(n);P(this,"lc_serializable",!0);P(this,"responses");P(this,"i",0);P(this,"sleep");P(this,"emitCustomEvent",!1);P(this,"generationInfo");P(this,"tools",[]);P(this,"toolStyle","openai");const{responses:r,sleep:i,emitCustomEvent:a,generationInfo:s}=n;this.responses=r,this.sleep=i,this.emitCustomEvent=a??this.emitCustomEvent,this.generationInfo=s}static lc_name(){return"FakeListChatModel"}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}async _generate(n,r,i){var a;if(await this._sleepIfRequested(),r!=null&&r.thrownErrorString)throw new Error(r.thrownErrorString);if(this.emitCustomEvent&&await(i==null?void 0:i.handleCustomEvent("some_test_event",{someval:!0})),(a=r==null?void 0:r.stop)!=null&&a.length)return{generations:[this._formatGeneration(r.stop[0])]};{const s=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(s)],llmOutput:{}}}}_formatGeneration(n){return{message:new Ei(n),text:n}}async*_streamResponseChunks(n,r,i){var o;const a=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&await(i==null?void 0:i.handleCustomEvent("some_test_event",{someval:!0}));const s=[...a];for(let l=0;l<s.length;l++){const c=s[l],u=l===s.length-1;if(await this._sleepIfRequested(),r!=null&&r.thrownErrorString)throw new Error(r.thrownErrorString);const f=this._createResponseChunk(c,u?this.generationInfo:void 0);if((o=r.signal)!=null&&o.aborted)break;yield f,i==null||i.handleLLMNewToken(c)}}async _sleepIfRequested(){this.sleep!==void 0&&await this._sleep()}async _sleep(){return new Promise(n=>{setTimeout(()=>n(),this.sleep)})}_createResponseChunk(n,r){return new Sp({message:new Oo({content:n}),text:n,generationInfo:r})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}bindTools(n){const r=[...this.tools,...n],i=r.map(o=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:o.name,description:o.description,parameters:Oa(o.schema)}};case"anthropic":return{name:o.name,description:o.description,input_schema:Oa(o.schema)};case"bedrock":return{toolSpec:{name:o.name,description:o.description,inputSchema:Oa(o.schema)}};case"google":return{name:o.name,description:o.description,parameters:Oa(o.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),a=this.toolStyle==="google"?[{functionDeclarations:i}]:i,s=new qre({responses:this.responses,sleep:this.sleep,emitCustomEvent:this.emitCustomEvent,generationInfo:this.generationInfo});return s.tools=r,s.toolStyle=this.toolStyle,s.i=this.i,s.withConfig({tools:a})}withStructuredOutput(n,r){return Zu.from(async i=>{var s,o;const a=await this.invoke(i);if((o=(s=a.tool_calls)==null?void 0:s[0])!=null&&o.args)return a.tool_calls[0].args;if(typeof a.content=="string")return JSON.parse(a.content);throw new Error("No structured output found")})}},e3e=class extends VM{constructor(e){super(e??{});P(this,"vectorSize");this.vectorSize=(e==null?void 0:e.vectorSize)??4}async embedDocuments(e){return Promise.all(e.map(n=>this.embedQuery(n)))}async embedQuery(e){let n=e;n=n.toLowerCase().replaceAll(/[^a-z ]/g,"");const r=n.length%this.vectorSize,i=r===0?0:this.vectorSize-r,a=n.length+i;n=n.padEnd(a," ");const s=n.length/this.vectorSize,o=[];for(let c=0;c<n.length;c+=s)o.push(n.slice(c,c+s));return o.map(c=>{let u=0;for(let d=0;d<c.length;d+=1)u+=c===" "?0:c.charCodeAt(d);return u%26/26})}},t3e=class extends VM{constructor(t){super(t??{})}embedDocuments(t){return Promise.resolve(t.map(()=>[.1,.2,.3,.4]))}embedQuery(t){return Promise.resolve([.1,.2,.3,.4])}},n3e=class extends KM{constructor(e){super(e);P(this,"response");P(this,"thrownErrorString");this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}async _call(e,n,r){if(this.thrownErrorString)throw new Error(this.thrownErrorString);const i=this.response??e;return await(r==null?void 0:r.handleLLMNewToken(i)),i}},r3e=class extends KM{constructor(e){super(e);P(this,"sleep",50);P(this,"responses");P(this,"thrownErrorString");this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}async _call(e){var r,i;if(this.thrownErrorString)throw new Error(this.thrownErrorString);const n=(r=this.responses)==null?void 0:r[0];return this.responses=(i=this.responses)==null?void 0:i.slice(1),n??e}async*_streamResponseChunks(e,n,r){var a,s;if(this.thrownErrorString)throw new Error(this.thrownErrorString);const i=(a=this.responses)==null?void 0:a[0];this.responses=(s=this.responses)==null?void 0:s.slice(1);for(const o of i??e)await new Promise(l=>setTimeout(l,this.sleep)),yield{text:o,generationInfo:{}},await(r==null?void 0:r.handleLLMNewToken(o))}},i3e=class extends kne{constructor(){super();P(this,"lc_namespace",["langchain_core","message","fake"]);P(this,"messages",[])}async getMessages(){return this.messages}async addMessage(e){this.messages.push(e)}async addUserMessage(e){this.messages.push(new Ma(e))}async addAIMessage(e){this.messages.push(new Ei(e))}async clear(){this.messages=[]}},a3e=class extends WM{constructor(){super();P(this,"lc_namespace",["langchain_core","message","fake"]);P(this,"messages",[])}async addMessage(e){this.messages.push(e)}async getMessages(){return this.messages}},s3e=class extends Yu{constructor(){super();P(this,"name","fake_tracer");P(this,"runs",[])}persistRun(e){return this.runs.push(e),Promise.resolve()}},o3e=class extends Z1{constructor(){super(...arguments);P(this,"lc_namespace",["tests","fake"])}getFormatInstructions(){return""}async parse(e){return e.split(",").map(n=>n.trim())}},l3e=class extends HM{constructor(e){super();P(this,"lc_namespace",["test","fake"]);P(this,"output",[new ud({pageContent:"foo"}),new ud({pageContent:"bar"})]);this.output=(e==null?void 0:e.output)??this.output}async _getRelevantDocuments(e){return this.output}},c3e=class extends fn{constructor(e){super(e);P(this,"lc_namespace",["tests","fake"]);P(this,"returnOptions");this.returnOptions=e.returnOptions}async invoke(e,n){return this.returnOptions?n??{}:{input:e}}},u3e=class extends gk{constructor(e){super(e);P(this,"name");P(this,"description");P(this,"schema");this.name=e.name,this.description=e.description,this.schema=e.schema}async _call(e,n){return JSON.stringify(e)}},f3e=class extends Yu{constructor(){super();P(this,"runPromiseResolver");P(this,"runPromise");P(this,"name","single_run_extractor");this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}async persistRun(e){this.runPromiseResolver(e)}async extract(){return this.runPromise}},d3e=class Gre extends qM{constructor(n,{similarity:r,...i}={}){super(n,i);P(this,"memoryVectors",[]);P(this,"similarity");this.similarity=r??$re}_vectorstoreType(){return"memory"}async addDocuments(n){const r=n.map(({pageContent:i})=>i);return this.addVectors(await this.embeddings.embedDocuments(r),n)}async addVectors(n,r){const i=n.map((a,s)=>({content:r[s].pageContent,embedding:a,metadata:r[s].metadata}));this.memoryVectors=this.memoryVectors.concat(i)}async similaritySearchVectorWithScore(n,r,i){const a=c=>{if(!i)return!0;const u=new ud({metadata:c.metadata,pageContent:c.content});return i(u)},s=this.memoryVectors.filter(a);return s.map((c,u)=>({similarity:this.similarity(n,c.embedding),index:u})).sort((c,u)=>c.similarity>u.similarity?-1:0).slice(0,r).map(c=>[new ud({metadata:s[c.index].metadata,pageContent:s[c.index].content}),c.similarity])}static async fromTexts(n,r,i,a){const s=[];for(let o=0;o<n.length;o+=1){const l=Array.isArray(r)?r[o]:r,c=new ud({pageContent:n[o],metadata:l});s.push(c)}return Gre.fromDocuments(s,i,a)}static async fromDocuments(n,r,i){const a=new this(r,i);return await a.addDocuments(n),a}static async fromExistingIndex(n,r){return new this(n,r)}},Kre={};At(Kre,{FakeChatMessageHistory:()=>i3e,FakeChatModel:()=>X4e,FakeEmbeddings:()=>t3e,FakeLLM:()=>n3e,FakeListChatMessageHistory:()=>a3e,FakeListChatModel:()=>Q4e,FakeRetriever:()=>l3e,FakeRunnable:()=>c3e,FakeSplitIntoListParser:()=>o3e,FakeStreamingChatModel:()=>J4e,FakeStreamingLLM:()=>r3e,FakeTool:()=>u3e,FakeTracer:()=>s3e,FakeVectorStore:()=>d3e,SingleRunExtractor:()=>f3e,SyntheticEmbeddings:()=>e3e});var Yre={};At(Yre,{agents:()=>VRe,caches:()=>Gte,callbacks__base:()=>Eee,callbacks__manager:()=>fte,callbacks__promises:()=>cte,chat_history:()=>Ane,document_loaders__base:()=>Rne,document_loaders__langsmith:()=>$ne,documents:()=>Lne,embeddings:()=>vne,errors:()=>fee,example_selectors:()=>Une,index:()=>HRe,indexing:()=>Gne,language_models__base:()=>nne,language_models__chat_models:()=>yne,language_models__llms:()=>Kne,language_models__profile:()=>lje,load__serializable:()=>XQ,memory:()=>One,messages:()=>Ute,messages__tool:()=>lee,output_parsers:()=>fne,output_parsers__openai_functions:()=>Jne,output_parsers__openai_tools:()=>tre,outputs:()=>Ate,prompt_values:()=>Wte,prompts:()=>pre,retrievers:()=>Nne,retrievers__document_compressors:()=>mre,runnables:()=>ane,runnables__graph:()=>Pte,singletons:()=>yte,stores:()=>Cne,structured_query:()=>xre,tools:()=>Are,tracers__base:()=>rte,tracers__console:()=>ate,tracers__log_stream:()=>Ste,tracers__run_collector:()=>Cre,tracers__tracer_langchain:()=>ote,types__stream:()=>A4e,utils__async_caller:()=>Tte,utils__chunk_array:()=>wne,utils__context:()=>Pre,utils__env:()=>gee,utils__event_source_parse:()=>Nre,utils__format:()=>R4e,utils__function_calling:()=>zte,utils__hash:()=>qte,utils__json_patch:()=>lne,utils__json_schema:()=>UQ,utils__math:()=>Mre,utils__ssrf:()=>Dre,utils__stream:()=>vte,utils__testing:()=>Kre,utils__tiktoken:()=>ene,utils__types:()=>CQ,vectorstores:()=>Ine});const h3e=50;function p3e(t){const e={};for(let n=t;n&&n.prototype;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n.prototype,"lc_aliases"));return Object.entries(e).reduce((n,[r,i])=>(n[i]=r,n),{})}async function lS(t){const{optionalImportsMap:e,optionalImportEntrypoints:n,importMap:r,secretsMap:i,secretsFromEnv:a,path:s,depth:o,maxDepth:l}=this,c=s.join(".");if(o>l)throw new Error(`Maximum recursion depth (${l}) exceeded during deserialization. This may indicate a malicious payload or you may need to increase maxDepth.`);if(typeof t!="object"||t==null)return t;if(Array.isArray(t))return Promise.all(t.map((d,h)=>lS.call({...this,path:[...s,`${h}`],depth:o+1},d)));const u=t;if(ZQ(u))return eR(u);if("lc"in u&&"type"in u&&"id"in u&&u.lc===1&&u.type==="secret"){const d=u,[h]=d.id;if(h in i)return i[h];if(a){const p=mc(h);if(p)return p}throw new Error(`Missing secret "${h}" at ${c}`)}if("lc"in u&&"type"in u&&"id"in u&&u.lc===1&&u.type==="not_implemented"){const h=JSON.stringify(u);throw new Error(`Trying to load an object that doesn't implement serialization: ${c} -> ${h}`)}if("lc"in u&&"type"in u&&"id"in u&&"kwargs"in u&&u.lc===1&&u.type==="constructor"){const d=u,h=JSON.stringify(d),[p,...m]=d.id.slice().reverse(),y=m.reverse(),g={langchain_core:Yre,langchain:r};let v=null;const w=[y.join("/")];y[0]==="langchain_community"&&w.push(["langchain",...y.slice(1)].join("/"));const _=w.find(O=>O in e);if(zRe.concat(n).includes(y.join("/"))||_)if(_!==void 0)v=await e[_];else throw new Error(`Missing key "${y.join("/")}" for ${c} in load(optionalImportsMap={})`);else{let O;if(y[0]==="langchain"||y[0]==="langchain_core")O=g[y[0]],y.shift();else throw new Error(`Invalid namespace: ${c} -> ${h}`);if(y.length===0)throw new Error(`Invalid namespace: ${c} -> ${h}`);let R;do{if(R=y.join("__"),R in O)break;y.pop()}while(y.length>0);R in O&&(v=O[R])}if(typeof v!="object"||v===null)throw new Error(`Invalid namespace: ${c} -> ${h}`);const x=v[p]??Object.values(v).find(O=>typeof O=="function"&&J5(O)===p);if(typeof x!="function")throw new Error(`Invalid identifer: ${c} -> ${h}`);const E=await lS.call({...this,path:[...s,"kwargs"],depth:o+1},d.kwargs),T=new x(YQ(E,mke,p3e(x)));return Object.defineProperty(T.constructor,"name",{value:p}),T}const f={};for(const[d,h]of Object.entries(u))f[d]=await lS.call({...this,path:[...s,d],depth:o+1},h);return f}async function m3e(t,e){const n=JSON.parse(t),r={optionalImportsMap:{},optionalImportEntrypoints:[],secretsMap:{},secretsFromEnv:!1,importMap:{},path:["$"],depth:0,maxDepth:h3e};return lS.call(r,n)}function g3e(t){return t!==null&&t.lc===1&&t.type==="constructor"&&Array.isArray(t.id)}async function $R(t){if(t&&typeof t=="object"){if(Array.isArray(t))return await Promise.all(t.map(n=>$R(n)));{const e={};for(const[n,r]of Object.entries(t))e[n]=await $R(r);if(e.lc===2&&e.type==="undefined")return;if(e.lc===2&&e.type==="constructor"&&Array.isArray(e.id))try{const n=e.id[e.id.length-1];let r;switch(n){case"Set":r=Set;break;case"Map":r=Map;break;case"RegExp":r=RegExp;break;case"Error":r=Error;break;default:return e}return e.method?r[e.method](...e.args||[]):new r(...e.args||[])}catch{return e}else if(g3e(e))return m3e(JSON.stringify(e));return e}}return t}function HC(t,e,n,r){return{lc:2,type:"constructor",id:[t.name],method:e??null,args:n??[],kwargs:r??{}}}function y3e(t){return t===void 0?{lc:2,type:"undefined"}:t instanceof Set||t instanceof Map?HC(t.constructor,void 0,[Array.from(t)]):t instanceof RegExp?HC(RegExp,void 0,[t.source,t.flags]):t instanceof Error?HC(t.constructor,void 0,[t.message]):(t==null?void 0:t.lg_name)==="Send"?{node:t.node,args:t.args}:t}var v3e=class{_dumps(t){return new TextEncoder().encode(BRe(t,(n,r)=>y3e(r)))}async dumpsTyped(t){return t instanceof Uint8Array?["bytes",t]:["json",this._dumps(t)]}async _loads(t){const e=JSON.parse(t);return $R(e)}async loadsTyped(t,e){if(t==="bytes")return typeof e=="string"?new TextEncoder().encode(e):e;if(t==="json")return this._loads(typeof e=="string"?e:new TextDecoder().decode(e));throw new Error(`Unknown serialization type: ${t}`)}};function Zre(t){if(typeof t!="object"||t===null)return t;const e=Array.isArray(t)?[]:{};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Zre(t[n]));return e}function Xre(){return{v:4,id:Ene(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{}}}function LE(t){return{v:t.v,id:t.id,ts:t.ts,channel_values:{...t.channel_values},channel_versions:{...t.channel_versions},versions_seen:Zre(t.versions_seen)}}function Jre(t,e){return typeof t=="number"&&typeof e=="number"?Math.sign(t-e):String(t).localeCompare(String(e))}function w3e(...t){return t.reduce((e,n,r)=>r===0?n:Jre(e,n)>=0?e:n)}const b3e={[$Re]:-1,[rS]:-2,[MRe]:-3,[LRe]:-4};var b0=class extends Error{constructor(t){super(t),this.name="InvalidNamespaceError"}};function _3e(t){if(t.length===0)throw new b0("Namespace cannot be empty.");for(const e of t){if(typeof e!="string")throw new b0(`Invalid namespace label '${e}' found in ${t}. Namespace labels must be strings, but got ${typeof e}.`);if(e.includes("."))throw new b0(`Invalid namespace label '${e}' found in ${t}. Namespace labels cannot contain periods ('.').`);if(e==="")throw new b0(`Namespace labels cannot be empty strings. Got ${e} in ${t}`)}if(t[0]==="langgraph")throw new b0(`Root label for namespace cannot be "langgraph". Got: ${t}`)}var x3e=class{async get(t,e){return(await this.batch([{namespace:t,key:e}]))[0]}async search(t,e={}){const{filter:n,limit:r=10,offset:i=0,query:a}=e;return(await this.batch([{namespacePrefix:t,filter:n,limit:r,offset:i,query:a}]))[0]}async put(t,e,n,r){_3e(t),await this.batch([{namespace:t,key:e,value:n,index:r}])}async delete(t,e){await this.batch([{namespace:t,key:e,value:null}])}async listNamespaces(t={}){const{prefix:e,suffix:n,maxDepth:r,limit:i=100,offset:a=0}=t,s=[];return e&&s.push({matchType:"prefix",path:e}),n&&s.push({matchType:"suffix",path:n}),(await this.batch([{matchConditions:s.length?s:void 0,maxDepth:r,limit:i,offset:a}]))[0]}start(){}stop(){}};const S3e=t=>"lg_name"in t&&t.lg_name==="AsyncBatchedStore"?t.store:t;var E3e=class extends x3e{constructor(e){super();P(this,"lg_name","AsyncBatchedStore");P(this,"store");P(this,"queue",new Map);P(this,"nextKey",0);P(this,"running",!1);P(this,"processingTask",null);this.store=S3e(e)}get isRunning(){return this.running}async batch(e){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")}async get(e,n){return this.enqueueOperation({namespace:e,key:n})}async search(e,n){const{filter:r,limit:i=10,offset:a=0,query:s}=n||{};return this.enqueueOperation({namespacePrefix:e,filter:r,limit:i,offset:a,query:s})}async put(e,n,r){return this.enqueueOperation({namespace:e,key:n,value:r})}async delete(e,n){return this.enqueueOperation({namespace:e,key:n,value:null})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}async stop(){this.running=!1,this.processingTask&&await this.processingTask}enqueueOperation(e){return new Promise((n,r)=>{const i=this.nextKey;this.nextKey+=1,this.queue.set(i,{operation:e,resolve:n,reject:r})})}async processBatchQueue(){for(;this.running;){if(await new Promise(n=>{setTimeout(n,0)}),this.queue.size===0)continue;const e=new Map(this.queue);this.queue.clear();try{const n=Array.from(e.values()).map(({operation:i})=>i),r=await this.store.batch(n);e.forEach(({resolve:i},a)=>{const s=Array.from(e.keys()).indexOf(a);i(r[s])})}catch(n){e.forEach(({reject:r})=>{r(n)})}}}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}},A3e=class{constructor(t){P(this,"serde",new v3e);this.serde=t||this.serde}};function Qre(t){return t!=null&&t.lg_is_channel===!0}var Bd=class{constructor(){P(this,"ValueType");P(this,"UpdateType");P(this,"lg_is_channel",!0)}consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(t){if(t.name===$i.unminifiable_name)return!1;throw t}}equals(t){return this===t}};const MR=Symbol.for("LG_IS_ONLY_BASE_CHANNEL");function iL(t){if(t[MR]===!0)return t;const e={};for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const r=t[n];Qre(r)&&(e[n]=r)}return Object.assign(e,{[MR]:!0}),e}function DE(t,e){const n=iL(t),r={};for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;const a=e.channel_values[i];r[i]=n[i].fromCheckpoint(a)}return Object.assign(r,{[MR]:!0}),r}function jh(t,e,n,r){let i;if(e===void 0)i=t.channel_values;else{i={};for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a))try{i[a]=e[a].checkpoint()}catch(s){if(s.name!==$i.unminifiable_name)throw s}}return{v:4,id:(r==null?void 0:r.id)??Ene(n),ts:new Date().toISOString(),channel_values:i,channel_versions:t.channel_versions,versions_seen:t.versions_seen}}const k3e=t=>t!=null&&t.lc_graph_name==="BinaryOperatorAggregate";var FE=class eie extends Bd{constructor(n,r){super();P(this,"lc_graph_name","BinaryOperatorAggregate");P(this,"value");P(this,"operator");P(this,"initialValueFactory");this.operator=n,this.initialValueFactory=r,this.value=r==null?void 0:r()}fromCheckpoint(n){const r=new eie(this.operator,this.initialValueFactory);return typeof n<"u"&&(r.value=n),r}update(n){let r=n;if(!r.length)return!1;this.value===void 0&&([this.value]=r,r=r.slice(1));for(const i of r)this.value!==void 0&&(this.value=this.operator(this.value,i));return!0}get(){if(this.value===void 0)throw new $i;return this.value}checkpoint(){if(this.value===void 0)throw new $i;return this.value}isAvailable(){return this.value!==void 0}equals(n){return this===n?!0:k3e(n)?this.operator===n.operator:!1}},bk=class tie extends Bd{constructor(n){super();P(this,"lc_graph_name","LastValue");P(this,"value",[]);this.initialValueFactory=n,n&&(this.value=[n()])}fromCheckpoint(n){const r=new tie(this.initialValueFactory);return typeof n<"u"&&(r.value=[n]),r}update(n){if(n.length===0)return!1;if(n.length!==1)throw new ar("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[n[n.length-1]],!0}get(){if(this.value.length===0)throw new $i;return this.value[0]}checkpoint(){if(this.value.length===0)throw new $i;return this.value[0]}isAvailable(){return this.value.length!==0}},O3e=class nie extends Bd{constructor(){super(...arguments);P(this,"lc_graph_name","LastValueAfterFinish");P(this,"value",[]);P(this,"finished",!1)}fromCheckpoint(n){const r=new nie;if(typeof n<"u"){const[i,a]=n;r.value=[i],r.finished=a}return r}update(n){return n.length===0?!1:(this.finished=!1,this.value=[n[n.length-1]],!0)}get(){if(this.value.length===0||!this.finished)throw new $i;return this.value[0]}checkpoint(){if(this.value.length!==0)return[this.value[0],this.finished]}consume(){return this.finished?(this.finished=!1,this.value=[],!0):!1}finish(){return!this.finished&&this.value.length>0?(this.finished=!0,!0):!1}isAvailable(){return this.value.length!==0&&this.finished}},LR=class{constructor(t){P(this,"lc_graph_name","AnnotationRoot");P(this,"spec");this.spec=t}static isInstance(t){return typeof t=="object"&&t!==null&&"lc_graph_name"in t&&t.lc_graph_name==="AnnotationRoot"}};const dd=function(t){return t?DR(t):new bk};dd.Root=t=>new LR(t);function DR(t){return typeof t=="object"&&t&&"reducer"in t&&t.reducer?new FE(t.reducer,t.default):typeof t=="object"&&t&&"value"in t&&t.value?new FE(t.value,t.default):new bk}const Dn="__start__",gn="__end__",au="__input__",T3e="__copy__",Ka="__error__",qC="__pregel_ns_writes",hd="__pregel_send",aL="__pregel_call",ap="__pregel_read",Yr="__pregel_checkpointer",Mf="__pregel_resuming",bw="__pregel_task_id",BE="__pregel_stream",C3e="__pregel_resume_value",cS="__pregel_resume_map",pd="__pregel_scratchpad",uS="__pregel_previous",rie="__pregel_durability",FR="checkpoint_id",rc="checkpoint_ns",P3e="__pregel_node_finished",uo="checkpoint_map",KU="__pregel_abort_signals",_n="__interrupt__",es="__resume__",sL="__no_writes__",vy="__return__",GC="__previous__",ei="langsmith:hidden",N3e="langsmith:nostream",YU="__self__",Ts="__pregel_tasks",As="__pregel_push",fS="__pregel_pull",fo="00000000-0000-0000-0000-000000000000",I3e=[ei,au,_n,es,Ka,sL,hd,ap,Yr,rie,BE,Mf,bw,aL,C3e,pd,uS,uo,rc,FR],bi="|",_u=":",ZU=Symbol.for("langgraph.command");var nK,R3e=(nK=ZU,class{constructor(t){P(this,nK);this[ZU]=t}});function BR(t){const e=t;return e!=null&&typeof e.node=="string"&&e.args!==void 0}var Tb=class{constructor(t,e){P(this,"lg_name","Send");P(this,"node");P(this,"args");this.node=t,this.args=Cb(e)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function La(t){return t instanceof Tb}function iie(t){return!t||typeof t!="object"||!(_n in t)?!1:Array.isArray(t[_n])}var CN,Ns=(CN=class extends R3e{constructor(e){super(e);P(this,"lg_name","Command");P(this,"lc_direct_tool_output",!0);P(this,"graph");P(this,"update");P(this,"resume");P(this,"goto",[]);this.resume=e.resume,this.graph=e.graph,this.update=e.update,e.goto&&(this.goto=Array.isArray(e.goto)?Cb(e.goto):[Cb(e.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){var n;let e;return typeof this.goto=="string"?e=this.goto:La(this.goto)?e=this.goto.toJSON():e=(n=this.goto)==null?void 0:n.map(r=>typeof r=="string"?r:r.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:e}}},P(CN,"PARENT","__parent__"),CN);function yi(t){return typeof t!="object"||t==null?!1:"lg_name"in t&&t.lg_name==="Command"}function Cb(t,e=new Map){if(t!=null&&typeof t=="object"){if(e.has(t))return e.get(t);let n;if(Array.isArray(t))n=[],e.set(t,n),t.forEach((r,i)=>{n[i]=Cb(r,e)});else if(yi(t)&&!(t instanceof Ns))n=new Ns(t),e.set(t,n);else if(BR(t)&&!(t instanceof Tb))n=new Tb(t.node,t.args),e.set(t,n);else if(yi(t)||La(t))n=t,e.set(t,n);else if("lc_serializable"in t&&t.lc_serializable)n=t,e.set(t,n);else{n={},e.set(t,n);for(const[r,i]of Object.entries(t))n[r]=Cb(i,e)}return n}return t}const j3e=["tags","metadata","callbacks","configurable"],$3e=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interrupt","context","interruptBefore","interruptAfter","checkpointDuring","durability","signal"],M3e=25;function aie(...t){const e={tags:[],metadata:{},callbacks:void 0,recursionLimit:M3e,configurable:{}},n=ji.getRunnableConfig();if(n!==void 0){for(const[r,i]of Object.entries(n))if(i!==void 0)if(j3e.includes(r)){let a;Array.isArray(i)?a=[...i]:typeof i=="object"?r==="callbacks"&&"copy"in i&&typeof i.copy=="function"?a=i.copy():a={...i}:a=i,e[r]=a}else e[r]=i}for(const r of t)if(r!==void 0)for(const[i,a]of Object.entries(r))a!==void 0&&$3e.includes(i)&&(e[i]=a);for(const[r,i]of Object.entries(e.configurable))e.metadata=e.metadata??{},!r.startsWith("__")&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&!(r in e.metadata)&&(e.metadata[r]=i);return e}function L3e(){return ji.getRunnableConfig()}function KC(t){return t.split(bi).filter(e=>!e.match(/^\d+$/)).map(e=>e.split(_u)[0]).join(bi)}function D3e(t){const e=t.split(bi);for(;e.length>1&&e[e.length-1].match(/^\d+$/);)e.pop();return e.slice(0,-1).join(bi)}const Ue=t=>BigInt(t),Fn=(t,e=0)=>new DataView(t.buffer,t.byteOffset+e,t.byteLength-e),sie=Ue("0x9E3779B1"),oie=Ue("0x85EBCA77"),F3e=Ue("0xC2B2AE3D"),Od=Ue("0x9E3779B185EBCA87"),kp=Ue("0xC2B2AE3D27D4EB4F"),lie=Ue("0x165667B19E3779F9"),oL=Ue("0x85EBCA77C2B2AE63"),B3e=Ue("0x27D4EB2F165667C5"),U3e=Ue("0x165667919E3779F9"),z3e=Ue("0x9FB21C651E98DF25"),V3e=t=>{const e=t.length;if(e%2!==0)throw new Error("String should have an even number of characters");const n=e/2,r=new Uint8Array(n);let i=0,a=0;for(;a<n;){const s=t.slice(i,i+=2);r[a]=Number.parseInt(s,16),a+=1}return Fn(r)},Ql=V3e("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),Fg=(Ue(1)<<Ue(128))-Ue(1),tn=(Ue(1)<<Ue(64))-Ue(1),UE=(Ue(1)<<Ue(32))-Ue(1),su=64,cie=su/8,W3e=8,e2=4;function wy(t){if(!t)throw new Error("Assert failed")}function H3e(t){const e=new DataView(new ArrayBuffer(8));return e.setBigUint64(0,t,!0),e.getBigUint64(0,!1)}function q3e(t){let e=t;return e=(e&Ue(65535))<<Ue(16)|(e&Ue(4294901760))>>Ue(16),e=(e&Ue(16711935))<<Ue(8)|(e&Ue(4278255360))>>Ue(8),e}function G3e(t,e){return(t&UE)*(e&UE)&tn}function K3e(t,e){return(t<<e|t>>Ue(32)-e)&UE}function uie(t,e,n){for(let r=0;r<cie;r+=1){const i=e.getBigUint64(r*8,!0),a=i^n.getBigUint64(r*8,!0);t[r^1]+=i,t[r]+=G3e(a,a>>Ue(32))}return t}function XU(t,e,n,r){for(let i=0;i<r;i+=1)uie(t,Fn(e,i*su),Fn(n,i*8));return t}function Y3e(t,e){for(let n=0;n<cie;n+=1){const r=e.getBigUint64(n*8,!0);let i=t[n];i=UR(i,Ue(47)),i^=r,i*=sie,t[n]=i&tn}return t}function t2(t,e){return fie(t[0]^e.getBigUint64(0,!0),t[1]^e.getBigUint64(W3e,!0))}function JU(t,e,n){let r=n;return r+=t2(t.slice(0),Fn(e,0*e2)),r+=t2(t.slice(2),Fn(e,4*e2)),r+=t2(t.slice(4),Fn(e,8*e2)),r+=t2(t.slice(6),Fn(e,12*e2)),sc(r&tn)}function Z3e(t,e,n,r,i){let a=t;const s=Math.floor((n.byteLength-su)/8),o=su*s,l=Math.floor((e.byteLength-1)/o);for(let c=0;c<l;c+=1)a=XU(a,Fn(e,c*o),n,s),a=i(a,Fn(n,n.byteLength-su));{const c=Math.floor((e.byteLength-1-o*l)/su);a=XU(a,Fn(e,l*o),n,c),a=r(a,Fn(e,e.byteLength-su),Fn(n,n.byteLength-su-7))}return a}function X3e(t,e){let n=new BigUint64Array([F3e,Od,kp,lie,oL,oie,B3e,sie]);wy(t.byteLength>128),n=Z3e(n,t,e,uie,Y3e),wy(n.length*8===64);{const r=JU(n,Fn(e,11),Ue(t.byteLength)*Od&tn);return JU(n,Fn(e,e.byteLength-su-11),~(Ue(t.byteLength)*kp)&tn)<<Ue(64)|r}}function fie(t,e){const n=t*e&Fg;return n&tn^n>>Ue(64)}function QU(t,e,n){return fie((t.getBigUint64(0,!0)^e.getBigUint64(0,!0)+n)&tn,(t.getBigUint64(8,!0)^e.getBigUint64(8,!0)-n)&tn)}function dS(t,e,n,r,i){let a=t&tn,s=t>>Ue(64)&tn;return a+=QU(e,r,i),a^=n.getBigUint64(0,!0)+n.getBigUint64(8,!0),a&=tn,s+=QU(n,Fn(r,16),i),s^=e.getBigUint64(0,!0)+e.getBigUint64(8,!0),s&=tn,s<<Ue(64)|a}function sc(t){let e=t;return e^=e>>Ue(37),e*=U3e,e&=tn,e^=e>>Ue(32),e}function zE(t){let e=t;return e^=e>>Ue(33),e*=kp,e&=tn,e^=e>>Ue(29),e*=lie,e&=tn,e^=e>>Ue(32),e}function J3e(t,e,n){const r=t.byteLength;wy(r>0&&r<=3);const i=Ue(t.getUint8(r-1))|Ue(r<<8)|Ue(t.getUint8(0)<<16)|Ue(t.getUint8(r>>1)<<24),a=(i^(Ue(e.getUint32(0,!0))^Ue(e.getUint32(4,!0)))+n)&tn,s=(Ue(e.getUint32(8,!0))^Ue(e.getUint32(12,!0)))-n;return(zE((K3e(q3e(i),Ue(13))^s)&tn)&tn)<<Ue(64)|zE(a)}function UR(t,e){return t^t>>e}function Q3e(t,e,n){const r=t.byteLength;wy(r>=4&&r<=8);{const i=t.getUint32(0,!0),a=t.getUint32(r-4,!0);let s=((Ue(i)|Ue(a)<<Ue(32))^(e.getBigUint64(16,!0)^e.getBigUint64(24,!0))+n&tn)*(Od+(Ue(r)<<Ue(2)))&Fg;return s+=(s&tn)<<Ue(65),s&=Fg,s^=s>>Ue(67),UR(UR(s&tn,Ue(35))*z3e&tn,Ue(28))|sc(s>>Ue(64))<<Ue(64)}}function e$e(t,e,n){const r=t.byteLength;wy(r>=9&&r<=16);{const i=(e.getBigUint64(32,!0)^e.getBigUint64(40,!0))+n&tn,a=(e.getBigUint64(48,!0)^e.getBigUint64(56,!0))-n&tn,s=t.getBigUint64(0,!0);let o=t.getBigUint64(r-8,!0),l=(s^o^i)*Od;const c=(l&tn)+(Ue(r-1)<<Ue(54));l=l&(Fg^tn)|c,o^=a,l+=o+(o&UE)*(oie-Ue(1))<<Ue(64),l&=Fg,l^=H3e(l>>Ue(64));let u=(l&tn)*kp;return u+=(l>>Ue(64))*kp<<Ue(64),u&=Fg,sc(u&tn)|sc(u>>Ue(64))<<Ue(64)}}function t$e(t,e){const n=t.byteLength;return wy(n<=16),n>8?e$e(t,Ql,e):n>=4?Q3e(t,Ql,e):n>0?J3e(t,Ql,e):zE(e^Ql.getBigUint64(64,!0)^Ql.getBigUint64(72,!0))|zE(e^Ql.getBigUint64(80,!0)^Ql.getBigUint64(88,!0))<<Ue(64)}function zR(t){return~t+Ue(1)&tn}function n$e(t,e,n){let r=Ue(t.byteLength)*Od&tn,i=Ue(t.byteLength-1)/Ue(32);for(;i>=0;){const o=Number(i);r=dS(r,Fn(t,16*o),Fn(t,t.byteLength-16*(o+1)),Fn(e,32*o),n),i-=Ue(1)}let a=r+(r>>Ue(64))&tn;a=sc(a);let s=(r&tn)*Od+(r>>Ue(64))*oL+(Ue(t.byteLength)-n&tn)*kp;return s&=tn,s=zR(sc(s)),a|s<<Ue(64)}function r$e(t,e,n){let r=Ue(t.byteLength)*Od&tn;for(let s=32;s<160;s+=32)r=dS(r,Fn(t,s-32),Fn(t,s-16),Fn(e,s-32),n);r=sc(r&tn)|sc(r>>Ue(64))<<Ue(64);for(let s=160;s<=t.byteLength;s+=32)r=dS(r,Fn(t,s-32),Fn(t,s-16),Fn(e,3+s-160),n);r=dS(r,Fn(t,t.byteLength-16),Fn(t,t.byteLength-32),Fn(e,103),zR(n));let i=r+(r>>Ue(64))&tn;i=sc(i);let a=(r&tn)*Od+(r>>Ue(64))*oL+(Ue(t.byteLength)-n&tn)*kp;return a&=tn,a=zR(sc(a)),i|a<<Ue(64)}function Ah(t,e=Ue(0)){const n=new TextEncoder,r=Fn(typeof t=="string"?n.encode(t):t),i=r.byteLength,a=s=>s.toString(16).padStart(32,"0");return i<=16?a(t$e(r,e)):i<=128?a(n$e(r,Ql,e)):i<=240?a(r$e(r,Ql,e)):a(X3e(r,Ql))}function die(t){return/^[0-9a-f]{32}$/.test(t)}function i$e(t){var s,o,l;const e=ji.getRunnableConfig();if(!e)throw new Error("Called interrupt() outside the context of a graph.");const n=e.configurable;if(!n)throw new Error("No configurable found in config");if(!n[Yr])throw new tS("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});const r=n[pd];r.interruptCounter+=1;const i=r.interruptCounter;if(r.resume.length>0&&i<r.resume.length)return(s=n[hd])==null||s.call(n,[[es,r.resume]]),r.resume[i];if(r.nullResume!==void 0){if(r.resume.length!==i)throw new Error(`Resume length mismatch: ${r.resume.length} !== ${i}`);const c=r.consumeNullResume();return r.resume.push(c),(o=n[hd])==null||o.call(n,[[es,r.resume]]),c}const a=(l=n[rc])==null?void 0:l.split(bi);throw new Dg([{id:a?Ah(a.join(bi)):void 0,value:t}])}var Ud=class extends fn{constructor(e){super();P(this,"lc_namespace",["langgraph"]);P(this,"func");P(this,"tags");P(this,"config");P(this,"trace",!0);P(this,"recurse",!0);this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}async _tracedInvoke(e,n,r){return new Promise((i,a)=>{const s=kn(n,{callbacks:r==null?void 0:r.getChild()});ji.runWithConfig(s,async()=>{try{i(await this.func(e,s))}catch(o){a(o)}})})}async invoke(e,n){let r;const i=aie(n),a=go(this.config,i);return this.trace?r=await this._callWithConfig(this._tracedInvoke,e,a):r=await ji.runWithConfig(a,async()=>this.func(e,a)),fn.isRunnable(r)&&this.recurse?await ji.runWithConfig(a,async()=>r.invoke(e,a)):r}};function*Sf(t,e){if(e===void 0)yield*t;else for(const n of t)yield[e,n]}async function zf(t){const e=[];for await(const n of await t)e.push(n);return e}function K0(t){const e=[];for(const n of t)e.push(n);return e}function Em(t,e){return t?"configurable"in t?{...t,configurable:{...t.configurable,...e}}:{...t,configurable:e}:{configurable:e}}function a$e(t){return typeof t=="object"&&(t==null?void 0:t[Symbol.for("LG_SKIP_WRITE")])!==void 0}const sp={[Symbol.for("LG_PASSTHROUGH")]:!0};function n2(t){return typeof t=="object"&&(t==null?void 0:t[Symbol.for("LG_PASSTHROUGH")])!==void 0}const YC=Symbol("IS_WRITER");var ka=class VR extends Ud{constructor(n,r){const i=`ChannelWrite<${n.map(a=>La(a)?a.node:"channel"in a?a.channel:"...").join(",")}>`;super({writes:n,name:i,tags:r,func:async(a,s)=>this._write(a,s??{})});P(this,"writes");this.writes=n}async _write(n,r){const i=this.writes.map(a=>ZC(a)&&n2(a.value)?{mapper:a.mapper,value:n}:hS(a)&&n2(a.value)?{channel:a.channel,value:n,skipNone:a.skipNone,mapper:a.mapper}:a);return await VR.doWrite(r,i),n}static async doWrite(n,r){var s;for(const o of r){if(hS(o)){if(o.channel===Ts)throw new ar("Cannot write to the reserved channel TASKS");if(n2(o.value))throw new ar("PASSTHROUGH value must be replaced")}if(ZC(o)&&n2(o.value))throw new ar("PASSTHROUGH value must be replaced")}const i=[];for(const o of r)if(La(o))i.push([Ts,o]);else if(ZC(o)){const l=await o.mapper.invoke(o.value,n);l!=null&&l.length>0&&i.push(...l)}else if(hS(o)){const l=o.mapper!==void 0?await o.mapper.invoke(o.value,n):o.value;if(a$e(l)||o.skipNone&&l===void 0)continue;i.push([o.channel,l])}else throw new Error(`Invalid write entry: ${JSON.stringify(o)}`);((s=n.configurable)==null?void 0:s[hd])(i)}static isWriter(n){return n instanceof VR||YC in n&&!!n[YC]}static registerWriter(n){return Object.defineProperty(n,YC,{value:!0})}};function hS(t){return t!==void 0&&typeof t.channel=="string"}function ZC(t){return t!==void 0&&!hS(t)&&fn.isRunnable(t.mapper)}var s$e=class hie extends Ud{constructor(n,r,i=!1){super({func:(a,s)=>hie.doRead(s,this.channel,this.fresh,this.mapper)});P(this,"lc_graph_name","ChannelRead");P(this,"channel");P(this,"fresh",!1);P(this,"mapper");this.fresh=i,this.mapper=r,this.channel=n,this.name=Array.isArray(n)?`ChannelRead<${n.join(",")}>`:`ChannelRead<${n}>`}static doRead(n,r,i,a){var o;const s=(o=n.configurable)==null?void 0:o[ap];if(!s)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return a?a(s(r,i)):s(r,i)}};const Am=new Ep;var Pb=class Y0 extends kd{constructor(n){var y;const{channels:r,triggers:i,mapper:a,writers:s,bound:o,kwargs:l,metadata:c,retryPolicy:u,cachePolicy:f,tags:d,subgraphs:h,ends:p}=n,m=[...(y=n.config)!=null&&y.tags?n.config.tags:[],...d??[]];super({...n,bound:n.bound??Am,config:{...n.config?n.config:{},tags:m}});P(this,"lc_graph_name","PregelNode");P(this,"channels");P(this,"triggers",[]);P(this,"mapper");P(this,"writers",[]);P(this,"bound",Am);P(this,"kwargs",{});P(this,"metadata",{});P(this,"tags",[]);P(this,"retryPolicy");P(this,"cachePolicy");P(this,"subgraphs");P(this,"ends");this.channels=r,this.triggers=i,this.mapper=a,this.writers=s??this.writers,this.bound=o??this.bound,this.kwargs=l??this.kwargs,this.metadata=c??this.metadata,this.tags=m,this.retryPolicy=u,this.cachePolicy=f,this.subgraphs=h,this.ends=p}getWriters(){var r;const n=[...this.writers];for(;n.length>1&&n[n.length-1]instanceof ka&&n[n.length-2]instanceof ka;){const i=n.slice(-2),a=i[0].writes.concat(i[1].writes);n[n.length-2]=new ka(a,(r=i[0].config)==null?void 0:r.tags),n.pop()}return n}getNode(){const n=this.getWriters();if(!(this.bound===Am&&n.length===0))return this.bound===Am&&n.length===1?n[0]:this.bound===Am?new Mu({first:n[0],middle:n.slice(1,n.length-1),last:n[n.length-1],omitSequenceTags:!0}):n.length>0?new Mu({first:this.bound,middle:n.slice(0,n.length-1),last:n[n.length-1],omitSequenceTags:!0}):this.bound}join(n){if(!Array.isArray(n))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new Y0({channels:{...this.channels,...Object.fromEntries(n.map(r=>[r,r]))},triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(n){return ka.isWriter(n)?new Y0({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,n],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):this.bound===Am?new Y0({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:Zi(n),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):new Y0({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(n),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};function o$e(t){return"steps"in t&&Array.isArray(t.steps)}function lL(t){return"lg_is_pregel"in t&&t.lg_is_pregel===!0}function pie(t){const e=[t];for(const n of e){if(lL(n))return n;o$e(n)&&e.push(...n.steps)}}function Bg(t,e,n=!0,r=!1){try{return t[e].get()}catch(i){if(i.name===$i.unminifiable_name){if(r)return i;if(n)return null}throw i}}function Op(t,e,n=!0){if(Array.isArray(e)){const r={};for(const i of e)try{r[i]=Bg(t,i,!n)}catch(a){if(a.name===$i.unminifiable_name)continue}return r}else return Bg(t,e)}function*l$e(t,e){if(t.graph===Ns.PARENT)throw new ar("There is no parent graph.");if(t.goto){let n;Array.isArray(t.goto)?n=t.goto:n=[t.goto];for(const r of n)if(La(r))yield[fo,Ts,r];else if(typeof r=="string")yield[fo,`branch:to:${r}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof r}`)}if(t.resume)if(typeof t.resume=="object"&&Object.keys(t.resume).length&&Object.keys(t.resume).every(die))for(const[n,r]of Object.entries(t.resume)){const i=e.filter(a=>a[0]===n&&a[1]===es).map(a=>a[2]).slice(0,1)??[];i.push(r),yield[n,es,i]}else yield[fo,es,t.resume];if(t.update){if(typeof t.update!="object"||!t.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(t.update))for(const[n,r]of t.update)yield[fo,n,r];else for(const[n,r]of Object.entries(t.update))yield[fo,n,r]}}function*mie(t,e){if(e!=null)if(Array.isArray(t)&&typeof e=="object"&&!Array.isArray(e))for(const n in e)t.includes(n)&&(yield[n,e[n]]);else{if(Array.isArray(t))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[t,e]}}function*XC(t,e,n){Array.isArray(t)?(e===!0||e.find(([r,i])=>t.includes(r)))&&(yield Op(n,t)):(e===!0||e.some(([r,i])=>r===t))&&(yield Bg(n,t))}function*c$e(t,e,n){const r=e.filter(([o,l])=>{var c;return(o.config===void 0||!((c=o.config.tags)!=null&&c.includes(ei)))&&l[0][0]!==Ka&&l[0][0]!==_n});if(!r.length)return;let i;r.some(([o])=>o.writes.some(([l,c])=>l===vy))?i=r.flatMap(([o])=>o.writes.filter(([l,c])=>l===vy).map(([l,c])=>[o.name,c])):Array.isArray(t)?i=r.flatMap(([o])=>{const{writes:l}=o,c={};for(const[u]of l)t.includes(u)&&(c[u]=(c[u]||0)+1);return Object.values(c).some(u=>u>1)?l.filter(([u])=>t.includes(u)).map(([u,f])=>[o.name,{[u]:f}]):[[o.name,Object.fromEntries(l.filter(([u])=>t.includes(u)))]]}):i=r.flatMap(([o])=>o.writes.filter(([l,c])=>l===t).map(([l,c])=>[o.name,c]));const a={};for(const[o,l]of i)o in a||(a[o]=[]),a[o].push(l);const s={};for(const o in a)if(a[o].length===1){const[l]=a[o];s[o]=l}else s[o]=a[o];n&&(s.__metadata__={cached:n}),yield s}function cL(t){const e=typeof t[Dn];if(e==="number")return 0;if(e==="string")return"";for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const r=typeof t[n];if(r==="number")return 0;if(r==="string")return"";break}}function pS(t,e){if(Object.keys(t).length>0){const n=cL(e);return Object.fromEntries(Object.entries(e).filter(([r,i])=>i>(t[r]??n)))}else return e}function u$e(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}function sl(t,e){return t===null?{configurable:e}:(t==null?void 0:t.configurable)===void 0?{...t,configurable:e}:{...t,configurable:{...t.configurable,...e}}}function mh(t,e){var r,i;const n=(e==null?void 0:e.parents)??{};return Object.keys(n).length>0?sl(t,{[uo]:{...n,[((r=t.configurable)==null?void 0:r.checkpoint_ns)??""]:(i=t.configurable)==null?void 0:i.checkpoint_id}}):t}function VE(...t){const e=[...new Set(t.filter(Boolean))];if(e.length===0)return{signal:void 0,dispose:void 0};if(e.length===1)return{signal:e[0],dispose:void 0};const n=new AbortController,r=()=>{var s;const a=(s=e.find(o=>o.aborted))==null?void 0:s.reason;n.abort(a),e.forEach(o=>o.removeEventListener("abort",r))};e.forEach(a=>a.addEventListener("abort",r,{once:!0}));const i=e.find(a=>a.aborted);return i&&n.abort(i.reason),{signal:n.signal,dispose:()=>{e.forEach(a=>a.removeEventListener("abort",r))}}}const f$e=(t,e)=>{if(!(!t&&!e))return t?e?Array.isArray(t)&&Array.isArray(e)?[...t,...e]:Array.isArray(t)?[...t,e]:Array.isArray(e)?[t,...e]:[t,e]:t:e};var d$e=class{constructor({func:t,name:e,input:n,retry:r,cache:i,callbacks:a}){P(this,"func");P(this,"name");P(this,"input");P(this,"retry");P(this,"cache");P(this,"callbacks");P(this,"__lg_type","call");this.func=t,this.name=e,this.input=n,this.retry=r,this.cache=i,this.callbacks=a}};function h$e(t){return typeof t=="object"&&t!==null&&"__lg_type"in t&&t.__lg_type==="call"}function p$e(t,e){return new Mu({name:t,first:new Ud({func:n=>e(...n),name:t,trace:!1,recurse:!1}),last:new ka([{channel:vy,value:sp}],[ei])})}const m$e=t=>t!==void 0?t+1:1;function g$e(t,e){if(e==null)return!1;for(const n of t)if(e[n])return!0;return!1}function y$e(t){let e;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e==null?e=t[n]:e=w3e(e,t[n]));return e}function r2(t,e,n){const r=cL(t.channel_versions),i=t.versions_seen[_n]??{};let a=!1;if((t.channel_versions[Dn]??r)>(i[Dn]??r))a=!0;else for(const o in t.channel_versions)if(Object.prototype.hasOwnProperty.call(t.channel_versions,o)&&t.channel_versions[o]>(i[o]??r)){a=!0;break}const s=n.some(o=>{var l,c;return e==="*"?!((c=(l=o.config)==null?void 0:l.tags)!=null&&c.includes(ei)):e.includes(o.name)});return a&&s}function mS(t,e,n,r,i=!1){let a=new Set;if(Array.isArray(r))a=new Set(r.filter(o=>n.writes.some(([l,c])=>l===o)));else{for(const[o]of n.writes)if(o===r){a=new Set([o]);break}a=a||new Set}let s;if(i&&a.size>0){const o=Object.fromEntries(Object.entries(e).filter(([u,f])=>a.has(u))),l=jh(t,o,-1),c=DE(o,l);_s(LE(l),c,[n],void 0,void 0),s=Op({...e,...c},r)}else s=Op(e,r);return s}function JC(t,e,n){for(const[r,i]of n)if([As,Ts].includes(r)&&i!=null){if(!La(i))throw new ar(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(i)}`);if(!(i.node in e))throw new ar(`Invalid node name "${i.node}" in Send packet`)}t(n)}const v$e=new Set([sL,As,es,_n,vy,Ka]);function _s(t,e,n,r,i){var d,h;n.sort((p,m)=>{var v,w;const y=((v=p.path)==null?void 0:v.slice(0,3))||[],g=((w=m.path)==null?void 0:w.slice(0,3))||[];for(let _=0;_<Math.min(y.length,g.length);_+=1){if(y[_]<g[_])return-1;if(y[_]>g[_])return 1}return y.length-g.length});const a=n.some(p=>p.triggers.length>0),s=iL(e);for(const p of n){(d=t.versions_seen)[h=p.name]??(d[h]={});for(const m of p.triggers)m in t.channel_versions&&(t.versions_seen[p.name][m]=t.channel_versions[m])}let o=y$e(t.channel_versions);const l=new Set(n.flatMap(p=>p.triggers).filter(p=>!I3e.includes(p)));let c=!1;for(const p of l)p in s&&s[p].consume()&&r!==void 0&&(t.channel_versions[p]=r(o),c=!0);const u={};for(const p of n)for(const[m,y]of p.writes)v$e.has(m)||m in s&&(u[m]??(u[m]=[]),u[m].push(y));o!=null&&r!=null&&(o=c?r(o):o);const f=new Set;for(const[p,m]of Object.entries(u))if(p in s){const y=s[p];let g;try{g=y.update(m)}catch(v){if(v.name===ar.unminifiable_name){const w=new ar(`Invalid update for channel "${p}" with values ${JSON.stringify(m)}: ${v.message}`);throw w.lc_error_code=v.lc_error_code,w}else throw v}g&&r!==void 0&&(t.channel_versions[p]=r(o),y.isAvailable()&&f.add(p))}if(a)for(const p in s){if(!Object.prototype.hasOwnProperty.call(s,p))continue;const m=s[p];m.isAvailable()&&!f.has(p)&&m.update([])&&r!==void 0&&(t.channel_versions[p]=r(o),m.isAvailable()&&f.add(p))}if(a&&!g$e(f,i))for(const p in s){if(!Object.prototype.hasOwnProperty.call(s,p))continue;const m=s[p];m.finish()&&r!==void 0&&(t.channel_versions[p]=r(o),m.isAvailable()&&f.add(p))}return f}function*w$e(t,e,n){if(n.updatedChannels!=null&&n.triggerToNodes!=null){const r=new Set;for(const i of n.updatedChannels){const a=n.triggerToNodes[i];for(const s of a??[])r.add(s)}yield*[...r].sort();return}if(!(()=>{for(const r in t.channel_versions)if(t.channel_versions[r]!==null)return!1;return!0})())for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(yield r)}function pg(t,e,n,r,i,a,s){const o={},l=r[Ts];if(l!=null&&l.isAvailable()){const c=l.get().length;for(let u=0;u<c;u+=1){const f=WR([As,u],t,e,n,r,i,a,s);f!==void 0&&(o[f.id]=f)}}for(const c of w$e(t,n,s)){const u=WR([fS,c],t,e,n,r,i,a,s);u!==void 0&&(o[u.id]=u)}return o}function WR(t,e,n,r,i,a,s,o){var h,p,m,y;const{step:l,checkpointer:c,manager:u}=o,f=a.configurable??{},d=f.checkpoint_ns??"";if(t[0]===As&&h$e(t[t.length-1])){const g=t[t.length-1],v=p$e(g.name,g.func),w=[As],_=d===""?g.name:`${d}${bi}${g.name}`,x=fg(JSON.stringify([_,l.toString(),g.name,As,t[1],t[2]]),e.id),E=`${_}${_u}${x}`,T=[...t.slice(0,3),!0],O={langgraph_step:l,langgraph_node:g.name,langgraph_triggers:w,langgraph_path:T,langgraph_checkpoint_ns:E};if(s){const R=[];return{name:g.name,input:g.input,proc:v,writes:R,config:kn(go(a,{metadata:O,store:o.store??a.store}),{runName:g.name,callbacks:u==null?void 0:u.getChild(`graph:step:${l}`),configurable:{[bw]:x,[hd]:M=>JC(N=>R.push(...N),r,M),[ap]:(M,N=!1)=>mS(e,i,{name:g.name,writes:R,triggers:w,path:T},M,N),[Yr]:c??f[Yr],[uo]:{...f[uo],[d]:e.id},[pd]:QC({pendingWrites:n??[],taskId:x,currentTaskInput:g.input,resumeMap:(h=a.configurable)==null?void 0:h[cS],namespaceHash:Ah(E)}),[uS]:e.channel_values[GC],checkpoint_id:void 0,checkpoint_ns:E}}),triggers:w,retry_policy:g.retry,cache_key:g.cache?{key:Ah((g.cache.keyFunc??JSON.stringify)([g.input])),ns:[qC,g.name??"__dynamic__"],ttl:g.cache.ttl}:void 0,id:x,path:T,writers:[]}}else return{id:x,name:g.name,interrupts:[],path:T}}else if(t[0]===As){const g=typeof t[1]=="number"?t[1]:parseInt(t[1],10);if(!((p=i[Ts])!=null&&p.isAvailable()))return;const v=i[Ts].get();if(g<0||g>=v.length)return;const w=BR(v[g])&&!La(v[g])?new Tb(v[g].node,v[g].args):v[g];if(!BR(w)){console.warn(`Ignoring invalid packet ${JSON.stringify(w)} in pending sends.`);return}if(!(w.node in r)){console.warn(`Ignoring unknown node name ${w.node} in pending sends.`);return}const _=[As],x=d===""?w.node:`${d}${bi}${w.node}`,E=fg(JSON.stringify([x,l.toString(),w.node,As,g.toString()]),e.id),T=`${x}${_u}${E}`;let O={langgraph_step:l,langgraph_node:w.node,langgraph_triggers:_,langgraph_path:t.slice(0,3),langgraph_checkpoint_ns:T};if(s){const R=r[w.node],M=R.getNode();if(M!==void 0){R.metadata!==void 0&&(O={...O,...R.metadata});const N=[];return{name:w.node,input:w.args,proc:M,subgraphs:R.subgraphs,writes:N,config:kn(go(a,{metadata:O,tags:R.tags,store:o.store??a.store}),{runName:w.node,callbacks:u==null?void 0:u.getChild(`graph:step:${l}`),configurable:{[bw]:E,[hd]:j=>JC(U=>N.push(...U),r,j),[ap]:(j,U=!1)=>mS(e,i,{name:w.node,writes:N,triggers:_,path:t},j,U),[Yr]:c??f[Yr],[uo]:{...f[uo],[d]:e.id},[pd]:QC({pendingWrites:n??[],taskId:E,currentTaskInput:w.args,resumeMap:(m=a.configurable)==null?void 0:m[cS],namespaceHash:Ah(T)}),[uS]:e.channel_values[GC],checkpoint_id:void 0,checkpoint_ns:T}}),triggers:_,retry_policy:R.retryPolicy,cache_key:R.cachePolicy?{key:Ah((R.cachePolicy.keyFunc??JSON.stringify)([w.args])),ns:[qC,R.name??"__dynamic__",w.node],ttl:R.cachePolicy.ttl}:void 0,id:E,path:t,writers:R.getWriters()}}}else return{id:E,name:w.node,interrupts:[],path:t}}else if(t[0]===fS){const g=t[1].toString(),v=r[g];if(v===void 0)return;if(n!=null&&n.length){const E=d===""?g:`${d}${bi}${g}`,T=fg(JSON.stringify([E,l.toString(),g,fS,g]),e.id);if(n.some(O=>O[0]===T&&O[1]!==Ka))return}const w=cL(e.channel_versions);if(w===void 0)return;const _=e.versions_seen[g]??{},x=v.triggers.find(E=>i[E].isAvailable()?(e.channel_versions[E]??w)>(_[E]??w):!1);if(x!==void 0){const E=b$e(v,i,s);if(E===void 0)return;const T=d===""?g:`${d}${bi}${g}`,O=fg(JSON.stringify([T,l.toString(),g,fS,[x]]),e.id),R=`${T}${_u}${O}`;let M={langgraph_step:l,langgraph_node:g,langgraph_triggers:[x],langgraph_path:t,langgraph_checkpoint_ns:R};if(s){const N=v.getNode();if(N!==void 0){v.metadata!==void 0&&(M={...M,...v.metadata});const j=[];return{name:g,input:E,proc:N,subgraphs:v.subgraphs,writes:j,config:kn(go(a,{metadata:M,tags:v.tags,store:o.store??a.store}),{runName:g,callbacks:u==null?void 0:u.getChild(`graph:step:${l}`),configurable:{[bw]:O,[hd]:U=>JC(B=>{j.push(...B)},r,U),[ap]:(U,B=!1)=>mS(e,i,{name:g,writes:j,triggers:[x],path:t},U,B),[Yr]:c??f[Yr],[uo]:{...f[uo],[d]:e.id},[pd]:QC({pendingWrites:n??[],taskId:O,currentTaskInput:E,resumeMap:(y=a.configurable)==null?void 0:y[cS],namespaceHash:Ah(R)}),[uS]:e.channel_values[GC],checkpoint_id:void 0,checkpoint_ns:R}}),triggers:[x],retry_policy:v.retryPolicy,cache_key:v.cachePolicy?{key:Ah((v.cachePolicy.keyFunc??JSON.stringify)([E])),ns:[qC,v.name??"__dynamic__",g],ttl:v.cachePolicy.ttl}:void 0,id:O,path:t,writers:v.getWriters()}}}else return{id:O,name:g,interrupts:[],path:t}}}}function b$e(t,e,n){let r;if(typeof t.channels=="object"&&!Array.isArray(t.channels)){r={};for(const[i,a]of Object.entries(t.channels))if(t.triggers.includes(a))try{r[i]=Bg(e,a,!1)}catch(s){if(s.name===$i.unminifiable_name)return;throw s}else if(a in e)try{r[i]=Bg(e,a,!1)}catch(s){if(s.name===$i.unminifiable_name)continue;throw s}}else if(Array.isArray(t.channels)){let i=!1;for(const a of t.channels)try{r=Bg(e,a,!1),i=!0;break}catch(s){if(s.name===$i.unminifiable_name)continue;throw s}if(!i)return}else throw new Error(`Invalid channels type, expected list or dict, got ${t.channels}`);return n&&t.mapper!==void 0&&(r=t.mapper(r)),r}function _$e(t,e){if(typeof t.args!="object"||t.args===null)return t;const n={};for(const[r,i]of Object.entries(t.args)){const a=e[r];(!a||a.lc_graph_name!=="UntrackedValue")&&(n[r]=i)}return new Tb(t.node,n)}function QC({pendingWrites:t,taskId:e,currentTaskInput:n,resumeMap:r,namespaceHash:i}){var o;const a=(o=t.find(([l,c])=>l===fo&&c===es))==null?void 0:o[2],s={callCounter:0,interruptCounter:-1,resume:(()=>{const l=t.filter(([c,u])=>c===e&&u===es).flatMap(([c,u,f])=>f);if(r!=null&&i in r){const c=r[i];l.push(c)}return l})(),nullResume:a,subgraphCounter:0,currentTaskInput:n,consumeNullResume:()=>{if(s.nullResume)return delete s.nullResume,t.splice(t.findIndex(([l,c])=>l===fo&&c===es),1),a}};return s}const Nb={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},Ib=(t,e)=>`${t.start}${e}${t.end}`;function*e9(t){var e;for(const{id:n,name:r,input:i,config:a,triggers:s,writes:o}of t)(e=a==null?void 0:a.tags)!=null&&e.includes(ei)||(yield{id:n,name:r,input:i,triggers:s,interrupts:o.filter(([l,c])=>l===n&&c===_n).map(([,l])=>l)})}function x$e(t){return typeof t!="object"||t===null?!1:"$writes"in t&&Array.isArray(t.$writes)}function gie(t){const e={};for(const[n,r]of t){const i=String(n);if(i in e){const a=x$e(e[i])?e[i].$writes:[e[i]];a.push(r),e[i]={$writes:a}}else e[i]=r}return e}function*S$e(t,e){var n;for(const[{id:r,name:i,config:a},s]of t)(n=a==null?void 0:a.tags)!=null&&n.includes(ei)||(yield{id:r,name:i,result:gie(s.filter(([o])=>Array.isArray(e)?e.includes(o):o===e)),interrupts:s.filter(o=>o[0]===_n).map(o=>o[1])})}function*E$e(t,e,n,r,i,a,s,o){var f,d,h;function l(p){const m={};return p.callbacks!=null&&(m.callbacks=p.callbacks),p.configurable!=null&&(m.configurable=p.configurable),p.maxConcurrency!=null&&(m.max_concurrency=p.maxConcurrency),p.metadata!=null&&(m.metadata=p.metadata),p.recursionLimit!=null&&(m.recursion_limit=p.recursionLimit),p.runId!=null&&(m.run_id=p.runId),p.runName!=null&&(m.run_name=p.runName),p.tags!=null&&(m.tags=p.tags),m}const c=(f=t.configurable)==null?void 0:f.checkpoint_ns,u={};for(const p of i){if(!((d=p.subgraphs)!=null&&d.length?p.subgraphs:[p.proc]).find(pie))continue;let m=`${p.name}:${p.id}`;c&&(m=`${c}|${m}`),u[p.id]={configurable:{thread_id:(h=t.configurable)==null?void 0:h.thread_id,checkpoint_ns:m}}}yield{config:l(t),values:Op(e,n),metadata:r,next:i.map(p=>p.name),tasks:yie(i,a,u,o),parentConfig:s?l(s):void 0}}function yie(t,e,n,r){return t.map(i=>{var c;const a=(c=e.find(([u,f])=>u===i.id&&f===Ka))==null?void 0:c[2],s=e.filter(([u,f])=>u===i.id&&f===_n).map(([,,u])=>u),o=(()=>{var f;if(a||s.length||!e.length)return;const u=e.findIndex(([d,h])=>d===i.id&&h===vy);if(u>=0)return e[u][2];if(typeof r=="string")return(f=e.find(([d,h])=>d===i.id&&h===r))==null?void 0:f[2];if(Array.isArray(r)){const d=e.filter(([h,p])=>h===i.id&&r.includes(p)).map(([,h,p])=>[h,p]);return d.length?gie(d):void 0}})();if(a)return{id:i.id,name:i.name,path:i.path,error:a,interrupts:s,result:o};const l=n==null?void 0:n[i.id];return{id:i.id,name:i.name,path:i.path,interrupts:s,...l!==void 0?{state:l}:{},result:o}})}function A$e(t,e,n){console.log([`${Ib(Nb.blue,`[${t}:checkpoint]`)}`,`\x1B[1m State at the end of step ${t}:\x1B[0m
`,JSON.stringify(Op(e,n),null,2)].join(""))}function vie(t,e){const n=e.length;console.log([`${Ib(Nb.blue,`[${t}:tasks]`)}`,`\x1B[1m Starting step ${t} with ${n} task${n===1?"":"s"}:\x1B[0m
`,e.map(r=>`- ${Ib(Nb.green,String(r.name))} -> ${JSON.stringify(r.input,null,2)}`).join(`
`)].join(""))}function k$e(t,e,n){const r={};for(const[i,a]of e)n.includes(i)&&(r[i]||(r[i]=[]),r[i].push(a));console.log([`${Ib(Nb.blue,`[${t}:writes]`)}`,`\x1B[1m Finished step ${t} with writes to ${Object.keys(r).length} channel${Object.keys(r).length!==1?"s":""}:\x1B[0m
`,Object.entries(r).map(([i,a])=>`- ${Ib(Nb.yellow,i)} -> ${a.map(s=>JSON.stringify(s)).join(", ")}`).join(`
`)].join(""))}var t9=class extends ns{constructor(e,n){const r=e.getReader(),i=n??new AbortController;super({start(a){return s();function s(){return r.read().then(({done:o,value:l})=>{if(o){a.close();return}return a.enqueue(l),s()})}}});P(this,"_abortController");P(this,"_innerReader");this._abortController=i,this._innerReader=r}async cancel(e){this._abortController.abort(e),this._innerReader.releaseLock()}get signal(){return this._abortController.signal}},wie=class extends ns{constructor(e){let n;const r=new Promise(i=>{n=i});super({start:i=>{n(i)}});P(this,"modes");P(this,"controller");P(this,"passthroughFn");P(this,"_closed",!1);r.then(i=>{this.controller=i}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}get closed(){return this._closed}push(e){var n;(n=this.passthroughFn)==null||n.call(this,e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(e){this.controller.error(e)}};function O$e(t){return JSON.stringify(t,function(e,n){const r=this[e];if(r!=null&&typeof r=="object"&&"toDict"in r&&typeof r.toDict=="function"){const{type:i,data:a}=r.toDict();return{...a,type:i}}return n})}function T$e(t){return t instanceof Error?{error:t.name,message:t.message}:{error:"Error",message:JSON.stringify(t)}}function uL(t){return typeof t!="object"||t==null?!1:"configurable"in t&&typeof t.configurable=="object"&&t.configurable!=null}function eP(t){return!uL(t)||!t.configurable.thread_id?null:{thread_id:t.configurable.thread_id,checkpoint_ns:t.configurable.checkpoint_ns||"",checkpoint_id:t.configurable.checkpoint_id||null,checkpoint_map:t.configurable.checkpoint_map||null}}function n9(t){if(uL(t)){const e=Object.fromEntries(Object.entries(t.configurable).filter(([r])=>!r.startsWith("__"))),n={...t,configurable:e};return delete n.callbacks,n}return t}function r9(t){const e={...t,checkpoint:eP(t.config),parent_checkpoint:eP(t.parentConfig),config:n9(t.config),parent_config:n9(t.parentConfig),tasks:t.tasks.map(n=>{if(uL(n.state)){const r=eP(n.state);if(r!=null){const i={...n,checkpoint:r};return delete i.state,i}}return n})};return delete e.parentConfig,e}function C$e(t){const e=new TextEncoder;return new ReadableStream({async start(n){const r=i=>{n.enqueue(e.encode(`event: ${i.event}
data: ${O$e(i.data)}

`))};try{for await(const i of t){const[a,s,o]=i;let l=o;if(s==="debug"){const c=o;c.type==="checkpoint"&&(l={...c,payload:r9(c.payload)})}s==="checkpoints"&&(l=r9(o)),r({event:a!=null&&a.length?`${s}|${a.join("|")}`:s,data:l})}}catch(i){r({event:"error",data:T$e(i)})}n.close()}})}const i2=Symbol.for("INPUT_DONE"),tP=Symbol.for("INPUT_RESUMING"),P$e=25;function N$e(...t){return new wie({passthroughFn:e=>{for(const n of t)n.modes.has(e[1])&&n.push(e)},modes:new Set(t.flatMap(e=>Array.from(e.modes)))})}var I$e=class extends A3e{constructor(e){super();P(this,"cache");P(this,"queue",Promise.resolve());this.cache=e}async get(e){return this.enqueueOperation("get",e)}async set(e){return this.enqueueOperation("set",e)}async clear(e){return this.enqueueOperation("clear",e)}async stop(){await this.queue}enqueueOperation(e,...n){const r=this.queue.then(()=>this.cache[e](...n));return this.queue=r.then(()=>{},()=>{}),r}},R$e=class bie{constructor(e){P(this,"input");P(this,"output");P(this,"config");P(this,"checkpointer");P(this,"checkpointerGetNextVersion");P(this,"channels");P(this,"checkpoint");P(this,"checkpointIdSaved");P(this,"checkpointConfig");P(this,"checkpointMetadata");P(this,"checkpointNamespace");P(this,"checkpointPendingWrites",[]);P(this,"checkpointPreviousVersions");P(this,"step");P(this,"stop");P(this,"durability");P(this,"outputKeys");P(this,"streamKeys");P(this,"nodes");P(this,"skipDoneTasks");P(this,"prevCheckpointConfig");P(this,"updatedChannels");P(this,"status","pending");P(this,"tasks",{});P(this,"stream");P(this,"checkpointerPromises",[]);P(this,"isNested");P(this,"_checkpointerChainedPromise",Promise.resolve());P(this,"store");P(this,"cache");P(this,"manager");P(this,"interruptAfter");P(this,"interruptBefore");P(this,"toInterrupt",[]);P(this,"debug",!1);P(this,"triggerToNodes");this.input=e.input,this.checkpointer=e.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=m$e,this.checkpoint=e.checkpoint,this.checkpointMetadata=e.checkpointMetadata,this.checkpointPreviousVersions=e.checkpointPreviousVersions,this.channels=e.channels,this.checkpointPendingWrites=e.checkpointPendingWrites,this.step=e.step,this.stop=e.stop,this.config=e.config,this.checkpointConfig=e.checkpointConfig,this.isNested=e.isNested,this.manager=e.manager,this.outputKeys=e.outputKeys,this.streamKeys=e.streamKeys,this.nodes=e.nodes,this.skipDoneTasks=e.skipDoneTasks,this.store=e.store,this.cache=e.cache?new I$e(e.cache):void 0,this.stream=e.stream,this.checkpointNamespace=e.checkpointNamespace,this.prevCheckpointConfig=e.prevCheckpointConfig,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.durability=e.durability,this.debug=e.debug,this.triggerToNodes=e.triggerToNodes}get isResuming(){var o,l,c,u,f;let e=!1;if(Dn in this.checkpoint.channel_versions)e=!0;else for(const d in this.checkpoint.channel_versions)if(Object.prototype.hasOwnProperty.call(this.checkpoint.channel_versions,d)){e=!0;break}const n=((o=this.config.configurable)==null?void 0:o[Mf])!==void 0&&((l=this.config.configurable)==null?void 0:l[Mf]),r=this.input===null||this.input===void 0,i=yi(this.input)&&this.input.resume!=null,a=this.input===tP,s=!this.isNested&&((c=this.config.metadata)==null?void 0:c.run_id)!==void 0&&((u=this.checkpointMetadata)==null?void 0:u.run_id)!==void 0&&this.config.metadata.run_id===((f=this.checkpointMetadata)==null?void 0:f.run_id);return e&&(n||r||i||a||s)}static async initialize(e){var w,_,x,E,T,O,R,M,N,j,U,B;let{config:n,stream:r}=e;r!==void 0&&((w=n.configurable)==null?void 0:w[BE])!==void 0&&(r=N$e(r,n.configurable[BE]));const i=n.configurable?!("checkpoint_id"in n.configurable):!0,a=(_=n.configurable)==null?void 0:_[pd];n.configurable&&a&&(a.subgraphCounter>0&&(n=sl(n,{[rc]:[n.configurable[rc],a.subgraphCounter.toString()].join(bi)})),a.subgraphCounter+=1);const s=ap in(n.configurable??{});!s&&((x=n.configurable)==null?void 0:x.checkpoint_ns)!==void 0&&((E=n.configurable)==null?void 0:E.checkpoint_ns)!==""&&(n=sl(n,{checkpoint_ns:"",checkpoint_id:void 0}));let o=n;((T=n.configurable)==null?void 0:T[uo])!==void 0&&((M=(O=n.configurable)==null?void 0:O[uo])!=null&&M[(R=n.configurable)==null?void 0:R.checkpoint_ns])&&(o=sl(n,{checkpoint_id:n.configurable[uo][(N=n.configurable)==null?void 0:N.checkpoint_ns]}));const l=((U=(j=n.configurable)==null?void 0:j.checkpoint_ns)==null?void 0:U.split(bi))??[],c=await((B=e.checkpointer)==null?void 0:B.getTuple(o))??{config:n,checkpoint:Xre(),metadata:{source:"input",step:-2,parents:{}},pendingWrites:[]};o={...n,...c.config,configurable:{checkpoint_ns:"",...n.configurable,...c.config.configurable}};const u=c.parentConfig,f=LE(c.checkpoint),d={...c.metadata},h=c.pendingWrites??[],p=DE(e.channelSpecs,f),m=(d.step??0)+1,y=m+(n.recursionLimit??P$e)+1,g={...f.channel_versions},v=e.store?new E3e(e.store):void 0;return v&&await v.start(),new bie({input:e.input,config:n,checkpointer:e.checkpointer,checkpoint:f,checkpointMetadata:d,checkpointConfig:o,prevCheckpointConfig:u,checkpointNamespace:l,channels:p,isNested:s,manager:e.manager,skipDoneTasks:i,step:m,stop:y,checkpointPreviousVersions:g,checkpointPendingWrites:h,outputKeys:e.outputKeys??[],streamKeys:e.streamKeys??[],nodes:e.nodes,stream:r,store:v,cache:e.cache,interruptAfter:e.interruptAfter,interruptBefore:e.interruptBefore,durability:e.durability,debug:e.debug,triggerToNodes:e.triggerToNodes})}_checkpointerPutAfterPrevious(e){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>{var n;return(n=this.checkpointer)==null?void 0:n.put(e.config,e.checkpoint,e.metadata,e.newVersions)}),this.checkpointerPromises.push(this._checkpointerChainedPromise)}putWrites(e,n){var l;let r=n;if(r.length===0)return;r.every(([c])=>c in b3e)&&(r=Array.from(new Map(r.map(c=>[c[0],c])).values()));let i=!1;for(const c in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,c)&&this.channels[c].lc_graph_name==="UntrackedValue"){i=!0;break}let a=r;i&&(a=r.filter(([c])=>{const u=this.channels[c];return!u||u.lc_graph_name!=="UntrackedValue"}).map(([c,u])=>c===Ts&&La(u)?[c,_$e(u,this.channels)]:[c,u])),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(c=>c[0]!==e);for(const[c,u]of a)this.checkpointPendingWrites.push([e,c,u]);const s=sl(this.checkpointConfig,{[rc]:((l=this.config.configurable)==null?void 0:l.checkpoint_ns)??"",[FR]:this.checkpoint.id});if(this.durability!=="exit"&&this.checkpointer!=null&&this.checkpointerPromises.push(this.checkpointer.putWrites(s,a,e)),this.tasks&&this._outputWrites(e,r),!n.length||!this.cache||!this.tasks)return;const o=this.tasks[e];o==null||o.cache_key==null||n[0][0]===Ka||n[0][0]===_n||this.cache.set([{key:[o.cache_key.ns,o.cache_key.key],value:o.writes,ttl:o.cache_key.ttl}])}_outputWrites(e,n,r=!1){var a,s;const i=this.tasks[e];if(i!==void 0){if(i.config!==void 0&&(i.config.tags??[]).includes(ei))return;if(n.length>0)if(n[0][0]===_n){if(((a=i.path)==null?void 0:a[0])===As&&((s=i.path)==null?void 0:s[i.path.length-1])===!0)return;const o=n.filter(l=>l[0]===_n).flatMap(l=>l[1]);this._emit([["updates",{[_n]:o}],["values",{[_n]:o}]])}else n[0][0]!==Ka&&this._emit(K0(Sf(c$e(this.outputKeys,[[i,n]],r),"updates")));r||this._emit(K0(Sf(S$e([[i,n]],this.streamKeys),"tasks")))}}async _matchCachedWrites(){if(!this.cache)return[];const e=[],n=([s,o])=>`ns:${s.join(",")}|key:${o}`,r=[],i={};for(const s of Object.values(this.tasks))s.cache_key!=null&&!s.writes.length&&(r.push([s.cache_key.ns,s.cache_key.key]),i[n([s.cache_key.ns,s.cache_key.key])]=s);if(r.length===0)return[];const a=await this.cache.get(r);for(const{key:s,value:o}of a){const l=i[n(s)];l!=null&&(l.writes.push(...o),e.push({task:l,result:o}))}return e}async tick(e){var i,a,s;this.store&&!this.store.isRunning&&await((i=this.store)==null?void 0:i.start());const{inputKeys:n=[]}=e;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![i2,tP].includes(this.input))await this._first(n);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new Dg;if(Object.values(this.tasks).every(o=>o.writes.length>0)){const o=Object.values(this.tasks).flatMap(c=>c.writes);this.updatedChannels=_s(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);const l=await zf(Sf(XC(this.outputKeys,o,this.channels),"values"));if(this._emit(l),this.checkpointPendingWrites=[],await this._putCheckpoint({source:"loop"}),r2(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new Dg;((a=this.config.configurable)==null?void 0:a[Mf])!==void 0&&((s=this.config.configurable)==null||delete s[Mf])}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;if(this.tasks=pg(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream,triggerToNodes:this.triggerToNodes,updatedChannels:this.updatedChannels}),this.checkpointer&&this._emit(await zf(Sf(E$e(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(const[o,l,c]of this.checkpointPendingWrites){if(l===Ka||l===_n||l===es)continue;const u=Object.values(this.tasks).find(f=>f.id===o);u&&u.writes.push([l,c])}for(const o of Object.values(this.tasks))o.writes.length>0&&this._outputWrites(o.id,o.writes,!0)}if(Object.values(this.tasks).every(o=>o.writes.length>0))return this.tick({inputKeys:n});if(r2(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new Dg;const r=await zf(Sf(e9(Object.values(this.tasks)),"tasks"));return this._emit(r),!0}async finishAndHandleError(e){this.durability==="exit"&&(!this.isNested||typeof e<"u"||this.checkpointNamespace.every(r=>!r.includes(_u)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());const n=this._suppressInterrupt(e);return(n||e===void 0)&&(this.output=Op(this.channels,this.outputKeys)),n&&(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(r=>r.writes.length>0)&&(this.updatedChannels=_s(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes),this._emit(K0(Sf(XC(this.outputKeys,Object.values(this.tasks).flatMap(r=>r.writes),this.channels),"values")))),Uh(e)&&!e.interrupts.length&&this._emit([["updates",{[_n]:[]}],["values",{[_n]:[]}]])),n}async acceptPush(e,n,r){var s,o;if(((s=this.interruptAfter)==null?void 0:s.length)>0&&r2(this.checkpoint,this.interruptAfter,[e])){this.toInterrupt.push(e);return}const i=WR([As,e.path??[],n,e.id,r],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,e.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(!i)return;if(((o=this.interruptBefore)==null?void 0:o.length)>0&&r2(this.checkpoint,this.interruptBefore,[i])){this.toInterrupt.push(i);return}this._emit(K0(Sf(e9([i]),"tasks"))),this.debug&&vie(this.step,[i]),this.tasks[i.id]=i,this.skipDoneTasks&&this._matchWrites({[i.id]:i});const a=await this._matchCachedWrites();for(const{task:l}of a)this._outputWrites(l.id,l.writes,!0);return i}_suppressInterrupt(e){return Uh(e)&&!this.isNested}async _first(e){var s;const{configurable:n}=this.config,r=n==null?void 0:n[pd];if(r&&r.nullResume!==void 0&&this.putWrites(fo,[[es,r.nullResume]]),yi(this.input)){const o=this.input.resume!=null;if(this.input.resume!=null&&typeof this.input.resume=="object"&&Object.keys(this.input.resume).every(die)&&((s=this.config).configurable??(s.configurable={}),this.config.configurable[cS]=this.input.resume),o&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");const l={};for(const[c,u,f]of l$e(this.input,this.checkpointPendingWrites))l[c]??(l[c]=[]),l[c].push([u,f]);if(Object.keys(l).length===0)throw new FU("Received empty Command input");for(const[c,u]of Object.entries(l))this.putWrites(c,u)}const i=(this.checkpointPendingWrites??[]).filter(o=>o[0]===fo).map(o=>o.slice(1));i.length>0&&_s(this.checkpoint,this.channels,[{name:au,writes:i,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);const a=yi(this.input)&&i.length>0;if(this.isResuming||a){for(const l in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,l)&&this.checkpoint.channel_versions[l]!==void 0){const c=this.checkpoint.channel_versions[l];this.checkpoint.versions_seen[_n]={...this.checkpoint.versions_seen[_n],[l]:c}}const o=await zf(Sf(XC(this.outputKeys,!0,this.channels),"values"));this._emit(o)}if(this.isResuming)this.input=tP;else if(a)await this._putCheckpoint({source:"input"}),this.input=i2;else{const o=await zf(mie(e,this.input));if(o.length>0){const l=pg(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step});this.updatedChannels=_s(this.checkpoint,this.channels,Object.values(l).concat([{name:au,writes:o,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),await this._putCheckpoint({source:"input"}),this.input=i2}else if(Mf in(this.config.configurable??{}))this.input=i2;else throw new FU(`Received no input writes for ${JSON.stringify(e,null,2)}`)}this.isNested||(this.config=sl(this.config,{[Mf]:this.isResuming}))}_emit(e){for(const[n,r]of e)if(this.stream.modes.has(n)&&this.stream.push([this.checkpointNamespace,n,r]),(n==="checkpoints"||n==="tasks")&&this.stream.modes.has("debug")){const i=n==="checkpoints"?this.step-1:this.step,a=new Date().toISOString(),s=n==="checkpoints"?"checkpoint":typeof r=="object"&&r!=null&&"result"in r?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:i,type:s,timestamp:a,payload:r}])}}_putCheckpoint(e){var a;const n=this.checkpointMetadata===e,r=this.checkpointer!=null&&(this.durability!=="exit"||n),i=s=>{var c,u,f;this.prevCheckpointConfig=(u=(c=this.checkpointConfig)==null?void 0:c.configurable)!=null&&u.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=sl(this.checkpointConfig,{[rc]:((f=this.config.configurable)==null?void 0:f.checkpoint_ns)??""});const o={...this.checkpoint.channel_versions},l=pS(this.checkpointPreviousVersions,o);this.checkpointPreviousVersions=o,this._checkpointerPutAfterPrevious({config:{...this.checkpointConfig},checkpoint:LE(s),metadata:{...this.checkpointMetadata},newVersions:l}),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_id:this.checkpoint.id}}};n||(this.checkpointMetadata={...e,step:this.step,parents:((a=this.config.configurable)==null?void 0:a[uo])??{}}),this.checkpoint=jh(this.checkpoint,r?this.channels:void 0,this.step,n?{id:this.checkpoint.id}:void 0),r&&i(this.checkpoint),n||(this.step+=1)}_flushPendingWrites(){var r;if(this.checkpointer==null||this.checkpointPendingWrites.length===0)return;const e=sl(this.checkpointConfig,{[rc]:((r=this.config.configurable)==null?void 0:r.checkpoint_ns)??"",[FR]:this.checkpoint.id}),n={};for(const[i,a,s]of this.checkpointPendingWrites)n[i]??(n[i]=[]),n[i].push([a,s]);for(const[i,a]of Object.entries(n))this.checkpointerPromises.push(this.checkpointer.putWrites(e,a,i))}_matchWrites(e){for(const[n,r,i]of this.checkpointPendingWrites){if(r===Ka||r===_n||r===es)continue;const a=Object.values(e).find(s=>s.id===n);a&&a.writes.push([r,i])}for(const n of Object.values(e))n.writes.length>0&&this._outputWrites(n.id,n.writes,!0)}};function j$e(t){return Jr(t==null?void 0:t.message)}var $$e=class extends cv{constructor(e){super();P(this,"name","StreamMessagesHandler");P(this,"streamFn");P(this,"metadatas",{});P(this,"seen",{});P(this,"emittedChatModelRunIds",{});P(this,"stableMessageIdMap",{});P(this,"lc_prefer_streaming",!0);this.streamFn=e}_emit(e,n,r,i=!1){var s;if(i&&n.id!==void 0&&this.seen[n.id]!==void 0)return;let a=n.id;r!=null&&(ek(n)?a??(a=`run-${r}-tool-${n.tool_call_id}`):((a==null||a===`run-${r}`)&&(a=this.stableMessageIdMap[r]??a??`run-${r}`),(s=this.stableMessageIdMap)[r]??(s[r]=a))),a!==n.id&&(n.id=a,n.lc_kwargs.id=a),n.id!=null&&(this.seen[n.id]=n),this.streamFn([e[0],"messages",[n,e[1]]])}handleChatModelStart(e,n,r,i,a,s,o,l){o&&(!s||!s.includes(N3e)&&!s.includes("nostream"))&&(this.metadatas[r]=[o.langgraph_checkpoint_ns.split("|"),{tags:s,name:l,...o}])}handleLLMNewToken(e,n,r,i,a,s){const o=s==null?void 0:s.chunk;this.emittedChatModelRunIds[r]=!0,this.metadatas[r]!==void 0&&(j$e(o)?this._emit(this.metadatas[r],o.message,r):this._emit(this.metadatas[r],new Oo({content:e}),r))}handleLLMEnd(e,n){var r,i;if(this.metadatas[n]!==void 0){if(!this.emittedChatModelRunIds[n]){const a=(i=(r=e.generations)==null?void 0:r[0])==null?void 0:i[0];Jr(a==null?void 0:a.message)&&this._emit(this.metadatas[n],a==null?void 0:a.message,n,!0),delete this.emittedChatModelRunIds[n]}delete this.metadatas[n],delete this.stableMessageIdMap[n]}}handleLLMError(e,n){delete this.metadatas[n]}handleChainStart(e,n,r,i,a,s,o,l){if(s!==void 0&&l===s.langgraph_node&&(a===void 0||!a.includes(ei))&&(this.metadatas[r]=[s.langgraph_checkpoint_ns.split("|"),{tags:a,name:l,...s}],typeof n=="object")){for(const c of Object.values(n))if((Jr(c)||gb(c))&&c.id!==void 0)this.seen[c.id]=c;else if(Array.isArray(c))for(const u of c)(Jr(u)||gb(u))&&u.id!==void 0&&(this.seen[u.id]=u)}}handleChainEnd(e,n){const r=this.metadatas[n];if(delete this.metadatas[n],r!==void 0){if(Jr(e))this._emit(r,e,n,!0);else if(Array.isArray(e))for(const i of e)Jr(i)&&this._emit(r,i,n,!0);else if(e!=null&&typeof e=="object"){for(const i of Object.values(e))if(Jr(i))this._emit(r,i,n,!0);else if(Array.isArray(i))for(const a of i)Jr(a)&&this._emit(r,a,n,!0)}}}handleChainError(e,n){delete this.metadatas[n]}};const M$e=500,L$e=2,D$e=128e3,F$e=3,B$e=[400,401,402,403,404,405,406,407,409],U$e=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||t.name==="GraphValueError"||(t==null?void 0:t.code)==="ECONNABORTED")return!1;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);return!(e&&B$e.includes(+e)||((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota")};async function _ie(t,e,n,r){var u;const i=t.retry_policy??e;let a=i!==void 0?i.initialInterval??M$e:0,s=0,o,l,{config:c}=t;for(n&&(c=sl(c,n)),c={...c,signal:r};!(r!=null&&r.aborted);){t.writes.splice(0,t.writes.length),o=void 0;try{l=await t.proc.invoke(t.input,c);break}catch(f){if(o=f,o.pregelTaskId=t.id,RRe(o)){const p=(u=c==null?void 0:c.configurable)==null?void 0:u.checkpoint_ns,m=o.command;if(m.graph===p){for(const y of t.writers)await y.invoke(m,c);o=void 0;break}else if(m.graph===Ns.PARENT){const y=D3e(p);o.command=new Ns({...o.command,graph:y})}}if(nS(o)||i===void 0||(s+=1,s>=(i.maxAttempts??F$e))||!(i.retryOn??U$e)(o))break;a=Math.min(i.maxInterval??D$e,a*(i.backoffFactor??L$e));const d=i.jitter?Math.floor(a+Math.random()*1e3):a;await new Promise(p=>setTimeout(p,d));const h=o.name??o.constructor.unminifiable_name??o.constructor.name;((i==null?void 0:i.logWarning)??!0)&&console.log(`Retrying task "${String(t.name)}" after ${a.toFixed(2)}ms (attempt ${s}) after ${h}: ${o}`),c=sl(c,{[Mf]:!0})}}return{task:t,result:l,error:o,signalAborted:r==null?void 0:r.aborted}}const HR=Symbol.for("promiseAdded");function z$e(){const t={next:()=>{},wait:Promise.resolve(HR)};function e(n){t.next=()=>{t.wait=new Promise(e),n(HR)}}return t.wait=new Promise(e),t}var V$e=class{constructor({loop:t,nodeFinished:e}){P(this,"nodeFinished");P(this,"loop");this.loop=t,this.nodeFinished=e}async tick(t={}){const{timeout:e,retryPolicy:n,onStepWrite:r,maxConcurrency:i}=t,a=new Set;let s;const o=new AbortController,l=o.signal,c=e?AbortSignal.timeout(e):void 0,u=Object.values(this.loop.tasks).filter(p=>p.writes.length===0),{signals:f,disposeCombinedSignal:d}=this._initializeAbortSignals({exceptionSignal:l,stepTimeoutSignal:c,signal:t.signal}),h=this._executeTasksWithRetry(u,{signals:f,retryPolicy:n,maxConcurrency:i});for await(const{task:p,error:m,signalAborted:y}of h)this._commit(p,m),Uh(m)||nS(m)&&!Uh(s)?s=m:m&&(a.size===0||!y)&&(o.abort(),a.add(m));if(d==null||d(),r==null||r(this.loop.step,Object.values(this.loop.tasks).map(p=>p.writes).flat()),a.size===1)throw Array.from(a)[0];if(a.size>1)throw new AggregateError(Array.from(a),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(Uh(s)||nS(s)&&this.loop.isNested)throw s}_initializeAbortSignals({exceptionSignal:t,stepTimeoutSignal:e,signal:n}){var c;const r=((c=this.loop.config.configurable)==null?void 0:c[KU])??{},i=r.externalAbortSignal??n,a=e??r.timeoutAbortSignal,{signal:s,dispose:o}=VE(i,a,t),l={externalAbortSignal:i,timeoutAbortSignal:a,composedAbortSignal:s};return this.loop.config=sl(this.loop.config,{[KU]:l}),{signals:l,disposeCombinedSignal:o}}async*_executeTasksWithRetry(t,e){var d,h,p;const{retryPolicy:n,maxConcurrency:r,signals:i}=e??{},a=z$e(),s={},o={executingTasksMap:s,barrier:a,retryPolicy:n,scheduleTask:async(m,y,g)=>this.loop.acceptPush(m,y,g)};if((d=i==null?void 0:i.composedAbortSignal)!=null&&d.aborted)throw new Error("Abort");let l=0,c;const u=VE(i==null?void 0:i.externalAbortSignal,i==null?void 0:i.timeoutAbortSignal),f=u.signal?new Promise((m,y)=>{var g;c=()=>y(new Error("Abort")),(g=u.signal)==null||g.addEventListener("abort",c,{once:!0})}):void 0;for(;(l===0||Object.keys(s).length>0)&&t.length;){for(;Object.values(s).length<(r??t.length)&&l<t.length;l+=1){const y=t[l];s[y.id]=_ie(y,n,{[aL]:gS==null?void 0:gS.bind(o,this,y)},i==null?void 0:i.composedAbortSignal).catch(g=>{var v;return{task:y,error:g,signalAborted:(v=i==null?void 0:i.composedAbortSignal)==null?void 0:v.aborted}})}const m=await Promise.race([...Object.values(s),...f?[f]:[],a.wait]);m!==HR&&(yield m,c!=null&&((h=u.signal)==null||h.removeEventListener("abort",c),(p=u.dispose)==null||p.call(u)),delete s[m.task.id])}}_commit(t,e){var n;if(e!==void 0)if(Uh(e)){if(e.interrupts.length){const r=e.interrupts.map(a=>[_n,a]),i=t.writes.filter(a=>a[0]===es);i.length&&r.push(...i),this.loop.putWrites(t.id,r)}}else nS(e)&&t.writes.length?this.loop.putWrites(t.id,t.writes):this.loop.putWrites(t.id,[[Ka,{message:e.message,name:e.name}]]);else this.nodeFinished&&(((n=t.config)==null?void 0:n.tags)==null||!t.config.tags.includes(ei))&&this.nodeFinished(String(t.name)),t.writes.length===0&&t.writes.push([sL,null]),this.loop.putWrites(t.id,t.writes)}};async function gS(t,e,n,r,i,a={}){var f,d;const s=(d=(f=e.config)==null?void 0:f.configurable)==null?void 0:d[pd];if(!s)throw new Error(`BUG: No scratchpad found on task ${e.name}__${e.id}`);const o=s.callCounter;s.callCounter+=1;const l=new d$e({func:n,name:r,input:i,cache:a.cache,retry:a.retry,callbacks:a.callbacks}),c=await this.scheduleTask(e,o,l);if(!c)return;const u=this.executingTasksMap[c.id];if(u!==void 0)return u;if(c.writes.length>0){const h=c.writes.filter(([m])=>m===vy),p=c.writes.filter(([m])=>m===Ka);if(h.length>0){if(h.length===1)return Promise.resolve(h[0][1]);throw new Error(`BUG: multiple returns found for task ${c.name}__${c.id}`)}if(p.length>0){if(p.length===1){const m=p[0][1],y=m instanceof Error?m:new Error(String(m));return Promise.reject(y)}throw new Error(`BUG: multiple errors found for task ${c.name}__${c.id}`)}return}else{const h=_ie(c,a.retry,{[aL]:gS.bind(this,t,c)});return this.executingTasksMap[c.id]=h,this.barrier.next(),h.then(({result:p,error:m})=>m?Promise.reject(m):p)}}var Yc=class extends Error{constructor(t){super(t),this.name="GraphValidationError"}};function W$e({nodes:t,channels:e,inputChannels:n,outputChannels:r,streamChannels:i,interruptAfterNodes:a,interruptBeforeNodes:s}){if(!e)throw new Yc("Channels not provided");const o=new Set,l=new Set;for(const[c,u]of Object.entries(t)){if(c===_n)throw new Yc(`"Node name ${_n} is reserved"`);if(u.constructor===Pb)u.triggers.forEach(f=>o.add(f));else throw new Yc(`Invalid node type ${typeof u}, expected PregelNode`)}for(const c of o)if(!(c in e))throw new Yc(`Subscribed channel '${String(c)}' not in channels`);if(Array.isArray(n)){if(n.every(c=>!o.has(c)))throw new Yc(`None of the input channels ${n} are subscribed to by any node`)}else if(!o.has(n))throw new Yc(`Input channel ${String(n)} is not subscribed to by any node`);Array.isArray(r)?r.forEach(c=>l.add(c)):l.add(r),i&&!Array.isArray(i)?l.add(i):Array.isArray(i)&&i.forEach(c=>l.add(c));for(const c of l)if(!(c in e))throw new Yc(`Output channel '${String(c)}' not in channels`);if(a&&a!=="*"){for(const c of a)if(!(c in t))throw new Yc(`Node ${String(c)} not in nodes`)}if(s&&s!=="*"){for(const c of s)if(!(c in t))throw new Yc(`Node ${String(c)} not in nodes`)}}function i9(t,e){if(Array.isArray(t)){for(const n of t)if(!(n in e))throw new Error(`Key ${String(n)} not found in channels`)}else if(!(t in e))throw new Error(`Key ${String(t)} not found in channels`)}var H$e=class xie extends Bd{constructor(n){super();P(this,"lc_graph_name","Topic");P(this,"unique",!1);P(this,"accumulate",!1);P(this,"seen");P(this,"values");this.unique=(n==null?void 0:n.unique)??this.unique,this.accumulate=(n==null?void 0:n.accumulate)??this.accumulate,this.seen=new Set,this.values=[]}fromCheckpoint(n){const r=new xie({unique:this.unique,accumulate:this.accumulate});return typeof n<"u"&&(r.seen=new Set(n[0]),r.values=n[1]),r}update(n){let r=!1;this.accumulate||(r=this.values.length>0,this.values=[]);const i=n.flat();if(i.length>0)if(this.unique)for(const a of i)this.seen.has(a)||(r=!0,this.seen.add(a),this.values.push(a));else r=!0,this.values.push(...i);return r}get(){if(this.values.length===0)throw new $i;return this.values}checkpoint(){return[[...this.seen],this.values]}isAvailable(){return this.values.length!==0}},q$e=class{static subscribeTo(t,e){const{key:n,tags:r}={key:void 0,tags:void 0,...e??{}};if(Array.isArray(t)&&n!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let i;return typeof t=="string"?n?i={[n]:t}:i=[t]:i=Object.fromEntries(t.map(a=>[a,a])),new Pb({channels:i,triggers:Array.isArray(t)?t:[t],tags:r})}static writeTo(t,e){const n=[];for(const r of t)n.push({channel:r,value:sp,skipNone:!1});for(const[r,i]of Object.entries(e??{}))fn.isRunnable(i)||typeof i=="function"?n.push({channel:r,value:sp,skipNone:!0,mapper:Zi(i)}):n.push({channel:r,value:i,skipNone:!1});return new ka(n)}},G$e=class extends fn{constructor(){super(...arguments);P(this,"lc_namespace",["langgraph","pregel"])}invoke(e,n){throw new Error("Not implemented")}withConfig(e){return super.withConfig(e)}stream(e,n){return super.stream(e,n)}},K$e=class extends G$e{constructor(e){super(e);P(this,"lc_namespace",["langgraph","pregel"]);P(this,"lg_is_pregel",!0);P(this,"nodes");P(this,"channels");P(this,"inputChannels");P(this,"outputChannels");P(this,"autoValidate",!0);P(this,"streamMode",["values"]);P(this,"streamChannels");P(this,"interruptAfter");P(this,"interruptBefore");P(this,"stepTimeout");P(this,"debug",!1);P(this,"checkpointer");P(this,"retryPolicy");P(this,"config");P(this,"store");P(this,"cache");P(this,"userInterrupt");P(this,"triggerToNodes",{});let{streamMode:n}=e;if(n!=null&&!Array.isArray(n)&&(n=[n]),this.nodes=e.nodes,this.channels=e.channels,Ts in this.channels&&"lc_graph_name"in this.channels[Ts]&&this.channels[Ts].lc_graph_name!=="Topic")throw new Error(`Channel '${Ts}' is reserved and cannot be used in the graph.`);this.channels[Ts]=new H$e({accumulate:!1}),this.autoValidate=e.autoValidate??this.autoValidate,this.streamMode=n??this.streamMode,this.inputChannels=e.inputChannels,this.outputChannels=e.outputChannels,this.streamChannels=e.streamChannels??this.streamChannels,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.stepTimeout=e.stepTimeout??this.stepTimeout,this.debug=e.debug??this.debug,this.checkpointer=e.checkpointer,this.retryPolicy=e.retryPolicy,this.config=e.config,this.store=e.store,this.cache=e.cache,this.name=e.name,this.triggerToNodes=e.triggerToNodes??this.triggerToNodes,this.userInterrupt=e.userInterrupt,this.autoValidate&&this.validate()}static lc_name(){return"LangGraph"}withConfig(e){const n=go(this.config,e);return new this.constructor({...this,config:n})}validate(){var e;W$e({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore});for(const[n,r]of Object.entries(this.nodes))for(const i of r.triggers)(e=this.triggerToNodes)[i]??(e[i]=[]),this.triggerToNodes[i].push(n);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}async getGraphAsync(e){return this.getGraph(e)}*getSubgraphs(e,n){var r;for(const[i,a]of Object.entries(this.nodes)){if(e!==void 0&&!e.startsWith(i))continue;const s=(r=a.subgraphs)!=null&&r.length?a.subgraphs:[a.bound];for(const o of s){const l=pie(o);if(l!==void 0){if(i===e){yield[i,l];return}if(e===void 0&&(yield[i,l]),n){let c=e;e!==void 0&&(c=e.slice(i.length+1));for(const[u,f]of l.getSubgraphs(c,n))yield[`${i}${bi}${u}`,f]}}}}}async*getSubgraphsAsync(e,n){yield*this.getSubgraphs(e,n)}async _prepareStateSnapshot({config:e,saved:n,subgraphCheckpointer:r,applyPendingWrites:i=!1}){var d,h,p,m,y,g,v,w;if(n===void 0)return{values:{},next:[],config:e,tasks:[]};const a=DE(this.channels,n.checkpoint);if((d=n.pendingWrites)!=null&&d.length){const _=n.pendingWrites.filter(([x,E])=>x===fo).map(([x,E,T])=>[String(E),T]);_.length>0&&_s(n.checkpoint,a,[{name:au,writes:_,triggers:[]}],void 0,this.triggerToNodes)}const s=Object.values(pg(n.checkpoint,n.pendingWrites,this.nodes,a,n.config,!0,{step:(((h=n.metadata)==null?void 0:h.step)??-1)+1,store:this.store})),o=await zf(this.getSubgraphsAsync()),l=((p=n.config.configurable)==null?void 0:p.checkpoint_ns)??"",c={};for(const _ of s){const x=o.find(([T])=>T===_.name);if(!x)continue;let E=`${String(_.name)}${_u}${_.id}`;if(l&&(E=`${l}${bi}${E}`),r===void 0){const T={configurable:{thread_id:(m=n.config.configurable)==null?void 0:m.thread_id,checkpoint_ns:E}};c[_.id]=T}else{const T={configurable:{[Yr]:r,thread_id:(y=n.config.configurable)==null?void 0:y.thread_id,checkpoint_ns:E}},O=x[1];c[_.id]=await O.getState(T,{subgraphs:!0})}}if(i&&((g=n.pendingWrites)!=null&&g.length)){const _=Object.fromEntries(s.map(E=>[E.id,E]));for(const[E,T,O]of n.pendingWrites)[Ka,_n,rS].includes(T)||E in _&&_[E].writes.push([String(T),O]);const x=s.filter(E=>E.writes.length>0);x.length>0&&_s(n.checkpoint,a,x,void 0,this.triggerToNodes)}let u=n==null?void 0:n.metadata;u&&((w=(v=n==null?void 0:n.config)==null?void 0:v.configurable)!=null&&w.thread_id)&&(u={...u,thread_id:n.config.configurable.thread_id});const f=s.filter(_=>_.writes.length===0).map(_=>_.name);return{values:Op(a,this.streamChannelsAsIs),next:f,tasks:yie(s,(n==null?void 0:n.pendingWrites)??[],c,this.streamChannelsAsIs),metadata:u,config:mh(n.config,n.metadata),createdAt:n.checkpoint.ts,parentConfig:n.parentConfig}}async getState(e,n){var o,l,c,u;const r=((o=e.configurable)==null?void 0:o[Yr])??this.checkpointer;if(!r)throw new tS("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});const i=((l=e.configurable)==null?void 0:l.checkpoint_ns)??"";if(i!==""&&((c=e.configurable)==null?void 0:c[Yr])===void 0){const f=KC(i);for await(const[d,h]of this.getSubgraphsAsync(f,!0))if(d===f)return await h.getState(Em(e,{[Yr]:r}),{subgraphs:n==null?void 0:n.subgraphs});throw new Error(`Subgraph with namespace "${f}" not found.`)}const a=go(this.config,e),s=await r.getTuple(e);return await this._prepareStateSnapshot({config:a,saved:s,subgraphCheckpointer:n!=null&&n.subgraphs?r:void 0,applyPendingWrites:!((u=e.configurable)!=null&&u.checkpoint_id)})}async*getStateHistory(e,n){var s,o,l;const r=((s=e.configurable)==null?void 0:s[Yr])??this.checkpointer;if(!r)throw new tS("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});const i=((o=e.configurable)==null?void 0:o.checkpoint_ns)??"";if(i!==""&&((l=e.configurable)==null?void 0:l[Yr])===void 0){const c=KC(i);for await(const[u,f]of this.getSubgraphsAsync(c,!0))if(u===c){yield*f.getStateHistory(Em(e,{[Yr]:r}),n);return}throw new Error(`Subgraph with namespace "${c}" not found.`)}const a=go(this.config,e,{configurable:{checkpoint_ns:i}});for await(const c of r.list(a,n))yield this._prepareStateSnapshot({config:c.config,saved:c})}async bulkUpdateState(e,n){var o,l,c;const r=((o=e.configurable)==null?void 0:o[Yr])??this.checkpointer;if(!r)throw new tS("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});if(n.length===0)throw new Error("No supersteps provided");if(n.some(u=>u.updates.length===0))throw new Error("No updates provided");const i=((l=e.configurable)==null?void 0:l.checkpoint_ns)??"";if(i!==""&&((c=e.configurable)==null?void 0:c[Yr])===void 0){const u=KC(i);for await(const[,f]of this.getSubgraphsAsync(u,!0))return await f.bulkUpdateState(Em(e,{[Yr]:r}),n);throw new Error(`Subgraph "${u}" not found`)}const a=async(u,f)=>{var N,j,U,B,V,Y,X,z,G,ae,ue;const d=this.config?go(this.config,u):u,h=await r.getTuple(d),p=h!==void 0?LE(h.checkpoint):Xre(),m={...h==null?void 0:h.checkpoint.channel_versions},y=((N=h==null?void 0:h.metadata)==null?void 0:N.step)??-1;let g=Em(d,{checkpoint_ns:((j=d.configurable)==null?void 0:j.checkpoint_ns)??""}),v=d.metadata??{};h!=null&&h.config.configurable&&(g=Em(d,h.config.configurable),v={...h.metadata,...v});const{values:w,asNode:_}=f[0];if(w==null&&_===void 0){if(f.length>1)throw new ar("Cannot create empty checkpoint with multiple updates");return mh(await r.put(g,jh(p,void 0,y),{source:"update",step:y+1,parents:((U=h==null?void 0:h.metadata)==null?void 0:U.parents)??{}},{}),h?h.metadata:void 0)}const x=DE(this.channels,p);if(w===null&&_===gn){if(f.length>1)throw new ar("Cannot apply multiple updates when clearing state");if(h){const L=pg(p,h.pendingWrites||[],this.nodes,x,h.config,!0,{step:(((B=h.metadata)==null?void 0:B.step)??-1)+1,checkpointer:r,store:this.store}),K=(h.pendingWrites||[]).filter(Q=>Q[0]===fo).map(Q=>Q.slice(1));K.length>0&&_s(p,x,[{name:au,writes:K,triggers:[]}],r.getNextVersion.bind(r),this.triggerToNodes);for(const[Q,re,F]of h.pendingWrites||[])[Ka,_n,rS].includes(re)||Q in L&&L[Q].writes.push([re,F]);_s(p,x,Object.values(L),r.getNextVersion.bind(r),this.triggerToNodes)}return mh(await r.put(g,jh(p,x,y),{...v,source:"update",step:y+1,parents:((V=h==null?void 0:h.metadata)==null?void 0:V.parents)??{}},pS(m,p.channel_versions)),h?h.metadata:void 0)}if(_===T3e){if(f.length>1)throw new ar("Cannot copy checkpoint with multiple updates");if(h==null)throw new ar("Cannot copy a non-existent checkpoint");const L=re=>!Array.isArray(re)||re.length===0?!1:re.every(F=>Array.isArray(F)&&F.length===2),K=jh(p,void 0,y),Q=await r.put(h.parentConfig??Em(h.config,{checkpoint_id:void 0}),K,{source:"fork",step:y+1,parents:((Y=h.metadata)==null?void 0:Y.parents)??{}},{});if(L(w)){const re=pg(K,h.pendingWrites,this.nodes,x,Q,!1,{step:y+2}),F=Object.values(re).reduce((ie,{name:q,id:fe})=>(ie[q]??(ie[q]=[]),ie[q].push({id:fe}),ie),{}),$=w.reduce((ie,q)=>{var Oe,ee;const[fe,me]=q;ie[me]??(ie[me]=[]);const de=ie[me].length,_e=(ee=(Oe=F[me])==null?void 0:Oe[de])==null?void 0:ee.id;return ie[me].push({values:fe,asNode:me,taskId:_e}),ie},{});return a(mh(Q,h.metadata),Object.values($).flat())}return mh(Q,h.metadata)}if(_===au){if(f.length>1)throw new ar("Cannot apply multiple updates when updating as input");const L=await zf(mie(this.inputChannels,w));if(L.length===0)throw new ar(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);_s(p,x,[{name:au,writes:L,triggers:[]}],r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);const K=((X=h==null?void 0:h.metadata)==null?void 0:X.step)!=null?h.metadata.step+1:-1,Q=await r.put(g,jh(p,x,K),{source:"input",step:K,parents:((z=h==null?void 0:h.metadata)==null?void 0:z.parents)??{}},pS(m,p.channel_versions));return await r.putWrites(Q,L,fg(au,p.id)),mh(Q,h?h.metadata:void 0)}if(((G=d.configurable)==null?void 0:G.checkpoint_id)===void 0&&(h==null?void 0:h.pendingWrites)!==void 0&&h.pendingWrites.length>0){const L=pg(p,h.pendingWrites,this.nodes,x,h.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(((ae=h.metadata)==null?void 0:ae.step)??-1)+1}),K=(h.pendingWrites??[]).filter(re=>re[0]===fo).map(re=>re.slice(1));K.length>0&&_s(h.checkpoint,x,[{name:au,writes:K,triggers:[]}],void 0,this.triggerToNodes);for(const[re,F,$]of h.pendingWrites)[Ka,_n,rS].includes(F)||L[re]===void 0||L[re].writes.push([F,$]);const Q=Object.values(L).filter(re=>re.writes.length>0);Q.length>0&&_s(p,x,Q,void 0,this.triggerToNodes)}const E=Object.values(p.versions_seen).map(L=>Object.values(L)).flat().find(L=>!!L),T=[];if(f.length===1){let{values:L,asNode:K,taskId:Q}=f[0];if(K===void 0&&Object.keys(this.nodes).length===1)[K]=Object.keys(this.nodes);else if(K===void 0&&E===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(K=this.inputChannels);else if(K===void 0){const re=Object.entries(p.versions_seen).map(([F,$])=>Object.values($).map(ie=>[ie,F])).flat().filter(([F,$])=>$!==_n).sort(([F],[$])=>Jre(F,$));re&&(re.length===1?K=re[0][1]:re[re.length-1][0]!==re[re.length-2][0]&&(K=re[re.length-1][1]))}if(K===void 0)throw new ar('Ambiguous update, specify "asNode"');T.push({values:L,asNode:K,taskId:Q})}else for(const{asNode:L,values:K,taskId:Q}of f){if(L==null)throw new ar('"asNode" is required when applying multiple updates');T.push({values:K,asNode:L,taskId:Q})}const O=[];for(const{asNode:L,values:K,taskId:Q}of T){if(this.nodes[L]===void 0)throw new ar(`Node "${L.toString()}" does not exist`);const re=this.nodes[L].getWriters();if(!re.length)throw new ar(`No writers found for node "${L.toString()}"`);O.push({name:L,input:K,proc:re.length>1?Mu.from(re,{omitSequenceTags:!0}):re[0],writes:[],triggers:[_n],id:Q??fg(_n,p.id),writers:[]})}for(const L of O)await L.proc.invoke(L.input,kn({...d,store:(d==null?void 0:d.store)??this.store},{runName:d.runName??`${this.getName()}UpdateState`,configurable:{[hd]:K=>L.writes.push(...K),[ap]:(K,Q=!1)=>mS(p,x,L,K,Q)}}));for(const L of O){const K=L.writes.filter(Q=>Q[0]!==As);h!==void 0&&K.length>0&&await r.putWrites(g,K,L.id)}_s(p,x,O,r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);const R=pS(m,p.channel_versions),M=await r.put(g,jh(p,x,y+1),{source:"update",step:y+1,parents:((ue=h==null?void 0:h.metadata)==null?void 0:ue.parents)??{}},R);for(const L of O){const K=L.writes.filter(Q=>Q[0]===As);K.length>0&&await r.putWrites(M,K,L.id)}return mh(M,h?h.metadata:void 0)};let s=e;for(const{updates:u}of n)s=await a(s,u);return s}async updateState(e,n,r){return this.bulkUpdateState(e,[{updates:[{values:n,asNode:r}]}])}_defaults(e){var x,E,T;const{debug:n,streamMode:r,inputKeys:i,outputKeys:a,interruptAfter:s,interruptBefore:o,...l}=e;let c=!0;const u=n!==void 0?n:this.debug;let f=a;f===void 0?f=this.streamChannelsAsIs:i9(f,this.channels);let d=i;d===void 0?d=this.inputChannels:i9(d,this.channels);const h=o??this.interruptBefore??[],p=s??this.interruptAfter??[];let m;r!==void 0?(m=Array.isArray(r)?r:[r],c=typeof r=="string"):(((x=e.configurable)==null?void 0:x[bw])!==void 0?m=["values"]:m=this.streamMode,c=!0);let y;if(this.checkpointer===!1)y=void 0;else if(e!==void 0&&((E=e.configurable)==null?void 0:E[Yr])!==void 0)y=e.configurable[Yr];else{if(this.checkpointer===!0)throw new Error("checkpointer: true cannot be used for root graphs.");y=this.checkpointer}const g=e.store??this.store,v=e.cache??this.cache;if(e.durability!=null&&e.checkpointDuring!=null)throw new Error("Cannot use both `durability` and `checkpointDuring` at the same time.");const w=(()=>{if(e.checkpointDuring!=null)return e.checkpointDuring===!1?"exit":"async"})(),_=e.durability??w??((T=e==null?void 0:e.configurable)==null?void 0:T[rie])??"async";return[u,m,d,f,l,h,p,y,g,c,v,_]}async stream(e,n){var s;const r=new AbortController,i={recursionLimit:(s=this.config)==null?void 0:s.recursionLimit,...n,signal:VE(n==null?void 0:n.signal,r.signal).signal},a=await super.stream(e,i);return new t9((n==null?void 0:n.encoding)==="text/event-stream"?C$e(a):a,r)}streamEvents(e,n,r){var s,o;const i=new AbortController,a={recursionLimit:(s=this.config)==null?void 0:s.recursionLimit,...n,callbacks:f$e((o=this.config)==null?void 0:o.callbacks,n==null?void 0:n.callbacks),signal:VE(n==null?void 0:n.signal,i.signal).signal};return new t9(super.streamEvents(e,a,r),i)}async _validateInput(e){return e}async _validateContext(e){return e}async*_streamIterator(e,n){var N;const r="version"in(n??{})?void 0:(n==null?void 0:n.encoding)??void 0,i=n==null?void 0:n.subgraphs,a=aie(this.config,n);if(a.recursionLimit===void 0||a.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&a.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');const s=await this._validateInput(e),{runId:o,...l}=a,[c,u,,f,d,h,p,m,y,g,v,w]=this._defaults(l);typeof d.context<"u"?d.context=await this._validateContext(d.context):d.configurable=await this._validateContext(d.configurable);const _=new wie({modes:new Set(u)});if(this.checkpointer===!0){d.configurable??(d.configurable={});const j=d.configurable[rc]??"";d.configurable[rc]=j.split(bi).map(U=>U.split(_u)[0]).join(bi)}if(u.includes("messages")){const j=new $$e(B=>_.push(B)),{callbacks:U}=d;if(U===void 0)d.callbacks=[j];else if(Array.isArray(U))d.callbacks=U.concat(j);else{const B=U.copy();B.addHandler(j,!0),d.callbacks=B}}d.writer??(d.writer=j=>{var B,V,Y;if(!u.includes("custom"))return;const U=(Y=(V=(B=L3e())==null?void 0:B.configurable)==null?void 0:V[rc])==null?void 0:Y.split(bi).slice(0,-1);_.push([U??[],"custom",j])}),d.interrupt??(d.interrupt=this.userInterrupt??i$e);const x=await((N=await Qa(d))==null?void 0:N.handleChainStart(this.toJSON(),u$e(e,"input"),o,void 0,void 0,void 0,(d==null?void 0:d.runName)??this.getName())),E=iL(this.channels);let T,O;const M=(async()=>{var j,U,B;try{T=await R$e.initialize({input:s,config:d,checkpointer:m,nodes:this.nodes,channelSpecs:E,outputKeys:f,streamKeys:this.streamChannelsAsIs,store:y,cache:v,stream:_,interruptAfter:p,interruptBefore:h,manager:x,debug:this.debug,triggerToNodes:this.triggerToNodes,durability:w});const V=new V$e({loop:T,nodeFinished:(j=d.configurable)==null?void 0:j[P3e]});n!=null&&n.subgraphs&&(T.config.configurable={...T.config.configurable,[BE]:T.stream}),await this._runLoop({loop:T,runner:V,debug:c,config:d}),w==="sync"&&await Promise.all((T==null?void 0:T.checkpointerPromises)??[])}catch(V){O=V}finally{try{T&&(await((U=T.store)==null?void 0:U.stop()),await((B=T.cache)==null?void 0:B.stop())),await Promise.all((T==null?void 0:T.checkpointerPromises)??[])}catch(V){O=O??V}O?_.error(O):_.close()}})();try{for await(const j of _){if(j===void 0)throw new Error("Data structure error.");const[U,B,V]=j;if(u.includes(B)){if(r==="text/event-stream"){i?yield[U,B,V]:yield[null,B,V];continue}i&&!g?yield[U,B,V]:g?i?yield[U,V]:yield V:yield[B,V]}}}catch(j){throw await(x==null?void 0:x.handleChainError(O)),j}finally{await M}await(x==null?void 0:x.handleChainEnd((T==null?void 0:T.output)??{},o,void 0,void 0,void 0))}async invoke(e,n){const r=(n==null?void 0:n.streamMode)??"values",i={...n,outputKeys:(n==null?void 0:n.outputKeys)??this.outputChannels,streamMode:r,encoding:void 0},a=[],s=await this.stream(e,i),o=[];let l;for await(const c of s)r==="values"?iie(c)?o.push(c[_n]):l=c:a.push(c);if(r==="values"){if(o.length>0){const c=o.flat(1);if(l==null)return{[_n]:c};if(typeof l=="object")return{...l,[_n]:c}}return l}return a}async _runLoop(e){const{loop:n,runner:r,debug:i,config:a}=e;let s;try{for(;await n.tick({inputKeys:this.inputChannels});){for(const{task:o}of await n._matchCachedWrites())n._outputWrites(o.id,o.writes,!0);i&&A$e(n.checkpointMetadata.step,n.channels,this.streamChannelsList),i&&vie(n.step,Object.values(n.tasks)),await r.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(o,l)=>{i&&k$e(o,l,this.streamChannelsList)},maxConcurrency:a.maxConcurrency,signal:a.signal})}if(n.status==="out_of_steps")throw new IRe([`Recursion limit of ${a.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(o){if(s=o,!await n.finishAndHandleError(s))throw o}finally{s===void 0&&await n.finishAndHandleError()}}async clearCache(){var e;await((e=this.cache)==null?void 0:e.clear([]))}},by=class Sie extends Bd{constructor(n=!0){super();P(this,"lc_graph_name","EphemeralValue");P(this,"guard");P(this,"value",[]);this.guard=n}fromCheckpoint(n){const r=new Sie(this.guard);return typeof n<"u"&&(r.value=[n]),r}update(n){if(n.length===0){const r=this.value.length>0;return this.value=[],r}if(n.length!==1&&this.guard)throw new ar("EphemeralValue can only receive one value per step.");return this.value=[n[n.length-1]],!0}get(){if(this.value.length===0)throw new $i;return this.value[0]}checkpoint(){if(this.value.length===0)throw new $i;return this.value[0]}isAvailable(){return this.value.length!==0}},Eie=class{constructor(t){P(this,"path");P(this,"ends");fn.isRunnable(t.path)?this.path=t.path:this.path=Zi(t.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(t.pathMap)?t.pathMap.reduce((e,n)=>(e[n]=n,e),{}):t.pathMap}run(t,e){return ka.registerWriter(new Ud({name:"<branch_run>",trace:!1,func:async(n,r)=>{try{return await this._route(n,r,t,e)}catch(i){throw i.name===xne.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),i}}}))}async _route(t,e,n,r){let i=await this.path.invoke(r?r(e):t,e);Array.isArray(i)||(i=[i]);let a;if(this.ends?a=i.map(s=>La(s)?s:this.ends[s]):a=i,a.some(s=>!s))throw new Error("Branch condition returned unknown or null destination");if(a.filter(La).some(s=>s.node===gn))throw new ar("Cannot send a packet to the END node");return await n(a,e)??t}},Y$e=class{constructor(){P(this,"nodes");P(this,"edges");P(this,"branches");P(this,"entryPoint");P(this,"compiled",!1);this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(t){this.compiled&&console.warn(t)}get allEdges(){return this.edges}addNode(...t){function e(r){return r.length>=1&&typeof r[0]!="string"}const n=e(t)?Array.isArray(t[0])?t[0]:Object.entries(t[0]):[[t[0],t[1],t[2]]];if(n.length===0)throw new Error("No nodes provided in `addNode`");for(const[r,i,a]of n){for(const o of[bi,_u])if(r.includes(o))throw new Error(`"${o}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),r in this.nodes)throw new Error(`Node \`${r}\` already present.`);if(r===gn)throw new Error(`Node \`${r}\` is reserved.`);const s=Zi(i);this.nodes[r]={runnable:s,metadata:a==null?void 0:a.metadata,subgraphs:lL(s)?[s]:a==null?void 0:a.subgraphs,ends:a==null?void 0:a.ends}}return this}addEdge(t,e){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),t===gn)throw new Error("END cannot be a start node");if(e===Dn)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([n])=>n===t)&&!("channels"in this))throw new Error(`Already found path for ${t}. For multiple edges, use StateGraph.`);return this.edges.add([t,e]),this}addConditionalEdges(t,e,n){var a,s;const r=typeof t=="object"?t:{source:t,path:e,pathMap:n};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!fn.isRunnable(r.path)){const o=Array.isArray(r.pathMap)?r.pathMap.join(","):Object.keys(r.pathMap??{}).join(",");r.path=Zi(r.path).withConfig({runName:`Branch<${r.source}${o!==""?`,${o}`:""}>`.slice(0,63)})}const i=r.path.getName()==="RunnableLambda"?"condition":r.path.getName();if(this.branches[r.source]&&this.branches[r.source][i])throw new Error(`Condition \`${i}\` already present for node \`${t}\``);return(a=this.branches)[s=r.source]??(a[s]={}),this.branches[r.source][i]=new Eie(r),this}setEntryPoint(t){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(Dn,t)}setFinishPoint(t){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(t,gn)}compile({checkpointer:t,interruptBefore:e,interruptAfter:n,name:r}={}){this.validate([...Array.isArray(e)?e:[],...Array.isArray(n)?n:[]]);const i=new Aie({builder:this,checkpointer:t,interruptAfter:n,interruptBefore:e,autoValidate:!1,nodes:{},channels:{[Dn]:new by,[gn]:new by},inputChannels:Dn,outputChannels:gn,streamChannels:[],streamMode:"values",name:r});for(const[a,s]of Object.entries(this.nodes))i.attachNode(a,s);for(const[a,s]of this.edges)i.attachEdge(a,s);for(const[a,s]of Object.entries(this.branches))for(const[o,l]of Object.entries(s))i.attachBranch(a,o,l);return i.validate()}validate(t){const e=new Set([...this.allEdges].map(([r,i])=>r));for(const[r]of Object.entries(this.branches))e.add(r);for(const r of e)if(r!==Dn&&!(r in this.nodes))throw new Error(`Found edge starting at unknown node \`${r}\``);const n=new Set([...this.allEdges].map(([r,i])=>i));for(const[r,i]of Object.entries(this.branches))for(const a of Object.values(i))if(a.ends!=null)for(const s of Object.values(a.ends))n.add(s);else{n.add(gn);for(const s of Object.keys(this.nodes))s!==r&&n.add(s)}for(const r of Object.values(this.nodes))for(const i of r.ends??[])n.add(i);for(const r of Object.keys(this.nodes))if(!n.has(r))throw new jRe([`Node \`${r}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(const r of n)if(r!==gn&&!(r in this.nodes))throw new Error(`Found edge ending at unknown node \`${r}\``);if(t){for(const r of t)if(!(r in this.nodes))throw new Error(`Interrupt node \`${r}\` is not present`)}this.compiled=!0}},Aie=class extends K$e{constructor({builder:e,...n}){super(n);P(this,"builder");this.builder=e}attachNode(e,n){this.channels[e]=new by,this.nodes[e]=new Pb({channels:[],triggers:[],metadata:n.metadata,subgraphs:n.subgraphs,ends:n.ends}).pipe(n.runnable).pipe(new ka([{channel:e,value:sp}],[ei])),this.streamChannels.push(e)}attachEdge(e,n){if(n===gn){if(e===Dn)throw new Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new ka([{channel:gn,value:sp}],[ei]))}else this.nodes[n].triggers.push(e),this.nodes[n].channels.push(e)}attachBranch(e,n,r){e===Dn&&!this.nodes[Dn]&&(this.nodes[Dn]=q$e.subscribeTo(Dn,{tags:[ei]})),this.nodes[e].pipe(r.run(a=>new ka(a.map(s=>La(s)?s:{channel:s===gn?gn:`branch:${e}:${n}:${s}`,value:sp}),[ei])));const i=r.ends?Object.values(r.ends):Object.keys(this.nodes);for(const a of i)if(a!==gn){const s=`branch:${e}:${n}:${a}`;this.channels[s]=new by,this.nodes[a].triggers.push(s),this.nodes[a].channels.push(s)}}async getGraphAsync(e){var c,u,f,d;const n=e==null?void 0:e.xray,r=new xb,i={[Dn]:r.addNode({schema:Qx()},Dn)},a={};let s={};n&&(s=Object.fromEntries((await zf(this.getSubgraphsAsync())).filter(h=>a9(h[1]))));function o(h,p,m,y=!1){if(p===gn&&a[gn]===void 0&&(a[gn]=r.addNode({schema:Qx()},gn)),i[h]!==void 0){if(a[p]===void 0)throw new Error(`End node ${p} not found!`);return r.addEdge(i[h],a[p],m!==p?m:void 0,y)}}for(const[h,p]of Object.entries(this.builder.nodes)){const m=ia(h),y=p.runnable,g=p.metadata??{};if((c=this.interruptBefore)!=null&&c.includes(h)&&((u=this.interruptAfter)!=null&&u.includes(h))?g.__interrupt="before,after":(f=this.interruptBefore)!=null&&f.includes(h)?g.__interrupt="before":(d=this.interruptAfter)!=null&&d.includes(h)&&(g.__interrupt="after"),n){const v=typeof n=="number"?n-1:n,w=s[h]!==void 0?await s[h].getGraphAsync({...e,xray:v}):y.getGraph(e);if(w.trimFirstNode(),w.trimLastNode(),Object.keys(w.nodes).length>1){let E=function(O){return O?O.lc_runnable:!1},T=function(O,R){if(O!==void 0&&!np(O))return O;if(E(R))try{let M=R.getName();return M=M.startsWith("Runnable")?M.slice(8):M,M}catch{return R.getName()}else return R.name??"UnknownSchema"};const[_,x]=r.extend(w,m);if(_===void 0)throw new Error(`Could not extend subgraph "${h}" due to missing entrypoint.`);x!==void 0&&(i[m]={name:T(x.id,x.data),...x}),a[m]={name:T(_.id,_.data),..._}}else{const _=r.addNode(y,m,g);i[m]=_,a[m]=_}}else{const v=r.addNode(y,m,g);i[m]=v,a[m]=v}}const l=[...this.builder.allEdges].sort(([h],[p])=>h<p?-1:p>h?1:0);for(const[h,p]of l)o(ia(h),ia(p));for(const[h,p]of Object.entries(this.builder.branches)){const m={...Object.fromEntries(Object.keys(this.builder.nodes).filter(y=>y!==h).map(y=>[ia(y),ia(y)])),[gn]:gn};for(const y of Object.values(p)){let g;y.ends!==void 0?g=y.ends:g=m;for(const[v,w]of Object.entries(g))o(ia(h),ia(w),v,!0)}}for(const[h,p]of Object.entries(this.builder.nodes))if(p.ends!==void 0)for(const m of p.ends)o(ia(h),ia(m),void 0,!0);return r}getGraph(e){var c,u,f,d;const n=e==null?void 0:e.xray,r=new xb,i={[Dn]:r.addNode({schema:Qx()},Dn)},a={};let s={};n&&(s=Object.fromEntries(K0(this.getSubgraphs()).filter(h=>a9(h[1]))));function o(h,p,m,y=!1){return p===gn&&a[gn]===void 0&&(a[gn]=r.addNode({schema:Qx()},gn)),r.addEdge(i[h],a[p],m!==p?m:void 0,y)}for(const[h,p]of Object.entries(this.builder.nodes)){const m=ia(h),y=p.runnable,g=p.metadata??{};if((c=this.interruptBefore)!=null&&c.includes(h)&&((u=this.interruptAfter)!=null&&u.includes(h))?g.__interrupt="before,after":(f=this.interruptBefore)!=null&&f.includes(h)?g.__interrupt="before":(d=this.interruptAfter)!=null&&d.includes(h)&&(g.__interrupt="after"),n){const v=typeof n=="number"?n-1:n,w=s[h]!==void 0?s[h].getGraph({...e,xray:v}):y.getGraph(e);if(w.trimFirstNode(),w.trimLastNode(),Object.keys(w.nodes).length>1){let E=function(O){return O?O.lc_runnable:!1},T=function(O,R){if(O!==void 0&&!np(O))return O;if(E(R))try{let M=R.getName();return M=M.startsWith("Runnable")?M.slice(8):M,M}catch{return R.getName()}else return R.name??"UnknownSchema"};const[_,x]=r.extend(w,m);if(_===void 0)throw new Error(`Could not extend subgraph "${h}" due to missing entrypoint.`);x!==void 0&&(i[m]={name:T(x.id,x.data),...x}),a[m]={name:T(_.id,_.data),..._}}else{const _=r.addNode(y,m,g);i[m]=_,a[m]=_}}else{const v=r.addNode(y,m,g);i[m]=v,a[m]=v}}const l=[...this.builder.allEdges].sort(([h],[p])=>h<p?-1:p>h?1:0);for(const[h,p]of l)o(ia(h),ia(p));for(const[h,p]of Object.entries(this.builder.branches)){const m={...Object.fromEntries(Object.keys(this.builder.nodes).filter(y=>y!==h).map(y=>[ia(y),ia(y)])),[gn]:gn};for(const y of Object.values(p)){let g;y.ends!==void 0?g=y.ends:g=m;for(const[v,w]of Object.entries(g))o(ia(h),ia(w),v,!0)}}return r}};function a9(t){return typeof t.attachNode=="function"&&typeof t.attachEdge=="function"}function ia(t){return t==="subgraph"?`"${t}"`:t}function Z0(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"]!==null&&"validate"in t["~standard"]}function Z$e(t){return typeof t=="object"&&t!==null&&"~standard"in t&&typeof t["~standard"]=="object"&&t["~standard"]!==null&&"jsonSchema"in t["~standard"]}function km(t){if(Z$e(t))try{return t["~standard"].jsonSchema.input({target:"draft-07"})}catch{return}}function Om(t){if(t!=null&&Z0(t))try{const e=t["~standard"].validate(void 0);if(e&&typeof e=="object"&&!("then"in e&&typeof e.then=="function")){const n=e;if(!n.issues){const r=n.value;return()=>r}}}catch{}}const nP=Symbol.for("langgraph.channel.missing");var X$e=class kie extends Bd{constructor(n){super();P(this,"lc_graph_name","UntrackedValue");P(this,"guard");P(this,"_value",nP);P(this,"initialValueFactory");this.guard=(n==null?void 0:n.guard)??!0,this.initialValueFactory=n==null?void 0:n.initialValueFactory,this.initialValueFactory&&(this._value=this.initialValueFactory())}fromCheckpoint(n){return new kie({guard:this.guard,initialValueFactory:this.initialValueFactory})}update(n){if(n.length===0)return!1;if(n.length!==1&&this.guard)throw new ar("UntrackedValue(guard=true) can receive only one value per step. Use guard=false if you want to store any one of multiple values.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this._value=n[n.length-1],!0}get(){if(this._value===nP)throw new $i;return this._value}checkpoint(){}isAvailable(){return this._value!==nP}};const rP=Symbol.for("langgraph.state.reduced_value");var rK,Um=(rK=rP,class{constructor(t,e){P(this,rK,!0);P(this,"valueSchema");P(this,"inputSchema");P(this,"reducer");P(this,"jsonSchemaExtra");this.reducer=e.reducer,this.jsonSchemaExtra=e.jsonSchemaExtra,this.valueSchema=t,this.inputSchema="inputSchema"in e?e.inputSchema:t,this.jsonSchemaExtra=e.jsonSchemaExtra}static isInstance(t){return typeof t=="object"&&t!==null&&rP in t&&t[rP]===!0}});const s9=Symbol.for("langgraph.state.untracked_value");var iK,_0=(iK=s9,class{constructor(t,e){P(this,iK,!0);P(this,"schema");P(this,"guard");this.schema=t,this.guard=(e==null?void 0:e.guard)??!0}static isInstance(t){return typeof t=="object"&&t!==null&&s9 in t}});const zh=(t,e)=>t.size===e.size&&[...t].every(n=>e.has(n));var J$e=class Oie extends Bd{constructor(n){super();P(this,"lc_graph_name","NamedBarrierValue");P(this,"names");P(this,"seen");this.names=n,this.seen=new Set}fromCheckpoint(n){const r=new Oie(this.names);return typeof n<"u"&&(r.seen=new Set(n)),r}update(n){let r=!1;for(const i of n)if(this.names.has(i))this.seen.has(i)||(this.seen.add(i),r=!0);else throw new ar(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return r}get(){if(!zh(this.names,this.seen))throw new $i}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&zh(this.seen,this.names)?(this.seen=new Set,!0):!1}isAvailable(){return!!this.names&&zh(this.names,this.seen)}},Q$e=class Tie extends Bd{constructor(n){super();P(this,"lc_graph_name","NamedBarrierValueAfterFinish");P(this,"names");P(this,"seen");P(this,"finished");this.names=n,this.seen=new Set,this.finished=!1}fromCheckpoint(n){const r=new Tie(this.names);if(typeof n<"u"){const[i,a]=n;r.seen=new Set(i),r.finished=a}return r}update(n){let r=!1;for(const i of n)if(this.names.has(i)&&!this.seen.has(i))this.seen.add(i),r=!0;else if(!this.names.has(i))throw new ar(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return r}get(){if(!this.finished||!zh(this.names,this.seen))throw new $i}checkpoint(){return[[...this.seen],this.finished]}consume(){return this.finished&&this.seen&&this.names&&zh(this.seen,this.names)?(this.seen=new Set,this.finished=!1,!0):!1}finish(){return!this.finished&&this.names&&zh(this.names,this.seen)?(this.finished=!0,!0):!1}isAvailable(){return this.finished&&!!this.names&&zh(this.names,this.seen)}};const iP=Symbol.for("langgraph.state.state_schema");var aK,Vh=(aK=iP,class{constructor(t){P(this,aK,!0);this.fields=t}getChannels(){const t={};for(const[e,n]of Object.entries(this.fields))if(Um.isInstance(n)){const r=Om(n.valueSchema);t[e]=new FE(n.reducer,r)}else if(_0.isInstance(n)){const r=n.schema?Om(n.schema):void 0;t[e]=new X$e({guard:n.guard,initialValueFactory:r})}else if(Z0(n))t[e]=new bk(Om(n));else throw new Error(`Invalid state field "${e}": must be a schema, ReducedValue, UntrackedValue, or ManagedValue`);return t}getJsonSchema(){const t={},e=[];for(const[n,r]of Object.entries(this.fields)){let i;if(Um.isInstance(r)?(i=km(r.valueSchema),r.jsonSchemaExtra&&(i={...i??{},...r.jsonSchemaExtra})):_0.isInstance(r)?i=r.schema?km(r.schema):void 0:Z0(r)&&(i=km(r)),i){t[n]=i;let a=!1;Um.isInstance(r)?a=Om(r.valueSchema)!==void 0:_0.isInstance(r)?a=r.schema?Om(r.schema)!==void 0:!1:a=Om(r)!==void 0,a||e.push(n)}}return{type:"object",properties:t,required:e.length>0?e:void 0}}getInputJsonSchema(){const t={};for(const[e,n]of Object.entries(this.fields)){let r;Um.isInstance(n)?r=km(n.inputSchema):_0.isInstance(n)?r=n.schema?km(n.schema):void 0:Z0(n)&&(r=km(n)),r&&(t[e]=r)}return{type:"object",properties:t}}getChannelKeys(){return Object.entries(this.fields).map(([t])=>t)}getAllKeys(){return Object.keys(this.fields)}async validateInput(t){if(t==null||typeof t!="object")return t;const e={};for(const[n,r]of Object.entries(t)){const i=this.fields[n];if(i===void 0){e[n]=r;continue}let a;if(Um.isInstance(i)?a=i.inputSchema:_0.isInstance(i)?a=i.schema:Z0(i)&&(a=i),a){const s=await a["~standard"].validate(r);if(s.issues)throw new Error(`Validation failed for field "${n}": ${JSON.stringify(s.issues)}`);e[n]=s.value}else e[n]=r}return e}static isInstance(t){return typeof t=="object"&&t!==null&&iP in t&&t[iP]===!0}});const eMe="__remove_all__";function _k(t,e){const n=Array.isArray(t)?t:[t],r=Array.isArray(e)?e:[e],i=n.map(pc),a=r.map(pc);for(const u of i)(u.id===null||u.id===void 0)&&(u.id=lu(),u.lc_kwargs.id=u.id);let s;for(let u=0;u<a.length;u+=1){const f=a[u];(f.id===null||f.id===void 0)&&(f.id=lu(),f.lc_kwargs.id=f.id),tp.isInstance(f)&&f.id===eMe&&(s=u)}if(s!=null)return a.slice(s+1);const o=[...i],l=new Map(o.map((u,f)=>[u.id,f])),c=new Set;for(const u of a){const f=l.get(u.id);if(f!==void 0)tp.isInstance(u)?c.add(u.id):(c.delete(u.id),o[f]=u);else{if(tp.isInstance(u))throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${u.id}')`);l.set(u.id,o.length),o.push(u)}}return o.filter(u=>!c.has(u.id))}const tMe=Ere().default(()=>[]),nMe=Ere();new Um(tMe,{inputSchema:nMe,reducer:_k,jsonSchemaExtra:{langgraph_type:"messages",description:"A list of chat messages"}});const rMe="lg:";var iMe=class{constructor(){P(this,"_map",new Map);P(this,"_extensionCache",new Map)}get(t){return this._map.get(t)}extend(t,e){const n=this.get(t);this._map.set(t,e(n))}remove(t){return this._map.delete(t),this}has(t){return this._map.has(t)}getChannelsForSchema(t){const e={},n=db(t);for(const[r,i]of Object.entries(n)){const a=this.get(i);a!=null&&a.reducer?e[r]=new FE(a.reducer.fn,a.default):e[r]=new bk(a==null?void 0:a.default)}return e}getExtendedChannelSchemas(t,e){if(Object.keys(e).length===0)return t;const n=Object.entries(e).filter(([,a])=>a===!0).sort(([a],[s])=>a.localeCompare(s)).map(([a,s])=>`${a}:${s}`).join("|"),r=this._extensionCache.get(n)??new Map;if(r.has(t))return r.get(t);let i=t;if(e.withReducerSchema||e.withJsonSchemaExtrasAsDescription){const a=Object.entries(db(t)).map(([s,o])=>{var u;const l=this.get(o);let c=e.withReducerSchema?((u=l==null?void 0:l.reducer)==null?void 0:u.schema)??o:o;if(e.withJsonSchemaExtrasAsDescription&&(l!=null&&l.jsonSchemaExtra)){const f=fb(c)??fb(o),d=JSON.stringify({...l.jsonSchemaExtra,description:f});c=c.describe(`${rMe}${d}`)}return[s,c]});i=AQ(t,Object.fromEntries(a)),ai(i)&&(i._def.unknownKeys="strip")}return e.asPartial&&(i=tM(i)),r.set(t,i),this._extensionCache.set(n,r),i}};const WE=new iMe;function aMe(t,e){var n;if(e.reducer&&!e.default){const r=kQ(t);r!=null&&(e.default=r)}if(e.reducer){const r=Object.assign(t,{lg_reducer_schema:((n=e.reducer)==null?void 0:n.schema)??t});return WE.extend(r,()=>e),r}else return WE.extend(t,()=>e),t}function zm(t){return t==null?!1:!!(Vh.isInstance(t)||oo(t)||typeof t=="object"&&"lc_graph_name"in t&&t.lc_graph_name==="AnnotationRoot"||typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length>0&&Object.values(t).every(e=>typeof e=="function"||Qre(e)))}function sMe(t){if(typeof t!="object"||t==null)return!1;const e=t,n="state"in e&&zm(e.state),r="stateSchema"in e&&zm(e.stateSchema),i="input"in e&&zm(e.input);return!(!n&&!r&&!i||"input"in e&&e.input!=null&&!zm(e.input)||"output"in e&&e.output!=null&&!zm(e.output))}const fu="__root__",HE=Symbol.for("langgraph.state.partial");var oMe=class extends Y$e{constructor(e,n){super();P(this,"channels",{});P(this,"waitingEdges",new Set);P(this,"_schemaDefinition");P(this,"_schemaRuntimeDefinition");P(this,"_inputDefinition");P(this,"_inputRuntimeDefinition");P(this,"_outputDefinition");P(this,"_outputRuntimeDefinition");P(this,"_schemaDefinitions",new Map);P(this,"_metaRegistry",WE);P(this,"_configSchema");P(this,"_configRuntimeSchema");P(this,"_interrupt");P(this,"_writer");const r=this._normalizeToStateGraphInit(e,n),i=r.state??r.stateSchema??r.input;if(!i)throw new BC;const a=this._getChannelsFromSchema(i);this._schemaDefinition=a,Vh.isInstance(i)?this._schemaRuntimeDefinition=i:oo(i)&&(this._schemaRuntimeDefinition=i),r.input?Vh.isInstance(r.input)?this._inputRuntimeDefinition=r.input:oo(r.input)?this._inputRuntimeDefinition=r.input:this._inputRuntimeDefinition=HE:this._inputRuntimeDefinition=HE,r.output?Vh.isInstance(r.output)?this._outputRuntimeDefinition=r.output:oo(r.output)?this._outputRuntimeDefinition=r.output:this._outputRuntimeDefinition=this._schemaRuntimeDefinition:this._outputRuntimeDefinition=this._schemaRuntimeDefinition;const s=r.input?this._getChannelsFromSchema(r.input):a,o=r.output?this._getChannelsFromSchema(r.output):a;this._inputDefinition=s,this._outputDefinition=o,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),r.context&&oo(r.context)&&(this._configRuntimeSchema=r.context),this._interrupt=r.interrupt,this._writer=r.writer}_normalizeToStateGraphInit(e,n){if(sMe(e)){if(oo(n)||LR.isInstance(n))return{...e,context:n};const r=n;return{...e,input:e.input??(r==null?void 0:r.input),output:e.output??(r==null?void 0:r.output),context:e.context??(r==null?void 0:r.context),interrupt:e.interrupt??(r==null?void 0:r.interrupt),writer:e.writer??(r==null?void 0:r.writer),nodes:e.nodes??(r==null?void 0:r.nodes)}}if(zm(e)){if(oo(n)||LR.isInstance(n))return{state:e,context:n};const r=n;return{state:e,input:r==null?void 0:r.input,output:r==null?void 0:r.output,context:r==null?void 0:r.context,interrupt:r==null?void 0:r.interrupt,writer:r==null?void 0:r.writer,nodes:r==null?void 0:r.nodes}}if(uMe(e))return{state:lMe(e.channels)};throw new BC}_getChannelsFromSchema(e){if(Vh.isInstance(e))return e.getChannels();if(oo(e))return this._metaRegistry.getChannelsForSchema(e);if(typeof e=="object"&&"lc_graph_name"in e&&e.lc_graph_name==="AnnotationRoot")return e.spec;if(typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length>0)return e;throw new BC("Invalid schema type. Expected StateSchema, Zod object, AnnotationRoot, or StateDefinition.")}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,n])=>e.map(r=>[r,n]))])}_addSchema(e){if(!this._schemaDefinitions.has(e)){this._schemaDefinitions.set(e,e);for(const[n,r]of Object.entries(e)){let i;if(typeof r=="function"?i=r():i=r,this.channels[n]!==void 0){if(!this.channels[n].equals(i)&&i.lc_graph_name!=="LastValue")throw new Error(`Channel "${n}" already exists with a different type.`)}else this.channels[n]=i}}}addNode(...e){function n(i){return i.length>=1&&typeof i[0]!="string"}const r=n(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]).map(([i,a])=>[i,a]):[[e[0],e[1],e[2]]];if(r.length===0)throw new Error("No nodes provided in `addNode`");for(const[i,a,s]of r){if(i in this.channels)throw new Error(`${i} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(const f of[bi,_u])if(i.includes(f))throw new Error(`"${f}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===gn||i===Dn)throw new Error(`Node \`${i}\` is reserved.`);let o=this._schemaDefinition;(s==null?void 0:s.input)!==void 0&&(o=this._getChannelsFromSchema(s.input)),this._addSchema(o);let l;fn.isRunnable(a)?l=a:typeof a=="function"?l=new Ud({func:a,name:i,trace:!1}):l=Zi(a);let c=s==null?void 0:s.cachePolicy;typeof c=="boolean"&&(c=c?{}:void 0);const u={runnable:l,retryPolicy:s==null?void 0:s.retryPolicy,cachePolicy:c,metadata:s==null?void 0:s.metadata,input:o??this._schemaDefinition,subgraphs:lL(l)?[l]:s==null?void 0:s.subgraphs,ends:s==null?void 0:s.ends,defer:s==null?void 0:s.defer};this.nodes[i]=u}return this}addEdge(e,n){if(typeof e=="string")return super.addEdge(e,n);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(const r of e){if(r===gn)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(i=>i===r))throw new Error(`Need to add a node named "${r}" first`)}if(n===gn)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(r=>r===n))throw new Error(`Need to add a node named "${n}" first`);return this.waitingEdges.add([e,n]),this}addSequence(e){const n=Array.isArray(e)?e:Object.entries(e);if(n.length===0)throw new Error("Sequence requires at least one node.");let r;for(const[i,a,s]of n){if(i in this.nodes)throw new Error(`Node names must be unique: node with the name "${i}" already exists.`);const o=i;this.addNode(o,a,s),r!=null&&this.addEdge(r,o),r=o}return this}compile({checkpointer:e,store:n,cache:r,interruptBefore:i,interruptAfter:a,name:s,description:o}={}){this.validate([...Array.isArray(i)?i:[],...Array.isArray(a)?a:[]]);const l=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),c=l.length===1&&l[0]===fu?fu:l,u=Object.keys(this.channels),f=u.length===1&&u[0]===fu?fu:u,d=this._interrupt,h=new cMe({builder:this,checkpointer:e,interruptAfter:a,interruptBefore:i,autoValidate:!1,nodes:{},channels:{...this.channels,[Dn]:new by},inputChannels:Dn,outputChannels:c,streamChannels:f,streamMode:"updates",store:n,cache:r,name:s,description:o,userInterrupt:d});h.attachNode(Dn);for(const[p,m]of Object.entries(this.nodes))h.attachNode(p,m);h.attachBranch(Dn,YU,o9(),{withReader:!1});for(const[p]of Object.entries(this.nodes))h.attachBranch(p,YU,o9(),{withReader:!1});for(const[p,m]of this.edges)h.attachEdge(p,m);for(const[p,m]of this.waitingEdges)h.attachEdge(p,m);for(const[p,m]of Object.entries(this.branches))for(const[y,g]of Object.entries(m))h.attachBranch(p,y,g);return h.validate()}};function lMe(t){const e={};for(const[n,r]of Object.entries(t))e[n]=DR(r);return e}var cMe=class extends Aie{constructor({description:e,...n}){super(n);P(this,"description");P(this,"_metaRegistry",WE);this.description=e}attachNode(e,n){let r;e===Dn?r=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).map(([l])=>l):r=Object.keys(this.builder.channels);function i(l){if(yi(l))return l.graph===Ns.PARENT?null:l._updateAsTuples();if(Array.isArray(l)&&l.length>0&&l.some(c=>yi(c))){const c=[];for(const u of l)if(yi(u)){if(u.graph===Ns.PARENT)continue;c.push(...u._updateAsTuples())}else c.push([fu,u]);return c}else if(l!=null)return[[fu,l]];return null}const a=e;function s(l){if(l){if(yi(l))return l.graph===Ns.PARENT?null:l._updateAsTuples().filter(([c])=>r.includes(c));if(Array.isArray(l)&&l.length>0&&l.some(yi)){const c=[];for(const u of l)if(yi(u)){if(u.graph===Ns.PARENT)continue;c.push(...u._updateAsTuples().filter(([f])=>r.includes(f)))}else{const f=s(u);f&&c.push(...f??[])}return c}else{if(typeof l=="object"&&!Array.isArray(l))return Object.entries(l).filter(([c])=>r.includes(c));{const c=Array.isArray(l)?"array":typeof l;throw new ar(`Expected node "${a.toString()}" to return an object or an array containing at least one Command object, received ${c}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}const o=[{value:sp,mapper:new Ud({func:r.length&&r[0]===fu?i:s,trace:!1,recurse:!1})}];if(e===Dn)this.nodes[e]=new Pb({tags:[ei],triggers:[Dn],channels:[Dn],writers:[new ka(o,[ei])]});else{const l=(n==null?void 0:n.input)??this.builder._schemaDefinition,c=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(l)).map(d=>[d,d])),u=Object.keys(c).length===1&&fu in c,f=`branch:to:${e}`;this.channels[f]=n!=null&&n.defer?new O3e:new by(!1),this.nodes[e]=new Pb({triggers:[f],channels:u?Object.keys(c):c,writers:[new ka(o,[ei])],mapper:u?void 0:d=>Object.fromEntries(Object.entries(d).filter(([h])=>h in c)),bound:n==null?void 0:n.runnable,metadata:n==null?void 0:n.metadata,retryPolicy:n==null?void 0:n.retryPolicy,cachePolicy:n==null?void 0:n.cachePolicy,subgraphs:n==null?void 0:n.subgraphs,ends:n==null?void 0:n.ends})}}attachEdge(e,n){if(n!==gn){if(typeof e=="string")this.nodes[e].writers.push(new ka([{channel:`branch:to:${n}`,value:null}],[ei]));else if(Array.isArray(e)){const r=`join:${e.join("+")}:${n}`;this.channels[r]=this.builder.nodes[n].defer?new Q$e(new Set(e)):new J$e(new Set(e)),this.nodes[n].triggers.push(r);for(const i of e)this.nodes[i].writers.push(new ka([{channel:r,value:i}],[ei]))}}}attachBranch(e,n,r,i={withReader:!0}){const a=async(s,o)=>{const l=s.filter(u=>u!==gn);if(!l.length)return;const c=l.map(u=>La(u)?u:{channel:u===gn?u:`branch:to:${u}`,value:e});await ka.doWrite({...o,tags:(o.tags??[]).concat([ei])},c)};this.nodes[e].writers.push(r.run(a,i.withReader?s=>s$e.doRead(s,this.streamChannels??this.outputChannels,!0):void 0))}async _validateInput(e){if(e==null)return e;const n=this.builder._inputRuntimeDefinition,r=this.builder._schemaRuntimeDefinition;if(Vh.isInstance(n)){if(yi(e)){const a=e;return e.update&&(a.update=await n.validateInput(Array.isArray(e.update)?Object.fromEntries(e.update):e.update)),a}return await n.validateInput(e)}if(n===HE&&Vh.isInstance(r)){if(yi(e)){const a=e;return e.update&&(a.update=await r.validateInput(Array.isArray(e.update)?Object.fromEntries(e.update):e.update)),a}return await r.validateInput(e)}const i=(()=>{const a=s=>{if(s!=null)return this._metaRegistry.getExtendedChannelSchemas(s,{withReducerSchema:!0})};if(oo(n))return a(n);if(n===HE)return oo(r)?tM(a(r)):void 0})();if(yi(e)){const a=e;return e.update&&i!=null&&(a.update=K2(i,e.update)),a}return i!=null?K2(i,e):e}isInterrupted(e){return iie(e)}async _validateContext(e){const n=this.builder._configRuntimeSchema;return oo(n)&&K2(n,e),e}};function uMe(t){return typeof t=="object"&&t!==null&&t.channels!==void 0}function fMe(t){if(La(t))return[t];const e=[];yi(t)?e.push(t):Array.isArray(t)&&e.push(...t.filter(yi));const n=[];for(const r of e){if(r.graph===Ns.PARENT)throw new Sne(r);La(r.goto)||typeof r.goto=="string"?n.push(r.goto):Array.isArray(r.goto)&&n.push(...r.goto)}return n}function o9(){return new Eie({path:new Ud({func:fMe,tags:[ei],trace:!1,recurse:!1,name:"<control_branch>"})})}dd.Root({messages:dd({reducer:_k,default:()=>[]})});const dMe={reducer:{fn:_k},jsonSchemaExtra:{langgraph_type:"messages"},default:()=>[]};Md({messages:aMe(VAe(),dMe)});NRe();const Cie=t=>Array.isArray(t)&&t.every(Jr),hMe=t=>typeof t=="object"&&t!=null&&"messages"in t&&Cie(t.messages),pMe=t=>typeof t=="object"&&t!=null&&"lg_tool_call"in t;var mMe=class extends Ud{constructor(e,n){const{name:r,tags:i,handleToolErrors:a}=n??{};super({name:r,tags:i,func:(s,o)=>this.run(s,o)});P(this,"tools");P(this,"handleToolErrors",!0);P(this,"trace",!1);this.tools=e,this.handleToolErrors=a??this.handleToolErrors}async runTool(e,n){const r=this.tools.find(i=>i.name===e.name);try{if(r===void 0)throw new Error(`Tool "${e.name}" not found.`);const i=await r.invoke({...e,type:"tool_call"},n);return Jr(i)&&i.getType()==="tool"||yi(i)?i:new _c({status:"success",name:r.name,content:typeof i=="string"?i:JSON.stringify(i),tool_call_id:e.id})}catch(i){if(!this.handleToolErrors||Uh(i))throw i;return new _c({status:"error",content:`Error: ${i.message}
 Please fix your mistakes.`,name:e.name,tool_call_id:e.id??""})}}async run(e,n){var s;let r;if(pMe(e))r=[await this.runTool(e.lg_tool_call,n)];else{let o;if(Cie(e))o=e;else if(hMe(e))o=e.messages;else throw new Error("ToolNode only accepts BaseMessage[] or { messages: BaseMessage[] } as input.");const l=new Set(o.filter(u=>u.getType()==="tool").map(u=>u.tool_call_id));let c;for(let u=o.length-1;u>=0;u-=1){const f=o[u];if(_p(f)){c=f;break}}if(c==null||!_p(c))throw new Error("ToolNode only accepts AIMessages as input.");r=await Promise.all(((s=c.tool_calls)==null?void 0:s.filter(u=>u.id==null||!l.has(u.id)).map(u=>this.runTool(u,n)))??[])}if(!r.some(yi))return Array.isArray(e)?r:{messages:r};const i=[];let a=null;for(const o of r)yi(o)?o.graph===Ns.PARENT&&Array.isArray(o.goto)&&o.goto.every(l=>La(l))?a?a.goto.push(...o.goto):a=new Ns({graph:Ns.PARENT,goto:o.goto}):i.push(o):i.push(Array.isArray(e)?[o]:{messages:[o]});return a&&i.push(a),i}};dd.Root({llmInputMessages:dd({reducer:(t,e)=>_k([],e),default:()=>[]})});const gMe=yk(async({userId:t})=>{try{const{data:e,error:n}=await Fr.from("expenses").select("*").eq("user_id",t);if(n)throw n;const r=e.reduce((i,a)=>(i[a.category_name]=(i[a.category_name]||0)+a.amount,i),{});return JSON.stringify(r)}catch(e){return`Error fetching expenses: ${e.message}`}},{name:"get_expense_summary",description:"Fetches a summary of the user's expenses grouped by category.",schema:Md({userId:Vp().describe("The unique ID of the user.")})}),yMe=yk(async({userId:t})=>{try{const{data:e,error:n}=await Fr.from("goals").select("*").eq("user_id",t);if(n)throw n;return JSON.stringify(e)}catch(e){return`Error fetching goals: ${e.message}`}},{name:"get_financial_goals",description:"Fetches the list of financial goals set by the user.",schema:Md({userId:Vp().describe("The unique ID of the user.")})}),vMe=yk(async({userId:t})=>{try{const{data:e,error:n}=await Fr.from("settings").select("*, currencies(*)").eq("user_id",t).single();if(n)throw n;return JSON.stringify(e)}catch(e){return`Error fetching settings: ${e.message}`}},{name:"get_user_settings",description:"Fetches the user's personal settings, including currency preference.",schema:Md({userId:Vp().describe("The unique ID of the user.")})}),wMe=dd.Root({messages:dd({reducer:(t,e)=>t.concat(e),default:()=>[]}),userId:dd({reducer:(t,e)=>e??t,default:()=>null})}),Pie=[gMe,yMe,vMe],bMe=new mMe(Pie);async function _Me(t){const{messages:e,userId:n}=t,r=await bne(Pie),i=`You are PennyWise, a friendly and intelligent AI financial advisor. 
  Your goal is to help users manage their money, track expenses, and reach financial goals.
  
  You have access to the following tools:
  - get_expense_summary: Use this to see how much the user is spending.
  - get_financial_goals: Use this to see what the user is saving for.
  - get_user_settings: Use this to check currency and other preferences.
  
  When the user asks about their finances, ALWAYS use the tools to get accurate data.
  Be encouraging, catchy, and use emojis! Current User ID: ${n}`;return{messages:[await r.invoke([new Al(i),...e])]}}function xMe(t){var r;const{messages:e}=t;return((r=e[e.length-1].tool_calls)==null?void 0:r.length)>0?"tools":gn}const SMe=new oMe(wMe).addNode("agent",_Me).addNode("tools",bMe).addEdge(Dn,"agent").addConditionalEdges("agent",xMe).addEdge("tools","agent"),EMe=SMe.compile(),Nie=k.createContext(),AMe=({children:t})=>{const{user:e}=qu(),[n,r]=k.useState([{id:"welcome",role:"assistant",content:"Hi! I'm PennyWise, your AI financial companion. How can I help you save more today? ",timestamp:new Date().toISOString()}]),[i,a]=k.useState(!1),[s,o]=k.useState(!1),l=k.useCallback(async u=>{if(!e)return;const f={id:crypto.randomUUID(),role:"user",content:u,timestamp:new Date().toISOString()};r(d=>[...d,f]),o(!0);try{const d=n.filter(y=>y.id!=="welcome").map(y=>y.role==="user"?new Ma(y.content):new Ei(y.content));d.push(new Ma(u));const h=await EMe.invoke({messages:d,userId:e.id}),p=h.messages[h.messages.length-1],m={id:crypto.randomUUID(),role:"assistant",content:p.content,timestamp:new Date().toISOString()};r(y=>[...y,m])}catch(d){console.error("PennyWise Error:",d);const h={id:crypto.randomUUID(),role:"assistant",content:`Oops! I'm having trouble connecting to my brain. ${d.message.includes("400")||d.message.includes("404")?"**Tip: Please try a hard refresh (Ctrl+F5) or restart your dev server.**":""} Error: ${d.message} `,timestamp:new Date().toISOString()};r(p=>[...p,h])}finally{o(!1)}},[n,e]),c=()=>{r([{id:"welcome",role:"assistant",content:"Hi! I'm PennyWise, your AI financial companion. How can I help you save more today? ",timestamp:new Date().toISOString()}])};return S.jsx(Nie.Provider,{value:{messages:n,isOpen:i,setIsOpen:a,isTyping:s,sendMessage:l,clearChat:c},children:t})},kMe=()=>{const t=k.useContext(Nie);if(!t)throw new Error("useChat must be used within a ChatProvider");return t},lr=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:xt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));lr.displayName="Card";const ts=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:xt("flex flex-col space-y-1.5 p-6",t),...e}));ts.displayName="CardHeader";const $s=k.forwardRef(({className:t,...e},n)=>S.jsx("h3",{ref:n,className:xt("text-2xl font-semibold leading-none tracking-tight",t),...e}));$s.displayName="CardTitle";const Lu=k.forwardRef(({className:t,...e},n)=>S.jsx("p",{ref:n,className:xt("text-sm text-muted-foreground",t),...e}));Lu.displayName="CardDescription";const br=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:xt("p-6 pt-0",t),...e}));br.displayName="CardContent";const xk=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:xt("flex items-center p-6 pt-0",t),...e}));xk.displayName="CardFooter";const $a=k.forwardRef(({className:t,type:e,...n},r)=>S.jsx("input",{type:e,className:xt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));$a.displayName="Input";const fL=k.createContext({});function dL(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const Iie=typeof window<"u",Rie=Iie?k.useLayoutEffect:k.useEffect,Sk=k.createContext(null);function hL(t,e){t.indexOf(e)===-1&&t.push(e)}function qE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Sc=(t,e,n)=>n>e?e:n<t?t:n;let pL=()=>{};const Du={},jie=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function $ie(t){return typeof t=="object"&&t!==null}const Mie=t=>/^0[^.\s]+$/u.test(t);function mL(t){let e;return()=>(e===void 0&&(e=t()),e)}const xo=t=>t,OMe=(t,e)=>n=>e(t(n)),i_=(...t)=>t.reduce(OMe),Rb=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class gL{constructor(){this.subscriptions=[]}add(e){return hL(this.subscriptions,e),()=>qE(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vl=t=>t*1e3,yo=t=>t/1e3;function Lie(t,e){return e?t*(1e3/e):0}const Die=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,TMe=1e-7,CMe=12;function PMe(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=Die(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>TMe&&++o<CMe);return s}function a_(t,e,n,r){if(t===e&&n===r)return xo;const i=a=>PMe(a,0,1,t,n);return a=>a===0||a===1?a:Die(i(a),e,r)}const Fie=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bie=t=>e=>1-t(1-e),Uie=a_(.33,1.53,.69,.99),yL=Bie(Uie),zie=Fie(yL),Vie=t=>(t*=2)<1?.5*yL(t):.5*(2-Math.pow(2,-10*(t-1))),vL=t=>1-Math.sin(Math.acos(t)),Wie=Bie(vL),Hie=Fie(vL),NMe=a_(.42,0,1,1),IMe=a_(0,0,.58,1),qie=a_(.42,0,.58,1),RMe=t=>Array.isArray(t)&&typeof t[0]!="number",Gie=t=>Array.isArray(t)&&typeof t[0]=="number",jMe={linear:xo,easeIn:NMe,easeInOut:qie,easeOut:IMe,circIn:vL,circInOut:Hie,circOut:Wie,backIn:yL,backInOut:zie,backOut:Uie,anticipate:Vie},$Me=t=>typeof t=="string",l9=t=>{if(Gie(t)){pL(t.length===4);const[e,n,r,i]=t;return a_(e,n,r,i)}else if($Me(t))return jMe[t];return t},a2=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function MMe(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){s.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,f=!1,d=!1)=>{const p=d&&i?n:r;return f&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{r.delete(u),s.delete(u)},process:u=>{if(o=u,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,a&&(a=!1,c.process(u))}};return c}const LMe=40;function Kie(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=a2.reduce((w,_)=>(w[_]=MMe(a),w),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:d,render:h,postRender:p}=s,m=()=>{const w=Du.useManualTiming?i.timestamp:performance.now();n=!1,Du.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,LMe),1)),i.timestamp=w,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),f.process(i),d.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},y=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:a2.reduce((w,_)=>{const x=s[_];return w[_]=(E,T=!1,O=!1)=>(n||y(),x.schedule(E,T,O)),w},{}),cancel:w=>{for(let _=0;_<a2.length;_++)s[a2[_]].cancel(w)},state:i,steps:s}}const{schedule:Qn,cancel:Td,state:Yi,steps:aP}=Kie(typeof requestAnimationFrame<"u"?requestAnimationFrame:xo,!0);let yS;function DMe(){yS=void 0}const Ta={now:()=>(yS===void 0&&Ta.set(Yi.isProcessing||Du.useManualTiming?Yi.timestamp:performance.now()),yS),set:t=>{yS=t,queueMicrotask(DMe)}},Yie=t=>e=>typeof e=="string"&&e.startsWith(t),Zie=Yie("--"),FMe=Yie("var(--"),wL=t=>FMe(t)?BMe.test(t.split("/*")[0].trim()):!1,BMe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function c9(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const pv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jb={...pv,transform:t=>Sc(0,1,t)},s2={...pv,default:1},_w=t=>Math.round(t*1e5)/1e5,bL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UMe(t){return t==null}const zMe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_L=(t,e)=>n=>!!(typeof n=="string"&&zMe.test(n)&&n.startsWith(t)||e&&!UMe(n)&&Object.prototype.hasOwnProperty.call(n,e)),Xie=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(bL);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},VMe=t=>Sc(0,255,t),sP={...pv,transform:t=>Math.round(VMe(t))},Wh={test:_L("rgb","red"),parse:Xie("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+sP.transform(t)+", "+sP.transform(e)+", "+sP.transform(n)+", "+_w(jb.transform(r))+")"};function WMe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const qR={test:_L("#"),parse:WMe,transform:Wh.transform},s_=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tf=s_("deg"),yc=s_("%"),lt=s_("px"),HMe=s_("vh"),qMe=s_("vw"),u9={...yc,parse:t=>yc.parse(t)/100,transform:t=>yc.transform(t*100)},mg={test:_L("hsl","hue"),parse:Xie("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yc.transform(_w(e))+", "+yc.transform(_w(n))+", "+_w(jb.transform(r))+")"},Xr={test:t=>Wh.test(t)||qR.test(t)||mg.test(t),parse:t=>Wh.test(t)?Wh.parse(t):mg.test(t)?mg.parse(t):qR.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Wh.transform(t):mg.transform(t),getAnimatableNone:t=>{const e=Xr.parse(t);return e.alpha=0,Xr.transform(e)}},GMe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function KMe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(bL))==null?void 0:e.length)||0)+(((n=t.match(GMe))==null?void 0:n.length)||0)>0}const Jie="number",Qie="color",YMe="var",ZMe="var(",f9="${}",XMe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $b(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(XMe,l=>(Xr.test(l)?(r.color.push(a),i.push(Qie),n.push(Xr.parse(l))):l.startsWith(ZMe)?(r.var.push(a),i.push(YMe),n.push(l)):(r.number.push(a),i.push(Jie),n.push(parseFloat(l))),++a,f9)).split(f9);return{values:n,split:o,indexes:r,types:i}}function eae(t){return $b(t).values}function tae(t){const{split:e,types:n}=$b(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===Jie?a+=_w(i[s]):o===Qie?a+=Xr.transform(i[s]):a+=i[s]}return a}}const JMe=t=>typeof t=="number"?0:Xr.test(t)?Xr.getAnimatableNone(t):t;function QMe(t){const e=eae(t);return tae(t)(e.map(JMe))}const Cd={test:KMe,parse:eae,createTransformer:tae,getAnimatableNone:QMe};function oP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eLe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=oP(l,o,t+1/3),a=oP(l,o,t),s=oP(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function GE(t,e){return n=>n>0?e:t}const _r=(t,e,n)=>t+(e-t)*n,lP=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},tLe=[qR,Wh,mg],nLe=t=>tLe.find(e=>e.test(t));function d9(t){const e=nLe(t);if(!e)return!1;let n=e.parse(t);return e===mg&&(n=eLe(n)),n}const h9=(t,e)=>{const n=d9(t),r=d9(e);if(!n||!r)return GE(t,e);const i={...n};return a=>(i.red=lP(n.red,r.red,a),i.green=lP(n.green,r.green,a),i.blue=lP(n.blue,r.blue,a),i.alpha=_r(n.alpha,r.alpha,a),Wh.transform(i))},GR=new Set(["none","hidden"]);function rLe(t,e){return GR.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iLe(t,e){return n=>_r(t,e,n)}function xL(t){return typeof t=="number"?iLe:typeof t=="string"?wL(t)?GE:Xr.test(t)?h9:oLe:Array.isArray(t)?nae:typeof t=="object"?Xr.test(t)?h9:aLe:GE}function nae(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>xL(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function aLe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=xL(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function sLe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const oLe=(t,e)=>{const n=Cd.createTransformer(e),r=$b(t),i=$b(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?GR.has(t)&&!i.values.length||GR.has(e)&&!r.values.length?rLe(t,e):i_(nae(sLe(r,i),i.values),n):GE(t,e)};function rae(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?_r(t,e,n):xL(t)(t,e)}const lLe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Qn.update(e,n),stop:()=>Td(e),now:()=>Yi.isProcessing?Yi.timestamp:Ta.now()}},iae=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},KE=2e4;function SL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<KE;)e+=n,r=t.next(e);return e>=KE?1/0:e}function cLe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(SL(r),KE);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:yo(i)}}const uLe=5;function aae(t,e,n){const r=Math.max(e-uLe,0);return Lie(n-t(r),e-r)}const Nr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cP=.001;function fLe({duration:t=Nr.duration,bounce:e=Nr.bounce,velocity:n=Nr.velocity,mass:r=Nr.mass}){let i,a,s=1-e;s=Sc(Nr.minDamping,Nr.maxDamping,s),t=Sc(Nr.minDuration,Nr.maxDuration,yo(t)),s<1?(i=c=>{const u=c*s,f=u*t,d=u-n,h=KR(c,s),p=Math.exp(-f);return cP-d/h*p},a=c=>{const f=c*s*t,d=f*n+n,h=Math.pow(s,2)*Math.pow(c,2)*t,p=Math.exp(-f),m=KR(Math.pow(c,2),s);return(-i(c)+cP>0?-1:1)*((d-h)*p)/m}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-cP+u*f},a=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const o=5/t,l=hLe(i,a,o);if(t=vl(t),isNaN(l))return{stiffness:Nr.stiffness,damping:Nr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:t}}}const dLe=12;function hLe(t,e,n){let r=n;for(let i=1;i<dLe;i++)r=r-t(r)/e(r);return r}function KR(t,e){return t*Math.sqrt(1-e*e)}const pLe=["duration","bounce"],mLe=["stiffness","damping","mass"];function p9(t,e){return e.some(n=>t[n]!==void 0)}function gLe(t){let e={velocity:Nr.velocity,stiffness:Nr.stiffness,damping:Nr.damping,mass:Nr.mass,isResolvedFromDuration:!1,...t};if(!p9(t,mLe)&&p9(t,pLe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Sc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Nr.mass,stiffness:i,damping:a}}else{const n=fLe(t);e={...e,...n,mass:Nr.mass},e.isResolvedFromDuration=!0}return e}function YE(t=Nr.visualDuration,e=Nr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:h}=gLe({...n,velocity:-yo(n.velocity||0)}),p=d||0,m=c/(2*Math.sqrt(l*u)),y=s-a,g=yo(Math.sqrt(l/u)),v=Math.abs(y)<5;r||(r=v?Nr.restSpeed.granular:Nr.restSpeed.default),i||(i=v?Nr.restDelta.granular:Nr.restDelta.default);let w;if(m<1){const x=KR(g,m);w=E=>{const T=Math.exp(-m*g*E);return s-T*((p+m*g*y)/x*Math.sin(x*E)+y*Math.cos(x*E))}}else if(m===1)w=x=>s-Math.exp(-g*x)*(y+(p+g*y)*x);else{const x=g*Math.sqrt(m*m-1);w=E=>{const T=Math.exp(-m*g*E),O=Math.min(x*E,300);return s-T*((p+m*g*y)*Math.sinh(O)+x*y*Math.cosh(O))/x}}const _={calculatedDuration:h&&f||null,next:x=>{const E=w(x);if(h)o.done=x>=f;else{let T=x===0?p:0;m<1&&(T=x===0?vl(p):aae(w,x,E));const O=Math.abs(T)<=r,R=Math.abs(s-E)<=i;o.done=O&&R}return o.value=o.done?s:E,o},toString:()=>{const x=Math.min(SL(_),KE),E=iae(T=>_.next(x*T).value,x,30);return x+"ms "+E},toTransition:()=>{}};return _}YE.applyToOptions=t=>{const e=cLe(t,100,YE);return t.ease=e.ease,t.duration=vl(e.duration),t.type="keyframes",t};function YR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],d={done:!1,value:f},h=O=>o!==void 0&&O<o||l!==void 0&&O>l,p=O=>o===void 0?l:l===void 0||Math.abs(o-O)<Math.abs(l-O)?o:l;let m=n*e;const y=f+m,g=s===void 0?y:s(y);g!==y&&(m=g-f);const v=O=>-m*Math.exp(-O/r),w=O=>g+v(O),_=O=>{const R=v(O),M=w(O);d.done=Math.abs(R)<=c,d.value=d.done?g:M};let x,E;const T=O=>{h(d.value)&&(x=O,E=YE({keyframes:[d.value,p(d.value)],velocity:aae(w,O,d.value),damping:i,stiffness:a,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:O=>{let R=!1;return!E&&x===void 0&&(R=!0,_(O),T(O)),x!==void 0&&O>=x?E.next(O-x):(!R&&_(O),d)}}}function yLe(t,e,n){const r=[],i=n||Du.mix||rae,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||xo:e;o=i_(l,o)}r.push(o)}return r}function vLe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(pL(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=yLe(e,r,i),l=o.length,c=u=>{if(s&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const d=Rb(t[f],t[f+1],u);return o[f](d)};return n?u=>c(Sc(t[0],t[a-1],u)):c}function wLe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Rb(0,e,r);t.push(_r(n,1,i))}}function bLe(t){const e=[0];return wLe(e,t.length-1),e}function _Le(t,e){return t.map(n=>n*e)}function xLe(t,e){return t.map(()=>e||qie).splice(0,t.length-1)}function xw({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=RMe(r)?r.map(l9):l9(r),a={done:!1,value:e[0]},s=_Le(n&&n.length===e.length?n:bLe(e),t),o=vLe(s,e,{ease:Array.isArray(i)?i:xLe(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const SLe=t=>t!==null;function EL(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(SLe),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const ELe={decay:YR,inertia:YR,tween:xw,keyframes:xw,spring:YE};function sae(t){typeof t.type=="string"&&(t.type=ELe[t.type])}class AL{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ALe=t=>t/100;class kL extends AL{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ta.now()&&this.tick(Ta.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;sae(e);const{type:n=xw,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const l=n||xw;l!==xw&&typeof o[0]!="number"&&(this.mixKeyframes=i_(ALe,rae(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=SL(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:d,repeatDelay:h,type:p,onUpdate:m,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,_=r;if(f){const O=Math.min(this.currentTime,i)/o;let R=Math.floor(O),M=O%1;!M&&O>=1&&(M=1),M===1&&R--,R=Math.min(R,f+1),!!(R%2)&&(d==="reverse"?(M=1-M,h&&(M-=h/o)):d==="mirror"&&(_=s)),w=Sc(0,1,M)*o}const x=v?{done:!1,value:u[0]}:_.next(w);a&&(x.value=a(x.value));let{done:E}=x;!v&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return T&&p!==YR&&(x.value=EL(u,this.options,y,this.speed)),m&&m(x.value),T&&this.finish(),x}then(e,n){return this.finished.then(e,n)}get duration(){return yo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yo(e)}get time(){return yo(this.currentTime)}set time(e){var n;e=vl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ta.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yo(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=lLe,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ta.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function kLe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Hh=t=>t*180/Math.PI,ZR=t=>{const e=Hh(Math.atan2(t[1],t[0]));return XR(e)},OLe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ZR,rotateZ:ZR,skewX:t=>Hh(Math.atan(t[1])),skewY:t=>Hh(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},XR=t=>(t=t%360,t<0&&(t+=360),t),m9=ZR,g9=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),y9=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),TLe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:g9,scaleY:y9,scale:t=>(g9(t)+y9(t))/2,rotateX:t=>XR(Hh(Math.atan2(t[6],t[5]))),rotateY:t=>XR(Hh(Math.atan2(-t[2],t[0]))),rotateZ:m9,rotate:m9,skewX:t=>Hh(Math.atan(t[4])),skewY:t=>Hh(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function JR(t){return t.includes("scale")?1:0}function QR(t,e){if(!t||t==="none")return JR(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=TLe,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=OLe,i=o}if(!i)return JR(e);const a=r[e],s=i[1].split(",").map(PLe);return typeof a=="function"?a(s):s[a]}const CLe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return QR(n,e)};function PLe(t){return parseFloat(t.trim())}const mv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gv=new Set(mv),v9=t=>t===pv||t===lt,NLe=new Set(["x","y","z"]),ILe=mv.filter(t=>!NLe.has(t));function RLe(t){const e=[];return ILe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Yf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>QR(e,"x"),y:(t,{transform:e})=>QR(e,"y")};Yf.translateX=Yf.x;Yf.translateY=Yf.y;const op=new Set;let ej=!1,tj=!1,nj=!1;function oae(){if(tj){const t=Array.from(op).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=RLe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))==null||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}tj=!1,ej=!1,op.forEach(t=>t.complete(nj)),op.clear()}function lae(){op.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tj=!0)})}function jLe(){nj=!0,lae(),oae(),nj=!1}class OL{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(op.add(this),ej||(ej=!0,Qn.read(lae),Qn.resolveKeyframes(oae))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}kLe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),op.delete(this)}cancel(){this.state==="scheduled"&&(op.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $Le=t=>t.startsWith("--");function MLe(t,e,n){$Le(e)?t.style.setProperty(e,n):t.style[e]=n}const LLe=mL(()=>window.ScrollTimeline!==void 0),DLe={};function FLe(t,e){const n=mL(t);return()=>DLe[e]??n()}const cae=FLe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),X0=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,w9={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:X0([0,.65,.55,1]),circOut:X0([.55,0,1,.45]),backIn:X0([.31,.01,.66,-.59]),backOut:X0([.33,1.53,.69,.99])};function uae(t,e){if(t)return typeof t=="function"?cae()?iae(t,e):"ease-out":Gie(t)?X0(t):Array.isArray(t)?t.map(n=>uae(n,e)||w9.easeOut):w9[t]}function BLe(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const f=uae(o,i);Array.isArray(f)&&(u.easing=f);const d={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return c&&(d.pseudoElement=c),t.animate(u,d)}function fae(t){return typeof t=="function"&&"applyToOptions"in t}function ULe({type:t,...e}){return fae(t)&&cae()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class dae extends AL{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,pL(typeof e.type!="string");const c=ULe(e);this.animation=BLe(n,r,i,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const u=EL(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):MLe(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return yo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yo(e)}get time(){return yo(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=vl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&LLe()?(this.animation.timeline=e,xo):n(this)}}const hae={anticipate:Vie,backInOut:zie,circInOut:Hie};function zLe(t){return t in hae}function VLe(t){typeof t.ease=="string"&&zLe(t.ease)&&(t.ease=hae[t.ease])}const uP=10;class WLe extends dae{constructor(e){VLe(e),sae(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new kL({...s,autoplay:!1}),l=Math.max(uP,Ta.now()-this.startTime),c=Sc(0,uP,l-uP);n.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const b9=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cd.test(t)||t==="0")&&!t.startsWith("url("));function HLe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function qLe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=b9(i,e),o=b9(a,e);return!s||!o?!1:HLe(t)||(n==="spring"||fae(n))&&r}function rj(t){t.duration=0,t.type="keyframes"}const GLe=new Set(["opacity","clipPath","filter","transform"]),KLe=mL(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function YLe(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return KLe()&&n&&GLe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const ZLe=40;class XLe extends AL{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:l,motionValue:c,element:u,...f}){var p;super(),this.stop=()=>{var m,y;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Ta.now();const d={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:l,motionValue:c,element:u,...f},h=(u==null?void 0:u.KeyframeResolver)||OL;this.keyframeResolver=new h(o,(m,y,g)=>this.onKeyframesResolved(m,y,d,!g),l,c,u),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,i){var y,g;this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=Ta.now(),qLe(e,a,s,o)||((Du.instantAnimations||!l)&&(u==null||u(EL(e,r,n))),e[0]=e[e.length-1],rj(r),r.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ZLe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},h=!c&&YLe(d),p=(g=(y=d.motionValue)==null?void 0:y.owner)==null?void 0:g.current,m=h?new WLe({...d,element:p}):new kL(d);m.finished.then(()=>{this.notifyFinished()}).catch(xo),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),jLe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function pae(t,e,n,r=0,i=1){const a=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}const JLe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function QLe(t){const e=JLe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function mae(t,e,n=1){const[r,i]=QLe(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return jie(s)?parseFloat(s):s}return wL(i)?mae(i,e,n+1):i}const eDe={type:"spring",stiffness:500,damping:25,restSpeed:10},tDe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),nDe={type:"keyframes",duration:.8},rDe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iDe=(t,{keyframes:e})=>e.length>2?nDe:gv.has(t)?t.startsWith("scale")?tDe(e[1]):eDe:rDe,aDe=t=>t!==null;function sDe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(aDe),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}function gae(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function TL(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?gae(n,t):n}function oDe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const CL=(t,e,n,r={},i,a)=>s=>{const o=TL(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-vl(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};oDe(o)||Object.assign(u,iDe(t,u)),u.duration&&(u.duration=vl(u.duration)),u.repeatDelay&&(u.repeatDelay=vl(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(rj(u),u.delay===0&&(f=!0)),(Du.instantAnimations||Du.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(f=!0,rj(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,f&&!a&&e.get()!==void 0){const d=sDe(u.keyframes,o);if(d!==void 0){Qn.update(()=>{u.onUpdate(d),u.onComplete()});return}}return o.isSync?new kL(u):new XLe(u)};function _9(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function PL(t,e,n,r){if(typeof e=="function"){const[i,a]=_9(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=_9(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Ug(t,e,n){const r=t.getProps();return PL(r,e,n!==void 0?n:r.custom,t)}const yae=new Set(["width","height","top","left","right","bottom",...mv]),x9=30,lDe=t=>!isNaN(parseFloat(t));class cDe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=Ta.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ta.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lDe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gL);const r=this.events[e].add(n);return e==="change"?()=>{r(),Qn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ta.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>x9)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,x9);return Lie(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _y(t,e){return new cDe(t,e)}const ij=t=>Array.isArray(t);function uDe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_y(n))}function fDe(t){return ij(t)?t[t.length-1]||0:t}function dDe(t,e){const n=Ug(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=fDe(a[s]);uDe(t,s,o)}}const ma=t=>!!(t&&t.getVelocity);function hDe(t){return!!(ma(t)&&t.add)}function aj(t,e){const n=t.getValue("willChange");if(hDe(n))return n.add(e);if(!n&&Du.WillChange){const r=new Du.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function NL(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const pDe="framerAppearId",vae="data-"+NL(pDe);function wae(t){return t.props[vae]}function mDe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bae(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:s,...o}=e;const l=t.getDefaultTransition();a=a?gae(a,l):l;const c=a==null?void 0:a.reduceMotion;r&&(a=r);const u=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const d in o){const h=t.getValue(d,t.latestValues[d]??null),p=o[d];if(p===void 0||f&&mDe(f,d))continue;const m={delay:n,...TL(a||{},d)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===y&&!m.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const _=wae(t);if(_){const x=window.MotionHandoffAnimation(_,d,Qn);x!==null&&(m.startTime=x,g=!0)}}aj(t,d);const v=c??t.shouldReduceMotion;h.start(CL(d,h,p,v&&yae.has(d)?{type:!1}:m,t,g));const w=h.animation;w&&u.push(w)}if(s){const d=()=>Qn.update(()=>{s&&dDe(t,s)});u.length?Promise.all(u).then(d):d()}return u}function sj(t,e,n={}){var l;const r=Ug(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(bae(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=i;return gDe(t,e,c,u,f,d,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function gDe(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(sj(l,e,{...s,delay:n+(typeof r=="function"?0:r)+pae(t.variantChildren,l,r,i,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function yDe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>sj(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=sj(t,e,n);else{const i=typeof e=="function"?Ug(t,e,n.custom):e;r=Promise.all(bae(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const vDe={test:t=>t==="auto",parse:t=>t},_ae=t=>e=>e.test(t),xae=[pv,lt,yc,Tf,qMe,HMe,vDe],S9=t=>xae.find(_ae(t));function wDe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Mie(t):!0}const bDe=new Set(["brightness","contrast","saturate","opacity"]);function _De(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bL)||[];if(!r)return t;const i=n.replace(r,"");let a=bDe.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const xDe=/\b([a-z-]*)\(.*?\)/gu,oj={...Cd,getAnimatableNone:t=>{const e=t.match(xDe);return e?e.map(_De).join(" "):t}},E9={...pv,transform:Math.round},SDe={rotate:Tf,rotateX:Tf,rotateY:Tf,rotateZ:Tf,scale:s2,scaleX:s2,scaleY:s2,scaleZ:s2,skew:Tf,skewX:Tf,skewY:Tf,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:jb,originX:u9,originY:u9,originZ:lt},IL={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,top:lt,right:lt,bottom:lt,left:lt,inset:lt,insetBlock:lt,insetBlockStart:lt,insetBlockEnd:lt,insetInline:lt,insetInlineStart:lt,insetInlineEnd:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,paddingBlock:lt,paddingBlockStart:lt,paddingBlockEnd:lt,paddingInline:lt,paddingInlineStart:lt,paddingInlineEnd:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,marginBlock:lt,marginBlockStart:lt,marginBlockEnd:lt,marginInline:lt,marginInlineStart:lt,marginInlineEnd:lt,fontSize:lt,backgroundPositionX:lt,backgroundPositionY:lt,...SDe,zIndex:E9,fillOpacity:jb,strokeOpacity:jb,numOctaves:E9},EDe={...IL,color:Xr,backgroundColor:Xr,outlineColor:Xr,fill:Xr,stroke:Xr,borderColor:Xr,borderTopColor:Xr,borderRightColor:Xr,borderBottomColor:Xr,borderLeftColor:Xr,filter:oj,WebkitFilter:oj},Sae=t=>EDe[t];function Eae(t,e){let n=Sae(t);return n!==oj&&(n=Cd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ADe=new Set(["auto","none","0"]);function kDe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!ADe.has(a)&&$b(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=Eae(n,i)}class ODe extends OL{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),wL(f))){const d=mae(f,n.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!yae.has(r)||e.length!==2)return;const[i,a]=e,s=S9(i),o=S9(a),l=c9(i),c=c9(a);if(l!==c&&Yf[r]){this.needsMeasurement=!0;return}if(s!==o)if(v9(s)&&v9(o))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else Yf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||wDe(e[i]))&&r.push(i);r.length&&kDe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Yf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const TDe=new Set(["opacity","clipPath","filter","transform"]);function Aae(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const kae=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function lj(t){return $ie(t)&&"offsetHeight"in t}const{schedule:RL}=Kie(queueMicrotask,!1),Qo={x:!1,y:!1};function Oae(){return Qo.x||Qo.y}function CDe(t){return t==="x"||t==="y"?Qo[t]?null:(Qo[t]=!0,()=>{Qo[t]=!1}):Qo.x||Qo.y?null:(Qo.x=Qo.y=!0,()=>{Qo.x=Qo.y=!1})}function Tae(t,e){const n=Aae(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function PDe(t){return!(t.pointerType==="touch"||Oae())}function NDe(t,e,n={}){const[r,i,a]=Tae(t,n);return r.forEach(s=>{let o=!1,l=!1,c;const u=()=>{s.removeEventListener("pointerleave",p)},f=y=>{c&&(c(y),c=void 0),u()},d=y=>{o=!1,window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d),l&&(l=!1,f(y))},h=()=>{o=!0,window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",d,i)},p=y=>{if(y.pointerType!=="touch"){if(o){l=!0;return}f(y)}},m=y=>{if(!PDe(y))return;l=!1;const g=e(s,y);typeof g=="function"&&(c=g,s.addEventListener("pointerleave",p,i))};s.addEventListener("pointerenter",m,i),s.addEventListener("pointerdown",h,i)}),a}const Cae=(t,e)=>e?t===e?!0:Cae(t,e.parentElement):!1,jL=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,IDe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function RDe(t){return IDe.has(t.tagName)||t.isContentEditable===!0}const jDe=new Set(["INPUT","SELECT","TEXTAREA"]);function $De(t){return jDe.has(t.tagName)||t.isContentEditable===!0}const vS=new WeakSet;function A9(t){return e=>{e.key==="Enter"&&t(e)}}function fP(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MDe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=A9(()=>{if(vS.has(n))return;fP(n,"down");const i=A9(()=>{fP(n,"up")}),a=()=>fP(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function k9(t){return jL(t)&&!Oae()}const O9=new WeakSet;function LDe(t,e,n={}){const[r,i,a]=Tae(t,n),s=o=>{const l=o.currentTarget;if(!k9(o)||O9.has(o))return;vS.add(l),n.stopPropagation&&O9.add(o);const c=e(l,o),u=(h,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),vS.has(l)&&vS.delete(l),k9(h)&&typeof c=="function"&&c(h,{success:p})},f=h=>{u(h,l===window||l===document||n.useGlobalTarget||Cae(l,h.target))},d=h=>{u(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",d,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),lj(o)&&(o.addEventListener("focus",c=>MDe(c,i)),!RDe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function $L(t){return $ie(t)&&"ownerSVGElement"in t}const wS=new WeakMap;let Cf;const Pae=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:$L(r)&&"getBBox"in r?r.getBBox()[e]:r[n],DDe=Pae("inline","width","offsetWidth"),FDe=Pae("block","height","offsetHeight");function BDe({target:t,borderBoxSize:e}){var n;(n=wS.get(t))==null||n.forEach(r=>{r(t,{get width(){return DDe(t,e)},get height(){return FDe(t,e)}})})}function UDe(t){t.forEach(BDe)}function zDe(){typeof ResizeObserver>"u"||(Cf=new ResizeObserver(UDe))}function VDe(t,e){Cf||zDe();const n=Aae(t);return n.forEach(r=>{let i=wS.get(r);i||(i=new Set,wS.set(r,i)),i.add(e),Cf==null||Cf.observe(r)}),()=>{n.forEach(r=>{const i=wS.get(r);i==null||i.delete(e),i!=null&&i.size||Cf==null||Cf.unobserve(r)})}}const bS=new Set;let gg;function WDe(){gg=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};bS.forEach(e=>e(t))},window.addEventListener("resize",gg)}function HDe(t){return bS.add(t),gg||WDe(),()=>{bS.delete(t),!bS.size&&typeof gg=="function"&&(window.removeEventListener("resize",gg),gg=void 0)}}function T9(t,e){return typeof t=="function"?HDe(t):VDe(t,e)}function qDe(t){return $L(t)&&t.tagName==="svg"}const GDe=[...xae,Xr,Cd],KDe=t=>GDe.find(_ae(t)),C9=()=>({translate:0,scale:1,origin:0,originPoint:0}),yg=()=>({x:C9(),y:C9()}),P9=()=>({min:0,max:0}),gi=()=>({x:P9(),y:P9()}),YDe=new WeakMap;function Ek(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Mb(t){return typeof t=="string"||Array.isArray(t)}const ML=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],LL=["initial",...ML];function Ak(t){return Ek(t.animate)||LL.some(e=>Mb(t[e]))}function Nae(t){return!!(Ak(t)||t.variants)}function ZDe(t,e,n){for(const r in e){const i=e[r],a=n[r];if(ma(i))t.addValue(r,i);else if(ma(a))t.addValue(r,_y(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,_y(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const cj={current:null},Iae={current:!1},XDe=typeof window<"u";function JDe(){if(Iae.current=!0,!!XDe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cj.current=t.matches;t.addEventListener("change",e),e()}else cj.current=!1}const N9=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let ZE={};function Rae(t){ZE=t}function QDe(){return ZE}class e6e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=OL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Ta.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Qn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Ak(n),this.isVariantNode=Nae(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const p=d[h];c[h]!==void 0&&ma(p)&&p.set(c[h])}}mount(e){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,YDe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Iae.current||JDe(),this.shouldReduceMotion=cj.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Td(this.notifyUpdate),Td(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&TDe.has(e)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:l,ease:c,duration:u}=n.accelerate,f=new dae({element:this.current,name:e,keyframes:o,times:l,ease:c,duration:vl(u)}),d=s(f);this.valueSubscriptions.set(e,()=>{d(),f.cancel()});return}const r=gv.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Qn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ZE){const n=ZE[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<N9.length;r++){const i=N9[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=ZDe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_y(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(jie(r)||Mie(r))?r=parseFloat(r):!KDe(r)&&Cd.test(n)&&(r=Eae(e,n)),this.setBaseTarget(e,ma(r)?r.get():r)),ma(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=PL(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ma(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gL),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){RL.render(this.render)}}class jae extends e6e{constructor(){super(...arguments),this.KeyframeResolver=ODe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ma(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class zd{constructor(e){this.isMounted=!1,this.node=e}update(){}}function $ae({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function t6e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function n6e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function dP(t){return t===void 0||t===1}function uj({scale:t,scaleX:e,scaleY:n}){return!dP(t)||!dP(e)||!dP(n)}function kh(t){return uj(t)||Mae(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Mae(t){return I9(t.x)||I9(t.y)}function I9(t){return t&&t!=="0%"}function XE(t,e,n){const r=t-n,i=e*r;return n+i}function R9(t,e,n,r,i){return i!==void 0&&(t=XE(t,i,r)),XE(t,n,r)+e}function fj(t,e=0,n=1,r,i){t.min=R9(t.min,e,n,r,i),t.max=R9(t.max,e,n,r,i)}function Lae(t,{x:e,y:n}){fj(t.x,e.translate,e.scale,e.originPoint),fj(t.y,n.translate,n.scale,n.originPoint)}const j9=.999999999999,$9=1.0000000000001;function r6e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&wg(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Lae(t,s)),r&&kh(a.latestValues)&&wg(t,a.latestValues))}e.x<$9&&e.x>j9&&(e.x=1),e.y<$9&&e.y>j9&&(e.y=1)}function vg(t,e){t.min=t.min+e,t.max=t.max+e}function M9(t,e,n,r,i=.5){const a=_r(t.min,t.max,i);fj(t,e,n,a,r)}function wg(t,e){M9(t.x,e.x,e.scaleX,e.scale,e.originX),M9(t.y,e.y,e.scaleY,e.scale,e.originY)}function Dae(t,e){return $ae(n6e(t.getBoundingClientRect(),e))}function i6e(t,e,n){const r=Dae(t,n),{scroll:i}=e;return i&&(vg(r.x,i.offset.x),vg(r.y,i.offset.y)),r}const a6e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s6e=mv.length;function o6e(t,e,n){let r="",i=!0;for(let a=0;a<s6e;a++){const s=mv[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(s.startsWith("scale")?1:0);else{const c=parseFloat(o);l=s.startsWith("scale")?c===1:c===0}if(!l||n){const c=kae(o,IL[s]);if(!l){i=!1;const u=a6e[s]||s;r+=`${u}(${c}) `}n&&(e[s]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function DL(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const c=e[l];if(gv.has(l)){s=!0;continue}else if(Zie(l)){i[l]=c;continue}else{const u=kae(c,IL[l]);l.startsWith("origin")?(o=!0,a[l]=u):r[l]=u}}if(e.transform||(s||n?r.transform=o6e(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=a;r.transformOrigin=`${l} ${c} ${u}`}}function Fae(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i==null||i.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function L9(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const x0={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(lt.test(t))t=parseFloat(t);else return t;const n=L9(t,e.target.x),r=L9(t,e.target.y);return`${n}% ${r}%`}},l6e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Cd.parse(t);if(i.length>5)return r;const a=Cd.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const c=_r(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),a(i)}},dj={borderRadius:{...x0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:x0,borderTopRightRadius:x0,borderBottomLeftRadius:x0,borderBottomRightRadius:x0,boxShadow:l6e};function Bae(t,{layout:e,layoutId:n}){return gv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dj[t]||t==="opacity")}function FL(t,e,n){var s;const r=t.style,i=e==null?void 0:e.style,a={};if(!r)return a;for(const o in r)(ma(r[o])||i&&ma(i[o])||Bae(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(a[o]=r[o]);return a}function c6e(t){return window.getComputedStyle(t)}class u6e extends jae{constructor(){super(...arguments),this.type="html",this.renderInstance=Fae}readValueFromInstance(e,n){var r;if(gv.has(n))return(r=this.projection)!=null&&r.isProjecting?JR(n):CLe(e,n);{const i=c6e(e),a=(Zie(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Dae(e,n)}build(e,n,r){DL(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return FL(e,n,r)}}const f6e={offset:"stroke-dashoffset",array:"stroke-dasharray"},d6e={offset:"strokeDashoffset",array:"strokeDasharray"};function h6e(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?f6e:d6e;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const p6e=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Uae(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,c,u){if(DL(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:d}=t;f.transform&&(d.transform=f.transform,delete f.transform),(d.transform||f.transformOrigin)&&(d.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),d.transform&&(d.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox);for(const h of p6e)f[h]!==void 0&&(d[h]=f[h],delete f[h]);e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&h6e(f,i,a,s,!1)}const zae=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Vae=t=>typeof t=="string"&&t.toLowerCase()==="svg";function m6e(t,e,n,r){Fae(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(zae.has(i)?i:NL(i),e.attrs[i])}function Wae(t,e,n){const r=FL(t,e,n);for(const i in t)if(ma(t[i])||ma(e[i])){const a=mv.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}class g6e extends jae{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(gv.has(n)){const r=Sae(n);return r&&r.default||0}return n=zae.has(n)?n:NL(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Wae(e,n,r)}build(e,n,r){Uae(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){m6e(e,n,r,i)}mount(e){this.isSVGTag=Vae(e.tagName),super.mount(e)}}const y6e=LL.length;function Hae(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Hae(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<y6e;n++){const r=LL[n],i=t.props[r];(Mb(i)||i===!1)&&(e[r]=i)}return e}function qae(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const v6e=[...ML].reverse(),w6e=ML.length;function b6e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>yDe(t,n,r)))}function _6e(t){let e=b6e(t),n=D9(),r=!0;const i=l=>(c,u)=>{var d;const f=Ug(t,u,l==="exit"?(d=t.presenceContext)==null?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...m}=f;c={...c,...m,...p}}return c};function a(l){e=l(t)}function s(l){const{props:c}=t,u=Hae(t.parent)||{},f=[],d=new Set;let h={},p=1/0;for(let y=0;y<w6e;y++){const g=v6e[y],v=n[g],w=c[g]!==void 0?c[g]:u[g],_=Mb(w),x=g===l?v.isActive:null;x===!1&&(p=y);let E=w===u[g]&&w!==c[g]&&_;if(E&&r&&t.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...h},!v.isActive&&x===null||!w&&!v.prevProp||Ek(w)||typeof w=="boolean")continue;if(g==="exit"&&v.isActive&&x!==!0){v.prevResolvedValues&&(h={...h,...v.prevResolvedValues});continue}const T=x6e(v.prevProp,w);let O=T||g===l&&v.isActive&&!E&&_||y>p&&_,R=!1;const M=Array.isArray(w)?w:[w];let N=M.reduce(i(g),{});x===!1&&(N={});const{prevResolvedValues:j={}}=v,U={...j,...N},B=X=>{O=!0,d.has(X)&&(R=!0,d.delete(X)),v.needsAnimating[X]=!0;const z=t.getValue(X);z&&(z.liveStyle=!1)};for(const X in U){const z=N[X],G=j[X];if(h.hasOwnProperty(X))continue;let ae=!1;ij(z)&&ij(G)?ae=!qae(z,G):ae=z!==G,ae?z!=null?B(X):d.add(X):z!==void 0&&d.has(X)?B(X):v.protectedKeys[X]=!0}v.prevProp=w,v.prevResolvedValues=N,v.isActive&&(h={...h,...N}),r&&t.blockInitialAnimation&&(O=!1);const V=E&&T;O&&(!V||R)&&f.push(...M.map(X=>{const z={type:g};if(typeof X=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:G}=t,ae=Ug(G,X);if(G.enteringChildren&&ae){const{delayChildren:ue}=ae.transition||{};z.delay=pae(G.enteringChildren,t,ue)}}return{animation:X,options:z}}))}if(d.size){const y={};if(typeof c.initial!="boolean"){const g=Ug(t,Array.isArray(c.initial)?c.initial[0]:c.initial);g&&g.transition&&(y.transition=g.transition)}d.forEach(g=>{const v=t.getBaseTarget(g),w=t.getValue(g);w&&(w.liveStyle=!0),y[g]=v??null}),f.push({animation:y})}let m=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function o(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(d=>{var h;return(h=d.animationState)==null?void 0:h.setActive(l,c)}),n[l].isActive=c;const u=s(l);for(const d in n)n[d].protectedKeys={};return u}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=D9()}}}function x6e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!qae(e,t):!1}function gh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function D9(){return{animate:gh(!0),whileInView:gh(),whileHover:gh(),whileTap:gh(),whileDrag:gh(),whileFocus:gh(),exit:gh()}}function F9(t,e){t.min=e.min,t.max=e.max}function Go(t,e){F9(t.x,e.x),F9(t.y,e.y)}function B9(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const Gae=1e-4,S6e=1-Gae,E6e=1+Gae,Kae=.01,A6e=0-Kae,k6e=0+Kae;function Ca(t){return t.max-t.min}function O6e(t,e,n){return Math.abs(t-e)<=n}function U9(t,e,n,r=.5){t.origin=r,t.originPoint=_r(e.min,e.max,t.origin),t.scale=Ca(n)/Ca(e),t.translate=_r(n.min,n.max,t.origin)-t.originPoint,(t.scale>=S6e&&t.scale<=E6e||isNaN(t.scale))&&(t.scale=1),(t.translate>=A6e&&t.translate<=k6e||isNaN(t.translate))&&(t.translate=0)}function Sw(t,e,n,r){U9(t.x,e.x,n.x,r?r.originX:void 0),U9(t.y,e.y,n.y,r?r.originY:void 0)}function z9(t,e,n){t.min=n.min+e.min,t.max=t.min+Ca(e)}function T6e(t,e,n){z9(t.x,e.x,n.x),z9(t.y,e.y,n.y)}function V9(t,e,n){t.min=e.min-n.min,t.max=t.min+Ca(e)}function JE(t,e,n){V9(t.x,e.x,n.x),V9(t.y,e.y,n.y)}function W9(t,e,n,r,i){return t-=e,t=XE(t,1/n,r),i!==void 0&&(t=XE(t,1/i,r)),t}function C6e(t,e=0,n=1,r=.5,i,a=t,s=t){if(yc.test(e)&&(e=parseFloat(e),e=_r(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=_r(a.min,a.max,r);t===a&&(o-=e),t.min=W9(t.min,e,n,o,i),t.max=W9(t.max,e,n,o,i)}function H9(t,e,[n,r,i],a,s){C6e(t,e[n],e[r],e[i],e.scale,a,s)}const P6e=["x","scaleX","originX"],N6e=["y","scaleY","originY"];function q9(t,e,n,r){H9(t.x,e,P6e,n?n.x:void 0,r?r.x:void 0),H9(t.y,e,N6e,n?n.y:void 0,r?r.y:void 0)}function G9(t){return t.translate===0&&t.scale===1}function Yae(t){return G9(t.x)&&G9(t.y)}function K9(t,e){return t.min===e.min&&t.max===e.max}function I6e(t,e){return K9(t.x,e.x)&&K9(t.y,e.y)}function Y9(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Zae(t,e){return Y9(t.x,e.x)&&Y9(t.y,e.y)}function Z9(t){return Ca(t.x)/Ca(t.y)}function X9(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Zl(t){return[t("x"),t("y")]}function R6e(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:d,skewX:h,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),d&&(r+=`rotateY(${d}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Xae=["TopLeft","TopRight","BottomLeft","BottomRight"],j6e=Xae.length,J9=t=>typeof t=="string"?parseFloat(t):t,Q9=t=>typeof t=="number"||lt.test(t);function $6e(t,e,n,r,i,a){i?(t.opacity=_r(0,n.opacity??1,M6e(r)),t.opacityExit=_r(e.opacity??1,0,L6e(r))):a&&(t.opacity=_r(e.opacity??1,n.opacity??1,r));for(let s=0;s<j6e;s++){const o=`border${Xae[s]}Radius`;let l=ez(e,o),c=ez(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Q9(l)===Q9(c)?(t[o]=Math.max(_r(J9(l),J9(c),r),0),(yc.test(c)||yc.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=_r(e.rotate||0,n.rotate||0,r))}function ez(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const M6e=Jae(0,.5,Wie),L6e=Jae(.5,.95,xo);function Jae(t,e,n){return r=>r<t?0:r>e?1:n(Rb(t,e,r))}function D6e(t,e,n){const r=ma(t)?t:_y(t);return r.start(CL("",r,e,n)),r.animation}function Lb(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const F6e=(t,e)=>t.depth-e.depth;class B6e{constructor(){this.children=[],this.isDirty=!1}add(e){hL(this.children,e),this.isDirty=!0}remove(e){qE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(F6e),this.isDirty=!1,this.children.forEach(e)}}function U6e(t,e){const n=Ta.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Td(r),t(a-e))};return Qn.setup(r,!0),()=>Td(r)}function _S(t){return ma(t)?t.get():t}class z6e{constructor(){this.members=[]}add(e){hL(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&qE(this.members,r)}e.scheduleRender()}remove(e){if(qE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const l=r.instance;l&&l.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const xS={hasAnimatedSinceResize:!0,hasEverUpdated:!1},hP=["","X","Y","Z"],V6e=1e3;let W6e=0;function pP(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Qae(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=wae(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Qn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Qae(r)}function ese({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=W6e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G6e),this.nodes.forEach(X6e),this.nodes.forEach(J6e),this.nodes.forEach(K6e)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new B6e)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new gL),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=$L(s)&&!qDe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let u,f=0;const d=()=>this.root.updateBlockedByResize=!1;Qn.read(()=>{f=window.innerWidth}),t(s,()=>{const h=window.innerWidth;h!==f&&(f=h,this.root.updateBlockedByResize=!0,u&&u(),u=U6e(d,250),xS.hasAnimatedSinceResize&&(xS.hasAnimatedSinceResize=!1,this.nodes.forEach(rz)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:d,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||r8e,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),g=!this.targetLayout||!Zae(this.targetLayout,h),v=!f&&d;if(this.options.layoutRoot||this.resumeFrom||v||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...TL(p,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,v)}else f||rz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Td(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Q6e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Qae(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(nz);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Z6e),this.nodes.forEach(H6e),this.nodes.forEach(q6e)):this.nodes.forEach(nz),this.clearAllSnapshots();const o=Ta.now();Yi.delta=Sc(0,1e3/60,o-Yi.timestamp),Yi.timestamp=o,Yi.isProcessing=!0,aP.update.process(Yi),aP.preRender.process(Yi),aP.render.process(Yi),Yi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,RL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Y6e),this.sharedNodes.forEach(e8e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ca(this.snapshot.measuredBox.x)&&!Ca(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=gi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Yae(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&this.instance&&(o||kh(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),i8e(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:s}=this.options;if(!s)return gi();const o=s.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(a8e))){const{scroll:u}=this.root;u&&(vg(o.x,u.offset.x),vg(o.y,u.offset.y))}return o}removeElementScroll(s){var l;const o=gi();if(Go(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;u!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&Go(o,s),vg(o.x,f.offset.x),vg(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const l=gi();Go(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&wg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),kh(u.latestValues)&&wg(l,u.latestValues)}return kh(this.latestValues)&&wg(l,this.latestValues),l}removeTransform(s){const o=gi();Go(o,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!kh(c.latestValues))continue;uj(c.latestValues)&&c.updateSnapshot();const u=gi(),f=c.measurePageBox();Go(u,f),q9(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return kh(this.latestValues)&&q9(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!this.layout||!(u||f))return;this.resolvedRelativeTargetAt=Yi.timestamp;const d=this.getClosestProjectingParent();d&&this.linkedParentVersion!==d.layoutVersion&&!d.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(d&&d.layout?this.createRelativeTarget(d,this.layout.layoutBox,d.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=gi(),this.targetWithTransforms=gi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),T6e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Go(this.target,this.layout.layoutBox),Lae(this.target,this.targetDelta)):Go(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?this.createRelativeTarget(d,this.target,d.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||uj(this.parent.latestValues)||Mae(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,l){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gi(),this.relativeTargetOrigin=gi(),JE(this.relativeTargetOrigin,o,l),Go(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Yi.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Go(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;r6e(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=gi());const{target:h}=s;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(B9(this.prevProjectionDelta.x,this.projectionDelta.x),B9(this.prevProjectionDelta.y,this.projectionDelta.y)),Sw(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!X9(this.projectionDelta.x,this.prevProjectionDelta.x)||!X9(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yg(),this.projectionDelta=yg(),this.projectionDeltaWithTransform=yg()}setAnimationOrigin(s,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=yg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=gi(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,y=this.getStack(),g=!y||y.members.length<=1,v=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(n8e));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const x=_/1e3;iz(f.x,s.x,x),iz(f.y,s.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(JE(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),t8e(this.relativeTarget,this.relativeTargetOrigin,d,x),w&&I6e(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=gi()),Go(w,this.relativeTarget)),m&&(this.animationValues=u,$6e(u,c,this.latestValues,x,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Td(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qn.update(()=>{xS.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_y(0)),this.currentAnimation=D6e(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),s.onUpdate&&s.onUpdate(u)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(V6e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=s;if(!(!o||!l||!c)){if(this!==s&&this.layout&&c&&tse(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||gi();const f=Ca(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=Ca(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}Go(o,l),wg(o,u),Sw(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new z6e),this.sharedNodes.get(s).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&pP("z",s,c,this.animationValues);for(let u=0;u<hP.length;u++)pP(`rotate${hP[u]}`,s,c,this.animationValues),pP(`skew${hP[u]}`,s,c,this.animationValues);s.render();for(const u in c)s.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=_S(o==null?void 0:o.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=_S(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!kh(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=R6e(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),s.transform=f;const{x:d,y:h}=this.projectionDelta;s.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,c.animationValues?s.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:s.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in dj){if(u[p]===void 0)continue;const{correct:m,applyTo:y,isCSSVariable:g}=dj[p],v=f==="none"?u[p]:m(u[p],c);if(y){const w=y.length;for(let _=0;_<w;_++)s[y[_]]=v}else g?this.options.visualElement.renderState.vars[p]=v:s[p]=v}this.options.layoutId&&(s.pointerEvents=c===this?_S(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(tz),this.root.sharedNodes.clear()}}}function H6e(t){t.updateLayout()}function q6e(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=e.source!==t.layout.source;a==="size"?Zl(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],h=Ca(d);d.min=r[f].min,d.max=d.min+h}):tse(a,e.layoutBox,r)&&Zl(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],h=Ca(r[f]);d.max=d.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const o=yg();Sw(o,r,e.layoutBox);const l=yg();s?Sw(l,t.applyTransform(i,!0),e.measuredBox):Sw(l,r,e.layoutBox);const c=!Yae(o);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=gi();JE(p,e.layoutBox,d.layoutBox);const m=gi();JE(m,r,h.layoutBox),Zae(p,m)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function G6e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function K6e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Y6e(t){t.clearSnapshot()}function tz(t){t.clearMeasurements()}function nz(t){t.isLayoutDirty=!1}function Z6e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rz(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function X6e(t){t.resolveTargetDelta()}function J6e(t){t.calcProjection()}function Q6e(t){t.resetSkewAndRotation()}function e8e(t){t.removeLeadSnapshot()}function iz(t,e,n){t.translate=_r(e.translate,0,n),t.scale=_r(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function az(t,e,n,r){t.min=_r(e.min,n.min,r),t.max=_r(e.max,n.max,r)}function t8e(t,e,n,r){az(t.x,e.x,n.x,r),az(t.y,e.y,n.y,r)}function n8e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const r8e={duration:.45,ease:[.4,0,.1,1]},sz=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),oz=sz("applewebkit/")&&!sz("chrome/")?Math.round:xo;function lz(t){t.min=oz(t.min),t.max=oz(t.max)}function i8e(t){lz(t.x),lz(t.y)}function tse(t,e,n){return t==="position"||t==="preserve-aspect"&&!O6e(Z9(e),Z9(n),.2)}function a8e(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const s8e=ese({attachResizeListener:(t,e)=>Lb(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),mP={current:void 0},nse=ese({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!mP.current){const t=new s8e({});t.mount(window),t.setOptions({layoutScroll:!0}),mP.current=t}return mP.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BL=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function cz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function o8e(...t){return e=>{let n=!1;const r=t.map(i=>{const a=cz(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():cz(t[i],null)}}}}function l8e(...t){return k.useCallback(o8e(...t),t)}class c8e extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=lj(r)&&r.offsetWidth||0,a=lj(r)&&r.offsetHeight||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function u8e({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:a}){var d;const s=k.useId(),o=k.useRef(null),l=k.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=k.useContext(BL),u=((d=t.props)==null?void 0:d.ref)??(t==null?void 0:t.ref),f=l8e(o,u);return k.useInsertionEffect(()=>{const{width:h,height:p,top:m,left:y,right:g,bottom:v}=l.current;if(e||a===!1||!o.current||!h||!p)return;const w=n==="left"?`left: ${y}`:`right: ${g}`,_=r==="bottom"?`bottom: ${v}`:`top: ${m}`;o.current.dataset.motionPopId=s;const x=document.createElement("style");c&&(x.nonce=c);const E=i??document.head;return E.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            ${w}px !important;
            ${_}px !important;
          }
        `),()=>{E.contains(x)&&E.removeChild(x)}},[e]),S.jsx(c8e,{isPresent:e,childRef:o,sizeRef:l,pop:a,children:a===!1?t:k.cloneElement(t,{ref:f})})}const f8e=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:l,root:c})=>{const u=dL(d8e),f=k.useId();let d=!0,h=k.useMemo(()=>(d=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:p=>{u.set(p,!0);for(const m of u.values())if(!m)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return a&&d&&(h={...h}),k.useMemo(()=>{u.forEach((p,m)=>u.set(m,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),t=S.jsx(u8e,{pop:s==="popLayout",isPresent:n,anchorX:o,anchorY:l,root:c,children:t}),S.jsx(Sk.Provider,{value:h,children:t})};function d8e(){return new Map}function rse(t=!0){const e=k.useContext(Sk);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=k.useId();k.useEffect(()=>{if(t)return i(a)},[t]);const s=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const o2=t=>t.key||"";function uz(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const h8e=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:l="top",root:c})=>{const[u,f]=rse(s),d=k.useMemo(()=>uz(t),[t]),h=s&&!u?[]:d.map(o2),p=k.useRef(!0),m=k.useRef(d),y=dL(()=>new Map),g=k.useRef(new Set),[v,w]=k.useState(d),[_,x]=k.useState(d);Rie(()=>{p.current=!1,m.current=d;for(let O=0;O<_.length;O++){const R=o2(_[O]);h.includes(R)?(y.delete(R),g.current.delete(R)):y.get(R)!==!0&&y.set(R,!1)}},[_,h.length,h.join("-")]);const E=[];if(d!==v){let O=[...d];for(let R=0;R<_.length;R++){const M=_[R],N=o2(M);h.includes(N)||(O.splice(R,0,M),E.push(M))}return a==="wait"&&E.length&&(O=E),x(uz(O)),w(d),null}const{forceRender:T}=k.useContext(fL);return S.jsx(S.Fragment,{children:_.map(O=>{const R=o2(O),M=s&&!u?!1:d===_||h.includes(R),N=()=>{if(g.current.has(R))return;if(g.current.add(R),y.has(R))y.set(R,!0);else return;let j=!0;y.forEach(U=>{U||(j=!1)}),j&&(T==null||T(),x(m.current),s&&(f==null||f()),r&&r())};return S.jsx(f8e,{isPresent:M,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:M?void 0:N,anchorX:o,anchorY:l,children:O},R)})})},ise=k.createContext({strict:!1}),fz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let dz=!1;function p8e(){if(dz)return;const t={};for(const e in fz)t[e]={isEnabled:n=>fz[e].some(r=>!!n[r])};Rae(t),dz=!0}function ase(){return p8e(),QDe()}function m8e(t){const e=ase();for(const n in t)e[n]={...e[n],...t[n]};Rae(e)}const g8e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function QE(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||g8e.has(t)}let sse=t=>!QE(t);function y8e(t){typeof t=="function"&&(sse=e=>e.startsWith("on")?!QE(e):t(e))}try{y8e(require("@emotion/is-prop-valid").default)}catch{}function v8e(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(sse(i)||n===!0&&QE(i)||!e&&!QE(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const kk=k.createContext({});function w8e(t,e){if(Ak(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Mb(n)?n:void 0,animate:Mb(r)?r:void 0}}return t.inherit!==!1?e:{}}function b8e(t){const{initial:e,animate:n}=w8e(t,k.useContext(kk));return k.useMemo(()=>({initial:e,animate:n}),[hz(e),hz(n)])}function hz(t){return Array.isArray(t)?t.join(" "):t}const UL=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ose(t,e,n){for(const r in e)!ma(e[r])&&!Bae(r,n)&&(t[r]=e[r])}function _8e({transformTemplate:t},e){return k.useMemo(()=>{const n=UL();return DL(n,e,t),Object.assign({},n.vars,n.style)},[e])}function x8e(t,e){const n=t.style||{},r={};return ose(r,n,t),Object.assign(r,_8e(t,e)),r}function S8e(t,e){const n={},r=x8e(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const lse=()=>({...UL(),attrs:{}});function E8e(t,e,n,r){const i=k.useMemo(()=>{const a=lse();return Uae(a,e,Vae(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};ose(a,t.style,t),i.style={...a,...i.style}}return i}const A8e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zL(t){return typeof t!="string"||t.includes("-")?!1:!!(A8e.indexOf(t)>-1||/[A-Z]/u.test(t))}function k8e(t,e,n,{latestValues:r},i,a=!1,s){const l=(s??zL(t)?E8e:S8e)(e,r,i,t),c=v8e(e,typeof t=="string",a),u=t!==k.Fragment?{...c,...l,ref:n}:{},{children:f}=e,d=k.useMemo(()=>ma(f)?f.get():f,[f]);return k.createElement(t,{...u,children:d})}function O8e({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:T8e(n,r,i,t),renderState:e()}}function T8e(t,e,n,r){const i={},a=r(t,{});for(const d in a)i[d]=_S(a[d]);let{initial:s,animate:o}=t;const l=Ak(t),c=Nae(t);e&&c&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||s===!1;const f=u?o:s;if(f&&typeof f!="boolean"&&!Ek(f)){const d=Array.isArray(f)?f:[f];for(let h=0;h<d.length;h++){const p=PL(t,d[h]);if(p){const{transitionEnd:m,transition:y,...g}=p;for(const v in g){let w=g[v];if(Array.isArray(w)){const _=u?w.length-1:0;w=w[_]}w!==null&&(i[v]=w)}for(const v in m)i[v]=m[v]}}}return i}const cse=t=>(e,n)=>{const r=k.useContext(kk),i=k.useContext(Sk),a=()=>O8e(t,e,r,i);return n?a():dL(a)},C8e=cse({scrapeMotionValuesFromProps:FL,createRenderState:UL}),P8e=cse({scrapeMotionValuesFromProps:Wae,createRenderState:lse}),N8e=Symbol.for("motionComponentSymbol");function I8e(t,e,n){const r=k.useRef(n);k.useInsertionEffect(()=>{r.current=n});const i=k.useRef(null);return k.useCallback(a=>{var o;a&&((o=t.onMount)==null||o.call(t,a)),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const l=s(a);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const use=k.createContext({});function Vm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function R8e(t,e,n,r,i,a){var w,_;const{visualElement:s}=k.useContext(kk),o=k.useContext(ise),l=k.useContext(Sk),c=k.useContext(BL),u=c.reducedMotion,f=c.skipAnimations,d=k.useRef(null),h=k.useRef(!1);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u,skipAnimations:f,isSVG:a}),h.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const p=d.current,m=k.useContext(use);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&j8e(d.current,n,i,m);const y=k.useRef(!1);k.useInsertionEffect(()=>{p&&y.current&&p.update(n,l)});const g=n[vae],v=k.useRef(!!g&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,g))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,g)));return Rie(()=>{h.current=!0,p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),v.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),v.current=!1),p.enteringChildren=void 0)}),p}function j8e(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:fse(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Vm(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function fse(t){if(t)return t.options.allowProjection!==!1?t.projection:fse(t.parent)}function gP(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&m8e(r);const a=n?n==="svg":zL(t),s=a?P8e:C8e;function o(c,u){let f;const d={...k.useContext(BL),...c,layoutId:$8e(c)},{isStatic:h}=d,p=b8e(c),m=s(c,h);if(!h&&Iie){M8e();const y=L8e(d);f=y.MeasureLayout,p.visualElement=R8e(t,m,d,i,y.ProjectionNode,a)}return S.jsxs(kk.Provider,{value:p,children:[f&&p.visualElement?S.jsx(f,{visualElement:p.visualElement,...d}):null,k8e(t,c,I8e(m,p.visualElement,u),m,h,e,a)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=k.forwardRef(o);return l[N8e]=t,l}function $8e({layoutId:t}){const e=k.useContext(fL).id;return e&&t!==void 0?e+"-"+t:t}function M8e(t,e){k.useContext(ise).strict}function L8e(t){const e=ase(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function D8e(t,e){if(typeof Proxy>"u")return gP;const n=new Map,r=(a,s)=>gP(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,gP(s,void 0,t,e)),n.get(s))})}const F8e=(t,e)=>e.isSVG??zL(t)?new g6e(e):new u6e(e,{allowProjection:t!==k.Fragment});class B8e extends zd{constructor(e){super(e),e.animationState||(e.animationState=_6e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ek(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let U8e=0;class z8e extends zd{constructor(){super(...arguments),this.id=U8e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const V8e={animation:{Feature:B8e},exit:{Feature:z8e}};function o_(t){return{point:{x:t.pageX,y:t.pageY}}}const W8e=t=>e=>jL(e)&&t(e,o_(e));function Ew(t,e,n,r){return Lb(t,e,W8e(n),r)}const dse=({current:t})=>t?t.ownerDocument.defaultView:null,pz=(t,e)=>Math.abs(t-e);function H8e(t,e){const n=pz(t.x,e.x),r=pz(t.y,e.y);return Math.sqrt(n**2+r**2)}const mz=new Set(["auto","scroll"]);class hse{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=h=>{this.handleScroll(h.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=vP(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=H8e(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:y}=h,{timestamp:g}=Yi;this.history.push({...y,timestamp:g});const{onStart:v,onMove:w}=this.handlers;p||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=yP(p,this.transformPagePoint),Qn.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=vP(h.type==="pointercancel"?this.lastMoveEventInfo:yP(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,v),y&&y(h,v)},!jL(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const l=o_(e),c=yP(l,this.transformPagePoint),{point:u}=c,{timestamp:f}=Yi;this.history=[{...u,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,vP(c,this.history)),this.removeListeners=i_(Ew(this.contextWindow,"pointermove",this.handlePointerMove),Ew(this.contextWindow,"pointerup",this.handlePointerUp),Ew(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(mz.has(r.overflowX)||mz.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-n.x,y:i.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),Qn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Td(this.updatePoint)}}function yP(t,e){return e?{point:e(t.point)}:t}function gz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vP({point:t},e){return{point:t,delta:gz(t,pse(e)),offset:gz(t,q8e(e)),velocity:G8e(e,.1)}}function q8e(t){return t[0]}function pse(t){return t[t.length-1]}function G8e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=pse(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>vl(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>vl(e)*2&&(r=t[1]);const a=yo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function K8e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?_r(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?_r(n,t,r.max):Math.min(t,n)),t}function yz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Y8e(t,{top:e,left:n,bottom:r,right:i}){return{x:yz(t.x,n,i),y:yz(t.y,e,r)}}function vz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Z8e(t,e){return{x:vz(t.x,e.x),y:vz(t.y,e.y)}}function X8e(t,e){let n=.5;const r=Ca(t),i=Ca(e);return i>r?n=Rb(e.min,e.max-r,t.min):r>i&&(n=Rb(t.min,t.max-i,e.min)),Sc(0,1,n)}function J8e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hj=.35;function Q8e(t=hj){return t===!1?t=0:t===!0&&(t=hj),{x:wz(t,"left","right"),y:wz(t,"top","bottom")}}function wz(t,e,n){return{min:bz(t,e),max:bz(t,n)}}function bz(t,e){return typeof t=="number"?t:t[e]||0}const eFe=new WeakMap;class tFe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{n&&this.snapToCursor(o_(f).point),this.stopAnimation()},s=(f,d)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CDe(h),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zl(g=>{let v=this.getAxisMotionValue(g).get()||0;if(yc.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const _=w.layout.layoutBox[g];_&&(v=Ca(_)*(parseFloat(v)/100))}}this.originPoint[g]=v}),m&&Qn.update(()=>m(f,d),!1,!0),aj(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d;const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:y}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:g}=d;if(p&&this.currentDirection===null){this.currentDirection=rFe(g),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),y&&Qn.update(()=>y(f,d),!1,!0)},l=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d,this.stop(f,d),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:f}=this.getProps();(f||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:u}=this.getProps();this.panSession=new hse(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:dse(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Qn.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!l2(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=K8e(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Vm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Y8e(r.layoutBox,e):this.constraints=!1,this.elastic=Q8e(n),i!==this.constraints&&!Vm(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Zl(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=J8e(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Vm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=i6e(r,i.root,this.visualElement.getTransformPagePoint());let s=Z8e(i.layout.layoutBox,a);if(n){const o=n(t6e(s));this.hasMutatedConstraints=!!o,o&&(s=$ae(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Zl(u=>{if(!l2(u,n,this.currentDirection))return;let f=l&&l[u]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return aj(this.visualElement,e),r.start(CL(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zl(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zl(n=>{const{drag:r}=this.getProps();if(!l2(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n],l=a.get()||0;a.set(e[n]-_r(s,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Vm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zl(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=X8e({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Zl(s=>{if(!l2(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];o.set(_r(l,c,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;eFe.set(this.visualElement,this);const e=this.visualElement.current,n=Ew(e,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps(),d=c.target,h=d!==e&&$De(d);u&&f&&!h&&this.start(c)});let r;const i=()=>{const{dragConstraints:c}=this.getProps();Vm(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),r||(r=nFe(e,c.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Qn.read(i);const o=Lb(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Zl(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=hj,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function _z(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function nFe(t,e,n){const r=T9(t,_z(n)),i=T9(e,_z(n));return()=>{r(),i()}}function l2(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function rFe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iFe extends zd{constructor(e){super(e),this.removeGroupControls=xo,this.removeListeners=xo,this.controls=new tFe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xo}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const wP=t=>(e,n)=>{t&&Qn.update(()=>t(e,n),!1,!0)};class aFe extends zd{constructor(){super(...arguments),this.removePointerDownListener=xo}onPointerDown(e){this.session=new hse(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dse(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:wP(e),onStart:wP(n),onMove:wP(r),onEnd:(a,s)=>{delete this.session,i&&Qn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Ew(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let bP=!1;class sFe extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),bP&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),xS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==n&&s.setOptions({...s.options,layoutDependency:n}),bP=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Qn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),RL.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;bP=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mse(t){const[e,n]=rse(),r=k.useContext(fL);return S.jsx(sFe,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(use),isPresent:e,safeToRemove:n})}const oFe={pan:{Feature:aFe},drag:{Feature:iFe,ProjectionNode:nse,MeasureLayout:mse}};function xz(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Qn.postRender(()=>a(e,o_(e)))}class lFe extends zd{mount(){const{current:e}=this.node;e&&(this.unmount=NDe(e,(n,r)=>(xz(this.node,r,"Start"),i=>xz(this.node,i,"End"))))}unmount(){}}class cFe extends zd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=i_(Lb(this.node.current,"focus",()=>this.onFocus()),Lb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Sz(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Qn.postRender(()=>a(e,o_(e)))}class uFe extends zd{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=LDe(e,(i,a)=>(Sz(this.node,a,"Start"),(s,{success:o})=>Sz(this.node,s,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const pj=new WeakMap,_P=new WeakMap,fFe=t=>{const e=pj.get(t.target);e&&e(t)},dFe=t=>{t.forEach(fFe)};function hFe({root:t,...e}){const n=t||document;_P.has(n)||_P.set(n,{});const r=_P.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(dFe,{root:t,...e})),r[i]}function pFe(t,e,n){const r=hFe(e);return pj.set(t,n),r.observe(t),()=>{pj.delete(t),r.unobserve(t)}}const mFe={some:0,all:1};class gFe extends zd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mFe[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),d=c?u:f;d&&d(l)};return pFe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(yFe(e,n))&&this.startObserver()}unmount(){}}function yFe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const vFe={inView:{Feature:gFe},tap:{Feature:uFe},focus:{Feature:cFe},hover:{Feature:lFe}},wFe={layout:{ProjectionNode:nse,MeasureLayout:mse}},bFe={...V8e,...vFe,...oFe,...wFe},Ez=D8e(bFe,F8e),_Fe=()=>{const{messages:t,isOpen:e,setIsOpen:n,isTyping:r,sendMessage:i,clearChat:a}=kMe(),[s,o]=k.useState(""),[l,c]=k.useState(!1),u=k.useRef(null);k.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t,r]);const f=d=>{d.preventDefault(),!(!s.trim()||r)&&(i(s),o(""))};return S.jsxs("div",{className:"fixed bottom-6 right-6 z-[100] flex flex-col items-end gap-4",children:[S.jsx(h8e,{children:e&&S.jsx(Ez.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,height:l?"auto":"500px"},exit:{opacity:0,scale:.9,y:20},className:xt("w-[350px] shadow-2xl overflow-hidden flex flex-col",l?"h-auto":"h-[500px]"),children:S.jsxs(lr,{className:"h-full border-primary/20 flex flex-col",children:[S.jsxs(ts,{className:"p-4 border-b bg-primary text-primary-foreground flex flex-row items-center justify-between space-y-0",children:[S.jsxs($s,{className:"text-sm font-bold flex items-center gap-2",children:[S.jsx(oX,{className:"h-4 w-4"}),"PennyWise AI"]}),S.jsxs("div",{className:"flex items-center gap-1",children:[S.jsx(sn,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary-foreground hover:bg-primary-foreground/10",onClick:()=>c(!l),children:l?S.jsx(Nbe,{className:"h-4 w-4"}):S.jsx(jbe,{className:"h-4 w-4"})}),S.jsx(sn,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary-foreground hover:bg-primary-foreground/10",onClick:()=>n(!1),children:S.jsx(oE,{className:"h-4 w-4"})})]})]}),!l&&S.jsxs(S.Fragment,{children:[S.jsxs(br,{ref:u,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-muted/30 scrollbar-thin scrollbar-thumb-primary/10",children:[t.map(d=>S.jsxs("div",{className:xt("flex flex-col max-w-[85%] gap-1",d.role==="user"?"ml-auto items-end":"mr-auto items-start"),children:[S.jsx("div",{className:xt("p-3 rounded-2xl text-sm shadow-sm",d.role==="user"?"bg-primary text-primary-foreground rounded-tr-none":"bg-card text-card-foreground border rounded-tl-none"),children:d.content}),S.jsx("span",{className:"text-[10px] text-muted-foreground px-1",children:new Date(d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},d.id)),r&&S.jsxs("div",{className:"flex items-center gap-2 bg-card border p-3 rounded-2xl rounded-tl-none w-fit",children:[S.jsx(I1,{className:"h-4 w-4 animate-spin text-primary"}),S.jsx("span",{className:"text-xs text-muted-foreground italic",children:"PennyWise is thinking..."})]})]}),S.jsxs(xk,{className:"p-3 border-t bg-card mt-auto flex-col gap-2",children:[S.jsxs("form",{onSubmit:f,className:"flex gap-2 w-full",children:[S.jsx($a,{placeholder:"Ask me anything...",value:s,onChange:d=>o(d.target.value),className:"flex-1",disabled:r}),S.jsx(sn,{type:"submit",size:"icon",disabled:!s.trim()||r,children:S.jsx(Ube,{className:"h-4 w-4"})})]}),S.jsxs("div",{className:"flex justify-between w-full px-1",children:[S.jsxs(sn,{variant:"ghost",size:"sm",className:"h-6 text-[10px] text-muted-foreground hover:text-destructive flex items-center gap-1",onClick:a,children:[S.jsx(b$,{className:"h-3 w-3"}),"Clear History"]}),S.jsx("span",{className:"text-[9px] text-muted-foreground/50 self-center",children:"Powered by LangGraph"})]})]})]})]})})}),S.jsx(Ez.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:S.jsx(sn,{onClick:()=>n(!e),className:xt("h-14 w-14 rounded-full shadow-lg flex items-center justify-center p-0 transition-all",e?"bg-destructive hover:bg-destructive/90 rounded-2xl rotate-90":"bg-primary hover:bg-primary/90"),children:e?S.jsx(oE,{className:"h-6 w-6"}):S.jsx(Rbe,{className:"h-6 w-6"})})})]})};function xFe(){const{user:t,loading:e}=qu(),[n,r]=k.useState(!1);return e?S.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background",children:S.jsx(I1,{className:"h-8 w-8 animate-spin text-primary"})}):t?S.jsx(AMe,{children:S.jsx(mEe,{children:S.jsxs("div",{className:"min-h-screen bg-background flex",children:[n&&S.jsx("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm md:hidden",onClick:()=>r(!1),children:S.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-64 border-r bg-background shadow-lg",onClick:i=>i.stopPropagation(),children:S.jsx(OB,{onNavigate:()=>r(!1),className:"border-none"})})}),S.jsx("div",{className:"hidden md:flex w-64 flex-col fixed inset-y-0 z-50",children:S.jsx(OB,{})}),S.jsxs("div",{className:"flex-1 md:pl-64 flex flex-col",children:[S.jsx(pEe,{onMenuClick:()=>r(!0)}),S.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-y-auto w-full",children:S.jsx("div",{className:"max-w-7xl mx-auto space-y-6",children:S.jsx(NZ,{})})})]}),S.jsx(_Fe,{})]})})}):S.jsx(d$,{to:"/auth/login",replace:!0})}function SFe(){const{user:t,loading:e}=qu();return e?S.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background",children:S.jsx(I1,{className:"h-8 w-8 animate-spin text-primary"})}):t?S.jsx(d$,{to:"/",replace:!0}):S.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-900 relative overflow-hidden",children:[S.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[S.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),S.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),S.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),S.jsxs("div",{className:"relative z-10 w-full max-w-md p-4",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-tight",children:"SpendMind"}),S.jsx("p",{className:"text-gray-300",children:"AI-powered financial insights"})]}),S.jsx(NZ,{})]})]})}var EFe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],AFe=EFe.reduce((t,e)=>{const n=j5(`Primitive.${e}`),r=k.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),kFe="Label",gse=k.forwardRef((t,e)=>S.jsx(AFe.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));gse.displayName=kFe;var yse=gse;const OFe=_$("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xi=k.forwardRef(({className:t,...e},n)=>S.jsx(yse,{ref:n,className:xt(OFe(),t),...e}));Xi.displayName=yse.displayName;const TFe=_$("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),VL=k.forwardRef(({className:t,variant:e,...n},r)=>S.jsx("div",{ref:r,role:"alert",className:xt(TFe({variant:e}),t),...n}));VL.displayName="Alert";const WL=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:xt("text-sm [&_p]:leading-relaxed",t),...e}));WL.displayName="AlertDescription";const CFe=k.forwardRef(({className:t,...e},n)=>S.jsx("h5",{ref:n,className:xt("mb-1 font-medium leading-none tracking-tight",t),...e}));CFe.displayName="AlertTitle";function PFe(){const{signIn:t}=qu(),e=C1(),[n,r]=k.useState(""),[i,a]=k.useState(""),[s,o]=k.useState(!1),[l,c]=k.useState(!1),[u,f]=k.useState(null),d=async h=>{h.preventDefault(),c(!0),f(null);try{const{error:p}=await t({email:n,password:i});if(p)throw p;e("/")}catch(p){f(p.message)}finally{c(!1)}};return S.jsxs(lr,{className:"w-full bg-white/10 backdrop-blur-md border-white/20 shadow-xl",children:[S.jsxs(ts,{children:[S.jsx($s,{className:"text-white text-2xl",children:"Welcome Back"}),S.jsx(Lu,{className:"text-gray-300",children:"Enter your email below to login into your account"})]}),S.jsx(br,{children:S.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u&&S.jsx(VL,{variant:"destructive",children:S.jsx(WL,{children:u})}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"email",className:"text-gray-200",children:"Email"}),S.jsx($a,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:n,onChange:h=>r(h.target.value),className:"bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"password",className:"text-gray-200",children:"Password"}),S.jsxs("div",{className:"relative",children:[S.jsx($a,{id:"password",type:s?"text":"password",required:!0,value:i,onChange:h=>a(h.target.value),className:"pr-10 bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"}),S.jsxs(sn,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>o(!s),children:[s?S.jsx(nX,{className:"h-4 w-4"}):S.jsx(rX,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:s?"Hide password":"Show password"})]})]})]}),S.jsxs(sn,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white border-none",disabled:l,children:[l&&S.jsx(I1,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]})}),S.jsx(xk,{children:S.jsxs("div",{className:"text-sm text-gray-300 text-center w-full",children:["Don't have an account?"," ",S.jsx(C5,{to:"/auth/signup",className:"text-purple-300 hover:text-purple-200 hover:underline transition-colors",children:"Sign up"})]})})]})}function NFe(){const{signUp:t}=qu(),e=C1(),[n,r]=k.useState(""),[i,a]=k.useState(""),[s,o]=k.useState(!1),[l,c]=k.useState(""),[u,f]=k.useState(!1),[d,h]=k.useState(null),p=async m=>{m.preventDefault(),f(!0),h(null);try{const{error:y}=await t({email:n,password:i,options:{data:{full_name:l}}});if(y)throw y;e("/")}catch(y){h(y.message)}finally{f(!1)}};return S.jsxs(lr,{className:"w-full bg-white/10 backdrop-blur-md border-white/20 shadow-xl",children:[S.jsxs(ts,{children:[S.jsx($s,{className:"text-white text-2xl",children:"Create Account"}),S.jsx(Lu,{className:"text-gray-300",children:"Create an account to track your finances"})]}),S.jsx(br,{children:S.jsxs("form",{onSubmit:p,className:"space-y-4",children:[d&&S.jsx(VL,{variant:"destructive",children:S.jsx(WL,{children:d})}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"fullname",className:"text-gray-200",children:"Full Name"}),S.jsx($a,{id:"fullname",placeholder:"John Doe",required:!0,value:l,onChange:m=>c(m.target.value),className:"bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"email",className:"text-gray-200",children:"Email"}),S.jsx($a,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:n,onChange:m=>r(m.target.value),className:"bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"password",className:"text-gray-200",children:"Password"}),S.jsxs("div",{className:"relative",children:[S.jsx($a,{id:"password",type:s?"text":"password",required:!0,value:i,onChange:m=>a(m.target.value),className:"pr-10 bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"}),S.jsxs(sn,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>o(!s),children:[s?S.jsx(nX,{className:"h-4 w-4"}):S.jsx(rX,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:s?"Hide password":"Show password"})]})]})]}),S.jsxs(sn,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white border-none",disabled:u,children:[u&&S.jsx(I1,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign Up"]})]})}),S.jsx(xk,{children:S.jsxs("div",{className:"text-sm text-gray-300 text-center w-full",children:["Already have an account?"," ",S.jsx(C5,{to:"/auth/login",className:"text-purple-300 hover:text-purple-200 hover:underline transition-colors",children:"Sign In"})]})})]})}var IFe=Array.isArray,as=IFe,RFe=typeof rx=="object"&&rx&&rx.Object===Object&&rx,vse=RFe,jFe=vse,$Fe=typeof self=="object"&&self&&self.Object===Object&&self,MFe=jFe||$Fe||Function("return this")(),Tc=MFe,LFe=Tc,DFe=LFe.Symbol,l_=DFe,Az=l_,wse=Object.prototype,FFe=wse.hasOwnProperty,BFe=wse.toString,S0=Az?Az.toStringTag:void 0;function UFe(t){var e=FFe.call(t,S0),n=t[S0];try{t[S0]=void 0;var r=!0}catch{}var i=BFe.call(t);return r&&(e?t[S0]=n:delete t[S0]),i}var zFe=UFe,VFe=Object.prototype,WFe=VFe.toString;function HFe(t){return WFe.call(t)}var qFe=HFe,kz=l_,GFe=zFe,KFe=qFe,YFe="[object Null]",ZFe="[object Undefined]",Oz=kz?kz.toStringTag:void 0;function XFe(t){return t==null?t===void 0?ZFe:YFe:Oz&&Oz in Object(t)?GFe(t):KFe(t)}var Xu=XFe;function JFe(t){return t!=null&&typeof t=="object"}var Ju=JFe,QFe=Xu,eBe=Ju,tBe="[object Symbol]";function nBe(t){return typeof t=="symbol"||eBe(t)&&QFe(t)==tBe}var yv=nBe,rBe=as,iBe=yv,aBe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sBe=/^\w*$/;function oBe(t,e){if(rBe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||iBe(t)?!0:sBe.test(t)||!aBe.test(t)||e!=null&&t in Object(e)}var HL=oBe;function lBe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vd=lBe;const vv=wn(Vd);var cBe=Xu,uBe=Vd,fBe="[object AsyncFunction]",dBe="[object Function]",hBe="[object GeneratorFunction]",pBe="[object Proxy]";function mBe(t){if(!uBe(t))return!1;var e=cBe(t);return e==dBe||e==hBe||e==fBe||e==pBe}var qL=mBe;const Dt=wn(qL);var gBe=Tc,yBe=gBe["__core-js_shared__"],vBe=yBe,xP=vBe,Tz=function(){var t=/[^.]+$/.exec(xP&&xP.keys&&xP.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function wBe(t){return!!Tz&&Tz in t}var bBe=wBe,_Be=Function.prototype,xBe=_Be.toString;function SBe(t){if(t!=null){try{return xBe.call(t)}catch{}try{return t+""}catch{}}return""}var bse=SBe,EBe=qL,ABe=bBe,kBe=Vd,OBe=bse,TBe=/[\\^$.*+?()[\]{}|]/g,CBe=/^\[object .+?Constructor\]$/,PBe=Function.prototype,NBe=Object.prototype,IBe=PBe.toString,RBe=NBe.hasOwnProperty,jBe=RegExp("^"+IBe.call(RBe).replace(TBe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $Be(t){if(!kBe(t)||ABe(t))return!1;var e=EBe(t)?jBe:CBe;return e.test(OBe(t))}var MBe=$Be;function LBe(t,e){return t==null?void 0:t[e]}var DBe=LBe,FBe=MBe,BBe=DBe;function UBe(t,e){var n=BBe(t,e);return FBe(n)?n:void 0}var Hp=UBe,zBe=Hp,VBe=zBe(Object,"create"),Ok=VBe,Cz=Ok;function WBe(){this.__data__=Cz?Cz(null):{},this.size=0}var HBe=WBe;function qBe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var GBe=qBe,KBe=Ok,YBe="__lodash_hash_undefined__",ZBe=Object.prototype,XBe=ZBe.hasOwnProperty;function JBe(t){var e=this.__data__;if(KBe){var n=e[t];return n===YBe?void 0:n}return XBe.call(e,t)?e[t]:void 0}var QBe=JBe,e7e=Ok,t7e=Object.prototype,n7e=t7e.hasOwnProperty;function r7e(t){var e=this.__data__;return e7e?e[t]!==void 0:n7e.call(e,t)}var i7e=r7e,a7e=Ok,s7e="__lodash_hash_undefined__";function o7e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=a7e&&e===void 0?s7e:e,this}var l7e=o7e,c7e=HBe,u7e=GBe,f7e=QBe,d7e=i7e,h7e=l7e;function wv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}wv.prototype.clear=c7e;wv.prototype.delete=u7e;wv.prototype.get=f7e;wv.prototype.has=d7e;wv.prototype.set=h7e;var p7e=wv;function m7e(){this.__data__=[],this.size=0}var g7e=m7e;function y7e(t,e){return t===e||t!==t&&e!==e}var GL=y7e,v7e=GL;function w7e(t,e){for(var n=t.length;n--;)if(v7e(t[n][0],e))return n;return-1}var Tk=w7e,b7e=Tk,_7e=Array.prototype,x7e=_7e.splice;function S7e(t){var e=this.__data__,n=b7e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():x7e.call(e,n,1),--this.size,!0}var E7e=S7e,A7e=Tk;function k7e(t){var e=this.__data__,n=A7e(e,t);return n<0?void 0:e[n][1]}var O7e=k7e,T7e=Tk;function C7e(t){return T7e(this.__data__,t)>-1}var P7e=C7e,N7e=Tk;function I7e(t,e){var n=this.__data__,r=N7e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var R7e=I7e,j7e=g7e,$7e=E7e,M7e=O7e,L7e=P7e,D7e=R7e;function bv(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bv.prototype.clear=j7e;bv.prototype.delete=$7e;bv.prototype.get=M7e;bv.prototype.has=L7e;bv.prototype.set=D7e;var Ck=bv,F7e=Hp,B7e=Tc,U7e=F7e(B7e,"Map"),KL=U7e,Pz=p7e,z7e=Ck,V7e=KL;function W7e(){this.size=0,this.__data__={hash:new Pz,map:new(V7e||z7e),string:new Pz}}var H7e=W7e;function q7e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var G7e=q7e,K7e=G7e;function Y7e(t,e){var n=t.__data__;return K7e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Pk=Y7e,Z7e=Pk;function X7e(t){var e=Z7e(this,t).delete(t);return this.size-=e?1:0,e}var J7e=X7e,Q7e=Pk;function eUe(t){return Q7e(this,t).get(t)}var tUe=eUe,nUe=Pk;function rUe(t){return nUe(this,t).has(t)}var iUe=rUe,aUe=Pk;function sUe(t,e){var n=aUe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var oUe=sUe,lUe=H7e,cUe=J7e,uUe=tUe,fUe=iUe,dUe=oUe;function _v(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_v.prototype.clear=lUe;_v.prototype.delete=cUe;_v.prototype.get=uUe;_v.prototype.has=fUe;_v.prototype.set=dUe;var YL=_v,_se=YL,hUe="Expected a function";function ZL(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(hUe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(ZL.Cache||_se),n}ZL.Cache=_se;var xse=ZL;const pUe=wn(xse);var mUe=xse,gUe=500;function yUe(t){var e=mUe(t,function(r){return n.size===gUe&&n.clear(),r}),n=e.cache;return e}var vUe=yUe,wUe=vUe,bUe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_Ue=/\\(\\)?/g,xUe=wUe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bUe,function(n,r,i,a){e.push(i?a.replace(_Ue,"$1"):r||n)}),e}),SUe=xUe;function EUe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var XL=EUe,Nz=l_,AUe=XL,kUe=as,OUe=yv,Iz=Nz?Nz.prototype:void 0,Rz=Iz?Iz.toString:void 0;function Sse(t){if(typeof t=="string")return t;if(kUe(t))return AUe(t,Sse)+"";if(OUe(t))return Rz?Rz.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var TUe=Sse,CUe=TUe;function PUe(t){return t==null?"":CUe(t)}var Ese=PUe,NUe=as,IUe=HL,RUe=SUe,jUe=Ese;function $Ue(t,e){return NUe(t)?t:IUe(t,e)?[t]:RUe(jUe(t))}var Ase=$Ue,MUe=yv;function LUe(t){if(typeof t=="string"||MUe(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Nk=LUe,DUe=Ase,FUe=Nk;function BUe(t,e){e=DUe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[FUe(e[n++])];return n&&n==r?t:void 0}var JL=BUe,UUe=JL;function zUe(t,e,n){var r=t==null?void 0:UUe(t,e);return r===void 0?n:r}var kse=zUe;const Ms=wn(kse);function VUe(t){return t==null}var WUe=VUe;const an=wn(WUe);var HUe=Xu,qUe=as,GUe=Ju,KUe="[object String]";function YUe(t){return typeof t=="string"||!qUe(t)&&GUe(t)&&HUe(t)==KUe}var ZUe=YUe;const Tp=wn(ZUe);var Ose={exports:{}},$n={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QL=Symbol.for("react.element"),eD=Symbol.for("react.portal"),Ik=Symbol.for("react.fragment"),Rk=Symbol.for("react.strict_mode"),jk=Symbol.for("react.profiler"),$k=Symbol.for("react.provider"),Mk=Symbol.for("react.context"),XUe=Symbol.for("react.server_context"),Lk=Symbol.for("react.forward_ref"),Dk=Symbol.for("react.suspense"),Fk=Symbol.for("react.suspense_list"),Bk=Symbol.for("react.memo"),Uk=Symbol.for("react.lazy"),JUe=Symbol.for("react.offscreen"),Tse;Tse=Symbol.for("react.module.reference");function No(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case QL:switch(t=t.type,t){case Ik:case jk:case Rk:case Dk:case Fk:return t;default:switch(t=t&&t.$$typeof,t){case XUe:case Mk:case Lk:case Uk:case Bk:case $k:return t;default:return e}}case eD:return e}}}$n.ContextConsumer=Mk;$n.ContextProvider=$k;$n.Element=QL;$n.ForwardRef=Lk;$n.Fragment=Ik;$n.Lazy=Uk;$n.Memo=Bk;$n.Portal=eD;$n.Profiler=jk;$n.StrictMode=Rk;$n.Suspense=Dk;$n.SuspenseList=Fk;$n.isAsyncMode=function(){return!1};$n.isConcurrentMode=function(){return!1};$n.isContextConsumer=function(t){return No(t)===Mk};$n.isContextProvider=function(t){return No(t)===$k};$n.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===QL};$n.isForwardRef=function(t){return No(t)===Lk};$n.isFragment=function(t){return No(t)===Ik};$n.isLazy=function(t){return No(t)===Uk};$n.isMemo=function(t){return No(t)===Bk};$n.isPortal=function(t){return No(t)===eD};$n.isProfiler=function(t){return No(t)===jk};$n.isStrictMode=function(t){return No(t)===Rk};$n.isSuspense=function(t){return No(t)===Dk};$n.isSuspenseList=function(t){return No(t)===Fk};$n.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ik||t===jk||t===Rk||t===Dk||t===Fk||t===JUe||typeof t=="object"&&t!==null&&(t.$$typeof===Uk||t.$$typeof===Bk||t.$$typeof===$k||t.$$typeof===Mk||t.$$typeof===Lk||t.$$typeof===Tse||t.getModuleId!==void 0)};$n.typeOf=No;Ose.exports=$n;var QUe=Ose.exports,e9e=Xu,t9e=Ju,n9e="[object Number]";function r9e(t){return typeof t=="number"||t9e(t)&&e9e(t)==n9e}var Cse=r9e;const i9e=wn(Cse);var a9e=Cse;function s9e(t){return a9e(t)&&t!=+t}var o9e=s9e;const c_=wn(o9e);var Pa=function(e){return e===0?0:e>0?1:-1},qh=function(e){return Tp(e)&&e.indexOf("%")===e.length-1},We=function(e){return i9e(e)&&!c_(e)},l9e=function(e){return an(e)},xi=function(e){return We(e)||Tp(e)},c9e=0,u_=function(e){var n=++c9e;return"".concat(e||"").concat(n)},Na=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&!Tp(e))return r;var a;if(qh(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return c_(a)&&(a=r),i&&a>n&&(a=n),a},Vf=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},u9e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Lf=function(e,n){return We(e)&&We(n)?function(r){return e+r*(n-e)}:function(){return n}};function mj(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ms(r,e))===n})}var f9e=function(e,n){return We(e)&&We(n)?e-n:Tp(e)&&Tp(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function zg(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function gj(t){"@babel/helpers - typeof";return gj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gj(t)}var d9e=["viewBox","children"],h9e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],jz=["points","pathLength"],SP={svg:d9e,polygon:jz,polyline:jz},tD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],eA=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!vv(r))return null;var i={};return Object.keys(r).forEach(function(a){tD.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},p9e=function(e,n,r){return function(i){return e(n,r,i),null}},Cp=function(e,n,r){if(!vv(e)||gj(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];tD.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=p9e(s,n,r))}),i},m9e=["children"],g9e=["children"];function $z(t,e){if(t==null)return{};var n=y9e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function y9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Mz={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Lz=null,EP=null,nD=function t(e){if(e===Lz&&Array.isArray(EP))return EP;var n=[];return k.Children.forEach(e,function(r){an(r)||(QUe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),EP=n,Lz=e,n};function So(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return xu(i)}):r=[xu(e)],nD(t).forEach(function(i){var a=Ms(i,"type.displayName")||Ms(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function xs(t,e){var n=So(t,e);return n&&n[0]}var Dz=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!We(r)||r<=0||!We(i)||i<=0)},v9e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],w9e=function(e){return e&&e.type&&Tp(e.type)&&v9e.indexOf(e.type)>=0},b9e=function(e,n,r,i){var a,s=(a=SP==null?void 0:SP[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Dt(e)&&(i&&s.includes(n)||h9e.includes(n))||r&&tD.includes(n)},jt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(k.isValidElement(e)&&(i=e.props),!vv(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;b9e((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},yj=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Fz(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!Fz(a,s))return!1}return!0},Fz=function(e,n){if(an(e)&&an(n))return!0;if(!an(e)&&!an(n)){var r=e.props||{},i=r.children,a=$z(r,m9e),s=n.props||{},o=s.children,l=$z(s,g9e);return i&&o?zg(a,l)&&yj(i,o):!i&&!o?zg(a,l):!1}return!1},Bz=function(e,n){var r=[],i={};return nD(e).forEach(function(a,s){if(w9e(a))r.push(a);else if(a){var o=xu(a.type),l=n[o]||{},c=l.handler,u=l.once;if(c&&(!u||!i[o])){var f=c(a,o,s);r.push(f),i[o]=!0}}}),r},_9e=function(e){var n=e&&e.type;return n&&Mz[n]?Mz[n]:null},x9e=function(e,n){return nD(n).indexOf(e)},S9e=["children","width","height","viewBox","className","style","title","desc"];function vj(){return vj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vj.apply(this,arguments)}function E9e(t,e){if(t==null)return{};var n=A9e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wj(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,c=E9e(t,S9e),u=i||{width:n,height:r,x:0,y:0},f=en("recharts-surface",a);return se.createElement("svg",vj({},jt(c,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),se.createElement("title",null,o),se.createElement("desc",null,l),e)}var k9e=["children","className"];function bj(){return bj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bj.apply(this,arguments)}function O9e(t,e){if(t==null)return{};var n=T9e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Rn=se.forwardRef(function(t,e){var n=t.children,r=t.className,i=O9e(t,k9e),a=en("recharts-layer",r);return se.createElement("g",bj({className:a},jt(i,!0),{ref:e}),n)}),wl=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function C9e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var P9e=C9e,N9e=P9e;function I9e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:N9e(t,e,n)}var R9e=I9e,j9e="\\ud800-\\udfff",$9e="\\u0300-\\u036f",M9e="\\ufe20-\\ufe2f",L9e="\\u20d0-\\u20ff",D9e=$9e+M9e+L9e,F9e="\\ufe0e\\ufe0f",B9e="\\u200d",U9e=RegExp("["+B9e+j9e+D9e+F9e+"]");function z9e(t){return U9e.test(t)}var Pse=z9e;function V9e(t){return t.split("")}var W9e=V9e,Nse="\\ud800-\\udfff",H9e="\\u0300-\\u036f",q9e="\\ufe20-\\ufe2f",G9e="\\u20d0-\\u20ff",K9e=H9e+q9e+G9e,Y9e="\\ufe0e\\ufe0f",Z9e="["+Nse+"]",_j="["+K9e+"]",xj="\\ud83c[\\udffb-\\udfff]",X9e="(?:"+_j+"|"+xj+")",Ise="[^"+Nse+"]",Rse="(?:\\ud83c[\\udde6-\\uddff]){2}",jse="[\\ud800-\\udbff][\\udc00-\\udfff]",J9e="\\u200d",$se=X9e+"?",Mse="["+Y9e+"]?",Q9e="(?:"+J9e+"(?:"+[Ise,Rse,jse].join("|")+")"+Mse+$se+")*",eze=Mse+$se+Q9e,tze="(?:"+[Ise+_j+"?",_j,Rse,jse,Z9e].join("|")+")",nze=RegExp(xj+"(?="+xj+")|"+tze+eze,"g");function rze(t){return t.match(nze)||[]}var ize=rze,aze=W9e,sze=Pse,oze=ize;function lze(t){return sze(t)?oze(t):aze(t)}var cze=lze,uze=R9e,fze=Pse,dze=cze,hze=Ese;function pze(t){return function(e){e=hze(e);var n=fze(e)?dze(e):void 0,r=n?n[0]:e.charAt(0),i=n?uze(n,1).join(""):e.slice(1);return r[t]()+i}}var mze=pze,gze=mze,yze=gze("toUpperCase"),vze=yze;const zk=wn(vze);function Zn(t){return function(){return t}}const Lse=Math.cos,tA=Math.sin,Nl=Math.sqrt,nA=Math.PI,Vk=2*nA,Sj=Math.PI,Ej=2*Sj,Oh=1e-6,wze=Ej-Oh;function Dse(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function bze(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Dse;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class _ze{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Dse:bze(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,c=i-n,u=s-e,f=o-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>Oh)if(!(Math.abs(f*l-c*u)>Oh)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,p=i-o,m=l*l+c*c,y=h*h+p*p,g=Math.sqrt(m),v=Math.sqrt(d),w=a*Math.tan((Sj-Math.acos((m+d-y)/(2*g*v)))/2),_=w/v,x=w/g;Math.abs(_-1)>Oh&&this._append`L${e+_*u},${n+_*f}`,this._append`A${a},${a},0,0,${+(f*h>u*p)},${this._x1=e+x*l},${this._y1=n+x*c}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,f=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Oh||Math.abs(this._y1-u)>Oh)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%Ej+Ej),d>wze?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:d>Oh&&this._append`A${r},${r},0,${+(d>=Sj)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function rD(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new _ze(e)}function iD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Fse(t){this._context=t}Fse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Wk(t){return new Fse(t)}function Bse(t){return t[0]}function Use(t){return t[1]}function zse(t,e){var n=Zn(!0),r=null,i=Wk,a=null,s=rD(o);t=typeof t=="function"?t:t===void 0?Bse:Zn(t),e=typeof e=="function"?e:e===void 0?Use:Zn(e);function o(l){var c,u=(l=iD(l)).length,f,d=!1,h;for(r==null&&(a=i(h=s())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,c,l),+e(f,c,l));if(h)return a=null,h+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Zn(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zn(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Zn(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function c2(t,e,n){var r=null,i=Zn(!0),a=null,s=Wk,o=null,l=rD(c);t=typeof t=="function"?t:t===void 0?Bse:Zn(+t),e=typeof e=="function"?e:Zn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Use:Zn(+n);function c(f){var d,h,p,m=(f=iD(f)).length,y,g=!1,v,w=new Array(m),_=new Array(m);for(a==null&&(o=s(v=l())),d=0;d<=m;++d){if(!(d<m&&i(y=f[d],d,f))===g)if(g=!g)h=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=d-1;p>=h;--p)o.point(w[p],_[p]);o.lineEnd(),o.areaEnd()}g&&(w[d]=+t(y,d,f),_[d]=+e(y,d,f),o.point(r?+r(y,d,f):w[d],n?+n(y,d,f):_[d]))}if(v)return o=null,v+""||null}function u(){return zse().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:Zn(+f),r=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Zn(+f),c):t},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Zn(+f),c):r},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:Zn(+f),n=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Zn(+f),c):e},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Zn(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Zn(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}class Vse{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function xze(t){return new Vse(t,!0)}function Sze(t){return new Vse(t,!1)}const aD={draw(t,e){const n=Nl(e/nA);t.moveTo(n,0),t.arc(0,0,n,0,Vk)}},Eze={draw(t,e){const n=Nl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Wse=Nl(1/3),Aze=Wse*2,kze={draw(t,e){const n=Nl(e/Aze),r=n*Wse;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Oze={draw(t,e){const n=Nl(e),r=-n/2;t.rect(r,r,n,n)}},Tze=.8908130915292852,Hse=tA(nA/10)/tA(7*nA/10),Cze=tA(Vk/10)*Hse,Pze=-Lse(Vk/10)*Hse,Nze={draw(t,e){const n=Nl(e*Tze),r=Cze*n,i=Pze*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=Vk*a/5,o=Lse(s),l=tA(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},AP=Nl(3),Ize={draw(t,e){const n=-Nl(e/(AP*3));t.moveTo(0,n*2),t.lineTo(-AP*n,-n),t.lineTo(AP*n,-n),t.closePath()}},eo=-.5,to=Nl(3)/2,Aj=1/Nl(12),Rze=(Aj/2+1)*3,jze={draw(t,e){const n=Nl(e/Rze),r=n/2,i=n*Aj,a=r,s=n*Aj+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(eo*r-to*i,to*r+eo*i),t.lineTo(eo*a-to*s,to*a+eo*s),t.lineTo(eo*o-to*l,to*o+eo*l),t.lineTo(eo*r+to*i,eo*i-to*r),t.lineTo(eo*a+to*s,eo*s-to*a),t.lineTo(eo*o+to*l,eo*l-to*o),t.closePath()}};function $ze(t,e){let n=null,r=rD(i);t=typeof t=="function"?t:Zn(t||aD),e=typeof e=="function"?e:Zn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Zn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Zn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function rA(){}function iA(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function qse(t){this._context=t}qse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iA(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Mze(t){return new qse(t)}function Gse(t){this._context=t}Gse.prototype={areaStart:rA,areaEnd:rA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:iA(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lze(t){return new Gse(t)}function Kse(t){this._context=t}Kse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:iA(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dze(t){return new Kse(t)}function Yse(t){this._context=t}Yse.prototype={areaStart:rA,areaEnd:rA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Fze(t){return new Yse(t)}function Uz(t){return t<0?-1:1}function zz(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(Uz(a)+Uz(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Vz(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kP(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function aA(t){this._context=t}aA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kP(this,this._t0,Vz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kP(this,Vz(this,n=zz(this,t,e)),n);break;default:kP(this,this._t0,n=zz(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Zse(t){this._context=new Xse(t)}(Zse.prototype=Object.create(aA.prototype)).point=function(t,e){aA.prototype.point.call(this,e,t)};function Xse(t){this._context=t}Xse.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Bze(t){return new aA(t)}function Uze(t){return new Zse(t)}function Jse(t){this._context=t}Jse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Wz(t),i=Wz(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Wz(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function zze(t){return new Jse(t)}function Hk(t,e){this._context=t,this._t=e}Hk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Vze(t){return new Hk(t,.5)}function Wze(t){return new Hk(t,0)}function Hze(t){return new Hk(t,1)}function xy(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function kj(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function qze(t,e){return t[e]}function Gze(t){const e=[];return e.key=t,e}function Kze(){var t=Zn([]),e=kj,n=xy,r=qze;function i(a){var s=Array.from(t.apply(this,arguments),Gze),o,l=s.length,c=-1,u;for(const f of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(f,s[o].key,c,a)]).data=f;for(o=0,u=iD(e(s));o<l;++o)s[u[o]].index=o;return n(s,u),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Zn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Zn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?kj:typeof a=="function"?a:Zn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??xy,i):n},i}function Yze(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}xy(t,e)}}function Zze(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}xy(t,e)}}function Xze(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,c=0;o<s;++o){for(var u=t[e[o]],f=u[r][1]||0,d=u[r-1][1]||0,h=(f-d)/2,p=0;p<o;++p){var m=t[e[p]],y=m[r][1]||0,g=m[r-1][1]||0;h+=y-g}l+=f,c+=h*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,xy(t,e)}}function Db(t){"@babel/helpers - typeof";return Db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Db(t)}var Jze=["type","size","sizeType"];function Oj(){return Oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oj.apply(this,arguments)}function Hz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hz(Object(n),!0).forEach(function(r){Qze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qze(t,e,n){return e=eVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eVe(t){var e=tVe(t,"string");return Db(e)=="symbol"?e:e+""}function tVe(t,e){if(Db(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Db(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nVe(t,e){if(t==null)return{};var n=rVe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Qse={symbolCircle:aD,symbolCross:Eze,symbolDiamond:kze,symbolSquare:Oze,symbolStar:Nze,symbolTriangle:Ize,symbolWye:jze},iVe=Math.PI/180,aVe=function(e){var n="symbol".concat(zk(e));return Qse[n]||aD},sVe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*iVe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},oVe=function(e,n){Qse["symbol".concat(zk(e))]=n},sD=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=nVe(e,Jze),c=qz(qz({},l),{},{type:r,size:a,sizeType:o}),u=function(){var y=aVe(r),g=$ze().type(y).size(sVe(a,o,r));return g()},f=c.className,d=c.cx,h=c.cy,p=jt(c,!0);return d===+d&&h===+h&&a===+a?se.createElement("path",Oj({},p,{className:en("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(h,")"),d:u()})):null};sD.registerSymbol=oVe;function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tj.apply(this,arguments)}function Gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lVe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(n),!0).forEach(function(r){Fb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,toe(r.key),r)}}function fVe(t,e,n){return e&&uVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dVe(t,e,n){return e=sA(e),hVe(t,eoe()?Reflect.construct(e,n||[],sA(t).constructor):e.apply(t,n))}function hVe(t,e){if(e&&(Sy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pVe(t)}function pVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eoe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eoe=function(){return!!t})()}function sA(t){return sA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sA(t)}function mVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cj(t,e)}function Cj(t,e){return Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cj(t,e)}function Fb(t,e,n){return e=toe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function toe(t){var e=gVe(t,"string");return Sy(e)=="symbol"?e:e+""}function gVe(t,e){if(Sy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var no=32,oD=function(t){function e(){return cVe(this,e),dVe(this,e,arguments)}return mVe(e,t),fVe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=no/2,s=no/6,o=no/3,l=r.inactive?i:r.color;if(r.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:no,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(no,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return se.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(no/8,"h").concat(no,"v").concat(no*3/4,"h").concat(-no,"z"),className:"recharts-legend-icon"});if(se.isValidElement(r.legendIcon)){var c=lVe({},r);return delete c.legendIcon,se.cloneElement(r.legendIcon,c)}return se.createElement(sD,{fill:l,cx:a,cy:a,size:no,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:no,height:no},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,p){var m=h.formatter||l,y=en(Fb(Fb({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",h.inactive));if(h.type==="none")return null;var g=Dt(h.value)?null:h.value;wl(!Dt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?c:h.color;return se.createElement("li",Tj({className:y,style:f,key:"legend-item-".concat(p)},Cp(r.props,h,p)),se.createElement(wj,{width:s,height:s,viewBox:u,style:d},r.renderIcon(h)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(g,h,p):g))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(k.PureComponent);Fb(oD,"displayName","Legend");Fb(oD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var yVe=Ck;function vVe(){this.__data__=new yVe,this.size=0}var wVe=vVe;function bVe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var _Ve=bVe;function xVe(t){return this.__data__.get(t)}var SVe=xVe;function EVe(t){return this.__data__.has(t)}var AVe=EVe,kVe=Ck,OVe=KL,TVe=YL,CVe=200;function PVe(t,e){var n=this.__data__;if(n instanceof kVe){var r=n.__data__;if(!OVe||r.length<CVe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new TVe(r)}return n.set(t,e),this.size=n.size,this}var NVe=PVe,IVe=Ck,RVe=wVe,jVe=_Ve,$Ve=SVe,MVe=AVe,LVe=NVe;function xv(t){var e=this.__data__=new IVe(t);this.size=e.size}xv.prototype.clear=RVe;xv.prototype.delete=jVe;xv.prototype.get=$Ve;xv.prototype.has=MVe;xv.prototype.set=LVe;var noe=xv,DVe="__lodash_hash_undefined__";function FVe(t){return this.__data__.set(t,DVe),this}var BVe=FVe;function UVe(t){return this.__data__.has(t)}var zVe=UVe,VVe=YL,WVe=BVe,HVe=zVe;function oA(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new VVe;++e<n;)this.add(t[e])}oA.prototype.add=oA.prototype.push=WVe;oA.prototype.has=HVe;var roe=oA;function qVe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ioe=qVe;function GVe(t,e){return t.has(e)}var aoe=GVe,KVe=roe,YVe=ioe,ZVe=aoe,XVe=1,JVe=2;function QVe(t,e,n,r,i,a){var s=n&XVe,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var f=-1,d=!0,h=n&JVe?new KVe:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var p=t[f],m=e[f];if(r)var y=s?r(m,p,f,e,t,a):r(p,m,f,t,e,a);if(y!==void 0){if(y)continue;d=!1;break}if(h){if(!YVe(e,function(g,v){if(!ZVe(h,v)&&(p===g||i(p,g,n,r,a)))return h.push(v)})){d=!1;break}}else if(!(p===m||i(p,m,n,r,a))){d=!1;break}}return a.delete(t),a.delete(e),d}var soe=QVe,eWe=Tc,tWe=eWe.Uint8Array,nWe=tWe;function rWe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var iWe=rWe;function aWe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var lD=aWe,Kz=l_,Yz=nWe,sWe=GL,oWe=soe,lWe=iWe,cWe=lD,uWe=1,fWe=2,dWe="[object Boolean]",hWe="[object Date]",pWe="[object Error]",mWe="[object Map]",gWe="[object Number]",yWe="[object RegExp]",vWe="[object Set]",wWe="[object String]",bWe="[object Symbol]",_We="[object ArrayBuffer]",xWe="[object DataView]",Zz=Kz?Kz.prototype:void 0,OP=Zz?Zz.valueOf:void 0;function SWe(t,e,n,r,i,a,s){switch(n){case xWe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _We:return!(t.byteLength!=e.byteLength||!a(new Yz(t),new Yz(e)));case dWe:case hWe:case gWe:return sWe(+t,+e);case pWe:return t.name==e.name&&t.message==e.message;case yWe:case wWe:return t==e+"";case mWe:var o=lWe;case vWe:var l=r&uWe;if(o||(o=cWe),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=fWe,s.set(t,e);var u=oWe(o(t),o(e),r,i,a,s);return s.delete(t),u;case bWe:if(OP)return OP.call(t)==OP.call(e)}return!1}var EWe=SWe;function AWe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var ooe=AWe,kWe=ooe,OWe=as;function TWe(t,e,n){var r=e(t);return OWe(t)?r:kWe(r,n(t))}var CWe=TWe;function PWe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var NWe=PWe;function IWe(){return[]}var RWe=IWe,jWe=NWe,$We=RWe,MWe=Object.prototype,LWe=MWe.propertyIsEnumerable,Xz=Object.getOwnPropertySymbols,DWe=Xz?function(t){return t==null?[]:(t=Object(t),jWe(Xz(t),function(e){return LWe.call(t,e)}))}:$We,FWe=DWe;function BWe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var UWe=BWe,zWe=Xu,VWe=Ju,WWe="[object Arguments]";function HWe(t){return VWe(t)&&zWe(t)==WWe}var qWe=HWe,Jz=qWe,GWe=Ju,loe=Object.prototype,KWe=loe.hasOwnProperty,YWe=loe.propertyIsEnumerable,ZWe=Jz(function(){return arguments}())?Jz:function(t){return GWe(t)&&KWe.call(t,"callee")&&!YWe.call(t,"callee")},cD=ZWe,lA={exports:{}};function XWe(){return!1}var JWe=XWe;lA.exports;(function(t,e){var n=Tc,r=JWe,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(lA,lA.exports);var coe=lA.exports,QWe=9007199254740991,eHe=/^(?:0|[1-9]\d*)$/;function tHe(t,e){var n=typeof t;return e=e??QWe,!!e&&(n=="number"||n!="symbol"&&eHe.test(t))&&t>-1&&t%1==0&&t<e}var uD=tHe,nHe=9007199254740991;function rHe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nHe}var fD=rHe,iHe=Xu,aHe=fD,sHe=Ju,oHe="[object Arguments]",lHe="[object Array]",cHe="[object Boolean]",uHe="[object Date]",fHe="[object Error]",dHe="[object Function]",hHe="[object Map]",pHe="[object Number]",mHe="[object Object]",gHe="[object RegExp]",yHe="[object Set]",vHe="[object String]",wHe="[object WeakMap]",bHe="[object ArrayBuffer]",_He="[object DataView]",xHe="[object Float32Array]",SHe="[object Float64Array]",EHe="[object Int8Array]",AHe="[object Int16Array]",kHe="[object Int32Array]",OHe="[object Uint8Array]",THe="[object Uint8ClampedArray]",CHe="[object Uint16Array]",PHe="[object Uint32Array]",ir={};ir[xHe]=ir[SHe]=ir[EHe]=ir[AHe]=ir[kHe]=ir[OHe]=ir[THe]=ir[CHe]=ir[PHe]=!0;ir[oHe]=ir[lHe]=ir[bHe]=ir[cHe]=ir[_He]=ir[uHe]=ir[fHe]=ir[dHe]=ir[hHe]=ir[pHe]=ir[mHe]=ir[gHe]=ir[yHe]=ir[vHe]=ir[wHe]=!1;function NHe(t){return sHe(t)&&aHe(t.length)&&!!ir[iHe(t)]}var IHe=NHe;function RHe(t){return function(e){return t(e)}}var uoe=RHe,cA={exports:{}};cA.exports;(function(t,e){var n=vse,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(cA,cA.exports);var jHe=cA.exports,$He=IHe,MHe=uoe,Qz=jHe,eV=Qz&&Qz.isTypedArray,LHe=eV?MHe(eV):$He,foe=LHe,DHe=UWe,FHe=cD,BHe=as,UHe=coe,zHe=uD,VHe=foe,WHe=Object.prototype,HHe=WHe.hasOwnProperty;function qHe(t,e){var n=BHe(t),r=!n&&FHe(t),i=!n&&!r&&UHe(t),a=!n&&!r&&!i&&VHe(t),s=n||r||i||a,o=s?DHe(t.length,String):[],l=o.length;for(var c in t)(e||HHe.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||zHe(c,l)))&&o.push(c);return o}var GHe=qHe,KHe=Object.prototype;function YHe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||KHe;return t===n}var ZHe=YHe;function XHe(t,e){return function(n){return t(e(n))}}var doe=XHe,JHe=doe,QHe=JHe(Object.keys,Object),eqe=QHe,tqe=ZHe,nqe=eqe,rqe=Object.prototype,iqe=rqe.hasOwnProperty;function aqe(t){if(!tqe(t))return nqe(t);var e=[];for(var n in Object(t))iqe.call(t,n)&&n!="constructor"&&e.push(n);return e}var sqe=aqe,oqe=qL,lqe=fD;function cqe(t){return t!=null&&lqe(t.length)&&!oqe(t)}var f_=cqe,uqe=GHe,fqe=sqe,dqe=f_;function hqe(t){return dqe(t)?uqe(t):fqe(t)}var qk=hqe,pqe=CWe,mqe=FWe,gqe=qk;function yqe(t){return pqe(t,gqe,mqe)}var vqe=yqe,tV=vqe,wqe=1,bqe=Object.prototype,_qe=bqe.hasOwnProperty;function xqe(t,e,n,r,i,a){var s=n&wqe,o=tV(t),l=o.length,c=tV(e),u=c.length;if(l!=u&&!s)return!1;for(var f=l;f--;){var d=o[f];if(!(s?d in e:_qe.call(e,d)))return!1}var h=a.get(t),p=a.get(e);if(h&&p)return h==e&&p==t;var m=!0;a.set(t,e),a.set(e,t);for(var y=s;++f<l;){d=o[f];var g=t[d],v=e[d];if(r)var w=s?r(v,g,d,e,t,a):r(g,v,d,t,e,a);if(!(w===void 0?g===v||i(g,v,n,r,a):w)){m=!1;break}y||(y=d=="constructor")}if(m&&!y){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(m=!1)}return a.delete(t),a.delete(e),m}var Sqe=xqe,Eqe=Hp,Aqe=Tc,kqe=Eqe(Aqe,"DataView"),Oqe=kqe,Tqe=Hp,Cqe=Tc,Pqe=Tqe(Cqe,"Promise"),Nqe=Pqe,Iqe=Hp,Rqe=Tc,jqe=Iqe(Rqe,"Set"),hoe=jqe,$qe=Hp,Mqe=Tc,Lqe=$qe(Mqe,"WeakMap"),Dqe=Lqe,Pj=Oqe,Nj=KL,Ij=Nqe,Rj=hoe,jj=Dqe,poe=Xu,Sv=bse,nV="[object Map]",Fqe="[object Object]",rV="[object Promise]",iV="[object Set]",aV="[object WeakMap]",sV="[object DataView]",Bqe=Sv(Pj),Uqe=Sv(Nj),zqe=Sv(Ij),Vqe=Sv(Rj),Wqe=Sv(jj),Th=poe;(Pj&&Th(new Pj(new ArrayBuffer(1)))!=sV||Nj&&Th(new Nj)!=nV||Ij&&Th(Ij.resolve())!=rV||Rj&&Th(new Rj)!=iV||jj&&Th(new jj)!=aV)&&(Th=function(t){var e=poe(t),n=e==Fqe?t.constructor:void 0,r=n?Sv(n):"";if(r)switch(r){case Bqe:return sV;case Uqe:return nV;case zqe:return rV;case Vqe:return iV;case Wqe:return aV}return e});var Hqe=Th,TP=noe,qqe=soe,Gqe=EWe,Kqe=Sqe,oV=Hqe,lV=as,cV=coe,Yqe=foe,Zqe=1,uV="[object Arguments]",fV="[object Array]",u2="[object Object]",Xqe=Object.prototype,dV=Xqe.hasOwnProperty;function Jqe(t,e,n,r,i,a){var s=lV(t),o=lV(e),l=s?fV:oV(t),c=o?fV:oV(e);l=l==uV?u2:l,c=c==uV?u2:c;var u=l==u2,f=c==u2,d=l==c;if(d&&cV(t)){if(!cV(e))return!1;s=!0,u=!1}if(d&&!u)return a||(a=new TP),s||Yqe(t)?qqe(t,e,n,r,i,a):Gqe(t,e,l,n,r,i,a);if(!(n&Zqe)){var h=u&&dV.call(t,"__wrapped__"),p=f&&dV.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,y=p?e.value():e;return a||(a=new TP),i(m,y,n,r,a)}}return d?(a||(a=new TP),Kqe(t,e,n,r,i,a)):!1}var Qqe=Jqe,eGe=Qqe,hV=Ju;function moe(t,e,n,r,i){return t===e?!0:t==null||e==null||!hV(t)&&!hV(e)?t!==t&&e!==e:eGe(t,e,n,r,moe,i)}var dD=moe,tGe=noe,nGe=dD,rGe=1,iGe=2;function aGe(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var l=o[0],c=t[l],u=o[1];if(s&&o[2]){if(c===void 0&&!(l in t))return!1}else{var f=new tGe;if(r)var d=r(c,u,l,t,e,f);if(!(d===void 0?nGe(u,c,rGe|iGe,r,f):d))return!1}}return!0}var sGe=aGe,oGe=Vd;function lGe(t){return t===t&&!oGe(t)}var goe=lGe,cGe=goe,uGe=qk;function fGe(t){for(var e=uGe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,cGe(i)]}return e}var dGe=fGe;function hGe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var yoe=hGe,pGe=sGe,mGe=dGe,gGe=yoe;function yGe(t){var e=mGe(t);return e.length==1&&e[0][2]?gGe(e[0][0],e[0][1]):function(n){return n===t||pGe(n,t,e)}}var vGe=yGe;function wGe(t,e){return t!=null&&e in Object(t)}var bGe=wGe,_Ge=Ase,xGe=cD,SGe=as,EGe=uD,AGe=fD,kGe=Nk;function OGe(t,e,n){e=_Ge(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=kGe(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&AGe(i)&&EGe(s,i)&&(SGe(t)||xGe(t)))}var TGe=OGe,CGe=bGe,PGe=TGe;function NGe(t,e){return t!=null&&PGe(t,e,CGe)}var IGe=NGe,RGe=dD,jGe=kse,$Ge=IGe,MGe=HL,LGe=goe,DGe=yoe,FGe=Nk,BGe=1,UGe=2;function zGe(t,e){return MGe(t)&&LGe(e)?DGe(FGe(t),e):function(n){var r=jGe(n,t);return r===void 0&&r===e?$Ge(n,t):RGe(e,r,BGe|UGe)}}var VGe=zGe;function WGe(t){return t}var Ev=WGe;function HGe(t){return function(e){return e==null?void 0:e[t]}}var qGe=HGe,GGe=JL;function KGe(t){return function(e){return GGe(e,t)}}var YGe=KGe,ZGe=qGe,XGe=YGe,JGe=HL,QGe=Nk;function eKe(t){return JGe(t)?ZGe(QGe(t)):XGe(t)}var tKe=eKe,nKe=vGe,rKe=VGe,iKe=Ev,aKe=as,sKe=tKe;function oKe(t){return typeof t=="function"?t:t==null?iKe:typeof t=="object"?aKe(t)?rKe(t[0],t[1]):nKe(t):sKe(t)}var Cc=oKe;function lKe(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var voe=lKe;function cKe(t){return t!==t}var uKe=cKe;function fKe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var dKe=fKe,hKe=voe,pKe=uKe,mKe=dKe;function gKe(t,e,n){return e===e?mKe(t,e,n):hKe(t,pKe,n)}var yKe=gKe,vKe=yKe;function wKe(t,e){var n=t==null?0:t.length;return!!n&&vKe(t,e,0)>-1}var bKe=wKe;function _Ke(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var xKe=_Ke;function SKe(){}var EKe=SKe,CP=hoe,AKe=EKe,kKe=lD,OKe=1/0,TKe=CP&&1/kKe(new CP([,-0]))[1]==OKe?function(t){return new CP(t)}:AKe,CKe=TKe,PKe=roe,NKe=bKe,IKe=xKe,RKe=aoe,jKe=CKe,$Ke=lD,MKe=200;function LKe(t,e,n){var r=-1,i=NKe,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=IKe;else if(a>=MKe){var c=e?null:jKe(t);if(c)return $Ke(c);s=!1,i=RKe,l=new PKe}else l=e?[]:o;e:for(;++r<a;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,s&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),o.push(u)}else i(l,f,n)||(l!==o&&l.push(f),o.push(u))}return o}var DKe=LKe,FKe=Cc,BKe=DKe;function UKe(t,e){return t&&t.length?BKe(t,FKe(e)):[]}var zKe=UKe;const pV=wn(zKe);function woe(t,e,n){return e===!0?pV(t,n):Dt(e)?pV(t,e):t}function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}var VKe=["ref"];function mV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(n),!0).forEach(function(r){Gk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_oe(r.key),r)}}function HKe(t,e,n){return e&&gV(t.prototype,e),n&&gV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qKe(t,e,n){return e=uA(e),GKe(t,boe()?Reflect.construct(e,n||[],uA(t).constructor):e.apply(t,n))}function GKe(t,e){if(e&&(Ey(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KKe(t)}function KKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function boe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(boe=function(){return!!t})()}function uA(t){return uA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uA(t)}function YKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$j(t,e)}function $j(t,e){return $j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$j(t,e)}function Gk(t,e,n){return e=_oe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _oe(t){var e=ZKe(t,"string");return Ey(e)=="symbol"?e:e+""}function ZKe(t,e){if(Ey(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function XKe(t,e){if(t==null)return{};var n=JKe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function QKe(t){return t.value}function eYe(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var n=XKe(e,VKe);return se.createElement(oD,n)}var yV=1,Vg=function(t){function e(){var n;WKe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=qKe(this,e,[].concat(i)),Gk(n,"lastBoundingBox",{width:-1,height:-1}),n}return YKe(e,t),HKe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>yV||Math.abs(i.height-this.lastBoundingBox.height)>yV)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Zc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,d;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();f={left:((c||0)-h.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var p=this.getBBoxSnapshot();d={top:((u||0)-p.height)/2}}else d=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Zc(Zc({},f),d)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=Zc(Zc({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return se.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){r.wrapperNode=h}},eYe(a,Zc(Zc({},this.props),{},{payload:woe(u,c,QKe)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Zc(Zc({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&We(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(k.PureComponent);Gk(Vg,"displayName","Legend");Gk(Vg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var vV=l_,tYe=cD,nYe=as,wV=vV?vV.isConcatSpreadable:void 0;function rYe(t){return nYe(t)||tYe(t)||!!(wV&&t&&t[wV])}var iYe=rYe,aYe=ooe,sYe=iYe;function xoe(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=sYe),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?xoe(o,e-1,n,r,i):aYe(i,o):r||(i[i.length]=o)}return i}var Soe=xoe;function oYe(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(n(a[l],l,a)===!1)break}return e}}var lYe=oYe,cYe=lYe,uYe=cYe(),fYe=uYe,dYe=fYe,hYe=qk;function pYe(t,e){return t&&dYe(t,e,hYe)}var Eoe=pYe,mYe=f_;function gYe(t,e){return function(n,r){if(n==null)return n;if(!mYe(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var yYe=gYe,vYe=Eoe,wYe=yYe,bYe=wYe(vYe),hD=bYe,_Ye=hD,xYe=f_;function SYe(t,e){var n=-1,r=xYe(t)?Array(t.length):[];return _Ye(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var Aoe=SYe;function EYe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var AYe=EYe,bV=yv;function kYe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=bV(t),s=e!==void 0,o=e===null,l=e===e,c=bV(e);if(!o&&!c&&!a&&t>e||a&&s&&l&&!o&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0}var OYe=kYe,TYe=OYe;function CYe(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=TYe(i[r],a[r]);if(l){if(r>=o)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var PYe=CYe,PP=XL,NYe=JL,IYe=Cc,RYe=Aoe,jYe=AYe,$Ye=uoe,MYe=PYe,LYe=Ev,DYe=as;function FYe(t,e,n){e.length?e=PP(e,function(a){return DYe(a)?function(s){return NYe(s,a.length===1?a[0]:a)}:a}):e=[LYe];var r=-1;e=PP(e,$Ye(IYe));var i=RYe(t,function(a,s,o){var l=PP(e,function(c){return c(a)});return{criteria:l,index:++r,value:a}});return jYe(i,function(a,s){return MYe(a,s,n)})}var BYe=FYe;function UYe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var zYe=UYe,VYe=zYe,_V=Math.max;function WYe(t,e,n){return e=_V(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=_V(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),VYe(t,this,o)}}var HYe=WYe;function qYe(t){return function(){return t}}var GYe=qYe,KYe=Hp,YYe=function(){try{var t=KYe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),koe=YYe,ZYe=GYe,xV=koe,XYe=Ev,JYe=xV?function(t,e){return xV(t,"toString",{configurable:!0,enumerable:!1,value:ZYe(e),writable:!0})}:XYe,QYe=JYe,eZe=800,tZe=16,nZe=Date.now;function rZe(t){var e=0,n=0;return function(){var r=nZe(),i=tZe-(r-n);if(n=r,i>0){if(++e>=eZe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var iZe=rZe,aZe=QYe,sZe=iZe,oZe=sZe(aZe),lZe=oZe,cZe=Ev,uZe=HYe,fZe=lZe;function dZe(t,e){return fZe(uZe(t,e,cZe),t+"")}var hZe=dZe,pZe=GL,mZe=f_,gZe=uD,yZe=Vd;function vZe(t,e,n){if(!yZe(n))return!1;var r=typeof e;return(r=="number"?mZe(n)&&gZe(e,n.length):r=="string"&&e in n)?pZe(n[e],t):!1}var Kk=vZe,wZe=Soe,bZe=BYe,_Ze=hZe,SV=Kk,xZe=_Ze(function(t,e){if(t==null)return[];var n=e.length;return n>1&&SV(t,e[0],e[1])?e=[]:n>2&&SV(e[0],e[1],e[2])&&(e=[e[0]]),bZe(t,wZe(e,1),[])}),SZe=xZe;const pD=wn(SZe);function Bb(t){"@babel/helpers - typeof";return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bb(t)}function Mj(){return Mj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mj.apply(this,arguments)}function EZe(t,e){return TZe(t)||OZe(t,e)||kZe(t,e)||AZe()}function AZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kZe(t,e){if(t){if(typeof t=="string")return EV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EV(t,e)}}function EV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function TZe(t){if(Array.isArray(t))return t}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){CZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CZe(t,e,n){return e=PZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PZe(t){var e=NZe(t,"string");return Bb(e)=="symbol"?e:e+""}function NZe(t,e){if(Bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IZe(t){return Array.isArray(t)&&xi(t[0])&&xi(t[1])?t.join(" ~ "):t}var RZe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,f=e.formatter,d=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,y=e.labelFormatter,g=e.accessibilityLayer,v=g===void 0?!1:g,w=function(){if(u&&u.length){var j={padding:0,margin:0},U=(d?pD(u,d):u).map(function(B,V){if(B.type==="none")return null;var Y=NP({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},o),X=B.formatter||f||IZe,z=B.value,G=B.name,ae=z,ue=G;if(X&&ae!=null&&ue!=null){var L=X(z,G,B,V,u);if(Array.isArray(L)){var K=EZe(L,2);ae=K[0],ue=K[1]}else ae=L}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:Y},xi(ue)?se.createElement("span",{className:"recharts-tooltip-item-name"},ue):null,xi(ue)?se.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,se.createElement("span",{className:"recharts-tooltip-item-value"},ae),se.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:j},U)}return null},_=NP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),x=NP({margin:0},c),E=!an(m),T=E?m:"",O=en("recharts-default-tooltip",h),R=en("recharts-tooltip-label",p);E&&y&&u!==void 0&&u!==null&&(T=y(m,u));var M=v?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",Mj({className:O,style:_},M),se.createElement("p",{className:R,style:x},se.isValidElement(T)?T:"".concat(T)),w())};function Ub(t){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(t)}function f2(t,e,n){return e=jZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jZe(t){var e=$Ze(t,"string");return Ub(e)=="symbol"?e:e+""}function $Ze(t,e){if(Ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ub(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E0="recharts-tooltip-wrapper",MZe={visibility:"hidden"};function LZe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return en(E0,f2(f2(f2(f2({},"".concat(E0,"-right"),We(n)&&e&&We(e.x)&&n>=e.x),"".concat(E0,"-left"),We(n)&&e&&We(e.x)&&n<e.x),"".concat(E0,"-bottom"),We(r)&&e&&We(e.y)&&r>=e.y),"".concat(E0,"-top"),We(r)&&e&&We(e.y)&&r<e.y))}function kV(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(a&&We(a[r]))return a[r];var u=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?u:f;if(s[r]){var d=u,h=l[r];return d<h?Math.max(f,l[r]):Math.max(u,l[r])}var p=f+o,m=l[r]+c;return p>m?Math.max(u,l[r]):Math.max(f,l[r])}function DZe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function FZe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,u,f;return s.height>0&&s.width>0&&n?(u=kV({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=kV({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=DZe({translateX:u,translateY:f,useTranslate3d:o})):c=MZe,{cssProperties:c,cssClasses:LZe({translateX:u,translateY:f,coordinate:n})}}function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){Dj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UZe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Toe(r.key),r)}}function zZe(t,e,n){return e&&UZe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VZe(t,e,n){return e=fA(e),WZe(t,Ooe()?Reflect.construct(e,n||[],fA(t).constructor):e.apply(t,n))}function WZe(t,e){if(e&&(Ay(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HZe(t)}function HZe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ooe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ooe=function(){return!!t})()}function fA(t){return fA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fA(t)}function qZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lj(t,e)}function Lj(t,e){return Lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Lj(t,e)}function Dj(t,e,n){return e=Toe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Toe(t){var e=GZe(t,"string");return Ay(e)=="symbol"?e:e+""}function GZe(t,e){if(Ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CV=1,KZe=function(t){function e(){var n;BZe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=VZe(this,e,[].concat(i)),Dj(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Dj(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return qZe(e,t),zZe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>CV||Math.abs(r.height-this.state.lastBoundingBox.height)>CV)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,d=i.isAnimationActive,h=i.offset,p=i.position,m=i.reverseDirection,y=i.useTranslate3d,g=i.viewBox,v=i.wrapperStyle,w=FZe({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:g}),_=w.cssClasses,x=w.cssProperties,E=TV(TV({transition:d&&a?"transform ".concat(o,"ms ").concat(l):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return se.createElement("div",{tabIndex:-1,className:_,style:E,ref:function(O){r.wrapperNode=O}},c)}}])}(k.PureComponent),YZe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Av={isSsr:YZe()};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){mD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XZe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Poe(r.key),r)}}function JZe(t,e,n){return e&&XZe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QZe(t,e,n){return e=dA(e),eXe(t,Coe()?Reflect.construct(e,n||[],dA(t).constructor):e.apply(t,n))}function eXe(t,e){if(e&&(ky(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tXe(t)}function tXe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Coe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Coe=function(){return!!t})()}function dA(t){return dA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dA(t)}function nXe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fj(t,e)}function Fj(t,e){return Fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Fj(t,e)}function mD(t,e,n){return e=Poe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Poe(t){var e=rXe(t,"string");return ky(e)=="symbol"?e:e+""}function rXe(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function iXe(t){return t.dataKey}function aXe(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(RZe,e)}var ol=function(t){function e(){return ZZe(this,e),QZe(this,e,arguments)}return nXe(e,t),JZe(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,d=i.isAnimationActive,h=i.offset,p=i.payload,m=i.payloadUniqBy,y=i.position,g=i.reverseDirection,v=i.useTranslate3d,w=i.viewBox,_=i.wrapperStyle,x=p??[];f&&x.length&&(x=woe(p.filter(function(T){return T.value!=null&&(T.hide!==!0||r.props.includeHidden)}),m,iXe));var E=x.length>0;return se.createElement(KZe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:a,coordinate:u,hasPayload:E,offset:h,position:y,reverseDirection:g,useTranslate3d:v,viewBox:w,wrapperStyle:_},aXe(c,NV(NV({},this.props),{},{payload:x})))}}])}(k.PureComponent);mD(ol,"displayName","Tooltip");mD(ol,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Av.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var sXe=Tc,oXe=function(){return sXe.Date.now()},lXe=oXe,cXe=/\s/;function uXe(t){for(var e=t.length;e--&&cXe.test(t.charAt(e)););return e}var fXe=uXe,dXe=fXe,hXe=/^\s+/;function pXe(t){return t&&t.slice(0,dXe(t)+1).replace(hXe,"")}var mXe=pXe,gXe=mXe,IV=Vd,yXe=yv,RV=NaN,vXe=/^[-+]0x[0-9a-f]+$/i,wXe=/^0b[01]+$/i,bXe=/^0o[0-7]+$/i,_Xe=parseInt;function xXe(t){if(typeof t=="number")return t;if(yXe(t))return RV;if(IV(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=IV(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=gXe(t);var n=wXe.test(t);return n||bXe.test(t)?_Xe(t.slice(2),n?2:8):vXe.test(t)?RV:+t}var Noe=xXe,SXe=Vd,IP=lXe,jV=Noe,EXe="Expected a function",AXe=Math.max,kXe=Math.min;function OXe(t,e,n){var r,i,a,s,o,l,c=0,u=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(EXe);e=jV(e)||0,SXe(n)&&(u=!!n.leading,f="maxWait"in n,a=f?AXe(jV(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d);function h(E){var T=r,O=i;return r=i=void 0,c=E,s=t.apply(O,T),s}function p(E){return c=E,o=setTimeout(g,e),u?h(E):s}function m(E){var T=E-l,O=E-c,R=e-T;return f?kXe(R,a-O):R}function y(E){var T=E-l,O=E-c;return l===void 0||T>=e||T<0||f&&O>=a}function g(){var E=IP();if(y(E))return v(E);o=setTimeout(g,m(E))}function v(E){return o=void 0,d&&r?h(E):(r=i=void 0,s)}function w(){o!==void 0&&clearTimeout(o),c=0,r=l=i=o=void 0}function _(){return o===void 0?s:v(IP())}function x(){var E=IP(),T=y(E);if(r=arguments,i=this,l=E,T){if(o===void 0)return p(l);if(f)return clearTimeout(o),o=setTimeout(g,e),h(l)}return o===void 0&&(o=setTimeout(g,e)),s}return x.cancel=w,x.flush=_,x}var TXe=OXe,CXe=TXe,PXe=Vd,NXe="Expected a function";function IXe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(NXe);return PXe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),CXe(t,e,{leading:r,maxWait:e,trailing:i})}var RXe=IXe;const Ioe=wn(RXe);function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}function $V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$V(Object(n),!0).forEach(function(r){jXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$V(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jXe(t,e,n){return e=$Xe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Xe(t){var e=MXe(t,"string");return zb(e)=="symbol"?e:e+""}function MXe(t,e){if(zb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LXe(t,e){return UXe(t)||BXe(t,e)||FXe(t,e)||DXe()}function DXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FXe(t,e){if(t){if(typeof t=="string")return MV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MV(t,e)}}function MV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function UXe(t){if(Array.isArray(t))return t}var Roe=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,u=c===void 0?0:c,f=t.minHeight,d=t.maxHeight,h=t.children,p=t.debounce,m=p===void 0?0:p,y=t.id,g=t.className,v=t.onResize,w=t.style,_=w===void 0?{}:w,x=k.useRef(null),E=k.useRef();E.current=v,k.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var T=k.useState({containerWidth:i.width,containerHeight:i.height}),O=LXe(T,2),R=O[0],M=O[1],N=k.useCallback(function(U,B){M(function(V){var Y=Math.round(U),X=Math.round(B);return V.containerWidth===Y&&V.containerHeight===X?V:{containerWidth:Y,containerHeight:X}})},[]);k.useEffect(function(){var U=function(G){var ae,ue=G[0].contentRect,L=ue.width,K=ue.height;N(L,K),(ae=E.current)===null||ae===void 0||ae.call(E,L,K)};m>0&&(U=Ioe(U,m,{trailing:!0,leading:!1}));var B=new ResizeObserver(U),V=x.current.getBoundingClientRect(),Y=V.width,X=V.height;return N(Y,X),B.observe(x.current),function(){B.disconnect()}},[N,m]);var j=k.useMemo(function(){var U=R.containerWidth,B=R.containerHeight;if(U<0||B<0)return null;wl(qh(s)||qh(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),wl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var V=qh(s)?U:s,Y=qh(l)?B:l;n&&n>0&&(V?Y=V/n:Y&&(V=Y*n),d&&Y>d&&(Y=d)),wl(V>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,Y,s,l,u,f,n);var X=!Array.isArray(h)&&xu(h.type).endsWith("Chart");return se.Children.map(h,function(z){return se.isValidElement(z)?k.cloneElement(z,d2({width:V,height:Y},X?{style:d2({height:"100%",width:"100%",maxHeight:Y,maxWidth:V},z.props.style)}:{})):z})},[n,h,l,d,f,u,R,s]);return se.createElement("div",{id:y?"".concat(y):void 0,className:en("recharts-responsive-container",g),style:d2(d2({},_),{},{width:s,height:l,minWidth:u,minHeight:f,maxHeight:d}),ref:x},j)}),Yk=function(e){return null};Yk.displayName="Cell";function Vb(t){"@babel/helpers - typeof";return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(t)}function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){zXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zXe(t,e,n){return e=VXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VXe(t){var e=WXe(t,"string");return Vb(e)=="symbol"?e:e+""}function WXe(t,e){if(Vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tm={widthCache:{},cacheCount:0},HXe=2e3,qXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DV="recharts_measurement_span";function GXe(t){var e=Bj({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Aw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Av.isSsr)return{width:0,height:0};var r=GXe(n),i=JSON.stringify({text:e,copyStyle:r});if(Tm.widthCache[i])return Tm.widthCache[i];try{var a=document.getElementById(DV);a||(a=document.createElement("span"),a.setAttribute("id",DV),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=Bj(Bj({},qXe),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Tm.widthCache[i]=l,++Tm.cacheCount>HXe&&(Tm.cacheCount=0,Tm.widthCache={}),l}catch{return{width:0,height:0}}},KXe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}function hA(t,e){return JXe(t)||XXe(t,e)||ZXe(t,e)||YXe()}function YXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZXe(t,e){if(t){if(typeof t=="string")return FV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FV(t,e)}}function FV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function JXe(t){if(Array.isArray(t))return t}function QXe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tJe(r.key),r)}}function eJe(t,e,n){return e&&BV(t.prototype,e),n&&BV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tJe(t){var e=nJe(t,"string");return Wb(e)=="symbol"?e:e+""}function nJe(t,e){if(Wb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var UV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rJe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iJe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,joe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aJe=Object.keys(joe),bg="NaN";function sJe(t,e){return t*joe[e]}var h2=function(){function t(e,n){QXe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!rJe.test(n)&&(this.num=NaN,this.unit=""),aJe.includes(n)&&(this.num=sJe(e,n),this.unit="px")}return eJe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=iJe.exec(n))!==null&&r!==void 0?r:[],a=hA(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function $oe(t){if(t.includes(bg))return bg;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=UV.exec(e))!==null&&n!==void 0?n:[],i=hA(r,4),a=i[1],s=i[2],o=i[3],l=h2.parse(a??""),c=h2.parse(o??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return bg;e=e.replace(UV,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,d=(f=zV.exec(e))!==null&&f!==void 0?f:[],h=hA(d,4),p=h[1],m=h[2],y=h[3],g=h2.parse(p??""),v=h2.parse(y??""),w=m==="+"?g.add(v):g.subtract(v);if(w.isNaN())return bg;e=e.replace(zV,w.toString())}return e}var VV=/\(([^()]*)\)/;function oJe(t){for(var e=t;e.includes("(");){var n=VV.exec(e),r=hA(n,2),i=r[1];e=e.replace(VV,$oe(i))}return e}function lJe(t){var e=t.replace(/\s+/g,"");return e=oJe(e),e=$oe(e),e}function cJe(t){try{return lJe(t)}catch{return bg}}function RP(t){var e=cJe(t.slice(5,-1));return e===bg?"":e}var uJe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fJe=["dx","dy","angle","className","breakAll"];function Uj(){return Uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uj.apply(this,arguments)}function WV(t,e){if(t==null)return{};var n=dJe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dJe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function HV(t,e){return gJe(t)||mJe(t,e)||pJe(t,e)||hJe()}function hJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pJe(t,e){if(t){if(typeof t=="string")return qV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qV(t,e)}}function qV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function gJe(t){if(Array.isArray(t))return t}var Moe=/[ \f\n\r\t\v\u2028\u2029]+/,Loe=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];an(n)||(r?a=n.toString().split(""):a=n.toString().split(Moe));var s=a.map(function(l){return{word:l,width:Aw(l,i).width}}),o=r?0:Aw("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},yJe=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,c=e.breakAll,u=We(s),f=o,d=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(Y,X){var z=X.word,G=X.width,ae=Y[Y.length-1];if(ae&&(i==null||a||ae.width+G+r<Number(i)))ae.words.push(z),ae.width+=G+r;else{var ue={words:[z],width:G};Y.push(ue)}return Y},[])},h=d(n),p=function(V){return V.reduce(function(Y,X){return Y.width>X.width?Y:X})};if(!u)return h;for(var m="",y=function(V){var Y=f.slice(0,V),X=Loe({breakAll:c,style:l,children:Y+m}).wordsWithComputedWidth,z=d(X),G=z.length>s||p(z).width>Number(i);return[G,z]},g=0,v=f.length-1,w=0,_;g<=v&&w<=f.length-1;){var x=Math.floor((g+v)/2),E=x-1,T=y(E),O=HV(T,2),R=O[0],M=O[1],N=y(x),j=HV(N,1),U=j[0];if(!R&&!U&&(g=x+1),R&&U&&(v=x-1),!R&&U){_=M;break}w++}return _||h},GV=function(e){var n=an(e)?[]:e.toString().split(Moe);return[{words:n}]},vJe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Av.isSsr){var l,c,u=Loe({breakAll:s,children:i,style:a});if(u){var f=u.wordsWithComputedWidth,d=u.spaceWidth;l=f,c=d}else return GV(i);return yJe({breakAll:s,children:i,maxLines:o,style:a},l,c,n,r)}return GV(i)},KV="#808080",Pp=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,f=u===void 0?!1:u,d=e.textAnchor,h=d===void 0?"start":d,p=e.verticalAnchor,m=p===void 0?"end":p,y=e.fill,g=y===void 0?KV:y,v=WV(e,uJe),w=k.useMemo(function(){return vJe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),_=v.dx,x=v.dy,E=v.angle,T=v.className,O=v.breakAll,R=WV(v,fJe);if(!xi(r)||!xi(a))return null;var M=r+(We(_)?_:0),N=a+(We(x)?x:0),j;switch(m){case"start":j=RP("calc(".concat(c,")"));break;case"middle":j=RP("calc(".concat((w.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:j=RP("calc(".concat(w.length-1," * -").concat(o,")"));break}var U=[];if(f){var B=w[0].width,V=v.width;U.push("scale(".concat((We(V)?V/B:1)/B,")"))}return E&&U.push("rotate(".concat(E,", ").concat(M,", ").concat(N,")")),U.length&&(R.transform=U.join(" ")),se.createElement("text",Uj({},jt(R,!0),{x:M,y:N,className:en("recharts-text",T),textAnchor:h,fill:g.includes("url")?KV:g}),w.map(function(Y,X){var z=Y.words.join(O?"":" ");return se.createElement("tspan",{x:M,dy:X===0?j:o,key:"".concat(z,"-").concat(X)},z)}))};function md(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wJe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gD(t){let e,n,r;t.length!==2?(e=md,n=(o,l)=>md(t(o),l),r=(o,l)=>t(o)-l):(e=t===md||t===wJe?t:bJe,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function bJe(){return 0}function Doe(t){return t===null?NaN:+t}function*_Je(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const xJe=gD(md),d_=xJe.right;gD(Doe).center;class YV extends Map{constructor(e,n=AJe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ZV(this,e))}has(e){return super.has(ZV(this,e))}set(e,n){return super.set(SJe(this,e),n)}delete(e){return super.delete(EJe(this,e))}}function ZV({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function SJe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function EJe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function AJe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function kJe(t=md){if(t===md)return Foe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Foe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const OJe=Math.sqrt(50),TJe=Math.sqrt(10),CJe=Math.sqrt(2);function pA(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=OJe?10:a>=TJe?5:a>=CJe?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?pA(t,e,n*2):[o,l,c]}function zj(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?pA(e,t,n):pA(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function Vj(t,e,n){return e=+e,t=+t,n=+n,pA(t,e,n)[2]}function Wj(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Vj(e,t,n):Vj(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function XV(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function JV(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Boe(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Foe:kJe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(e-c*f/l+d)),p=Math.min(r,Math.floor(e+(l-c)*f/l+d));Boe(t,e,h,p,i)}const a=t[e];let s=n,o=r;for(A0(t,n,e),i(t[r],a)>0&&A0(t,n,r);s<o;){for(A0(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?A0(t,n,o):(++o,A0(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function A0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function PJe(t,e,n){if(t=Float64Array.from(_Je(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return JV(t);if(e>=1)return XV(t);var r,i=(r-1)*e,a=Math.floor(i),s=XV(Boe(t,a).subarray(0,a+1)),o=JV(t.subarray(a+1));return s+(o-s)*(i-a)}}function NJe(t,e,n=Doe){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function IJe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Io(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Hj=Symbol("implicit");function yD(){var t=new YV,e=[],n=[],r=Hj;function i(a){let s=t.get(a);if(s===void 0){if(r!==Hj)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new YV;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return yD(e,n).unknown(r)},Io.apply(i,arguments),i}function Hb(){var t=yD().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var d=e().length,h=i<r,p=h?i:r,m=h?r:i;a=(m-p)/Math.max(1,d-l+c*2),o&&(a=Math.floor(a)),p+=(m-p-a*(d-l))*u,s=a*(1-l),o&&(p=Math.round(p),s=Math.round(s));var y=IJe(d).map(function(g){return p+a*g});return n(h?y.reverse():y)}return t.domain=function(d){return arguments.length?(e(d),f()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(d){return arguments.length?(o=!!d,f()):o},t.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},t.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},t.copy=function(){return Hb(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},Io.apply(f(),arguments)}function Uoe(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Uoe(e())},t}function kw(){return Uoe(Hb.apply(null,arguments).paddingInner(1))}function vD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function zoe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function h_(){}var qb=.7,mA=1/qb,Wg="\\s*([+-]?\\d+)\\s*",Gb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RJe=/^#([0-9a-f]{3,8})$/,jJe=new RegExp(`^rgb\\(${Wg},${Wg},${Wg}\\)$`),$Je=new RegExp(`^rgb\\(${vc},${vc},${vc}\\)$`),MJe=new RegExp(`^rgba\\(${Wg},${Wg},${Wg},${Gb}\\)$`),LJe=new RegExp(`^rgba\\(${vc},${vc},${vc},${Gb}\\)$`),DJe=new RegExp(`^hsl\\(${Gb},${vc},${vc}\\)$`),FJe=new RegExp(`^hsla\\(${Gb},${vc},${vc},${Gb}\\)$`),QV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vD(h_,Kb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:eW,formatHex:eW,formatHex8:BJe,formatHsl:UJe,formatRgb:tW,toString:tW});function eW(){return this.rgb().formatHex()}function BJe(){return this.rgb().formatHex8()}function UJe(){return Voe(this).formatHsl()}function tW(){return this.rgb().formatRgb()}function Kb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=RJe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?nW(e):n===3?new Ya(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?p2(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?p2(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jJe.exec(t))?new Ya(e[1],e[2],e[3],1):(e=$Je.exec(t))?new Ya(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=MJe.exec(t))?p2(e[1],e[2],e[3],e[4]):(e=LJe.exec(t))?p2(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=DJe.exec(t))?aW(e[1],e[2]/100,e[3]/100,1):(e=FJe.exec(t))?aW(e[1],e[2]/100,e[3]/100,e[4]):QV.hasOwnProperty(t)?nW(QV[t]):t==="transparent"?new Ya(NaN,NaN,NaN,0):null}function nW(t){return new Ya(t>>16&255,t>>8&255,t&255,1)}function p2(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ya(t,e,n,r)}function zJe(t){return t instanceof h_||(t=Kb(t)),t?(t=t.rgb(),new Ya(t.r,t.g,t.b,t.opacity)):new Ya}function qj(t,e,n,r){return arguments.length===1?zJe(t):new Ya(t,e,n,r??1)}function Ya(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}vD(Ya,qj,zoe(h_,{brighter(t){return t=t==null?mA:Math.pow(mA,t),new Ya(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?qb:Math.pow(qb,t),new Ya(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ya(lp(this.r),lp(this.g),lp(this.b),gA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rW,formatHex:rW,formatHex8:VJe,formatRgb:iW,toString:iW}));function rW(){return`#${Gh(this.r)}${Gh(this.g)}${Gh(this.b)}`}function VJe(){return`#${Gh(this.r)}${Gh(this.g)}${Gh(this.b)}${Gh((isNaN(this.opacity)?1:this.opacity)*255)}`}function iW(){const t=gA(this.opacity);return`${t===1?"rgb(":"rgba("}${lp(this.r)}, ${lp(this.g)}, ${lp(this.b)}${t===1?")":`, ${t})`}`}function gA(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gh(t){return t=lp(t),(t<16?"0":"")+t.toString(16)}function aW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fl(t,e,n,r)}function Voe(t){if(t instanceof fl)return new fl(t.h,t.s,t.l,t.opacity);if(t instanceof h_||(t=Kb(t)),!t)return new fl;if(t instanceof fl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new fl(s,o,l,t.opacity)}function WJe(t,e,n,r){return arguments.length===1?Voe(t):new fl(t,e,n,r??1)}function fl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}vD(fl,WJe,zoe(h_,{brighter(t){return t=t==null?mA:Math.pow(mA,t),new fl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?qb:Math.pow(qb,t),new fl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ya(jP(t>=240?t-240:t+120,i,r),jP(t,i,r),jP(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new fl(sW(this.h),m2(this.s),m2(this.l),gA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gA(this.opacity);return`${t===1?"hsl(":"hsla("}${sW(this.h)}, ${m2(this.s)*100}%, ${m2(this.l)*100}%${t===1?")":`, ${t})`}`}}));function sW(t){return t=(t||0)%360,t<0?t+360:t}function m2(t){return Math.max(0,Math.min(1,t||0))}function jP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const wD=t=>()=>t;function HJe(t,e){return function(n){return t+n*e}}function qJe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function GJe(t){return(t=+t)==1?Woe:function(e,n){return n-e?qJe(e,n,t):wD(isNaN(e)?n:e)}}function Woe(t,e){var n=e-t;return n?HJe(t,n):wD(isNaN(t)?e:t)}const oW=function t(e){var n=GJe(e);function r(i,a){var s=n((i=qj(i)).r,(a=qj(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),c=Woe(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function KJe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function YJe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ZJe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=kv(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function XJe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function yA(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function JJe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=kv(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Gj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$P=new RegExp(Gj.source,"g");function QJe(t){return function(){return t}}function eQe(t){return function(e){return t(e)+""}}function tQe(t,e){var n=Gj.lastIndex=$P.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Gj.exec(t))&&(i=$P.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:yA(r,i)})),n=$P.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?eQe(l[0].x):QJe(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function kv(t,e){var n=typeof e,r;return e==null||n==="boolean"?wD(e):(n==="number"?yA:n==="string"?(r=Kb(e))?(e=r,oW):tQe:e instanceof Kb?oW:e instanceof Date?XJe:YJe(e)?KJe:Array.isArray(e)?ZJe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?JJe:yA)(t,e)}function bD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function nQe(t,e){e===void 0&&(e=t,t=kv);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function rQe(t){return function(){return t}}function vA(t){return+t}var lW=[0,1];function Ia(t){return t}function Kj(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rQe(isNaN(e)?NaN:.5)}function iQe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function aQe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Kj(i,r),a=n(s,a)):(r=Kj(r,i),a=n(a,s)),function(o){return a(r(o))}}function sQe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Kj(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=d_(t,o,1,r)-1;return a[l](i[l](o))}}function p_(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Zk(){var t=lW,e=lW,n=kv,r,i,a,s=Ia,o,l,c;function u(){var d=Math.min(t.length,e.length);return s!==Ia&&(s=iQe(t[0],t[d-1])),o=d>2?sQe:aQe,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=o(t.map(r),e,n)))(r(s(d)))}return f.invert=function(d){return s(i((c||(c=o(e,t.map(r),yA)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,vA),u()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=bD,u()},f.clamp=function(d){return arguments.length?(s=d?!0:Ia,u()):s!==Ia},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,h){return r=d,i=h,u()}}function _D(){return Zk()(Ia,Ia)}function oQe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function wA(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Oy(t){return t=wA(Math.abs(t)),t?t[1]:NaN}function lQe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function cQe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var uQe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yb(t){if(!(e=uQe.exec(t)))throw new Error("invalid format: "+t);var e;return new xD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yb.prototype=xD.prototype;function xD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}xD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fQe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var bA;function dQe(t,e){var n=wA(t,e);if(!n)return bA=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(bA=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+wA(t,Math.max(0,e+a-1))[0]}function cW(t,e){var n=wA(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oQe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cW(t*100,e),r:cW,s:dQe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fW(t){return t}var dW=Array.prototype.map,hW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hQe(t){var e=t.grouping===void 0||t.thousands===void 0?fW:lQe(dW.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?fW:cQe(dW.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f,d){f=Yb(f);var h=f.fill,p=f.align,m=f.sign,y=f.symbol,g=f.zero,v=f.width,w=f.comma,_=f.precision,x=f.trim,E=f.type;E==="n"?(w=!0,E="g"):uW[E]||(_===void 0&&(_=12),x=!0,E="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var T=(d&&d.prefix!==void 0?d.prefix:"")+(y==="$"?n:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),O=(y==="$"?r:/[%p]/.test(E)?s:"")+(d&&d.suffix!==void 0?d.suffix:""),R=uW[E],M=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function N(j){var U=T,B=O,V,Y,X;if(E==="c")B=R(j)+B,j="";else{j=+j;var z=j<0||1/j<0;if(j=isNaN(j)?l:R(Math.abs(j),_),x&&(j=fQe(j)),z&&+j==0&&m!=="+"&&(z=!1),U=(z?m==="("?m:o:m==="-"||m==="("?"":m)+U,B=(E==="s"&&!isNaN(j)&&bA!==void 0?hW[8+bA/3]:"")+B+(z&&m==="("?")":""),M){for(V=-1,Y=j.length;++V<Y;)if(X=j.charCodeAt(V),48>X||X>57){B=(X===46?i+j.slice(V+1):j.slice(V))+B,j=j.slice(0,V);break}}}w&&!g&&(j=e(j,1/0));var G=U.length+j.length+B.length,ae=G<v?new Array(v-G+1).join(h):"";switch(w&&g&&(j=e(ae+j,ae.length?v-B.length:1/0),ae=""),p){case"<":j=U+j+B+ae;break;case"=":j=U+ae+j+B;break;case"^":j=ae.slice(0,G=ae.length>>1)+U+j+B+ae.slice(G);break;default:j=ae+U+j+B;break}return a(j)}return N.toString=function(){return f+""},N}function u(f,d){var h=Math.max(-8,Math.min(8,Math.floor(Oy(d)/3)))*3,p=Math.pow(10,-h),m=c((f=Yb(f),f.type="f",f),{suffix:hW[8+h/3]});return function(y){return m(p*y)}}return{format:c,formatPrefix:u}}var g2,SD,Hoe;pQe({thousands:",",grouping:[3],currency:["$",""]});function pQe(t){return g2=hQe(t),SD=g2.format,Hoe=g2.formatPrefix,g2}function mQe(t){return Math.max(0,-Oy(Math.abs(t)))}function gQe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Oy(e)/3)))*3-Oy(Math.abs(t)))}function yQe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Oy(e)-Oy(t))+1}function qoe(t,e,n,r){var i=Wj(t,e,n),a;switch(r=Yb(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=gQe(i,s))&&(r.precision=a),Hoe(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=yQe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=mQe(i))&&(r.precision=a-(r.type==="%")*2);break}}return SD(r)}function Wd(t){var e=t.domain;return t.ticks=function(n){var r=e();return zj(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return qoe(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,c,u=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);u-- >0;){if(c=Vj(s,o,n),c===l)return r[i]=s,r[a]=o,e(r);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function _A(){var t=_D();return t.copy=function(){return p_(t,_A())},Io.apply(t,arguments),Wd(t)}function Goe(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,vA),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Goe(t).unknown(e)},t=arguments.length?Array.from(t,vA):[0,1],Wd(n)}function Koe(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function pW(t){return Math.log(t)}function mW(t){return Math.exp(t)}function vQe(t){return-Math.log(-t)}function wQe(t){return-Math.exp(-t)}function bQe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function _Qe(t){return t===10?bQe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function xQe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function gW(t){return(e,n)=>-t(-e,n)}function ED(t){const e=t(pW,mW),n=e.domain;let r=10,i,a;function s(){return i=xQe(r),a=_Qe(r),n()[0]<0?(i=gW(i),a=gW(a),t(vQe,wQe)):t(pW,mW),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),p,m;const y=o==null?10:+o;let g=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/a(-d):p*a(d),!(m<c)){if(m>u)break;g.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/a(-d):p*a(d),!(m<c)){if(m>u)break;g.push(m)}g.length*2<y&&(g=zj(c,u,y))}else g=zj(d,h,Math.min(h-d,y)).map(a);return f?g.reverse():g},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Yb(l)).precision==null&&(l.trim=!0),l=SD(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let f=u/a(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=()=>n(Koe(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function Yoe(){const t=ED(Zk()).domain([1,10]);return t.copy=()=>p_(t,Yoe()).base(t.base()),Io.apply(t,arguments),t}function yW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function vW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function AD(t){var e=1,n=t(yW(e),vW(e));return n.constant=function(r){return arguments.length?t(yW(e=+r),vW(e)):e},Wd(n)}function Zoe(){var t=AD(Zk());return t.copy=function(){return p_(t,Zoe()).constant(t.constant())},Io.apply(t,arguments)}function wW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function SQe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function EQe(t){return t<0?-t*t:t*t}function kD(t){var e=t(Ia,Ia),n=1;function r(){return n===1?t(Ia,Ia):n===.5?t(SQe,EQe):t(wW(n),wW(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Wd(e)}function OD(){var t=kD(Zk());return t.copy=function(){return p_(t,OD()).exponent(t.exponent())},Io.apply(t,arguments),t}function AQe(){return OD.apply(null,arguments).exponent(.5)}function bW(t){return Math.sign(t)*t*t}function kQe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Xoe(){var t=_D(),e=[0,1],n=!1,r;function i(a){var s=kQe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(bW(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,vA)).map(bW)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Xoe(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Io.apply(i,arguments),Wd(i)}function Joe(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=NJe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[d_(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(md),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Joe().domain(t).range(e).unknown(r)},Io.apply(a,arguments)}function Qoe(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[d_(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Qoe().domain([t,e]).range(i).unknown(a)},Io.apply(Wd(s),arguments)}function ele(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[d_(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return ele().domain(t).range(e).unknown(n)},Io.apply(i,arguments)}const MP=new Date,LP=new Date;function Ai(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),e(a,o),t(a);while(c<a&&a<s);return l},i.filter=a=>Ai(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(MP.setTime(+a),LP.setTime(+s),t(MP),t(LP),Math.floor(n(MP,LP))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const xA=Ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);xA.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):xA);xA.range;const du=1e3,vo=du*60,hu=vo*60,Fu=hu*24,TD=Fu*7,_W=Fu*30,DP=Fu*365,Kh=Ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getUTCSeconds());Kh.range;const CD=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du)},(t,e)=>{t.setTime(+t+e*vo)},(t,e)=>(e-t)/vo,t=>t.getMinutes());CD.range;const PD=Ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*vo)},(t,e)=>(e-t)/vo,t=>t.getUTCMinutes());PD.range;const ND=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du-t.getMinutes()*vo)},(t,e)=>{t.setTime(+t+e*hu)},(t,e)=>(e-t)/hu,t=>t.getHours());ND.range;const ID=Ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*hu)},(t,e)=>(e-t)/hu,t=>t.getUTCHours());ID.range;const m_=Ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vo)/Fu,t=>t.getDate()-1);m_.range;const Xk=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fu,t=>t.getUTCDate()-1);Xk.range;const tle=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Fu,t=>Math.floor(t/Fu));tle.range;function qp(t){return Ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*vo)/TD)}const Jk=qp(0),SA=qp(1),OQe=qp(2),TQe=qp(3),Ty=qp(4),CQe=qp(5),PQe=qp(6);Jk.range;SA.range;OQe.range;TQe.range;Ty.range;CQe.range;PQe.range;function Gp(t){return Ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/TD)}const Qk=Gp(0),EA=Gp(1),NQe=Gp(2),IQe=Gp(3),Cy=Gp(4),RQe=Gp(5),jQe=Gp(6);Qk.range;EA.range;NQe.range;IQe.range;Cy.range;RQe.range;jQe.range;const RD=Ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());RD.range;const jD=Ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());jD.range;const Bu=Ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Bu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Bu.range;const Uu=Ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Uu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Uu.range;function nle(t,e,n,r,i,a){const s=[[Kh,1,du],[Kh,5,5*du],[Kh,15,15*du],[Kh,30,30*du],[a,1,vo],[a,5,5*vo],[a,15,15*vo],[a,30,30*vo],[i,1,hu],[i,3,3*hu],[i,6,6*hu],[i,12,12*hu],[r,1,Fu],[r,2,2*Fu],[n,1,TD],[e,1,_W],[e,3,3*_W],[t,1,DP]];function o(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),p=h?h.range(c,+u+1):[];return d?p.reverse():p}function l(c,u,f){const d=Math.abs(u-c)/f,h=gD(([,,y])=>y).right(s,d);if(h===s.length)return t.every(Wj(c/DP,u/DP,f));if(h===0)return xA.every(Math.max(Wj(c,u,f),1));const[p,m]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(m)}return[o,l]}const[$Qe,MQe]=nle(Uu,jD,Qk,tle,ID,PD),[LQe,DQe]=nle(Bu,RD,Jk,m_,ND,CD);function FP(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function BP(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function k0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function FQe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=O0(i),u=T0(i),f=O0(a),d=T0(a),h=O0(s),p=T0(s),m=O0(o),y=T0(o),g=O0(l),v=T0(l),w={a:X,A:z,b:G,B:ae,c:null,d:OW,e:OW,f:cet,g:wet,G:_et,H:aet,I:set,j:oet,L:rle,m:uet,M:fet,p:ue,q:L,Q:PW,s:NW,S:det,u:het,U:pet,V:met,w:get,W:yet,x:null,X:null,y:vet,Y:bet,Z:xet,"%":CW},_={a:K,A:Q,b:re,B:F,c:null,d:TW,e:TW,f:Oet,g:Let,G:Fet,H:Eet,I:Aet,j:ket,L:ale,m:Tet,M:Cet,p:$,q:ie,Q:PW,s:NW,S:Pet,u:Net,U:Iet,V:Ret,w:jet,W:$et,x:null,X:null,y:Met,Y:Det,Z:Bet,"%":CW},x={a:M,A:N,b:j,B:U,c:B,d:AW,e:AW,f:tet,g:EW,G:SW,H:kW,I:kW,j:XQe,L:eet,m:ZQe,M:JQe,p:R,q:YQe,Q:ret,s:iet,S:QQe,u:WQe,U:HQe,V:qQe,w:VQe,W:GQe,x:V,X:Y,y:EW,Y:SW,Z:KQe,"%":net};w.x=E(n,w),w.X=E(r,w),w.c=E(e,w),_.x=E(n,_),_.X=E(r,_),_.c=E(e,_);function E(q,fe){return function(me){var de=[],_e=-1,Oe=0,ee=q.length,Ee,Qe,tt;for(me instanceof Date||(me=new Date(+me));++_e<ee;)q.charCodeAt(_e)===37&&(de.push(q.slice(Oe,_e)),(Qe=xW[Ee=q.charAt(++_e)])!=null?Ee=q.charAt(++_e):Qe=Ee==="e"?" ":"0",(tt=fe[Ee])&&(Ee=tt(me,Qe)),de.push(Ee),Oe=_e+1);return de.push(q.slice(Oe,_e)),de.join("")}}function T(q,fe){return function(me){var de=k0(1900,void 0,1),_e=O(de,q,me+="",0),Oe,ee;if(_e!=me.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(fe&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Oe=BP(k0(de.y,0,1)),ee=Oe.getUTCDay(),Oe=ee>4||ee===0?EA.ceil(Oe):EA(Oe),Oe=Xk.offset(Oe,(de.V-1)*7),de.y=Oe.getUTCFullYear(),de.m=Oe.getUTCMonth(),de.d=Oe.getUTCDate()+(de.w+6)%7):(Oe=FP(k0(de.y,0,1)),ee=Oe.getDay(),Oe=ee>4||ee===0?SA.ceil(Oe):SA(Oe),Oe=m_.offset(Oe,(de.V-1)*7),de.y=Oe.getFullYear(),de.m=Oe.getMonth(),de.d=Oe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),ee="Z"in de?BP(k0(de.y,0,1)).getUTCDay():FP(k0(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(ee+5)%7:de.w+de.U*7-(ee+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,BP(de)):FP(de)}}function O(q,fe,me,de){for(var _e=0,Oe=fe.length,ee=me.length,Ee,Qe;_e<Oe;){if(de>=ee)return-1;if(Ee=fe.charCodeAt(_e++),Ee===37){if(Ee=fe.charAt(_e++),Qe=x[Ee in xW?fe.charAt(_e++):Ee],!Qe||(de=Qe(q,me,de))<0)return-1}else if(Ee!=me.charCodeAt(de++))return-1}return de}function R(q,fe,me){var de=c.exec(fe.slice(me));return de?(q.p=u.get(de[0].toLowerCase()),me+de[0].length):-1}function M(q,fe,me){var de=h.exec(fe.slice(me));return de?(q.w=p.get(de[0].toLowerCase()),me+de[0].length):-1}function N(q,fe,me){var de=f.exec(fe.slice(me));return de?(q.w=d.get(de[0].toLowerCase()),me+de[0].length):-1}function j(q,fe,me){var de=g.exec(fe.slice(me));return de?(q.m=v.get(de[0].toLowerCase()),me+de[0].length):-1}function U(q,fe,me){var de=m.exec(fe.slice(me));return de?(q.m=y.get(de[0].toLowerCase()),me+de[0].length):-1}function B(q,fe,me){return O(q,e,fe,me)}function V(q,fe,me){return O(q,n,fe,me)}function Y(q,fe,me){return O(q,r,fe,me)}function X(q){return s[q.getDay()]}function z(q){return a[q.getDay()]}function G(q){return l[q.getMonth()]}function ae(q){return o[q.getMonth()]}function ue(q){return i[+(q.getHours()>=12)]}function L(q){return 1+~~(q.getMonth()/3)}function K(q){return s[q.getUTCDay()]}function Q(q){return a[q.getUTCDay()]}function re(q){return l[q.getUTCMonth()]}function F(q){return o[q.getUTCMonth()]}function $(q){return i[+(q.getUTCHours()>=12)]}function ie(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var fe=E(q+="",w);return fe.toString=function(){return q},fe},parse:function(q){var fe=T(q+="",!1);return fe.toString=function(){return q},fe},utcFormat:function(q){var fe=E(q+="",_);return fe.toString=function(){return q},fe},utcParse:function(q){var fe=T(q+="",!0);return fe.toString=function(){return q},fe}}}var xW={"-":"",_:" ",0:"0"},Mi=/^\s*\d+/,BQe=/^%/,UQe=/[\\^$*+?|[\]().{}]/g;function Sn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function zQe(t){return t.replace(UQe,"\\$&")}function O0(t){return new RegExp("^(?:"+t.map(zQe).join("|")+")","i")}function T0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function VQe(t,e,n){var r=Mi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function WQe(t,e,n){var r=Mi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function HQe(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function qQe(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function GQe(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function SW(t,e,n){var r=Mi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function EW(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function KQe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function YQe(t,e,n){var r=Mi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ZQe(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function AW(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function XQe(t,e,n){var r=Mi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kW(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function JQe(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function QQe(t,e,n){var r=Mi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function eet(t,e,n){var r=Mi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function tet(t,e,n){var r=Mi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function net(t,e,n){var r=BQe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ret(t,e,n){var r=Mi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function iet(t,e,n){var r=Mi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function OW(t,e){return Sn(t.getDate(),e,2)}function aet(t,e){return Sn(t.getHours(),e,2)}function set(t,e){return Sn(t.getHours()%12||12,e,2)}function oet(t,e){return Sn(1+m_.count(Bu(t),t),e,3)}function rle(t,e){return Sn(t.getMilliseconds(),e,3)}function cet(t,e){return rle(t,e)+"000"}function uet(t,e){return Sn(t.getMonth()+1,e,2)}function fet(t,e){return Sn(t.getMinutes(),e,2)}function det(t,e){return Sn(t.getSeconds(),e,2)}function het(t){var e=t.getDay();return e===0?7:e}function pet(t,e){return Sn(Jk.count(Bu(t)-1,t),e,2)}function ile(t){var e=t.getDay();return e>=4||e===0?Ty(t):Ty.ceil(t)}function met(t,e){return t=ile(t),Sn(Ty.count(Bu(t),t)+(Bu(t).getDay()===4),e,2)}function get(t){return t.getDay()}function yet(t,e){return Sn(SA.count(Bu(t)-1,t),e,2)}function vet(t,e){return Sn(t.getFullYear()%100,e,2)}function wet(t,e){return t=ile(t),Sn(t.getFullYear()%100,e,2)}function bet(t,e){return Sn(t.getFullYear()%1e4,e,4)}function _et(t,e){var n=t.getDay();return t=n>=4||n===0?Ty(t):Ty.ceil(t),Sn(t.getFullYear()%1e4,e,4)}function xet(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Sn(e/60|0,"0",2)+Sn(e%60,"0",2)}function TW(t,e){return Sn(t.getUTCDate(),e,2)}function Eet(t,e){return Sn(t.getUTCHours(),e,2)}function Aet(t,e){return Sn(t.getUTCHours()%12||12,e,2)}function ket(t,e){return Sn(1+Xk.count(Uu(t),t),e,3)}function ale(t,e){return Sn(t.getUTCMilliseconds(),e,3)}function Oet(t,e){return ale(t,e)+"000"}function Tet(t,e){return Sn(t.getUTCMonth()+1,e,2)}function Cet(t,e){return Sn(t.getUTCMinutes(),e,2)}function Pet(t,e){return Sn(t.getUTCSeconds(),e,2)}function Net(t){var e=t.getUTCDay();return e===0?7:e}function Iet(t,e){return Sn(Qk.count(Uu(t)-1,t),e,2)}function sle(t){var e=t.getUTCDay();return e>=4||e===0?Cy(t):Cy.ceil(t)}function Ret(t,e){return t=sle(t),Sn(Cy.count(Uu(t),t)+(Uu(t).getUTCDay()===4),e,2)}function jet(t){return t.getUTCDay()}function $et(t,e){return Sn(EA.count(Uu(t)-1,t),e,2)}function Met(t,e){return Sn(t.getUTCFullYear()%100,e,2)}function Let(t,e){return t=sle(t),Sn(t.getUTCFullYear()%100,e,2)}function Det(t,e){return Sn(t.getUTCFullYear()%1e4,e,4)}function Fet(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cy(t):Cy.ceil(t),Sn(t.getUTCFullYear()%1e4,e,4)}function Bet(){return"+0000"}function CW(){return"%"}function PW(t){return+t}function NW(t){return Math.floor(+t/1e3)}var Cm,ole,lle;Uet({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Uet(t){return Cm=FQe(t),ole=Cm.format,Cm.parse,lle=Cm.utcFormat,Cm.utcParse,Cm}function zet(t){return new Date(t)}function Vet(t){return t instanceof Date?+t:+new Date(+t)}function $D(t,e,n,r,i,a,s,o,l,c){var u=_D(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),m=c("%I:%M"),y=c("%I %p"),g=c("%a %d"),v=c("%b %d"),w=c("%B"),_=c("%Y");function x(E){return(l(E)<E?h:o(E)<E?p:s(E)<E?m:a(E)<E?y:r(E)<E?i(E)<E?g:v:n(E)<E?w:_)(E)}return u.invert=function(E){return new Date(f(E))},u.domain=function(E){return arguments.length?d(Array.from(E,Vet)):d().map(zet)},u.ticks=function(E){var T=d();return t(T[0],T[T.length-1],E??10)},u.tickFormat=function(E,T){return T==null?x:c(T)},u.nice=function(E){var T=d();return(!E||typeof E.range!="function")&&(E=e(T[0],T[T.length-1],E??10)),E?d(Koe(T,E)):u},u.copy=function(){return p_(u,$D(t,e,n,r,i,a,s,o,l,c))},u}function Wet(){return Io.apply($D(LQe,DQe,Bu,RD,Jk,m_,ND,CD,Kh,ole).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Het(){return Io.apply($D($Qe,MQe,Uu,jD,Qk,Xk,ID,PD,Kh,lle).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function eO(){var t=0,e=1,n,r,i,a,s=Ia,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function u(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),c):[s(0),s(1)]}}return c.range=u(kv),c.rangeRound=u(bD),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),c}}function Hd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cle(){var t=Wd(eO()(Ia));return t.copy=function(){return Hd(t,cle())},Qu.apply(t,arguments)}function ule(){var t=ED(eO()).domain([1,10]);return t.copy=function(){return Hd(t,ule()).base(t.base())},Qu.apply(t,arguments)}function fle(){var t=AD(eO());return t.copy=function(){return Hd(t,fle()).constant(t.constant())},Qu.apply(t,arguments)}function MD(){var t=kD(eO());return t.copy=function(){return Hd(t,MD()).exponent(t.exponent())},Qu.apply(t,arguments)}function qet(){return MD.apply(null,arguments).exponent(.5)}function dle(){var t=[],e=Ia;function n(r){if(r!=null&&!isNaN(r=+r))return e((d_(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(md),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>PJe(t,a/r))},n.copy=function(){return dle(e).domain(t)},Qu.apply(n,arguments)}function tO(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,c=Ia,u,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+u(m))-a)*(r*m<r*a?o:l),c(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,i=u(t=+t),a=u(e=+e),s=u(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(c=m,h):c};function p(m){return function(y){var g,v,w;return arguments.length?([g,v,w]=y,c=nQe(m,[g,v,w]),h):[c(0),c(.5),c(1)]}}return h.range=p(kv),h.rangeRound=p(bD),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return u=m,i=m(t),a=m(e),s=m(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h}}function hle(){var t=Wd(tO()(Ia));return t.copy=function(){return Hd(t,hle())},Qu.apply(t,arguments)}function ple(){var t=ED(tO()).domain([.1,1,10]);return t.copy=function(){return Hd(t,ple()).base(t.base())},Qu.apply(t,arguments)}function mle(){var t=AD(tO());return t.copy=function(){return Hd(t,mle()).constant(t.constant())},Qu.apply(t,arguments)}function LD(){var t=kD(tO());return t.copy=function(){return Hd(t,LD()).exponent(t.exponent())},Qu.apply(t,arguments)}function Get(){return LD.apply(null,arguments).exponent(.5)}const IW=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hb,scaleDiverging:hle,scaleDivergingLog:ple,scaleDivergingPow:LD,scaleDivergingSqrt:Get,scaleDivergingSymlog:mle,scaleIdentity:Goe,scaleImplicit:Hj,scaleLinear:_A,scaleLog:Yoe,scaleOrdinal:yD,scalePoint:kw,scalePow:OD,scaleQuantile:Joe,scaleQuantize:Qoe,scaleRadial:Xoe,scaleSequential:cle,scaleSequentialLog:ule,scaleSequentialPow:MD,scaleSequentialQuantile:dle,scaleSequentialSqrt:qet,scaleSequentialSymlog:fle,scaleSqrt:AQe,scaleSymlog:Zoe,scaleThreshold:ele,scaleTime:Wet,scaleUtc:Het,tickFormat:qoe},Symbol.toStringTag,{value:"Module"}));var Ket=yv;function Yet(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!Ket(s):n(s,o)))var o=s,l=a}return l}var nO=Yet;function Zet(t,e){return t>e}var gle=Zet,Xet=nO,Jet=gle,Qet=Ev;function ett(t){return t&&t.length?Xet(t,Qet,Jet):void 0}var ttt=ett;const rO=wn(ttt);function ntt(t,e){return t<e}var yle=ntt,rtt=nO,itt=yle,att=Ev;function stt(t){return t&&t.length?rtt(t,att,itt):void 0}var ott=stt;const iO=wn(ott);var ltt=XL,ctt=Cc,utt=Aoe,ftt=as;function dtt(t,e){var n=ftt(t)?ltt:utt;return n(t,ctt(e))}var htt=dtt,ptt=Soe,mtt=htt;function gtt(t,e){return ptt(mtt(t,e),1)}var ytt=gtt;const vtt=wn(ytt);var wtt=dD;function btt(t,e){return wtt(t,e)}var _tt=btt;const aO=wn(_tt);var Ov=1e9,xtt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},FD,pr=!0,To="[DecimalError] ",cp=To+"Invalid argument: ",DD=To+"Exponent out of range: ",Tv=Math.floor,Ch=Math.pow,Stt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cs,Ci=1e7,sr=7,vle=9007199254740991,AA=Tv(vle/sr),at={};at.absoluteValue=at.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};at.comparedTo=at.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};at.decimalPlaces=at.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*sr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};at.dividedBy=at.div=function(t){return Su(this,new this.constructor(t))};at.dividedToIntegerBy=at.idiv=function(t){var e=this,n=e.constructor;return Wn(Su(e,new n(t),0,1),n.precision)};at.equals=at.eq=function(t){return!this.cmp(t)};at.exponent=function(){return ri(this)};at.greaterThan=at.gt=function(t){return this.cmp(t)>0};at.greaterThanOrEqualTo=at.gte=function(t){return this.cmp(t)>=0};at.isInteger=at.isint=function(){return this.e>this.d.length-2};at.isNegative=at.isneg=function(){return this.s<0};at.isPositive=at.ispos=function(){return this.s>0};at.isZero=function(){return this.s===0};at.lessThan=at.lt=function(t){return this.cmp(t)<0};at.lessThanOrEqualTo=at.lte=function(t){return this.cmp(t)<1};at.logarithm=at.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Cs))throw Error(To+"NaN");if(n.s<1)throw Error(To+(n.s?"NaN":"-Infinity"));return n.eq(Cs)?new r(0):(pr=!1,e=Su(Zb(n,a),Zb(t,a),a),pr=!0,Wn(e,i))};at.minus=at.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_le(e,t):wle(e,(t.s=-t.s,t))};at.modulo=at.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(To+"NaN");return n.s?(pr=!1,e=Su(n,t,0,1).times(t),pr=!0,n.minus(e)):Wn(new r(n),i)};at.naturalExponential=at.exp=function(){return ble(this)};at.naturalLogarithm=at.ln=function(){return Zb(this)};at.negated=at.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};at.plus=at.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wle(e,t):_le(e,(t.s=-t.s,t))};at.precision=at.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(cp+t);if(e=ri(i)+1,r=i.d.length-1,n=r*sr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};at.squareRoot=at.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(To+"NaN")}for(t=ri(o),pr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=oc(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Tv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(Su(o,a,s+2)).times(.5),oc(a.d).slice(0,s)===(e=oc(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Wn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return pr=!0,Wn(r,n)};at.times=at.mul=function(t){var e,n,r,i,a,s,o,l,c,u=this,f=u.constructor,d=u.d,h=(t=new f(t)).d;if(!u.s||!t.s)return new f(0);for(t.s*=u.s,n=u.e+t.e,l=d.length,c=h.length,l<c&&(a=d,d=h,h=a,s=l,l=c,c=s),a=[],s=l+c,r=s;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+h[r]*d[i-r-1]+e,a[i--]=o%Ci|0,e=o/Ci|0;a[i]=(a[i]+e)%Ci|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,pr?Wn(t,f.precision):t};at.toDecimalPlaces=at.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ec(t,0,Ov),e===void 0?e=r.rounding:Ec(e,0,8),Wn(n,t+ri(n)+1,e))};at.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Np(r,!0):(Ec(t,0,Ov),e===void 0?e=i.rounding:Ec(e,0,8),r=Wn(new i(r),t+1,e),n=Np(r,!0,t+1)),n};at.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Np(i):(Ec(t,0,Ov),e===void 0?e=a.rounding:Ec(e,0,8),r=Wn(new a(i),t+ri(i)+1,e),n=Np(r.abs(),!1,t+ri(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};at.toInteger=at.toint=function(){var t=this,e=t.constructor;return Wn(new e(t),ri(t)+1,e.rounding)};at.toNumber=function(){return+this};at.toPower=at.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Cs);if(o=new l(o),!o.s){if(t.s<1)throw Error(To+"Infinity");return o}if(o.eq(Cs))return o;if(r=l.precision,t.eq(Cs))return Wn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=u<0?-u:u)<=vle){for(i=new l(Cs),e=Math.ceil(r/sr+4),pr=!1;n%2&&(i=i.times(o),jW(i.d,e)),n=Tv(n/2),n!==0;)o=o.times(o),jW(o.d,e);return pr=!0,t.s<0?new l(Cs).div(i):Wn(i,r)}}else if(a<0)throw Error(To+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,pr=!1,i=t.times(Zb(o,r+c)),pr=!0,i=ble(i),i.s=a,i};at.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=ri(i),r=Np(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ec(t,1,Ov),e===void 0?e=a.rounding:Ec(e,0,8),i=Wn(new a(i),t,e),n=ri(i),r=Np(i,t<=n||n<=a.toExpNeg,t)),r};at.toSignificantDigits=at.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ec(t,1,Ov),e===void 0?e=r.rounding:Ec(e,0,8)),Wn(new r(n),t,e)};at.toString=at.valueOf=at.val=at.toJSON=at[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ri(t),n=t.constructor;return Np(t,e<=n.toExpNeg||e>=n.toExpPos)};function wle(t,e){var n,r,i,a,s,o,l,c,u=t.constructor,f=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),pr?Wn(e,f):e;if(l=t.d,c=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=c.length):(r=c,i=s,o=l.length),s=Math.ceil(f/sr),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/Ci|0,l[a]%=Ci;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,pr?Wn(e,f):e}function Ec(t,e,n){if(t!==~~t||t<e||t>n)throw Error(cp+t)}function oc(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=sr-r.length,n&&(a+=Df(n)),a+=r;s=t[e],r=s+"",n=sr-r.length,n&&(a+=Df(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Su=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Ci|0,s=a/Ci|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Ci+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,c,u,f,d,h,p,m,y,g,v,w,_,x,E,T,O,R=r.constructor,M=r.s==i.s?1:-1,N=r.d,j=i.d;if(!r.s)return new R(r);if(!i.s)throw Error(To+"Division by zero");for(l=r.e-i.e,T=j.length,x=N.length,h=new R(M),p=h.d=[],c=0;j[c]==(N[c]||0);)++c;if(j[c]>(N[c]||0)&&--l,a==null?v=a=R.precision:s?v=a+(ri(r)-ri(i))+1:v=a,v<0)return new R(0);if(v=v/sr+2|0,c=0,T==1)for(u=0,j=j[0],v++;(c<x||u)&&v--;c++)w=u*Ci+(N[c]||0),p[c]=w/j|0,u=w%j|0;else{for(u=Ci/(j[0]+1)|0,u>1&&(j=t(j,u),N=t(N,u),T=j.length,x=N.length),_=T,m=N.slice(0,T),y=m.length;y<T;)m[y++]=0;O=j.slice(),O.unshift(0),E=j[0],j[1]>=Ci/2&&++E;do u=0,o=e(j,m,T,y),o<0?(g=m[0],T!=y&&(g=g*Ci+(m[1]||0)),u=g/E|0,u>1?(u>=Ci&&(u=Ci-1),f=t(j,u),d=f.length,y=m.length,o=e(f,m,d,y),o==1&&(u--,n(f,T<d?O:j,d))):(u==0&&(o=u=1),f=j.slice()),d=f.length,d<y&&f.unshift(0),n(m,f,y),o==-1&&(y=m.length,o=e(j,m,T,y),o<1&&(u++,n(m,T<y?O:j,y))),y=m.length):o===0&&(u++,m=[0]),p[c++]=u,o&&m[0]?m[y++]=N[_]||0:(m=[N[_]],y=1);while((_++<x||m[0]!==void 0)&&v--)}return p[0]||p.shift(),h.e=l,Wn(h,s?a+ri(h)+1:a)}}();function ble(t,e){var n,r,i,a,s,o,l=0,c=0,u=t.constructor,f=u.precision;if(ri(t)>16)throw Error(DD+ri(t));if(!t.s)return new u(Cs);for(pr=!1,o=f,s=new u(.03125);t.abs().gte(.1);)t=t.times(s),c+=5;for(r=Math.log(Ch(2,c))/Math.LN10*2+5|0,o+=r,n=i=a=new u(Cs),u.precision=o;;){if(i=Wn(i.times(t),o),n=n.times(++l),s=a.plus(Su(i,n,o)),oc(s.d).slice(0,o)===oc(a.d).slice(0,o)){for(;c--;)a=Wn(a.times(a),o);return u.precision=f,e==null?(pr=!0,Wn(a,f)):a}a=s}}function ri(t){for(var e=t.e*sr,n=t.d[0];n>=10;n/=10)e++;return e}function UP(t,e,n){if(e>t.LN10.sd())throw pr=!0,n&&(t.precision=n),Error(To+"LN10 precision limit exceeded");return Wn(new t(t.LN10),e)}function Df(t){for(var e="";t--;)e+="0";return e}function Zb(t,e){var n,r,i,a,s,o,l,c,u,f=1,d=10,h=t,p=h.d,m=h.constructor,y=m.precision;if(h.s<1)throw Error(To+(h.s?"NaN":"-Infinity"));if(h.eq(Cs))return new m(0);if(e==null?(pr=!1,c=y):c=e,h.eq(10))return e==null&&(pr=!0),UP(m,c);if(c+=d,m.precision=c,n=oc(p),r=n.charAt(0),a=ri(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=oc(h.d),r=n.charAt(0),f++;a=ri(h),r>1?(h=new m("0."+n),a++):h=new m(r+"."+n.slice(1))}else return l=UP(m,c+2,y).times(a+""),h=Zb(new m(r+"."+n.slice(1)),c-d).plus(l),m.precision=y,e==null?(pr=!0,Wn(h,y)):h;for(o=s=h=Su(h.minus(Cs),h.plus(Cs),c),u=Wn(h.times(h),c),i=3;;){if(s=Wn(s.times(u),c),l=o.plus(Su(s,new m(i),c)),oc(l.d).slice(0,c)===oc(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(UP(m,c+2,y).times(a+""))),o=Su(o,new m(f),c),m.precision=y,e==null?(pr=!0,Wn(o,y)):o;o=l,i+=2}}function RW(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Tv(n/sr),t.d=[],r=(n+1)%sr,n<0&&(r+=sr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=sr;r<i;)t.d.push(+e.slice(r,r+=sr));e=e.slice(r),r=sr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),pr&&(t.e>AA||t.e<-AA))throw Error(DD+n)}else t.s=0,t.e=0,t.d=[0];return t}function Wn(t,e,n){var r,i,a,s,o,l,c,u,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=sr,i=e,c=f[u=0];else{if(u=Math.ceil((r+1)/sr),a=f.length,u>=a)return t;for(c=a=f[u],s=1;a>=10;a/=10)s++;r%=sr,i=r-sr+s}if(n!==void 0&&(a=Ch(10,s-i-1),o=c/a%10|0,l=e<0||f[u+1]!==void 0||c%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/Ch(10,s-i):0:f[u-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=ri(t),f.length=1,e=e-a-1,f[0]=Ch(10,(sr-e%sr)%sr),t.e=Tv(-e/sr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=u,a=1,u--):(f.length=u+1,a=Ch(10,sr-r),f[u]=i>0?(c/Ch(10,s-i)%Ch(10,i)|0)*a:0),l)for(;;)if(u==0){(f[0]+=a)==Ci&&(f[0]=1,++t.e);break}else{if(f[u]+=a,f[u]!=Ci)break;f[u--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(pr&&(t.e>AA||t.e<-AA))throw Error(DD+ri(t));return t}function _le(t,e){var n,r,i,a,s,o,l,c,u,f,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new d(t),pr?Wn(e,h):e;if(l=t.d,f=e.d,r=e.e,c=t.e,l=l.slice(),s=c-r,s){for(u=s<0,u?(n=l,s=-s,o=f.length):(n=f,r=c,o=l.length),i=Math.max(Math.ceil(h/sr),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}s=0}for(u&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Ci-1;--l[a],l[i]+=Ci}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,pr?Wn(e,h):e):new d(0)}function Np(t,e,n){var r,i=ri(t),a=oc(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Df(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Df(-i-1)+a,n&&(r=n-s)>0&&(a+=Df(r))):i>=s?(a+=Df(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Df(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Df(r))),t.s<0?"-"+a:a}function jW(t,e){if(t.length>e)return t.length=e,!0}function xle(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(cp+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return RW(s,a.toString())}else if(typeof a!="string")throw Error(cp+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Stt.test(a))RW(s,a);else throw Error(cp+a)}if(i.prototype=at,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=xle,i.config=i.set=Ett,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Ett(t){if(!t||typeof t!="object")throw Error(To+"Object expected");var e,n,r,i=["precision",1,Ov,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Tv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(cp+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(cp+n+": "+r);return this}var FD=xle(xtt);Cs=new FD(1);const Ln=FD;function Att(t){return Ctt(t)||Ttt(t)||Ott(t)||ktt()}function ktt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ott(t,e){if(t){if(typeof t=="string")return Yj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yj(t,e)}}function Ttt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ctt(t){if(Array.isArray(t))return Yj(t)}function Yj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ptt=function(e){return e},Sle={},Ele=function(e){return e===Sle},$W=function(e){return function n(){return arguments.length===0||arguments.length===1&&Ele(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Ntt=function t(e,n){return e===1?n:$W(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==Sle}).length;return s>=e?n.apply(void 0,i):t(e-s,$W(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=i.map(function(f){return Ele(f)?l.shift():f});return n.apply(void 0,Att(u).concat(l))}))})},sO=function(e){return Ntt(e.length,e)},Zj=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Itt=sO(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Rtt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Ptt;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},Xj=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Ale=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function jtt(t){var e;return t===0?e=1:e=Math.floor(new Ln(t).abs().log(10).toNumber())+1,e}function $tt(t,e,n){for(var r=new Ln(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Mtt=sO(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Ltt=sO(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Dtt=sO(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const oO={rangeStep:$tt,getDigitCount:jtt,interpolateNumber:Mtt,uninterpolateNumber:Ltt,uninterpolateTruncation:Dtt};function Jj(t){return Utt(t)||Btt(t)||kle(t)||Ftt()}function Ftt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Btt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Utt(t){if(Array.isArray(t))return Qj(t)}function Xb(t,e){return Wtt(t)||Vtt(t,e)||kle(t,e)||ztt()}function ztt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kle(t,e){if(t){if(typeof t=="string")return Qj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qj(t,e)}}function Qj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vtt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function Wtt(t){if(Array.isArray(t))return t}function Ole(t){var e=Xb(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function Tle(t,e,n){if(t.lte(0))return new Ln(0);var r=oO.getDigitCount(t.toNumber()),i=new Ln(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Ln(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new Ln(Math.ceil(l))}function Htt(t,e,n){var r=1,i=new Ln(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Ln(10).pow(oO.getDigitCount(t)-1),i=new Ln(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ln(Math.floor(t)))}else t===0?i=new Ln(Math.floor((e-1)/2)):n||(i=new Ln(Math.floor(t)));var s=Math.floor((e-1)/2),o=Rtt(Itt(function(l){return i.add(new Ln(l-s).mul(r)).toNumber()}),Zj);return o(0,e)}function Cle(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ln(0),tickMin:new Ln(0),tickMax:new Ln(0)};var a=Tle(new Ln(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Ln(0):(s=new Ln(t).add(e).div(2),s=s.sub(new Ln(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new Ln(e).sub(s).div(a).toNumber()),c=o+l+1;return c>n?Cle(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:a,tickMin:s.sub(new Ln(o).mul(a)),tickMax:s.add(new Ln(l).mul(a))})}function qtt(t){var e=Xb(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=Ole([n,r]),l=Xb(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(Jj(Zj(0,i-1).map(function(){return 1/0}))):[].concat(Jj(Zj(0,i-1).map(function(){return-1/0})),[u]);return n>r?Xj(f):f}if(c===u)return Htt(c,i,a);var d=Cle(c,u,s,a),h=d.step,p=d.tickMin,m=d.tickMax,y=oO.rangeStep(p,m.add(new Ln(.1).mul(h)),h);return n>r?Xj(y):y}function Gtt(t,e){var n=Xb(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Ole([r,i]),o=Xb(s,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),f=Tle(new Ln(c).sub(l).div(u-1),a,0),d=[].concat(Jj(oO.rangeStep(new Ln(l),new Ln(c).sub(new Ln(.99).mul(f)),f)),[c]);return r>i?Xj(d):d}var Ktt=Ale(qtt),Ytt=Ale(Gtt),Ztt="Invariant failed";function Ip(t,e){throw new Error(Ztt)}var Xtt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(this,arguments)}function Jtt(t,e){return nnt(t)||tnt(t,e)||ent(t,e)||Qtt()}function Qtt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ent(t,e){if(t){if(typeof t=="string")return MW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MW(t,e)}}function MW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tnt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function nnt(t){if(Array.isArray(t))return t}function rnt(t,e){if(t==null)return{};var n=int(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function int(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ant(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function snt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ile(r.key),r)}}function ont(t,e,n){return e&&snt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lnt(t,e,n){return e=OA(e),cnt(t,Ple()?Reflect.construct(e,n||[],OA(t).constructor):e.apply(t,n))}function cnt(t,e){if(e&&(Py(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return unt(t)}function unt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ple(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ple=function(){return!!t})()}function OA(t){return OA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},OA(t)}function fnt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e4(t,e)}function e4(t,e){return e4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},e4(t,e)}function Nle(t,e,n){return e=Ile(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ile(t){var e=dnt(t,"string");return Py(e)=="symbol"?e:e+""}function dnt(t,e){if(Py(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lO=function(t){function e(){return ant(this,e),lnt(this,e,arguments)}return fnt(e,t),ont(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,f=r.yAxis,d=rnt(r,Xtt),h=jt(d,!1);this.props.direction==="x"&&u.type!=="number"&&Ip();var p=l.map(function(m){var y=c(m,o),g=y.x,v=y.y,w=y.value,_=y.errorVal;if(!_)return null;var x=[],E,T;if(Array.isArray(_)){var O=Jtt(_,2);E=O[0],T=O[1]}else E=T=_;if(a==="vertical"){var R=u.scale,M=v+i,N=M+s,j=M-s,U=R(w-E),B=R(w+T);x.push({x1:B,y1:N,x2:B,y2:j}),x.push({x1:U,y1:M,x2:B,y2:M}),x.push({x1:U,y1:N,x2:U,y2:j})}else if(a==="horizontal"){var V=f.scale,Y=g+i,X=Y-s,z=Y+s,G=V(w-E),ae=V(w+T);x.push({x1:X,y1:ae,x2:z,y2:ae}),x.push({x1:Y,y1:G,x2:Y,y2:ae}),x.push({x1:X,y1:G,x2:z,y2:G})}return se.createElement(Rn,kA({className:"recharts-errorBar",key:"bar-".concat(x.map(function(ue){return"".concat(ue.x1,"-").concat(ue.x2,"-").concat(ue.y1,"-").concat(ue.y2)}))},h),x.map(function(ue){return se.createElement("line",kA({},ue,{key:"line-".concat(ue.x1,"-").concat(ue.x2,"-").concat(ue.y1,"-").concat(ue.y2)}))}))});return se.createElement(Rn,{className:"recharts-errorBars"},p)}}])}(se.Component);Nle(lO,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Nle(lO,"displayName","ErrorBar");function Jb(t){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(t)}function LW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LW(Object(n),!0).forEach(function(r){hnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hnt(t,e,n){return e=pnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pnt(t){var e=mnt(t,"string");return Jb(e)=="symbol"?e:e+""}function mnt(t,e){if(Jb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rle=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=xs(n,Vg);if(!s)return null;var o=Vg.defaultProps,l=o!==void 0?yh(yh({},o),s.props):{},c;return s.props&&s.props.payload?c=s.props&&s.props.payload:a==="children"?c=(r||[]).reduce(function(u,f){var d=f.item,h=f.props,p=h.sectors||h.data||[];return u.concat(p.map(function(m){return{type:s.props.iconType||d.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):c=(r||[]).map(function(u){var f=u.item,d=f.type.defaultProps,h=d!==void 0?yh(yh({},d),f.props):{},p=h.dataKey,m=h.name,y=h.legendType,g=h.hide;return{inactive:g,dataKey:p,type:l.iconType||y||"square",color:BD(f),value:m||p,payload:h}}),yh(yh(yh({},l),Vg.getWithHeight(s,i)),{},{payload:c,item:s})};function Qb(t){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(t)}function DW(t){return wnt(t)||vnt(t)||ynt(t)||gnt()}function gnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ynt(t,e){if(t){if(typeof t=="string")return t4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t4(t,e)}}function vnt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wnt(t){if(Array.isArray(t))return t4(t)}function t4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(n),!0).forEach(function(r){Hg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hg(t,e,n){return e=bnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bnt(t){var e=_nt(t,"string");return Qb(e)=="symbol"?e:e+""}function _nt(t,e){if(Qb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pa(t,e,n){return an(t)||an(e)?n:xi(e)?Ms(t,e,n):Dt(e)?e(t):n}function Ow(t,e,n,r){var i=vtt(t,function(o){return pa(o,e)});if(n==="number"){var a=i.filter(function(o){return We(o)||parseFloat(o)});return a.length?[iO(a),rO(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!an(o)}):i;return s.map(function(o){return xi(o)||o instanceof Date?o:""})}var xnt=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<o;c++){var u=c>0?i[c-1].coordinate:i[o-1].coordinate,f=i[c].coordinate,d=c>=o-1?i[0].coordinate:i[c+1].coordinate,h=void 0;if(Pa(f-u)!==Pa(d-f)){var p=[];if(Pa(d-f)===Pa(l[1]-l[0])){h=d;var m=f+l[1]-l[0];p[0]=Math.min(m,(m+u)/2),p[1]=Math.max(m,(m+u)/2)}else{h=u;var y=d+l[1]-l[0];p[0]=Math.min(f,(y+f)/2),p[1]=Math.max(f,(y+f)/2)}var g=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){s=i[c].index;break}}else{var v=Math.min(u,d),w=Math.max(u,d);if(e>(v+f)/2&&e<=(w+f)/2){s=i[c].index;break}}}else for(var _=0;_<o;_++)if(_===0&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<o-1&&e>(r[_].coordinate+r[_-1].coordinate)/2&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_===o-1&&e>(r[_].coordinate+r[_-1].coordinate)/2){s=r[_].index;break}return s},BD=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Rr(Rr({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},Snt=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,c=o.length;l<c;l++)for(var u=a[o[l]].stackGroups,f=Object.keys(u),d=0,h=f.length;d<h;d++){var p=u[f[d]],m=p.items,y=p.cateAxisId,g=m.filter(function(T){return xu(T.type).indexOf("Bar")>=0});if(g&&g.length){var v=g[0].type.defaultProps,w=v!==void 0?Rr(Rr({},v),g[0].props):g[0].props,_=w.barSize,x=w[y];s[x]||(s[x]=[]);var E=an(_)?n:_;s[x].push({item:g[0],stackList:g.slice(1),barSize:an(E)?void 0:Na(E,r,0)})}}return s},Ent=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var c=Na(n,i,0,!0),u,f=[];if(s[0].barSize===+s[0].barSize){var d=!1,h=i/l,p=s.reduce(function(_,x){return _+x.barSize||0},0);p+=(l-1)*c,p>=i&&(p-=(l-1)*c,c=0),p>=i&&h>0&&(d=!0,h*=.9,p=l*h);var m=(i-p)/2>>0,y={offset:m-c,size:0};u=s.reduce(function(_,x){var E={item:x.item,position:{offset:y.offset+y.size+c,size:d?h:x.barSize}},T=[].concat(DW(_),[E]);return y=T[T.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(O){T.push({item:O,position:y})}),T},f)}else{var g=Na(r,i,0,!0);i-2*g-(l-1)*c<=0&&(c=0);var v=(i-2*g-(l-1)*c)/l;v>1&&(v>>=0);var w=o===+o?Math.min(v,o):v;u=s.reduce(function(_,x,E){var T=[].concat(DW(_),[{item:x.item,position:{offset:g+(v+c)*E+(v-w)/2,size:w}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(O){T.push({item:O,position:T[T.length-1].position})}),T},f)}return u},Ant=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),c=Rle({children:a,legendWidth:l});if(c){var u=i||{},f=u.width,d=u.height,h=c.align,p=c.verticalAlign,m=c.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&h!=="center"&&We(e[h]))return Rr(Rr({},e),{},Hg({},h,e[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&p!=="middle"&&We(e[p]))return Rr(Rr({},e),{},Hg({},p,e[p]+(d||0)))}return e},knt=function(e,n,r){return an(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},jle=function(e,n,r,i,a){var s=n.props.children,o=So(s,lO).filter(function(c){return knt(i,a,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var f=pa(u,r);if(an(f))return c;var d=Array.isArray(f)?[iO(f),rO(f)]:[f,f],h=l.reduce(function(p,m){var y=pa(u,m,0),g=d[0]-Math.abs(Array.isArray(y)?y[0]:y),v=d[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(g,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(h[0],c[0]),Math.max(h[1],c[1])]},[1/0,-1/0])}return null},Ont=function(e,n,r,i,a){var s=n.map(function(o){return jle(e,o,r,a,i)}).filter(function(o){return!an(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},$le=function(e,n,r,i,a){var s=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&jle(e,l,c,i)||Ow(e,c,r,a)});if(r==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)o[c[u]]||(o[c[u]]=!0,l.push(c[u]));return l},[])},Mle=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Lle=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},pu=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Pa(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(f){var d=a?a.indexOf(f):f;return{coordinate:i(d)+c,value:f,offset:c}});return u.filter(function(f){return!c_(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,d){return{coordinate:i(f)+c,value:f,index:d,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,d){return{coordinate:i(f)+c,value:a?a[f]:f,index:d,offset:c}})},zP=new WeakMap,y2=function(e,n){if(typeof n!="function")return e;zP.has(e)||zP.set(e,new WeakMap);var r=zP.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Dle=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Hb(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:_A(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:kw(),realScaleType:"point"}:a==="category"?{scale:Hb(),realScaleType:"band"}:{scale:_A(),realScaleType:"linear"};if(Tp(i)){var l="scale".concat(zk(i));return{scale:(IW[l]||kw)(),realScaleType:IW[l]?l:"point"}}return Dt(i)?{scale:i}:{scale:kw(),realScaleType:"point"}},BW=1e-4,Fle=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-BW,s=Math.max(i[0],i[1])+BW,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},Tnt=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Cnt=function(e,n){if(!n||n.length!==2||!We(n[0])||!We(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!We(e[0])||e[0]<r)&&(a[0]=r),(!We(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Pnt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=c_(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},Nnt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=c_(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Int={sign:Pnt,expand:Yze,none:xy,silhouette:Zze,wiggle:Xze,positive:Nnt},Rnt=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=Int[r],s=Kze().keys(i).value(function(o,l){return+pa(o,l,0)}).order(kj).offset(a);return s(e)},jnt=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},c=o.reduce(function(f,d){var h,p=(h=d.type)!==null&&h!==void 0&&h.defaultProps?Rr(Rr({},d.type.defaultProps),d.props):d.props,m=p.stackId,y=p.hide;if(y)return f;var g=p[r],v=f[g]||{hasStack:!1,stackGroups:{}};if(xi(m)){var w=v.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(d),v.hasStack=!0,v.stackGroups[m]=w}else v.stackGroups[u_("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[d]};return Rr(Rr({},f),{},Hg({},g,v))},l),u={};return Object.keys(c).reduce(function(f,d){var h=c[d];if(h.hasStack){var p={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,y){var g=h.stackGroups[y];return Rr(Rr({},m),{},Hg({},y,{numericAxisId:r,cateAxisId:i,items:g.items,stackedData:Rnt(e,g.items,a)}))},p)}return Rr(Rr({},f),{},Hg({},d,h))},u)},Ble=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=Ktt(c,a,o);return e.domain([iO(u),rO(u)]),{niceTicks:u}}if(a&&i==="number"){var f=e.domain(),d=Ytt(f,a,o);return{niceTicks:d}}return null},UW=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=pa(s,n.dataKey,n.domain[o]);return an(l)?null:n.scale(l)-a/2+i},$nt=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Mnt=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Rr(Rr({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(xi(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},Lnt=function(e){return e.reduce(function(n,r){return[iO(r.concat([n[0]]).filter(We)),rO(r.concat([n[1]]).filter(We))]},[1/0,-1/0])},Ule=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(c,u){var f=Lnt(u.slice(n,r+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},zW=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VW=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n4=function(e,n,r){if(Dt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(We(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(zW.test(e[0])){var a=+zW.exec(e[0])[1];i[0]=n[0]-a}else Dt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(We(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(VW.test(e[1])){var s=+VW.exec(e[1])[1];i[1]=n[1]+s}else Dt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},TA=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=pD(n,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},WW=function(e,n,r){return!e||!e.length||aO(e,Ms(r,"type.defaultProps.domain"))?n:e},zle=function(e,n){var r=e.type.defaultProps?Rr(Rr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return Rr(Rr({},jt(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:BD(e),value:pa(n,i),type:l,payload:n,chartType:c,hide:u})};function e1(t){"@babel/helpers - typeof";return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e1(t)}function HW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HW(Object(n),!0).forEach(function(r){Vle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vle(t,e,n){return e=Dnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dnt(t){var e=Fnt(t,"string");return e1(e)=="symbol"?e:e+""}function Fnt(t,e){if(e1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(e1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bnt(t,e){return Wnt(t)||Vnt(t,e)||znt(t,e)||Unt()}function Unt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function znt(t,e){if(t){if(typeof t=="string")return qW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qW(t,e)}}function qW(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vnt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Wnt(t){if(Array.isArray(t))return t}var CA=Math.PI/180,Hnt=function(e){return e*180/Math.PI},er=function(e,n,r,i){return{x:e+Math.cos(-CA*i)*r,y:n+Math.sin(-CA*i)*r}},Wle=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},qnt=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,c=e.endAngle,u=Na(e.cx,s,s/2),f=Na(e.cy,o,o/2),d=Wle(s,o,r),h=Na(e.innerRadius,d,0),p=Na(e.outerRadius,d,d*.8),m=Object.keys(n);return m.reduce(function(y,g){var v=n[g],w=v.domain,_=v.reversed,x;if(an(v.range))i==="angleAxis"?x=[l,c]:i==="radiusAxis"&&(x=[h,p]),_&&(x=[x[1],x[0]]);else{x=v.range;var E=x,T=Bnt(E,2);l=T[0],c=T[1]}var O=Dle(v,a),R=O.realScaleType,M=O.scale;M.domain(w).range(x),Fle(M);var N=Ble(M,tu(tu({},v),{},{realScaleType:R})),j=tu(tu(tu({},v),N),{},{range:x,radius:p,realScaleType:R,scale:M,cx:u,cy:f,innerRadius:h,outerRadius:p,startAngle:l,endAngle:c});return tu(tu({},y),{},Vle({},g,j))},{})},Gnt=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},Knt=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=Gnt({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:o,angle:Hnt(c),angleInRadian:c}},Ynt=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},Znt=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},GW=function(e,n){var r=e.x,i=e.y,a=Knt({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,c=n.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=Ynt(n),f=u.startAngle,d=u.endAngle,h=o,p;if(f<=d){for(;h>d;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=d}else{for(;h>f;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=f}return p?tu(tu({},n),{},{radius:s,angle:Znt(h,n)}):null},Hle=function(e){return!k.isValidElement(e)&&!Dt(e)&&typeof e!="boolean"?e.className:""};function t1(t){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t1(t)}var Xnt=["offset"];function Jnt(t){return nrt(t)||trt(t)||ert(t)||Qnt()}function Qnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ert(t,e){if(t){if(typeof t=="string")return r4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r4(t,e)}}function trt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nrt(t){if(Array.isArray(t))return r4(t)}function r4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rrt(t,e){if(t==null)return{};var n=irt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function irt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function KW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(n),!0).forEach(function(r){art(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function art(t,e,n){return e=srt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function srt(t){var e=ort(t,"string");return t1(e)=="symbol"?e:e+""}function ort(t,e){if(t1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(t1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n1(){return n1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n1.apply(this,arguments)}var lrt=function(e){var n=e.value,r=e.formatter,i=an(e.children)?n:e.children;return Dt(r)?r(i):i},crt=function(e,n){var r=Pa(n-e),i=Math.min(Math.abs(n-e),360);return r*i},urt=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,c=l.cx,u=l.cy,f=l.innerRadius,d=l.outerRadius,h=l.startAngle,p=l.endAngle,m=l.clockWise,y=(f+d)/2,g=crt(h,p),v=g>=0?1:-1,w,_;i==="insideStart"?(w=h+v*s,_=m):i==="insideEnd"?(w=p-v*s,_=!m):i==="end"&&(w=p+v*s,_=m),_=g<=0?_:!_;var x=er(c,u,y,w),E=er(c,u,y,w+(_?1:-1)*359),T="M".concat(x.x,",").concat(x.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(_?0:1,`,
    `).concat(E.x,",").concat(E.y),O=an(e.id)?u_("recharts-radial-line-"):e.id;return se.createElement("text",n1({},r,{dominantBaseline:"central",className:en("recharts-radial-bar-label",o)}),se.createElement("defs",null,se.createElement("path",{id:O,d:T})),se.createElement("textPath",{xlinkHref:"#".concat(O)},n))},frt=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,f=a.endAngle,d=(u+f)/2;if(i==="outside"){var h=er(s,o,c+r,d),p=h.x,m=h.y;return{x:p,y:m,textAnchor:p>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,g=er(s,o,y,d),v=g.x,w=g.y;return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},drt=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,c=s.width,u=s.height,f=u>=0?1:-1,d=f*i,h=f>0?"end":"start",p=f>0?"start":"end",m=c>=0?1:-1,y=m*i,g=m>0?"end":"start",v=m>0?"start":"end";if(a==="top"){var w={x:o+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:h};return pi(pi({},w),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var _={x:o+c/2,y:l+u+d,textAnchor:"middle",verticalAnchor:p};return pi(pi({},_),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(a==="left"){var x={x:o-y,y:l+u/2,textAnchor:g,verticalAnchor:"middle"};return pi(pi({},x),r?{width:Math.max(x.x-r.x,0),height:u}:{})}if(a==="right"){var E={x:o+c+y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return pi(pi({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:u}:{})}var T=r?{width:c,height:u}:{};return a==="insideLeft"?pi({x:o+y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},T):a==="insideRight"?pi({x:o+c-y,y:l+u/2,textAnchor:g,verticalAnchor:"middle"},T):a==="insideTop"?pi({x:o+c/2,y:l+d,textAnchor:"middle",verticalAnchor:p},T):a==="insideBottom"?pi({x:o+c/2,y:l+u-d,textAnchor:"middle",verticalAnchor:h},T):a==="insideTopLeft"?pi({x:o+y,y:l+d,textAnchor:v,verticalAnchor:p},T):a==="insideTopRight"?pi({x:o+c-y,y:l+d,textAnchor:g,verticalAnchor:p},T):a==="insideBottomLeft"?pi({x:o+y,y:l+u-d,textAnchor:v,verticalAnchor:h},T):a==="insideBottomRight"?pi({x:o+c-y,y:l+u-d,textAnchor:g,verticalAnchor:h},T):vv(a)&&(We(a.x)||qh(a.x))&&(We(a.y)||qh(a.y))?pi({x:o+Na(a.x,c),y:l+Na(a.y,u),textAnchor:"end",verticalAnchor:"end"},T):pi({x:o+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},hrt=function(e){return"cx"in e&&We(e.cx)};function ti(t){var e=t.offset,n=e===void 0?5:e,r=rrt(t,Xnt),i=pi({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,d=i.textBreakAll;if(!a||an(o)&&an(l)&&!k.isValidElement(c)&&!Dt(c))return null;if(k.isValidElement(c))return k.cloneElement(c,i);var h;if(Dt(c)){if(h=k.createElement(c,i),k.isValidElement(h))return h}else h=lrt(i);var p=hrt(a),m=jt(i,!0);if(p&&(s==="insideStart"||s==="insideEnd"||s==="end"))return urt(i,h,m);var y=p?frt(i):drt(i);return se.createElement(Pp,n1({className:en("recharts-label",f)},m,y,{breakAll:d}),h)}ti.displayName="Label";var qle=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,f=e.x,d=e.y,h=e.top,p=e.left,m=e.width,y=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(We(m)&&We(y)){if(We(f)&&We(d))return{x:f,y:d,width:m,height:y};if(We(h)&&We(p))return{x:h,y:p,width:m,height:y}}return We(f)&&We(d)?{x:f,y:d,width:0,height:0}:We(n)&&We(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:g}:e.viewBox?e.viewBox:{}},prt=function(e,n){return e?e===!0?se.createElement(ti,{key:"label-implicit",viewBox:n}):xi(e)?se.createElement(ti,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===ti?k.cloneElement(e,{key:"label-implicit",viewBox:n}):se.createElement(ti,{key:"label-implicit",content:e,viewBox:n}):Dt(e)?se.createElement(ti,{key:"label-implicit",content:e,viewBox:n}):vv(e)?se.createElement(ti,n1({viewBox:n},e,{key:"label-implicit"})):null:null},mrt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=qle(e),s=So(i,ti).map(function(l,c){return k.cloneElement(l,{viewBox:n||a,key:"label-".concat(c)})});if(!r)return s;var o=prt(e.label,n||a);return[o].concat(Jnt(s))};ti.parseViewBox=qle;ti.renderCallByParent=mrt;function grt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var yrt=grt;const vrt=wn(yrt);function r1(t){"@babel/helpers - typeof";return r1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r1(t)}var wrt=["valueAccessor"],brt=["data","dataKey","clockWise","id","textBreakAll"];function _rt(t){return Art(t)||Ert(t)||Srt(t)||xrt()}function xrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Srt(t,e){if(t){if(typeof t=="string")return i4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i4(t,e)}}function Ert(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Art(t){if(Array.isArray(t))return i4(t)}function i4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PA(){return PA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PA.apply(this,arguments)}function YW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YW(Object(n),!0).forEach(function(r){krt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function krt(t,e,n){return e=Ort(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ort(t){var e=Trt(t,"string");return r1(e)=="symbol"?e:e+""}function Trt(t,e){if(r1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(r1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XW(t,e){if(t==null)return{};var n=Crt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Crt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Prt=function(e){return Array.isArray(e.value)?vrt(e.value):e.value};function gd(t){var e=t.valueAccessor,n=e===void 0?Prt:e,r=XW(t,wrt),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,c=XW(r,brt);return!i||!i.length?null:se.createElement(Rn,{className:"recharts-label-list"},i.map(function(u,f){var d=an(a)?n(u,f):pa(u&&u.payload,a),h=an(o)?{}:{id:"".concat(o,"-").concat(f)};return se.createElement(ti,PA({},jt(u,!0),c,h,{parentViewBox:u.parentViewBox,value:d,textBreakAll:l,viewBox:ti.parseViewBox(an(s)?u:ZW(ZW({},u),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}gd.displayName="LabelList";function Nrt(t,e){return t?t===!0?se.createElement(gd,{key:"labelList-implicit",data:e}):se.isValidElement(t)||Dt(t)?se.createElement(gd,{key:"labelList-implicit",data:e,content:t}):vv(t)?se.createElement(gd,PA({data:e},t,{key:"labelList-implicit"})):null:null}function Irt(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=So(r,gd).map(function(s,o){return k.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=Nrt(t.label,e);return[a].concat(_rt(i))}gd.renderCallByParent=Irt;function i1(t){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(t)}function a4(){return a4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a4.apply(this,arguments)}function JW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JW(Object(n),!0).forEach(function(r){Rrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rrt(t,e,n){return e=jrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jrt(t){var e=$rt(t,"string");return i1(e)=="symbol"?e:e+""}function $rt(t,e){if(i1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(i1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mrt=function(e,n){var r=Pa(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},v2=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(o?1:-1)+i,f=Math.asin(l/u)/CA,d=c?a:a+s*f,h=er(n,r,u,d),p=er(n,r,i,d),m=c?a-s*f:a,y=er(n,r,u*Math.cos(f*CA),m);return{center:h,circleTangency:p,lineTangency:y,theta:f}},Gle=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=Mrt(s,o),c=s+l,u=er(n,r,a,s),f=er(n,r,a,c),d="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=er(n,r,i,s),p=er(n,r,i,c);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(n,",").concat(r," Z");return d},Lrt=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,f=Pa(u-c),d=v2({cx:n,cy:r,radius:a,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),h=d.circleTangency,p=d.lineTangency,m=d.theta,y=v2({cx:n,cy:r,radius:a,angle:u,sign:-f,cornerRadius:s,cornerIsExternal:l}),g=y.circleTangency,v=y.lineTangency,w=y.theta,_=l?Math.abs(c-u):Math.abs(c-u)-m-w;if(_<0)return o?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Gle({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var x="M ".concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(i>0){var E=v2({cx:n,cy:r,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),T=E.circleTangency,O=E.lineTangency,R=E.theta,M=v2({cx:n,cy:r,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),N=M.circleTangency,j=M.lineTangency,U=M.theta,B=l?Math.abs(c-u):Math.abs(c-u)-R-U;if(B<0&&s===0)return"".concat(x,"L").concat(n,",").concat(r,"Z");x+="L".concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(f>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else x+="L".concat(n,",").concat(r,"Z");return x},Drt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Kle=function(e){var n=QW(QW({},Drt),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,f=n.endAngle,d=n.className;if(s<a||u===f)return null;var h=en("recharts-sector",d),p=s-a,m=Na(o,p,0,!0),y;return m>0&&Math.abs(u-f)<360?y=Lrt({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):y=Gle({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f}),se.createElement("path",a4({},jt(n,!0),{className:h,d:y,role:"img"}))};function a1(t){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(t)}function s4(){return s4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s4.apply(this,arguments)}function eH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eH(Object(n),!0).forEach(function(r){Frt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Frt(t,e,n){return e=Brt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Brt(t){var e=Urt(t,"string");return a1(e)=="symbol"?e:e+""}function Urt(t,e){if(a1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(a1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nH={curveBasisClosed:Lze,curveBasisOpen:Dze,curveBasis:Mze,curveBumpX:xze,curveBumpY:Sze,curveLinearClosed:Fze,curveLinear:Wk,curveMonotoneX:Bze,curveMonotoneY:Uze,curveNatural:zze,curveStep:Vze,curveStepAfter:Hze,curveStepBefore:Wze},w2=function(e){return e.x===+e.x&&e.y===+e.y},C0=function(e){return e.x},P0=function(e){return e.y},zrt=function(e,n){if(Dt(e))return e;var r="curve".concat(zk(e));return(r==="curveMonotone"||r==="curveBump")&&n?nH["".concat(r).concat(n==="vertical"?"Y":"X")]:nH[r]||Wk},Vrt=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=zrt(r,o),f=c?a.filter(function(m){return w2(m)}):a,d;if(Array.isArray(s)){var h=c?s.filter(function(m){return w2(m)}):s,p=f.map(function(m,y){return tH(tH({},m),{},{base:h[y]})});return o==="vertical"?d=c2().y(P0).x1(C0).x0(function(m){return m.base.x}):d=c2().x(C0).y1(P0).y0(function(m){return m.base.y}),d.defined(w2).curve(u),d(p)}return o==="vertical"&&We(s)?d=c2().y(P0).x1(C0).x0(s):We(s)?d=c2().x(C0).y1(P0).y0(s):d=zse().x(C0).y(P0),d.defined(w2).curve(u),d(f)},o4=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Vrt(e):i;return k.createElement("path",s4({},jt(e,!1),eA(e),{className:en("recharts-curve",n),d:s,ref:a}))},Yle={exports:{}},Wrt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Hrt=Wrt,qrt=Hrt;function Zle(){}function Xle(){}Xle.resetWarningCache=Zle;var Grt=function(){function t(r,i,a,s,o,l){if(l!==qrt){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Xle,resetWarningCache:Zle};return n.PropTypes=n,n};Yle.exports=Grt();var Krt=Yle.exports;const An=wn(Krt),{getOwnPropertyNames:Yrt,getOwnPropertySymbols:Zrt}=Object,{hasOwnProperty:Xrt}=Object.prototype;function VP(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function b2(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:a}=i,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);const l=t(n,r,i);return a.delete(n),a.delete(r),l}}function Jrt(t){return t!=null?t[Symbol.toStringTag]:void 0}function rH(t){return Yrt(t).concat(Zrt(t))}const Qrt=Object.hasOwn||((t,e)=>Xrt.call(t,e));function Kp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const eit="__v",tit="__o",nit="_owner",{getOwnPropertyDescriptor:iH,keys:aH}=Object;function rit(t,e){return t.byteLength===e.byteLength&&NA(new Uint8Array(t),new Uint8Array(e))}function iit(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function ait(t,e){return t.byteLength===e.byteLength&&NA(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function sit(t,e){return Kp(t.getTime(),e.getTime())}function oit(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function lit(t,e){return t===e}function sH(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.entries();let s,o,l=0;for(;(s=a.next())&&!s.done;){const c=e.entries();let u=!1,f=0;for(;(o=c.next())&&!o.done;){if(i[f]){f++;continue}const d=s.value,h=o.value;if(n.equals(d[0],h[0],l,f,t,e,n)&&n.equals(d[1],h[1],d[0],h[0],t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1;l++}return!0}const cit=Kp;function uit(t,e,n){const r=aH(t);let i=r.length;if(aH(e).length!==i)return!1;for(;i-- >0;)if(!Jle(t,e,n,r[i]))return!1;return!0}function N0(t,e,n){const r=rH(t);let i=r.length;if(rH(e).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=r[i],!Jle(t,e,n,a)||(s=iH(t,a),o=iH(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function fit(t,e){return Kp(t.valueOf(),e.valueOf())}function dit(t,e){return t.source===e.source&&t.flags===e.flags}function oH(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.values();let s,o;for(;(s=a.next())&&!s.done;){const l=e.values();let c=!1,u=0;for(;(o=l.next())&&!o.done;){if(!i[u]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function NA(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function hit(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Jle(t,e,n,r){return(r===nit||r===tit||r===eit)&&(t.$$typeof||e.$$typeof)?!0:Qrt(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const pit="[object ArrayBuffer]",mit="[object Arguments]",git="[object Boolean]",yit="[object DataView]",vit="[object Date]",wit="[object Error]",bit="[object Map]",_it="[object Number]",xit="[object Object]",Sit="[object RegExp]",Eit="[object Set]",Ait="[object String]",kit={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Oit="[object URL]",Tit=Object.prototype.toString;function Cit({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:d,areUrlsEqual:h,unknownTagComparators:p}){return function(y,g,v){if(y===g)return!0;if(y==null||g==null)return!1;const w=typeof y;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?o(y,g,v):w==="function"?a(y,g,v):!1;const _=y.constructor;if(_!==g.constructor)return!1;if(_===Object)return l(y,g,v);if(Array.isArray(y))return e(y,g,v);if(_===Date)return r(y,g,v);if(_===RegExp)return u(y,g,v);if(_===Map)return s(y,g,v);if(_===Set)return f(y,g,v);const x=Tit.call(y);if(x===vit)return r(y,g,v);if(x===Sit)return u(y,g,v);if(x===bit)return s(y,g,v);if(x===Eit)return f(y,g,v);if(x===xit)return typeof y.then!="function"&&typeof g.then!="function"&&l(y,g,v);if(x===Oit)return h(y,g,v);if(x===wit)return i(y,g,v);if(x===mit)return l(y,g,v);if(kit[x])return d(y,g,v);if(x===pit)return t(y,g,v);if(x===yit)return n(y,g,v);if(x===git||x===_it||x===Ait)return c(y,g,v);if(p){let E=p[x];if(!E){const T=Jrt(y);T&&(E=p[T])}if(E)return E(y,g,v)}return!1}}function Pit({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:rit,areArraysEqual:n?N0:iit,areDataViewsEqual:ait,areDatesEqual:sit,areErrorsEqual:oit,areFunctionsEqual:lit,areMapsEqual:n?VP(sH,N0):sH,areNumbersEqual:cit,areObjectsEqual:n?N0:uit,arePrimitiveWrappersEqual:fit,areRegExpsEqual:dit,areSetsEqual:n?VP(oH,N0):oH,areTypedArraysEqual:n?VP(NA,N0):NA,areUrlsEqual:hit,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=b2(r.areArraysEqual),a=b2(r.areMapsEqual),s=b2(r.areObjectsEqual),o=b2(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return r}function Nit(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function Iit({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(o,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(o,l,{cache:c,equals:r,meta:u,strict:i})};if(t)return function(o,l){return e(o,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,l){return e(o,l,a)}}const Rit=qd();qd({strict:!0});qd({circular:!0});qd({circular:!0,strict:!0});qd({createInternalComparator:()=>Kp});qd({strict:!0,createInternalComparator:()=>Kp});qd({circular:!0,createInternalComparator:()=>Kp});qd({circular:!0,createInternalComparator:()=>Kp,strict:!0});function qd(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,a=Pit(t),s=Cit(a),o=n?n(s):Nit(s);return Iit({circular:e,comparator:s,createState:r,equals:o,strict:i})}function jit(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function lH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):jit(i)};requestAnimationFrame(r)}function l4(t){"@babel/helpers - typeof";return l4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l4(t)}function $it(t){return Fit(t)||Dit(t)||Lit(t)||Mit()}function Mit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lit(t,e){if(t){if(typeof t=="string")return cH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cH(t,e)}}function cH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fit(t){if(Array.isArray(t))return t}function Bit(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=$it(s),l=o[0],c=o.slice(1);if(typeof l=="number"){lH(i.bind(null,c),l);return}i(l),lH(i.bind(null,c));return}l4(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function s1(t){"@babel/helpers - typeof";return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s1(t)}function uH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uH(Object(n),!0).forEach(function(r){Qle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qle(t,e,n){return e=Uit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uit(t){var e=zit(t,"string");return s1(e)==="symbol"?e:String(e)}function zit(t,e){if(s1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(s1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vit=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Wit=function(e){return e},Hit=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Tw=function(e,n){return Object.keys(n).reduce(function(r,i){return fH(fH({},r),{},Qle({},i,e(i,n[i])))},{})},dH=function(e,n,r){return e.map(function(i){return"".concat(Hit(i)," ").concat(n,"ms ").concat(r)}).join(",")};function qit(t,e){return Yit(t)||Kit(t,e)||ece(t,e)||Git()}function Git(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Yit(t){if(Array.isArray(t))return t}function Zit(t){return Qit(t)||Jit(t)||ece(t)||Xit()}function Xit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ece(t,e){if(t){if(typeof t=="string")return c4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c4(t,e)}}function Jit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qit(t){if(Array.isArray(t))return c4(t)}function c4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var IA=1e-4,tce=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},nce=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},hH=function(e,n){return function(r){var i=tce(e,n);return nce(i,r)}},eat=function(e,n){return function(r){var i=tce(e,n),a=[].concat(Zit(i.map(function(s,o){return s*o}).slice(1)),[0]);return nce(a,r)}},pH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=qit(c,4);i=u[0],a=u[1],s=u[2],o=u[3]}}}var f=hH(i,s),d=hH(a,o),h=eat(i,s),p=function(g){return g>1?1:g<0?0:g},m=function(g){for(var v=g>1?1:g,w=v,_=0;_<8;++_){var x=f(w)-v,E=h(w);if(Math.abs(x-v)<IA||E<IA)return d(w);w=p(w-x/E)}return d(w)};return m.isStepper=!1,m},tat=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(u,f,d){var h=-(u-f)*r,p=d*a,m=d+(h-p)*o/1e3,y=d*o/1e3+u;return Math.abs(y-f)<IA&&Math.abs(m)<IA?[f,0]:[y,m]};return l.isStepper=!0,l.dt=o,l},nat=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return pH(i);case"spring":return tat();default:if(i.split("(")[0]==="cubic-bezier")return pH(i)}return typeof i=="function"?i:null};function o1(t){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o1(t)}function mH(t){return aat(t)||iat(t)||rce(t)||rat()}function rat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iat(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aat(t){if(Array.isArray(t))return f4(t)}function gH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(n),!0).forEach(function(r){u4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u4(t,e,n){return e=sat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sat(t){var e=oat(t,"string");return o1(e)==="symbol"?e:String(e)}function oat(t,e){if(o1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(o1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lat(t,e){return fat(t)||uat(t,e)||rce(t,e)||cat()}function cat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rce(t,e){if(t){if(typeof t=="string")return f4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f4(t,e)}}function f4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uat(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function fat(t){if(Array.isArray(t))return t}var RA=function(e,n,r){return e+(n-e)*r},d4=function(e){var n=e.from,r=e.to;return n!==r},dat=function t(e,n,r){var i=Tw(function(a,s){if(d4(s)){var o=e(s.from,s.to,s.velocity),l=lat(o,2),c=l[0],u=l[1];return Gi(Gi({},s),{},{from:c,velocity:u})}return s},n);return r<1?Tw(function(a,s){return d4(s)?Gi(Gi({},s),{},{velocity:RA(s.velocity,i[a].velocity,r),from:RA(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const hat=function(t,e,n,r,i){var a=Vit(t,e),s=a.reduce(function(y,g){return Gi(Gi({},y),{},u4({},g,[t[g],e[g]]))},{}),o=a.reduce(function(y,g){return Gi(Gi({},y),{},u4({},g,{from:t[g],velocity:0,to:e[g]}))},{}),l=-1,c,u,f=function(){return null},d=function(){return Tw(function(g,v){return v.from},o)},h=function(){return!Object.values(o).filter(d4).length},p=function(g){c||(c=g);var v=g-c,w=v/n.dt;o=dat(n,o,w),i(Gi(Gi(Gi({},t),e),d())),c=g,h()||(l=requestAnimationFrame(f))},m=function(g){u||(u=g);var v=(g-u)/r,w=Tw(function(x,E){return RA.apply(void 0,mH(E).concat([n(v)]))},s);if(i(Gi(Gi(Gi({},t),e),w)),v<1)l=requestAnimationFrame(f);else{var _=Tw(function(x,E){return RA.apply(void 0,mH(E).concat([n(1)]))},s);i(Gi(Gi(Gi({},t),e),_))}};return f=n.isStepper?p:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}var pat=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function mat(t,e){if(t==null)return{};var n=gat(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gat(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WP(t){return bat(t)||wat(t)||vat(t)||yat()}function yat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vat(t,e){if(t){if(typeof t=="string")return h4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h4(t,e)}}function wat(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bat(t){if(Array.isArray(t))return h4(t)}function h4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ko(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yH(Object(n),!0).forEach(function(r){J0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J0(t,e,n){return e=ice(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xat(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ice(r.key),r)}}function Sat(t,e,n){return e&&xat(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ice(t){var e=Eat(t,"string");return Ny(e)==="symbol"?e:String(e)}function Eat(t,e){if(Ny(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ny(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aat(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p4(t,e)}function p4(t,e){return p4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p4(t,e)}function kat(t){var e=Oat();return function(){var r=jA(t),i;if(e){var a=jA(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return m4(this,i)}}function m4(t,e){if(e&&(Ny(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g4(t)}function g4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oat(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jA(t){return jA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jA(t)}var zu=function(t){Aat(n,t);var e=kat(n);function n(r,i){var a;_at(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,c=s.from,u=s.to,f=s.steps,d=s.children,h=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(g4(a)),a.changeStyle=a.changeStyle.bind(g4(a)),!o||h<=0)return a.state={style:{}},typeof d=="function"&&(a.state={style:u}),m4(a);if(f&&f.length)a.state={style:f[0].style};else if(c){if(typeof d=="function")return a.state={style:c},m4(a);a.state={style:l?J0({},l,c):c}}else a.state={style:{}};return a}return Sat(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,f=a.from,d=this.state.style;if(o){if(!s){var h={style:l?J0({},l,u):u};this.state&&d&&(l&&d[l]!==u||!l&&d!==u)&&this.setState(h);return}if(!(Rit(i.to,u)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||c?f:i.to;if(this.state&&d){var y={style:l?J0({},l,m):m};(l&&d[l]!==m||!l&&d!==m)&&this.setState(y)}this.runAnimation(Ko(Ko({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,d=i.onAnimationStart,h=hat(s,o,nat(c),l,this.changeStyle),p=function(){a.stopJSAnimation=h()};this.manager.start([d,u,p,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,f=c.duration,d=f===void 0?0:f,h=function(m,y,g){if(g===0)return m;var v=y.duration,w=y.easing,_=w===void 0?"ease":w,x=y.style,E=y.properties,T=y.onAnimationEnd,O=g>0?s[g-1]:y,R=E||Object.keys(x);if(typeof _=="function"||_==="spring")return[].concat(WP(m),[a.runJSAnimation.bind(a,{from:O.style,to:x,duration:v,easing:_}),v]);var M=dH(R,v,_),N=Ko(Ko(Ko({},O.style),x),{},{transition:M});return[].concat(WP(m),[N,v,T]).filter(Wit)};return this.manager.start([l].concat(WP(s.reduce(h,[u,Math.max(d,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Bit());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,d=i.steps,h=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(i);return}if(d.length>1){this.runStepAnimation(i);return}var m=o?J0({},o,l):l,y=dH(Object.keys(m),s,c);p.start([u,a,Ko(Ko({},m),{},{transition:y}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=mat(i,pat),c=k.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!o||c===0||s<=0)return a;var f=function(h){var p=h.props,m=p.style,y=m===void 0?{}:m,g=p.className,v=k.cloneElement(h,Ko(Ko({},l),{},{style:Ko(Ko({},y),u),className:g}));return v};return c===1?f(k.Children.only(a)):se.createElement("div",null,k.Children.map(a,function(d){return f(d)}))}}]),n}(k.PureComponent);zu.displayName="Animate";zu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};zu.propTypes={from:An.oneOfType([An.object,An.string]),to:An.oneOfType([An.object,An.string]),attributeName:An.string,duration:An.number,begin:An.number,easing:An.oneOfType([An.string,An.func]),steps:An.arrayOf(An.shape({duration:An.number.isRequired,style:An.object.isRequired,easing:An.oneOfType([An.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),An.func]),properties:An.arrayOf("string"),onAnimationEnd:An.func})),children:An.oneOfType([An.node,An.func]),isActive:An.bool,canBegin:An.bool,onAnimationEnd:An.func,shouldReAnimate:An.bool,onAnimationStart:An.func,onAnimationReStart:An.func};function l1(t){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l1(t)}function $A(){return $A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$A.apply(this,arguments)}function Tat(t,e){return Iat(t)||Nat(t,e)||Pat(t,e)||Cat()}function Cat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pat(t,e){if(t){if(typeof t=="string")return vH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vH(t,e)}}function vH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nat(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Iat(t){if(Array.isArray(t))return t}function wH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wH(Object(n),!0).forEach(function(r){Rat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rat(t,e,n){return e=jat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jat(t){var e=$at(t,"string");return l1(e)=="symbol"?e:e+""}function $at(t,e){if(l1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(l1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _H=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],d=0,h=4;d<h;d++)f[d]=a[d]>s?s:a[d];u="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+l*f[0],",").concat(n)),u+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*f[1])),u+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),u+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*f[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(n+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*p,`
            L `).concat(e+r,",").concat(n+i-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(n+i,`
            L `).concat(e+l*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*p," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},Mat=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(a,a+o),u=Math.max(a,a+o),f=Math.min(s,s+l),d=Math.max(s,s+l);return r>=c&&r<=u&&i>=f&&i<=d}return!1},Lat={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UD=function(e){var n=bH(bH({},Lat),e),r=k.useRef(),i=k.useState(-1),a=Tat(i,2),s=a[0],o=a[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&o(_)}catch{}},[]);var l=n.x,c=n.y,u=n.width,f=n.height,d=n.radius,h=n.className,p=n.animationEasing,m=n.animationDuration,y=n.animationBegin,g=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var w=en("recharts-rectangle",h);return v?se.createElement(zu,{canBegin:s>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:m,animationEasing:p,isActive:v},function(_){var x=_.width,E=_.height,T=_.x,O=_.y;return se.createElement(zu,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,isActive:g,easing:p},se.createElement("path",$A({},jt(n,!0),{className:w,d:_H(T,O,x,E,d),ref:r})))}):se.createElement("path",$A({},jt(n,!0),{className:w,d:_H(l,c,u,f,d)}))},Dat=["points","className","baseLinePoints","connectNulls"];function _g(){return _g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_g.apply(this,arguments)}function Fat(t,e){if(t==null)return{};var n=Bat(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bat(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xH(t){return Wat(t)||Vat(t)||zat(t)||Uat()}function Uat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zat(t,e){if(t){if(typeof t=="string")return y4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y4(t,e)}}function Vat(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wat(t){if(Array.isArray(t))return y4(t)}function y4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var SH=function(e){return e&&e.x===+e.x&&e.y===+e.y},Hat=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){SH(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),SH(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Cw=function(e,n){var r=Hat(e);n&&(r=[r.reduce(function(a,s){return[].concat(xH(a),xH(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},qat=function(e,n,r){var i=Cw(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Cw(n.reverse(),r).slice(1))},Gat=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=Fat(e,Dat);if(!n||!n.length)return null;var o=en("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",c=qat(n,i,a);return se.createElement("g",{className:o},se.createElement("path",_g({},jt(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?se.createElement("path",_g({},jt(s,!0),{fill:"none",d:Cw(n,a)})):null,l?se.createElement("path",_g({},jt(s,!0),{fill:"none",d:Cw(i,a)})):null)}var u=Cw(n,a);return se.createElement("path",_g({},jt(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function v4(){return v4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v4.apply(this,arguments)}var zD=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=en("recharts-dot",a);return n===+n&&r===+r&&i===+i?k.createElement("circle",v4({},jt(e,!1),eA(e),{className:s,cx:n,cy:r,r:i})):null};function c1(t){"@babel/helpers - typeof";return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c1(t)}var Kat=["x","y","top","left","width","height","className"];function w4(){return w4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w4.apply(this,arguments)}function EH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yat(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EH(Object(n),!0).forEach(function(r){Zat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zat(t,e,n){return e=Xat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xat(t){var e=Jat(t,"string");return c1(e)=="symbol"?e:e+""}function Jat(t,e){if(c1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(c1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qat(t,e){if(t==null)return{};var n=est(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function est(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var tst=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},nst=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,c=l===void 0?0:l,u=e.width,f=u===void 0?0:u,d=e.height,h=d===void 0?0:d,p=e.className,m=Qat(e,Kat),y=Yat({x:r,y:a,top:o,left:c,width:f,height:h},m);return!We(r)||!We(a)||!We(f)||!We(h)||!We(o)||!We(c)?null:se.createElement("path",w4({},jt(y,!0),{className:en("recharts-cross",p),d:tst(r,a,f,h,o,c)}))},rst=nO,ist=gle,ast=Cc;function sst(t,e){return t&&t.length?rst(t,ast(e),ist):void 0}var ost=sst;const lst=wn(ost);var cst=nO,ust=Cc,fst=yle;function dst(t,e){return t&&t.length?cst(t,ust(e),fst):void 0}var hst=dst;const pst=wn(hst);var mst=["cx","cy","angle","ticks","axisLine"],gst=["ticks","tick","angle","tickFormatter","stroke"];function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(this,arguments)}function AH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AH(Object(n),!0).forEach(function(r){cO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kH(t,e){if(t==null)return{};var n=yst(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yst(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vst(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sce(r.key),r)}}function wst(t,e,n){return e&&OH(t.prototype,e),n&&OH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bst(t,e,n){return e=MA(e),_st(t,ace()?Reflect.construct(e,n||[],MA(t).constructor):e.apply(t,n))}function _st(t,e){if(e&&(Iy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xst(t)}function xst(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ace(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ace=function(){return!!t})()}function MA(t){return MA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},MA(t)}function Sst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b4(t,e)}function b4(t,e){return b4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b4(t,e)}function cO(t,e,n){return e=sce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sce(t){var e=Est(t,"string");return Iy(e)=="symbol"?e:e+""}function Est(t,e){if(Iy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uO=function(t){function e(){return vst(this,e),bst(this,e,arguments)}return Sst(e,t),wst(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return er(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=lst(o,function(u){return u.coordinate||0}),c=pst(o,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,c=kH(r,mst),u=o.reduce(function(p,m){return[Math.min(p[0],m.coordinate),Math.max(p[1],m.coordinate)]},[1/0,-1/0]),f=er(i,a,u[0],s),d=er(i,a,u[1],s),h=vh(vh(vh({},jt(c,!1)),{},{fill:"none"},jt(l,!1)),{},{x1:f.x,y1:f.y,x2:d.x,y2:d.y});return se.createElement("line",Pw({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,c=i.stroke,u=kH(i,gst),f=this.getTickTextAnchor(),d=jt(u,!1),h=jt(s,!1),p=a.map(function(m,y){var g=r.getTickValueCoord(m),v=vh(vh(vh(vh({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(g.x,", ").concat(g.y,")")},d),{},{stroke:"none",fill:c},h),{},{index:y},g),{},{payload:m});return se.createElement(Rn,Pw({className:en("recharts-polar-radius-axis-tick",Hle(s)),key:"tick-".concat(m.coordinate)},Cp(r.props,m,y)),e.renderTickItem(s,v,l?l(m.value,y):m.value))});return se.createElement(Rn,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:se.createElement(Rn,{className:en("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),ti.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return se.isValidElement(r)?s=se.cloneElement(r,i):Dt(r)?s=r(i):s=se.createElement(Pp,Pw({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(k.PureComponent);cO(uO,"displayName","PolarRadiusAxis");cO(uO,"axisType","radiusAxis");cO(uO,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}function TH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TH(Object(n),!0).forEach(function(r){fO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ast(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lce(r.key),r)}}function kst(t,e,n){return e&&CH(t.prototype,e),n&&CH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ost(t,e,n){return e=LA(e),Tst(t,oce()?Reflect.construct(e,n||[],LA(t).constructor):e.apply(t,n))}function Tst(t,e){if(e&&(Ry(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cst(t)}function Cst(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oce=function(){return!!t})()}function LA(t){return LA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},LA(t)}function Pst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_4(t,e)}function _4(t,e){return _4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_4(t,e)}function fO(t,e,n){return e=lce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lce(t){var e=Nst(t,"string");return Ry(e)=="symbol"?e:e+""}function Nst(t,e){if(Ry(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ry(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ist=Math.PI/180,PH=1e-5,dO=function(t){function e(){return Ast(this,e),Ost(this,e,arguments)}return Pst(e,t),kst(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,c=i.tickSize,u=c||8,f=er(a,s,o,r.coordinate),d=er(a,s,o+(l==="inner"?-1:1)*u,r.coordinate);return{x1:f.x,y1:f.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*Ist),s;return a>PH?s=i==="outer"?"start":"end":a<-PH?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,c=wh(wh({},jt(this.props,!1)),{},{fill:"none"},jt(o,!1));if(l==="circle")return se.createElement(zD,$h({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:a,r:s}));var u=this.props.ticks,f=u.map(function(d){return er(i,a,s,d.coordinate)});return se.createElement(Gat,$h({className:"recharts-polar-angle-axis-line"},c,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,c=i.stroke,u=jt(this.props,!1),f=jt(s,!1),d=wh(wh({},u),{},{fill:"none"},jt(o,!1)),h=a.map(function(p,m){var y=r.getTickLineCoord(p),g=r.getTickTextAnchor(p),v=wh(wh(wh({textAnchor:g},u),{},{stroke:"none",fill:c},f),{},{index:m,payload:p,x:y.x2,y:y.y2});return se.createElement(Rn,$h({className:en("recharts-polar-angle-axis-tick",Hle(s)),key:"tick-".concat(p.coordinate)},Cp(r.props,p,m)),o&&se.createElement("line",$h({className:"recharts-polar-angle-axis-tick-line"},d,y)),s&&e.renderTickItem(s,v,l?l(p.value,m):p.value))});return se.createElement(Rn,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:se.createElement(Rn,{className:en("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return se.isValidElement(r)?s=se.cloneElement(r,i):Dt(r)?s=r(i):s=se.createElement(Pp,$h({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(k.PureComponent);fO(dO,"displayName","PolarAngleAxis");fO(dO,"axisType","angleAxis");fO(dO,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Rst=doe,jst=Rst(Object.getPrototypeOf,Object),$st=jst,Mst=Xu,Lst=$st,Dst=Ju,Fst="[object Object]",Bst=Function.prototype,Ust=Object.prototype,cce=Bst.toString,zst=Ust.hasOwnProperty,Vst=cce.call(Object);function Wst(t){if(!Dst(t)||Mst(t)!=Fst)return!1;var e=Lst(t);if(e===null)return!0;var n=zst.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&cce.call(n)==Vst}var Hst=Wst;const qst=wn(Hst);var Gst=Xu,Kst=Ju,Yst="[object Boolean]";function Zst(t){return t===!0||t===!1||Kst(t)&&Gst(t)==Yst}var Xst=Zst;const Jst=wn(Xst);function u1(t){"@babel/helpers - typeof";return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u1(t)}function DA(){return DA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DA.apply(this,arguments)}function Qst(t,e){return rot(t)||not(t,e)||tot(t,e)||eot()}function eot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tot(t,e){if(t){if(typeof t=="string")return NH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NH(t,e)}}function NH(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function not(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function rot(t){if(Array.isArray(t))return t}function IH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IH(Object(n),!0).forEach(function(r){iot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iot(t,e,n){return e=aot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aot(t){var e=sot(t,"string");return u1(e)=="symbol"?e:e+""}function sot(t,e){if(u1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(u1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jH=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},oot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lot=function(e){var n=RH(RH({},oot),e),r=k.useRef(),i=k.useState(-1),a=Qst(i,2),s=a[0],o=a[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&o(w)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,f=n.lowerWidth,d=n.height,h=n.className,p=n.animationEasing,m=n.animationDuration,y=n.animationBegin,g=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||d!==+d||u===0&&f===0||d===0)return null;var v=en("recharts-trapezoid",h);return g?se.createElement(zu,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:d,x:l,y:c},duration:m,animationEasing:p,isActive:g},function(w){var _=w.upperWidth,x=w.lowerWidth,E=w.height,T=w.x,O=w.y;return se.createElement(zu,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,easing:p},se.createElement("path",DA({},jt(n,!0),{className:v,d:jH(T,O,_,x,E),ref:r})))}):se.createElement("g",null,se.createElement("path",DA({},jt(n,!0),{className:v,d:jH(l,c,u,f,d)})))},cot=["option","shapeType","propTransformer","activeClassName","isActive"];function f1(t){"@babel/helpers - typeof";return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f1(t)}function uot(t,e){if(t==null)return{};var n=fot(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fot(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$H(Object(n),!0).forEach(function(r){dot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$H(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dot(t,e,n){return e=hot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hot(t){var e=pot(t,"string");return f1(e)=="symbol"?e:e+""}function pot(t,e){if(f1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(f1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mot(t,e){return FA(FA({},e),t)}function got(t,e){return t==="symbols"}function MH(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return se.createElement(UD,n);case"trapezoid":return se.createElement(lot,n);case"sector":return se.createElement(Kle,n);case"symbols":if(got(e))return se.createElement(sD,n);break;default:return null}}function yot(t){return k.isValidElement(t)?t.props:t}function uce(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?mot:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=uot(t,cot),c;if(k.isValidElement(e))c=k.cloneElement(e,FA(FA({},l),yot(e)));else if(Dt(e))c=e(l);else if(qst(e)&&!Jst(e)){var u=i(e,l);c=se.createElement(MH,{shapeType:n,elementProps:u})}else{var f=l;c=se.createElement(MH,{shapeType:n,elementProps:f})}return o?se.createElement(Rn,{className:s},c):c}function hO(t,e){return e!=null&&"trapezoids"in t.props}function pO(t,e){return e!=null&&"sectors"in t.props}function d1(t,e){return e!=null&&"points"in t.props}function vot(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function wot(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function bot(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function _ot(t,e){var n;return hO(t,e)?n=vot:pO(t,e)?n=wot:d1(t,e)&&(n=bot),n}function xot(t,e){var n;return hO(t,e)?n="trapezoids":pO(t,e)?n="sectors":d1(t,e)&&(n="points"),n}function Sot(t,e){if(hO(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(pO(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return d1(t,e)?e.payload:{}}function Eot(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=xot(n,e),a=Sot(n,e),s=r.filter(function(l,c){var u=aO(a,l),f=n.props[i].filter(function(p){var m=_ot(n,e);return m(p,e)}),d=n.props[i].indexOf(f[f.length-1]),h=c===d;return u&&h}),o=r.indexOf(s[s.length-1]);return o}var SS;function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xg.apply(this,arguments)}function LH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LH(Object(n),!0).forEach(function(r){ho(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dce(r.key),r)}}function kot(t,e,n){return e&&DH(t.prototype,e),n&&DH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oot(t,e,n){return e=BA(e),Tot(t,fce()?Reflect.construct(e,n||[],BA(t).constructor):e.apply(t,n))}function Tot(t,e){if(e&&(jy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cot(t)}function Cot(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fce=function(){return!!t})()}function BA(t){return BA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BA(t)}function Pot(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x4(t,e)}function x4(t,e){return x4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},x4(t,e)}function ho(t,e,n){return e=dce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dce(t){var e=Not(t,"string");return jy(e)=="symbol"?e:e+""}function Not(t,e){if(jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ef=function(t){function e(n){var r;return Aot(this,e),r=Oot(this,e,[n]),ho(r,"pieRef",null),ho(r,"sectorRefs",[]),ho(r,"id",u_("recharts-pie-")),ho(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Dt(i)&&i()}),ho(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Dt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Pot(e,t),kot(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,c=a.valueKey,u=jt(this.props,!1),f=jt(s,!1),d=jt(o,!1),h=s&&s.offsetRadius||20,p=r.map(function(m,y){var g=(m.startAngle+m.endAngle)/2,v=er(m.cx,m.cy,m.outerRadius+h,g),w=Yn(Yn(Yn(Yn({},u),m),{},{stroke:"none"},f),{},{index:y,textAnchor:e.getTextAnchor(v.x,m.cx)},v),_=Yn(Yn(Yn(Yn({},u),m),{},{fill:"none",stroke:m.fill},d),{},{index:y,points:[er(m.cx,m.cy,m.outerRadius,g),v]}),x=l;return an(l)&&an(c)?x="value":an(l)&&(x=c),se.createElement(Rn,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(y)},o&&e.renderLabelLineItem(o,_,"line"),e.renderLabelItem(s,w,pa(m,x)))});return se.createElement(Rn,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(u),d=l&&i.hasActiveIndex()?l:null,h=f?s:d,p=Yn(Yn({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return se.createElement(Rn,xg({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Cp(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),se.createElement(uce,xg({option:h,isActive:f,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,f=this.state,d=f.prevSectors,h=f.prevIsAnimationActive;return se.createElement(zu,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var m=p.t,y=[],g=a&&a[0],v=g.startAngle;return a.forEach(function(w,_){var x=d&&d[_],E=_>0?Ms(w,"paddingAngle",0):0;if(x){var T=Lf(x.endAngle-x.startAngle,w.endAngle-w.startAngle),O=Yn(Yn({},w),{},{startAngle:v+E,endAngle:v+T(m)+E});y.push(O),v=O.endAngle}else{var R=w.endAngle,M=w.startAngle,N=Lf(0,R-M),j=N(m),U=Yn(Yn({},w),{},{startAngle:v+E,endAngle:v+j+E});y.push(U),v=U.endAngle}}),se.createElement(Rn,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!aO(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,c=i.cx,u=i.cy,f=i.innerRadius,d=i.outerRadius,h=i.isAnimationActive,p=this.state.isAnimationFinished;if(a||!s||!s.length||!We(c)||!We(u)||!We(f)||!We(d))return null;var m=en("recharts-pie",o);return se.createElement(Rn,{tabIndex:this.props.rootTabIndex,className:m,ref:function(g){r.pieRef=g}},this.renderSectors(),l&&this.renderLabels(s),ti.renderCallByParent(this.props,null,!1),(!h||p)&&gd.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(se.isValidElement(r))return se.cloneElement(r,i);if(Dt(r))return r(i);var s=en("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return se.createElement(o4,xg({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(se.isValidElement(r))return se.cloneElement(r,i);var s=a;if(Dt(r)&&(s=r(i),se.isValidElement(s)))return s;var o=en("recharts-pie-label-text",typeof r!="boolean"&&!Dt(r)?r.className:"");return se.createElement(Pp,xg({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(k.PureComponent);SS=ef;ho(ef,"displayName","Pie");ho(ef,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Av.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ho(ef,"parseDeltaAngle",function(t,e){var n=Pa(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ho(ef,"getRealPieData",function(t){var e=t.data,n=t.children,r=jt(t,!1),i=So(n,Yk);return e&&e.length?e.map(function(a,s){return Yn(Yn(Yn({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Yn(Yn({},r),a.props)}):[]});ho(ef,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=Wle(i,a),o=r+Na(t.cx,i,i/2),l=n+Na(t.cy,a,a/2),c=Na(t.innerRadius,s,0),u=Na(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:c,outerRadius:u,maxRadius:f}});ho(ef,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Yn(Yn({},e.type.defaultProps),e.props):e.props,i=SS.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,f=r.valueKey,d=r.tooltipType,h=Math.abs(r.minAngle),p=SS.parseCoordinateOfPie(r,n),m=SS.parseDeltaAngle(s,o),y=Math.abs(m),g=c;an(c)&&an(f)?(wl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):an(c)&&(wl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=f);var v=i.filter(function(O){return pa(O,g,0)!==0}).length,w=(y>=360?v:v-1)*l,_=y-v*h-w,x=i.reduce(function(O,R){var M=pa(R,g,0);return O+(We(M)?M:0)},0),E;if(x>0){var T;E=i.map(function(O,R){var M=pa(O,g,0),N=pa(O,u,R),j=(We(M)?M:0)/x,U;R?U=T.endAngle+Pa(m)*l*(M!==0?1:0):U=s;var B=U+Pa(m)*((M!==0?h:0)+j*_),V=(U+B)/2,Y=(p.innerRadius+p.outerRadius)/2,X=[{name:N,value:M,payload:O,dataKey:g,type:d}],z=er(p.cx,p.cy,Y,V);return T=Yn(Yn(Yn({percent:j,cornerRadius:a,name:N,tooltipPayload:X,midAngle:V,middleRadius:Y,tooltipPosition:z},O),p),{},{value:pa(O,g),startAngle:U,endAngle:B,payload:O,paddingAngle:Pa(m)*l}),T})}return Yn(Yn({},p),{},{sectors:E,data:i})});var Iot=Math.ceil,Rot=Math.max;function jot(t,e,n,r){for(var i=-1,a=Rot(Iot((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var $ot=jot,Mot=Noe,FH=1/0,Lot=17976931348623157e292;function Dot(t){if(!t)return t===0?t:0;if(t=Mot(t),t===FH||t===-FH){var e=t<0?-1:1;return e*Lot}return t===t?t:0}var hce=Dot,Fot=$ot,Bot=Kk,HP=hce;function Uot(t){return function(e,n,r){return r&&typeof r!="number"&&Bot(e,n,r)&&(n=r=void 0),e=HP(e),n===void 0?(n=e,e=0):n=HP(n),r=r===void 0?e<n?1:-1:HP(r),Fot(e,n,r,t)}}var zot=Uot,Vot=zot,Wot=Vot(),Hot=Wot;const UA=wn(Hot);function h1(t){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h1(t)}function BH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BH(Object(n),!0).forEach(function(r){pce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pce(t,e,n){return e=qot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qot(t){var e=Got(t,"string");return h1(e)=="symbol"?e:e+""}function Got(t,e){if(h1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(h1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kot=["Webkit","Moz","O","ms"],Yot=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Kot.reduce(function(a,s){return UH(UH({},a),{},pce({},s+r,n))},{});return i[e]=n,i};function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function zA(){return zA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zA.apply(this,arguments)}function zH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zH(Object(n),!0).forEach(function(r){ws(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gce(r.key),r)}}function Xot(t,e,n){return e&&VH(t.prototype,e),n&&VH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jot(t,e,n){return e=VA(e),Qot(t,mce()?Reflect.construct(e,n||[],VA(t).constructor):e.apply(t,n))}function Qot(t,e){if(e&&($y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return elt(t)}function elt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mce=function(){return!!t})()}function VA(t){return VA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VA(t)}function tlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S4(t,e)}function S4(t,e){return S4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S4(t,e)}function ws(t,e,n){return e=gce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gce(t){var e=nlt(t,"string");return $y(e)=="symbol"?e:e+""}function nlt(t,e){if($y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rlt=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=kw().domain(UA(0,l)).range([a,a+s-o]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},WH=function(e){return e.changedTouches&&!!e.changedTouches.length},My=function(t){function e(n){var r;return Zot(this,e),r=Jot(this,e,[n]),ws(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ws(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ws(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),ws(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ws(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ws(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ws(r,"handleSlideDragStart",function(i){var a=WH(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return tlt(e,t),Xot(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,u=c.length-1,f=Math.min(i,a),d=Math.max(i,a),h=e.getIndexInRange(s,f),p=e.getIndexInRange(s,d);return{startIndex:h-h%l,endIndex:p===u?u:p-p%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=pa(a[r],o,r);return Dt(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,d=l.startIndex,h=l.endIndex,p=l.onChange,m=r.pageX-a;m>0?m=Math.min(m,c+u-f-o,c+u-f-s):m<0&&(m=Math.max(m,c-s,c-o));var y=this.getIndex({startX:s+m,endX:o+m});(y.startIndex!==d||y.endIndex!==h)&&p&&p(y),this.setState({startX:s+m,endX:o+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=WH(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[s],u=this.props,f=u.x,d=u.width,h=u.travellerWidth,p=u.onChange,m=u.gap,y=u.data,g={startX:this.state.startX,endX:this.state.endX},v=r.pageX-a;v>0?v=Math.min(v,f+d-h-c):v<0&&(v=Math.max(v,f-c)),g[s]=c+v;var w=this.getIndex(g),_=w.startIndex,x=w.endIndex,E=function(){var O=y.length-1;return s==="startX"&&(o>l?_%m===0:x%m===0)||o<l&&x===O||s==="endX"&&(o>l?x%m===0:_%m===0)||o>l&&x===O};this.setState(ws(ws({},s,c+v),"brushMoveStartX",r.pageX),function(){p&&E()&&p(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,c=s.endX,u=this.state[i],f=o.indexOf(u);if(f!==-1){var d=f+r;if(!(d===-1||d>=o.length)){var h=o[d];i==="startX"&&h>=c||i==="endX"&&h<=l||this.setState(ws({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,c=r.stroke;return se.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,c=r.children,u=r.padding,f=k.Children.only(c);return f?se.cloneElement(f,{x:i,y:a,width:s,height:o,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,d=l.traveller,h=l.ariaLabel,p=l.data,m=l.startIndex,y=l.endIndex,g=Math.max(r,this.props.x),v=qP(qP({},jt(this.props,!1)),{},{x:g,y:c,width:u,height:f}),w=h||"Min value: ".concat((a=p[m])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=p[y])===null||s===void 0?void 0:s.name);return se.createElement(Rn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),o.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,v))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(r,i)+c,f=Math.max(Math.abs(i-r)-c,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,f=u.startX,d=u.endX,h=5,p={pointerEvents:"none",fill:c};return se.createElement(Rn,{className:"recharts-brush-texts"},se.createElement(Pp,zA({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,d)-h,y:s+o/2},p),this.getTextOfTick(i)),se.createElement(Pp,zA({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,d)+l+h,y:s+o/2},p),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,c=r.width,u=r.height,f=r.alwaysShowText,d=this.state,h=d.startX,p=d.endX,m=d.isTextActive,y=d.isSlideMoving,g=d.isTravellerMoving,v=d.isTravellerFocused;if(!i||!i.length||!We(o)||!We(l)||!We(c)||!We(u)||c<=0||u<=0)return null;var w=en("recharts-brush",a),_=se.Children.count(s)===1,x=Yot("userSelect","none");return se.createElement(Rn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(h,p),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(p,"endX"),(m||y||g||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,c=Math.floor(a+o/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),se.createElement("line",{x1:i+1,y1:c,x2:i+s-1,y2:c,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:i+1,y1:c+2,x2:i+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return se.isValidElement(r)?a=se.cloneElement(r,i):Dt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,f=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return qP({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s},a&&a.length?rlt({data:a,width:s,x:o,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var d=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])}(k.PureComponent);ws(My,"displayName","Brush");ws(My,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ilt=hD;function alt(t,e){var n;return ilt(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var slt=alt,olt=ioe,llt=Cc,clt=slt,ult=as,flt=Kk;function dlt(t,e,n){var r=ult(t)?olt:clt;return n&&flt(t,e,n)&&(e=void 0),r(t,llt(e))}var hlt=dlt;const plt=wn(hlt);var wc=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},HH=koe;function mlt(t,e,n){e=="__proto__"&&HH?HH(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var glt=mlt,ylt=glt,vlt=Eoe,wlt=Cc;function blt(t,e){var n={};return e=wlt(e),vlt(t,function(r,i,a){ylt(n,i,e(r,i,a))}),n}var _lt=blt;const xlt=wn(_lt);function Slt(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Elt=Slt,Alt=hD;function klt(t,e){var n=!0;return Alt(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var Olt=klt,Tlt=Elt,Clt=Olt,Plt=Cc,Nlt=as,Ilt=Kk;function Rlt(t,e,n){var r=Nlt(t)?Tlt:Clt;return n&&Ilt(t,e,n)&&(e=void 0),r(t,Plt(e))}var jlt=Rlt;const yce=wn(jlt);var $lt=["x","y"];function p1(t){"@babel/helpers - typeof";return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p1(t)}function E4(){return E4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E4.apply(this,arguments)}function qH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qH(Object(n),!0).forEach(function(r){Mlt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mlt(t,e,n){return e=Llt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Llt(t){var e=Dlt(t,"string");return p1(e)=="symbol"?e:e+""}function Dlt(t,e){if(p1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(p1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Flt(t,e){if(t==null)return{};var n=Blt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Blt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ult(t,e){var n=t.x,r=t.y,i=Flt(t,$lt),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),u=parseInt(c,10),f="".concat(e.width||i.width),d=parseInt(f,10);return I0(I0(I0(I0(I0({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:d,name:e.name,radius:e.radius})}function GH(t){return se.createElement(uce,E4({shapeType:"rectangle",propTransformer:Ult,activeClassName:"recharts-active-bar"},t))}var zlt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=We(r)||l9e(r);return a?e(r,i):(a||Ip(),n)}},Vlt=["value","background"],vce;function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function Wlt(t,e){if(t==null)return{};var n=Hlt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hlt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WA.apply(this,arguments)}function KH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(n),!0).forEach(function(r){Zf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qlt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bce(r.key),r)}}function Glt(t,e,n){return e&&YH(t.prototype,e),n&&YH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Klt(t,e,n){return e=HA(e),Ylt(t,wce()?Reflect.construct(e,n||[],HA(t).constructor):e.apply(t,n))}function Ylt(t,e){if(e&&(Ly(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zlt(t)}function Zlt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wce=function(){return!!t})()}function HA(t){return HA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HA(t)}function Xlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A4(t,e)}function A4(t,e){return A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A4(t,e)}function Zf(t,e,n){return e=bce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bce(t){var e=Jlt(t,"string");return Ly(e)=="symbol"?e:e+""}function Jlt(t,e){if(Ly(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yp=function(t){function e(){var n;qlt(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Klt(this,e,[].concat(i)),Zf(n,"state",{isAnimationFinished:!1}),Zf(n,"id",u_("recharts-bar-")),Zf(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Zf(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Xlt(e,t),Glt(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,c=a.activeBar,u=jt(this.props,!1);return r&&r.map(function(f,d){var h=d===l,p=h?c:s,m=Gr(Gr(Gr({},u),f),{},{isActive:h,option:p,index:d,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return se.createElement(Rn,WA({className:"recharts-bar-rectangle"},Cp(i.props,f,d),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(d)}),se.createElement(GH,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,d=this.state.prevData;return se.createElement(zu,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=a.map(function(y,g){var v=d&&d[g];if(v){var w=Lf(v.x,y.x),_=Lf(v.y,y.y),x=Lf(v.width,y.width),E=Lf(v.height,y.height);return Gr(Gr({},y),{},{x:w(p),y:_(p),width:x(p),height:E(p)})}if(s==="horizontal"){var T=Lf(0,y.height),O=T(p);return Gr(Gr({},y),{},{y:y.y+y.height-O,height:O})}var R=Lf(0,y.width),M=R(p);return Gr(Gr({},y),{},{width:M})});return se.createElement(Rn,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!aO(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=jt(this.props.background,!1);return a.map(function(c,u){c.value;var f=c.background,d=Wlt(c,Vlt);if(!f)return null;var h=Gr(Gr(Gr(Gr(Gr({},d),{},{fill:"#eee"},f),l),Cp(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:u,className:"recharts-bar-background-rectangle"});return se.createElement(GH,WA({key:"background-bar-".concat(u),option:r.props.background,isActive:u===o},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,f=So(u,lO);if(!f)return null;var d=c==="vertical"?s[0].height/2:s[0].width/2,h=function(y,g){var v=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:v,errorVal:pa(y,g)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return se.createElement(Rn,p,f.map(function(m){return se.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,offset:d,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,c=r.left,u=r.top,f=r.width,d=r.height,h=r.isAnimationActive,p=r.background,m=r.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,g=en("recharts-bar",s),v=o&&o.allowDataOverflow,w=l&&l.allowDataOverflow,_=v||w,x=an(m)?this.id:m;return se.createElement(Rn,{className:g},v||w?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(x)},se.createElement("rect",{x:v?c:c-f/2,y:w?u:u-d/2,width:v?f:f*2,height:w?d:d*2}))):null,se.createElement(Rn,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(x,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,x),(!h||y)&&gd.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(k.PureComponent);vce=Yp;Zf(Yp,"displayName","Bar");Zf(Yp,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Av.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Zf(Yp,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,f=t.displayedData,d=t.offset,h=Tnt(r,n);if(!h)return null;var p=e.layout,m=n.type.defaultProps,y=m!==void 0?Gr(Gr({},m),n.props):n.props,g=y.dataKey,v=y.children,w=y.minPointSize,_=p==="horizontal"?s:a,x=c?_.scale.domain():null,E=$nt({numericAxis:_}),T=So(v,Yk),O=f.map(function(R,M){var N,j,U,B,V,Y;c?N=Cnt(c[u+M],x):(N=pa(R,g),Array.isArray(N)||(N=[E,N]));var X=zlt(w,vce.defaultProps.minPointSize)(N[1],M);if(p==="horizontal"){var z,G=[s.scale(N[0]),s.scale(N[1])],ae=G[0],ue=G[1];j=UW({axis:a,ticks:o,bandSize:i,offset:h.offset,entry:R,index:M}),U=(z=ue??ae)!==null&&z!==void 0?z:void 0,B=h.size;var L=ae-ue;if(V=Number.isNaN(L)?0:L,Y={x:j,y:s.y,width:B,height:s.height},Math.abs(X)>0&&Math.abs(V)<Math.abs(X)){var K=Pa(V||X)*(Math.abs(X)-Math.abs(V));U-=K,V+=K}}else{var Q=[a.scale(N[0]),a.scale(N[1])],re=Q[0],F=Q[1];if(j=re,U=UW({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:R,index:M}),B=F-re,V=h.size,Y={x:a.x,y:U,width:a.width,height:V},Math.abs(X)>0&&Math.abs(B)<Math.abs(X)){var $=Pa(B||X)*(Math.abs(X)-Math.abs(B));B+=$}}return Gr(Gr(Gr({},R),{},{x:j,y:U,width:B,height:V,value:c?N:N[1],payload:R,background:Y},T&&T[M]&&T[M].props),{},{tooltipPayload:[zle(n,R)],tooltipPosition:{x:j+B/2,y:U+V/2}})});return Gr({data:O,layout:p},d)});function m1(t){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m1(t)}function Qlt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_ce(r.key),r)}}function ect(t,e,n){return e&&ZH(t.prototype,e),n&&ZH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function XH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XH(Object(n),!0).forEach(function(r){mO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mO(t,e,n){return e=_ce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ce(t){var e=tct(t,"string");return m1(e)=="symbol"?e:e+""}function tct(t,e){if(m1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(m1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nct=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,c=e.children,u=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},d=!!xs(c,Yp);return u.reduce(function(h,p){var m=n[p],y=m.orientation,g=m.domain,v=m.padding,w=v===void 0?{}:v,_=m.mirror,x=m.reversed,E="".concat(y).concat(_?"Mirror":""),T,O,R,M,N;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var j=g[1]-g[0],U=1/0,B=m.categoricalDomain.sort(f9e);if(B.forEach(function(Q,re){re>0&&(U=Math.min((Q||0)-(B[re-1]||0),U))}),Number.isFinite(U)){var V=U/j,Y=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(T=V*Y/2),m.padding==="no-gap"){var X=Na(e.barCategoryGap,V*Y),z=V*Y/2;T=z-X-(z-X)/Y*X}}}i==="xAxis"?O=[r.left+(w.left||0)+(T||0),r.left+r.width-(w.right||0)-(T||0)]:i==="yAxis"?O=l==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(T||0),r.top+r.height-(w.bottom||0)-(T||0)]:O=m.range,x&&(O=[O[1],O[0]]);var G=Dle(m,a,d),ae=G.scale,ue=G.realScaleType;ae.domain(g).range(O),Fle(ae);var L=Ble(ae,ll(ll({},m),{},{realScaleType:ue}));i==="xAxis"?(N=y==="top"&&!_||y==="bottom"&&_,R=r.left,M=f[E]-N*m.height):i==="yAxis"&&(N=y==="left"&&!_||y==="right"&&_,R=f[E]-N*m.width,M=r.top);var K=ll(ll(ll({},m),L),{},{realScaleType:ue,x:R,y:M,scale:ae,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return K.bandSize=TA(K,L),!m.hide&&i==="xAxis"?f[E]+=(N?-1:1)*K.height:m.hide||(f[E]+=(N?-1:1)*K.width),ll(ll({},h),{},mO({},p,K))},{})},xce=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},rct=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return xce({x:n,y:r},{x:i,y:a})},Sce=function(){function t(e){Qlt(this,t),this.scale=e}return ect(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();mO(Sce,"EPS",1e-4);var VD=function(e){var n=Object.keys(e).reduce(function(r,i){return ll(ll({},r),{},mO({},i,Sce.create(e[i])))},{});return ll(ll({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return xlt(i,function(l,c){return n[c].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return yce(i,function(a,s){return n[s].isInRange(a)})}})};function ict(t){return(t%180+180)%180}var act=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ict(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},sct=Cc,oct=f_,lct=qk;function cct(t){return function(e,n,r){var i=Object(e);if(!oct(e)){var a=sct(n);e=lct(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var uct=cct,fct=hce;function dct(t){var e=fct(t),n=e%1;return e===e?n?e-n:e:0}var hct=dct,pct=voe,mct=Cc,gct=hct,yct=Math.max;function vct(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:gct(n);return i<0&&(i=yct(r+i,0)),pct(t,mct(e),i)}var wct=vct,bct=uct,_ct=wct,xct=bct(_ct),Sct=xct;const Ect=wn(Sct);var Act=pUe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),WD=k.createContext(void 0),HD=k.createContext(void 0),Ece=k.createContext(void 0),Ace=k.createContext({}),kce=k.createContext(void 0),Oce=k.createContext(0),Tce=k.createContext(0),JH=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,c=e.height,u=Act(a);return se.createElement(WD.Provider,{value:r},se.createElement(HD.Provider,{value:i},se.createElement(Ace.Provider,{value:a},se.createElement(Ece.Provider,{value:u},se.createElement(kce.Provider,{value:s},se.createElement(Oce.Provider,{value:c},se.createElement(Tce.Provider,{value:l},o)))))))},kct=function(){return k.useContext(kce)},Cce=function(e){var n=k.useContext(WD);n==null&&Ip();var r=n[e];return r==null&&Ip(),r},Oct=function(){var e=k.useContext(WD);return Vf(e)},Tct=function(){var e=k.useContext(HD),n=Ect(e,function(r){return yce(r.domain,Number.isFinite)});return n||Vf(e)},Pce=function(e){var n=k.useContext(HD);n==null&&Ip();var r=n[e];return r==null&&Ip(),r},Cct=function(){var e=k.useContext(Ece);return e},Pct=function(){return k.useContext(Ace)},qD=function(){return k.useContext(Tce)},GD=function(){return k.useContext(Oce)};function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function Nct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ict(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ice(r.key),r)}}function Rct(t,e,n){return e&&Ict(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jct(t,e,n){return e=qA(e),$ct(t,Nce()?Reflect.construct(e,n||[],qA(t).constructor):e.apply(t,n))}function $ct(t,e){if(e&&(Dy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mct(t)}function Mct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nce=function(){return!!t})()}function qA(t){return qA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qA(t)}function Lct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k4(t,e)}function k4(t,e){return k4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k4(t,e)}function QH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QH(Object(n),!0).forEach(function(r){KD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KD(t,e,n){return e=Ice(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ice(t){var e=Dct(t,"string");return Dy(e)=="symbol"?e:e+""}function Dct(t,e){if(Dy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fct(t,e){return Vct(t)||zct(t,e)||Uct(t,e)||Bct()}function Bct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uct(t,e){if(t){if(typeof t=="string")return tq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tq(t,e)}}function tq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zct(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Vct(t){if(Array.isArray(t))return t}function O4(){return O4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O4.apply(this,arguments)}var Wct=function(e,n){var r;return se.isValidElement(e)?r=se.cloneElement(e,n):Dt(e)?r=e(n):r=se.createElement("line",O4({},n,{className:"recharts-reference-line-line"})),r},Hct=function(e,n,r,i,a,s,o,l,c){var u=a.x,f=a.y,d=a.width,h=a.height;if(r){var p=c.y,m=e.y.apply(p,{position:s});if(wc(c,"discard")&&!e.y.isInRange(m))return null;var y=[{x:u+d,y:m},{x:u,y:m}];return l==="left"?y.reverse():y}if(n){var g=c.x,v=e.x.apply(g,{position:s});if(wc(c,"discard")&&!e.x.isInRange(v))return null;var w=[{x:v,y:f+h},{x:v,y:f}];return o==="top"?w.reverse():w}if(i){var _=c.segment,x=_.map(function(E){return e.apply(E,{position:s})});return wc(c,"discard")&&plt(x,function(E){return!e.isInRange(E)})?null:x}return null};function qct(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,c=kct(),u=Cce(i),f=Pce(a),d=Cct();if(!c||!d)return null;wl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=VD({x:u.scale,y:f.scale}),p=xi(e),m=xi(n),y=r&&r.length===2,g=Hct(h,p,m,y,d,t.position,u.orientation,f.orientation,t);if(!g)return null;var v=Fct(g,2),w=v[0],_=w.x,x=w.y,E=v[1],T=E.x,O=E.y,R=wc(t,"hidden")?"url(#".concat(c,")"):void 0,M=eq(eq({clipPath:R},jt(t,!0)),{},{x1:_,y1:x,x2:T,y2:O});return se.createElement(Rn,{className:en("recharts-reference-line",o)},Wct(s,M),ti.renderCallByParent(t,rct({x1:_,y1:x,x2:T,y2:O})))}var YD=function(t){function e(){return Nct(this,e),jct(this,e,arguments)}return Lct(e,t),Rct(e,[{key:"render",value:function(){return se.createElement(qct,this.props)}}])}(se.Component);KD(YD,"displayName","ReferenceLine");KD(YD,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function T4(){return T4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T4.apply(this,arguments)}function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(n),!0).forEach(function(r){gO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jce(r.key),r)}}function Yct(t,e,n){return e&&Kct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zct(t,e,n){return e=GA(e),Xct(t,Rce()?Reflect.construct(e,n||[],GA(t).constructor):e.apply(t,n))}function Xct(t,e){if(e&&(Fy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jct(t)}function Jct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rce=function(){return!!t})()}function GA(t){return GA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GA(t)}function Qct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C4(t,e)}function C4(t,e){return C4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C4(t,e)}function gO(t,e,n){return e=jce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jce(t){var e=eut(t,"string");return Fy(e)=="symbol"?e:e+""}function eut(t,e){if(Fy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tut=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=VD({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return wc(e,"discard")&&!s.isInRange(o)?null:o},yO=function(t){function e(){return Gct(this,e),Zct(this,e,arguments)}return Qct(e,t),Yct(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,c=xi(i),u=xi(a);if(wl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=tut(this.props);if(!f)return null;var d=f.x,h=f.y,p=this.props,m=p.shape,y=p.className,g=wc(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=rq(rq({clipPath:g},jt(this.props,!0)),{},{cx:d,cy:h});return se.createElement(Rn,{className:en("recharts-reference-dot",y)},e.renderDot(m,v),ti.renderCallByParent(this.props,{x:d-s,y:h-s,width:2*s,height:2*s}))}}])}(se.Component);gO(yO,"displayName","ReferenceDot");gO(yO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gO(yO,"renderDot",function(t,e){var n;return se.isValidElement(t)?n=se.cloneElement(t,e):Dt(t)?n=t(e):n=se.createElement(zD,T4({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function P4(){return P4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P4.apply(this,arguments)}function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iq(Object(n),!0).forEach(function(r){vO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mce(r.key),r)}}function iut(t,e,n){return e&&rut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aut(t,e,n){return e=KA(e),sut(t,$ce()?Reflect.construct(e,n||[],KA(t).constructor):e.apply(t,n))}function sut(t,e){if(e&&(By(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return out(t)}function out(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $ce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($ce=function(){return!!t})()}function KA(t){return KA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KA(t)}function lut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N4(t,e)}function N4(t,e){return N4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N4(t,e)}function vO(t,e,n){return e=Mce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mce(t){var e=cut(t,"string");return By(e)=="symbol"?e:e+""}function cut(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uut=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,c=a.y2,u=a.xAxis,f=a.yAxis;if(!u||!f)return null;var d=VD({x:u.scale,y:f.scale}),h={x:e?d.x.apply(s,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(l,{position:"start"}):d.y.rangeMin},p={x:n?d.x.apply(o,{position:"end"}):d.x.rangeMax,y:i?d.y.apply(c,{position:"end"}):d.y.rangeMax};return wc(a,"discard")&&(!d.isInRange(h)||!d.isInRange(p))?null:xce(h,p)},wO=function(t){function e(){return nut(this,e),aut(this,e,arguments)}return lut(e,t),iut(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;wl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=xi(i),d=xi(a),h=xi(s),p=xi(o),m=this.props.shape;if(!f&&!d&&!h&&!p&&!m)return null;var y=uut(f,d,h,p,this.props);if(!y&&!m)return null;var g=wc(this.props,"hidden")?"url(#".concat(u,")"):void 0;return se.createElement(Rn,{className:en("recharts-reference-area",l)},e.renderRect(m,aq(aq({clipPath:g},jt(this.props,!0)),y)),ti.renderCallByParent(this.props,y))}}])}(se.Component);vO(wO,"displayName","ReferenceArea");vO(wO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});vO(wO,"renderRect",function(t,e){var n;return se.isValidElement(t)?n=se.cloneElement(t,e):Dt(t)?n=t(e):n=se.createElement(UD,P4({},e,{className:"recharts-reference-area-rect"})),n});function Lce(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function fut(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return act(r,n)}function dut(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function YA(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function hut(t,e){return Lce(t,e+1)}function put(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,c=1,u=s,f=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:Lce(r,c)};var m=l,y,g=function(){return y===void 0&&(y=n(p,m)),y},v=p.coordinate,w=l===0||YA(t,v,g,u,o);w||(l=0,u=s,c+=1),w&&(u=v+t*(g()/2+i),l+=c)},d;c<=a.length;)if(d=f(),d)return d.v;return[]}function g1(t){"@babel/helpers - typeof";return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g1(t)}function sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sq(Object(n),!0).forEach(function(r){mut(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mut(t,e,n){return e=gut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gut(t){var e=yut(t,"string");return g1(e)=="symbol"?e:e+""}function yut(t,e){if(g1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(g1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vut(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,c=function(d){var h=a[d],p,m=function(){return p===void 0&&(p=n(h,d)),p};if(d===s-1){var y=t*(h.coordinate+t*m()/2-l);a[d]=h=ca(ca({},h),{},{tickCoord:y>0?h.coordinate-y*t:h.coordinate})}else a[d]=h=ca(ca({},h),{},{tickCoord:h.coordinate});var g=YA(t,h.tickCoord,m,o,l);g&&(l=h.tickCoord-t*(m()/2+i),a[d]=ca(ca({},h),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return a}function wut(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,c=e.end;if(a){var u=r[o-1],f=n(u,o-1),d=t*(u.coordinate+t*f/2-c);s[o-1]=u=ca(ca({},u),{},{tickCoord:d>0?u.coordinate-d*t:u.coordinate});var h=YA(t,u.tickCoord,function(){return f},l,c);h&&(c=u.tickCoord-t*(f/2+i),s[o-1]=ca(ca({},u),{},{isShow:!0}))}for(var p=a?o-1:o,m=function(v){var w=s[v],_,x=function(){return _===void 0&&(_=n(w,v)),_};if(v===0){var E=t*(w.coordinate-t*x()/2-l);s[v]=w=ca(ca({},w),{},{tickCoord:E<0?w.coordinate-E*t:w.coordinate})}else s[v]=w=ca(ca({},w),{},{tickCoord:w.coordinate});var T=YA(t,w.tickCoord,x,l,c);T&&(l=w.tickCoord+t*(x()/2+i),s[v]=ca(ca({},w),{},{isShow:!0}))},y=0;y<p;y++)m(y);return s}function ZD(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(We(l)||Av.isSsr)return hut(i,typeof l=="number"&&We(l)?l:0);var d=[],h=o==="top"||o==="bottom"?"width":"height",p=u&&h==="width"?Aw(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(w,_){var x=Dt(c)?c(w.value,_):w.value;return h==="width"?fut(Aw(x,{fontSize:e,letterSpacing:n}),p,f):Aw(x,{fontSize:e,letterSpacing:n})[h]},y=i.length>=2?Pa(i[1].coordinate-i[0].coordinate):1,g=dut(a,y,h);return l==="equidistantPreserveStart"?put(y,g,m,i,s):(l==="preserveStart"||l==="preserveStartEnd"?d=wut(y,g,m,i,s,l==="preserveStartEnd"):d=vut(y,g,m,i,s),d.filter(function(v){return v.isShow}))}var but=["viewBox"],_ut=["viewBox"],xut=["ticks"];function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sg.apply(this,arguments)}function oq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oq(Object(n),!0).forEach(function(r){XD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GP(t,e){if(t==null)return{};var n=Sut(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sut(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Eut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fce(r.key),r)}}function Aut(t,e,n){return e&&lq(t.prototype,e),n&&lq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kut(t,e,n){return e=ZA(e),Out(t,Dce()?Reflect.construct(e,n||[],ZA(t).constructor):e.apply(t,n))}function Out(t,e){if(e&&(Uy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tut(t)}function Tut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dce=function(){return!!t})()}function ZA(t){return ZA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZA(t)}function Cut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I4(t,e)}function I4(t,e){return I4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I4(t,e)}function XD(t,e,n){return e=Fce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fce(t){var e=Put(t,"string");return Uy(e)=="symbol"?e:e+""}function Put(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cv=function(t){function e(n){var r;return Eut(this,e),r=kut(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Cut(e,t),Aut(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=GP(r,but),o=this.props,l=o.viewBox,c=GP(o,_ut);return!zg(a,l)||!zg(s,c)||!zg(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,d=i.tickMargin,h,p,m,y,g,v,w=f?-1:1,_=r.tickSize||u,x=We(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":h=p=r.coordinate,y=s+ +!f*l,m=y-w*_,v=m-w*d,g=x;break;case"left":m=y=r.coordinate,p=a+ +!f*o,h=p-w*_,g=h-w*d,v=x;break;case"right":m=y=r.coordinate,p=a+ +f*o,h=p+w*_,g=h+w*d,v=x;break;default:h=p=r.coordinate,y=s+ +f*l,m=y+w*_,v=m+w*d,g=x;break}return{line:{x1:h,y1:m,x2:p,y2:y},tick:{x:g,y:v}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,f=di(di(di({},jt(this.props,!1)),jt(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var d=+(l==="top"&&!c||l==="bottom"&&c);f=di(di({},f),{},{x1:i,y1:a+d*o,x2:i+s,y2:a+d*o})}else{var h=+(l==="left"&&!c||l==="right"&&c);f=di(di({},f),{},{x1:i+h*s,y1:a,x2:i+h*s,y2:a+o})}return se.createElement("line",Sg({},f,{className:en("recharts-cartesian-axis-line",Ms(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,c=o.stroke,u=o.tick,f=o.tickFormatter,d=o.unit,h=ZD(di(di({},this.props),{},{ticks:r}),i,a),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),y=jt(this.props,!1),g=jt(u,!1),v=di(di({},y),{},{fill:"none"},jt(l,!1)),w=h.map(function(_,x){var E=s.getTickLineCoord(_),T=E.line,O=E.tick,R=di(di(di(di({textAnchor:p,verticalAnchor:m},y),{},{stroke:"none",fill:c},g),O),{},{index:x,payload:_,visibleTicksCount:h.length,tickFormatter:f});return se.createElement(Rn,Sg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Cp(s.props,_,x)),l&&se.createElement("line",Sg({},v,T,{className:en("recharts-cartesian-axis-tick-line",Ms(l,"className"))})),u&&e.renderTickItem(u,R,"".concat(Dt(f)?f(_.value,x):_.value).concat(d||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,d=f.ticks,h=GP(f,xut),p=d;return Dt(l)&&(p=d&&d.length>0?l(this.props):l(h)),s<=0||o<=0||!p||!p.length?null:se.createElement(Rn,{className:en("recharts-cartesian-axis",c),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),ti.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=en(i.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(r)?s=se.cloneElement(r,di(di({},i),{},{className:o})):Dt(r)?s=r(di(di({},i),{},{className:o})):s=se.createElement(Pp,Sg({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(k.Component);XD(Cv,"displayName","CartesianAxis");XD(Cv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Nut=["x1","y1","x2","y2","key"],Iut=["offset"];function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function cq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cq(Object(n),!0).forEach(function(r){Rut(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rut(t,e,n){return e=jut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jut(t){var e=$ut(t,"string");return Rp(e)=="symbol"?e:e+""}function $ut(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yh.apply(this,arguments)}function uq(t,e){if(t==null)return{};var n=Mut(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mut(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Lut=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return se.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Bce(t,e){var n;if(se.isValidElement(t))n=se.cloneElement(t,e);else if(Dt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=uq(e,Nut),c=jt(l,!1);c.offset;var u=uq(c,Iut);n=se.createElement("line",Yh({},u,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function Dut(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=da(da({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return Bce(i,c)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Fut(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=da(da({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return Bce(i,c)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function But(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=o.map(function(d){return Math.round(d+i-i)}).sort(function(d,h){return d-h});i!==u[0]&&u.unshift(0);var f=u.map(function(d,h){var p=!u[h+1],m=p?i+s-d:u[h+1]-d;if(m<=0)return null;var y=h%e.length;return se.createElement("rect",{key:"react-".concat(h),y:d,x:r,height:m,width:a,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Uut(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(d){return Math.round(d+a-a)}).sort(function(d,h){return d-h});a!==u[0]&&u.unshift(0);var f=u.map(function(d,h){var p=!u[h+1],m=p?a+o-d:u[h+1]-d;if(m<=0)return null;var y=h%r.length;return se.createElement("rect",{key:"react-".concat(h),x:d,y:s,width:m,height:l,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var zut=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return Lle(ZD(da(da(da({},Cv.defaultProps),r),{},{ticks:pu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},Vut=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return Lle(ZD(da(da(da({},Cv.defaultProps),r),{},{ticks:pu(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Pm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Uce(t){var e,n,r,i,a,s,o=qD(),l=GD(),c=Pct(),u=da(da({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Pm.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Pm.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Pm.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Pm.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Pm.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Pm.verticalFill,x:We(t.x)?t.x:c.left,y:We(t.y)?t.y:c.top,width:We(t.width)?t.width:c.width,height:We(t.height)?t.height:c.height}),f=u.x,d=u.y,h=u.width,p=u.height,m=u.syncWithTicks,y=u.horizontalValues,g=u.verticalValues,v=Oct(),w=Tct();if(!We(h)||h<=0||!We(p)||p<=0||!We(f)||f!==+f||!We(d)||d!==+d)return null;var _=u.verticalCoordinatesGenerator||zut,x=u.horizontalCoordinatesGenerator||Vut,E=u.horizontalPoints,T=u.verticalPoints;if((!E||!E.length)&&Dt(x)){var O=y&&y.length,R=x({yAxis:w?da(da({},w),{},{ticks:O?y:w.ticks}):void 0,width:o,height:l,offset:c},O?!0:m);wl(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Rp(R),"]")),Array.isArray(R)&&(E=R)}if((!T||!T.length)&&Dt(_)){var M=g&&g.length,N=_({xAxis:v?da(da({},v),{},{ticks:M?g:v.ticks}):void 0,width:o,height:l,offset:c},M?!0:m);wl(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Rp(N),"]")),Array.isArray(N)&&(T=N)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(Lut,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),se.createElement(Dut,Yh({},u,{offset:c,horizontalPoints:E,xAxis:v,yAxis:w})),se.createElement(Fut,Yh({},u,{offset:c,verticalPoints:T,xAxis:v,yAxis:w})),se.createElement(But,Yh({},u,{horizontalPoints:E})),se.createElement(Uut,Yh({},u,{verticalPoints:T})))}Uce.displayName="CartesianGrid";function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function Wut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wce(r.key),r)}}function qut(t,e,n){return e&&Hut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gut(t,e,n){return e=XA(e),Kut(t,zce()?Reflect.construct(e,n||[],XA(t).constructor):e.apply(t,n))}function Kut(t,e){if(e&&(zy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yut(t)}function Yut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zce=function(){return!!t})()}function XA(t){return XA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XA(t)}function Zut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R4(t,e)}function R4(t,e){return R4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R4(t,e)}function Vce(t,e,n){return e=Wce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wce(t){var e=Xut(t,"string");return zy(e)=="symbol"?e:e+""}function Xut(t,e){if(zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function j4(){return j4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j4.apply(this,arguments)}function Jut(t){var e=t.xAxisId,n=qD(),r=GD(),i=Cce(e);return i==null?null:k.createElement(Cv,j4({},i,{className:en("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return pu(s,!0)}}))}var bO=function(t){function e(){return Wut(this,e),Gut(this,e,arguments)}return Zut(e,t),qut(e,[{key:"render",value:function(){return k.createElement(Jut,this.props)}}])}(k.Component);Vce(bO,"displayName","XAxis");Vce(bO,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(t)}function Qut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gce(r.key),r)}}function tft(t,e,n){return e&&eft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nft(t,e,n){return e=JA(e),rft(t,Hce()?Reflect.construct(e,n||[],JA(t).constructor):e.apply(t,n))}function rft(t,e){if(e&&(Vy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ift(t)}function ift(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hce=function(){return!!t})()}function JA(t){return JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},JA(t)}function aft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$4(t,e)}function $4(t,e){return $4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$4(t,e)}function qce(t,e,n){return e=Gce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gce(t){var e=sft(t,"string");return Vy(e)=="symbol"?e:e+""}function sft(t,e){if(Vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function M4(){return M4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M4.apply(this,arguments)}var oft=function(e){var n=e.yAxisId,r=qD(),i=GD(),a=Pce(n);return a==null?null:k.createElement(Cv,M4({},a,{className:en("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return pu(o,!0)}}))},_O=function(t){function e(){return Qut(this,e),nft(this,e,arguments)}return aft(e,t),tft(e,[{key:"render",value:function(){return k.createElement(oft,this.props)}}])}(k.Component);qce(_O,"displayName","YAxis");qce(_O,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function fq(t){return fft(t)||uft(t)||cft(t)||lft()}function lft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cft(t,e){if(t){if(typeof t=="string")return L4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L4(t,e)}}function uft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fft(t){if(Array.isArray(t))return L4(t)}function L4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var D4=function(e,n,r,i,a){var s=So(e,YD),o=So(e,yO),l=[].concat(fq(s),fq(o)),c=So(e,wO),u="".concat(i,"Id"),f=i[0],d=n;if(l.length&&(d=l.reduce(function(m,y){if(y.props[u]===r&&wc(y.props,"extendDomain")&&We(y.props[f])){var g=y.props[f];return[Math.min(m[0],g),Math.max(m[1],g)]}return m},d)),c.length){var h="".concat(f,"1"),p="".concat(f,"2");d=c.reduce(function(m,y){if(y.props[u]===r&&wc(y.props,"extendDomain")&&We(y.props[h])&&We(y.props[p])){var g=y.props[h],v=y.props[p];return[Math.min(m[0],g,v),Math.max(m[1],g,v)]}return m},d)}return a&&a.length&&(d=a.reduce(function(m,y){return We(y)?[Math.min(m[0],y),Math.max(m[1],y)]:m},d)),d},KP=new fCe,YP="recharts.syncMouseEvents";function y1(t){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y1(t)}function dft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kce(r.key),r)}}function pft(t,e,n){return e&&hft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZP(t,e,n){return e=Kce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kce(t){var e=mft(t,"string");return y1(e)=="symbol"?e:e+""}function mft(t,e){if(y1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(y1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gft=function(){function t(){dft(this,t),ZP(this,"activeIndex",0),ZP(this,"coordinateList",[]),ZP(this,"layout","horizontal")}return pft(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,c=l===void 0?null:l,u=n.offset,f=u===void 0?null:u,d=n.mouseHandlerCallback,h=d===void 0?null:d;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+l+c,d=s+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:f,pageY:d})}}}])}();function yft(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&We(r)&&We(i))return!0}return!1}function vft(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Yce(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=er(e,n,r,i),o=er(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function wft(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,f=e.angle,d=er(o,l,c,f),h=er(o,l,u,f);r=d.x,i=d.y,a=h.x,s=h.y}else return Yce(e);return[{x:r,y:i},{x:a,y:s}]}function v1(t){"@babel/helpers - typeof";return v1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v1(t)}function dq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dq(Object(n),!0).forEach(function(r){bft(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bft(t,e,n){return e=_ft(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ft(t){var e=xft(t,"string");return v1(e)=="symbol"?e:e+""}function xft(t,e){if(v1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(v1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sft(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,f=t.layout,d=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!s||d!=="ScatterChart"&&i!=="axis")return null;var p,m=o4;if(d==="ScatterChart")p=s,m=nst;else if(d==="BarChart")p=vft(f,s,l,u),m=UD;else if(f==="radial"){var y=Yce(s),g=y.cx,v=y.cy,w=y.radius,_=y.startAngle,x=y.endAngle;p={cx:g,cy:v,startAngle:_,endAngle:x,innerRadius:w,outerRadius:w},m=Kle}else p={points:wft(f,s,l)},m=o4;var E=_2(_2(_2(_2({stroke:"#ccc",pointerEvents:"none"},l),p),jt(h,!1)),{},{payload:o,payloadIndex:c,className:en("recharts-tooltip-cursor",h.className)});return k.isValidElement(h)?k.cloneElement(h,E):k.createElement(m,E)}var Eft=["item"],Aft=["children","className","width","height","style","compact","title","desc"];function Wy(t){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(t)}function Eg(){return Eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eg.apply(this,arguments)}function hq(t,e){return Tft(t)||Oft(t,e)||Xce(t,e)||kft()}function kft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oft(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Tft(t){if(Array.isArray(t))return t}function pq(t,e){if(t==null)return{};var n=Cft(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cft(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jce(r.key),r)}}function Ift(t,e,n){return e&&Nft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rft(t,e,n){return e=QA(e),jft(t,Zce()?Reflect.construct(e,n||[],QA(t).constructor):e.apply(t,n))}function jft(t,e){if(e&&(Wy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ft(t)}function $ft(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zce=function(){return!!t})()}function QA(t){return QA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QA(t)}function Mft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F4(t,e)}function F4(t,e){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},F4(t,e)}function Hy(t){return Fft(t)||Dft(t)||Xce(t)||Lft()}function Lft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xce(t,e){if(t){if(typeof t=="string")return B4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B4(t,e)}}function Dft(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fft(t){if(Array.isArray(t))return B4(t)}function B4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(n),!0).forEach(function(r){Nt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nt(t,e,n){return e=Jce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jce(t){var e=Bft(t,"string");return Wy(e)=="symbol"?e:e+""}function Bft(t,e){if(Wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uft={xAxis:["bottom","top"],yAxis:["left","right"]},zft={width:"100%",height:"100%"},Qce={x:0,y:0};function x2(t){return t}var Vft=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Wft=function(e,n,r,i){var a=n.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return Ae(Ae(Ae({},i),er(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,c=i.angle;return Ae(Ae(Ae({},i),er(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Qce},xO=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Hy(o),Hy(c)):o},[]);return s.length>0?s:e&&e.length&&We(i)&&We(a)?e.slice(i,a+1):[]};function eue(t){return t==="number"?[0,"auto"]:void 0}var U4=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=xO(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;d=mj(h,s.dataKey,i)}else d=f&&f[r]||o[r];return d?[].concat(Hy(l),[zle(c,d)]):l},[])},gq=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Vft(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=xnt(s,o,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,d=U4(e,n,u,f),h=Wft(r,o,u,a);return{activeTooltipIndex:u,activeLabel:f,activePayload:d,activeCoordinate:h}}return null},Hft=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,d=e.stackOffset,h=Mle(u,a);return r.reduce(function(p,m){var y,g=m.type.defaultProps!==void 0?Ae(Ae({},m.type.defaultProps),m.props):m.props,v=g.type,w=g.dataKey,_=g.allowDataOverflow,x=g.allowDuplicatedCategory,E=g.scale,T=g.ticks,O=g.includeHidden,R=g[s];if(p[R])return p;var M=xO(e.data,{graphicalItems:i.filter(function(L){var K,Q=s in L.props?L.props[s]:(K=L.type.defaultProps)===null||K===void 0?void 0:K[s];return Q===R}),dataStartIndex:l,dataEndIndex:c}),N=M.length,j,U,B;yft(g.domain,_,v)&&(j=n4(g.domain,null,_),h&&(v==="number"||E!=="auto")&&(B=Ow(M,w,"category")));var V=eue(v);if(!j||j.length===0){var Y,X=(Y=g.domain)!==null&&Y!==void 0?Y:V;if(w){if(j=Ow(M,w,v),v==="category"&&h){var z=u9e(j);x&&z?(U=j,j=UA(0,N)):x||(j=WW(X,j,m).reduce(function(L,K){return L.indexOf(K)>=0?L:[].concat(Hy(L),[K])},[]))}else if(v==="category")x?j=j.filter(function(L){return L!==""&&!an(L)}):j=WW(X,j,m).reduce(function(L,K){return L.indexOf(K)>=0||K===""||an(K)?L:[].concat(Hy(L),[K])},[]);else if(v==="number"){var G=Ont(M,i.filter(function(L){var K,Q,re=s in L.props?L.props[s]:(K=L.type.defaultProps)===null||K===void 0?void 0:K[s],F="hide"in L.props?L.props.hide:(Q=L.type.defaultProps)===null||Q===void 0?void 0:Q.hide;return re===R&&(O||!F)}),w,a,u);G&&(j=G)}h&&(v==="number"||E!=="auto")&&(B=Ow(M,w,"category"))}else h?j=UA(0,N):o&&o[R]&&o[R].hasStack&&v==="number"?j=d==="expand"?[0,1]:Ule(o[R].stackGroups,l,c):j=$le(M,i.filter(function(L){var K=s in L.props?L.props[s]:L.type.defaultProps[s],Q="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return K===R&&(O||!Q)}),v,u,!0);if(v==="number")j=D4(f,j,R,a,T),X&&(j=n4(X,j,_));else if(v==="category"&&X){var ae=X,ue=j.every(function(L){return ae.indexOf(L)>=0});ue&&(j=ae)}}return Ae(Ae({},p),{},Nt({},R,Ae(Ae({},g),{},{axisType:a,domain:j,categoricalDomain:B,duplicateDomain:U,originalDomain:(y=g.domain)!==null&&y!==void 0?y:V,isCategorical:h,layout:u})))},{})},qft=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,f=e.children,d=xO(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),h=d.length,p=Mle(u,a),m=-1;return r.reduce(function(y,g){var v=g.type.defaultProps!==void 0?Ae(Ae({},g.type.defaultProps),g.props):g.props,w=v[s],_=eue("number");if(!y[w]){m++;var x;return p?x=UA(0,h):o&&o[w]&&o[w].hasStack?(x=Ule(o[w].stackGroups,l,c),x=D4(f,x,w,a)):(x=n4(_,$le(d,r.filter(function(E){var T,O,R=s in E.props?E.props[s]:(T=E.type.defaultProps)===null||T===void 0?void 0:T[s],M="hide"in E.props?E.props.hide:(O=E.type.defaultProps)===null||O===void 0?void 0:O.hide;return R===w&&!M}),"number",u),i.defaultProps.allowDataOverflow),x=D4(f,x,w,a)),Ae(Ae({},y),{},Nt({},w,Ae(Ae({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ms(Uft,"".concat(a,".").concat(m%2),null),domain:x,originalDomain:_,isCategorical:p,layout:u})))}return y},{})},Gft=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,f="".concat(i,"Id"),d=So(u,a),h={};return d&&d.length?h=Hft(e,{axes:d,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(h=qft(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),h},Kft=function(e){var n=Vf(e),r=pu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:pD(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:TA(n,r)}},yq=function(e){var n=e.children,r=e.defaultShowTooltip,i=xs(n,My),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Yft=function(e){return!e||!e.length?!1:e.some(function(n){var r=xu(n&&n.type);return r&&r.indexOf("Bar")>=0})},vq=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Zft=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,u=r.height,f=r.children,d=r.margin||{},h=xs(f,My),p=xs(f,Vg),m=Object.keys(l).reduce(function(x,E){var T=l[E],O=T.orientation;return!T.mirror&&!T.hide?Ae(Ae({},x),{},Nt({},O,x[O]+T.width)):x},{left:d.left||0,right:d.right||0}),y=Object.keys(s).reduce(function(x,E){var T=s[E],O=T.orientation;return!T.mirror&&!T.hide?Ae(Ae({},x),{},Nt({},O,Ms(x,"".concat(O))+T.height)):x},{top:d.top||0,bottom:d.bottom||0}),g=Ae(Ae({},y),m),v=g.bottom;h&&(g.bottom+=h.props.height||My.defaultProps.height),p&&n&&(g=Ant(g,i,r,n));var w=c-g.left-g.right,_=u-g.top-g.bottom;return Ae(Ae({brushBottom:v},g),{},{width:Math.max(w,0),height:Math.max(_,0)})},Xft=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},tue=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,f=e.defaultProps,d=function(g,v){var w=v.graphicalItems,_=v.stackGroups,x=v.offset,E=v.updateId,T=v.dataStartIndex,O=v.dataEndIndex,R=g.barSize,M=g.layout,N=g.barGap,j=g.barCategoryGap,U=g.maxBarSize,B=vq(M),V=B.numericAxisName,Y=B.cateAxisName,X=Yft(w),z=[];return w.forEach(function(G,ae){var ue=xO(g.data,{graphicalItems:[G],dataStartIndex:T,dataEndIndex:O}),L=G.type.defaultProps!==void 0?Ae(Ae({},G.type.defaultProps),G.props):G.props,K=L.dataKey,Q=L.maxBarSize,re=L["".concat(V,"Id")],F=L["".concat(Y,"Id")],$={},ie=l.reduce(function(Ze,Re){var Ie=v["".concat(Re.axisType,"Map")],Ye=L["".concat(Re.axisType,"Id")];Ie&&Ie[Ye]||Re.axisType==="zAxis"||Ip();var je=Ie[Ye];return Ae(Ae({},Ze),{},Nt(Nt({},Re.axisType,je),"".concat(Re.axisType,"Ticks"),pu(je)))},$),q=ie[Y],fe=ie["".concat(Y,"Ticks")],me=_&&_[re]&&_[re].hasStack&&Mnt(G,_[re].stackGroups),de=xu(G.type).indexOf("Bar")>=0,_e=TA(q,fe),Oe=[],ee=X&&Snt({barSize:R,stackGroups:_,totalSize:Xft(ie,Y)});if(de){var Ee,Qe,tt=an(Q)?U:Q,Pe=(Ee=(Qe=TA(q,fe,!0))!==null&&Qe!==void 0?Qe:tt)!==null&&Ee!==void 0?Ee:0;Oe=Ent({barGap:N,barCategoryGap:j,bandSize:Pe!==_e?Pe:_e,sizeList:ee[F],maxBarSize:tt}),Pe!==_e&&(Oe=Oe.map(function(Ze){return Ae(Ae({},Ze),{},{position:Ae(Ae({},Ze.position),{},{offset:Ze.position.offset-Pe/2})})}))}var xe=G&&G.type&&G.type.getComposedData;xe&&z.push({props:Ae(Ae({},xe(Ae(Ae({},ie),{},{displayedData:ue,props:g,dataKey:K,item:G,bandSize:_e,barPosition:Oe,offset:x,stackedData:me,layout:M,dataStartIndex:T,dataEndIndex:O}))),{},Nt(Nt(Nt({key:G.key||"item-".concat(ae)},V,ie[V]),Y,ie[Y]),"animationId",E)),childIndex:x9e(G,g.children),item:G})}),z},h=function(g,v){var w=g.props,_=g.dataStartIndex,x=g.dataEndIndex,E=g.updateId;if(!Dz({props:w}))return null;var T=w.children,O=w.layout,R=w.stackOffset,M=w.data,N=w.reverseStackOrder,j=vq(O),U=j.numericAxisName,B=j.cateAxisName,V=So(T,r),Y=jnt(M,V,"".concat(U,"Id"),"".concat(B,"Id"),R,N),X=l.reduce(function(L,K){var Q="".concat(K.axisType,"Map");return Ae(Ae({},L),{},Nt({},Q,Gft(w,Ae(Ae({},K),{},{graphicalItems:V,stackGroups:K.axisType===U&&Y,dataStartIndex:_,dataEndIndex:x}))))},{}),z=Zft(Ae(Ae({},X),{},{props:w,graphicalItems:V}),v==null?void 0:v.legendBBox);Object.keys(X).forEach(function(L){X[L]=u(w,X[L],z,L.replace("Map",""),n)});var G=X["".concat(B,"Map")],ae=Kft(G),ue=d(w,Ae(Ae({},X),{},{dataStartIndex:_,dataEndIndex:x,updateId:E,graphicalItems:V,stackGroups:Y,offset:z}));return Ae(Ae({formattedGraphicalItems:ue,graphicalItems:V,offset:z,stackGroups:Y},ae),X)},p=function(y){function g(v){var w,_,x;return Pft(this,g),x=Rft(this,g,[v]),Nt(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Nt(x,"accessibilityManager",new gft),Nt(x,"handleLegendBBoxUpdate",function(E){if(E){var T=x.state,O=T.dataStartIndex,R=T.dataEndIndex,M=T.updateId;x.setState(Ae({legendBBox:E},h({props:x.props,dataStartIndex:O,dataEndIndex:R,updateId:M},Ae(Ae({},x.state),{},{legendBBox:E}))))}}),Nt(x,"handleReceiveSyncEvent",function(E,T,O){if(x.props.syncId===E){if(O===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(T)}}),Nt(x,"handleBrushChange",function(E){var T=E.startIndex,O=E.endIndex;if(T!==x.state.dataStartIndex||O!==x.state.dataEndIndex){var R=x.state.updateId;x.setState(function(){return Ae({dataStartIndex:T,dataEndIndex:O},h({props:x.props,dataStartIndex:T,dataEndIndex:O,updateId:R},x.state))}),x.triggerSyncEvent({dataStartIndex:T,dataEndIndex:O})}}),Nt(x,"handleMouseEnter",function(E){var T=x.getMouseInfo(E);if(T){var O=Ae(Ae({},T),{},{isTooltipActive:!0});x.setState(O),x.triggerSyncEvent(O);var R=x.props.onMouseEnter;Dt(R)&&R(O,E)}}),Nt(x,"triggeredAfterMouseMove",function(E){var T=x.getMouseInfo(E),O=T?Ae(Ae({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(O),x.triggerSyncEvent(O);var R=x.props.onMouseMove;Dt(R)&&R(O,E)}),Nt(x,"handleItemMouseEnter",function(E){x.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Nt(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),Nt(x,"handleMouseMove",function(E){E.persist(),x.throttleTriggeredAfterMouseMove(E)}),Nt(x,"handleMouseLeave",function(E){x.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};x.setState(T),x.triggerSyncEvent(T);var O=x.props.onMouseLeave;Dt(O)&&O(T,E)}),Nt(x,"handleOuterEvent",function(E){var T=_9e(E),O=Ms(x.props,"".concat(T));if(T&&Dt(O)){var R,M;/.*touch.*/i.test(T)?M=x.getMouseInfo(E.changedTouches[0]):M=x.getMouseInfo(E),O((R=M)!==null&&R!==void 0?R:{},E)}}),Nt(x,"handleClick",function(E){var T=x.getMouseInfo(E);if(T){var O=Ae(Ae({},T),{},{isTooltipActive:!0});x.setState(O),x.triggerSyncEvent(O);var R=x.props.onClick;Dt(R)&&R(O,E)}}),Nt(x,"handleMouseDown",function(E){var T=x.props.onMouseDown;if(Dt(T)){var O=x.getMouseInfo(E);T(O,E)}}),Nt(x,"handleMouseUp",function(E){var T=x.props.onMouseUp;if(Dt(T)){var O=x.getMouseInfo(E);T(O,E)}}),Nt(x,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Nt(x,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&x.handleMouseDown(E.changedTouches[0])}),Nt(x,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&x.handleMouseUp(E.changedTouches[0])}),Nt(x,"handleDoubleClick",function(E){var T=x.props.onDoubleClick;if(Dt(T)){var O=x.getMouseInfo(E);T(O,E)}}),Nt(x,"handleContextMenu",function(E){var T=x.props.onContextMenu;if(Dt(T)){var O=x.getMouseInfo(E);T(O,E)}}),Nt(x,"triggerSyncEvent",function(E){x.props.syncId!==void 0&&KP.emit(YP,x.props.syncId,E,x.eventEmitterSymbol)}),Nt(x,"applySyncEvent",function(E){var T=x.props,O=T.layout,R=T.syncMethod,M=x.state.updateId,N=E.dataStartIndex,j=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)x.setState(Ae({dataStartIndex:N,dataEndIndex:j},h({props:x.props,dataStartIndex:N,dataEndIndex:j,updateId:M},x.state)));else if(E.activeTooltipIndex!==void 0){var U=E.chartX,B=E.chartY,V=E.activeTooltipIndex,Y=x.state,X=Y.offset,z=Y.tooltipTicks;if(!X)return;if(typeof R=="function")V=R(z,E);else if(R==="value"){V=-1;for(var G=0;G<z.length;G++)if(z[G].value===E.activeLabel){V=G;break}}var ae=Ae(Ae({},X),{},{x:X.left,y:X.top}),ue=Math.min(U,ae.x+ae.width),L=Math.min(B,ae.y+ae.height),K=z[V]&&z[V].value,Q=U4(x.state,x.props.data,V),re=z[V]?{x:O==="horizontal"?z[V].coordinate:ue,y:O==="horizontal"?L:z[V].coordinate}:Qce;x.setState(Ae(Ae({},E),{},{activeLabel:K,activeCoordinate:re,activePayload:Q,activeTooltipIndex:V}))}else x.setState(E)}),Nt(x,"renderCursor",function(E){var T,O=x.state,R=O.isTooltipActive,M=O.activeCoordinate,N=O.activePayload,j=O.offset,U=O.activeTooltipIndex,B=O.tooltipAxisBandSize,V=x.getTooltipEventType(),Y=(T=E.props.active)!==null&&T!==void 0?T:R,X=x.props.layout,z=E.key||"_recharts-cursor";return se.createElement(Sft,{key:z,activeCoordinate:M,activePayload:N,activeTooltipIndex:U,chartName:n,element:E,isActive:Y,layout:X,offset:j,tooltipAxisBandSize:B,tooltipEventType:V})}),Nt(x,"renderPolarAxis",function(E,T,O){var R=Ms(E,"type.axisType"),M=Ms(x.state,"".concat(R,"Map")),N=E.type.defaultProps,j=N!==void 0?Ae(Ae({},N),E.props):E.props,U=M&&M[j["".concat(R,"Id")]];return k.cloneElement(E,Ae(Ae({},U),{},{className:en(R,U.className),key:E.key||"".concat(T,"-").concat(O),ticks:pu(U,!0)}))}),Nt(x,"renderPolarGrid",function(E){var T=E.props,O=T.radialLines,R=T.polarAngles,M=T.polarRadius,N=x.state,j=N.radiusAxisMap,U=N.angleAxisMap,B=Vf(j),V=Vf(U),Y=V.cx,X=V.cy,z=V.innerRadius,G=V.outerRadius;return k.cloneElement(E,{polarAngles:Array.isArray(R)?R:pu(V,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(M)?M:pu(B,!0).map(function(ae){return ae.coordinate}),cx:Y,cy:X,innerRadius:z,outerRadius:G,key:E.key||"polar-grid",radialLines:O})}),Nt(x,"renderLegend",function(){var E=x.state.formattedGraphicalItems,T=x.props,O=T.children,R=T.width,M=T.height,N=x.props.margin||{},j=R-(N.left||0)-(N.right||0),U=Rle({children:O,formattedGraphicalItems:E,legendWidth:j,legendContent:c});if(!U)return null;var B=U.item,V=pq(U,Eft);return k.cloneElement(B,Ae(Ae({},V),{},{chartWidth:R,chartHeight:M,margin:N,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),Nt(x,"renderTooltip",function(){var E,T=x.props,O=T.children,R=T.accessibilityLayer,M=xs(O,ol);if(!M)return null;var N=x.state,j=N.isTooltipActive,U=N.activeCoordinate,B=N.activePayload,V=N.activeLabel,Y=N.offset,X=(E=M.props.active)!==null&&E!==void 0?E:j;return k.cloneElement(M,{viewBox:Ae(Ae({},Y),{},{x:Y.left,y:Y.top}),active:X,label:V,payload:X?B:[],coordinate:U,accessibilityLayer:R})}),Nt(x,"renderBrush",function(E){var T=x.props,O=T.margin,R=T.data,M=x.state,N=M.offset,j=M.dataStartIndex,U=M.dataEndIndex,B=M.updateId;return k.cloneElement(E,{key:E.key||"_recharts-brush",onChange:y2(x.handleBrushChange,E.props.onChange),data:R,x:We(E.props.x)?E.props.x:N.left,y:We(E.props.y)?E.props.y:N.top+N.height+N.brushBottom-(O.bottom||0),width:We(E.props.width)?E.props.width:N.width,startIndex:j,endIndex:U,updateId:"brush-".concat(B)})}),Nt(x,"renderReferenceElement",function(E,T,O){if(!E)return null;var R=x,M=R.clipPathId,N=x.state,j=N.xAxisMap,U=N.yAxisMap,B=N.offset,V=E.type.defaultProps||{},Y=E.props,X=Y.xAxisId,z=X===void 0?V.xAxisId:X,G=Y.yAxisId,ae=G===void 0?V.yAxisId:G;return k.cloneElement(E,{key:E.key||"".concat(T,"-").concat(O),xAxis:j[z],yAxis:U[ae],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:M})}),Nt(x,"renderActivePoints",function(E){var T=E.item,O=E.activePoint,R=E.basePoint,M=E.childIndex,N=E.isRange,j=[],U=T.props.key,B=T.item.type.defaultProps!==void 0?Ae(Ae({},T.item.type.defaultProps),T.item.props):T.item.props,V=B.activeDot,Y=B.dataKey,X=Ae(Ae({index:M,dataKey:Y,cx:O.x,cy:O.y,r:4,fill:BD(T.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},jt(V,!1)),eA(V));return j.push(g.renderActiveDot(V,X,"".concat(U,"-activePoint-").concat(M))),R?j.push(g.renderActiveDot(V,Ae(Ae({},X),{},{cx:R.x,cy:R.y}),"".concat(U,"-basePoint-").concat(M))):N&&j.push(null),j}),Nt(x,"renderGraphicChild",function(E,T,O){var R=x.filterFormatItem(E,T,O);if(!R)return null;var M=x.getTooltipEventType(),N=x.state,j=N.isTooltipActive,U=N.tooltipAxis,B=N.activeTooltipIndex,V=N.activeLabel,Y=x.props.children,X=xs(Y,ol),z=R.props,G=z.points,ae=z.isRange,ue=z.baseLine,L=R.item.type.defaultProps!==void 0?Ae(Ae({},R.item.type.defaultProps),R.item.props):R.item.props,K=L.activeDot,Q=L.hide,re=L.activeBar,F=L.activeShape,$=!!(!Q&&j&&X&&(K||re||F)),ie={};M!=="axis"&&X&&X.props.trigger==="click"?ie={onClick:y2(x.handleItemMouseEnter,E.props.onClick)}:M!=="axis"&&(ie={onMouseLeave:y2(x.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:y2(x.handleItemMouseEnter,E.props.onMouseEnter)});var q=k.cloneElement(E,Ae(Ae({},R.props),ie));function fe(Re){return typeof U.dataKey=="function"?U.dataKey(Re.payload):null}if($)if(B>=0){var me,de;if(U.dataKey&&!U.allowDuplicatedCategory){var _e=typeof U.dataKey=="function"?fe:"payload.".concat(U.dataKey.toString());me=mj(G,_e,V),de=ae&&ue&&mj(ue,_e,V)}else me=G==null?void 0:G[B],de=ae&&ue&&ue[B];if(F||re){var Oe=E.props.activeIndex!==void 0?E.props.activeIndex:B;return[k.cloneElement(E,Ae(Ae(Ae({},R.props),ie),{},{activeIndex:Oe})),null,null]}if(!an(me))return[q].concat(Hy(x.renderActivePoints({item:R,activePoint:me,basePoint:de,childIndex:B,isRange:ae})))}else{var ee,Ee=(ee=x.getItemByXY(x.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:q},Qe=Ee.graphicalItem,tt=Qe.item,Pe=tt===void 0?E:tt,xe=Qe.childIndex,Ze=Ae(Ae(Ae({},R.props),ie),{},{activeIndex:xe});return[k.cloneElement(Pe,Ze),null,null]}return ae?[q,null,null]:[q,null]}),Nt(x,"renderCustomized",function(E,T,O){return k.cloneElement(E,Ae(Ae({key:"recharts-customized-".concat(O)},x.props),x.state))}),Nt(x,"renderMap",{CartesianGrid:{handler:x2,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:x2},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:x2},YAxis:{handler:x2},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((w=v.id)!==null&&w!==void 0?w:u_("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=Ioe(x.triggeredAfterMouseMove,(_=v.throttleDelay)!==null&&_!==void 0?_:1e3/60),x.state={},x}return Mft(g,y),Ift(g,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,x=w.data,E=w.height,T=w.layout,O=xs(_,ol);if(O){var R=O.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,N=U4(this.state,x,R,M),j=this.state.tooltipTicks[R].coordinate,U=(this.state.offset.top+E)/2,B=T==="horizontal",V=B?{x:j,y:U}:{y:j,x:U},Y=this.state.formattedGraphicalItems.find(function(z){var G=z.item;return G.type.name==="Scatter"});Y&&(V=Ae(Ae({},V),Y.props.points[R].tooltipPosition),N=Y.props.points[R].tooltipPayload);var X={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:M,activePayload:N,activeCoordinate:V};this.setState(X),this.renderCursor(O),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var x,E;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(w){yj([xs(w.children,ol)],[xs(this.props.children,ol)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=xs(this.props.children,ol);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return o.indexOf(_)>=0?_:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,x=_.getBoundingClientRect(),E=KXe(x),T={chartX:Math.round(w.pageX-E.left),chartY:Math.round(w.pageY-E.top)},O=x.width/_.offsetWidth||1,R=this.inRange(T.chartX,T.chartY,O);if(!R)return null;var M=this.state,N=M.xAxisMap,j=M.yAxisMap,U=this.getTooltipEventType(),B=gq(this.state,this.props.data,this.props.layout,R);if(U!=="axis"&&N&&j){var V=Vf(N).scale,Y=Vf(j).scale,X=V&&V.invert?V.invert(T.chartX):null,z=Y&&Y.invert?Y.invert(T.chartY):null;return Ae(Ae({},T),{},{xValue:X,yValue:z},B)}return B?Ae(Ae({},T),B):null}},{key:"inRange",value:function(w,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,T=w/x,O=_/x;if(E==="horizontal"||E==="vertical"){var R=this.state.offset,M=T>=R.left&&T<=R.left+R.width&&O>=R.top&&O<=R.top+R.height;return M?{x:T,y:O}:null}var N=this.state,j=N.angleAxisMap,U=N.radiusAxisMap;if(j&&U){var B=Vf(j);return GW({x:T,y:O},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),x=xs(w,ol),E={};x&&_==="axis"&&(x.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=eA(this.props,this.handleOuterEvent);return Ae(Ae({},T),E)}},{key:"addListener",value:function(){KP.on(YP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){KP.removeListener(YP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,x){for(var E=this.state.formattedGraphicalItems,T=0,O=E.length;T<O;T++){var R=E[T];if(R.item===w||R.props.key===w.key||_===xu(R.item.type)&&x===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,x=_.left,E=_.top,T=_.height,O=_.width;return se.createElement("defs",null,se.createElement("clipPath",{id:w},se.createElement("rect",{x,y:E,height:T,width:O})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,x){var E=hq(x,2),T=E[0],O=E[1];return Ae(Ae({},_),{},Nt({},T,O.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,x){var E=hq(x,2),T=E[0],O=E[1];return Ae(Ae({},_),{},Nt({},T,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,x=_.formattedGraphicalItems,E=_.activeItem;if(x&&x.length)for(var T=0,O=x.length;T<O;T++){var R=x[T],M=R.props,N=R.item,j=N.type.defaultProps!==void 0?Ae(Ae({},N.type.defaultProps),N.props):N.props,U=xu(N.type);if(U==="Bar"){var B=(M.data||[]).find(function(z){return Mat(w,z)});if(B)return{graphicalItem:R,payload:B}}else if(U==="RadialBar"){var V=(M.data||[]).find(function(z){return GW(w,z)});if(V)return{graphicalItem:R,payload:V}}else if(hO(R,E)||pO(R,E)||d1(R,E)){var Y=Eot({graphicalItem:R,activeTooltipItem:E,itemData:j.data}),X=j.activeIndex===void 0?Y:j.activeIndex;return{graphicalItem:Ae(Ae({},R),{},{childIndex:X}),payload:d1(R,E)?j.data[Y]:R.props.data[Y]}}}return null}},{key:"render",value:function(){var w=this;if(!Dz(this))return null;var _=this.props,x=_.children,E=_.className,T=_.width,O=_.height,R=_.style,M=_.compact,N=_.title,j=_.desc,U=pq(_,Aft),B=jt(U,!1);if(M)return se.createElement(JH,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(wj,Eg({},B,{width:T,height:O,title:N,desc:j}),this.renderClipPath(),Bz(x,this.renderMap)));if(this.props.accessibilityLayer){var V,Y;B.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,B.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",B.onKeyDown=function(z){w.accessibilityManager.keyboardEvent(z)},B.onFocus=function(){w.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return se.createElement(JH,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",Eg({className:en("recharts-wrapper",E),style:Ae({position:"relative",cursor:"default",width:T,height:O},R)},X,{ref:function(G){w.container=G}}),se.createElement(wj,Eg({},B,{width:T,height:O,title:N,desc:j,style:zft}),this.renderClipPath(),Bz(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);Nt(p,"displayName",n),Nt(p,"defaultProps",Ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Nt(p,"getDerivedStateFromProps",function(y,g){var v=y.dataKey,w=y.data,_=y.children,x=y.width,E=y.height,T=y.layout,O=y.stackOffset,R=y.margin,M=g.dataStartIndex,N=g.dataEndIndex;if(g.updateId===void 0){var j=yq(y);return Ae(Ae(Ae({},j),{},{updateId:0},h(Ae(Ae({props:y},j),{},{updateId:0}),g)),{},{prevDataKey:v,prevData:w,prevWidth:x,prevHeight:E,prevLayout:T,prevStackOffset:O,prevMargin:R,prevChildren:_})}if(v!==g.prevDataKey||w!==g.prevData||x!==g.prevWidth||E!==g.prevHeight||T!==g.prevLayout||O!==g.prevStackOffset||!zg(R,g.prevMargin)){var U=yq(y),B={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},V=Ae(Ae({},gq(g,w,T)),{},{updateId:g.updateId+1}),Y=Ae(Ae(Ae({},U),B),V);return Ae(Ae(Ae({},Y),h(Ae({props:y},Y),g)),{},{prevDataKey:v,prevData:w,prevWidth:x,prevHeight:E,prevLayout:T,prevStackOffset:O,prevMargin:R,prevChildren:_})}if(!yj(_,g.prevChildren)){var X,z,G,ae,ue=xs(_,My),L=ue&&(X=(z=ue.props)===null||z===void 0?void 0:z.startIndex)!==null&&X!==void 0?X:M,K=ue&&(G=(ae=ue.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&G!==void 0?G:N,Q=L!==M||K!==N,re=!an(w),F=re&&!Q?g.updateId:g.updateId+1;return Ae(Ae({updateId:F},h(Ae(Ae({props:y},g),{},{updateId:F,dataStartIndex:L,dataEndIndex:K}),g)),{},{prevChildren:_,dataStartIndex:L,dataEndIndex:K})}return null}),Nt(p,"renderActiveDot",function(y,g,v){var w;return k.isValidElement(y)?w=k.cloneElement(y,g):Dt(y)?w=y(g):w=se.createElement(zD,g),se.createElement(Rn,{className:"recharts-active-dot",key:v},w)});var m=k.forwardRef(function(g,v){return se.createElement(p,Eg({},g,{ref:v}))});return m.displayName=p.displayName,m},Jft=tue({chartName:"BarChart",GraphicalChild:Yp,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:bO},{axisType:"yAxis",AxisComp:_O}],formatAxisMap:nct}),Qft=tue({chartName:"PieChart",GraphicalChild:ef,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:dO},{axisType:"radiusAxis",AxisComp:uO}],formatAxisMap:qnt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const wq=["#22d3ee","#f87171","#a855f7","#fbbf24","#34d399"],edt=({data:t,currencyFormatter:e})=>{const n=t.reduce((r,i)=>r+i.value,0);return!t||t.length===0?S.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-500",children:"No data to display"}):S.jsx("div",{className:"h-[300px] w-full",children:S.jsx(Roe,{width:"100%",height:"100%",children:S.jsxs(Qft,{children:[S.jsxs(ef,{data:t,cx:"50%",cy:"50%",innerRadius:70,outerRadius:90,paddingAngle:5,dataKey:"value",stroke:"none",children:[t.map((r,i)=>S.jsx(Yk,{fill:wq[i%wq.length]},`cell-${i}`)),S.jsx(ti,{value:"Total",position:"center",dy:-20,style:{fontSize:"12px",fill:"hsl(var(--muted-foreground))",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",transition:"fill 0.3s ease"}}),S.jsx(ti,{value:e?e(n).replace(/\.00$/,""):n,position:"center",dy:15,style:{fontSize:"24px",fill:"hsl(var(--foreground))",fontWeight:800,transition:"fill 0.3s ease"}})]}),S.jsx(ol,{contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",color:"hsl(var(--foreground))",borderRadius:"12px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderWidth:"1px"},itemStyle:{color:"hsl(var(--foreground))"},formatter:r=>e?e(r):r})]})})})},tdt=({data:t,currencyFormatter:e})=>!t||t.length===0?S.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-500",children:"No data to display"}):S.jsx("div",{className:"h-[300px] w-full",children:S.jsx(Roe,{width:"100%",height:"100%",children:S.jsxs(Jft,{data:t,margin:{top:20,right:30,left:20,bottom:5},children:[S.jsx(Uce,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",vertical:!1}),S.jsx(bO,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),S.jsx(_O,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:n=>e?e(n).replace(/\D+00(?=\D*$)/,""):n}),S.jsx(ol,{cursor:{fill:"hsl(var(--muted))",opacity:.15},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",color:"hsl(var(--foreground))",borderRadius:"12px",borderWidth:"1px"},formatter:n=>[e?e(n):n,"Amount"]}),S.jsx(Yp,{dataKey:"amount",fill:"#22d3ee",radius:[6,6,0,0],maxBarSize:40})]})})});function ndt(t,e=[]){let n=[];function r(a,s){const o=k.createContext(s);o.displayName=a+"Context";const l=n.length;n=[...n,s];const c=f=>{var g;const{scope:d,children:h,...p}=f,m=((g=d==null?void 0:d[t])==null?void 0:g[l])||o,y=k.useMemo(()=>p,Object.values(p));return S.jsx(m.Provider,{value:y,children:h})};c.displayName=a+"Provider";function u(f,d){var m;const h=((m=d==null?void 0:d[t])==null?void 0:m[l])||o,p=k.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=n.map(s=>k.createContext(s));return function(o){const l=(o==null?void 0:o[t])||a;return k.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,rdt(i,...e)]}function rdt(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var idt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nue=idt.reduce((t,e)=>{const n=j5(`Primitive.${e}`),r=k.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),JD="Progress",QD=100,[adt]=ndt(JD),[sdt,odt]=adt(JD),rue=k.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=ldt,...s}=t;(i||i===0)&&!bq(i)&&console.error(cdt(`${i}`,"Progress"));const o=bq(i)?i:QD;r!==null&&!_q(r,o)&&console.error(udt(`${r}`,"Progress"));const l=_q(r,o)?r:null,c=e5(l)?a(l,o):void 0;return S.jsx(sdt,{scope:n,value:l,max:o,children:S.jsx(nue.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":e5(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":sue(l,o),"data-value":l??void 0,"data-max":o,...s,ref:e})})});rue.displayName=JD;var iue="ProgressIndicator",aue=k.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=odt(iue,n);return S.jsx(nue.div,{"data-state":sue(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});aue.displayName=iue;function ldt(t,e){return`${Math.round(t/e*100)}%`}function sue(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function e5(t){return typeof t=="number"}function bq(t){return e5(t)&&!isNaN(t)&&t>0}function _q(t,e){return e5(t)&&!isNaN(t)&&t<=e&&t>=0}function cdt(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${QD}\`.`}function udt(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${QD} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var oue=rue,fdt=aue;const ddt=k.forwardRef(({className:t,value:e,...n},r)=>S.jsx(oue,{ref:r,className:xt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:S.jsx(fdt,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));ddt.displayName=oue.displayName;const hdt=()=>{var v,w;const{expenses:t,categories:e,formatCurrency:n,goals:r}=Gu(),{user:i}=qu(),a=C1(),[s,o]=k.useState(!1),l=new Date().getMonth(),c=new Date().getFullYear(),u=k.useMemo(()=>t.filter(_=>{const x=new Date(_.date);return x.getMonth()===l&&x.getFullYear()===c}),[t,l,c]),f=k.useMemo(()=>u.reduce((_,x)=>_+x.amount,0),[u]),d=k.useMemo(()=>5e4-t.reduce((x,E)=>x+E.amount,0),[t]),h=k.useMemo(()=>{const _=r[0]||{target_amount:5e4},x=5e4-d;return Math.min(x/_.target_amount*100,100)},[r,d]),p=k.useMemo(()=>e.map(_=>({name:_,value:u.filter(x=>x.category===_).reduce((x,E)=>x+E.amount,0)})).filter(_=>_.value>0),[u,e]),m=k.useMemo(()=>{const _=[],x=new Date;for(let E=5;E>=0;E--){const T=new Date(x.getFullYear(),x.getMonth()-E,1),O=T.toLocaleString("default",{month:"short"}),R=t.filter(M=>{const N=new Date(M.date);return N.getMonth()===T.getMonth()&&N.getFullYear()===T.getFullYear()}).reduce((M,N)=>M+N.amount,0);_.push({date:O,amount:R})}return _},[t]),y=t.slice(0,4),g=_=>{const x=(_||"").toLowerCase();return x.includes("food")||x.includes("dining")?S.jsx(Wbe,{className:"h-4 w-4"}):x.includes("housing")||x.includes("rent")?S.jsx(Obe,{className:"h-4 w-4"}):x.includes("entertainment")?S.jsx(Vbe,{className:"h-4 w-4"}):S.jsx(Ebe,{className:"h-4 w-4"})};return S.jsxs("div",{className:"space-y-8 pb-8",children:[S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground transition-colors",children:"Personal Dashboard"}),S.jsxs("p",{className:"text-muted-foreground transition-colors",children:["Welcome back,"," ",((w=(v=i==null?void 0:i.user_metadata)==null?void 0:v.full_name)==null?void 0:w.split(" ")[0])||"User","!"]})]}),S.jsxs("div",{className:"flex items-center gap-3 relative",children:[S.jsx(sn,{variant:"outline",size:"icon",onClick:()=>{o(!0),setTimeout(()=>o(!1),3e3)},className:"rounded-full bg-secondary/50 border-border text-foreground hover:bg-secondary/80 transition-all shadow-sm",children:S.jsx(vbe,{className:"h-4 w-4"})}),s&&S.jsx("div",{className:"absolute top-12 right-0 bg-slate-800 border border-slate-700 text-white text-[10px] py-1 px-3 rounded-md shadow-xl z-50 animate-in fade-in zoom-in duration-200",children:"No new notifications"}),S.jsxs(sn,{onClick:()=>a("/expenses"),className:"bg-cyan-400 hover:bg-cyan-500 text-slate-950 font-semibold gap-2",children:[S.jsx(ab,{className:"h-4 w-4"})," Add Expense"]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[S.jsx(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:S.jsxs(br,{className:"pt-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:S.jsx(R5,{className:"h-5 w-5 text-emerald-500"})}),S.jsxs("div",{className:"flex items-center gap-1 text-emerald-500 text-xs font-medium",children:[S.jsx(dw,{className:"h-3 w-3"})," +12.5%"]})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Balance"}),S.jsx("p",{className:"text-2xl font-bold text-foreground",children:n(d)})]})]})}),S.jsx(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:S.jsxs(br,{className:"pt-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:S.jsx(dw,{className:"h-5 w-5 text-orange-500"})}),S.jsxs("div",{className:"flex items-center gap-1 text-orange-500 text-xs font-medium",children:[S.jsx(dw,{className:"h-3 w-3"})," +4.2%"]})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Spending"}),S.jsx("p",{className:"text-2xl font-bold text-foreground",children:n(f)})]})]})}),S.jsx(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:S.jsxs(br,{className:"pt-6",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:S.jsx(aX,{className:"h-5 w-5 text-purple-500"})}),S.jsxs("p",{className:"text-xs text-muted-foreground",children:["Goal: ",n(5e4)]})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-sm text-muted-foreground",children:"Savings Progress"}),S.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[h.toFixed(1),"%"]})]}),S.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:S.jsx("div",{className:"h-full bg-cyan-400 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.5)]",style:{width:`${h}%`}})})]})]})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[S.jsxs(lr,{className:"lg:col-span-2 bg-card/50 border-border shadow-sm",children:[S.jsxs(ts,{className:"flex flex-row items-center justify-between",children:[S.jsxs("div",{children:[S.jsx($s,{className:"text-foreground text-lg font-semibold",children:"Spending Categories"}),S.jsx(Lu,{className:"text-muted-foreground",children:"This Month"})]}),S.jsx("select",{className:"bg-transparent border-none text-xs text-muted-foreground focus:ring-0 cursor-pointer hover:text-foreground transition-colors",children:S.jsx("option",{children:"This Month"})})]}),S.jsxs(br,{children:[S.jsx(edt,{data:p,currencyFormatter:n}),S.jsx("div",{className:"mt-4 space-y-3",children:p.slice(0,3).map((_,x)=>S.jsxs("div",{className:"flex items-center justify-between text-sm",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm",style:{backgroundColor:["#22d3ee","#f87171","#a855f7"][x%3]}}),S.jsx("span",{className:"text-muted-foreground",children:_.name})]}),S.jsx("span",{className:"text-foreground font-medium",children:n(_.value)})]},_.name))})]})]}),S.jsxs(lr,{className:"lg:col-span-3 bg-card/50 border-border shadow-sm",children:[S.jsx(ts,{children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{children:[S.jsx($s,{className:"text-foreground text-lg font-semibold",children:"Monthly Trends"}),S.jsx(Lu,{className:"text-muted-foreground",children:"Income vs Expenses over 6 months"})]}),S.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[S.jsxs("div",{className:"flex items-center gap-1.5",children:[S.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400"}),S.jsx("span",{className:"text-muted-foreground",children:"Income"})]}),S.jsxs("div",{className:"flex items-center gap-1.5",children:[S.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),S.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]})}),S.jsx(br,{children:S.jsx(tdt,{data:m,currencyFormatter:n})})]})]}),S.jsxs(lr,{className:"bg-card/50 border-border shadow-sm",children:[S.jsxs(ts,{className:"flex flex-row items-center justify-between pb-2",children:[S.jsx($s,{className:"text-foreground text-lg font-semibold",children:"Recent Expenses"}),S.jsx(sn,{variant:"link",className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 transition-colors text-sm px-0",children:"View All"})]}),S.jsx(br,{children:S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"text-left text-xs text-muted-foreground uppercase tracking-wider border-b border-border",children:[S.jsx("th",{className:"pb-4 font-medium",children:"Date"}),S.jsx("th",{className:"pb-4 font-medium",children:"Merchant / Category"}),S.jsx("th",{className:"pb-4 font-medium",children:"Amount"}),S.jsx("th",{className:"pb-4 font-medium",children:"Status"}),S.jsx("th",{className:"pb-4"})]})}),S.jsx("tbody",{className:"divide-y divide-border/50",children:y.map(_=>S.jsxs("tr",{className:"text-sm group hover:bg-muted/50 transition-colors",children:[S.jsxs("td",{className:"py-4",children:[S.jsx("div",{className:"text-foreground font-medium",children:new Date(_.date).toLocaleDateString()}),S.jsx("div",{className:"text-[10px] text-muted-foreground",children:new Date(_.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),S.jsx("td",{className:"py-4",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"p-2 bg-muted rounded-lg text-emerald-600 dark:text-emerald-400 shadow-sm transition-colors group-hover:bg-background",children:g(_.category)}),S.jsxs("div",{children:[S.jsx("div",{className:"text-foreground font-medium transition-colors",children:_.description||"Expense"}),S.jsx("div",{className:"text-xs text-muted-foreground",children:_.category})]})]})}),S.jsxs("td",{className:"py-4 font-medium text-foreground",children:["-",n(_.amount)]}),S.jsx("td",{className:"py-4",children:S.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-500 shadow-sm",children:"Completed"})}),S.jsx("td",{className:"py-4 text-right",children:S.jsx(sn,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground transition-colors hover:bg-muted",children:S.jsx(Mbe,{className:"h-4 w-4"})})})]},_.id))})]})})})]})]})};function pdt(t){const e=mdt(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(ydt);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function mdt(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=wdt(i),o=vdt(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gdt=Symbol("radix.slottable");function ydt(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gdt}function vdt(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function wdt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var SO="Dialog",[lue]=kc(SO),[bdt,Il]=lue(SO),cue=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!0}=t,o=k.useRef(null),l=k.useRef(null),[c,u]=wd({prop:r,defaultProp:i??!1,onChange:a,caller:SO});return S.jsx(bdt,{scope:e,triggerRef:o,contentRef:l,contentId:yl(),titleId:yl(),descriptionId:yl(),open:c,onOpenChange:u,onOpenToggle:k.useCallback(()=>u(f=>!f),[u]),modal:s,children:n})};cue.displayName=SO;var uue="DialogTrigger",fue=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Il(uue,n),a=dn(e,i.triggerRef);return S.jsx(Bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":n6(i.open),...r,ref:a,onClick:rt(t.onClick,i.onOpenToggle)})});fue.displayName=uue;var e6="DialogPortal",[_dt,due]=lue(e6,{forceMount:void 0}),hue=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,a=Il(e6,e);return S.jsx(_dt,{scope:e,forceMount:n,children:k.Children.map(r,s=>S.jsx(Cl,{present:n||a.open,children:S.jsx(L1,{asChild:!0,container:i,children:s})}))})};hue.displayName=e6;var t5="DialogOverlay",pue=k.forwardRef((t,e)=>{const n=due(t5,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Il(t5,t.__scopeDialog);return a.modal?S.jsx(Cl,{present:r||a.open,children:S.jsx(Sdt,{...i,ref:e})}):null});pue.displayName=t5;var xdt=pdt("DialogOverlay.RemoveScroll"),Sdt=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Il(t5,n);return S.jsx(F1,{as:xdt,allowPinchZoom:!0,shards:[i.contentRef],children:S.jsx(Bt.div,{"data-state":n6(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),jp="DialogContent",mue=k.forwardRef((t,e)=>{const n=due(jp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,a=Il(jp,t.__scopeDialog);return S.jsx(Cl,{present:r||a.open,children:a.modal?S.jsx(Edt,{...i,ref:e}):S.jsx(Adt,{...i,ref:e})})});mue.displayName=jp;var Edt=k.forwardRef((t,e)=>{const n=Il(jp,t.__scopeDialog),r=k.useRef(null),i=dn(e,n.contentRef,r);return k.useEffect(()=>{const a=r.current;if(a)return V5(a)},[]),S.jsx(gue,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,a=>{const s=a.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&a.preventDefault()}),onFocusOutside:rt(t.onFocusOutside,a=>a.preventDefault())})}),Adt=k.forwardRef((t,e)=>{const n=Il(jp,t.__scopeDialog),r=k.useRef(!1),i=k.useRef(!1);return S.jsx(gue,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,o;(s=t.onCloseAutoFocus)==null||s.call(t,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),gue=k.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=t,o=Il(jp,n),l=k.useRef(null),c=dn(e,l);return M5(),S.jsxs(S.Fragment,{children:[S.jsx($1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:S.jsx(j1,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":n6(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),S.jsxs(S.Fragment,{children:[S.jsx(kdt,{titleId:o.titleId}),S.jsx(Tdt,{contentRef:l,descriptionId:o.descriptionId})]})]})}),t6="DialogTitle",yue=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Il(t6,n);return S.jsx(Bt.h2,{id:i.titleId,...r,ref:e})});yue.displayName=t6;var vue="DialogDescription",wue=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Il(vue,n);return S.jsx(Bt.p,{id:i.descriptionId,...r,ref:e})});wue.displayName=vue;var bue="DialogClose",_ue=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Il(bue,n);return S.jsx(Bt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,()=>i.onOpenChange(!1))})});_ue.displayName=bue;function n6(t){return t?"open":"closed"}var xue="DialogTitleWarning",[gbt,Sue]=R1e(xue,{contentName:jp,titleName:t6,docsSlug:"dialog"}),kdt=({titleId:t})=>{const e=Sue(xue),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Odt="DialogDescriptionWarning",Tdt=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Sue(Odt).contentName}}.`;return k.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Cdt=cue,Pdt=fue,Ndt=hue,Eue=pue,Aue=mue,kue=yue,Oue=wue,Tue=_ue;const Cue=Cdt,Idt=Pdt,Rdt=Ndt,jdt=Tue,Pue=k.forwardRef(({className:t,...e},n)=>S.jsx(Eue,{ref:n,className:xt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Pue.displayName=Eue.displayName;const r6=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(Rdt,{children:[S.jsx(Pue,{}),S.jsxs(Aue,{ref:r,className:xt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,S.jsxs(Tue,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[S.jsx(oE,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));r6.displayName=Aue.displayName;const i6=({className:t,...e})=>S.jsx("div",{className:xt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});i6.displayName="DialogHeader";const Nue=({className:t,...e})=>S.jsx("div",{className:xt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Nue.displayName="DialogFooter";const a6=k.forwardRef(({className:t,...e},n)=>S.jsx(kue,{ref:n,className:xt("text-lg font-semibold leading-none tracking-tight",t),...e}));a6.displayName=kue.displayName;const $dt=k.forwardRef(({className:t,...e},n)=>S.jsx(Oue,{ref:n,className:xt("text-sm text-muted-foreground",t),...e}));$dt.displayName=Oue.displayName;function n5(t,[e,n]){return Math.min(n,Math.max(e,t))}function Mdt(t){const e=Ldt(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(Fdt);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function Ldt(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=Udt(i),o=Bdt(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ddt=Symbol("radix.slottable");function Fdt(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ddt}function Bdt(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function Udt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Iue(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Rue=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),zdt="VisuallyHidden",Vdt=k.forwardRef((t,e)=>S.jsx(Bt.span,{...t,ref:e,style:{...Rue,...t.style}}));Vdt.displayName=zdt;var Wdt=[" ","Enter","ArrowUp","ArrowDown"],Hdt=[" ","Enter"],$p="Select",[EO,AO,qdt]=$5($p),[Pv]=kc($p,[qdt,sv]),kO=sv(),[Gdt,Gd]=Pv($p),[Kdt,Ydt]=Pv($p),jue=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:s,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:d,required:h,form:p}=t,m=kO(e),[y,g]=k.useState(null),[v,w]=k.useState(null),[_,x]=k.useState(!1),E=R1(c),[T,O]=wd({prop:r,defaultProp:i??!1,onChange:a,caller:$p}),[R,M]=wd({prop:s,defaultProp:o,onChange:l,caller:$p}),N=k.useRef(null),j=y?p||!!y.closest("form"):!0,[U,B]=k.useState(new Set),V=Array.from(U).map(Y=>Y.props.value).join(";");return S.jsx(N$,{...m,children:S.jsxs(Gdt,{required:h,scope:e,trigger:y,onTriggerChange:g,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:x,contentId:yl(),value:R,onValueChange:M,open:T,onOpenChange:O,dir:E,triggerPointerDownPosRef:N,disabled:d,children:[S.jsx(EO.Provider,{scope:e,children:S.jsx(Kdt,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(Y=>{B(X=>new Set(X).add(Y))},[]),onNativeOptionRemove:k.useCallback(Y=>{B(X=>{const z=new Set(X);return z.delete(Y),z})},[]),children:n})}),j?S.jsxs(ife,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:f,value:R,onChange:Y=>M(Y.target.value),disabled:d,form:p,children:[R===void 0?S.jsx("option",{value:""}):null,Array.from(U)]},V):null]})})};jue.displayName=$p;var $ue="SelectTrigger",Mue=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=kO(n),s=Gd($ue,n),o=s.disabled||r,l=dn(e,s.onTriggerChange),c=AO(n),u=k.useRef("touch"),[f,d,h]=sfe(m=>{const y=c().filter(w=>!w.disabled),g=y.find(w=>w.value===s.value),v=ofe(y,m,g);v!==void 0&&s.onValueChange(v.value)}),p=m=>{o||(s.onOpenChange(!0),h()),m&&(s.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return S.jsx(U5,{asChild:!0,...a,children:S.jsx(Bt.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":afe(s.value)?"":void 0,...i,ref:l,onClick:rt(i.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&p(m)}),onPointerDown:rt(i.onPointerDown,m=>{u.current=m.pointerType;const y=m.target;y.hasPointerCapture(m.pointerId)&&y.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(p(m),m.preventDefault())}),onKeyDown:rt(i.onKeyDown,m=>{const y=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&d(m.key),!(y&&m.key===" ")&&Wdt.includes(m.key)&&(p(),m.preventDefault())})})})});Mue.displayName=$ue;var Lue="SelectValue",Due=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:s="",...o}=t,l=Gd(Lue,n),{onValueNodeHasChildrenChange:c}=l,u=a!==void 0,f=dn(e,l.onValueNodeChange);return Si(()=>{c(u)},[c,u]),S.jsx(Bt.span,{...o,ref:f,style:{pointerEvents:"none"},children:afe(l.value)?S.jsx(S.Fragment,{children:s}):a})});Due.displayName=Lue;var Zdt="SelectIcon",Fue=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return S.jsx(Bt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});Fue.displayName=Zdt;var Xdt="SelectPortal",Bue=t=>S.jsx(L1,{asChild:!0,...t});Bue.displayName=Xdt;var Mp="SelectContent",Uue=k.forwardRef((t,e)=>{const n=Gd(Mp,t.__scopeSelect),[r,i]=k.useState();if(Si(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Xy.createPortal(S.jsx(zue,{scope:t.__scopeSelect,children:S.jsx(EO.Slot,{scope:t.__scopeSelect,children:S.jsx("div",{children:t.children})})}),a):null}return S.jsx(Vue,{...t,ref:e})});Uue.displayName=Mp;var el=10,[zue,Kd]=Pv(Mp),Jdt="SelectContentImpl",Qdt=Mdt("SelectContent.RemoveScroll"),Vue=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:y,...g}=t,v=Gd(Mp,n),[w,_]=k.useState(null),[x,E]=k.useState(null),T=dn(e,$=>_($)),[O,R]=k.useState(null),[M,N]=k.useState(null),j=AO(n),[U,B]=k.useState(!1),V=k.useRef(!1);k.useEffect(()=>{if(w)return V5(w)},[w]),M5();const Y=k.useCallback($=>{const[ie,...q]=j().map(de=>de.ref.current),[fe]=q.slice(-1),me=document.activeElement;for(const de of $)if(de===me||(de==null||de.scrollIntoView({block:"nearest"}),de===ie&&x&&(x.scrollTop=0),de===fe&&x&&(x.scrollTop=x.scrollHeight),de==null||de.focus(),document.activeElement!==me))return},[j,x]),X=k.useCallback(()=>Y([O,w]),[Y,O,w]);k.useEffect(()=>{U&&X()},[U,X]);const{onOpenChange:z,triggerPointerDownPosRef:G}=v;k.useEffect(()=>{if(w){let $={x:0,y:0};const ie=fe=>{var me,de;$={x:Math.abs(Math.round(fe.pageX)-(((me=G.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((de=G.current)==null?void 0:de.y)??0))}},q=fe=>{$.x<=10&&$.y<=10?fe.preventDefault():w.contains(fe.target)||z(!1),document.removeEventListener("pointermove",ie),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",q,{capture:!0})}}},[w,z,G]),k.useEffect(()=>{const $=()=>z(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[z]);const[ae,ue]=sfe($=>{const ie=j().filter(me=>!me.disabled),q=ie.find(me=>me.ref.current===document.activeElement),fe=ofe(ie,$,q);fe&&setTimeout(()=>fe.ref.current.focus())}),L=k.useCallback(($,ie,q)=>{const fe=!V.current&&!q;(v.value!==void 0&&v.value===ie||fe)&&(R($),fe&&(V.current=!0))},[v.value]),K=k.useCallback(()=>w==null?void 0:w.focus(),[w]),Q=k.useCallback(($,ie,q)=>{const fe=!V.current&&!q;(v.value!==void 0&&v.value===ie||fe)&&N($)},[v.value]),re=r==="popper"?z4:Wue,F=re===z4?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:y}:{};return S.jsx(zue,{scope:n,content:w,viewport:x,onViewportChange:E,itemRefCallback:L,selectedItem:O,onItemLeave:K,itemTextRefCallback:Q,focusSelectedItem:X,selectedItemText:M,position:r,isPositioned:U,searchRef:ae,children:S.jsx(F1,{as:Qdt,allowPinchZoom:!0,children:S.jsx($1,{asChild:!0,trapped:v.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:rt(i,$=>{var ie;(ie=v.trigger)==null||ie.focus({preventScroll:!0}),$.preventDefault()}),children:S.jsx(j1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:S.jsx(re,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:$=>$.preventDefault(),...g,...F,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:rt(g.onKeyDown,$=>{const ie=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!ie&&$.key.length===1&&ue($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let fe=j().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes($.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const me=$.target,de=fe.indexOf(me);fe=fe.slice(de+1)}setTimeout(()=>Y(fe)),$.preventDefault()}})})})})})})});Vue.displayName=Jdt;var eht="SelectItemAlignedPosition",Wue=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Gd(Mp,n),s=Kd(Mp,n),[o,l]=k.useState(null),[c,u]=k.useState(null),f=dn(e,T=>u(T)),d=AO(n),h=k.useRef(!1),p=k.useRef(!0),{viewport:m,selectedItem:y,selectedItemText:g,focusSelectedItem:v}=s,w=k.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&m&&y&&g){const T=a.trigger.getBoundingClientRect(),O=c.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),M=g.getBoundingClientRect();if(a.dir!=="rtl"){const me=M.left-O.left,de=R.left-me,_e=T.left-de,Oe=T.width+_e,ee=Math.max(Oe,O.width),Ee=window.innerWidth-el,Qe=n5(de,[el,Math.max(el,Ee-ee)]);o.style.minWidth=Oe+"px",o.style.left=Qe+"px"}else{const me=O.right-M.right,de=window.innerWidth-R.right-me,_e=window.innerWidth-T.right-de,Oe=T.width+_e,ee=Math.max(Oe,O.width),Ee=window.innerWidth-el,Qe=n5(de,[el,Math.max(el,Ee-ee)]);o.style.minWidth=Oe+"px",o.style.right=Qe+"px"}const N=d(),j=window.innerHeight-el*2,U=m.scrollHeight,B=window.getComputedStyle(c),V=parseInt(B.borderTopWidth,10),Y=parseInt(B.paddingTop,10),X=parseInt(B.borderBottomWidth,10),z=parseInt(B.paddingBottom,10),G=V+Y+U+z+X,ae=Math.min(y.offsetHeight*5,G),ue=window.getComputedStyle(m),L=parseInt(ue.paddingTop,10),K=parseInt(ue.paddingBottom,10),Q=T.top+T.height/2-el,re=j-Q,F=y.offsetHeight/2,$=y.offsetTop+F,ie=V+Y+$,q=G-ie;if(ie<=Q){const me=N.length>0&&y===N[N.length-1].ref.current;o.style.bottom="0px";const de=c.clientHeight-m.offsetTop-m.offsetHeight,_e=Math.max(re,F+(me?K:0)+de+X),Oe=ie+_e;o.style.height=Oe+"px"}else{const me=N.length>0&&y===N[0].ref.current;o.style.top="0px";const _e=Math.max(Q,V+m.offsetTop+(me?L:0)+F)+q;o.style.height=_e+"px",m.scrollTop=ie-Q+m.offsetTop}o.style.margin=`${el}px 0`,o.style.minHeight=ae+"px",o.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[d,a.trigger,a.valueNode,o,c,m,y,g,a.dir,r]);Si(()=>w(),[w]);const[_,x]=k.useState();Si(()=>{c&&x(window.getComputedStyle(c).zIndex)},[c]);const E=k.useCallback(T=>{T&&p.current===!0&&(w(),v==null||v(),p.current=!1)},[w,v]);return S.jsx(nht,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:h,onScrollButtonChange:E,children:S.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:S.jsx(Bt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Wue.displayName=eht;var tht="SelectPopperPosition",z4=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=el,...a}=t,s=kO(n);return S.jsx(I$,{...s,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});z4.displayName=tht;var[nht,s6]=Pv(Mp,{}),V4="SelectViewport",Hue=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=Kd(V4,n),s=s6(V4,n),o=dn(e,a.onViewportChange),l=k.useRef(0);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),S.jsx(EO.Slot,{scope:n,children:S.jsx(Bt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:rt(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&f){const h=Math.abs(l.current-u.scrollTop);if(h>0){const p=window.innerHeight-el*2,m=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),g=Math.max(m,y);if(g<p){const v=g+h,w=Math.min(p,v),_=v-w;f.style.height=w+"px",f.style.bottom==="0px"&&(u.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Hue.displayName=V4;var que="SelectGroup",[rht,iht]=Pv(que),aht=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=yl();return S.jsx(rht,{scope:n,id:i,children:S.jsx(Bt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});aht.displayName=que;var Gue="SelectLabel",Kue=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=iht(Gue,n);return S.jsx(Bt.div,{id:i.id,...r,ref:e})});Kue.displayName=Gue;var r5="SelectItem",[sht,Yue]=Pv(r5),Zue=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...s}=t,o=Gd(r5,n),l=Kd(r5,n),c=o.value===r,[u,f]=k.useState(a??""),[d,h]=k.useState(!1),p=dn(e,v=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,v,r,i)}),m=yl(),y=k.useRef("touch"),g=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return S.jsx(sht,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:k.useCallback(v=>{f(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:S.jsx(EO.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:S.jsx(Bt.div,{role:"option","aria-labelledby":m,"data-highlighted":d?"":void 0,"aria-selected":c&&d,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:p,onFocus:rt(s.onFocus,()=>h(!0)),onBlur:rt(s.onBlur,()=>h(!1)),onClick:rt(s.onClick,()=>{y.current!=="mouse"&&g()}),onPointerUp:rt(s.onPointerUp,()=>{y.current==="mouse"&&g()}),onPointerDown:rt(s.onPointerDown,v=>{y.current=v.pointerType}),onPointerMove:rt(s.onPointerMove,v=>{var w;y.current=v.pointerType,i?(w=l.onItemLeave)==null||w.call(l):y.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:rt(s.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:rt(s.onKeyDown,v=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&v.key===" "||(Hdt.includes(v.key)&&g(),v.key===" "&&v.preventDefault())})})})})});Zue.displayName=r5;var Q0="SelectItemText",Xue=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,s=Gd(Q0,n),o=Kd(Q0,n),l=Yue(Q0,n),c=Ydt(Q0,n),[u,f]=k.useState(null),d=dn(e,g=>f(g),l.onItemTextChange,g=>{var v;return(v=o.itemTextRefCallback)==null?void 0:v.call(o,g,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=k.useMemo(()=>S.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:y}=c;return Si(()=>(m(p),()=>y(p)),[m,y,p]),S.jsxs(S.Fragment,{children:[S.jsx(Bt.span,{id:l.textId,...a,ref:d}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Xy.createPortal(a.children,s.valueNode):null]})});Xue.displayName=Q0;var Jue="SelectItemIndicator",Que=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Yue(Jue,n).isSelected?S.jsx(Bt.span,{"aria-hidden":!0,...r,ref:e}):null});Que.displayName=Jue;var W4="SelectScrollUpButton",efe=k.forwardRef((t,e)=>{const n=Kd(W4,t.__scopeSelect),r=s6(W4,t.__scopeSelect),[i,a]=k.useState(!1),s=dn(e,r.onScrollButtonChange);return Si(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;a(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?S.jsx(nfe,{...t,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});efe.displayName=W4;var H4="SelectScrollDownButton",tfe=k.forwardRef((t,e)=>{const n=Kd(H4,t.__scopeSelect),r=s6(H4,t.__scopeSelect),[i,a]=k.useState(!1),s=dn(e,r.onScrollButtonChange);return Si(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;a(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?S.jsx(nfe,{...t,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});tfe.displayName=H4;var nfe=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=Kd("SelectScrollButton",n),s=k.useRef(null),o=AO(n),l=k.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),Si(()=>{var u;const c=o().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),S.jsx(Bt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:rt(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:rt(i.onPointerMove,()=>{var c;(c=a.onItemLeave)==null||c.call(a),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:rt(i.onPointerLeave,()=>{l()})})}),oht="SelectSeparator",rfe=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return S.jsx(Bt.div,{"aria-hidden":!0,...r,ref:e})});rfe.displayName=oht;var q4="SelectArrow",lht=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=kO(n),a=Gd(q4,n),s=Kd(q4,n);return a.open&&s.position==="popper"?S.jsx(R$,{...i,...r,ref:e}):null});lht.displayName=q4;var cht="SelectBubbleInput",ife=k.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=k.useRef(null),a=dn(r,i),s=Iue(e);return k.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const f=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(f)}},[s,e]),S.jsx(Bt.select,{...n,style:{...Rue,...n.style},ref:a,defaultValue:e})});ife.displayName=cht;function afe(t){return t===""||t===void 0}function sfe(t){const e=xl(t),n=k.useRef(""),r=k.useRef(0),i=k.useCallback(s=>{const o=n.current+s;e(o),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),a=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function ofe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let s=uht(t,Math.max(a,0));i.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function uht(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var fht=jue,lfe=Mue,dht=Due,hht=Fue,pht=Bue,cfe=Uue,mht=Hue,ufe=Kue,ffe=Zue,ght=Xue,yht=Que,dfe=efe,hfe=tfe,pfe=rfe;const mfe=fht,gfe=dht,o6=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(lfe,{ref:r,className:xt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,S.jsx(hht,{asChild:!0,children:S.jsx(sE,{className:"h-4 w-4 opacity-50"})})]}));o6.displayName=lfe.displayName;const yfe=k.forwardRef(({className:t,...e},n)=>S.jsx(dfe,{ref:n,className:xt("flex cursor-default items-center justify-center py-1",t),...e,children:S.jsx(_be,{className:"h-4 w-4"})}));yfe.displayName=dfe.displayName;const vfe=k.forwardRef(({className:t,...e},n)=>S.jsx(hfe,{ref:n,className:xt("flex cursor-default items-center justify-center py-1",t),...e,children:S.jsx(sE,{className:"h-4 w-4"})}));vfe.displayName=hfe.displayName;const l6=k.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>S.jsx(pht,{children:S.jsxs(cfe,{ref:i,className:xt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[S.jsx(yfe,{}),S.jsx(mht,{className:xt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),S.jsx(vfe,{})]})}));l6.displayName=cfe.displayName;const vht=k.forwardRef(({className:t,...e},n)=>S.jsx(ufe,{ref:n,className:xt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));vht.displayName=ufe.displayName;const c6=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(ffe,{ref:r,className:xt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(yht,{children:S.jsx(v$,{className:"h-4 w-4"})})}),S.jsx(ght,{children:e})]}));c6.displayName=ffe.displayName;const wht=k.forwardRef(({className:t,...e},n)=>S.jsx(pfe,{ref:n,className:xt("-mx-1 my-1 h-px bg-muted",t),...e}));wht.displayName=pfe.displayName;const wfe=6048e5,bht=864e5,xq=Symbol.for("constructDateFrom");function ii(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&xq in t?t[xq](e):t instanceof Date?new t.constructor(e):new Date(e)}function Bn(t,e){return ii(e||t,t)}function bfe(t,e,n){const r=Bn(t,n==null?void 0:n.in);return isNaN(e)?ii(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function _fe(t,e,n){const r=Bn(t,n==null?void 0:n.in);if(isNaN(e))return ii(t,NaN);if(!e)return r;const i=r.getDate(),a=ii(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let _ht={};function g_(){return _ht}function qy(t,e){var o,l,c,u;const n=g_(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Bn(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function w1(t,e){return qy(t,{...e,weekStartsOn:1})}function xfe(t,e){const n=Bn(t,e==null?void 0:e.in),r=n.getFullYear(),i=ii(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=w1(i),s=ii(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=w1(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Sq(t){const e=Bn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Nv(t,...e){const n=ii.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function b1(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function u6(t,e,n){const[r,i]=Nv(n==null?void 0:n.in,t,e),a=b1(r),s=b1(i),o=+a-Sq(a),l=+s-Sq(s);return Math.round((o-l)/bht)}function xht(t,e){const n=xfe(t,e),r=ii(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),w1(r)}function Sht(t,e,n){return bfe(t,e*7,n)}function Eht(t,e,n){return _fe(t,e*12,n)}function Aht(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=ii.bind(null,i));const a=Bn(i,r);(!n||n<a||isNaN(+a))&&(n=a)}),ii(r,n||NaN)}function kht(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=ii.bind(null,i));const a=Bn(i,r);(!n||n>a||isNaN(+a))&&(n=a)}),ii(r,n||NaN)}function Oht(t,e,n){const[r,i]=Nv(n==null?void 0:n.in,t,e);return+b1(r)==+b1(i)}function Sfe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Tht(t){return!(!Sfe(t)&&typeof t!="number"||isNaN(+Bn(t)))}function Efe(t,e,n){const[r,i]=Nv(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function Cht(t,e){const n=Bn(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Afe(t,e){const[n,r]=Nv(t,e.start,e.end);return{start:n,end:r}}function Pht(t,e){const{start:n,end:r}=Afe(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0),s.setDate(1);let o=1;const l=[];for(;+s<=a;)l.push(ii(n,s)),s.setMonth(s.getMonth()+o);return i?l.reverse():l}function Nht(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Iht(t,e){const n=Bn(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function kfe(t,e){const n=Bn(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Rht(t,e){const{start:n,end:r}=Afe(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0),s.setMonth(0,1);let o=1;const l=[];for(;+s<=a;)l.push(ii(n,s)),s.setFullYear(s.getFullYear()+o);return i?l.reverse():l}function Ofe(t,e){var o,l,c,u;const n=g_(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Bn(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function jht(t,e){return Ofe(t,{...e,weekStartsOn:1})}const $ht={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Mht=(t,e,n)=>{let r;const i=$ht[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function XP(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Lht={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Dht={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fht={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bht={date:XP({formats:Lht,defaultWidth:"full"}),time:XP({formats:Dht,defaultWidth:"full"}),dateTime:XP({formats:Fht,defaultWidth:"full"})},Uht={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zht=(t,e,n,r)=>Uht[t];function R0(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Vht={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Wht={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Hht={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qht={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ght={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kht={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yht=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Zht={ordinalNumber:Yht,era:R0({values:Vht,defaultWidth:"wide"}),quarter:R0({values:Wht,defaultWidth:"wide",argumentCallback:t=>t-1}),month:R0({values:Hht,defaultWidth:"wide"}),day:R0({values:qht,defaultWidth:"wide"}),dayPeriod:R0({values:Ght,defaultWidth:"wide",formattingValues:Kht,defaultFormattingWidth:"wide"})};function j0(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?Jht(o,f=>f.test(s)):Xht(o,f=>f.test(s));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function Xht(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Jht(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Qht(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const ept=/^(\d+)(th|st|nd|rd)?/i,tpt=/\d+/i,npt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rpt={any:[/^b/i,/^(a|c)/i]},ipt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},apt={any:[/1/i,/2/i,/3/i,/4/i]},spt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},opt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lpt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cpt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},upt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fpt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},dpt={ordinalNumber:Qht({matchPattern:ept,parsePattern:tpt,valueCallback:t=>parseInt(t,10)}),era:j0({matchPatterns:npt,defaultMatchWidth:"wide",parsePatterns:rpt,defaultParseWidth:"any"}),quarter:j0({matchPatterns:ipt,defaultMatchWidth:"wide",parsePatterns:apt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:j0({matchPatterns:spt,defaultMatchWidth:"wide",parsePatterns:opt,defaultParseWidth:"any"}),day:j0({matchPatterns:lpt,defaultMatchWidth:"wide",parsePatterns:cpt,defaultParseWidth:"any"}),dayPeriod:j0({matchPatterns:upt,defaultMatchWidth:"any",parsePatterns:fpt,defaultParseWidth:"any"})},Wm={code:"en-US",formatDistance:Mht,formatLong:Bht,formatRelative:zht,localize:Zht,match:dpt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hpt(t,e){const n=Bn(t,e==null?void 0:e.in);return u6(n,kfe(n))+1}function f6(t,e){const n=Bn(t,e==null?void 0:e.in),r=+w1(n)-+xht(n);return Math.round(r/wfe)+1}function Tfe(t,e){var u,f,d,h;const n=Bn(t,e==null?void 0:e.in),r=n.getFullYear(),i=g_(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(d=i.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=ii((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=qy(s,e),l=ii((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const c=qy(l,e);return+n>=+o?r+1:+n>=+c?r:r-1}function ppt(t,e){var o,l,c,u;const n=g_(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=Tfe(t,e),a=ii((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),qy(a,e)}function d6(t,e){const n=Bn(t,e==null?void 0:e.in),r=+qy(n,e)-+ppt(n,e);return Math.round(r/wfe)+1}function Pn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ef={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Pn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Pn(n+1,2)},d(t,e){return Pn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Pn(t.getHours()%12||12,e.length)},H(t,e){return Pn(t.getHours(),e.length)},m(t,e){return Pn(t.getMinutes(),e.length)},s(t,e){return Pn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Pn(i,e.length)}},Nm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Eq={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ef.y(t,e)},Y:function(t,e,n,r){const i=Tfe(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Pn(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Pn(a,e.length)},R:function(t,e){const n=xfe(t);return Pn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Pn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Pn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Pn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ef.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Pn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=d6(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Pn(i,e.length)},I:function(t,e,n){const r=f6(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Pn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ef.d(t,e)},D:function(t,e,n){const r=hpt(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Pn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Pn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Pn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Pn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Nm.noon:r===0?i=Nm.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Nm.evening:r>=12?i=Nm.afternoon:r>=4?i=Nm.morning:i=Nm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ef.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ef.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Pn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Pn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ef.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ef.s(t,e)},S:function(t,e){return Ef.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return kq(r);case"XXXX":case"XX":return Ph(r);case"XXXXX":case"XXX":default:return Ph(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return kq(r);case"xxxx":case"xx":return Ph(r);case"xxxxx":case"xxx":default:return Ph(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Aq(r,":");case"OOOO":default:return"GMT"+Ph(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Aq(r,":");case"zzzz":default:return"GMT"+Ph(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Pn(r,e.length)},T:function(t,e,n){return Pn(+t,e.length)}};function Aq(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Pn(a,2)}function kq(t,e){return t%60===0?(t>0?"-":"+")+Pn(Math.abs(t)/60,2):Ph(t,e)}function Ph(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Pn(Math.trunc(r/60),2),a=Pn(r%60,2);return n+i+e+a}const Oq=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Cfe=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mpt=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Oq(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Oq(r,e)).replace("{{time}}",Cfe(i,e))},gpt={p:Cfe,P:mpt},ypt=/^D+$/,vpt=/^Y+$/,wpt=["D","DD","YY","YYYY"];function bpt(t){return ypt.test(t)}function _pt(t){return vpt.test(t)}function xpt(t,e,n){const r=Spt(t,e,n);if(console.warn(r),wpt.includes(t))throw new RangeError(r)}function Spt(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ept=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Apt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kpt=/^'([^]*?)'?$/,Opt=/''/g,Tpt=/[a-zA-Z]/;function Zh(t,e,n){var u,f,d,h,p,m,y,g;const r=g_(),i=(n==null?void 0:n.locale)??r.locale??Wm,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((g=(y=r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??0,o=Bn(t,n==null?void 0:n.in);if(!Tht(o))throw new RangeError("Invalid time value");let l=e.match(Apt).map(v=>{const w=v[0];if(w==="p"||w==="P"){const _=gpt[w];return _(v,i.formatLong)}return v}).join("").match(Ept).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:Cpt(v)};if(Eq[w])return{isToken:!0,value:v};if(w.match(Tpt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(v=>{if(!v.isToken)return v.value;const w=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&_pt(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&bpt(w))&&xpt(w,e,String(t));const _=Eq[w[0]];return _(o,w,i.localize,c)}).join("")}function Cpt(t){const e=t.match(kpt);return e?e[1].replace(Opt,"'"):t}function Ppt(t,e){const n=Bn(t,e==null?void 0:e.in),r=n.getFullYear(),i=n.getMonth(),a=ii(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function Npt(t,e){return Bn(t,e==null?void 0:e.in).getMonth()}function Ipt(t,e){return Bn(t,e==null?void 0:e.in).getFullYear()}function Rpt(t,e){return+Bn(t)>+Bn(e)}function jpt(t,e){return+Bn(t)<+Bn(e)}function $pt(t,e,n){const[r,i]=Nv(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function Mpt(t,e,n){const[r,i]=Nv(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()}function Lpt(t,e,n){const r=Bn(t,n==null?void 0:n.in),i=r.getFullYear(),a=r.getDate(),s=ii(t,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=Ppt(s);return r.setMonth(e,Math.min(a,o)),r}function Dpt(t,e,n){const r=Bn(t,n==null?void 0:n.in);return isNaN(+r)?ii(t,NaN):(r.setFullYear(e),r)}function Fpt(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const JP={},ew={};function Xh(t,e){try{const r=(JP[t]||(JP[t]=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format))(e).split("GMT")[1];return r in ew?ew[r]:Tq(r,r.split(":"))}catch{if(t in ew)return ew[t];const n=t==null?void 0:t.match(Bpt);return n?Tq(t,n.slice(1)):NaN}}const Bpt=/([+-]\d\d):?(\d\d)?/;function Tq(t,e){const n=+(e[0]||0),r=+(e[1]||0),i=+(e[2]||0)/60;return ew[t]=n*60+r>0?n*60+r+i:n*60-r-i}class lc extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Xh(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),Pfe(this),G4(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new lc(...n,e):new lc(Date.now(),e)}withTimeZone(e){return new lc(+this,e)}getTimezoneOffset(){const e=-Xh(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),G4(this),+this}[Symbol.for("constructDateFrom")](e){return new lc(+new Date(e),this.timeZone)}}const Cq=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!Cq.test(t))return;const e=t.replace(Cq,"$1UTC");lc.prototype[e]&&(t.startsWith("get")?lc.prototype[t]=function(){return this.internal[e]()}:(lc.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),Upt(this),+this},lc.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),G4(this),+this}))});function G4(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-Xh(t.timeZone,t)*60))}function Upt(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),Pfe(t)}function Pfe(t){const e=Xh(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),a=-new Date(+r).getTimezoneOffset(),s=i-a,o=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();s&&o&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+s);const l=i-n;l&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+l);const c=new Date(+t);c.setUTCSeconds(0);const u=i>0?c.getSeconds():(c.getSeconds()-60)%60,f=Math.round(-(Xh(t.timeZone,t)*60))%60;(f||u)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+f+u));const d=Xh(t.timeZone,t),h=d>0?Math.floor(d):Math.ceil(d),m=-new Date(+t).getTimezoneOffset()-h,y=h!==n,g=m-l;if(y&&g){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+g);const v=Xh(t.timeZone,t),w=v>0?Math.floor(v):Math.ceil(v),_=h-w;_&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+_),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+_))}}class ua extends lc{static tz(e,...n){return n.length?new ua(...n,e):new ua(Date.now(),e)}toISOString(){const[e,n,r]=this.tzComponents(),i=`${e}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,r,i]=this.internal.toUTCString().split(" ");return`${e==null?void 0:e.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${e} GMT${n}${r}${i} (${Fpt(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",r=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),i=String(Math.abs(e)%60).padStart(2,"0");return[n,r,i]}withTimeZone(e){return new ua(+this,e)}[Symbol.for("constructDateFrom")](e){return new ua(+new Date(e),this.timeZone)}}const Pq=5,zpt=4;function Vpt(t,e){const n=e.startOfMonth(t),r=n.getDay()>0?n.getDay():7,i=e.addDays(t,-r+1),a=e.addDays(i,Pq*7-1);return e.getMonth(t)===e.getMonth(a)?Pq:zpt}function Nfe(t,e){const n=e.startOfMonth(t),r=n.getDay();return r===1?n:r===0?e.addDays(n,-1*6):e.addDays(n,-1*(r-1))}function Wpt(t,e){const n=Nfe(t,e),r=Vpt(t,e);return e.addDays(n,r*7-1)}const Ife={...Wm,labels:{labelDayButton:(t,e,n,r)=>{let i;r&&typeof r.format=="function"?i=r.format.bind(r):i=(s,o)=>Zh(s,o,{locale:Wm,...n});let a=i(t,"PPPP");return e.today&&(a=`Today, ${a}`),e.selected&&(a=`${a}, selected`),a},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:t=>`Week ${t}`,labelYearDropdown:"Choose the Year",labelGrid:(t,e,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(i,a)=>Zh(i,a,{locale:Wm,...e}),r(t,"LLLL yyyy")},labelGridcell:(t,e,n,r)=>{let i;r&&typeof r.format=="function"?i=r.format.bind(r):i=(s,o)=>Zh(s,o,{locale:Wm,...n});let a=i(t,"PPPP");return e!=null&&e.today&&(a=`Today, ${a}`),a},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(t,e,n)=>{let r;return n&&typeof n.format=="function"?r=n.format.bind(n):r=(i,a)=>Zh(i,a,{locale:Wm,...e}),r(t,"cccc")}}};class Bs{constructor(e,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?ua.tz(this.options.timeZone):new this.Date},this.newDate=(r,i,a)=>{var s;return(s=this.overrides)!=null&&s.newDate?this.overrides.newDate(r,i,a):this.options.timeZone?new ua(r,i,a,this.options.timeZone):new Date(r,i,a)},this.addDays=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addDays?this.overrides.addDays(r,i):bfe(r,i)},this.addMonths=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addMonths?this.overrides.addMonths(r,i):_fe(r,i)},this.addWeeks=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addWeeks?this.overrides.addWeeks(r,i):Sht(r,i)},this.addYears=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addYears?this.overrides.addYears(r,i):Eht(r,i)},this.differenceInCalendarDays=(r,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):u6(r,i)},this.differenceInCalendarMonths=(r,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):Efe(r,i)},this.eachMonthOfInterval=r=>{var i;return(i=this.overrides)!=null&&i.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):Pht(r)},this.eachYearOfInterval=r=>{var o;const i=(o=this.overrides)!=null&&o.eachYearOfInterval?this.overrides.eachYearOfInterval(r):Rht(r),a=new Set(i.map(l=>this.getYear(l)));if(a.size===i.length)return i;const s=[];return a.forEach(l=>{s.push(new Date(l,0,1))}),s},this.endOfBroadcastWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Wpt(r,this)},this.endOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfISOWeek?this.overrides.endOfISOWeek(r):jht(r)},this.endOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.endOfMonth?this.overrides.endOfMonth(r):Cht(r)},this.endOfWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.endOfWeek?this.overrides.endOfWeek(r,i):Ofe(r,this.options)},this.endOfYear=r=>{var i;return(i=this.overrides)!=null&&i.endOfYear?this.overrides.endOfYear(r):Iht(r)},this.format=(r,i,a)=>{var o;const s=(o=this.overrides)!=null&&o.format?this.overrides.format(r,i,this.options):Zh(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(s):s},this.getISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.getISOWeek?this.overrides.getISOWeek(r):f6(r)},this.getMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getMonth?this.overrides.getMonth(r,this.options):Npt(r,this.options)},this.getYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getYear?this.overrides.getYear(r,this.options):Ipt(r,this.options)},this.getWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getWeek?this.overrides.getWeek(r,this.options):d6(r,this.options)},this.isAfter=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isAfter?this.overrides.isAfter(r,i):Rpt(r,i)},this.isBefore=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isBefore?this.overrides.isBefore(r,i):jpt(r,i)},this.isDate=r=>{var i;return(i=this.overrides)!=null&&i.isDate?this.overrides.isDate(r):Sfe(r)},this.isSameDay=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameDay?this.overrides.isSameDay(r,i):Oht(r,i)},this.isSameMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameMonth?this.overrides.isSameMonth(r,i):$pt(r,i)},this.isSameYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameYear?this.overrides.isSameYear(r,i):Mpt(r,i)},this.max=r=>{var i;return(i=this.overrides)!=null&&i.max?this.overrides.max(r):Aht(r)},this.min=r=>{var i;return(i=this.overrides)!=null&&i.min?this.overrides.min(r):kht(r)},this.setMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.setMonth?this.overrides.setMonth(r,i):Lpt(r,i)},this.setYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.setYear?this.overrides.setYear(r,i):Dpt(r,i)},this.startOfBroadcastWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):Nfe(r,this)},this.startOfDay=r=>{var i;return(i=this.overrides)!=null&&i.startOfDay?this.overrides.startOfDay(r):b1(r)},this.startOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.startOfISOWeek?this.overrides.startOfISOWeek(r):w1(r)},this.startOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.startOfMonth?this.overrides.startOfMonth(r):Nht(r)},this.startOfWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.startOfWeek?this.overrides.startOfWeek(r,this.options):qy(r,this.options)},this.startOfYear=r=>{var i;return(i=this.overrides)!=null&&i.startOfYear?this.overrides.startOfYear(r):kfe(r)},this.options={locale:Ife,...e},this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,r=>n[r]||r)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){var n;const e=(n=this.options.locale)==null?void 0:n.code;return e&&Bs.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:n,timeZone:r,numerals:i}=this.options,a=n==null?void 0:n.code;if(a&&Bs.yearFirstLocales.has(a))try{return new Intl.DateTimeFormat(a,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(e)}catch{}const s=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,s)}}Bs.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Pc=new Bs;class Rfe{constructor(e,n,r=Pc){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r,this.isoDate=r.format(e,"yyyy-MM-dd"),this.displayMonthId=r.format(n,"yyyy-MM"),this.dateMonthId=r.format(e,"yyyy-MM")}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class Hpt{constructor(e,n){this.date=e,this.weeks=n}}class qpt{constructor(e,n){this.days=n,this.weekNumber=e}}function Gpt(t){return se.createElement("button",{...t})}function Kpt(t){return se.createElement("span",{...t})}function Ypt(t){const{size:e=24,orientation:n="left",className:r}=t;return se.createElement("svg",{className:r,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&se.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&se.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&se.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&se.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Zpt(t){const{day:e,modifiers:n,...r}=t;return se.createElement("td",{...r})}function Xpt(t){const{day:e,modifiers:n,...r}=t,i=se.useRef(null);return se.useEffect(()=>{var a;n.focused&&((a=i.current)==null||a.focus())},[n.focused]),se.createElement("button",{ref:i,...r})}var Et;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(Et||(Et={}));var vr;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(vr||(vr={}));var pl;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(pl||(pl={}));var Ss;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Ss||(Ss={}));function Jpt(t){const{options:e,className:n,components:r,classNames:i,...a}=t,s=[i[Et.Dropdown],n].join(" "),o=e==null?void 0:e.find(({value:l})=>l===a.value);return se.createElement("span",{"data-disabled":a.disabled,className:i[Et.DropdownRoot]},se.createElement(r.Select,{className:s,...a},e==null?void 0:e.map(({value:l,label:c,disabled:u})=>se.createElement(r.Option,{key:l,value:l,disabled:u},c))),se.createElement("span",{className:i[Et.CaptionLabel],"aria-hidden":!0},o==null?void 0:o.label,se.createElement(r.Chevron,{orientation:"down",size:18,className:i[Et.Chevron]})))}function Qpt(t){return se.createElement("div",{...t})}function emt(t){return se.createElement("div",{...t})}function tmt(t){const{calendarMonth:e,displayIndex:n,...r}=t;return se.createElement("div",{...r},t.children)}function nmt(t){const{calendarMonth:e,displayIndex:n,...r}=t;return se.createElement("div",{...r})}function rmt(t){return se.createElement("table",{...t})}function imt(t){return se.createElement("div",{...t})}const jfe=k.createContext(void 0);function y_(){const t=k.useContext(jfe);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function amt(t){const{components:e}=y_();return se.createElement(e.Dropdown,{...t})}function smt(t){const{onPreviousClick:e,onNextClick:n,previousMonth:r,nextMonth:i,...a}=t,{components:s,classNames:o,labels:{labelPrevious:l,labelNext:c}}=y_(),u=k.useCallback(d=>{i&&(n==null||n(d))},[i,n]),f=k.useCallback(d=>{r&&(e==null||e(d))},[r,e]);return se.createElement("nav",{...a},se.createElement(s.PreviousMonthButton,{type:"button",className:o[Et.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:f},se.createElement(s.Chevron,{disabled:r?void 0:!0,className:o[Et.Chevron],orientation:"left"})),se.createElement(s.NextMonthButton,{type:"button",className:o[Et.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":c(i),onClick:u},se.createElement(s.Chevron,{disabled:i?void 0:!0,orientation:"right",className:o[Et.Chevron]})))}function omt(t){const{components:e}=y_();return se.createElement(e.Button,{...t})}function lmt(t){return se.createElement("option",{...t})}function cmt(t){const{components:e}=y_();return se.createElement(e.Button,{...t})}function umt(t){const{rootRef:e,...n}=t;return se.createElement("div",{...n,ref:e})}function fmt(t){return se.createElement("select",{...t})}function dmt(t){const{week:e,...n}=t;return se.createElement("tr",{...n})}function hmt(t){return se.createElement("th",{...t})}function pmt(t){return se.createElement("thead",{"aria-hidden":!0},se.createElement("tr",{...t}))}function mmt(t){const{week:e,...n}=t;return se.createElement("th",{...n})}function gmt(t){return se.createElement("th",{...t})}function ymt(t){return se.createElement("tbody",{...t})}function vmt(t){const{components:e}=y_();return se.createElement(e.Dropdown,{...t})}const wmt=Object.freeze(Object.defineProperty({__proto__:null,Button:Gpt,CaptionLabel:Kpt,Chevron:Ypt,Day:Zpt,DayButton:Xpt,Dropdown:Jpt,DropdownNav:Qpt,Footer:emt,Month:tmt,MonthCaption:nmt,MonthGrid:rmt,Months:imt,MonthsDropdown:amt,Nav:smt,NextMonthButton:omt,Option:lmt,PreviousMonthButton:cmt,Root:umt,Select:fmt,Week:dmt,WeekNumber:mmt,WeekNumberHeader:gmt,Weekday:hmt,Weekdays:pmt,Weeks:ymt,YearsDropdown:vmt},Symbol.toStringTag,{value:"Module"}));function mu(t,e,n=!1,r=Pc){let{from:i,to:a}=t;const{differenceInCalendarDays:s,isSameDay:o}=r;return i&&a?(s(a,i)<0&&([i,a]=[a,i]),s(e,i)>=(n?1:0)&&s(a,e)>=(n?1:0)):!n&&a?o(a,e):!n&&i?o(i,e):!1}function h6(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function OO(t){return!!(t&&typeof t=="object"&&"from"in t)}function p6(t){return!!(t&&typeof t=="object"&&"after"in t)}function m6(t){return!!(t&&typeof t=="object"&&"before"in t)}function $fe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Mfe(t,e){return Array.isArray(t)&&t.every(e.isDate)}function gu(t,e,n=Pc){const r=Array.isArray(e)?e:[e],{isSameDay:i,differenceInCalendarDays:a,isAfter:s}=n;return r.some(o=>{if(typeof o=="boolean")return o;if(n.isDate(o))return i(t,o);if(Mfe(o,n))return o.some(l=>i(t,l));if(OO(o))return mu(o,t,!1,n);if($fe(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(t.getDay()):o.dayOfWeek===t.getDay();if(h6(o)){const l=a(o.before,t),c=a(o.after,t),u=l>0,f=c<0;return s(o.before,o.after)?f&&u:u||f}return p6(o)?a(t,o.after)>0:m6(o)?a(o.before,t)>0:typeof o=="function"?o(t):!1})}function bmt(t,e,n,r,i){const{disabled:a,hidden:s,modifiers:o,showOutsideDays:l,broadcastCalendar:c,today:u=i.today()}=e,{isSameDay:f,isSameMonth:d,startOfMonth:h,isBefore:p,endOfMonth:m,isAfter:y}=i,g=n&&h(n),v=r&&m(r),w={[vr.focused]:[],[vr.outside]:[],[vr.disabled]:[],[vr.hidden]:[],[vr.today]:[]},_={};for(const x of t){const{date:E,displayMonth:T}=x,O=!!(T&&!d(E,T)),R=!!(g&&p(E,g)),M=!!(v&&y(E,v)),N=!!(a&&gu(E,a,i)),j=!!(s&&gu(E,s,i))||R||M||!c&&!l&&O||c&&l===!1&&O,U=f(E,u);O&&w.outside.push(x),N&&w.disabled.push(x),j&&w.hidden.push(x),U&&w.today.push(x),o&&Object.keys(o).forEach(B=>{const V=o==null?void 0:o[B];V&&gu(E,V,i)&&(_[B]?_[B].push(x):_[B]=[x])})}return x=>{const E={[vr.focused]:!1,[vr.disabled]:!1,[vr.hidden]:!1,[vr.outside]:!1,[vr.today]:!1},T={};for(const O in w){const R=w[O];E[O]=R.some(M=>M===x)}for(const O in _)T[O]=_[O].some(R=>R===x);return{...E,...T}}}function _mt(t,e,n={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[a])=>(n[a]?i.push(n[a]):e[vr[a]]?i.push(e[vr[a]]):e[pl[a]]&&i.push(e[pl[a]]),i),[e[Et.Day]])}function xmt(t){return{...wmt,...t}}function Smt(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([n,r])=>{n.startsWith("data-")&&(e[n]=r)}),e}function Emt(){const t={};for(const e in Et)t[Et[e]]=`rdp-${Et[e]}`;for(const e in vr)t[vr[e]]=`rdp-${vr[e]}`;for(const e in pl)t[pl[e]]=`rdp-${pl[e]}`;for(const e in Ss)t[Ss[e]]=`rdp-${Ss[e]}`;return t}function Lfe(t,e,n){return(n??new Bs(e)).formatMonthYear(t)}const Amt=Lfe;function kmt(t,e,n){return(n??new Bs(e)).format(t,"d")}function Omt(t,e=Pc){return e.format(t,"LLLL")}function Tmt(t,e,n){return(n??new Bs(e)).format(t,"cccccc")}function Cmt(t,e=Pc){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function Pmt(){return""}function Dfe(t,e=Pc){return e.format(t,"yyyy")}const Nmt=Dfe,Imt=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Lfe,formatDay:kmt,formatMonthCaption:Amt,formatMonthDropdown:Omt,formatWeekNumber:Cmt,formatWeekNumberHeader:Pmt,formatWeekdayName:Tmt,formatYearCaption:Nmt,formatYearDropdown:Dfe},Symbol.toStringTag,{value:"Module"}));function Rmt(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...Imt,...t}}function g6(t,e,n,r){let i=(r??new Bs(n)).format(t,"PPPP");return e.today&&(i=`Today, ${i}`),e.selected&&(i=`${i}, selected`),i}const jmt=g6;function y6(t,e,n){return(n??new Bs(e)).formatMonthYear(t)}const $mt=y6;function Ffe(t,e,n,r){let i=(r??new Bs(n)).format(t,"PPPP");return e!=null&&e.today&&(i=`Today, ${i}`),i}function Bfe(t){return"Choose the Month"}function Ufe(){return""}const Mmt="Go to the Next Month";function zfe(t,e){return Mmt}function Vfe(t){return"Go to the Previous Month"}function Wfe(t,e,n){return(n??new Bs(e)).format(t,"cccc")}function Hfe(t,e){return`Week ${t}`}function qfe(t){return"Week Number"}function Gfe(t){return"Choose the Year"}const Lmt=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:$mt,labelDay:jmt,labelDayButton:g6,labelGrid:y6,labelGridcell:Ffe,labelMonthDropdown:Bfe,labelNav:Ufe,labelNext:zfe,labelPrevious:Vfe,labelWeekNumber:Hfe,labelWeekNumberHeader:qfe,labelWeekday:Wfe,labelYearDropdown:Gfe},Symbol.toStringTag,{value:"Module"})),Yo=(t,e,n)=>e||(n?typeof n=="function"?n:(...r)=>n:t);function Dmt(t,e){var r;const n=((r=e.locale)==null?void 0:r.labels)??{};return{...Lmt,...t??{},labelDayButton:Yo(g6,t==null?void 0:t.labelDayButton,n.labelDayButton),labelMonthDropdown:Yo(Bfe,t==null?void 0:t.labelMonthDropdown,n.labelMonthDropdown),labelNext:Yo(zfe,t==null?void 0:t.labelNext,n.labelNext),labelPrevious:Yo(Vfe,t==null?void 0:t.labelPrevious,n.labelPrevious),labelWeekNumber:Yo(Hfe,t==null?void 0:t.labelWeekNumber,n.labelWeekNumber),labelYearDropdown:Yo(Gfe,t==null?void 0:t.labelYearDropdown,n.labelYearDropdown),labelGrid:Yo(y6,t==null?void 0:t.labelGrid,n.labelGrid),labelGridcell:Yo(Ffe,t==null?void 0:t.labelGridcell,n.labelGridcell),labelNav:Yo(Ufe,t==null?void 0:t.labelNav,n.labelNav),labelWeekNumberHeader:Yo(qfe,t==null?void 0:t.labelWeekNumberHeader,n.labelWeekNumberHeader),labelWeekday:Yo(Wfe,t==null?void 0:t.labelWeekday,n.labelWeekday)}}function Fmt(t,e,n,r,i){const{startOfMonth:a,startOfYear:s,endOfYear:o,eachMonthOfInterval:l,getMonth:c}=i;return l({start:s(t),end:o(t)}).map(d=>{const h=r.formatMonthDropdown(d,i),p=c(d),m=e&&d<a(e)||n&&d>a(n)||!1;return{value:p,label:h,disabled:m}})}function Bmt(t,e={},n={}){let r={...e==null?void 0:e[Et.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n==null?void 0:n[i]}}),r}function Umt(t,e,n,r){const i=r??t.today(),a=n?t.startOfBroadcastWeek(i,t):e?t.startOfISOWeek(i):t.startOfWeek(i),s=[];for(let o=0;o<7;o++){const l=t.addDays(a,o);s.push(l)}return s}function zmt(t,e,n,r,i=!1){if(!t||!e)return;const{startOfYear:a,endOfYear:s,eachYearOfInterval:o,getYear:l}=r,c=a(t),u=s(e),f=o({start:c,end:u});return i&&f.reverse(),f.map(d=>{const h=n.formatYearDropdown(d,r);return{value:l(d),label:h,disabled:!1}})}function Vmt(t,e={}){var o;const{weekStartsOn:n,locale:r}=e,i=n??((o=r==null?void 0:r.options)==null?void 0:o.weekStartsOn)??0,a=l=>{const c=typeof l=="number"||typeof l=="string"?new Date(l):l;return new ua(c.getFullYear(),c.getMonth(),c.getDate(),12,0,0,t)},s=l=>{const c=a(l);return new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0)};return{today:()=>a(ua.tz(t)),newDate:(l,c,u)=>new ua(l,c,u,12,0,0,t),startOfDay:l=>a(l),startOfWeek:(l,c)=>{const u=a(l),f=(c==null?void 0:c.weekStartsOn)??i,d=(u.getDay()-f+7)%7;return u.setDate(u.getDate()-d),u},startOfISOWeek:l=>{const c=a(l),u=(c.getDay()-1+7)%7;return c.setDate(c.getDate()-u),c},startOfMonth:l=>{const c=a(l);return c.setDate(1),c},startOfYear:l=>{const c=a(l);return c.setMonth(0,1),c},endOfWeek:(l,c)=>{const u=a(l),h=((((c==null?void 0:c.weekStartsOn)??i)+6)%7-u.getDay()+7)%7;return u.setDate(u.getDate()+h),u},endOfISOWeek:l=>{const c=a(l),u=(7-c.getDay())%7;return c.setDate(c.getDate()+u),c},endOfMonth:l=>{const c=a(l);return c.setMonth(c.getMonth()+1,0),c},endOfYear:l=>{const c=a(l);return c.setMonth(11,31),c},eachMonthOfInterval:l=>{const c=a(l.start),u=a(l.end),f=[],d=new ua(c.getFullYear(),c.getMonth(),1,12,0,0,t),h=u.getFullYear()*12+u.getMonth();for(;d.getFullYear()*12+d.getMonth()<=h;)f.push(new ua(d,t)),d.setMonth(d.getMonth()+1,1);return f},addDays:(l,c)=>{const u=a(l);return u.setDate(u.getDate()+c),u},addWeeks:(l,c)=>{const u=a(l);return u.setDate(u.getDate()+c*7),u},addMonths:(l,c)=>{const u=a(l);return u.setMonth(u.getMonth()+c),u},addYears:(l,c)=>{const u=a(l);return u.setFullYear(u.getFullYear()+c),u},eachYearOfInterval:l=>{const c=a(l.start),u=a(l.end),f=[],d=new ua(c.getFullYear(),0,1,12,0,0,t);for(;d.getFullYear()<=u.getFullYear();)f.push(new ua(d,t)),d.setFullYear(d.getFullYear()+1,0,1);return f},getWeek:(l,c)=>{var f;const u=s(l);return d6(u,{weekStartsOn:(c==null?void 0:c.weekStartsOn)??i,firstWeekContainsDate:(c==null?void 0:c.firstWeekContainsDate)??((f=r==null?void 0:r.options)==null?void 0:f.firstWeekContainsDate)??1})},getISOWeek:l=>{const c=s(l);return f6(c)},differenceInCalendarDays:(l,c)=>{const u=s(l),f=s(c);return u6(u,f)},differenceInCalendarMonths:(l,c)=>{const u=s(l),f=s(c);return Efe(u,f)}}}const v_=t=>t instanceof HTMLElement?t:null,QP=t=>[...t.querySelectorAll("[data-animated-month]")??[]],Wmt=t=>v_(t.querySelector("[data-animated-month]")),eN=t=>v_(t.querySelector("[data-animated-caption]")),tN=t=>v_(t.querySelector("[data-animated-weeks]")),Hmt=t=>v_(t.querySelector("[data-animated-nav]")),qmt=t=>v_(t.querySelector("[data-animated-weekdays]"));function Gmt(t,e,{classNames:n,months:r,focused:i,dateLib:a}){const s=k.useRef(null),o=k.useRef(r),l=k.useRef(!1);k.useLayoutEffect(()=>{const c=o.current;if(o.current=r,!e||!t.current||!(t.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const u=a.isSameMonth(r[0].date,c[0].date),f=a.isAfter(r[0].date,c[0].date),d=f?n[Ss.caption_after_enter]:n[Ss.caption_before_enter],h=f?n[Ss.weeks_after_enter]:n[Ss.weeks_before_enter],p=s.current,m=t.current.cloneNode(!0);if(m instanceof HTMLElement?(QP(m).forEach(w=>{if(!(w instanceof HTMLElement))return;const _=Wmt(w);_&&w.contains(_)&&w.removeChild(_);const x=eN(w);x&&x.classList.remove(d);const E=tN(w);E&&E.classList.remove(h)}),s.current=m):s.current=null,l.current||u||i)return;const y=p instanceof HTMLElement?QP(p):[],g=QP(t.current);if(g!=null&&g.every(v=>v instanceof HTMLElement)&&y&&y.every(v=>v instanceof HTMLElement)){l.current=!0,t.current.style.isolation="isolate";const v=Hmt(t.current);v&&(v.style.zIndex="1"),g.forEach((w,_)=>{const x=y[_];if(!x)return;w.style.position="relative",w.style.overflow="hidden";const E=eN(w);E&&E.classList.add(d);const T=tN(w);T&&T.classList.add(h);const O=()=>{l.current=!1,t.current&&(t.current.style.isolation=""),v&&(v.style.zIndex=""),E&&E.classList.remove(d),T&&T.classList.remove(h),w.style.position="",w.style.overflow="",w.contains(x)&&w.removeChild(x)};x.style.pointerEvents="none",x.style.position="absolute",x.style.overflow="hidden",x.setAttribute("aria-hidden","true");const R=qmt(x);R&&(R.style.opacity="0");const M=eN(x);M&&(M.classList.add(f?n[Ss.caption_before_exit]:n[Ss.caption_after_exit]),M.addEventListener("animationend",O));const N=tN(x);N&&N.classList.add(f?n[Ss.weeks_before_exit]:n[Ss.weeks_after_exit]),w.insertBefore(x,w.firstChild)})}})}function Kmt(t,e,n,r){const i=t[0],a=t[t.length-1],{ISOWeek:s,fixedWeeks:o,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:f,endOfBroadcastWeek:d,endOfISOWeek:h,endOfMonth:p,endOfWeek:m,isAfter:y,startOfBroadcastWeek:g,startOfISOWeek:v,startOfWeek:w}=r,_=l?g(i,r):s?v(i):w(i),x=l?d(a):s?h(p(a)):m(p(a)),E=e&&(l?d(e):s?h(e):m(e)),T=E&&y(x,E)?E:x,O=u(T,_),R=f(a,i)+1,M=[];for(let U=0;U<=O;U++){const B=c(_,U);M.push(B)}const j=(l?35:42)*R;if(o&&M.length<j){const U=j-M.length;for(let B=0;B<U;B++){const V=c(M[M.length-1],1);M.push(V)}}return M}function Ymt(t){const e=[];return t.reduce((n,r)=>{const i=r.weeks.reduce((a,s)=>a.concat(s.days.slice()),e.slice());return n.concat(i.slice())},e.slice())}function Zmt(t,e,n,r){const{numberOfMonths:i=1}=n,a=[];for(let s=0;s<i;s++){const o=r.addMonths(t,s);if(e&&o>e)break;a.push(o)}return a}function Nq(t,e,n,r){const{month:i,defaultMonth:a,today:s=r.today(),numberOfMonths:o=1}=t;let l=i||a||s;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:f}=r;if(n&&c(n,l)<o-1){const d=-1*(o-1);l=u(n,d)}return e&&c(l,e)<0&&(l=e),f(l)}function Xmt(t,e,n,r){const{addDays:i,endOfBroadcastWeek:a,endOfISOWeek:s,endOfMonth:o,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:f,startOfISOWeek:d,startOfWeek:h}=r,p=t.reduce((m,y)=>{const g=n.broadcastCalendar?f(y,r):n.ISOWeek?d(y):h(y),v=n.broadcastCalendar?a(y):n.ISOWeek?s(o(y)):l(o(y)),w=e.filter(T=>T>=g&&T<=v),_=n.broadcastCalendar?35:42;if(n.fixedWeeks&&w.length<_){const T=e.filter(O=>{const R=_-w.length;return O>v&&O<=i(v,R)});w.push(...T)}const x=w.reduce((T,O)=>{const R=n.ISOWeek?c(O):u(O),M=T.find(j=>j.weekNumber===R),N=new Rfe(O,y,r);return M?M.days.push(N):T.push(new qpt(R,[N])),T},[]),E=new Hpt(y,x);return m.push(E),m},[]);return n.reverseMonths?p.reverse():p}function Jmt(t,e){let{startMonth:n,endMonth:r}=t;const{startOfYear:i,startOfDay:a,startOfMonth:s,endOfMonth:o,addYears:l,endOfYear:c,newDate:u,today:f}=e,{fromYear:d,toYear:h,fromMonth:p,toMonth:m}=t;!n&&p&&(n=p),!n&&d&&(n=e.newDate(d,0,1)),!r&&m&&(r=m),!r&&h&&(r=u(h,11,31));const y=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=s(n):d?n=u(d,0,1):!n&&y&&(n=i(l(t.today??f(),-100))),r?r=o(r):h?r=u(h,11,31):!r&&y&&(r=c(t.today??f())),[n&&a(n),r&&a(r)]}function Qmt(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a=1}=n,{startOfMonth:s,addMonths:o,differenceInCalendarMonths:l}=r,c=i?a:1,u=s(t);if(!e)return o(u,c);if(!(l(e,t)<a))return o(u,c)}function egt(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a}=n,{startOfMonth:s,addMonths:o,differenceInCalendarMonths:l}=r,c=i?a??1:1,u=s(t);if(!e)return o(u,-c);if(!(l(u,e)<=0))return o(u,-c)}function tgt(t){const e=[];return t.reduce((n,r)=>n.concat(r.weeks.slice()),e.slice())}function TO(t,e){const[n,r]=k.useState(t);return[e===void 0?n:e,r]}function ngt(t,e){var _;const[n,r]=Jmt(t,e),{startOfMonth:i,endOfMonth:a}=e,s=Nq(t,n,r,e),[o,l]=TO(s,t.month?s:void 0);k.useEffect(()=>{const x=Nq(t,n,r,e);l(x)},[t.timeZone]);const{months:c,weeks:u,days:f,previousMonth:d,nextMonth:h}=k.useMemo(()=>{const x=Zmt(o,r,{numberOfMonths:t.numberOfMonths},e),E=Kmt(x,t.endMonth?a(t.endMonth):void 0,{ISOWeek:t.ISOWeek,fixedWeeks:t.fixedWeeks,broadcastCalendar:t.broadcastCalendar},e),T=Xmt(x,E,{broadcastCalendar:t.broadcastCalendar,fixedWeeks:t.fixedWeeks,ISOWeek:t.ISOWeek,reverseMonths:t.reverseMonths},e),O=tgt(T),R=Ymt(T),M=egt(o,n,t,e),N=Qmt(o,r,t,e);return{months:T,weeks:O,days:R,previousMonth:M,nextMonth:N}},[e,o.getTime(),r==null?void 0:r.getTime(),n==null?void 0:n.getTime(),t.disableNavigation,t.broadcastCalendar,(_=t.endMonth)==null?void 0:_.getTime(),t.fixedWeeks,t.ISOWeek,t.numberOfMonths,t.pagedNavigation,t.reverseMonths]),{disableNavigation:p,onMonthChange:m}=t,y=x=>u.some(E=>E.days.some(T=>T.isEqualTo(x))),g=x=>{if(p)return;let E=i(x);n&&E<i(n)&&(E=i(n)),r&&E>i(r)&&(E=i(r)),l(E),m==null||m(E)};return{months:c,weeks:u,days:f,navStart:n,navEnd:r,previousMonth:d,nextMonth:h,goToMonth:g,goToDay:x=>{y(x)||g(x.date)}}}var Xl;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(Xl||(Xl={}));function Iq(t){return!t[vr.disabled]&&!t[vr.hidden]&&!t[vr.outside]}function rgt(t,e,n,r){let i,a=-1;for(const s of t){const o=e(s);Iq(o)&&(o[vr.focused]&&a<Xl.FocusedModifier?(i=s,a=Xl.FocusedModifier):r!=null&&r.isEqualTo(s)&&a<Xl.LastFocused?(i=s,a=Xl.LastFocused):n(s.date)&&a<Xl.Selected?(i=s,a=Xl.Selected):o[vr.today]&&a<Xl.Today&&(i=s,a=Xl.Today))}return i||(i=t.find(s=>Iq(e(s)))),i}function igt(t,e,n,r,i,a,s){const{ISOWeek:o,broadcastCalendar:l}=a,{addDays:c,addMonths:u,addWeeks:f,addYears:d,endOfBroadcastWeek:h,endOfISOWeek:p,endOfWeek:m,max:y,min:g,startOfBroadcastWeek:v,startOfISOWeek:w,startOfWeek:_}=s;let E={day:c,week:f,month:u,year:d,startOfWeek:T=>l?v(T,s):o?w(T):_(T),endOfWeek:T=>l?h(T):o?p(T):m(T)}[t](n,e==="after"?1:-1);return e==="before"&&r?E=y([r,E]):e==="after"&&i&&(E=g([i,E])),E}function Kfe(t,e,n,r,i,a,s,o=0){if(o>365)return;const l=igt(t,e,n.date,r,i,a,s),c=!!(a.disabled&&gu(l,a.disabled,s)),u=!!(a.hidden&&gu(l,a.hidden,s)),f=l,d=new Rfe(l,f,s);return!c&&!u?d:Kfe(t,e,d,r,i,a,s,o+1)}function agt(t,e,n,r,i){const{autoFocus:a}=t,[s,o]=k.useState(),l=rgt(e.days,n,r||(()=>!1),s),[c,u]=k.useState(a?l:void 0);return{isFocusTarget:m=>!!(l!=null&&l.isEqualTo(m)),setFocused:u,focused:c,blur:()=>{o(c),u(void 0)},moveFocus:(m,y)=>{if(!c)return;const g=Kfe(m,y,c,e.navStart,e.navEnd,t,i);g&&(t.disableNavigation&&!e.days.some(w=>w.isEqualTo(g))||(e.goToDay(g),u(g)))}}}function sgt(t,e){const{selected:n,required:r,onSelect:i}=t,[a,s]=TO(n,i?n:void 0),o=i?n:a,{isSameDay:l}=e,c=h=>(o==null?void 0:o.some(p=>l(p,h)))??!1,{min:u,max:f}=t;return{selected:o,select:(h,p,m)=>{let y=[...o??[]];if(c(h)){if((o==null?void 0:o.length)===u||r&&(o==null?void 0:o.length)===1)return;y=o==null?void 0:o.filter(g=>!l(g,h))}else(o==null?void 0:o.length)===f?y=[h]:y=[...y,h];return i||s(y),i==null||i(y,h,p,m),y},isSelected:c}}function ogt(t,e,n=0,r=0,i=!1,a=Pc){const{from:s,to:o}=e||{},{isSameDay:l,isAfter:c,isBefore:u}=a;let f;if(!s&&!o)f={from:t,to:n>0?void 0:t};else if(s&&!o)l(s,t)?n===0?f={from:s,to:t}:i?f={from:s,to:void 0}:f=void 0:u(t,s)?f={from:t,to:s}:f={from:s,to:t};else if(s&&o)if(l(s,t)&&l(o,t))i?f={from:s,to:o}:f=void 0;else if(l(s,t))f={from:s,to:n>0?void 0:t};else if(l(o,t))f={from:t,to:n>0?void 0:t};else if(u(t,s))f={from:t,to:o};else if(c(t,s))f={from:s,to:t};else if(c(t,o))f={from:s,to:t};else throw new Error("Invalid range");if(f!=null&&f.from&&(f!=null&&f.to)){const d=a.differenceInCalendarDays(f.to,f.from);r>0&&d>r?f={from:t,to:void 0}:n>1&&d<n&&(f={from:t,to:void 0})}return f}function lgt(t,e,n=Pc){const r=Array.isArray(e)?e:[e];let i=t.from;const a=n.differenceInCalendarDays(t.to,t.from),s=Math.min(a,6);for(let o=0;o<=s;o++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function Rq(t,e,n=Pc){return mu(t,e.from,!1,n)||mu(t,e.to,!1,n)||mu(e,t.from,!1,n)||mu(e,t.to,!1,n)}function cgt(t,e,n=Pc){const r=Array.isArray(e)?e:[e];if(r.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:n.isDate(o)?mu(t,o,!1,n):Mfe(o,n)?o.some(l=>mu(t,l,!1,n)):OO(o)?o.from&&o.to?Rq(t,{from:o.from,to:o.to},n):!1:$fe(o)?lgt(t,o.dayOfWeek,n):h6(o)?n.isAfter(o.before,o.after)?Rq(t,{from:n.addDays(o.after,1),to:n.addDays(o.before,-1)},n):gu(t.from,o,n)||gu(t.to,o,n):p6(o)||m6(o)?gu(t.from,o,n)||gu(t.to,o,n):!1))return!0;const s=r.filter(o=>typeof o=="function");if(s.length){let o=t.from;const l=n.differenceInCalendarDays(t.to,t.from);for(let c=0;c<=l;c++){if(s.some(u=>u(o)))return!0;o=n.addDays(o,1)}}return!1}function ugt(t,e){const{disabled:n,excludeDisabled:r,selected:i,required:a,onSelect:s}=t,[o,l]=TO(i,s?i:void 0),c=s?i:o;return{selected:c,select:(d,h,p)=>{const{min:m,max:y}=t,g=d?ogt(d,c,m,y,a,e):void 0;return r&&n&&(g!=null&&g.from)&&g.to&&cgt({from:g.from,to:g.to},n,e)&&(g.from=d,g.to=void 0),s||l(g),s==null||s(g,d,h,p),g},isSelected:d=>c&&mu(c,d,!1,e)}}function fgt(t,e){const{selected:n,required:r,onSelect:i}=t,[a,s]=TO(n,i?n:void 0),o=i?n:a,{isSameDay:l}=e;return{selected:o,select:(f,d,h)=>{let p=f;return!r&&o&&o&&l(f,o)&&(p=void 0),i||s(p),i==null||i(p,f,d,h),p},isSelected:f=>o?l(o,f):!1}}function dgt(t,e){const n=fgt(t,e),r=sgt(t,e),i=ugt(t,e);switch(t.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function so(t,e){return t instanceof ua&&t.timeZone===e?t:new ua(t,e)}function Im(t,e,n){return so(t,e)}function jq(t,e,n){return typeof t=="boolean"||typeof t=="function"?t:t instanceof Date?Im(t,e):Array.isArray(t)?t.map(r=>r instanceof Date?Im(r,e):r):OO(t)?{...t,from:t.from?so(t.from,e):t.from,to:t.to?so(t.to,e):t.to}:h6(t)?{before:Im(t.before,e),after:Im(t.after,e)}:p6(t)?{after:Im(t.after,e)}:m6(t)?{before:Im(t.before,e)}:t}function nN(t,e,n){return t&&(Array.isArray(t)?t.map(r=>jq(r,e)):jq(t,e))}function hgt(t){var Tt;let e=t;const n=e.timeZone;if(n&&(e={...t,timeZone:n},e.today&&(e.today=so(e.today,n)),e.month&&(e.month=so(e.month,n)),e.defaultMonth&&(e.defaultMonth=so(e.defaultMonth,n)),e.startMonth&&(e.startMonth=so(e.startMonth,n)),e.endMonth&&(e.endMonth=so(e.endMonth,n)),e.mode==="single"&&e.selected?e.selected=so(e.selected,n):e.mode==="multiple"&&e.selected?e.selected=(Tt=e.selected)==null?void 0:Tt.map(Ge=>so(Ge,n)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?so(e.selected.from,n):e.selected.from,to:e.selected.to?so(e.selected.to,n):e.selected.to}),e.disabled!==void 0&&(e.disabled=nN(e.disabled,n)),e.hidden!==void 0&&(e.hidden=nN(e.hidden,n)),e.modifiers)){const Ge={};Object.keys(e.modifiers).forEach(kt=>{var ze;Ge[kt]=nN((ze=e.modifiers)==null?void 0:ze[kt],n)}),e.modifiers=Ge}const{components:r,formatters:i,labels:a,dateLib:s,locale:o,classNames:l}=k.useMemo(()=>{const Ge={...Ife,...e.locale},kt=e.broadcastCalendar?1:e.weekStartsOn,ze=e.noonSafe&&e.timeZone?Vmt(e.timeZone,{weekStartsOn:kt,locale:Ge}):void 0,Xe=e.dateLib&&ze?{...ze,...e.dateLib}:e.dateLib??ze,Ut=new Bs({locale:Ge,weekStartsOn:kt,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},Xe);return{dateLib:Ut,components:xmt(e.components),formatters:Rmt(e.formatters),labels:Dmt(e.labels,Ut.options),locale:Ge,classNames:{...Emt(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.noonSafe,e.components,e.formatters,e.labels,e.classNames]);e.today||(e={...e,today:s.today()});const{captionLayout:c,mode:u,navLayout:f,numberOfMonths:d=1,onDayBlur:h,onDayClick:p,onDayFocus:m,onDayKeyDown:y,onDayMouseEnter:g,onDayMouseLeave:v,onNextClick:w,onPrevClick:_,showWeekNumber:x,styles:E}=e,{formatCaption:T,formatDay:O,formatMonthDropdown:R,formatWeekNumber:M,formatWeekNumberHeader:N,formatWeekdayName:j,formatYearDropdown:U}=i,B=ngt(e,s),{days:V,months:Y,navStart:X,navEnd:z,previousMonth:G,nextMonth:ae,goToMonth:ue}=B,L=bmt(V,e,X,z,s),{isSelected:K,select:Q,selected:re}=dgt(e,s)??{},{blur:F,focused:$,isFocusTarget:ie,moveFocus:q,setFocused:fe}=agt(e,B,L,K??(()=>!1),s),{labelDayButton:me,labelGridcell:de,labelGrid:_e,labelMonthDropdown:Oe,labelNav:ee,labelPrevious:Ee,labelNext:Qe,labelWeekday:tt,labelWeekNumber:Pe,labelWeekNumberHeader:xe,labelYearDropdown:Ze}=a,Re=k.useMemo(()=>Umt(s,e.ISOWeek,e.broadcastCalendar,e.today),[s,e.ISOWeek,e.broadcastCalendar,e.today]),Ie=u!==void 0||p!==void 0,Ye=k.useCallback(()=>{G&&(ue(G),_==null||_(G))},[G,ue,_]),je=k.useCallback(()=>{ae&&(ue(ae),w==null||w(ae))},[ue,ae,w]),Ne=k.useCallback((Ge,kt)=>ze=>{ze.preventDefault(),ze.stopPropagation(),fe(Ge),!kt.disabled&&(Q==null||Q(Ge.date,kt,ze),p==null||p(Ge.date,kt,ze))},[Q,p,fe]),Ke=k.useCallback((Ge,kt)=>ze=>{fe(Ge),m==null||m(Ge.date,kt,ze)},[m,fe]),He=k.useCallback((Ge,kt)=>ze=>{F(),h==null||h(Ge.date,kt,ze)},[F,h]),et=k.useCallback((Ge,kt)=>ze=>{const Xe={ArrowLeft:[ze.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[ze.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[ze.shiftKey?"year":"week","after"],ArrowUp:[ze.shiftKey?"year":"week","before"],PageUp:[ze.shiftKey?"year":"month","before"],PageDown:[ze.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Xe[ze.key]){ze.preventDefault(),ze.stopPropagation();const[Ut,qt]=Xe[ze.key];q(Ut,qt)}y==null||y(Ge.date,kt,ze)},[q,y,e.dir]),$t=k.useCallback((Ge,kt)=>ze=>{g==null||g(Ge.date,kt,ze)},[g]),dt=k.useCallback((Ge,kt)=>ze=>{v==null||v(Ge.date,kt,ze)},[v]),gr=k.useCallback(Ge=>kt=>{const ze=Number(kt.target.value),Xe=s.setMonth(s.startOfMonth(Ge),ze);ue(Xe)},[s,ue]),ln=k.useCallback(Ge=>kt=>{const ze=Number(kt.target.value),Xe=s.setYear(s.startOfMonth(Ge),ze);ue(Xe)},[s,ue]),{className:Kt,style:Yt}=k.useMemo(()=>({className:[l[Et.Root],e.className].filter(Boolean).join(" "),style:{...E==null?void 0:E[Et.Root],...e.style}}),[l,e.className,e.style,E]),Hn=Smt(e),St=k.useRef(null);Gmt(St,!!e.animate,{classNames:l,months:Y,focused:$,dateLib:s});const Mn={dayPickerProps:e,selected:re,select:Q,isSelected:K,months:Y,nextMonth:ae,previousMonth:G,goToMonth:ue,getModifiers:L,components:r,classNames:l,styles:E,labels:a,formatters:i};return se.createElement(jfe.Provider,{value:Mn},se.createElement(r.Root,{rootRef:e.animate?St:void 0,className:Kt,style:Yt,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...Hn},se.createElement(r.Months,{className:l[Et.Months],style:E==null?void 0:E[Et.Months]},!e.hideNavigation&&!f&&se.createElement(r.Nav,{"data-animated-nav":e.animate?"true":void 0,className:l[Et.Nav],style:E==null?void 0:E[Et.Nav],"aria-label":ee(),onPreviousClick:Ye,onNextClick:je,previousMonth:G,nextMonth:ae}),Y.map((Ge,kt)=>se.createElement(r.Month,{"data-animated-month":e.animate?"true":void 0,className:l[Et.Month],style:E==null?void 0:E[Et.Month],key:kt,displayIndex:kt,calendarMonth:Ge},f==="around"&&!e.hideNavigation&&kt===0&&se.createElement(r.PreviousMonthButton,{type:"button",className:l[Et.PreviousMonthButton],tabIndex:G?void 0:-1,"aria-disabled":G?void 0:!0,"aria-label":Ee(G),onClick:Ye,"data-animated-button":e.animate?"true":void 0},se.createElement(r.Chevron,{disabled:G?void 0:!0,className:l[Et.Chevron],orientation:e.dir==="rtl"?"right":"left"})),se.createElement(r.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:l[Et.MonthCaption],style:E==null?void 0:E[Et.MonthCaption],calendarMonth:Ge,displayIndex:kt},c!=null&&c.startsWith("dropdown")?se.createElement(r.DropdownNav,{className:l[Et.Dropdowns],style:E==null?void 0:E[Et.Dropdowns]},(()=>{const ze=c==="dropdown"||c==="dropdown-months"?se.createElement(r.MonthsDropdown,{key:"month",className:l[Et.MonthsDropdown],"aria-label":Oe(),classNames:l,components:r,disabled:!!e.disableNavigation,onChange:gr(Ge.date),options:Fmt(Ge.date,X,z,i,s),style:E==null?void 0:E[Et.Dropdown],value:s.getMonth(Ge.date)}):se.createElement("span",{key:"month"},R(Ge.date,s)),Xe=c==="dropdown"||c==="dropdown-years"?se.createElement(r.YearsDropdown,{key:"year",className:l[Et.YearsDropdown],"aria-label":Ze(s.options),classNames:l,components:r,disabled:!!e.disableNavigation,onChange:ln(Ge.date),options:zmt(X,z,i,s,!!e.reverseYears),style:E==null?void 0:E[Et.Dropdown],value:s.getYear(Ge.date)}):se.createElement("span",{key:"year"},U(Ge.date,s));return s.getMonthYearOrder()==="year-first"?[Xe,ze]:[ze,Xe]})(),se.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},T(Ge.date,s.options,s))):se.createElement(r.CaptionLabel,{className:l[Et.CaptionLabel],role:"status","aria-live":"polite"},T(Ge.date,s.options,s))),f==="around"&&!e.hideNavigation&&kt===d-1&&se.createElement(r.NextMonthButton,{type:"button",className:l[Et.NextMonthButton],tabIndex:ae?void 0:-1,"aria-disabled":ae?void 0:!0,"aria-label":Qe(ae),onClick:je,"data-animated-button":e.animate?"true":void 0},se.createElement(r.Chevron,{disabled:ae?void 0:!0,className:l[Et.Chevron],orientation:e.dir==="rtl"?"left":"right"})),kt===d-1&&f==="after"&&!e.hideNavigation&&se.createElement(r.Nav,{"data-animated-nav":e.animate?"true":void 0,className:l[Et.Nav],style:E==null?void 0:E[Et.Nav],"aria-label":ee(),onPreviousClick:Ye,onNextClick:je,previousMonth:G,nextMonth:ae}),se.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":_e(Ge.date,s.options,s)||void 0,className:l[Et.MonthGrid],style:E==null?void 0:E[Et.MonthGrid]},!e.hideWeekdays&&se.createElement(r.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:l[Et.Weekdays],style:E==null?void 0:E[Et.Weekdays]},x&&se.createElement(r.WeekNumberHeader,{"aria-label":xe(s.options),className:l[Et.WeekNumberHeader],style:E==null?void 0:E[Et.WeekNumberHeader],scope:"col"},N()),Re.map(ze=>se.createElement(r.Weekday,{"aria-label":tt(ze,s.options,s),className:l[Et.Weekday],key:String(ze),style:E==null?void 0:E[Et.Weekday],scope:"col"},j(ze,s.options,s)))),se.createElement(r.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:l[Et.Weeks],style:E==null?void 0:E[Et.Weeks]},Ge.weeks.map(ze=>se.createElement(r.Week,{className:l[Et.Week],key:ze.weekNumber,style:E==null?void 0:E[Et.Week],week:ze},x&&se.createElement(r.WeekNumber,{week:ze,style:E==null?void 0:E[Et.WeekNumber],"aria-label":Pe(ze.weekNumber,{locale:o}),className:l[Et.WeekNumber],scope:"row",role:"rowheader"},M(ze.weekNumber,s)),ze.days.map(Xe=>{const{date:Ut}=Xe,qt=L(Xe);if(qt[vr.focused]=!qt.hidden&&!!($!=null&&$.isEqualTo(Xe)),qt[pl.selected]=(K==null?void 0:K(Ut))||qt.selected,OO(re)){const{from:Ot,to:os}=re;qt[pl.range_start]=!!(Ot&&os&&s.isSameDay(Ut,Ot)),qt[pl.range_end]=!!(Ot&&os&&s.isSameDay(Ut,os)),qt[pl.range_middle]=mu(re,Ut,!0,s)}const ki=Bmt(qt,E,e.modifiersStyles),Ro=_mt(qt,l,e.modifiersClassNames),Ws=!Ie&&!qt.hidden?de(Ut,qt,s.options,s):void 0;return se.createElement(r.Day,{key:`${Xe.isoDate}_${Xe.displayMonthId}`,day:Xe,modifiers:qt,className:Ro.join(" "),style:ki,role:"gridcell","aria-selected":qt.selected||void 0,"aria-label":Ws,"data-day":Xe.isoDate,"data-month":Xe.outside?Xe.dateMonthId:void 0,"data-selected":qt.selected||void 0,"data-disabled":qt.disabled||void 0,"data-hidden":qt.hidden||void 0,"data-outside":Xe.outside||void 0,"data-focused":qt.focused||void 0,"data-today":qt.today||void 0},!qt.hidden&&Ie?se.createElement(r.DayButton,{className:l[Et.DayButton],style:E==null?void 0:E[Et.DayButton],type:"button",day:Xe,modifiers:qt,disabled:!qt.focused&&qt.disabled||void 0,"aria-disabled":qt.focused&&qt.disabled||void 0,tabIndex:ie(Xe)?0:-1,"aria-label":me(Ut,qt,s.options,s),onClick:Ne(Xe,qt),onBlur:He(Xe,qt),onFocus:Ke(Xe,qt),onKeyDown:et(Xe,qt),onMouseEnter:$t(Xe,qt),onMouseLeave:dt(Xe,qt)},O(Ut,s.options,s)):!qt.hidden&&O(Xe.date,s.options,s))})))))))),e.footer&&se.createElement(r.Footer,{className:l[Et.Footer],style:E==null?void 0:E[Et.Footer],role:"status","aria-live":"polite"},e.footer)))}function Yfe({className:t,classNames:e,showOutsideDays:n=!0,...r}){return S.jsx(hgt,{showOutsideDays:n,className:xt("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:xt(MI({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:xt(MI({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...i})=>S.jsx(bbe,{className:"h-4 w-4"}),IconRight:({...i})=>S.jsx(tX,{className:"h-4 w-4"})},...r})}Yfe.displayName="Calendar";function pgt(t){const e=mgt(t),n=k.forwardRef((r,i)=>{const{children:a,...s}=r,o=k.Children.toArray(a),l=o.find(ygt);if(l){const c=l.props.children,u=o.map(f=>f===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:f);return S.jsx(e,{...s,ref:i,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...s,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}function mgt(t){const e=k.forwardRef((n,r)=>{const{children:i,...a}=n;if(k.isValidElement(i)){const s=wgt(i),o=vgt(a,i.props);return i.type!==k.Fragment&&(o.ref=r?Ac(r,s):s),k.cloneElement(i,o)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ggt=Symbol("radix.slottable");function ygt(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ggt}function vgt(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function wgt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var CO="Popover",[Zfe]=kc(CO,[sv]),w_=sv(),[bgt,Yd]=Zfe(CO),Xfe=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!1}=t,o=w_(e),l=k.useRef(null),[c,u]=k.useState(!1),[f,d]=wd({prop:r,defaultProp:i??!1,onChange:a,caller:CO});return S.jsx(N$,{...o,children:S.jsx(bgt,{scope:e,contentId:yl(),triggerRef:l,open:f,onOpenChange:d,onOpenToggle:k.useCallback(()=>d(h=>!h),[d]),hasCustomAnchor:c,onCustomAnchorAdd:k.useCallback(()=>u(!0),[]),onCustomAnchorRemove:k.useCallback(()=>u(!1),[]),modal:s,children:n})})};Xfe.displayName=CO;var Jfe="PopoverAnchor",_gt=k.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Yd(Jfe,n),a=w_(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=i;return k.useEffect(()=>(s(),()=>o()),[s,o]),S.jsx(U5,{...a,...r,ref:e})});_gt.displayName=Jfe;var Qfe="PopoverTrigger",ede=k.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Yd(Qfe,n),a=w_(n),s=dn(e,i.triggerRef),o=S.jsx(Bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ade(i.open),...r,ref:s,onClick:rt(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:S.jsx(U5,{asChild:!0,...a,children:o})});ede.displayName=Qfe;var v6="PopoverPortal",[xgt,Sgt]=Zfe(v6,{forceMount:void 0}),tde=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,a=Yd(v6,e);return S.jsx(xgt,{scope:e,forceMount:n,children:S.jsx(Cl,{present:n||a.open,children:S.jsx(L1,{asChild:!0,container:i,children:r})})})};tde.displayName=v6;var Gy="PopoverContent",nde=k.forwardRef((t,e)=>{const n=Sgt(Gy,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,a=Yd(Gy,t.__scopePopover);return S.jsx(Cl,{present:r||a.open,children:a.modal?S.jsx(Agt,{...i,ref:e}):S.jsx(kgt,{...i,ref:e})})});nde.displayName=Gy;var Egt=pgt("PopoverContent.RemoveScroll"),Agt=k.forwardRef((t,e)=>{const n=Yd(Gy,t.__scopePopover),r=k.useRef(null),i=dn(e,r),a=k.useRef(!1);return k.useEffect(()=>{const s=r.current;if(s)return V5(s)},[]),S.jsx(F1,{as:Egt,allowPinchZoom:!0,children:S.jsx(rde,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),a.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;a.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:rt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),kgt=k.forwardRef((t,e)=>{const n=Yd(Gy,t.__scopePopover),r=k.useRef(!1),i=k.useRef(!1);return S.jsx(rde,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,o;(s=t.onCloseAutoFocus)==null||s.call(t,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=a.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),rde=k.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=t,d=Yd(Gy,n),h=w_(n);return M5(),S.jsx($1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:S.jsx(j1,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>d.onOpenChange(!1),children:S.jsx(I$,{"data-state":ade(d.open),role:"dialog",id:d.contentId,...h,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ide="PopoverClose",Ogt=k.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Yd(ide,n);return S.jsx(Bt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,()=>i.onOpenChange(!1))})});Ogt.displayName=ide;var Tgt="PopoverArrow",Cgt=k.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=w_(n);return S.jsx(R$,{...i,...r,ref:e})});Cgt.displayName=Tgt;function ade(t){return t?"open":"closed"}var Pgt=Xfe,Ngt=ede,Igt=tde,sde=nde;const Rgt=Pgt,jgt=Ngt,ode=k.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>S.jsx(Igt,{children:S.jsx(sde,{ref:i,align:e,sideOffset:n,className:xt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));ode.displayName=sde.displayName;function K4({date:t,setDate:e,className:n}){return S.jsxs(Rgt,{children:[S.jsx(jgt,{asChild:!0,children:S.jsxs(sn,{variant:"outline",className:xt("w-full justify-start text-left font-normal bg-slate-800/50 border-slate-700 text-slate-300 hover:bg-slate-800 hover:text-white transition-all",!t&&"text-muted-foreground",n),children:[S.jsx(y$,{className:"mr-2 h-4 w-4 text-cyan-500"}),t?Zh(t,"PPP"):S.jsx("span",{children:"Pick a date"})]})}),S.jsx(ode,{className:"w-auto p-0 bg-slate-900 border-slate-800",align:"start",children:S.jsx(Yfe,{mode:"single",selected:t,onSelect:e,initialFocus:!0,className:"rounded-md border-slate-800"})})]})}const $gt=({onClose:t})=>{const{addExpense:e,categories:n}=Gu(),[r,i]=k.useState({amount:"",category:n[0],description:""}),[a,s]=k.useState(new Date),[o,l]=k.useState(""),c=u=>{if(u.preventDefault(),!r.amount||parseFloat(r.amount)<=0){l("Please enter a valid amount");return}if(!r.description.trim()){l("Please enter a description");return}e({...r,amount:parseFloat(r.amount),date:Zh(a,"yyyy-MM-dd")}),t()};return S.jsxs("form",{onSubmit:c,className:"space-y-4 py-4 text-white",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"amount",children:"Amount"}),S.jsx($a,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:r.amount,onChange:u=>i({...r,amount:u.target.value}),className:xt("bg-slate-800/50 border-slate-700 text-white",o&&!r.amount?"border-destructive":""),autoFocus:!0})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{children:"Category"}),S.jsxs(mfe,{value:r.category,onValueChange:u=>i({...r,category:u}),children:[S.jsx(o6,{className:"bg-slate-800/50 border-slate-700 text-white",children:S.jsx(gfe,{placeholder:"Select category"})}),S.jsx(l6,{className:"bg-slate-900 border-slate-800 text-white",children:n.map(u=>S.jsx(c6,{value:u,children:u},u))})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{children:"Date"}),S.jsx(K4,{date:a,setDate:s})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx(Xi,{htmlFor:"description",children:"Description"}),S.jsx($a,{id:"description",placeholder:"What was this for?",value:r.description,onChange:u=>i({...r,description:u.target.value}),className:xt("bg-slate-800/50 border-slate-700 text-white",o&&!r.description?"border-destructive":"")}),o&&S.jsx("p",{className:"text-sm text-destructive",children:o})]}),S.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[S.jsx(sn,{type:"button",variant:"ghost",onClick:t,className:"text-slate-400 hover:text-white",children:"Cancel"}),S.jsx(sn,{type:"submit",className:"bg-cyan-500 hover:bg-cyan-600 text-slate-900 font-bold",children:"Add Expense"})]})]})},Mgt=()=>{const{expenses:t,deleteExpense:e,formatCurrency:n}=Gu(),[r,i]=k.useState(!1),a=[...t].sort((o,l)=>new Date(l.date)-new Date(o.date)||l.timestamp-o.timestamp),s=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Expenses"}),S.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your daily spending"})]}),S.jsxs(Cue,{open:r,onOpenChange:i,children:[S.jsx(Idt,{asChild:!0,children:S.jsxs(sn,{children:[S.jsx(ab,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),S.jsxs(r6,{children:[S.jsx(i6,{children:S.jsx(a6,{children:"Add New Expense"})}),S.jsx($gt,{onClose:()=>i(!1)})]})]})]}),a.length===0?S.jsxs("div",{className:"p-12 rounded-2xl bg-card border text-center",children:[S.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4 text-muted-foreground",children:S.jsx(ab,{className:"h-8 w-8"})}),S.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No expenses yet"}),S.jsx("p",{className:"text-muted-foreground mt-2 max-w-sm mx-auto",children:"Start tracking your spending by adding your first expense."}),S.jsx(sn,{variant:"secondary",className:"mt-6 mx-auto",onClick:()=>i(!0),children:"Add Now"})]}):S.jsx("div",{className:"grid gap-4",children:a.map(o=>S.jsxs(lr,{className:"flex items-center justify-between p-4 group hover:border-primary/50 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"w-12 h-12 rounded-full bg-secondary flex items-center justify-center text-xl",children:""}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-medium text-foreground text-lg",children:o.description}),S.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(w$,{className:"h-3 w-3"}),o.category]}),S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(y$,{className:"h-3 w-3"}),s(o.date)]})]})]})]}),S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("span",{className:"text-xl font-bold text-foreground",children:n(o.amount)}),S.jsx(sn,{variant:"ghost",size:"icon",onClick:()=>e(o.id),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 opacity-0 group-hover:opacity-100 transition-all",title:"Delete Expense",children:S.jsx(b$,{className:"h-4 w-4"})})]})]},o.id))})]})},Lgt=()=>{const{categoriesRaw:t,expenses:e,formatCurrency:n,updateLimit:r}=Gu(),[i,a]=k.useState(null),[s,o]=k.useState(""),l=t.map(p=>{const m=e.filter(v=>v.category_name===p.name).reduce((v,w)=>v+w.amount,0),y=p.budget_limit>0?m/p.budget_limit*100:0,g=p.budget_limit-m;return{...p,spent:m,percentage:y,remaining:g}}),c=p=>{a(p.id),o(p.budget_limit.toString())},u=async p=>{const m=parseFloat(s);isNaN(m)||await r(p,m),a(null)},f=t.reduce((p,m)=>p+(m.budget_limit||0),0),d=e.reduce((p,m)=>p+m.amount,0),h=f>0?d/f*100:0;return S.jsxs("div",{className:"space-y-8 pb-8",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground font-outfit transition-colors",children:"Budget Management"}),S.jsx("p",{className:"text-muted-foreground transition-colors",children:"Set limits and track your spending efficiency."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[S.jsx(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:S.jsxs(br,{className:"pt-6",children:[S.jsx("div",{className:"flex items-center justify-between mb-4",children:S.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg",children:S.jsx(R5,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"})})}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Budget"}),S.jsx("p",{className:"text-2xl font-bold text-foreground",children:n(f)})]})]})}),S.jsx(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:S.jsxs(br,{className:"pt-6",children:[S.jsx("div",{className:"flex items-center justify-between mb-4",children:S.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:S.jsx(Sbe,{className:"h-5 w-5 text-orange-600 dark:text-orange-500"})})}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),S.jsx("p",{className:"text-2xl font-bold text-foreground",children:n(d)})]})]})}),S.jsx(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:S.jsxs(br,{className:"pt-6",children:[S.jsx("div",{className:"flex items-center justify-between mb-4",children:S.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:S.jsx(dw,{className:"h-5 w-5 text-purple-600 dark:text-purple-500"})})}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall Usage"}),S.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[h.toFixed(1),"%"]})]})]})})]}),S.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(p=>S.jsxs(lr,{className:"bg-card/50 border-border hover:border-border/80 transition-all shadow-sm group",children:[S.jsx(ts,{className:"pb-4",children:S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"p-2 bg-muted rounded-lg group-hover:bg-background transition-colors",children:S.jsx(lX,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"})}),S.jsxs("div",{children:[S.jsx($s,{className:"text-foreground text-base font-bold",children:p.name}),S.jsx(Lu,{className:"text-muted-foreground text-xs uppercase font-medium tracking-tight",children:"Monthly Limit"})]})]}),i===p.id?S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx($a,{type:"number",value:s,onChange:m=>o(m.target.value),className:"w-24 h-8 bg-background border-border text-foreground text-sm focus:ring-primary"}),S.jsx(sn,{size:"icon",variant:"ghost",className:"h-8 w-8 text-emerald-600 dark:text-emerald-500 hover:bg-emerald-500/10",onClick:()=>u(p.name),children:S.jsx(v$,{className:"h-4 w-4"})}),S.jsx(sn,{size:"icon",variant:"ghost",className:"h-8 w-8 text-rose-600 dark:text-rose-500 hover:bg-rose-500/10",onClick:()=>a(null),children:S.jsx(oE,{className:"h-4 w-4"})})]}):S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("span",{className:"text-foreground font-bold text-lg",children:n(p.budget_limit)}),S.jsx(sn,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-foreground transition-colors hover:bg-muted",onClick:()=>c(p),children:S.jsx(Lbe,{className:"h-3.5 w-3.5"})})]})]})}),S.jsxs(br,{className:"space-y-4",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[S.jsxs("span",{className:"text-muted-foreground font-medium",children:["Spent: ",n(p.spent)]}),S.jsxs("span",{className:xt("font-bold",p.percentage>100?"text-rose-600 dark:text-rose-500":p.percentage>85?"text-orange-600 dark:text-orange-500":"text-emerald-600 dark:text-emerald-500"),children:[p.percentage.toFixed(1),"%"]})]}),S.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden shadow-inner",children:S.jsx("div",{className:xt("h-full transition-all duration-500 rounded-full shadow-sm",p.percentage>100?"bg-rose-500":p.percentage>85?"bg-orange-500":"bg-cyan-500"),style:{width:`${Math.min(p.percentage,100)}%`}})})]}),p.percentage>100&&S.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-rose-600 dark:text-rose-500 bg-rose-500/10 p-2.5 rounded-lg border border-rose-500/20 shadow-sm animate-in fade-in zoom-in duration-300",children:[S.jsx(mbe,{className:"h-3.5 w-3.5"}),S.jsxs("span",{className:"font-bold uppercase tracking-tight",children:["Budget exceeded by ",n(Math.abs(p.remaining))]})]}),S.jsxs("div",{className:"flex justify-between items-center text-[10px] text-muted-foreground/80 font-medium",children:[S.jsxs("span",{children:["Remaining: ",n(Math.max(0,p.remaining))]}),S.jsx("span",{className:"italic",children:"Resets on 1st of next month"})]})]})]},p.id))})]})},Dgt="modulepreload",Fgt=function(t){return"/Spend-Mind/"+t},$q={},rN=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Fgt(l),l in $q)return;$q[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Dgt,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};function In(t){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(t)}var Ol=Uint8Array,Is=Uint16Array,w6=Int32Array,b6=new Ol([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_6=new Ol([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mq=new Ol([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lde=function(t,e){for(var n=new Is(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new w6(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},cde=lde(b6,2),Bgt=cde.b,Y4=cde.r;Bgt[28]=258,Y4[258]=28;var Ugt=lde(_6,0),Lq=Ugt.r,Z4=new Is(32768);for(var cr=0;cr<32768;++cr){var Af=(cr&43690)>>1|(cr&21845)<<1;Af=(Af&52428)>>2|(Af&13107)<<2,Af=(Af&61680)>>4|(Af&3855)<<4,Z4[cr]=((Af&65280)>>8|(Af&255)<<8)>>1}var Nw=function(t,e,n){for(var r=t.length,i=0,a=new Is(e);i<r;++i)t[i]&&++a[t[i]-1];var s=new Is(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(n){o=new Is(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],f=s[t[i]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)o[Z4[f]>>l]=c}else for(o=new Is(r),i=0;i<r;++i)t[i]&&(o[i]=Z4[s[t[i]-1]++]>>15-t[i]);return o},Lp=new Ol(288);for(var cr=0;cr<144;++cr)Lp[cr]=8;for(var cr=144;cr<256;++cr)Lp[cr]=9;for(var cr=256;cr<280;++cr)Lp[cr]=7;for(var cr=280;cr<288;++cr)Lp[cr]=8;var i5=new Ol(32);for(var cr=0;cr<32;++cr)i5[cr]=5;var zgt=Nw(Lp,9,0),Vgt=Nw(i5,5,0),ude=function(t){return(t+7)/8|0},Wgt=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ol(t.subarray(e,n))},Xc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},$0=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},iN=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:dde,l:0};if(i==1){var s=new Ol(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(x,E){return x.f-E.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var d=a[0].s,r=1;r<i;++r)a[r].s>d&&(d=a[r].s);var h=new Is(d+1),p=X4(n[u-1],h,0);if(p>e){var r=0,m=0,y=p-e,g=1<<y;for(a.sort(function(E,T){return h[T.s]-h[E.s]||E.f-T.f});r<i;++r){var v=a[r].s;if(h[v]>e)m+=g-(1<<p-h[v]),h[v]=e;else break}for(m>>=y;m>0;){var w=a[r].s;h[w]<e?m-=1<<e-h[w]++-1:++r}for(;r>=0&&m;--r){var _=a[r].s;h[_]==e&&(--h[_],++m)}p=e}return{t:new Ol(h),l:p}},X4=function(t,e,n){return t.s==-1?Math.max(X4(t.l,e,n+1),X4(t.r,e,n+1)):e[t.s]=n},Dq=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Is(++e),r=0,i=t[0],a=1,s=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=t[o]}return{c:n.subarray(0,r),n:e}},M0=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},fde=function(t,e,n){var r=n.length,i=ude(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},Fq=function(t,e,n,r,i,a,s,o,l,c,u){Xc(e,u++,n),++i[256];for(var f=iN(i,15),d=f.t,h=f.l,p=iN(a,15),m=p.t,y=p.l,g=Dq(d),v=g.c,w=g.n,_=Dq(m),x=_.c,E=_.n,T=new Is(19),O=0;O<v.length;++O)++T[v[O]&31];for(var O=0;O<x.length;++O)++T[x[O]&31];for(var R=iN(T,7),M=R.t,N=R.l,j=19;j>4&&!M[Mq[j-1]];--j);var U=c+5<<3,B=M0(i,Lp)+M0(a,i5)+s,V=M0(i,d)+M0(a,m)+s+14+3*j+M0(T,M)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&U<=B&&U<=V)return fde(e,u,t.subarray(l,l+c));var Y,X,z,G;if(Xc(e,u,1+(V<B)),u+=2,V<B){Y=Nw(d,h,0),X=d,z=Nw(m,y,0),G=m;var ae=Nw(M,N,0);Xc(e,u,w-257),Xc(e,u+5,E-1),Xc(e,u+10,j-4),u+=14;for(var O=0;O<j;++O)Xc(e,u+3*O,M[Mq[O]]);u+=3*j;for(var ue=[v,x],L=0;L<2;++L)for(var K=ue[L],O=0;O<K.length;++O){var Q=K[O]&31;Xc(e,u,ae[Q]),u+=M[Q],Q>15&&(Xc(e,u,K[O]>>5&127),u+=K[O]>>12)}}else Y=zgt,X=Lp,z=Vgt,G=i5;for(var O=0;O<o;++O){var re=r[O];if(re>255){var Q=re>>18&31;$0(e,u,Y[Q+257]),u+=X[Q+257],Q>7&&(Xc(e,u,re>>23&31),u+=b6[Q]);var F=re&31;$0(e,u,z[F]),u+=G[F],F>3&&($0(e,u,re>>5&8191),u+=_6[F])}else $0(e,u,Y[re]),u+=X[re]}return $0(e,u,Y[256]),u+X[256]},Hgt=new w6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dde=new Ol(0),qgt=function(t,e,n,r,i,a){var s=a.z||t.length,o=new Ol(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),c=a.l,u=(a.r||0)&7;if(e){u&&(l[0]=a.r>>3);for(var f=Hgt[e-1],d=f>>13,h=f&8191,p=(1<<n)-1,m=a.p||new Is(32768),y=a.h||new Is(p+1),g=Math.ceil(n/3),v=2*g,w=function(Oe){return(t[Oe]^t[Oe+1]<<g^t[Oe+2]<<v)&p},_=new w6(25e3),x=new Is(288),E=new Is(32),T=0,O=0,R=a.i||0,M=0,N=a.w||0,j=0;R+2<s;++R){var U=w(R),B=R&32767,V=y[U];if(m[B]=V,y[U]=B,N<=R){var Y=s-R;if((T>7e3||M>24576)&&(Y>423||!c)){u=Fq(t,l,0,_,x,E,O,M,j,R-j,u),M=T=O=0,j=R;for(var X=0;X<286;++X)x[X]=0;for(var X=0;X<30;++X)E[X]=0}var z=2,G=0,ae=h,ue=B-V&32767;if(Y>2&&U==w(R-ue))for(var L=Math.min(d,Y)-1,K=Math.min(32767,R),Q=Math.min(258,Y);ue<=K&&--ae&&B!=V;){if(t[R+z]==t[R+z-ue]){for(var re=0;re<Q&&t[R+re]==t[R+re-ue];++re);if(re>z){if(z=re,G=ue,re>L)break;for(var F=Math.min(ue,re-2),$=0,X=0;X<F;++X){var ie=R-ue+X&32767,q=m[ie],fe=ie-q&32767;fe>$&&($=fe,V=ie)}}}B=V,V=m[B],ue+=B-V&32767}if(G){_[M++]=268435456|Y4[z]<<18|Lq[G];var me=Y4[z]&31,de=Lq[G]&31;O+=b6[me]+_6[de],++x[257+me],++E[de],N=R+z,++T}else _[M++]=t[R],++x[t[R]]}}for(R=Math.max(R,N);R<s;++R)_[M++]=t[R],++x[t[R]];u=Fq(t,l,c,_,x,E,O,M,j,R-j,u),c||(a.r=u&7|l[u/8|0]<<3,u-=7,a.h=y,a.p=m,a.i=R,a.w=N)}else{for(var R=a.w||0;R<s+c;R+=65535){var _e=R+65535;_e>=s&&(l[u/8|0]=c,_e=s),u=fde(l,u+1,t.subarray(R,_e))}a.i=s}return Wgt(o,0,r+ude(u)+i)},hde=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Ggt=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Ol(a.length+t.length);s.set(a),s.set(t,a.length),t=s,i.w=a.length}return qgt(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},pde=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Kgt=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=hde();i.p(e.dictionary),pde(t,2,i.d())}};function J4(t,e){e||(e={});var n=hde();n.p(t);var r=Ggt(t,e,e.dictionary?6:2,4);return Kgt(r,e),pde(r,r.length-4,n.d()),r}var Ygt=typeof TextDecoder<"u"&&new TextDecoder,Zgt=0;try{Ygt.decode(dde,{stream:!0}),Zgt=1}catch{}function Xgt(t){if(Array.isArray(t))return t}function Jgt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Bq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qgt(t,e){if(t){if(typeof t=="string")return Bq(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bq(t,e):void 0}}function eyt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uq(t,e){return Xgt(t)||Jgt(t,e)||Qgt(t,e)||eyt()}function zq(t,e="utf8"){return new TextDecoder(e).decode(t)}const tyt=new TextEncoder;function nyt(t){return tyt.encode(t)}const ryt=1024*8,iyt=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),aN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class x6{constructor(e=ryt,n={}){P(this,"buffer");P(this,"byteLength");P(this,"byteOffset");P(this,"length");P(this,"offset");P(this,"lastWrittenByte");P(this,"littleEndian");P(this,"_data");P(this,"_mark");P(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof x6)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=aN[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===iyt&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+r));o.reverse();const l=new aN[n](o.buffer);return this.offset+=r,l.reverse(),l}const s=new aN[n](a);return this.offset+=r,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return zq(this.readBytes(e))}decodeText(e=1,n="utf8"){return zq(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(nyt(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Iv(t){let e=t.length;for(;--e>=0;)t[e]=0}const ayt=3,syt=258,mde=29,oyt=256,lyt=oyt+1+mde,gde=30,cyt=512,uyt=new Array((lyt+2)*2);Iv(uyt);const fyt=new Array(gde*2);Iv(fyt);const dyt=new Array(cyt);Iv(dyt);const hyt=new Array(syt-ayt+1);Iv(hyt);const pyt=new Array(mde);Iv(pyt);const myt=new Array(gde);Iv(myt);const gyt=(t,e,n,r)=>{let i=t&65535|0,a=t>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var Q4=gyt;const yyt=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},vyt=new Uint32Array(yyt()),wyt=(t,e,n,r)=>{const i=vyt,a=r+n;t^=-1;for(let s=r;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1};var ql=wyt,e3={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yde={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const byt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var _yt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)byt(n,r)&&(t[r]=n[r])}}return t},xyt=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,a=t.length;r<a;r++){let s=t[r];n.set(s,i),i+=s.length}return n},vde={assign:_yt,flattenChunks:xyt};let wde=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{wde=!1}const _1=new Uint8Array(256);for(let t=0;t<256;t++)_1[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_1[254]=_1[254]=1;var Syt=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,a,s=t.length,o=0;for(i=0;i<s;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const Eyt=(t,e)=>{if(e<65534&&t.subarray&&wde)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var Ayt=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let s=t[r++];if(s<128){a[i++]=s;continue}let o=_1[s];if(o>4){a[i++]=65533,r+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&r<n;)s=s<<6|t[r++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return Eyt(a,i)},kyt=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+_1[t[n]]>e?n:e},t3={string2buf:Syt,buf2string:Ayt,utf8border:kyt};function Oyt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Tyt=Oyt;const S2=16209,Cyt=16191;var Pyt=function(e,n){let r,i,a,s,o,l,c,u,f,d,h,p,m,y,g,v,w,_,x,E,T,O,R,M;const N=e.state;r=e.next_in,R=e.input,i=r+(e.avail_in-5),a=e.next_out,M=e.output,s=a-(n-e.avail_out),o=a+(e.avail_out-257),l=N.dmax,c=N.wsize,u=N.whave,f=N.wnext,d=N.window,h=N.hold,p=N.bits,m=N.lencode,y=N.distcode,g=(1<<N.lenbits)-1,v=(1<<N.distbits)-1;e:do{p<15&&(h+=R[r++]<<p,p+=8,h+=R[r++]<<p,p+=8),w=m[h&g];t:for(;;){if(_=w>>>24,h>>>=_,p-=_,_=w>>>16&255,_===0)M[a++]=w&65535;else if(_&16){x=w&65535,_&=15,_&&(p<_&&(h+=R[r++]<<p,p+=8),x+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=R[r++]<<p,p+=8,h+=R[r++]<<p,p+=8),w=y[h&v];n:for(;;){if(_=w>>>24,h>>>=_,p-=_,_=w>>>16&255,_&16){if(E=w&65535,_&=15,p<_&&(h+=R[r++]<<p,p+=8,p<_&&(h+=R[r++]<<p,p+=8)),E+=h&(1<<_)-1,E>l){e.msg="invalid distance too far back",N.mode=S2;break e}if(h>>>=_,p-=_,_=a-s,E>_){if(_=E-_,_>u&&N.sane){e.msg="invalid distance too far back",N.mode=S2;break e}if(T=0,O=d,f===0){if(T+=c-_,_<x){x-=_;do M[a++]=d[T++];while(--_);T=a-E,O=M}}else if(f<_){if(T+=c+f-_,_-=f,_<x){x-=_;do M[a++]=d[T++];while(--_);if(T=0,f<x){_=f,x-=_;do M[a++]=d[T++];while(--_);T=a-E,O=M}}}else if(T+=f-_,_<x){x-=_;do M[a++]=d[T++];while(--_);T=a-E,O=M}for(;x>2;)M[a++]=O[T++],M[a++]=O[T++],M[a++]=O[T++],x-=3;x&&(M[a++]=O[T++],x>1&&(M[a++]=O[T++]))}else{T=a-E;do M[a++]=M[T++],M[a++]=M[T++],M[a++]=M[T++],x-=3;while(x>2);x&&(M[a++]=M[T++],x>1&&(M[a++]=M[T++]))}}else if(_&64){e.msg="invalid distance code",N.mode=S2;break e}else{w=y[(w&65535)+(h&(1<<_)-1)];continue n}break}}else if(_&64)if(_&32){N.mode=Cyt;break e}else{e.msg="invalid literal/length code",N.mode=S2;break e}else{w=m[(w&65535)+(h&(1<<_)-1)];continue t}break}}while(r<i&&a<o);x=p>>3,r-=x,p-=x<<3,h&=(1<<p)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<o?257+(o-a):257-(a-o),N.hold=h,N.bits=p};const Rm=15,Vq=852,Wq=592,Hq=0,sN=1,qq=2,Nyt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Iyt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ryt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jyt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$yt=(t,e,n,r,i,a,s,o)=>{const l=o.bits;let c=0,u=0,f=0,d=0,h=0,p=0,m=0,y=0,g=0,v=0,w,_,x,E,T,O=null,R;const M=new Uint16Array(Rm+1),N=new Uint16Array(Rm+1);let j=null,U,B,V;for(c=0;c<=Rm;c++)M[c]=0;for(u=0;u<r;u++)M[e[n+u]]++;for(h=l,d=Rm;d>=1&&M[d]===0;d--);if(h>d&&(h=d),d===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<d&&M[f]===0;f++);for(h<f&&(h=f),y=1,c=1;c<=Rm;c++)if(y<<=1,y-=M[c],y<0)return-1;if(y>0&&(t===Hq||d!==1))return-1;for(N[1]=0,c=1;c<Rm;c++)N[c+1]=N[c]+M[c];for(u=0;u<r;u++)e[n+u]!==0&&(s[N[e[n+u]]++]=u);if(t===Hq?(O=j=s,R=20):t===sN?(O=Nyt,j=Iyt,R=257):(O=Ryt,j=jyt,R=0),v=0,u=0,c=f,T=a,p=h,m=0,x=-1,g=1<<h,E=g-1,t===sN&&g>Vq||t===qq&&g>Wq)return 1;for(;;){U=c-m,s[u]+1<R?(B=0,V=s[u]):s[u]>=R?(B=j[s[u]-R],V=O[s[u]-R]):(B=96,V=0),w=1<<c-m,_=1<<p,f=_;do _-=w,i[T+(v>>m)+_]=U<<24|B<<16|V|0;while(_!==0);for(w=1<<c-1;v&w;)w>>=1;if(w!==0?(v&=w-1,v+=w):v=0,u++,--M[c]===0){if(c===d)break;c=e[n+s[u]]}if(c>h&&(v&E)!==x){for(m===0&&(m=h),T+=f,p=c-m,y=1<<p;p+m<d&&(y-=M[p+m],!(y<=0));)p++,y<<=1;if(g+=1<<p,t===sN&&g>Vq||t===qq&&g>Wq)return 1;x=v&E,i[x]=h<<24|p<<16|T-a|0}}return v!==0&&(i[T+v]=c-m<<24|64<<16|0),o.bits=h,0};var Iw=$yt;const Myt=0,bde=1,_de=2,{Z_FINISH:Gq,Z_BLOCK:Lyt,Z_TREES:E2,Z_OK:Dp,Z_STREAM_END:Dyt,Z_NEED_DICT:Fyt,Z_STREAM_ERROR:Co,Z_DATA_ERROR:xde,Z_MEM_ERROR:Sde,Z_BUF_ERROR:Byt,Z_DEFLATED:Kq}=yde,PO=16180,Yq=16181,Zq=16182,Xq=16183,Jq=16184,Qq=16185,eG=16186,tG=16187,nG=16188,rG=16189,a5=16190,Jc=16191,oN=16192,iG=16193,lN=16194,aG=16195,sG=16196,oG=16197,lG=16198,A2=16199,k2=16200,cG=16201,uG=16202,fG=16203,dG=16204,hG=16205,cN=16206,pG=16207,mG=16208,fr=16209,Ede=16210,Ade=16211,Uyt=852,zyt=592,Vyt=15,Wyt=Vyt,gG=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Hyt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Zp=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<PO||e.mode>Ade?1:0},kde=t=>{if(Zp(t))return Co;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=PO,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Uyt),e.distcode=e.distdyn=new Int32Array(zyt),e.sane=1,e.back=-1,Dp},Ode=t=>{if(Zp(t))return Co;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,kde(t)},Tde=(t,e)=>{let n;if(Zp(t))return Co;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Co:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Ode(t))},Cde=(t,e)=>{if(!t)return Co;const n=new Hyt;t.state=n,n.strm=t,n.window=null,n.mode=PO;const r=Tde(t,e);return r!==Dp&&(t.state=null),r},qyt=t=>Cde(t,Wyt);let yG=!0,uN,fN;const Gyt=t=>{if(yG){uN=new Int32Array(512),fN=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Iw(bde,t.lens,0,288,uN,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Iw(_de,t.lens,0,32,fN,0,t.work,{bits:5}),yG=!1}t.lencode=uN,t.lenbits=9,t.distcode=fN,t.distbits=5},Pde=(t,e,n,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Kyt=(t,e)=>{let n,r,i,a,s,o,l,c,u,f,d,h,p,m,y=0,g,v,w,_,x,E,T,O;const R=new Uint8Array(4);let M,N;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Zp(t)||!t.output||!t.input&&t.avail_in!==0)return Co;n=t.state,n.mode===Jc&&(n.mode=oN),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,c=n.hold,u=n.bits,f=o,d=l,O=Dp;e:for(;;)switch(n.mode){case PO:if(n.wrap===0){n.mode=oN;break}for(;u<16;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,R[0]=c&255,R[1]=c>>>8&255,n.check=ql(n.check,R,2,0),c=0,u=0,n.mode=Yq;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=fr;break}if((c&15)!==Kq){t.msg="unknown compression method",n.mode=fr;break}if(c>>>=4,u-=4,T=(c&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){t.msg="invalid window size",n.mode=fr;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=c&512?rG:Jc,c=0,u=0;break;case Yq:for(;u<16;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==Kq){t.msg="unknown compression method",n.mode=fr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=fr;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,n.check=ql(n.check,R,2,0)),c=0,u=0,n.mode=Zq;case Zq:for(;u<32;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,R[2]=c>>>16&255,R[3]=c>>>24&255,n.check=ql(n.check,R,4,0)),c=0,u=0,n.mode=Xq;case Xq:for(;u<16;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,n.check=ql(n.check,R,2,0)),c=0,u=0,n.mode=Jq;case Jq:if(n.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(R[0]=c&255,R[1]=c>>>8&255,n.check=ql(n.check,R,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=Qq;case Qq:if(n.flags&1024&&(h=n.length,h>o&&(h=o),h&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),T)),n.flags&512&&n.wrap&4&&(n.check=ql(n.check,r,h,a)),o-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=eG;case eG:if(n.flags&2048){if(o===0)break e;h=0;do T=r[a+h++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=ql(n.check,r,h,a)),o-=h,a+=h,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=tG;case tG:if(n.flags&4096){if(o===0)break e;h=0;do T=r[a+h++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=ql(n.check,r,h,a)),o-=h,a+=h,T)break e}else n.head&&(n.head.comment=null);n.mode=nG;case nG:if(n.flags&512){for(;u<16;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=fr;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Jc;break;case rG:for(;u<32;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}t.adler=n.check=gG(c),c=0,u=0,n.mode=a5;case a5:if(n.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=c,n.bits=u,Fyt;t.adler=n.check=1,n.mode=Jc;case Jc:if(e===Lyt||e===E2)break e;case oN:if(n.last){c>>>=u&7,u-=u&7,n.mode=cN;break}for(;u<3;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=iG;break;case 1:if(Gyt(n),n.mode=A2,e===E2){c>>>=2,u-=2;break e}break;case 2:n.mode=sG;break;case 3:t.msg="invalid block type",n.mode=fr}c>>>=2,u-=2;break;case iG:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=fr;break}if(n.length=c&65535,c=0,u=0,n.mode=lN,e===E2)break e;case lN:n.mode=aG;case aG:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(r.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,n.length-=h;break}n.mode=Jc;break;case sG:for(;u<14;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=fr;break}n.have=0,n.mode=oG;case oG:for(;n.have<n.ncode;){for(;u<3;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}n.lens[j[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},O=Iw(Myt,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,O){t.msg="invalid code lengths set",n.mode=fr;break}n.have=0,n.mode=lG;case lG:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[c&(1<<n.lenbits)-1],g=y>>>24,v=y>>>16&255,w=y&65535,!(g<=u);){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(w<16)c>>>=g,u-=g,n.lens[n.have++]=w;else{if(w===16){for(N=g+2;u<N;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(c>>>=g,u-=g,n.have===0){t.msg="invalid bit length repeat",n.mode=fr;break}T=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(w===17){for(N=g+3;u<N;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}c>>>=g,u-=g,T=0,h=3+(c&7),c>>>=3,u-=3}else{for(N=g+7;u<N;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}c>>>=g,u-=g,T=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=fr;break}for(;h--;)n.lens[n.have++]=T}}if(n.mode===fr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=fr;break}if(n.lenbits=9,M={bits:n.lenbits},O=Iw(bde,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,O){t.msg="invalid literal/lengths set",n.mode=fr;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},O=Iw(_de,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,O){t.msg="invalid distances set",n.mode=fr;break}if(n.mode=A2,e===E2)break e;case A2:n.mode=k2;case k2:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=c,n.bits=u,Pyt(t,d),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,c=n.hold,u=n.bits,n.mode===Jc&&(n.back=-1);break}for(n.back=0;y=n.lencode[c&(1<<n.lenbits)-1],g=y>>>24,v=y>>>16&255,w=y&65535,!(g<=u);){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(v&&!(v&240)){for(_=g,x=v,E=w;y=n.lencode[E+((c&(1<<_+x)-1)>>_)],g=y>>>24,v=y>>>16&255,w=y&65535,!(_+g<=u);){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=g,u-=g,n.back+=g,n.length=w,v===0){n.mode=hG;break}if(v&32){n.back=-1,n.mode=Jc;break}if(v&64){t.msg="invalid literal/length code",n.mode=fr;break}n.extra=v&15,n.mode=cG;case cG:if(n.extra){for(N=n.extra;u<N;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=uG;case uG:for(;y=n.distcode[c&(1<<n.distbits)-1],g=y>>>24,v=y>>>16&255,w=y&65535,!(g<=u);){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(!(v&240)){for(_=g,x=v,E=w;y=n.distcode[E+((c&(1<<_+x)-1)>>_)],g=y>>>24,v=y>>>16&255,w=y&65535,!(_+g<=u);){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=g,u-=g,n.back+=g,v&64){t.msg="invalid distance code",n.mode=fr;break}n.offset=w,n.extra=v&15,n.mode=fG;case fG:if(n.extra){for(N=n.extra;u<N;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=fr;break}n.mode=dG;case dG:if(l===0)break e;if(h=d-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=fr;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),m=n.window}else m=i,p=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[s++]=m[p++];while(--h);n.length===0&&(n.mode=k2);break;case hG:if(l===0)break e;i[s++]=n.length,l--,n.mode=k2;break;case cN:if(n.wrap){for(;u<32;){if(o===0)break e;o--,c|=r[a++]<<u,u+=8}if(d-=l,t.total_out+=d,n.total+=d,n.wrap&4&&d&&(t.adler=n.check=n.flags?ql(n.check,i,d,s-d):Q4(n.check,i,d,s-d)),d=l,n.wrap&4&&(n.flags?c:gG(c))!==n.check){t.msg="incorrect data check",n.mode=fr;break}c=0,u=0}n.mode=pG;case pG:if(n.wrap&&n.flags){for(;u<32;){if(o===0)break e;o--,c+=r[a++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=fr;break}c=0,u=0}n.mode=mG;case mG:O=Dyt;break e;case fr:O=xde;break e;case Ede:return Sde;case Ade:default:return Co}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=c,n.bits=u,(n.wsize||d!==t.avail_out&&n.mode<fr&&(n.mode<cN||e!==Gq))&&Pde(t,t.output,t.next_out,d-t.avail_out),f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,n.total+=d,n.wrap&4&&d&&(t.adler=n.check=n.flags?ql(n.check,i,d,t.next_out-d):Q4(n.check,i,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Jc?128:0)+(n.mode===A2||n.mode===lN?256:0),(f===0&&d===0||e===Gq)&&O===Dp&&(O=Byt),O},Yyt=t=>{if(Zp(t))return Co;let e=t.state;return e.window&&(e.window=null),t.state=null,Dp},Zyt=(t,e)=>{if(Zp(t))return Co;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Dp):Co},Xyt=(t,e)=>{const n=e.length;let r,i,a;return Zp(t)||(r=t.state,r.wrap!==0&&r.mode!==a5)?Co:r.mode===a5&&(i=1,i=Q4(i,e,n,0),i!==r.check)?xde:(a=Pde(t,e,n,n),a?(r.mode=Ede,Sde):(r.havedict=1,Dp))};var Jyt=Ode,Qyt=Tde,evt=kde,tvt=qyt,nvt=Cde,rvt=Kyt,ivt=Yyt,avt=Zyt,svt=Xyt,ovt="pako inflate (from Nodeca project)",ou={inflateReset:Jyt,inflateReset2:Qyt,inflateResetKeep:evt,inflateInit:tvt,inflateInit2:nvt,inflate:rvt,inflateEnd:ivt,inflateGetHeader:avt,inflateSetDictionary:svt,inflateInfo:ovt};function lvt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var cvt=lvt;const Nde=Object.prototype.toString,{Z_NO_FLUSH:uvt,Z_FINISH:fvt,Z_OK:x1,Z_STREAM_END:dN,Z_NEED_DICT:hN,Z_STREAM_ERROR:dvt,Z_DATA_ERROR:vG,Z_MEM_ERROR:hvt}=yde;function b_(t){this.options=vde.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Tyt,this.strm.avail_out=0;let n=ou.inflateInit2(this.strm,e.windowBits);if(n!==x1)throw new Error(e3[n]);if(this.header=new cvt,ou.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=t3.string2buf(e.dictionary):Nde.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ou.inflateSetDictionary(this.strm,e.dictionary),n!==x1)))throw new Error(e3[n])}b_.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?fvt:uvt,Nde.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=ou.inflate(n,s),a===hN&&i&&(a=ou.inflateSetDictionary(n,i),a===x1?a=ou.inflate(n,s):a===vG&&(a=hN));n.avail_in>0&&a===dN&&n.state.wrap>0&&t[n.next_in]!==0;)ou.inflateReset(n),a=ou.inflate(n,s);switch(a){case dvt:case vG:case hN:case hvt:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||a===dN))if(this.options.to==="string"){let l=t3.utf8border(n.output,n.next_out),c=n.next_out-l,u=t3.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===x1&&o===0)){if(a===dN)return a=ou.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};b_.prototype.onData=function(t){this.chunks.push(t)};b_.prototype.onEnd=function(t){t===x1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vde.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function pvt(t,e){const n=new b_(e);if(n.push(t),n.err)throw n.msg||e3[n.err];return n.result}var mvt=b_,gvt=pvt,yvt={Inflate:mvt,inflate:gvt};const{Inflate:vvt,inflate:wvt}=yvt;var wG=vvt,bvt=wvt;const Ide=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;Ide[t]=e}const bG=4294967295;function _vt(t,e,n){let r=t;for(let i=0;i<n;i++)r=Ide[(r^e[i])&255]^r>>>8;return r}function xvt(t,e){return(_vt(bG,t,e)^bG)>>>0}function _G(t,e,n){const r=t.readUint32(),i=xvt(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function Rde(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function jde(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function $de(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function Mde(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<r;a++)e[a]=t[a]+(e[a-i]+n[a]>>1)&255}}function Lde(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+n[a]&255;for(;a<r;a++)e[a]=t[a]+Svt(e[a-i],n[a],n[a-i])&255}}function Svt(t,e,n){const r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),s=Math.abs(r-n);return i<=a&&i<=s?t:a<=s?e:n}function Evt(t,e,n,r,i,a){switch(t){case 0:Rde(e,n,i);break;case 1:jde(e,n,i,a);break;case 2:$de(e,n,r,i);break;case 3:Mde(e,n,r,i,a);break;case 4:Lde(e,n,r,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Avt=new Uint16Array([255]),kvt=new Uint8Array(Avt.buffer),Ovt=kvt[0]===255;function Tvt(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(r*n*o);let c=0;for(let u=0;u<7;u++){const f=s[u],d=Math.ceil((n-f.x)/f.xStep),h=Math.ceil((r-f.y)/f.yStep);if(d<=0||h<=0)continue;const p=d*o,m=new Uint8Array(p);for(let y=0;y<h;y++){const g=e[c++],v=e.subarray(c,c+p);c+=p;const w=new Uint8Array(p);Evt(g,v,w,m,p,o),m.set(w);for(let _=0;_<d;_++){const x=f.x+_*f.xStep,E=f.y+y*f.yStep;if(!(x>=n||E>=r))for(let T=0;T<o;T++)l[(E*n+x)*o+T]=w[_*o+T]}}}if(a===16){const u=new Uint16Array(l.buffer);if(Ovt)for(let f=0;f<u.length;f++)u[f]=Cvt(u[f]);return u}else return l}function Cvt(t){return(t&255)<<8|t>>8&255}const Pvt=new Uint16Array([255]),Nvt=new Uint8Array(Pvt.buffer),Ivt=Nvt[0]===255,Rvt=new Uint8Array(0);function xG(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*n),l=new Uint8Array(r*o);let c=Rvt,u=0,f,d;for(let h=0;h<r;h++){switch(f=e.subarray(u+1,u+1+o),d=l.subarray(h*o,(h+1)*o),e[u]){case 0:Rde(f,d,o);break;case 1:jde(f,d,o,s);break;case 2:$de(f,d,c,o);break;case 3:Mde(f,d,c,o,s);break;case 4:Lde(f,d,c,o,s);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}c=d,u+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(Ivt)for(let p=0;p<h.length;p++)h[p]=jvt(h[p]);return h}else return l}function jvt(t){return(t&255)<<8|t>>8&255}const ES=Uint8Array.of(137,80,78,71,13,10,26,10);function SG(t){if(!$vt(t.readBytes(ES.length)))throw new Error("wrong PNG signature")}function $vt(t){if(t.length<ES.length)return!1;for(let e=0;e<ES.length;e++)if(t[e]!==ES[e])return!1;return!0}const Mvt="tEXt",Lvt=0,Dde=new TextDecoder("latin1");function Dvt(t){if(Bvt(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Fvt=/^[\u0000-\u00FF]*$/;function Bvt(t){if(!Fvt.test(t))throw new Error("invalid latin1 text")}function Uvt(t,e,n){const r=Fde(e);t[r]=zvt(e,n-r.length-1)}function Fde(t){for(t.mark();t.readByte()!==Lvt;);const e=t.offset;t.reset();const n=Dde.decode(t.readBytes(e-t.offset-1));return t.skip(1),Dvt(n),n}function zvt(t,e){return Dde.decode(t.readBytes(e))}const gs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},pN={UNKNOWN:-1,DEFLATE:0},EG={UNKNOWN:-1,ADAPTIVE:0},mN={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},O2={NONE:0,BACKGROUND:1,PREVIOUS:2},gN={SOURCE:0,OVER:1};class Vvt extends x6{constructor(n,r={}){super(n);P(this,"_checkCrc");P(this,"_inflator");P(this,"_png");P(this,"_apng");P(this,"_end");P(this,"_hasPalette");P(this,"_palette");P(this,"_hasTransparency");P(this,"_transparency");P(this,"_compressionMethod");P(this,"_filterMethod");P(this,"_interlaceMethod");P(this,"_colorType");P(this,"_isAnimated");P(this,"_numberOfFrames");P(this,"_numberOfPlays");P(this,"_frames");P(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new wG,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=pN.UNKNOWN,this._filterMethod=EG.UNKNOWN,this._interlaceMethod=mN.UNKNOWN,this._colorType=gs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(SG(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(SG(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case Mvt:Uvt(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?_G(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?_G(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=Wvt(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case gs.GREYSCALE:i=1;break;case gs.TRUECOLOUR:i=3;break;case gs.INDEXED_COLOUR:i=1;break;case gs.GREYSCALE_ALPHA:i=2;break;case gs.TRUECOLOUR_ALPHA:i=4;break;case gs.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==pN.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case gs.GREYSCALE:case gs.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case gs.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case gs.UNKNOWN:case gs.GREYSCALE_ALPHA:case gs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=Fde(this),i=this.readUint8();if(i!==pN.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:bvt(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=xG({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case O2.NONE:break;case O2.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*n.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case O2.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,c=(s*r.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case gN.SOURCE:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let u=0;u<this._png.channels;u++)n.data[l+u]=r.data[c+u]}break;case gN.OVER:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let u=0;u<this._png.channels;u++){const f=r.data[c+this._png.channels-1]/i,d=u%(this._png.channels-1)===0?1:r.data[c+u],h=Math.floor(f*d+(1-f)*n.data[l+u]);n.data[l+u]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==EG.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===mN.NO_INTERLACE)this._png.data=xG({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===mN.ADAM7)this._png.data=Tvt({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:O2.NONE,blendOp:gN.SOURCE,data:n}),this._inflator=new wG,this._writingDataChunks=!1}}function Wvt(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var AG;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(AG||(AG={}));function Hvt(t,e){return new Vvt(t,e).decode()}var Mt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function yN(){Mt.console&&typeof Mt.console.log=="function"&&Mt.console.log.apply(Mt.console,arguments)}var Vn={log:yN,warn:function(t){Mt.console&&(typeof Mt.console.warn=="function"?Mt.console.warn.apply(Mt.console,arguments):yN.call(null,arguments))},error:function(t){Mt.console&&(typeof Mt.console.error=="function"?Mt.console.error.apply(Mt.console,arguments):yN(t))}};function vN(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Nh(r.response,e,n)},r.onerror=function(){Vn.error("could not download file")},r.send()}function kG(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function T2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Nh=Mt.saveAs||((typeof window>"u"?"undefined":In(window))!=="object"||window!==Mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Mt.URL||Mt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?kG(i.href)?vN(t,e,n):T2(i,i.target="_blank"):T2(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){T2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(kG(t))vN(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){T2(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:In(a)!=="object"&&(Vn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return vN(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(Mt.HTMLElement)||Mt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":In(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},o.readAsDataURL(t)}else{var l=Mt.URL||Mt.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Bde(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,s=i.exec(t);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var AS=Mt.atob.bind(Mt),OG=Mt.btoa.bind(Mt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function wN(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=aa(n,r,i,a,e[0],7,-680876936),a=aa(a,n,r,i,e[1],12,-389564586),i=aa(i,a,n,r,e[2],17,606105819),r=aa(r,i,a,n,e[3],22,-1044525330),n=aa(n,r,i,a,e[4],7,-176418897),a=aa(a,n,r,i,e[5],12,1200080426),i=aa(i,a,n,r,e[6],17,-1473231341),r=aa(r,i,a,n,e[7],22,-45705983),n=aa(n,r,i,a,e[8],7,1770035416),a=aa(a,n,r,i,e[9],12,-1958414417),i=aa(i,a,n,r,e[10],17,-42063),r=aa(r,i,a,n,e[11],22,-1990404162),n=aa(n,r,i,a,e[12],7,1804603682),a=aa(a,n,r,i,e[13],12,-40341101),i=aa(i,a,n,r,e[14],17,-1502002290),n=sa(n,r=aa(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=sa(a,n,r,i,e[6],9,-1069501632),i=sa(i,a,n,r,e[11],14,643717713),r=sa(r,i,a,n,e[0],20,-373897302),n=sa(n,r,i,a,e[5],5,-701558691),a=sa(a,n,r,i,e[10],9,38016083),i=sa(i,a,n,r,e[15],14,-660478335),r=sa(r,i,a,n,e[4],20,-405537848),n=sa(n,r,i,a,e[9],5,568446438),a=sa(a,n,r,i,e[14],9,-1019803690),i=sa(i,a,n,r,e[3],14,-187363961),r=sa(r,i,a,n,e[8],20,1163531501),n=sa(n,r,i,a,e[13],5,-1444681467),a=sa(a,n,r,i,e[2],9,-51403784),i=sa(i,a,n,r,e[7],14,1735328473),n=oa(n,r=sa(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=oa(a,n,r,i,e[8],11,-2022574463),i=oa(i,a,n,r,e[11],16,1839030562),r=oa(r,i,a,n,e[14],23,-35309556),n=oa(n,r,i,a,e[1],4,-1530992060),a=oa(a,n,r,i,e[4],11,1272893353),i=oa(i,a,n,r,e[7],16,-155497632),r=oa(r,i,a,n,e[10],23,-1094730640),n=oa(n,r,i,a,e[13],4,681279174),a=oa(a,n,r,i,e[0],11,-358537222),i=oa(i,a,n,r,e[3],16,-722521979),r=oa(r,i,a,n,e[6],23,76029189),n=oa(n,r,i,a,e[9],4,-640364487),a=oa(a,n,r,i,e[12],11,-421815835),i=oa(i,a,n,r,e[15],16,530742520),n=la(n,r=oa(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=la(a,n,r,i,e[7],10,1126891415),i=la(i,a,n,r,e[14],15,-1416354905),r=la(r,i,a,n,e[5],21,-57434055),n=la(n,r,i,a,e[12],6,1700485571),a=la(a,n,r,i,e[3],10,-1894986606),i=la(i,a,n,r,e[10],15,-1051523),r=la(r,i,a,n,e[1],21,-2054922799),n=la(n,r,i,a,e[8],6,1873313359),a=la(a,n,r,i,e[15],10,-30611744),i=la(i,a,n,r,e[6],15,-1560198380),r=la(r,i,a,n,e[13],21,1309151649),n=la(n,r,i,a,e[4],6,-145523070),a=la(a,n,r,i,e[11],10,-1120210379),i=la(i,a,n,r,e[2],15,718787259),r=la(r,i,a,n,e[9],21,-343485551),t[0]=Xf(n,t[0]),t[1]=Xf(r,t[1]),t[2]=Xf(i,t[2]),t[3]=Xf(a,t[3])}function NO(t,e,n,r,i,a){return e=Xf(Xf(e,t),Xf(r,a)),Xf(e<<i|e>>>32-i,n)}function aa(t,e,n,r,i,a,s){return NO(e&n|~e&r,t,e,i,a,s)}function sa(t,e,n,r,i,a,s){return NO(e&r|n&~r,t,e,i,a,s)}function oa(t,e,n,r,i,a,s){return NO(e^n^r,t,e,i,a,s)}function la(t,e,n,r,i,a,s){return NO(n^(e|~r),t,e,i,a,s)}function Ude(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)wN(r,qvt(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(wN(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,wN(r,i),r}function qvt(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var TG="0123456789abcdef".split("");function Gvt(t){for(var e="",n=0;n<4;n++)e+=TG[t>>8*n+4&15]+TG[t>>8*n&15];return e}function Kvt(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function n3(t){return Ude(t).map(Kvt).join("")}var Yvt=function(t){for(var e=0;e<t.length;e++)t[e]=Gvt(t[e]);return t.join("")}(Ude("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xf(t,e){if(Yvt){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function r3(t,e){var n,r,i,a;if(t!==n){for(var s=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=t,r=o}else o=r;var f=e.length,d=0,h=0,p="";for(l=0;l<f;l++)h=(h+(u=o[d=(d+1)%256]))%256,o[d]=o[h],o[h]=u,s=o[(o[d]+o[h])%256],p+=String.fromCharCode(e.charCodeAt(l)^s);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var CG={print:4,modify:8,copy:16,"annot-forms":32};function Hm(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(CG.perm!==void 0)throw new Error("Invalid permission: "+o);i+=CG[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=n3(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=r3(this.encryptionKey,this.padding)}function qm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function PG(t){if(In(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var s=e[n][a];try{s[0].apply(t,r)}catch(o){Mt.console&&Vn.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function s5(t){if(!(this instanceof s5))return new s5(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function zde(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Mh(t,e,n,r,i){if(!(this instanceof Mh))return new Mh(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,zde.call(this,r,i)}function Ag(t,e,n,r,i){if(!(this instanceof Ag))return new Ag(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,zde.call(this,r,i)}function _t(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,c="S",u=null;In(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),s=t.filters||(a===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,d={},h={internal:{},__private__:{}};h.__private__.PubSub=PG;var p="1.3",m=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(C){p=C};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return y};var g=h.__private__.getPageFormat=function(C){return y[C]};i=i||"a4";var v="compat",w="advanced",_=v;function x(){this.saveGraphicsState(),ee(new Ot($t,0,0,-$t,0,rh()*$t).toString()+" cm"),this.setFontSize(this.getFontSize()/$t),c="n",_=w}function E(){this.restoreGraphicsState(),c="S",_=v}var T=h.__private__.combineFontStyleAndFontWeight=function(C,W){if(C=="bold"&&W=="normal"||C=="bold"&&W==400||C=="normal"&&W=="italic"||C=="bold"&&W=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return W&&(C=W==400||W==="normal"?C==="italic"?"italic":"normal":W!=700&&W!=="bold"||C!=="normal"?(W==700?"bold":W)+""+C:"bold"),C};h.advancedAPI=function(C){var W=_===v;return W&&x.call(this),typeof C!="function"||(C(this),W&&E.call(this)),this},h.compatAPI=function(C){var W=_===w;return W&&E.call(this),typeof C!="function"||(C(this),W&&x.call(this)),this},h.isAdvancedAPI=function(){return _===w};var O,R=function(C){if(_!==w)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=h.roundToPrecision=h.__private__.roundToPrecision=function(C,W){var ce=e||W;if(isNaN(C)||isNaN(ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(ce).replace(/0+$/,"")};O=h.hpf=h.__private__.hpf=typeof l=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return M(C,l)}:l==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return M(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return M(C,16)};var N=h.f2=h.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return M(C,2)},j=h.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return M(C,3)},U=h.scale=h.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return _===v?C*$t:_===w?C:void 0},B=function(C){return U(function(W){return _===v?rh()-W:_===w?W:void 0}(C))};h.__private__.setPrecision=h.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var V,Y="00000000000000000000000000000000",X=h.__private__.getFileId=function(){return Y},z=h.__private__.setFileId=function(C){return Y=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(si=new Hm(u.userPermissions,u.userPassword,u.ownerPassword,Y)),Y};h.setFileId=function(C){return z(C),this},h.getFileId=function(){return X()};var G=h.__private__.convertDateToPDFDate=function(C){var W=C.getTimezoneOffset(),ce=W<0?"+":"-",he=Math.floor(Math.abs(W/60)),ye=Math.abs(W%60),Te=[ce,Q(he),"'",Q(ye),"'"].join("");return["D:",C.getFullYear(),Q(C.getMonth()+1),Q(C.getDate()),Q(C.getHours()),Q(C.getMinutes()),Q(C.getSeconds()),Te].join("")},ae=h.__private__.convertPDFDateToDate=function(C){var W=parseInt(C.substr(2,4),10),ce=parseInt(C.substr(6,2),10)-1,he=parseInt(C.substr(8,2),10),ye=parseInt(C.substr(10,2),10),Te=parseInt(C.substr(12,2),10),$e=parseInt(C.substr(14,2),10);return new Date(W,ce,he,ye,Te,$e,0)},ue=h.__private__.setCreationDate=function(C){var W;if(C===void 0&&(C=new Date),C instanceof Date)W=G(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");W=C}return V=W},L=h.__private__.getCreationDate=function(C){var W=V;return C==="jsDate"&&(W=ae(V)),W};h.setCreationDate=function(C){return ue(C),this},h.getCreationDate=function(C){return L(C)};var K,Q=h.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},re=h.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},F=0,$=[],ie=[],q=0,fe=[],me=[],de=!1,_e=ie;h.__private__.setCustomOutputDestination=function(C){de=!0,_e=C};var Oe=function(C){de||(_e=C)};h.__private__.resetCustomOutputDestination=function(){de=!1,_e=ie};var ee=h.__private__.out=function(C){return C=C.toString(),q+=C.length+1,_e.push(C),_e},Ee=h.__private__.write=function(C){return ee(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},Qe=h.__private__.getArrayBuffer=function(C){for(var W=C.length,ce=new ArrayBuffer(W),he=new Uint8Array(ce);W--;)he[W]=C.charCodeAt(W);return ce},tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return tt};var Pe=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(C){return Pe=_===w?C/$t:C,this};var xe,Ze=h.__private__.getFontSize=h.getFontSize=function(){return _===v?Pe:Pe*$t},Re=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(C){return Re=C,this},h.__private__.getR2L=h.getR2L=function(){return Re};var Ie,Ye=h.__private__.setZoomMode=function(C){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))xe=C;else if(isNaN(C)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');xe=C}else xe=parseInt(C,10)};h.__private__.getZoomMode=function(){return xe};var je,Ne=h.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');Ie=C};h.__private__.getPageMode=function(){return Ie};var Ke=h.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');je=C};h.__private__.getLayoutMode=function(){return je},h.__private__.setDisplayMode=h.setDisplayMode=function(C,W,ce){return Ye(C),Ke(W),Ne(ce),this};var He={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(C){if(Object.keys(He).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return He[C]},h.__private__.getDocumentProperties=function(){return He},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(C){for(var W in He)He.hasOwnProperty(W)&&C[W]&&(He[W]=C[W]);return this},h.__private__.setDocumentProperty=function(C,W){if(Object.keys(He).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return He[C]=W};var et,$t,dt,gr,ln,Kt={},Yt={},Hn=[],St={},Mn={},Tt={},Ge={},kt=null,ze=0,Xe=[],Ut=new PG(h),qt=t.hotfixes||[],ki={},Ro={},Ws=[],Ot=function C(W,ce,he,ye,Te,$e){if(!(this instanceof C))return new C(W,ce,he,ye,Te,$e);isNaN(W)&&(W=1),isNaN(ce)&&(ce=0),isNaN(he)&&(he=0),isNaN(ye)&&(ye=1),isNaN(Te)&&(Te=0),isNaN($e)&&($e=0),this._matrix=[W,ce,he,ye,Te,$e]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(C)},Ot.prototype.multiply=function(C){var W=C.sx*this.sx+C.shy*this.shx,ce=C.sx*this.shy+C.shy*this.sy,he=C.shx*this.sx+C.sy*this.shx,ye=C.shx*this.shy+C.sy*this.sy,Te=C.tx*this.sx+C.ty*this.shx+this.tx,$e=C.tx*this.shy+C.ty*this.sy+this.ty;return new Ot(W,ce,he,ye,Te,$e)},Ot.prototype.decompose=function(){var C=this.sx,W=this.shy,ce=this.shx,he=this.sy,ye=this.tx,Te=this.ty,$e=Math.sqrt(C*C+W*W),ft=(C/=$e)*ce+(W/=$e)*he;ce-=C*ft,he-=W*ft;var vt=Math.sqrt(ce*ce+he*he);return ft/=vt,C*(he/=vt)<W*(ce/=vt)&&(C=-C,W=-W,ft=-ft,$e=-$e),{scale:new Ot($e,0,0,vt,0,0),translate:new Ot(1,0,0,1,ye,Te),rotate:new Ot(C,W,-W,C,0,0),skew:new Ot(1,0,ft,1,0,0)}},Ot.prototype.toString=function(C){return this.join(" ")},Ot.prototype.inversed=function(){var C=this.sx,W=this.shy,ce=this.shx,he=this.sy,ye=this.tx,Te=this.ty,$e=1/(C*he-W*ce),ft=he*$e,vt=-W*$e,Lt=-ce*$e,Gt=C*$e;return new Ot(ft,vt,Lt,Gt,-ft*ye-Lt*Te,-vt*ye-Gt*Te)},Ot.prototype.applyToPoint=function(C){var W=C.x*this.sx+C.y*this.shx+this.tx,ce=C.x*this.shy+C.y*this.sy+this.ty;return new Lc(W,ce)},Ot.prototype.applyToRectangle=function(C){var W=this.applyToPoint(C),ce=this.applyToPoint(new Lc(C.x+C.w,C.y+C.h));return new zv(W.x,W.y,ce.x-W.x,ce.y-W.y)},Ot.prototype.clone=function(){var C=this.sx,W=this.shy,ce=this.shx,he=this.sy,ye=this.tx,Te=this.ty;return new Ot(C,W,ce,he,ye,Te)},h.Matrix=Ot;var os=h.matrixMult=function(C,W){return W.multiply(C)},Ic=new Ot(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Ic;var Hs=function(C,W){if(!Mn[C]){var ce=(W instanceof Mh?"Sh":"P")+(Object.keys(St).length+1).toString(10);W.id=ce,Mn[C]=ce,St[ce]=W,Ut.publish("addPattern",W)}};h.ShadingPattern=Mh,h.TilingPattern=Ag,h.addShadingPattern=function(C,W){return R("addShadingPattern()"),Hs(C,W),this},h.beginTilingPattern=function(C){R("beginTilingPattern()"),Vv(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},h.endTilingPattern=function(C,W){R("endTilingPattern()"),W.stream=me[K].join(`
`),Hs(C,W),Ut.publish("endTilingPattern",W),Ws.pop().restore()};var qs,Ar=h.__private__.newObject=function(){var C=Oi();return Li(C,!0),C},Oi=h.__private__.newObjectDeferred=function(){return F++,$[F]=function(){return q},F},Li=function(C,W){return W=typeof W=="boolean"&&W,$[C]=q,W&&ee(C+" 0 obj"),C},Zd=h.__private__.newAdditionalObject=function(){var C={objId:Oi(),content:""};return fe.push(C),C},tf=Oi(),jo=Oi(),$l=h.__private__.decodeColorString=function(C){var W=C.split(" ");if(W.length!==2||W[1]!=="g"&&W[1]!=="G")W.length!==5||W[4]!=="k"&&W[4]!=="K"||(W=[(1-W[0])*(1-W[3]),(1-W[1])*(1-W[3]),(1-W[2])*(1-W[3]),"r"]);else{var ce=parseFloat(W[0]);W=[ce,ce,ce,"r"]}for(var he="#",ye=0;ye<3;ye++)he+=("0"+Math.floor(255*parseFloat(W[ye])).toString(16)).slice(-2);return he},$o=h.__private__.encodeColorString=function(C){var W;typeof C=="string"&&(C={ch1:C});var ce=C.ch1,he=C.ch2,ye=C.ch3,Te=C.ch4,$e=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ce=="string"&&ce.charAt(0)!=="#"){var ft=new Bde(ce);if(ft.ok)ce=ft.toHex();else if(!/^\d*\.?\d*$/.test(ce))throw new Error('Invalid color "'+ce+'" passed to jsPDF.encodeColorString.')}if(typeof ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ce)&&(ce="#"+ce[1]+ce[1]+ce[2]+ce[2]+ce[3]+ce[3]),typeof ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ce)){var vt=parseInt(ce.substr(1),16);ce=vt>>16&255,he=vt>>8&255,ye=255&vt}if(he===void 0||Te===void 0&&ce===he&&he===ye)W=typeof ce=="string"?ce+" "+$e[0]:C.precision===2?N(ce/255)+" "+$e[0]:j(ce/255)+" "+$e[0];else if(Te===void 0||In(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return["1.","1.","1.",$e[1]].join(" ");W=typeof ce=="string"?[ce,he,ye,$e[1]].join(" "):C.precision===2?[N(ce/255),N(he/255),N(ye/255),$e[1]].join(" "):[j(ce/255),j(he/255),j(ye/255),$e[1]].join(" ")}else W=typeof ce=="string"?[ce,he,ye,Te,$e[2]].join(" "):C.precision===2?[N(ce),N(he),N(ye),N(Te),$e[2]].join(" "):[j(ce),j(he),j(ye),j(Te),$e[2]].join(" ");return W},Mo=h.__private__.getFilters=function(){return s},Gs=h.__private__.putStream=function(C){var W=(C=C||{}).data||"",ce=C.filters||Mo(),he=C.alreadyAppliedFilters||[],ye=C.addLength1||!1,Te=W.length,$e=C.objectId,ft=function(oi){return oi};if(u!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(ft=si.encryptor($e,0));var vt={};ce===!0&&(ce=["FlateEncode"]);var Lt=C.additionalKeyValues||[],Gt=(vt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(W,ce):{data:W,reverseChain:[]}).reverseChain+(Array.isArray(he)?he.join(" "):he.toString());if(vt.data.length!==0&&(Lt.push({key:"Length",value:vt.data.length}),ye===!0&&Lt.push({key:"Length1",value:Te})),Gt.length!=0)if(Gt.split("/").length-1==1)Lt.push({key:"Filter",value:Gt});else{Lt.push({key:"Filter",value:"["+Gt+"]"});for(var pn=0;pn<Lt.length;pn+=1)if(Lt[pn].key==="DecodeParms"){for(var yr=[],Hr=0;Hr<vt.reverseChain.split("/").length-1;Hr+=1)yr.push("null");yr.push(Lt[pn].value),Lt[pn].value="["+yr.join(" ")+"]"}}ee("<<");for(var qn=0;qn<Lt.length;qn++)ee("/"+Lt[qn].key+" "+Lt[qn].value);ee(">>"),vt.data.length!==0&&(ee("stream"),ee(ft(vt.data)),ee("endstream"))},Xd=h.__private__.putPage=function(C){var W=C.number,ce=C.data,he=C.objId,ye=C.contentsObjId;Li(he,!0),ee("<</Type /Page"),ee("/Parent "+C.rootDictionaryObjId+" 0 R"),ee("/Resources "+C.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(O(C.mediaBox.bottomLeftX))+" "+parseFloat(O(C.mediaBox.bottomLeftY))+" "+O(C.mediaBox.topRightX)+" "+O(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ee("/CropBox ["+O(C.cropBox.bottomLeftX)+" "+O(C.cropBox.bottomLeftY)+" "+O(C.cropBox.topRightX)+" "+O(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ee("/BleedBox ["+O(C.bleedBox.bottomLeftX)+" "+O(C.bleedBox.bottomLeftY)+" "+O(C.bleedBox.topRightX)+" "+O(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ee("/TrimBox ["+O(C.trimBox.bottomLeftX)+" "+O(C.trimBox.bottomLeftY)+" "+O(C.trimBox.topRightX)+" "+O(C.trimBox.topRightY)+"]"),C.artBox!==null&&ee("/ArtBox ["+O(C.artBox.bottomLeftX)+" "+O(C.artBox.bottomLeftY)+" "+O(C.artBox.topRightX)+" "+O(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ee("/UserUnit "+C.userUnit),Ut.publish("putPage",{objId:he,pageContext:Xe[W],pageNumber:W,page:ce}),ee("/Contents "+ye+" 0 R"),ee(">>"),ee("endobj");var Te=ce.join(`
`);return _===w&&(Te+=`
Q`),Li(ye,!0),Gs({data:Te,filters:Mo(),objectId:ye}),ee("endobj"),he},Ml=h.__private__.putPages=function(){var C,W,ce=[];for(C=1;C<=ze;C++)Xe[C].objId=Oi(),Xe[C].contentsObjId=Oi();for(C=1;C<=ze;C++)ce.push(Xd({number:C,data:me[C],objId:Xe[C].objId,contentsObjId:Xe[C].contentsObjId,mediaBox:Xe[C].mediaBox,cropBox:Xe[C].cropBox,bleedBox:Xe[C].bleedBox,trimBox:Xe[C].trimBox,artBox:Xe[C].artBox,userUnit:Xe[C].userUnit,rootDictionaryObjId:tf,resourceDictionaryObjId:jo}));Li(tf,!0),ee("<</Type /Pages");var he="/Kids [";for(W=0;W<ze;W++)he+=ce[W]+" 0 R ";ee(he+"]"),ee("/Count "+ze),ee(">>"),ee("endobj"),Ut.publish("postPutPages")},Jd=function(C){Ut.publish("putFont",{font:C,out:ee,newObject:Ar,putStream:Gs}),C.isAlreadyPutted!==!0&&(C.objectNumber=Ar(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+qm(C.postScriptName)),ee("/Subtype /Type1"),typeof C.encoding=="string"&&ee("/Encoding /"+C.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Jp=function(C){C.objectNumber=Ar();var W=[];W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Form"}),W.push({key:"BBox",value:"["+[O(C.x),O(C.y),O(C.x+C.width),O(C.y+C.height)].join(" ")+"]"}),W.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var ce=C.pages[1].join(`
`);Gs({data:ce,additionalKeyValues:W,objectId:C.objectNumber}),ee("endobj")},Qp=function(C,W){W||(W=21);var ce=Ar(),he=function($e,ft){var vt,Lt=[],Gt=1/(ft-1);for(vt=0;vt<1;vt+=Gt)Lt.push(vt);if(Lt.push(1),$e[0].offset!=0){var pn={offset:0,color:$e[0].color};$e.unshift(pn)}if($e[$e.length-1].offset!=1){var yr={offset:1,color:$e[$e.length-1].color};$e.push(yr)}for(var Hr="",qn=0,oi=0;oi<Lt.length;oi++){for(vt=Lt[oi];vt>$e[qn+1].offset;)qn++;var qr=$e[qn].offset,Di=(vt-qr)/($e[qn+1].offset-qr),Bc=$e[qn].color,Do=$e[qn+1].color;Hr+=re(Math.round((1-Di)*Bc[0]+Di*Do[0]).toString(16))+re(Math.round((1-Di)*Bc[1]+Di*Do[1]).toString(16))+re(Math.round((1-Di)*Bc[2]+Di*Do[2]).toString(16))}return Hr.trim()}(C.colors,W),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+W+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Gs({data:he,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ce}),ee("endobj"),C.objectNumber=Ar(),ee("<< /ShadingType "+C.type),ee("/ColorSpace /DeviceRGB");var Te="/Coords ["+O(parseFloat(C.coords[0]))+" "+O(parseFloat(C.coords[1]))+" ";C.type===2?Te+=O(parseFloat(C.coords[2]))+" "+O(parseFloat(C.coords[3])):Te+=O(parseFloat(C.coords[2]))+" "+O(parseFloat(C.coords[3]))+" "+O(parseFloat(C.coords[4]))+" "+O(parseFloat(C.coords[5])),ee(Te+="]"),C.matrix&&ee("/Matrix ["+C.matrix.toString()+"]"),ee("/Function "+ce+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},em=function(C,W){var ce=Oi(),he=Ar();W.push({resourcesOid:ce,objectOid:he}),C.objectNumber=he;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+C.boundingBox.map(O).join(" ")+"]"}),ye.push({key:"XStep",value:O(C.xStep)}),ye.push({key:"YStep",value:O(C.yStep)}),ye.push({key:"Resources",value:ce+" 0 R"}),C.matrix&&ye.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),Gs({data:C.stream,additionalKeyValues:ye,objectId:C.objectNumber}),ee("endobj")},$O=function(C){for(var W in C.objectNumber=Ar(),ee("<<"),C)switch(W){case"opacity":ee("/ca "+N(C[W]));break;case"stroke-opacity":ee("/CA "+N(C[W]))}ee(">>"),ee("endobj")},jv=function(C){Li(C.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var W in ee("/Font <<"),Kt)Kt.hasOwnProperty(W)&&(f===!1||f===!0&&d.hasOwnProperty(W))&&ee("/"+W+" "+Kt[W].objectNumber+" 0 R");ee(">>")}(),function(){if(Object.keys(St).length>0){for(var W in ee("/Shading <<"),St)St.hasOwnProperty(W)&&St[W]instanceof Mh&&St[W].objectNumber>=0&&ee("/"+W+" "+St[W].objectNumber+" 0 R");Ut.publish("putShadingPatternDict"),ee(">>")}}(),function(W){if(Object.keys(St).length>0){for(var ce in ee("/Pattern <<"),St)St.hasOwnProperty(ce)&&St[ce]instanceof h.TilingPattern&&St[ce].objectNumber>=0&&St[ce].objectNumber<W&&ee("/"+ce+" "+St[ce].objectNumber+" 0 R");Ut.publish("putTilingPatternDict"),ee(">>")}}(C.objectOid),function(){if(Object.keys(Tt).length>0){var W;for(W in ee("/ExtGState <<"),Tt)Tt.hasOwnProperty(W)&&Tt[W].objectNumber>=0&&ee("/"+W+" "+Tt[W].objectNumber+" 0 R");Ut.publish("putGStateDict"),ee(">>")}}(),function(){for(var W in ee("/XObject <<"),ki)ki.hasOwnProperty(W)&&ki[W].objectNumber>=0&&ee("/"+W+" "+ki[W].objectNumber+" 0 R");Ut.publish("putXobjectDict"),ee(">>")}(),ee(">>"),ee("endobj")},__=function(C){Yt[C.fontName]=Yt[C.fontName]||{},Yt[C.fontName][C.fontStyle]=C.id},x_=function(C,W,ce,he,ye){var Te={id:"F"+(Object.keys(Kt).length+1).toString(10),postScriptName:C,fontName:W,fontStyle:ce,encoding:he,isStandardFont:ye||!1,metadata:{}};return Ut.publish("addFont",{font:Te,instance:this}),Kt[Te.id]=Te,__(Te),Te.id},Ks=h.__private__.pdfEscape=h.pdfEscape=function(C,W){return function(ce,he){var ye,Te,$e,ft,vt,Lt,Gt,pn,yr;if($e=(he=he||{}).sourceEncoding||"Unicode",vt=he.outputEncoding,(he.autoencode||vt)&&Kt[et].metadata&&Kt[et].metadata[$e]&&Kt[et].metadata[$e].encoding&&(ft=Kt[et].metadata[$e].encoding,!vt&&Kt[et].encoding&&(vt=Kt[et].encoding),!vt&&ft.codePages&&(vt=ft.codePages[0]),typeof vt=="string"&&(vt=ft[vt]),vt)){for(Gt=!1,Lt=[],ye=0,Te=ce.length;ye<Te;ye++)(pn=vt[ce.charCodeAt(ye)])?Lt.push(String.fromCharCode(pn)):Lt.push(ce[ye]),Lt[ye].charCodeAt(0)>>8&&(Gt=!0);ce=Lt.join("")}for(ye=ce.length;Gt===void 0&&ye!==0;)ce.charCodeAt(ye-1)>>8&&(Gt=!0),ye--;if(!Gt)return ce;for(Lt=he.noBOM?[]:[254,255],ye=0,Te=ce.length;ye<Te;ye++){if((yr=(pn=ce.charCodeAt(ye))>>8)>>8)throw new Error("Character at position "+ye+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Lt.push(yr),Lt.push(pn-(yr<<8))}return String.fromCharCode.apply(void 0,Lt)}(C,W).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$v=h.__private__.beginPage=function(C){me[++ze]=[],Xe[ze]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},E_(ze),Oe(me[K])},S_=function(C,W){var ce,he,ye;switch(n=W||n,typeof C=="string"&&(ce=g(C.toLowerCase()),Array.isArray(ce)&&(he=ce[0],ye=ce[1])),Array.isArray(C)&&(he=C[0]*$t,ye=C[1]*$t),isNaN(he)&&(he=i[0],ye=i[1]),(he>14400||ye>14400)&&(Vn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),he=Math.min(14400,he),ye=Math.min(14400,ye)),i=[he,ye],n.substr(0,1)){case"l":ye>he&&(i=[ye,he]);break;case"p":he>ye&&(i=[ye,he])}$v(i),Ft(Dv),ee(im),Bv!==0&&ee(Bv+" J"),Uv!==0&&ee(Uv+" j"),Ut.publish("addPage",{pageNumber:ze})},Mv=function(C){C>0&&C<=ze&&(me.splice(C,1),Xe.splice(C,1),ze--,K>ze&&(K=ze),this.setPage(K))},E_=function(C){C>0&&C<=ze&&(K=C)},A_=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return me.length-1},k_=function(C,W,ce){var he,ye=void 0;return ce=ce||{},C=C!==void 0?C:Kt[et].fontName,W=W!==void 0?W:Kt[et].fontStyle,he=C.toLowerCase(),Yt[he]!==void 0&&Yt[he][W]!==void 0?ye=Yt[he][W]:Yt[C]!==void 0&&Yt[C][W]!==void 0?ye=Yt[C][W]:ce.disableWarning===!1&&Vn.warn("Unable to look up font label for font '"+C+"', '"+W+"'. Refer to getFontList() for available fonts."),ye||ce.noFallback||(ye=Yt.times[W])==null&&(ye=Yt.times.normal),ye},Ll=h.__private__.putInfo=function(){var C=Ar(),W=function(he){return he};for(var ce in u!==null&&(W=si.encryptor(C,0)),ee("<<"),ee("/Producer ("+Ks(W("jsPDF "+_t.version))+")"),He)He.hasOwnProperty(ce)&&He[ce]&&ee("/"+ce.substr(0,1).toUpperCase()+ce.substr(1)+" ("+Ks(W(He[ce]))+")");ee("/CreationDate ("+Ks(W(V))+")"),ee(">>"),ee("endobj")},tm=h.__private__.putCatalog=function(C){var W=(C=C||{}).rootDictionaryObjId||tf;switch(Ar(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+W+" 0 R"),xe||(xe="fullwidth"),xe){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ce=""+xe;ce.substr(ce.length-1)==="%"&&(xe=parseInt(xe)/100),typeof xe=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+N(xe)+"]")}switch(je||(je="continuous"),je){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}Ie&&ee("/PageMode /"+Ie),Ut.publish("putCatalog"),ee(">>"),ee("endobj")},MO=h.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(F+1)),ee("/Root "+F+" 0 R"),ee("/Info "+(F-1)+" 0 R"),u!==null&&ee("/Encrypt "+si.oid+" 0 R"),ee("/ID [ <"+Y+"> <"+Y+"> ]"),ee(">>")},Wr=h.__private__.putHeader=function(){ee("%PDF-"+p),ee("%")},O_=h.__private__.putXRef=function(){var C="0000000000";ee("xref"),ee("0 "+(F+1)),ee("0000000000 65535 f ");for(var W=1;W<=F;W++)typeof $[W]=="function"?ee((C+$[W]()).slice(-10)+" 00000 n "):$[W]!==void 0?ee((C+$[W]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},Dl=h.__private__.buildDocument=function(){var C;F=0,q=0,ie=[],$=[],fe=[],tf=Oi(),jo=Oi(),Oe(ie),Ut.publish("buildDocument"),Wr(),Ml(),function(){Ut.publish("putAdditionalObjects");for(var ce=0;ce<fe.length;ce++){var he=fe[ce];Li(he.objId,!0),ee(he.content),ee("endobj")}Ut.publish("postPutAdditionalObjects")}(),C=[],function(){for(var ce in Kt)Kt.hasOwnProperty(ce)&&(f===!1||f===!0&&d.hasOwnProperty(ce))&&Jd(Kt[ce])}(),function(){var ce;for(ce in Tt)Tt.hasOwnProperty(ce)&&$O(Tt[ce])}(),function(){for(var ce in ki)ki.hasOwnProperty(ce)&&Jp(ki[ce])}(),function(ce){var he;for(he in St)St.hasOwnProperty(he)&&(St[he]instanceof Mh?Qp(St[he]):St[he]instanceof Ag&&em(St[he],ce))}(C),Ut.publish("putResources"),C.forEach(jv),jv({resourcesOid:jo,objectOid:Number.MAX_SAFE_INTEGER}),Ut.publish("postPutResources"),u!==null&&(si.oid=Ar(),ee("<<"),ee("/Filter /Standard"),ee("/V "+si.v),ee("/R "+si.r),ee("/U <"+si.toHexString(si.U)+">"),ee("/O <"+si.toHexString(si.O)+">"),ee("/P "+si.P),ee(">>"),ee("endobj")),Ll(),tm();var W=q;return O_(),MO(),ee("startxref"),ee(""+W),ee("%%EOF"),Oe(me[K]),ie.join(`
`)},nm=h.__private__.getBlob=function(C){return new Blob([Qe(C)],{type:"application/pdf"})},T_=h.output=h.__private__.output=(qs=function(C,W){switch(typeof(W=W||{})=="string"?W={filename:W}:W.filename=W.filename||"generated.pdf",C){case void 0:return Dl();case"save":h.save(W.filename);break;case"arraybuffer":return Qe(Dl());case"blob":return nm(Dl());case"bloburi":case"bloburl":if(Mt.URL!==void 0&&typeof Mt.URL.createObjectURL=="function")return Mt.URL&&Mt.URL.createObjectURL(nm(Dl()))||void 0;Vn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ce="",he=Dl();try{ce=OG(he)}catch{ce=OG(unescape(encodeURIComponent(he)))}return"data:application/pdf;filename="+W.filename+";base64,"+ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';W.pdfObjectUrl&&(ye=W.pdfObjectUrl,Te="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(W)+");<\/script></body></html>",ft=Mt.open();return ft!==null&&ft.document.write($e),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mt)==="[object Window]"){var vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(W.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+W.filename+'" width="500px" height="400px" /></body></html>',Lt=Mt.open();if(Lt!==null){Lt.document.write(vt);var Gt=this;Lt.document.documentElement.querySelector("#pdfViewer").onload=function(){Lt.document.title=W.filename,Lt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Gt.output("bloburl"))}}return Lt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",W)+'"></iframe></body></html>',yr=Mt.open();if(yr!==null&&(yr.document.write(pn),yr.document.title=W.filename),yr||typeof safari>"u")return yr;break;case"datauri":case"dataurl":return Mt.document.location.href=this.output("datauristring",W);default:return null}},qs.foo=function(){try{return qs.apply(this,arguments)}catch(ce){var C=ce.stack||"";~C.indexOf(" at ")&&(C=C.split(" at ")[1]);var W="Error in function "+C.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Mt.console)throw new Error(W);Mt.console.error(W,ce),Mt.alert&&alert(W)}},qs.foo.bar=qs,qs.foo),Ys=function(C){return Array.isArray(qt)===!0&&qt.indexOf(C)>-1};switch(r){case"pt":$t=1;break;case"mm":$t=72/25.4;break;case"cm":$t=72/2.54;break;case"in":$t=72;break;case"px":$t=Ys("px_scaling")==1?.75:96/72;break;case"pc":case"em":$t=12;break;case"ex":$t=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);$t=r}var si=null;ue(),z();var Rc=h.__private__.getPageInfo=h.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Xe[C].objId,pageNumber:C,pageContext:Xe[C]}},C_=h.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var W in Xe)if(Xe[W].objId===C)break;return Rc(W)},LO=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Xe[K].objId,pageNumber:K,pageContext:Xe[K]}};h.addPage=function(){return S_.apply(this,arguments),this},h.setPage=function(){return E_.apply(this,arguments),Oe.call(this,me[K]),this},h.insertPage=function(C){return this.addPage(),this.movePage(K,C),this},h.movePage=function(C,W){var ce,he;if(C>W){ce=me[C],he=Xe[C];for(var ye=C;ye>W;ye--)me[ye]=me[ye-1],Xe[ye]=Xe[ye-1];me[W]=ce,Xe[W]=he,this.setPage(W)}else if(C<W){ce=me[C],he=Xe[C];for(var Te=C;Te<W;Te++)me[Te]=me[Te+1],Xe[Te]=Xe[Te+1];me[W]=ce,Xe[W]=he,this.setPage(W)}return this},h.deletePage=function(){return Mv.apply(this,arguments),this},h.__private__.text=h.text=function(C,W,ce,he,ye){var Te,$e,ft,vt,Lt,Gt,pn,yr,Hr,qn=(he=he||{}).scope||this;if(typeof C=="number"&&typeof W=="number"&&(typeof ce=="string"||Array.isArray(ce))){var oi=ce;ce=W,W=C,C=oi}if(arguments[3]instanceof Ot==0?(ft=arguments[4],vt=arguments[5],In(pn=arguments[3])==="object"&&pn!==null||(typeof ft=="string"&&(vt=ft,ft=null),typeof pn=="string"&&(vt=pn,pn=null),typeof pn=="number"&&(ft=pn,pn=null),he={flags:pn,angle:ft,align:vt})):(R("The transform parameter of text() with a Matrix value"),Hr=ye),isNaN(W)||isNaN(ce)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return qn;var qr,Di="",Bc=typeof he.lineHeightFactor=="number"?he.lineHeightFactor:eh,Do=qn.internal.scaleFactor;function Uc(En){return En=En.split("	").join(Array(he.TabLen||9).join(" ")),Ks(En,pn)}function Hv(En){for(var Un,Mr=En.concat(),li=[],Wc=Mr.length;Wc--;)typeof(Un=Mr.shift())=="string"?li.push(Un):Array.isArray(En)&&(Un.length===1||Un[1]===void 0&&Un[2]===void 0)?li.push(Un[0]):li.push([Un[0],Un[1],Un[2]]);return li}function sm(En,Un){var Mr;if(typeof En=="string")Mr=Un(En)[0];else if(Array.isArray(En)){for(var li,Wc,t0=En.concat(),cm=[],B_=t0.length;B_--;)typeof(li=t0.shift())=="string"?cm.push(Un(li)[0]):Array.isArray(li)&&typeof li[0]=="string"&&(Wc=Un(li[0],li[1],li[2]),cm.push([Wc[0],Wc[1],Wc[2]]));Mr=cm}return Mr}var nf=!1,ih=!0;if(typeof C=="string")nf=!0;else if(Array.isArray(C)){var ah=C.concat();$e=[];for(var rf,Fi=ah.length;Fi--;)(typeof(rf=ah.shift())!="string"||Array.isArray(rf)&&typeof rf[0]!="string")&&(ih=!1);nf=ih}if(nf===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var sh=Pe/qn.internal.scaleFactor,oh=sh*(Bc-1);switch(he.baseline){case"bottom":ce-=oh;break;case"top":ce+=sh-oh;break;case"hanging":ce+=sh-2*oh;break;case"middle":ce+=sh/2-oh}if((Gt=he.maxWidth||0)>0&&(typeof C=="string"?C=qn.splitTextToSize(C,Gt):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(En,Un){return En.concat(qn.splitTextToSize(Un,Gt))},[]))),Te={text:C,x:W,y:ce,options:he,mutex:{pdfEscape:Ks,activeFontKey:et,fonts:Kt,activeFontSize:Pe}},Ut.publish("preProcessText",Te),C=Te.text,ft=(he=Te.options).angle,Hr instanceof Ot==0&&ft&&typeof ft=="number"){ft*=Math.PI/180,he.rotationDirection===0&&(ft=-ft),_===w&&(ft=-ft);var qv=Math.cos(ft),Gv=Math.sin(ft);Hr=new Ot(qv,Gv,-Gv,qv,0,0)}else ft&&ft instanceof Ot&&(Hr=ft);_!==w||Hr||(Hr=Ic),(Lt=he.charSpace||Mc)!==void 0&&(Di+=O(U(Lt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(yr=he.horizontalScale)!==void 0&&(Di+=O(100*yr)+` Tz
`),he.lang;var va=-1,zc=he.renderingMode!==void 0?he.renderingMode:he.stroke,om=qn.internal.getCurrentPageInfo().pageContext;switch(zc){case 0:case!1:case"fill":va=0;break;case 1:case!0:case"stroke":va=1;break;case 2:case"fillThenStroke":va=2;break;case 3:case"invisible":va=3;break;case 4:case"fillAndAddForClipping":va=4;break;case 5:case"strokeAndAddPathForClipping":va=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":va=6;break;case 7:case"addToPathForClipping":va=7}var D_=om.usedRenderingMode!==void 0?om.usedRenderingMode:-1;va!==-1?Di+=va+` Tr
`:D_!==-1&&(Di+=`0 Tr
`),va!==-1&&(om.usedRenderingMode=va),vt=he.align||"left";var Zs,lh=Pe*Bc,Kv=qn.internal.pageSize.getWidth(),Yv=Kt[et];Lt=he.charSpace||Mc,Gt=he.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},he.flags);var af=[],ch=function(En){return qn.getStringUnitWidth(En,{font:Yv,charSpace:Lt,fontSize:Pe,doKerning:!1})*Pe/Do};if(Object.prototype.toString.call(C)==="[object Array]"){var ls;$e=Hv(C),vt!=="left"&&(Zs=$e.map(ch));var cs,sf=0;if(vt==="right"){W-=Zs[0],C=[],Fi=$e.length;for(var Vc=0;Vc<Fi;Vc++)Vc===0?(cs=jc(W),ls=$c(ce)):(cs=U(sf-Zs[Vc]),ls=-lh),C.push([$e[Vc],cs,ls]),sf=Zs[Vc]}else if(vt==="center"){W-=Zs[0]/2,C=[],Fi=$e.length;for(var of=0;of<Fi;of++)of===0?(cs=jc(W),ls=$c(ce)):(cs=U((sf-Zs[of])/2),ls=-lh),C.push([$e[of],cs,ls]),sf=Zs[of]}else if(vt==="left"){C=[],Fi=$e.length;for(var Zv=0;Zv<Fi;Zv++)C.push($e[Zv])}else if(vt==="justify"&&Yv.encoding==="Identity-H"){C=[],Fi=$e.length,Gt=Gt!==0?Gt:Kv;for(var lm=0,$r=0;$r<Fi;$r++)if(ls=$r===0?$c(ce):-lh,cs=$r===0?jc(W):lm,$r<Fi-1){var F_=U((Gt-Zs[$r])/($e[$r].split(" ").length-1)),Bl=$e[$r].split(" ");C.push([Bl[0]+" ",cs,ls]),lm=0;for(var Ul=1;Ul<Bl.length;Ul++){var Xv=(ch(Bl[Ul-1]+" "+Bl[Ul])-ch(Bl[Ul]))*Do+F_;Ul==Bl.length-1?C.push([Bl[Ul],Xv,0]):C.push([Bl[Ul]+" ",Xv,0]),lm-=Xv}}else C.push([$e[$r],cs,ls]);C.push(["",lm,0])}else{if(vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Fi=$e.length,Gt=Gt!==0?Gt:Kv,$r=0;$r<Fi;$r++){ls=$r===0?$c(ce):-lh,cs=$r===0?jc(W):0;var Jv=$e[$r].split(" ").length-1,Qv=Jv>0?(Gt-Zs[$r])/Jv:0;$r<Fi-1?af.push(O(U(Qv))):af.push(0),C.push([$e[$r],cs,ls])}}}(typeof he.R2L=="boolean"?he.R2L:Re)===!0&&(C=sm(C,function(En,Un,Mr){return[En.split("").reverse().join(""),Un,Mr]})),Te={text:C,x:W,y:ce,options:he,mutex:{pdfEscape:Ks,activeFontKey:et,fonts:Kt,activeFontSize:Pe}},Ut.publish("postProcessText",Te),C=Te.text,qr=Te.mutex.isHex||!1;var e0=Kt[et].encoding;e0!=="WinAnsiEncoding"&&e0!=="StandardEncoding"||(C=sm(C,function(En,Un,Mr){return[Uc(En),Un,Mr]})),$e=Hv(C),C=[];for(var lf,cf,uf,uh=Array.isArray($e[0])?1:0,ff="",fh=function(En,Un,Mr){var li="";return Mr instanceof Ot?(Mr=typeof he.angle=="number"?os(Mr,new Ot(1,0,0,1,En,Un)):os(new Ot(1,0,0,1,En,Un),Mr),_===w&&(Mr=os(new Ot(1,0,0,-1,0,0),Mr)),li=Mr.join(" ")+` Tm
`):li=O(En)+" "+O(Un)+` Td
`,li},Xs=0;Xs<$e.length;Xs++){switch(ff="",uh){case 1:uf=(qr?"<":"(")+$e[Xs][0]+(qr?">":")"),lf=parseFloat($e[Xs][1]),cf=parseFloat($e[Xs][2]);break;case 0:uf=(qr?"<":"(")+$e[Xs]+(qr?">":")"),lf=jc(W),cf=$c(ce)}af!==void 0&&af[Xs]!==void 0&&(ff=af[Xs]+` Tw
`),Xs===0?C.push(ff+fh(lf,cf,Hr)+uf):uh===0?C.push(ff+uf):uh===1&&C.push(ff+fh(lf,cf,Hr)+uf)}C=uh===0?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var zl=`BT
/`;return zl+=et+" "+Pe+` Tf
`,zl+=O(Pe*Bc)+` TL
`,zl+=th+`
`,zl+=Di,zl+=C,ee(zl+="ET"),d[et]=!0,qn};var DO=h.__private__.clip=h.clip=function(C){return ee(C==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return DO("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ee("n"),this};var Fl=h.__private__.isValidStyle=function(C){var W=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(W=!0),W};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(C){return Fl(C)&&(c=C),this};var P_=h.__private__.getStyle=h.getStyle=function(C){var W=c;switch(C){case"D":case"S":W="S";break;case"F":W="f";break;case"FD":case"DF":W="B";break;case"f":case"f*":case"B":case"B*":W=C}return W},N_=h.close=function(){return ee("h"),this};h.stroke=function(){return ee("S"),this},h.fill=function(C){return rm("f",C),this},h.fillEvenOdd=function(C){return rm("f*",C),this},h.fillStroke=function(C){return rm("B",C),this},h.fillStrokeEvenOdd=function(C){return rm("B*",C),this};var rm=function(C,W){In(W)==="object"?BO(W,C):ee(C)},Qd=function(C){C===null||_===w&&C===void 0||(C=P_(C),ee(C))};function FO(C,W,ce,he,ye){var Te=new Ag(W||this.boundingBox,ce||this.xStep,he||this.yStep,this.gState,ye||this.matrix);Te.stream=this.stream;var $e=C+"$$"+this.cloneIndex+++"$$";return Hs($e,Te),Te}var BO=function(C,W){var ce=Mn[C.key],he=St[ce];if(he instanceof Mh)ee("q"),ee(UO(W)),he.gState&&h.setGState(he.gState),ee(C.matrix.toString()+" cm"),ee("/"+ce+" sh"),ee("Q");else if(he instanceof Ag){var ye=new Ot(1,0,0,-1,0,rh());C.matrix&&(ye=ye.multiply(C.matrix||Ic),ce=FO.call(he,C.key,C.boundingBox,C.xStep,C.yStep,ye).id),ee("q"),ee("/Pattern cs"),ee("/"+ce+" scn"),he.gState&&h.setGState(he.gState),ee(W),ee("Q")}},UO=function(C){switch(C){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Lv=h.moveTo=function(C,W){return ee(O(U(C))+" "+O(B(W))+" m"),this},I_=h.lineTo=function(C,W){return ee(O(U(C))+" "+O(B(W))+" l"),this},Lo=h.curveTo=function(C,W,ce,he,ye,Te){return ee([O(U(C)),O(B(W)),O(U(ce)),O(B(he)),O(U(ye)),O(B(Te)),"c"].join(" ")),this};h.__private__.line=h.line=function(C,W,ce,he,ye){if(isNaN(C)||isNaN(W)||isNaN(ce)||isNaN(he)||!Fl(ye))throw new Error("Invalid arguments passed to jsPDF.line");return _===v?this.lines([[ce-C,he-W]],C,W,[1,1],ye||"S"):this.lines([[ce-C,he-W]],C,W,[1,1]).stroke()},h.__private__.lines=h.lines=function(C,W,ce,he,ye,Te){var $e,ft,vt,Lt,Gt,pn,yr,Hr,qn,oi,qr,Di;if(typeof C=="number"&&(Di=ce,ce=W,W=C,C=Di),he=he||[1,1],Te=Te||!1,isNaN(W)||isNaN(ce)||!Array.isArray(C)||!Array.isArray(he)||!Fl(ye)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lv(W,ce),$e=he[0],ft=he[1],Lt=C.length,oi=W,qr=ce,vt=0;vt<Lt;vt++)(Gt=C[vt]).length===2?(oi=Gt[0]*$e+oi,qr=Gt[1]*ft+qr,I_(oi,qr)):(pn=Gt[0]*$e+oi,yr=Gt[1]*ft+qr,Hr=Gt[2]*$e+oi,qn=Gt[3]*ft+qr,oi=Gt[4]*$e+oi,qr=Gt[5]*ft+qr,Lo(pn,yr,Hr,qn,oi,qr));return Te&&N_(),Qd(ye),this},h.path=function(C){for(var W=0;W<C.length;W++){var ce=C[W],he=ce.c;switch(ce.op){case"m":Lv(he[0],he[1]);break;case"l":I_(he[0],he[1]);break;case"c":Lo.apply(this,he);break;case"h":N_()}}return this},h.__private__.rect=h.rect=function(C,W,ce,he,ye){if(isNaN(C)||isNaN(W)||isNaN(ce)||isNaN(he)||!Fl(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return _===v&&(he=-he),ee([O(U(C)),O(B(W)),O(U(ce)),O(U(he)),"re"].join(" ")),Qd(ye),this},h.__private__.triangle=h.triangle=function(C,W,ce,he,ye,Te,$e){if(isNaN(C)||isNaN(W)||isNaN(ce)||isNaN(he)||isNaN(ye)||isNaN(Te)||!Fl($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ce-C,he-W],[ye-ce,Te-he],[C-ye,W-Te]],C,W,[1,1],$e,!0),this},h.__private__.roundedRect=h.roundedRect=function(C,W,ce,he,ye,Te,$e){if(isNaN(C)||isNaN(W)||isNaN(ce)||isNaN(he)||isNaN(ye)||isNaN(Te)||!Fl($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*ce),Te=Math.min(Te,.5*he),this.lines([[ce-2*ye,0],[ye*ft,0,ye,Te-Te*ft,ye,Te],[0,he-2*Te],[0,Te*ft,-ye*ft,Te,-ye,Te],[2*ye-ce,0],[-ye*ft,0,-ye,-Te*ft,-ye,-Te],[0,2*Te-he],[0,-Te*ft,ye*ft,-Te,ye,-Te]],C+ye,W,[1,1],$e,!0),this},h.__private__.ellipse=h.ellipse=function(C,W,ce,he,ye){if(isNaN(C)||isNaN(W)||isNaN(ce)||isNaN(he)||!Fl(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*ce,$e=4/3*(Math.SQRT2-1)*he;return Lv(C+ce,W),Lo(C+ce,W-$e,C+Te,W-he,C,W-he),Lo(C-Te,W-he,C-ce,W-$e,C-ce,W),Lo(C-ce,W+$e,C-Te,W+he,C,W+he),Lo(C+Te,W+he,C+ce,W+$e,C+ce,W),Qd(ye),this},h.__private__.circle=h.circle=function(C,W,ce,he){if(isNaN(C)||isNaN(W)||isNaN(ce)||!Fl(he))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,W,ce,ce,he)},h.setFont=function(C,W,ce){return ce&&(W=T(W,ce)),et=k_(C,W,{disableWarning:!1}),this};var zO=h.__private__.getFont=h.getFont=function(){return Kt[k_.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var C,W,ce={};for(C in Yt)if(Yt.hasOwnProperty(C))for(W in ce[C]=[],Yt[C])Yt[C].hasOwnProperty(W)&&ce[C].push(W);return ce},h.addFont=function(C,W,ce,he,ye){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(ce=T(ce,he)),x_.call(this,C,W,ce,ye=ye||"Identity-H")};var eh,Dv=t.lineWidth||.200025,VO=h.__private__.getLineWidth=h.getLineWidth=function(){return Dv},Ft=h.__private__.setLineWidth=h.setLineWidth=function(C){return Dv=C,ee(O(U(C))+" w"),this};h.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(C,W){if(C=C||[],W=W||0,isNaN(W)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(ce){return O(U(ce))}).join(" "),W=O(U(W)),ee("["+C+"] "+W+" d"),this};var WO=h.__private__.getLineHeight=h.getLineHeight=function(){return Pe*eh};h.__private__.getLineHeight=h.getLineHeight=function(){return Pe*eh};var HO=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(eh=C),this},qO=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return eh};HO(t.lineHeight);var jc=h.__private__.getHorizontalCoordinate=function(C){return U(C)},$c=h.__private__.getVerticalCoordinate=function(C){return _===w?C:Xe[K].mediaBox.topRightY-Xe[K].mediaBox.bottomLeftY-U(C)},GO=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(C){return O(jc(C))},KO=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(C){return O($c(C))},im=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return $l(im)},h.__private__.setStrokeColor=h.setDrawColor=function(C,W,ce,he){return im=$o({ch1:C,ch2:W,ch3:ce,ch4:he,pdfColorType:"draw",precision:2}),ee(im),this};var Fv=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return $l(Fv)},h.__private__.setFillColor=h.setFillColor=function(C,W,ce,he){return Fv=$o({ch1:C,ch2:W,ch3:ce,ch4:he,pdfColorType:"fill",precision:2}),ee(Fv),this};var th=t.textColor||"0 g",YO=h.__private__.getTextColor=h.getTextColor=function(){return $l(th)};h.__private__.setTextColor=h.setTextColor=function(C,W,ce,he){return th=$o({ch1:C,ch2:W,ch3:ce,ch4:he,pdfColorType:"text",precision:3}),this};var Mc=t.charSpace,ZO=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Mc||0)};h.__private__.setCharSpace=h.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Mc=C,this};var Bv=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(C){var W=h.CapJoinStyles[C];if(W===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bv=W,ee(W+" J"),this};var Uv=0;h.__private__.setLineJoin=h.setLineJoin=function(C){var W=h.CapJoinStyles[C];if(W===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Uv=W,ee(W+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(O(U(C))+" M"),this},h.GState=s5,h.setGState=function(C){(C=typeof C=="string"?Tt[Ge[C]]:R_(null,C)).equals(kt)||(ee("/"+C.id+" gs"),kt=C)};var R_=function(C,W){if(!C||!Ge[C]){var ce=!1;for(var he in Tt)if(Tt.hasOwnProperty(he)&&Tt[he].equals(W)){ce=!0;break}if(ce)W=Tt[he];else{var ye="GS"+(Object.keys(Tt).length+1).toString(10);Tt[ye]=W,W.id=ye}return C&&(Ge[C]=W.id),Ut.publish("addGState",W),W}};h.addGState=function(C,W){return R_(C,W),this},h.saveGraphicsState=function(){return ee("q"),Hn.push({key:et,size:Pe,color:th}),this},h.restoreGraphicsState=function(){ee("Q");var C=Hn.pop();return et=C.key,Pe=C.size,th=C.color,kt=null,this},h.setCurrentTransformationMatrix=function(C){return ee(C.toString()+" cm"),this},h.comment=function(C){return ee("#"+C),this};var Lc=function(C,W){var ce=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ce},set:function(Te){isNaN(Te)||(ce=parseFloat(Te))}});var he=W||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return he},set:function(Te){isNaN(Te)||(he=parseFloat(Te))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Te){ye=Te.toString()}}),this},zv=function(C,W,ce,he){Lc.call(this,C,W),this.type="rect";var ye=ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function($e){isNaN($e)||(ye=parseFloat($e))}});var Te=he||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function($e){isNaN($e)||(Te=parseFloat($e))}}),this},am=function(){this.page=ze,this.currentPage=K,this.pages=me.slice(0),this.pagesContext=Xe.slice(0),this.x=dt,this.y=gr,this.matrix=ln,this.width=Wv(K),this.height=$_(K),this.outputDestination=_e,this.id="",this.objectNumber=-1};am.prototype.restore=function(){ze=this.page,K=this.currentPage,Xe=this.pagesContext,me=this.pages,dt=this.x,gr=this.y,ln=this.matrix,j_(K,this.width),Dc(K,this.height),_e=this.outputDestination};var Vv=function(C,W,ce,he,ye){Ws.push(new am),ze=K=0,me=[],dt=C,gr=W,ln=ye,$v([ce,he])};for(var nh in h.beginFormObject=function(C,W,ce,he,ye){return Vv(C,W,ce,he,ye),this},h.endFormObject=function(C){return function(W){if(Ro[W])Ws.pop().restore();else{var ce=new am,he="Xo"+(Object.keys(ki).length+1).toString(10);ce.id=he,Ro[W]=he,ki[he]=ce,Ut.publish("addFormObject",ce),Ws.pop().restore()}}(C),this},h.doFormObject=function(C,W){var ce=ki[Ro[C]];return ee("q"),ee(W.toString()+" cm"),ee("/"+ce.id+" Do"),ee("Q"),this},h.getFormObject=function(C){var W=ki[Ro[C]];return{x:W.x,y:W.y,width:W.width,height:W.height,matrix:W.matrix}},h.save=function(C,W){return C=C||"generated.pdf",(W=W||{}).returnPromise=W.returnPromise||!1,W.returnPromise===!1?(Nh(nm(Dl()),C),typeof Nh.unload=="function"&&Mt.setTimeout&&setTimeout(Nh.unload,911),this):new Promise(function(ce,he){try{var ye=Nh(nm(Dl()),C);typeof Nh.unload=="function"&&Mt.setTimeout&&setTimeout(Nh.unload,911),ce(ye)}catch(Te){he(Te.message)}})},_t.API)_t.API.hasOwnProperty(nh)&&(nh==="events"&&_t.API.events.length?function(C,W){var ce,he,ye;for(ye=W.length-1;ye!==-1;ye--)ce=W[ye][0],he=W[ye][1],C.subscribe.apply(C,[ce].concat(typeof he=="function"?[he]:he))}(Ut,_t.API.events):h[nh]=_t.API[nh]);function Wv(C){return Xe[C].mediaBox.topRightX-Xe[C].mediaBox.bottomLeftX}function j_(C,W){Xe[C].mediaBox.topRightX=W+Xe[C].mediaBox.bottomLeftX}function $_(C){return Xe[C].mediaBox.topRightY-Xe[C].mediaBox.bottomLeftY}function Dc(C,W){Xe[C].mediaBox.topRightY=W+Xe[C].mediaBox.bottomLeftY}var Fc=h.getPageWidth=function(C){return Wv(C=C||K)/$t},M_=h.setPageWidth=function(C,W){j_(C,W*$t)},rh=h.getPageHeight=function(C){return $_(C=C||K)/$t},L_=h.setPageHeight=function(C,W){Dc(C,W*$t)};return h.internal={pdfEscape:Ks,getStyle:P_,getFont:zO,getFontSize:Ze,getCharSpace:ZO,getTextColor:YO,getLineHeight:WO,getLineHeightFactor:qO,getLineWidth:VO,write:Ee,getHorizontalCoordinate:jc,getVerticalCoordinate:$c,getCoordinateString:GO,getVerticalCoordinateString:KO,collections:{},newObject:Ar,newAdditionalObject:Zd,newObjectDeferred:Oi,newObjectDeferredBegin:Li,getFilters:Mo,putStream:Gs,events:Ut,scaleFactor:$t,pageSize:{getWidth:function(){return Fc(K)},setWidth:function(C){M_(K,C)},getHeight:function(){return rh(K)},setHeight:function(C){L_(K,C)}},encryptionOptions:u,encryption:si,getEncryptor:function(C){return u!==null?si.encryptor(C,0):function(W){return W}},output:T_,getNumberOfPages:A_,get pages(){return me},out:ee,f2:N,f3:j,getPageInfo:Rc,getPageInfoByObjId:C_,getCurrentPageInfo:LO,getPDFVersion:m,Point:Lc,Rectangle:zv,Matrix:Ot,hasHotfix:Ys},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Fc(K)},set:function(C){M_(K,C)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return rh(K)},set:function(C){L_(K,C)},enumerable:!0,configurable:!0}),(function(C){for(var W=0,ce=tt.length;W<ce;W++){var he=x_.call(this,C[W][0],C[W][1],C[W][2],tt[W][3],!0);f===!1&&(d[he]=!0);var ye=C[W][0].split("-");__({id:he,fontName:ye[0],fontStyle:ye[1]||""})}Ut.publish("addFonts",{fonts:Kt,dictionary:Yt})}).call(h,tt),et="F1",S_(i,n),Ut.publish("initialized"),h}Hm.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Hm.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hm.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Hm.prototype.processOwnerPassword=function(t,e){return r3(n3(e).substr(0,5),t)},Hm.prototype.encryptor=function(t,e){var n=n3(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return r3(n,r)}},s5.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||In(t)!==In(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},_t.API={events:[]},_t.version="4.1.0";var Tr=_t.API,S6=1,Xp=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jm=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},o5=function(t){return t.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var n=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(n.length===1?"0"+n:n)})},Vt=function(t){return t.toFixed(2)},kf=function(t){return t.toFixed(5)};Tr.__acroform__={};var ss=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},NG=function(t){return t*S6},Kl=function(t){var e=new Wde,n=ct.internal.getHeight(t)||0,r=ct.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Vt(r)),Number(Vt(n))],e},Zvt=Tr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Xvt=Tr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Jvt=Tr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ur=Tr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Jvt(t,e-1)},zr=Tr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Zvt(t,e-1)},Vr=Tr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Xvt(t,e-1)},Qvt=Tr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],s=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(a)||0,[Number(Vt(l.lowerLeft_X)),Number(Vt(l.lowerLeft_Y)),Number(Vt(l.upperRight_X)),Number(Vt(l.upperRight_Y))]},e0t=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=i3(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Vt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Kl(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},i3=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var a=n,s=ct.internal.getHeight(t)||0;s=s<0?-s:s;var o=ct.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(N,j,U){if(N+1<i.length){var B=j+" "+i[N+1][0];return C2(B,t,U).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var c,u,f=C2("3",t,a).height,d=t.multiline?s-a:(s-f)/2,h=d+=2,p=0,m=0,y=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+C2(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var g="",v=0,w=0;w<i.length;w++)if(i.hasOwnProperty(w)){var _=!1;if(i[w].length!==1&&y!==i[w].length-1){if((f+2)*(v+2)+2>s)continue e;g+=i[w][y],_=!0,m=w,w--}else{g=(g+=i[w][y]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var x=parseInt(w),E=l(x,g,a),T=w>=i.length-1;if(E&&!T){g+=" ",y=0;continue}if(E||T){if(T)m=x;else if(t.multiline&&(f+2)*(v+2)+2>s)continue e}else{if(!t.multiline||(f+2)*(v+2)+2>s)continue e;m=x}}for(var O="",R=p;R<=m;R++){var M=i[R];if(t.multiline){if(R===m){O+=M[y]+" ",y=(y+1)%M.length;continue}if(R===p){O+=M[M.length-1]+" ";continue}}O+=M[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,u=C2(O,t,a).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}e+=Vt(c)+" "+Vt(h)+` Td
`,e+="("+Xp(O)+`) Tj
`,e+=-Vt(c)+` 0 Td
`,h=-(a+2),u=0,p=_?m:m+1,v++,g=""}break}return r.text=e,r.fontSize=a,r},C2=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},t0t={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},n0t=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},r0t=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Rl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(t0t)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");S6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Hde,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&n0t(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var o=r[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Qvt(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ct.createDefaultAppearanceStream(o),In(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=e0t(o);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var d in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(d)){var h=o.appearanceStreamContent[d];if(f+="/"+d+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var p=h[s];typeof p=="function"&&(p=p.call(i,o)),f+="/"+s+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=h)=="function"&&(p=p.call(i,o)),f+="/"+s+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(m,y){for(var g in m)if(m.hasOwnProperty(g)){var v=g,w=m[g];y.internal.newObjectDeferredBegin(w.objId,!0),In(w)==="object"&&typeof w.putStream=="function"&&w.putStream(),delete m[v]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Vde=Tr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),In(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)==="/"?i+="/"+o5(t[a].substr(1)):(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Xp(r(t[a].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bN=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Xp(r(t))+")"},cc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};cc.prototype.toString=function(){return this.objId+" 0 R"},cc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},cc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:Vde(i,this.objId,this.scope)}):i instanceof cc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var Wde=function(){cc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ss(Wde,cc);var Hde=function(){cc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Xp(n(t))+")"}},set:function(n){t=n}})};ss(Hde,cc);var Rl=function t(){cc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ur(e,3)},set:function(g){g?this.F=zr(e,3):this.F=Vr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');n=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof l5)return;a="FieldObject"+t.FieldNum++}var g=function(v){return v};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+Xp(g(a))+")"},set:function(g){a=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(g){a=g}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/S6:c},set:function(g){c=g}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(g){u=g}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof l5||this instanceof up))return bN(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=g}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Ni==0?bN(d,this.objId,this.scope):d},set:function(g){g=g.toString(),d=this instanceof Ni==0?g.substr(0,1)==="("?jm(g.substr(1,g.length-2)):jm(g):g}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ni==1?jm(d.substr(1,d.length-1)):d},set:function(g){g=g.toString(),d=this instanceof Ni==1?"/"+o5(g):g}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ni==0?bN(h,this.objId,this.scope):h},set:function(g){g=g.toString(),h=this instanceof Ni==0?g.substr(0,1)==="("?jm(g.substr(1,g.length-2)):jm(g):g}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ni==1?jm(h.substr(1,h.length-1)):h},set:function(g){g=g.toString(),h=this instanceof Ni==1?"/"+o5(g):g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(g){g=!!g,m=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(g){p=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,1)},set:function(g){g?this.Ff=zr(this.Ff,1):this.Ff=Vr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,2)},set:function(g){g?this.Ff=zr(this.Ff,2):this.Ff=Vr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,3)},set:function(g){g?this.Ff=zr(this.Ff,3):this.Ff=Vr(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');y=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(y){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};ss(Rl,cc);var qg=function(){Rl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vde(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,c=[];l=s.exec(a);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,18)},set:function(n){n?this.Ff=zr(this.Ff,18):this.Ff=Vr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=zr(this.Ff,19):this.Ff=Vr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,20)},set:function(n){n?(this.Ff=zr(this.Ff,20),e.sort()):this.Ff=Vr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,22)},set:function(n){n?this.Ff=zr(this.Ff,22):this.Ff=Vr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,23)},set:function(n){n?this.Ff=zr(this.Ff,23):this.Ff=Vr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,27)},set:function(n){n?this.Ff=zr(this.Ff,27):this.Ff=Vr(this.Ff,27)}}),this.hasAppearanceStream=!1};ss(qg,Rl);var Gg=function(){qg.call(this),this.fontName="helvetica",this.combo=!1};ss(Gg,qg);var Kg=function(){Gg.call(this),this.combo=!0};ss(Kg,Gg);var kS=function(){Kg.call(this),this.edit=!0};ss(kS,Kg);var Ni=function(){Rl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,15)},set:function(n){n?this.Ff=zr(this.Ff,15):this.Ff=Vr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,16)},set:function(n){n?this.Ff=zr(this.Ff,16):this.Ff=Vr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,17)},set:function(n){n?this.Ff=zr(this.Ff,17):this.Ff=Vr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,26)},set:function(n){n?this.Ff=zr(this.Ff,26):this.Ff=Vr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Xp(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){In(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+o5(n)}})};ss(Ni,Rl);var OS=function(){Ni.call(this),this.pushButton=!0};ss(OS,Ni);var Yg=function(){Ni.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ss(Yg,Ni);var l5=function(){var t,e;Rl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),r)s.push("/"+a+" ("+Xp(i(r[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){In(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ss(l5,Rl),Yg.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Yg.prototype.createOption=function(t){var e=new l5;return e.Parent=this,e.optionName=t,this.Kids.push(e),i0t.call(this.scope,e),e};var TS=function(){Ni.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ct.CheckBox.createAppearanceStream()};ss(TS,Ni);var up=function(){Rl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,13)},set:function(e){e?this.Ff=zr(this.Ff,13):this.Ff=Vr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,21)},set:function(e){e?this.Ff=zr(this.Ff,21):this.Ff=Vr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,23)},set:function(e){e?this.Ff=zr(this.Ff,23):this.Ff=Vr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,24)},set:function(e){e?this.Ff=zr(this.Ff,24):this.Ff=Vr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,25)},set:function(e){e?this.Ff=zr(this.Ff,25):this.Ff=Vr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,26)},set:function(e){e?this.Ff=zr(this.Ff,26):this.Ff=Vr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ss(up,Rl);var CS=function(){up.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ur(this.Ff,14)},set:function(t){t?this.Ff=zr(this.Ff,14):this.Ff=Vr(this.Ff,14)}}),this.password=!0};ss(CS,up);var ct={CheckBox:{createAppearanceStream:function(){return{N:{On:ct.CheckBox.YesNormal},D:{On:ct.CheckBox.YesPushDown,Off:ct.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Kl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=i3(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Vt(ct.internal.getWidth(t))+" "+Vt(ct.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Vt(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Kl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=ct.internal.getHeight(t),s=ct.internal.getWidth(t),o=i3(t,t.caption);return i.push("1 g"),i.push("0 0 "+Vt(s)+" "+Vt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Vt(s-1)+" "+Vt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Vt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Kl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(ct.internal.getWidth(t))+" "+Vt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Circle.YesNormal,e.D[t]=ct.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Kl(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ct.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+kf(ct.internal.getWidth(t)/2)+" "+kf(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Kl(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*ct.internal.Bezier_C).toFixed(5)),s=Number((r*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+kf(ct.internal.getWidth(t)/2)+" "+kf(ct.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+kf(ct.internal.getWidth(t)/2)+" "+kf(ct.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Kl(t);e.scope=t.scope;var n=[],r=ct.internal.getWidth(t)<=ct.internal.getHeight(t)?ct.internal.getWidth(t)/4:ct.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*ct.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+kf(ct.internal.getWidth(t)/2)+" "+kf(ct.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ct.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ct.RadioButton.Cross.YesNormal,e.D[t]=ct.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Kl(t);e.scope=t.scope;var n=[],r=ct.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Vt(ct.internal.getWidth(t)-2)+" "+Vt(ct.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Vt(r.x1.x)+" "+Vt(r.x1.y)+" m"),n.push(Vt(r.x2.x)+" "+Vt(r.x2.y)+" l"),n.push(Vt(r.x4.x)+" "+Vt(r.x4.y)+" m"),n.push(Vt(r.x3.x)+" "+Vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Kl(t);e.scope=t.scope;var n=ct.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Vt(ct.internal.getWidth(t))+" "+Vt(ct.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Vt(ct.internal.getWidth(t)-2)+" "+Vt(ct.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Vt(n.x1.x)+" "+Vt(n.x1.y)+" m"),r.push(Vt(n.x2.x)+" "+Vt(n.x2.y)+" l"),r.push(Vt(n.x4.x)+" "+Vt(n.x4.y)+" m"),r.push(Vt(n.x3.x)+" "+Vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Kl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Vt(ct.internal.getWidth(t))+" "+Vt(ct.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ct.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ct.internal.getWidth(t),n=ct.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ct.internal.getWidth=function(t){var e=0;return In(t)==="object"&&(e=NG(t.Rect[2])),e},ct.internal.getHeight=function(t){var e=0;return In(t)==="object"&&(e=NG(t.Rect[3])),e};var i0t=Tr.addField=function(t){if(r0t(this,t),!(t instanceof Rl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Tr.AcroFormChoiceField=qg,Tr.AcroFormListBox=Gg,Tr.AcroFormComboBox=Kg,Tr.AcroFormEditBox=kS,Tr.AcroFormButton=Ni,Tr.AcroFormPushButton=OS,Tr.AcroFormRadioButton=Yg,Tr.AcroFormCheckBox=TS,Tr.AcroFormTextField=up,Tr.AcroFormPasswordField=CS,Tr.AcroFormAppearance=ct,Tr.AcroForm={ChoiceField:qg,ListBox:Gg,ComboBox:Kg,EditBox:kS,Button:Ni,PushButton:OS,RadioButton:Yg,CheckBox:TS,TextField:up,PasswordField:CS,Appearance:ct},_t.AcroForm={ChoiceField:qg,ListBox:Gg,ComboBox:Kg,EditBox:kS,Button:Ni,PushButton:OS,RadioButton:Yg,CheckBox:TS,TextField:up,PasswordField:CS,Appearance:ct};_t.AcroForm;function qde(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(N,j){var U,B,V,Y,X,z=n;if((j=j||n)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(E(N))for(X in r)for(V=r[X],U=0;U<V.length;U+=1){for(Y=!0,B=0;B<V[U].length;B+=1)if(V[U][B]!==void 0&&V[U][B]!==N[B]){Y=!1;break}if(Y===!0){z=X;break}}else for(X in r)for(V=r[X],U=0;U<V.length;U+=1){for(Y=!0,B=0;B<V[U].length;B+=1)if(V[U][B]!==void 0&&V[U][B]!==N.charCodeAt(B)){Y=!1;break}if(Y===!0){z=X;break}}return z===n&&j!==n&&(z=j),z},a=function N(j){for(var U=this.internal.write,B=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:j.width}),Y.push({key:"Height",value:j.height}),j.colorSpace===g.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===g.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)&&j.transparency.length>0){for(var X="",z=0,G=j.transparency.length;z<G;z++)X+=j.transparency[z]+" "+j.transparency[z]+" ";Y.push({key:"Mask",value:"["+X+"]"})}j.sMask!==void 0&&Y.push({key:"SMask",value:j.objectId+1+" 0 R"});var ae=j.filter!==void 0?["/"+j.filter]:void 0;if(B({data:j.data,additionalKeyValues:Y,alreadyAppliedFilters:ae,objectId:j.objectId}),U("endobj"),"sMask"in j&&j.sMask!==void 0){var ue,L=(ue=j.sMaskBitsPerComponent)!==null&&ue!==void 0?ue:j.bitsPerComponent,K={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:j.sMask};"filter"in j&&(K.decodeParameters="/Predictor ".concat(j.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(j.width),K.filter=j.filter),N.call(this,K)}if(j.colorSpace===g.INDEXED){var Q=this.internal.newObject();B({data:O(new Uint8Array(j.palette)),objectId:Q}),U("endobj")}},s=function(){var N=this.internal.collections[e+"images"];for(var j in N)a.call(this,N[j])},o=function(){var N,j=this.internal.collections[e+"images"],U=this.internal.write;for(var B in j)U("/I"+(N=j[B]).index,N.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var N=this.internal.collections[e+"images"];return l.call(this),N},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(N){return typeof t["process"+N.toUpperCase()]=="function"},d=function(N){return In(N)==="object"&&N.nodeType===1},h=function(N,j){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var U=""+N.getAttribute("src");if(U.indexOf("data:image/")===0)return AS(unescape(U).split("base64,").pop());var B=t.loadFile(U,!0);if(B!==void 0)return B}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var V;switch(j){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;default:V="image/jpeg"}return AS(N.toDataURL(V,1).split("base64,").pop())}},p=function(N){var j=this.internal.collections[e+"images"];if(j){for(var U in j)if(N===j[U].alias)return j[U]}},m=function(N,j,U){return N||j||(N=-96,j=-96),N<0&&(N=-1*U.width*72/N/this.internal.scaleFactor),j<0&&(j=-1*U.height*72/j/this.internal.scaleFactor),N===0&&(N=j*U.width/U.height),j===0&&(j=N*U.height/U.width),[N,j]},y=function(N,j,U,B,V,Y){var X=m.call(this,U,B,V),z=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,ae=c.call(this);if(U=X[0],B=X[1],ae[V.index]=V,Y){Y*=Math.PI/180;var ue=Math.cos(Y),L=Math.sin(Y),K=function(re){return re.toFixed(4)},Q=[K(ue),K(L),K(-1*L),K(ue),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,z(N),G(j+B),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([z(U),"0","0",z(B),"0","0","cm"].join(" "))):this.internal.write([z(U),"0","0",z(B),z(N),G(j+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=t.__addimage__.sHashCode=function(N){var j,U,B=0;if(typeof N=="string")for(U=N.length,j=0;j<U;j++)B=(B<<5)-B+N.charCodeAt(j),B|=0;else if(E(N))for(U=N.byteLength/2,j=0;j<U;j++)B=(B<<5)-B+N[j],B|=0;return B},_=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var j=!0;return N.length===0&&(j=!1),N.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(j=!1),j},x=t.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var j=N.indexOf(",");return j<0?null:N.substring(0,j).trim().endsWith("base64")?N.substring(j+1):null};t.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},T=t.__addimage__.binaryStringToUint8Array=function(N){for(var j=N.length,U=new Uint8Array(j),B=0;B<j;B++)U[B]=N.charCodeAt(B);return U},O=t.__addimage__.arrayBufferToBinaryString=function(N){for(var j="",U=E(N)?N:new Uint8Array(N),B=0;B<U.length;B+=8192)j+=String.fromCharCode.apply(null,U.subarray(B,B+8192));return j};t.addImage=function(){var N,j,U,B,V,Y,X,z,G;if(typeof arguments[1]=="number"?(j=n,U=arguments[1],B=arguments[2],V=arguments[3],Y=arguments[4],X=arguments[5],z=arguments[6],G=arguments[7]):(j=arguments[1],U=arguments[2],B=arguments[3],V=arguments[4],Y=arguments[5],X=arguments[6],z=arguments[7],G=arguments[8]),In(N=arguments[0])==="object"&&!d(N)&&"imageData"in N){var ae=N;N=ae.imageData,j=ae.format||j||n,U=ae.x||U||0,B=ae.y||B||0,V=ae.w||ae.width||V,Y=ae.h||ae.height||Y,X=ae.alias||X,z=ae.compression||z,G=ae.rotation||ae.angle||G}var ue=this.internal.getFilters();if(z===void 0&&ue.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(U)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=R.call(this,N,j,X,z);return y.call(this,U,B,V,Y,L,G),this};var R=function(N,j,U,B){var V,Y,X;if(typeof N=="string"&&i(N)===n){N=unescape(N);var z=M(N,!1);(z!==""||(z=t.loadFile(N,!0))!==void 0)&&(N=z)}if(d(N)&&(N=h(N,j)),j=i(N,j),!f(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((X=U)==null||X.length===0)&&(U=function(G){return typeof G=="string"||E(G)?w(G):E(G.data)?w(G.data):null}(N)),(V=p.call(this,U))||(N instanceof Uint8Array||j==="RGBA"||(Y=N,N=T(N)),V=this["process"+j.toUpperCase()](N,u.call(this),U,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in t.image_compression?G:v.NONE}(B),Y)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},M=t.__addimage__.convertBase64ToBinaryString=function(N,j){j=typeof j!="boolean"||j;var U,B="";if(typeof N=="string"){var V;U=(V=x(N))!==null&&V!==void 0?V:N;try{B=AS(U)}catch(Y){if(j)throw _(U)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};t.getImageProperties=function(N){var j,U,B="";if(d(N)&&(N=h(N)),typeof N=="string"&&i(N)===n&&((B=M(N,!1))===""&&(B=t.loadFile(N)||""),N=B),U=i(N),!f(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(N instanceof Uint8Array||(N=T(N)),!(j=this["process"+U.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=U,j}})(_t.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};_t.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,f=0;f<c.length&&!u;f++)switch((r=c[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var d=0;d<c.length;d++){r=c[d];var h=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(m.objId),v=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+h(g(r.contents))+")",a+=" /Popup "+y.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(g(v))+") >>",m.content=a;var w=m.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+w,r.open&&(a+=" /Open true"),a+=" >>",y.content=a,this.internal.write(m.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var _=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(p(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var x=this.annotations._nameMap[r.options.name];r.options.pageNumber=x.page,r.options.top=x.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(p(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var E=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+a)},options:s,type:"link"})},t.textWithLink=function(n,r,i,a){var s,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var u=this.splitTextToSize(n,o).length;s=Math.ceil(c*u)}else o=l,s=c;return this.text(n,r,i,a),i+=.2*c,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,i-c,o,s,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(_t.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},o=t.__arabicParser__.isArabicEndLetter=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(m){return s(m)&&i.indexOf(m.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(m){return s(m)&&a(m)&&e[m.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(m){var y=0,g=n,v="",w=0;for(y=0;y<m.length;y+=1)g[m.charCodeAt(y)]!==void 0?(w++,typeof(g=g[m.charCodeAt(y)])=="number"&&(v+=String.fromCharCode(g),g=n,w=0),y===m.length-1&&(g=n,v+=m.charAt(y-(w-1)),y-=w-1,w=0)):(g=n,v+=m.charAt(y-w),y-=w,w=0);return v};t.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&r[m.charCodeAt(0)]!==void 0};var d=t.__arabicParser__.getCorrectForm=function(m,y,g){return s(m)?a(m)===!1?-1:!c(m)||!s(y)&&!s(g)||!s(g)&&o(y)||o(m)&&!s(y)||o(m)&&l(y)||o(m)&&o(y)?0:u(m)&&s(y)&&!o(y)&&s(g)&&c(g)?3:o(m)||!s(g)?1:2:-1},h=function(m){var y=0,g=0,v=0,w="",_="",x="",E=(m=m||"").split("\\s+"),T=[];for(y=0;y<E.length;y+=1){for(T.push(""),g=0;g<E[y].length;g+=1)w=E[y][g],_=E[y][g-1],x=E[y][g+1],s(w)?(v=d(w,_,x),T[y]+=v!==-1?String.fromCharCode(e[w.charCodeAt(0)][v]):w):T[y]+=w;T[y]=f(T[y])}return T.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var m,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(y)){var v=0;for(g=[],v=0;v<y.length;v+=1)Array.isArray(y[v])?g.push([h(y[v][0]),y[v][1],y[v][2]]):g.push([h(y[v])]);m=g}else m=h(y);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};t.events.push(["preProcessText",p])}(_t.API),_t.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(_t.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(m){p=m}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),d=c.scaleFactor||this.internal.scaleFactor,h=0,p=0,m=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=c.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(w,_){return w.concat(y.splitTextToSize(_,g))},[])):l=Array.isArray(l)?l:[l];for(var v=0;v<l.length;v++)h<(m=this.getStringUnitWidth(l[v],{font:f})*u)&&(h=m);return h!==0&&(p=l.length),{w:h/=d,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/d,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,h&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,f,d){if(r.call(this),!u)throw new Error("No data for PDF table.");var h,p,m,y,g=[],v=[],w=[],_={},x={},E=[],T=[],O=(d=d||{}).autoSize||!1,R=d.printHeaders!==!1,M=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,N=d.margins||Object.assign({width:this.getPageWidth()},e),j=typeof d.padding=="number"?d.padding:3,U=d.headerBackgroundColor||"#c8c8c8",B=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=B,this.setFontSize(M),f==null)v=g=Object.keys(u[0]),w=g.map(function(){return"left"});else if(Array.isArray(f)&&In(f[0])==="object")for(g=f.map(function(ae){return ae.name}),v=f.map(function(ae){return ae.prompt||ae.name||""}),w=f.map(function(ae){return ae.align||"left"}),h=0;h<f.length;h+=1)x[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(v=g=f,w=g.map(function(){return"left"}));if(O||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<g.length;h+=1){for(_[y=g[h]]=u.map(function(ae){return ae[y]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(v[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=_[y],this.setFont(void 0,"normal"),m=0;m<p.length;m+=1)E.push(this.getTextDimensions(p[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);x[y]=Math.max.apply(null,E)+j+j,E=[]}if(R){var V={};for(h=0;h<g.length;h+=1)V[g[h]]={},V[g[h]].text=v[h],V[g[h]].align=w[h];var Y=o.call(this,V,x);T=g.map(function(ae){return new a(l,c,x[ae],Y,V[ae].text,void 0,V[ae].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var X=f.reduce(function(ae,ue){return ae[ue.name]=ue.align,ae},{});for(h=0;h<u.length;h+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:h,data:u[h]},this);var z=o.call(this,u[h],x);for(m=0;m<g.length;m+=1){var G=u[h][g[m]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:h,col:m,data:G},this),s.call(this,new a(l,c,x[g[m]],z,G,h+2,X[g[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(h){var p=l[h];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/d+u+u},this).reduce(function(h,p){return Math.max(h,p)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,d.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(p)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),n=!1}}(_t.API);var Gde={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Kde=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],a3=qde(Kde),Yde=[100,200,300,400,500,600,700,800,900],a0t=qde(Yde);function _N(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return Gde[a=a||"normal"]?a:"normal"}(t.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof a3[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function IG(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var s0t={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},RG={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jG(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $G(t){return t.trimLeft()}function o0t(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function l0t(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var $m,P2,MG,LG,DG,xN=["times"];function FG(t,e,n,r,i){var a=4,s=UG;switch(i){case _t.API.image_compression.FAST:a=1,s=BG;break;case _t.API.image_compression.MEDIUM:a=6,s=zG;break;case _t.API.image_compression.SLOW:a=9,s=VG}t=function(l,c,u,f){for(var d,h=l.length/c,p=new Uint8Array(l.length+h),m=[c0t,BG,UG,zG,VG],y=0;y<h;y+=1){var g=y*c,v=l.subarray(g,g+c);if(f)p.set(f(v,u,d),g+y);else{for(var w=m.length,_=[],x=0;x<w;x+=1)_[x]=m[x](v,u,d);var E=f0t(_.concat());p.set(_[E],g+y)}d=v}return p}(t,e,Math.ceil(n*r/8),s);var o=J4(t,{level:a});return _t.API.__addimage__.arrayBufferToBinaryString(o)}function c0t(t){var e=Array.apply([],t);return e.unshift(0),e}function BG(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=t[i-e]||0;r[i+1]=t[i]-a+256&255}return r}function UG(t,e,n){var r=t.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var s=n&&n[a]||0;i[a+1]=t[a]-s+256&255}return i}function zG(t,e,n){var r=t.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var s=t[a-e]||0,o=n&&n[a]||0;i[a+1]=t[a]+256-(s+o>>>1)&255}return i}function VG(t,e,n){var r=t.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var s=u0t(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);i[a+1]=t[a]-s+256&255}return i}function u0t(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),a=Math.abs(t+e-n-n);return r<=i&&r<=a?t:i<=a?e:n}function f0t(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function SN(t,e,n){var r=e*n,i=Math.floor(r/8),a=16-(r-8*i+n),s=(1<<n)-1;return Zde(t,i)>>a&s}function WG(t,e,n,r){var i=n*r,a=Math.floor(i/8),s=16-(i-8*a+r),o=(1<<r)-1,l=(e&o)<<s;(function(c,u,f){if(u+1<c.byteLength)c.setUint16(u,f,!1);else{var d=f>>8&255;c.setUint8(u,d)}})(t,a,Zde(t,a)&~(o<<s)&65535|l)}function Zde(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function d0t(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var c=!0,u=[],f=0,d=null,h=0,p=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=t[e++];f=t[e++]|t[e++]<<8,d=t[e++],1&m||(d=null),h=m>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,_=t[e++],x=_>>6&1,E=1<<1+(7&_),T=o,O=l,R=!1;_>>7&&(R=!0,T=e,O=E,e+=3*E);var M=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}u.push({x:y,y:g,width:v,height:w,has_local_palette:R,palette_offset:T,palette_size:O,data_offset:M,data_length:e-M,transparent_index:d,interlaced:!!x,delay:f,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(j){if(j<0||j>=u.length)throw new Error("Frame index out of range.");return u[j]},this.decodeAndBlitFrameBGRA=function(j,U){var B=this.frameInfo(j),V=B.width*B.height,Y=new Uint8Array(V);HG(t,B.data_offset,Y,V);var X=B.palette_offset,z=B.transparent_index;z===null&&(z=256);var G=B.width,ae=n-G,ue=G,L=4*(B.y*n+B.x),K=4*((B.y+B.height)*n+B.x),Q=L,re=4*ae;B.interlaced===!0&&(re+=4*n*7);for(var F=8,$=0,ie=Y.length;$<ie;++$){var q=Y[$];if(ue===0&&(ue=G,(Q+=re)>=K&&(re=4*ae+4*n*(F-1),Q=L+(G+ae)*(F<<1),F>>=1)),q===z)Q+=4;else{var fe=t[X+3*q],me=t[X+3*q+1],de=t[X+3*q+2];U[Q++]=de,U[Q++]=me,U[Q++]=fe,U[Q++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(j,U){var B=this.frameInfo(j),V=B.width*B.height,Y=new Uint8Array(V);HG(t,B.data_offset,Y,V);var X=B.palette_offset,z=B.transparent_index;z===null&&(z=256);var G=B.width,ae=n-G,ue=G,L=4*(B.y*n+B.x),K=4*((B.y+B.height)*n+B.x),Q=L,re=4*ae;B.interlaced===!0&&(re+=4*n*7);for(var F=8,$=0,ie=Y.length;$<ie;++$){var q=Y[$];if(ue===0&&(ue=G,(Q+=re)>=K&&(re=4*ae+4*n*(F-1),Q=L+(G+ae)*(F<<1),F>>=1)),q===z)Q+=4;else{var fe=t[X+3*q],me=t[X+3*q+1],de=t[X+3*q+2];U[Q++]=fe,U[Q++]=me,U[Q++]=de,U[Q++]=255}--ue}}}function HG(t,e,n,r){for(var i=t[e++],a=1<<i,s=a+1,o=s+1,l=i+1,c=(1<<l)-1,u=0,f=0,d=0,h=t[e++],p=new Int32Array(4096),m=null;;){for(;u<16&&h!==0;)f|=t[e++]<<u,u+=8,h===1?h=t[e++]:--h;if(u<l)break;var y=f&c;if(f>>=l,u-=l,y!==a){if(y===s)break;for(var g=y<o?y:m,v=0,w=g;w>a;)w=p[w]>>8,++v;var _=w;if(d+v+(g!==y?1:0)>r)return void Vn.log("Warning, gif stream longer than expected.");n[d++]=_;var x=d+=v;for(g!==y&&(n[d++]=_),w=g;v--;)w=p[w],n[--x]=255&w,w>>=8;m!==null&&o<4096&&(p[o++]=m<<8|_,o>=c+1&&l<12&&(++l,c=c<<1|1)),m=y}else o=s+1,c=(1<<(l=i+1))-1,m=null}return d!==r&&Vn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function EN(t){var e,n,r,i,a,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(65535),d=new Array(65535),h=new Array(64),p=new Array(64),m=[],y=0,g=7,v=new Array(64),w=new Array(64),_=new Array(64),x=new Array(256),E=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(L,K){for(var Q=0,re=0,F=new Array,$=1;$<=16;$++){for(var ie=1;ie<=L[$];ie++)F[K[re]]=[],F[K[re]][0]=Q,F[K[re]][1]=$,re++,Q++;Q*=2}return F}function X(L){for(var K=L[0],Q=L[1]-1;Q>=0;)K&1<<Q&&(y|=1<<g),Q--,--g<0&&(y==255?(z(255),z(0)):z(y),g=7,y=0)}function z(L){m.push(L)}function G(L){z(L>>8&255),z(255&L)}function ae(L,K,Q,re,F){for(var $,ie=F[0],q=F[240],fe=function(Pe,xe){var Ze,Re,Ie,Ye,je,Ne,Ke,He,et,$t,dt=0;for(et=0;et<8;++et){Ze=Pe[dt],Re=Pe[dt+1],Ie=Pe[dt+2],Ye=Pe[dt+3],je=Pe[dt+4],Ne=Pe[dt+5],Ke=Pe[dt+6];var gr=Ze+(He=Pe[dt+7]),ln=Ze-He,Kt=Re+Ke,Yt=Re-Ke,Hn=Ie+Ne,St=Ie-Ne,Mn=Ye+je,Tt=Ye-je,Ge=gr+Mn,kt=gr-Mn,ze=Kt+Hn,Xe=Kt-Hn;Pe[dt]=Ge+ze,Pe[dt+4]=Ge-ze;var Ut=.707106781*(Xe+kt);Pe[dt+2]=kt+Ut,Pe[dt+6]=kt-Ut;var qt=.382683433*((Ge=Tt+St)-(Xe=Yt+ln)),ki=.5411961*Ge+qt,Ro=1.306562965*Xe+qt,Ws=.707106781*(ze=St+Yt),Ot=ln+Ws,os=ln-Ws;Pe[dt+5]=os+ki,Pe[dt+3]=os-ki,Pe[dt+1]=Ot+Ro,Pe[dt+7]=Ot-Ro,dt+=8}for(dt=0,et=0;et<8;++et){Ze=Pe[dt],Re=Pe[dt+8],Ie=Pe[dt+16],Ye=Pe[dt+24],je=Pe[dt+32],Ne=Pe[dt+40],Ke=Pe[dt+48];var Ic=Ze+(He=Pe[dt+56]),Hs=Ze-He,qs=Re+Ke,Ar=Re-Ke,Oi=Ie+Ne,Li=Ie-Ne,Zd=Ye+je,tf=Ye-je,jo=Ic+Zd,$l=Ic-Zd,$o=qs+Oi,Mo=qs-Oi;Pe[dt]=jo+$o,Pe[dt+32]=jo-$o;var Gs=.707106781*(Mo+$l);Pe[dt+16]=$l+Gs,Pe[dt+48]=$l-Gs;var Xd=.382683433*((jo=tf+Li)-(Mo=Ar+Hs)),Ml=.5411961*jo+Xd,Jd=1.306562965*Mo+Xd,Jp=.707106781*($o=Li+Ar),Qp=Hs+Jp,em=Hs-Jp;Pe[dt+40]=em+Ml,Pe[dt+24]=em-Ml,Pe[dt+8]=Qp+Jd,Pe[dt+56]=Qp-Jd,dt++}for(et=0;et<64;++et)$t=Pe[et]*xe[et],h[et]=$t>0?$t+.5|0:$t-.5|0;return h}(L,K),me=0;me<64;++me)p[T[me]]=fe[me];var de=p[0]-Q;Q=p[0],de==0?X(re[0]):(X(re[d[$=32767+de]]),X(f[$]));for(var _e=63;_e>0&&p[_e]==0;)_e--;if(_e==0)return X(ie),Q;for(var Oe,ee=1;ee<=_e;){for(var Ee=ee;p[ee]==0&&ee<=_e;)++ee;var Qe=ee-Ee;if(Qe>=16){Oe=Qe>>4;for(var tt=1;tt<=Oe;++tt)X(q);Qe&=15}$=32767+p[ee],X(F[(Qe<<4)+d[$]]),X(f[$]),ee++}return _e!=63&&X(ie),Q}function ue(L){L=Math.min(Math.max(L,1),100),a!=L&&(function(K){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var F=s((Q[re]*K+50)/100);F=Math.min(Math.max(F,1),255),o[T[re]]=F}for(var $=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var q=s(($[ie]*K+50)/100);q=Math.min(Math.max(q,1),255),l[T[ie]]=q}for(var fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,de=0;de<8;de++)for(var _e=0;_e<8;_e++)c[me]=1/(o[T[me]]*fe[de]*fe[_e]*8),u[me]=1/(l[T[me]]*fe[de]*fe[_e]*8),me++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),a=L)}this.encode=function(L,K){K&&ue(K),m=new Array,y=0,g=7,G(65496),G(65504),G(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),G(1),G(1),z(0),z(0),function(){G(65499),G(132),z(0);for(var Re=0;Re<64;Re++)z(o[Re]);z(1);for(var Ie=0;Ie<64;Ie++)z(l[Ie])}(),function(Re,Ie){G(65472),G(17),z(8),G(Ie),G(Re),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(L.width,L.height),function(){G(65476),G(418),z(0);for(var Re=0;Re<16;Re++)z(O[Re+1]);for(var Ie=0;Ie<=11;Ie++)z(R[Ie]);z(16);for(var Ye=0;Ye<16;Ye++)z(M[Ye+1]);for(var je=0;je<=161;je++)z(N[je]);z(1);for(var Ne=0;Ne<16;Ne++)z(j[Ne+1]);for(var Ke=0;Ke<=11;Ke++)z(U[Ke]);z(17);for(var He=0;He<16;He++)z(B[He+1]);for(var et=0;et<=161;et++)z(V[et])}(),G(65498),G(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var Q=0,re=0,F=0;y=0,g=7,this.encode.displayName="_encode_";for(var $,ie,q,fe,me,de,_e,Oe,ee,Ee=L.data,Qe=L.width,tt=L.height,Pe=4*Qe,xe=0;xe<tt;){for($=0;$<Pe;){for(me=Pe*xe+$,_e=-1,Oe=0,ee=0;ee<64;ee++)de=me+(Oe=ee>>3)*Pe+(_e=4*(7&ee)),xe+Oe>=tt&&(de-=Pe*(xe+1+Oe-tt)),$+_e>=Pe&&(de-=$+_e-Pe+4),ie=Ee[de++],q=Ee[de++],fe=Ee[de++],v[ee]=(E[ie]+E[q+256|0]+E[fe+512|0]>>16)-128,w[ee]=(E[ie+768|0]+E[q+1024|0]+E[fe+1280|0]>>16)-128,_[ee]=(E[ie+1280|0]+E[q+1536|0]+E[fe+1792|0]>>16)-128;Q=ae(v,c,Q,e,r),re=ae(w,u,re,n,i),F=ae(_,u,F,n,i),$+=32}xe+=8}if(g>=0){var Ze=[];Ze[1]=g+1,Ze[0]=(1<<g+1)-1,X(Ze)}return G(65497),new Uint8Array(m)},t=t||50,function(){for(var L=String.fromCharCode,K=0;K<256;K++)x[K]=L(K)}(),e=Y(O,R),n=Y(j,U),r=Y(M,N),i=Y(B,V),function(){for(var L=1,K=2,Q=1;Q<=15;Q++){for(var re=L;re<K;re++)d[32767+re]=Q,f[32767+re]=[],f[32767+re][1]=Q,f[32767+re][0]=re;for(var F=-(K-1);F<=-L;F++)d[32767+F]=Q,f[32767+F]=[],f[32767+F][1]=Q,f[32767+F][0]=K-1+F;L<<=1,K<<=1}}(),function(){for(var L=0;L<256;L++)E[L]=19595*L,E[L+256|0]=38470*L,E[L+512|0]=7471*L+32768,E[L+768|0]=-11059*L,E[L+1024|0]=-21709*L,E[L+1280|0]=32768*L+8421375,E[L+1536|0]=-27439*L,E[L+1792|0]=-5329*L}(),ue(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function qG(t){function e(R){if(!R)throw Error("assert :P")}function n(R,M,N){for(var j=0;4>j;j++)if(R[M+j]!=N.charCodeAt(j))return!0;return!1}function r(R,M,N,j,U){for(var B=0;B<U;B++)R[M+B]=N[j+B]}function i(R,M,N,j){for(var U=0;U<j;U++)R[M+U]=N}function a(R){return new Int32Array(R)}function s(R,M){for(var N=[],j=0;j<R;j++)N.push(new M);return N}function o(R,M){var N=[];return function j(U,B,V){for(var Y=V[B],X=0;X<Y&&(U.push(V.length>B+1?[]:new M),!(V.length<B+1));X++)j(U[X],B+1,V)}(N,0,R),N}var l=function(){var R=this;function M(b,A){for(var I=1<<A-1>>>0;b&I;)I>>>=1;return I?(b&I-1)+I:b}function N(b,A,I,D,H){e(!(D%I));do b[A+(D-=I)]=H;while(0<D)}function j(b,A,I,D,H){if(e(2328>=H),512>=H)var Z=a(512);else if((Z=a(H))==null)return 0;return function(J,te,ne,oe,pe,be){var le,ge,ve=te,Se=1<<ne,we=a(16),ke=a(16);for(e(pe!=0),e(oe!=null),e(J!=null),e(0<ne),ge=0;ge<pe;++ge){if(15<oe[ge])return 0;++we[oe[ge]]}if(we[0]==pe)return 0;for(ke[1]=0,le=1;15>le;++le){if(we[le]>1<<le)return 0;ke[le+1]=ke[le]+we[le]}for(ge=0;ge<pe;++ge)le=oe[ge],0<oe[ge]&&(be[ke[le]++]=ge);if(ke[15]==1)return(oe=new U).g=0,oe.value=be[0],N(J,ve,1,Se,oe),Se;var Ce,De=-1,Me=Se-1,bt=0,st=1,Zt=1,pt=1<<ne;for(ge=0,le=1,pe=2;le<=ne;++le,pe<<=1){if(st+=Zt<<=1,0>(Zt-=we[le]))return 0;for(;0<we[le];--we[le])(oe=new U).g=le,oe.value=be[ge++],N(J,ve+bt,pe,pt,oe),bt=M(bt,le)}for(le=ne+1,pe=2;15>=le;++le,pe<<=1){if(st+=Zt<<=1,0>(Zt-=we[le]))return 0;for(;0<we[le];--we[le]){if(oe=new U,(bt&Me)!=De){for(ve+=pt,Ce=1<<(De=le)-ne;15>De&&!(0>=(Ce-=we[De]));)++De,Ce<<=1;Se+=pt=1<<(Ce=De-ne),J[te+(De=bt&Me)].g=Ce+ne,J[te+De].value=ve-te-De}oe.g=le-ne,oe.value=be[ge++],N(J,ve+(bt>>ne),pe,pt,oe),bt=M(bt,le)}}return st!=2*ke[15]-1?0:Se}(b,A,I,D,H,Z)}function U(){this.value=this.g=0}function B(){this.value=this.g=0}function V(){this.G=s(5,U),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(ch,B)}function Y(b,A,I,D){e(b!=null),e(A!=null),e(2147483648>D),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=A,b.pa=I,b.Jd=A,b.Yc=I+D,b.Zc=4<=D?I+D-4+1:I,ie(b)}function X(b,A){for(var I=0;0<A--;)I|=fe(b,128)<<A;return I}function z(b,A){var I=X(b,A);return q(b)?-I:I}function G(b,A,I,D){var H,Z=0;for(e(b!=null),e(A!=null),e(4294967288>D),b.Sb=D,b.Ra=0,b.u=0,b.h=0,4<D&&(D=4),H=0;H<D;++H)Z+=A[I+H]<<8*H;b.Ra=Z,b.bb=D,b.oa=A,b.pa=I}function ae(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<sf-8>>>0,++b.bb,b.u-=8;re(b)&&(b.h=1,b.u=0)}function ue(b,A){if(e(0<=A),!b.h&&A<=cs){var I=Q(b)&ls[A];return b.u+=A,ae(b),I}return b.h=1,b.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(b){return b.Ra>>>(b.u&sf-1)>>>0}function re(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>sf}function F(b,A){b.u=A,b.h=re(b)}function $(b){b.u>=Vc&&(e(b.u>=Vc),ae(b))}function ie(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function q(b){return X(b,1)}function fe(b,A){var I=b.Ca;0>b.b&&ie(b);var D=b.b,H=I*A>>>8,Z=(b.I>>>D>H)+0;for(Z?(I-=H,b.I-=H+1<<D>>>0):I=H+1,D=I,H=0;256<=D;)H+=8,D>>=8;return D=7^H+of[D],b.b-=D,b.Ca=(I<<D)-1,Z}function me(b,A,I){b[A+0]=I>>24&255,b[A+1]=I>>16&255,b[A+2]=I>>8&255,b[A+3]=255&I}function de(b,A){return b[A+0]|b[A+1]<<8}function _e(b,A){return de(b,A)|b[A+2]<<16}function Oe(b,A){return de(b,A)|de(b,A+2)<<16}function ee(b,A){var I=1<<A;return e(b!=null),e(0<A),b.X=a(I),b.X==null?0:(b.Mb=32-A,b.Xa=A,1)}function Ee(b,A){e(b!=null),e(A!=null),e(b.Xa==A.Xa),r(A.X,0,b.X,0,1<<A.Xa)}function Qe(){this.X=[],this.Xa=this.Mb=0}function tt(b,A,I,D){e(I!=null),e(D!=null);var H=I[0],Z=D[0];return H==0&&(H=(b*Z+A/2)/A),Z==0&&(Z=(A*H+b/2)/b),0>=H||0>=Z?0:(I[0]=H,D[0]=Z,1)}function Pe(b,A){return b+(1<<A)-1>>>A}function xe(b,A){return((4278255360&b)+(4278255360&A)>>>0&4278255360)+((16711935&b)+(16711935&A)>>>0&16711935)>>>0}function Ze(b,A){R[A]=function(I,D,H,Z,J,te,ne){var oe;for(oe=0;oe<J;++oe){var pe=R[b](te[ne+oe-1],H,Z+oe);te[ne+oe]=xe(I[D+oe],pe)}}}function Re(){this.ud=this.hd=this.jd=0}function Ie(b,A){return((4278124286&(b^A))>>>1)+(b&A)>>>0}function Ye(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function je(b,A){return Ye(b+(b-A+.5>>1))}function Ne(b,A,I){return Math.abs(A-I)-Math.abs(b-I)}function Ke(b,A,I,D,H,Z,J){for(D=Z[J-1],I=0;I<H;++I)Z[J+I]=D=xe(b[A+I],D)}function He(b,A,I,D,H){var Z;for(Z=0;Z<I;++Z){var J=b[A+Z],te=J>>8&255,ne=16711935&(ne=(ne=16711935&J)+((te<<16)+te));D[H+Z]=(4278255360&J)+ne>>>0}}function et(b,A){A.jd=255&b,A.hd=b>>8&255,A.ud=b>>16&255}function $t(b,A,I,D,H,Z){var J;for(J=0;J<D;++J){var te=A[I+J],ne=te>>>8,oe=te,pe=255&(pe=(pe=te>>>16)+((b.jd<<24>>24)*(ne<<24>>24)>>>5));oe=255&(oe=(oe+=(b.hd<<24>>24)*(ne<<24>>24)>>>5)+((b.ud<<24>>24)*(pe<<24>>24)>>>5)),H[Z+J]=(4278255360&te)+(pe<<16)+oe}}function dt(b,A,I,D,H){R[A]=function(Z,J,te,ne,oe,pe,be,le,ge){for(ne=be;ne<le;++ne)for(be=0;be<ge;++be)oe[pe++]=H(te[D(Z[J++])])},R[b]=function(Z,J,te,ne,oe,pe,be){var le=8>>Z.b,ge=Z.Ea,ve=Z.K[0],Se=Z.w;if(8>le)for(Z=(1<<Z.b)-1,Se=(1<<le)-1;J<te;++J){var we,ke=0;for(we=0;we<ge;++we)we&Z||(ke=D(ne[oe++])),pe[be++]=H(ve[ke&Se]),ke>>=le}else R["VP8LMapColor"+I](ne,oe,ve,Se,pe,be,J,te,ge)}}function gr(b,A,I,D,H){for(I=A+I;A<I;){var Z=b[A++];D[H++]=Z>>16&255,D[H++]=Z>>8&255,D[H++]=255&Z}}function ln(b,A,I,D,H){for(I=A+I;A<I;){var Z=b[A++];D[H++]=Z>>16&255,D[H++]=Z>>8&255,D[H++]=255&Z,D[H++]=Z>>24&255}}function Kt(b,A,I,D,H){for(I=A+I;A<I;){var Z=(J=b[A++])>>16&240|J>>12&15,J=240&J|J>>28&15;D[H++]=Z,D[H++]=J}}function Yt(b,A,I,D,H){for(I=A+I;A<I;){var Z=(J=b[A++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;D[H++]=Z,D[H++]=J}}function Hn(b,A,I,D,H){for(I=A+I;A<I;){var Z=b[A++];D[H++]=255&Z,D[H++]=Z>>8&255,D[H++]=Z>>16&255}}function St(b,A,I,D,H,Z){if(Z==0)for(I=A+I;A<I;)me(D,((Z=b[A++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),H+=32;else r(D,H,b,A,I)}function Mn(b,A){R[A][0]=R[b+"0"],R[A][1]=R[b+"1"],R[A][2]=R[b+"2"],R[A][3]=R[b+"3"],R[A][4]=R[b+"4"],R[A][5]=R[b+"5"],R[A][6]=R[b+"6"],R[A][7]=R[b+"7"],R[A][8]=R[b+"8"],R[A][9]=R[b+"9"],R[A][10]=R[b+"10"],R[A][11]=R[b+"11"],R[A][12]=R[b+"12"],R[A][13]=R[b+"13"],R[A][14]=R[b+"0"],R[A][15]=R[b+"0"]}function Tt(b){return b==QO||b==eT||b==q_||b==tT}function Ge(){this.eb=[],this.size=this.A=this.fb=0}function kt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ze(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ge,this.f.kb=new kt,this.sd=null}function Xe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ut(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function qt(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function ki(b,A){var I=b.T,D=A.ba.f.RGBA,H=D.eb,Z=D.fb+b.ka*D.A,J=Qs[A.ba.S],te=b.y,ne=b.O,oe=b.f,pe=b.N,be=b.ea,le=b.W,ge=A.cc,ve=A.dc,Se=A.Mc,we=A.Nc,ke=b.ka,Ce=b.ka+b.T,De=b.U,Me=De+1>>1;for(ke==0?J(te,ne,null,null,oe,pe,be,le,oe,pe,be,le,H,Z,null,null,De):(J(A.ec,A.fc,te,ne,ge,ve,Se,we,oe,pe,be,le,H,Z-D.A,H,Z,De),++I);ke+2<Ce;ke+=2)ge=oe,ve=pe,Se=be,we=le,pe+=b.Rc,le+=b.Rc,Z+=2*D.A,J(te,(ne+=2*b.fa)-b.fa,te,ne,ge,ve,Se,we,oe,pe,be,le,H,Z-D.A,H,Z,De);return ne+=b.fa,b.j+Ce<b.o?(r(A.ec,A.fc,te,ne,De),r(A.cc,A.dc,oe,pe,Me),r(A.Mc,A.Nc,be,le,Me),I--):1&Ce||J(te,ne,null,null,oe,pe,be,le,oe,pe,be,le,H,Z+D.A,null,null,De),I}function Ro(b,A,I){var D=b.F,H=[b.J];if(D!=null){var Z=b.U,J=A.ba.S,te=J==H_||J==q_;A=A.ba.f.RGBA;var ne=[0],oe=b.ka;ne[0]=b.T,b.Kb&&(oe==0?--ne[0]:(--oe,H[0]-=b.width),b.j+b.ka+b.T==b.o&&(ne[0]=b.o-b.j-oe));var pe=A.eb;oe=A.fb+oe*A.A,b=R6(D,H[0],b.width,Z,ne,pe,oe+(te?0:3),A.A),e(I==ne),b&&Tt(J)&&n0(pe,oe,te,Z,ne,A.A)}return 0}function Ws(b){var A=b.ma,I=A.ba.S,D=11>I,H=I==V_||I==W_||I==H_||I==JO||I==12||Tt(I);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!Kv(A.Oa,b,H?11:12))return 0;if(H&&Tt(I)&&Hv(),b.da)alert("todo:use_scaling");else{if(D){if(A.Ib=qt,b.Kb){if(I=b.U+1>>1,A.memory=a(b.U+2*I),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+b.U,A.Mc=A.cc,A.Nc=A.dc+I,A.Ib=ki,Hv()}}else alert("todo:EmitYUV");H&&(A.Jb=Ro,D&&Do())}if(D&&!Y6){for(b=0;256>b;++b)lpe[b]=89858*(b-128)+K_>>G_,fpe[b]=-22014*(b-128)+K_,upe[b]=-45773*(b-128),cpe[b]=113618*(b-128)+K_>>G_;for(b=i0;b<iT;++b)A=76283*(b-16)+K_>>G_,dpe[b-i0]=Ll(A,255),hpe[b-i0]=Ll(A+8>>4,15);Y6=1}return 1}function Ot(b){var A=b.ma,I=b.U,D=b.T;return e(!(1&b.ka)),0>=I||0>=D?0:(I=A.Ib(b,A),A.Jb!=null&&A.Jb(b,A,I),A.Dc+=I,1)}function os(b){b.ma.memory=null}function Ic(b,A,I,D){return ue(b,8)!=47?0:(A[0]=ue(b,14)+1,I[0]=ue(b,14)+1,D[0]=ue(b,1),ue(b,3)!=0?0:!b.h)}function Hs(b,A){if(4>b)return b+1;var I=b-2>>1;return(2+(1&b)<<I)+ue(A,I)+1}function qs(b,A){return 120<A?A-120:1<=(I=((I=Khe[A-1])>>4)*b+(8-(15&I)))?I:1;var I}function Ar(b,A,I){var D=Q(I),H=b[A+=255&D].g-8;return 0<H&&(F(I,I.u+8),D=Q(I),A+=b[A].value,A+=D&(1<<H)-1),F(I,I.u+b[A].g),b[A].value}function Oi(b,A,I){return I.g+=b.g,I.value+=b.value<<A>>>0,e(8>=I.g),b.g}function Li(b,A,I){var D=b.xc;return e((A=D==0?0:b.vc[b.md*(I>>D)+(A>>D)])<b.Wb),b.Ya[A]}function Zd(b,A,I,D){var H=b.ab,Z=b.c*A,J=b.C;A=J+A;var te=I,ne=D;for(D=b.Ta,I=b.Ua;0<H--;){var oe=b.gc[H],pe=J,be=A,le=te,ge=ne,ve=(ne=D,te=I,oe.Ea);switch(e(pe<be),e(be<=oe.nc),oe.hc){case 2:$r(le,ge,(be-pe)*ve,ne,te);break;case 0:var Se=pe,we=be,ke=ne,Ce=te,De=(pt=oe).Ea;Se==0&&(Zv(le,ge,null,null,1,ke,Ce),Ke(le,ge+1,0,0,De-1,ke,Ce+1),ge+=De,Ce+=De,++Se);for(var Me=1<<pt.b,bt=Me-1,st=Pe(De,pt.b),Zt=pt.K,pt=pt.w+(Se>>pt.b)*st;Se<we;){var cn=Zt,ci=pt,Xt=1;for(lm(le,ge,ke,Ce-De,1,ke,Ce);Xt<De;){var mt=(Xt&~bt)+Me;mt>De&&(mt=De),(0,Jv[cn[ci++]>>8&15])(le,ge+ +Xt,ke,Ce+Xt-De,mt-Xt,ke,Ce+Xt),Xt=mt}ge+=De,Ce+=De,++Se&bt||(pt+=st)}be!=oe.nc&&r(ne,te-ve,ne,te+(be-pe-1)*ve,ve);break;case 1:for(ve=le,we=ge,De=(le=oe.Ea)-(Ce=le&~(ke=(ge=1<<oe.b)-1)),Se=Pe(le,oe.b),Me=oe.K,oe=oe.w+(pe>>oe.b)*Se;pe<be;){for(bt=Me,st=oe,Zt=new Re,pt=we+Ce,cn=we+le;we<pt;)et(bt[st++],Zt),Qv(Zt,ve,we,ge,ne,te),we+=ge,te+=ge;we<cn&&(et(bt[st++],Zt),Qv(Zt,ve,we,De,ne,te),we+=De,te+=De),++pe&ke||(oe+=Se)}break;case 3:if(le==ne&&ge==te&&0<oe.b){for(we=ne,le=ve=te+(be-pe)*ve-(Ce=(be-pe)*Pe(oe.Ea,oe.b)),ge=ne,ke=te,Se=[],Ce=(De=Ce)-1;0<=Ce;--Ce)Se[Ce]=ge[ke+Ce];for(Ce=De-1;0<=Ce;--Ce)we[le+Ce]=Se[Ce];F_(oe,pe,be,ne,ve,ne,te)}else F_(oe,pe,be,le,ge,ne,te)}te=D,ne=I}ne!=I&&r(D,I,te,ne,Z)}function tf(b,A){var I=b.V,D=b.Ba+b.c*b.C,H=A-b.C;if(e(A<=b.l.o),e(16>=H),0<H){var Z=b.l,J=b.Ta,te=b.Ua,ne=Z.width;if(Zd(b,H,I,D),H=te=[te],e((I=b.C)<(D=A)),e(Z.v<Z.va),D>Z.o&&(D=Z.o),I<Z.j){var oe=Z.j-I;I=Z.j,H[0]+=oe*ne}if(I>=D?I=0:(H[0]+=4*Z.v,Z.ka=I-Z.j,Z.U=Z.va-Z.v,Z.T=D-I,I=1),I){if(te=te[0],11>(I=b.ca).S){var pe=I.f.RGBA,be=(D=I.S,H=Z.U,Z=Z.T,oe=pe.eb,pe.A),le=Z;for(pe=pe.fb+b.Ma*pe.A;0<le--;){var ge=J,ve=te,Se=H,we=oe,ke=pe;switch(D){case z_:e0(ge,ve,Se,we,ke);break;case V_:lf(ge,ve,Se,we,ke);break;case QO:lf(ge,ve,Se,we,ke),n0(we,ke,0,Se,1,0);break;case B6:uh(ge,ve,Se,we,ke);break;case W_:St(ge,ve,Se,we,ke,1);break;case eT:St(ge,ve,Se,we,ke,1),n0(we,ke,0,Se,1,0);break;case H_:St(ge,ve,Se,we,ke,0);break;case q_:St(ge,ve,Se,we,ke,0),n0(we,ke,1,Se,1,0);break;case JO:cf(ge,ve,Se,we,ke);break;case tT:cf(ge,ve,Se,we,ke),I6(we,ke,Se,1,0);break;case U6:uf(ge,ve,Se,we,ke);break;default:e(0)}te+=ne,pe+=be}b.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=I.height)}}b.C=A,e(b.C<=b.i)}function jo(b){var A;if(0<b.ua)return 0;for(A=0;A<b.Wb;++A){var I=b.Ya[A].G,D=b.Ya[A].H;if(0<I[1][D[1]+0].g||0<I[2][D[2]+0].g||0<I[3][D[3]+0].g)return 0}return 1}function $l(b,A,I,D,H,Z){if(b.Z!=0){var J=b.qd,te=b.rd;for(e(hf[b.Z]!=null);A<I;++A)hf[b.Z](J,te,D,H,D,H,Z),J=D,te=H,H+=Z;b.qd=J,b.rd=te}}function $o(b,A){var I=b.l.ma,D=I.Z==0||I.Z==1?b.l.j:b.C;if(D=b.C<D?D:b.C,e(A<=b.l.o),A>D){var H=b.l.width,Z=I.ca,J=I.tb+H*D,te=b.V,ne=b.Ba+b.c*D,oe=b.gc;e(b.ab==1),e(oe[0].hc==3),Ul(oe[0],D,A,te,ne,Z,J),$l(I,D,A,Z,J,H)}b.C=b.Ma=A}function Mo(b,A,I,D,H,Z,J){var te=b.$/D,ne=b.$%D,oe=b.m,pe=b.s,be=I+b.$,le=be;H=I+D*H;var ge=I+D*Z,ve=280+pe.ua,Se=b.Pb?te:16777216,we=0<pe.ua?pe.Wa:null,ke=pe.wc,Ce=be<ge?Li(pe,ne,te):null;e(b.C<Z),e(ge<=H);var De=!1;e:for(;;){for(;De||be<ge;){var Me=0;if(te>=Se){var bt=be-I;e((Se=b).Pb),Se.wd=Se.m,Se.xd=bt,0<Se.s.ua&&Ee(Se.s.Wa,Se.s.vb),Se=te+Zhe}if(ne&ke||(Ce=Li(pe,ne,te)),e(Ce!=null),Ce.Qb&&(A[be]=Ce.qb,De=!0),!De)if($(oe),Ce.jc){Me=oe,bt=A;var st=be,Zt=Ce.pd[Q(Me)&ch-1];e(Ce.jc),256>Zt.g?(F(Me,Me.u+Zt.g),bt[st]=Zt.value,Me=0):(F(Me,Me.u+Zt.g-256),e(256<=Zt.value),Me=Zt.value),Me==0&&(De=!0)}else Me=Ar(Ce.G[0],Ce.H[0],oe);if(oe.h)break;if(De||256>Me){if(!De)if(Ce.nd)A[be]=(Ce.qb|Me<<8)>>>0;else{if($(oe),De=Ar(Ce.G[1],Ce.H[1],oe),$(oe),bt=Ar(Ce.G[2],Ce.H[2],oe),st=Ar(Ce.G[3],Ce.H[3],oe),oe.h)break;A[be]=(st<<24|De<<16|Me<<8|bt)>>>0}if(De=!1,++be,++ne>=D&&(ne=0,++te,J!=null&&te<=Z&&!(te%16)&&J(b,te),we!=null))for(;le<be;)Me=A[le++],we.X[(506832829*Me&4294967295)>>>we.Mb]=Me}else if(280>Me){if(Me=Hs(Me-256,oe),bt=Ar(Ce.G[4],Ce.H[4],oe),$(oe),bt=qs(D,bt=Hs(bt,oe)),oe.h)break;if(be-I<bt||H-be<Me)break e;for(st=0;st<Me;++st)A[be+st]=A[be+st-bt];for(be+=Me,ne+=Me;ne>=D;)ne-=D,++te,J!=null&&te<=Z&&!(te%16)&&J(b,te);if(e(be<=H),ne&ke&&(Ce=Li(pe,ne,te)),we!=null)for(;le<be;)Me=A[le++],we.X[(506832829*Me&4294967295)>>>we.Mb]=Me}else{if(!(Me<ve))break e;for(De=Me-280,e(we!=null);le<be;)Me=A[le++],we.X[(506832829*Me&4294967295)>>>we.Mb]=Me;Me=be,e(!(De>>>(bt=we).Xa)),A[Me]=bt.X[De],De=!0}De||e(oe.h==re(oe))}if(b.Pb&&oe.h&&be<H)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Ee(b.s.vb,b.s.Wa);else{if(oe.h)break e;J!=null&&J(b,te>Z?Z:te),b.a=0,b.$=be-I}return 1}return b.a=3,0}function Gs(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var A=b.Wa;A!=null&&(A.X=null),b.vb=null,e(b!=null)}function Xd(){var b=new Lt;return b==null?null:(b.a=0,b.xb=W6,Mn("Predictor","VP8LPredictors"),Mn("Predictor","VP8LPredictors_C"),Mn("PredictorAdd","VP8LPredictorsAdd"),Mn("PredictorAdd","VP8LPredictorsAdd_C"),$r=He,Qv=$t,e0=gr,lf=ln,cf=Kt,uf=Yt,uh=Hn,R.VP8LMapColor32b=Bl,R.VP8LMapColor8b=Xv,b)}function Ml(b,A,I,D,H){var Z=1,J=[b],te=[A],ne=D.m,oe=D.s,pe=null,be=0;e:for(;;){if(I)for(;Z&&ue(ne,1);){var le=J,ge=te,ve=D,Se=1,we=ve.m,ke=ve.gc[ve.ab],Ce=ue(we,2);if(ve.Oc&1<<Ce)Z=0;else{switch(ve.Oc|=1<<Ce,ke.hc=Ce,ke.Ea=le[0],ke.nc=ge[0],ke.K=[null],++ve.ab,e(4>=ve.ab),Ce){case 0:case 1:ke.b=ue(we,3)+2,Se=Ml(Pe(ke.Ea,ke.b),Pe(ke.nc,ke.b),0,ve,ke.K),ke.K=ke.K[0];break;case 3:var De,Me=ue(we,8)+1,bt=16<Me?0:4<Me?1:2<Me?2:3;if(le[0]=Pe(ke.Ea,bt),ke.b=bt,De=Se=Ml(Me,1,0,ve,ke.K)){var st,Zt=Me,pt=ke,cn=1<<(8>>pt.b),ci=a(cn);if(ci==null)De=0;else{var Xt=pt.K[0],mt=pt.w;for(ci[0]=pt.K[0][0],st=1;st<1*Zt;++st)ci[st]=xe(Xt[mt+st],ci[st-1]);for(;st<4*cn;++st)ci[st]=0;pt.K[0]=null,pt.K[0]=ci,De=1}}Se=De;break;case 2:break;default:e(0)}Z=Se}}if(J=J[0],te=te[0],Z&&ue(ne,1)&&!(Z=1<=(be=ue(ne,4))&&11>=be)){D.a=3;break e}var Je;if(Je=Z)t:{var Lr,Ht,hn,tr=D,Bi=J,wa=te,kr=be,ta=I,ba=tr.m,ui=tr.s,mn=[null],Tn=1,Or=0,Cn=Yhe[kr];n:for(;;){if(ta&&ue(ba,1)){var Ui=ue(ba,3)+2,Bo=Pe(Bi,Ui),Dr=Pe(wa,Ui),za=Bo*Dr;if(!Ml(Bo,Dr,0,tr,mn))break n;for(mn=mn[0],ui.xc=Ui,Lr=0;Lr<za;++Lr){var zn=mn[Lr]>>8&65535;mn[Lr]=zn,zn>=Tn&&(Tn=zn+1)}}if(ba.h)break n;for(Ht=0;5>Ht;++Ht){var fi=z6[Ht];!Ht&&0<kr&&(fi+=1<<kr),Or<fi&&(Or=fi)}var fs=s(Tn*Cn,U),_a=Tn,ds=s(_a,V);if(ds==null)var hs=null;else e(65536>=_a),hs=ds;var Va=a(Or);if(hs==null||Va==null||fs==null){tr.a=1;break n}var ps=fs;for(Lr=hn=0;Lr<Tn;++Lr){var Gn=hs[Lr],ms=Gn.G,Uo=Gn.H,dh=0,qc=1,zi=0;for(Ht=0;5>Ht;++Ht){fi=z6[Ht],ms[Ht]=ps,Uo[Ht]=hn,!Ht&&0<kr&&(fi+=1<<kr);i:{var Z_,aT=fi,X_=tr,a0=Va,gpe=ps,ype=hn,sT=0,pf=X_.m,vpe=ue(pf,1);if(i(a0,0,0,aT),vpe){var wpe=ue(pf,1)+1,bpe=ue(pf,1),J6=ue(pf,bpe==0?1:8);a0[J6]=1,wpe==2&&(a0[J6=ue(pf,8)]=1);var J_=1}else{var Q6=a(19),e8=ue(pf,4)+4;if(19<e8){X_.a=3;var Q_=0;break i}for(Z_=0;Z_<e8;++Z_)Q6[Ghe[Z_]]=ue(pf,3);var oT=void 0,s0=void 0,t8=X_,_pe=Q6,ex=aT,n8=a0,lT=0,mf=t8.m,r8=8,i8=s(128,U);r:for(;j(i8,0,7,_pe,19);){if(ue(mf,1)){var xpe=2+2*ue(mf,3);if((oT=2+ue(mf,xpe))>ex)break r}else oT=ex;for(s0=0;s0<ex&&oT--;){$(mf);var a8=i8[0+(127&Q(mf))];F(mf,mf.u+a8.g);var um=a8.value;if(16>um)n8[s0++]=um,um!=0&&(r8=um);else{var Spe=um==16,s8=um-16,Epe=Hhe[s8],o8=ue(mf,Whe[s8])+Epe;if(s0+o8>ex)break r;for(var Ape=Spe?r8:0;0<o8--;)n8[s0++]=Ape}}lT=1;break r}lT||(t8.a=3),J_=lT}(J_=J_&&!pf.h)&&(sT=j(gpe,ype,8,a0,aT)),J_&&sT!=0?Q_=sT:(X_.a=3,Q_=0)}if(Q_==0)break n;if(qc&&qhe[Ht]==1&&(qc=ps[hn].g==0),dh+=ps[hn].g,hn+=Q_,3>=Ht){var o0,cT=Va[0];for(o0=1;o0<fi;++o0)Va[o0]>cT&&(cT=Va[o0]);zi+=cT}}if(Gn.nd=qc,Gn.Qb=0,qc&&(Gn.qb=(ms[3][Uo[3]+0].value<<24|ms[1][Uo[1]+0].value<<16|ms[2][Uo[2]+0].value)>>>0,dh==0&&256>ms[0][Uo[0]+0].value&&(Gn.Qb=1,Gn.qb+=ms[0][Uo[0]+0].value<<8)),Gn.jc=!Gn.Qb&&6>zi,Gn.jc){var tx,Gc=Gn;for(tx=0;tx<ch;++tx){var gf=tx,yf=Gc.pd[gf],nx=Gc.G[0][Gc.H[0]+gf];256<=nx.value?(yf.g=nx.g+256,yf.value=nx.value):(yf.g=0,yf.value=0,gf>>=Oi(nx,8,yf),gf>>=Oi(Gc.G[1][Gc.H[1]+gf],16,yf),gf>>=Oi(Gc.G[2][Gc.H[2]+gf],0,yf),Oi(Gc.G[3][Gc.H[3]+gf],24,yf))}}}ui.vc=mn,ui.Wb=Tn,ui.Ya=hs,ui.yc=fs,Je=1;break t}Je=0}if(!(Z=Je)){D.a=3;break e}if(0<be){if(oe.ua=1<<be,!ee(oe.Wa,be)){D.a=1,Z=0;break e}}else oe.ua=0;var uT=D,l8=J,kpe=te,fT=uT.s,dT=fT.xc;if(uT.c=l8,uT.i=kpe,fT.md=Pe(l8,dT),fT.wc=dT==0?-1:(1<<dT)-1,I){D.xb=rpe;break e}if((pe=a(J*te))==null){D.a=1,Z=0;break e}Z=(Z=Mo(D,pe,0,J,te,te,null))&&!ne.h;break e}return Z?(H!=null?H[0]=pe:(e(pe==null),e(I)),D.$=0,I||Gs(oe)):Gs(oe),Z}function Jd(b,A){var I=b.c*b.i,D=I+A+16*A;return e(b.c<=A),b.V=a(D),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+I+A,1)}function Jp(b,A){var I=b.C,D=A-I,H=b.V,Z=b.Ba+b.c*I;for(e(A<=b.l.o);0<D;){var J=16<D?16:D,te=b.l.ma,ne=b.l.width,oe=ne*J,pe=te.ca,be=te.tb+ne*I,le=b.Ta,ge=b.Ua;Zd(b,J,H,Z),j6(le,ge,pe,be,oe),$l(te,I,I+J,pe,be,ne),D-=J,H+=J*b.c,I+=J}e(I==A),b.C=b.Ma=A}function Qp(){this.ub=this.yd=this.td=this.Rb=0}function em(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function $O(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function jv(){this.Yb=function(){var b=[];return function A(I,D,H){for(var Z=H[D],J=0;J<Z&&(I.push(H.length>D+1?[]:0),!(H.length<D+1));J++)A(I[J],D+1,H)}(b,0,[3,11]),b}()}function __(){this.jb=a(3),this.Wc=o([4,8],jv),this.Xc=o([4,17],jv)}function x_(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ks(){this.ld=this.La=this.dd=this.tc=0}function $v(){this.Na=this.la=0}function S_(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mv(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function E_(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ks),this.Y=0,this.ya=Array(new Mv),this.aa=0,this.l=new tm}function A_(){this.y=a(16),this.f=a(8),this.ea=a(8)}function k_(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Qp,this.Kc=new em,this.ed=new x_,this.Qa=new $O,this.Ic=this.$c=this.Aa=0,this.D=new E_,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,L),this.ia=0,this.pb=s(4,S_),this.Pa=new __,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new A_),this.Hd=0,this.rb=Array(new $v),this.sb=0,this.wa=Array(new Ks),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mv),this.L=this.aa=0,this.gd=o([4,2],Ks),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ll(b,A){return 0>b?0:b>A?A:b}function tm(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function MO(){var b=new k_;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,r0||(r0=nm)),b}function Wr(b,A,I){return b.a==0&&(b.a=A,b.sc=I,b.cb=0),0}function O_(b,A,I){return 3<=I&&b[A+0]==157&&b[A+1]==1&&b[A+2]==42}function Dl(b,A){if(b==null)return 0;if(b.a=0,b.sc="OK",A==null)return Wr(b,2,"null VP8Io passed to VP8GetHeaders()");var I=A.data,D=A.w,H=A.ha;if(4>H)return Wr(b,7,"Truncated header.");var Z=I[D+0]|I[D+1]<<8|I[D+2]<<16,J=b.Od;if(J.Rb=!(1&Z),J.td=Z>>1&7,J.yd=Z>>4&1,J.ub=Z>>5,3<J.td)return Wr(b,3,"Incorrect keyframe parameters.");if(!J.yd)return Wr(b,4,"Frame not displayable.");D+=3,H-=3;var te=b.Kc;if(J.Rb){if(7>H)return Wr(b,7,"cannot parse picture header");if(!O_(I,D,H))return Wr(b,3,"Bad code word");te.c=16383&(I[D+4]<<8|I[D+3]),te.Td=I[D+4]>>6,te.i=16383&(I[D+6]<<8|I[D+5]),te.Ud=I[D+6]>>6,D+=7,H-=7,b.za=te.c+15>>4,b.Ub=te.i+15>>4,A.width=te.c,A.height=te.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((Z=b.Pa).jb,0,255,Z.jb.length),e((Z=b.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,i(Z.Zb,0,0,Z.Zb.length),i(Z.Lb,0,0,Z.Lb)}if(J.ub>H)return Wr(b,7,"bad partition length");Y(Z=b.m,I,D,J.ub),D+=J.ub,H-=J.ub,J.Rb&&(te.Ld=q(Z),te.Kd=q(Z)),te=b.Qa;var ne,oe=b.Pa;if(e(Z!=null),e(te!=null),te.Cb=q(Z),te.Cb){if(te.Bb=q(Z),q(Z)){for(te.Fb=q(Z),ne=0;4>ne;++ne)te.Zb[ne]=q(Z)?z(Z,7):0;for(ne=0;4>ne;++ne)te.Lb[ne]=q(Z)?z(Z,6):0}if(te.Bb)for(ne=0;3>ne;++ne)oe.jb[ne]=q(Z)?X(Z,8):255}else te.Bb=0;if(Z.Ka)return Wr(b,3,"cannot parse segment header");if((te=b.ed).zd=q(Z),te.Tb=X(Z,6),te.wb=X(Z,3),te.Pc=q(Z),te.Pc&&q(Z)){for(oe=0;4>oe;++oe)q(Z)&&(te.vd[oe]=z(Z,6));for(oe=0;4>oe;++oe)q(Z)&&(te.od[oe]=z(Z,6))}if(b.L=te.Tb==0?0:te.zd?1:2,Z.Ka)return Wr(b,3,"cannot parse filter header");var pe=H;if(H=ne=D,D=ne+pe,te=pe,b.Xb=(1<<X(b.m,2))-1,pe<3*(oe=b.Xb))I=7;else{for(ne+=3*oe,te-=3*oe,pe=0;pe<oe;++pe){var be=I[H+0]|I[H+1]<<8|I[H+2]<<16;be>te&&(be=te),Y(b.Jc[+pe],I,ne,be),ne+=be,te-=be,H+=3}Y(b.Jc[+oe],I,ne,te),I=ne<D?0:5}if(I!=0)return Wr(b,I,"cannot parse partitions");for(I=X(ne=b.m,7),H=q(ne)?z(ne,4):0,D=q(ne)?z(ne,4):0,te=q(ne)?z(ne,4):0,oe=q(ne)?z(ne,4):0,ne=q(ne)?z(ne,4):0,pe=b.Qa,be=0;4>be;++be){if(pe.Cb){var le=pe.Zb[be];pe.Fb||(le+=I)}else{if(0<be){b.pb[be]=b.pb[0];continue}le=I}var ge=b.pb[be];ge.Sc[0]=nT[Ll(le+H,127)],ge.Sc[1]=rT[Ll(le+0,127)],ge.Eb[0]=2*nT[Ll(le+D,127)],ge.Eb[1]=101581*rT[Ll(le+te,127)]>>16,8>ge.Eb[1]&&(ge.Eb[1]=8),ge.Qc[0]=nT[Ll(le+oe,117)],ge.Qc[1]=rT[Ll(le+ne,127)],ge.lc=le+ne}if(!J.Rb)return Wr(b,4,"Not a key frame.");for(q(Z),J=b.Pa,I=0;4>I;++I){for(H=0;8>H;++H)for(D=0;3>D;++D)for(te=0;11>te;++te)oe=fe(Z,tpe[I][H][D][te])?X(Z,8):Qhe[I][H][D][te],J.Wc[I][H].Yb[D][te]=oe;for(H=0;17>H;++H)J.Xc[I][H]=J.Wc[I][npe[H]]}return b.kc=q(Z),b.kc&&(b.Bd=X(Z,8)),b.cb=1}function nm(b,A,I,D,H,Z,J){var te=A[H].Yb[I];for(I=0;16>H;++H){if(!fe(b,te[I+0]))return H;for(;!fe(b,te[I+1]);)if(te=A[++H].Yb[0],I=0,H==16)return 16;var ne=A[H+1].Yb;if(fe(b,te[I+2])){var oe=b,pe=0;if(fe(oe,(le=te)[(be=I)+3]))if(fe(oe,le[be+6])){for(te=0,be=2*(pe=fe(oe,le[be+8]))+(le=fe(oe,le[be+9+pe])),pe=0,le=Xhe[be];le[te];++te)pe+=pe+fe(oe,le[te]);pe+=3+(8<<be)}else fe(oe,le[be+7])?(pe=7+2*fe(oe,165),pe+=fe(oe,145)):pe=5+fe(oe,159);else pe=fe(oe,le[be+4])?3+fe(oe,le[be+5]):2;te=ne[2]}else pe=1,te=ne[1];ne=J+Jhe[H],0>(oe=b).b&&ie(oe);var be,le=oe.b,ge=(be=oe.Ca>>1)-(oe.I>>le)>>31;--oe.b,oe.Ca+=ge,oe.Ca|=1,oe.I-=(be+1&ge)<<le,Z[ne]=((pe^ge)-ge)*D[(0<H)+0]}return 16}function T_(b){var A=b.rb[b.sb-1];A.la=0,A.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function Ys(b,A,I,D,H){H=b[A+I+32*D]+(H>>3),b[A+I+32*D]=-256&H?0>H?0:255:H}function si(b,A,I,D,H,Z){Ys(b,A,0,I,D+H),Ys(b,A,1,I,D+Z),Ys(b,A,2,I,D-Z),Ys(b,A,3,I,D-H)}function Rc(b){return(20091*b>>16)+b}function C_(b,A,I,D){var H,Z=0,J=a(16);for(H=0;4>H;++H){var te=b[A+0]+b[A+8],ne=b[A+0]-b[A+8],oe=(35468*b[A+4]>>16)-Rc(b[A+12]),pe=Rc(b[A+4])+(35468*b[A+12]>>16);J[Z+0]=te+pe,J[Z+1]=ne+oe,J[Z+2]=ne-oe,J[Z+3]=te-pe,Z+=4,A++}for(H=Z=0;4>H;++H)te=(b=J[Z+0]+4)+J[Z+8],ne=b-J[Z+8],oe=(35468*J[Z+4]>>16)-Rc(J[Z+12]),Ys(I,D,0,0,te+(pe=Rc(J[Z+4])+(35468*J[Z+12]>>16))),Ys(I,D,1,0,ne+oe),Ys(I,D,2,0,ne-oe),Ys(I,D,3,0,te-pe),Z++,D+=32}function LO(b,A,I,D){var H=b[A+0]+4,Z=35468*b[A+4]>>16,J=Rc(b[A+4]),te=35468*b[A+1]>>16;si(I,D,0,H+J,b=Rc(b[A+1]),te),si(I,D,1,H+Z,b,te),si(I,D,2,H-Z,b,te),si(I,D,3,H-J,b,te)}function DO(b,A,I,D,H){C_(b,A,I,D),H&&C_(b,A+16,I,D+4)}function Fl(b,A,I,D){fh(b,A+0,I,D,1),fh(b,A+32,I,D+128,1)}function P_(b,A,I,D){var H;for(b=b[A+0]+4,H=0;4>H;++H)for(A=0;4>A;++A)Ys(I,D,A,H,b)}function N_(b,A,I,D){b[A+0]&&En(b,A+0,I,D),b[A+16]&&En(b,A+16,I,D+4),b[A+32]&&En(b,A+32,I,D+128),b[A+48]&&En(b,A+48,I,D+128+4)}function rm(b,A,I,D){var H,Z=a(16);for(H=0;4>H;++H){var J=b[A+0+H]+b[A+12+H],te=b[A+4+H]+b[A+8+H],ne=b[A+4+H]-b[A+8+H],oe=b[A+0+H]-b[A+12+H];Z[0+H]=J+te,Z[8+H]=J-te,Z[4+H]=oe+ne,Z[12+H]=oe-ne}for(H=0;4>H;++H)J=(b=Z[0+4*H]+3)+Z[3+4*H],te=Z[1+4*H]+Z[2+4*H],ne=Z[1+4*H]-Z[2+4*H],oe=b-Z[3+4*H],I[D+0]=J+te>>3,I[D+16]=oe+ne>>3,I[D+32]=J-te>>3,I[D+48]=oe-ne>>3,D+=64}function Qd(b,A,I){var D,H=A-32,Z=us,J=255-b[H-1];for(D=0;D<I;++D){var te,ne=Z,oe=J+b[A-1];for(te=0;te<I;++te)b[A+te]=ne[oe+b[H+te]];A+=32}}function FO(b,A){Qd(b,A,4)}function BO(b,A){Qd(b,A,8)}function UO(b,A){Qd(b,A,16)}function Lv(b,A){var I;for(I=0;16>I;++I)r(b,A+32*I,b,A-32,16)}function I_(b,A){var I;for(I=16;0<I;--I)i(b,A,b[A-1],16),A+=32}function Lo(b,A,I){var D;for(D=0;16>D;++D)i(A,I+32*D,b,16)}function zO(b,A){var I,D=16;for(I=0;16>I;++I)D+=b[A-1+32*I]+b[A+I-32];Lo(D>>5,b,A)}function eh(b,A){var I,D=8;for(I=0;16>I;++I)D+=b[A-1+32*I];Lo(D>>4,b,A)}function Dv(b,A){var I,D=8;for(I=0;16>I;++I)D+=b[A+I-32];Lo(D>>4,b,A)}function VO(b,A){Lo(128,b,A)}function Ft(b,A,I){return b+2*A+I+2>>2}function WO(b,A){var I,D=A-32;for(D=new Uint8Array([Ft(b[D-1],b[D+0],b[D+1]),Ft(b[D+0],b[D+1],b[D+2]),Ft(b[D+1],b[D+2],b[D+3]),Ft(b[D+2],b[D+3],b[D+4])]),I=0;4>I;++I)r(b,A+32*I,D,0,D.length)}function HO(b,A){var I=b[A-1],D=b[A-1+32],H=b[A-1+64],Z=b[A-1+96];me(b,A+0,16843009*Ft(b[A-1-32],I,D)),me(b,A+32,16843009*Ft(I,D,H)),me(b,A+64,16843009*Ft(D,H,Z)),me(b,A+96,16843009*Ft(H,Z,Z))}function qO(b,A){var I,D=4;for(I=0;4>I;++I)D+=b[A+I-32]+b[A-1+32*I];for(D>>=3,I=0;4>I;++I)i(b,A+32*I,D,4)}function jc(b,A){var I=b[A-1+0],D=b[A-1+32],H=b[A-1+64],Z=b[A-1-32],J=b[A+0-32],te=b[A+1-32],ne=b[A+2-32],oe=b[A+3-32];b[A+0+96]=Ft(D,H,b[A-1+96]),b[A+1+96]=b[A+0+64]=Ft(I,D,H),b[A+2+96]=b[A+1+64]=b[A+0+32]=Ft(Z,I,D),b[A+3+96]=b[A+2+64]=b[A+1+32]=b[A+0+0]=Ft(J,Z,I),b[A+3+64]=b[A+2+32]=b[A+1+0]=Ft(te,J,Z),b[A+3+32]=b[A+2+0]=Ft(ne,te,J),b[A+3+0]=Ft(oe,ne,te)}function $c(b,A){var I=b[A+1-32],D=b[A+2-32],H=b[A+3-32],Z=b[A+4-32],J=b[A+5-32],te=b[A+6-32],ne=b[A+7-32];b[A+0+0]=Ft(b[A+0-32],I,D),b[A+1+0]=b[A+0+32]=Ft(I,D,H),b[A+2+0]=b[A+1+32]=b[A+0+64]=Ft(D,H,Z),b[A+3+0]=b[A+2+32]=b[A+1+64]=b[A+0+96]=Ft(H,Z,J),b[A+3+32]=b[A+2+64]=b[A+1+96]=Ft(Z,J,te),b[A+3+64]=b[A+2+96]=Ft(J,te,ne),b[A+3+96]=Ft(te,ne,ne)}function GO(b,A){var I=b[A-1+0],D=b[A-1+32],H=b[A-1+64],Z=b[A-1-32],J=b[A+0-32],te=b[A+1-32],ne=b[A+2-32],oe=b[A+3-32];b[A+0+0]=b[A+1+64]=Z+J+1>>1,b[A+1+0]=b[A+2+64]=J+te+1>>1,b[A+2+0]=b[A+3+64]=te+ne+1>>1,b[A+3+0]=ne+oe+1>>1,b[A+0+96]=Ft(H,D,I),b[A+0+64]=Ft(D,I,Z),b[A+0+32]=b[A+1+96]=Ft(I,Z,J),b[A+1+32]=b[A+2+96]=Ft(Z,J,te),b[A+2+32]=b[A+3+96]=Ft(J,te,ne),b[A+3+32]=Ft(te,ne,oe)}function KO(b,A){var I=b[A+0-32],D=b[A+1-32],H=b[A+2-32],Z=b[A+3-32],J=b[A+4-32],te=b[A+5-32],ne=b[A+6-32],oe=b[A+7-32];b[A+0+0]=I+D+1>>1,b[A+1+0]=b[A+0+64]=D+H+1>>1,b[A+2+0]=b[A+1+64]=H+Z+1>>1,b[A+3+0]=b[A+2+64]=Z+J+1>>1,b[A+0+32]=Ft(I,D,H),b[A+1+32]=b[A+0+96]=Ft(D,H,Z),b[A+2+32]=b[A+1+96]=Ft(H,Z,J),b[A+3+32]=b[A+2+96]=Ft(Z,J,te),b[A+3+64]=Ft(J,te,ne),b[A+3+96]=Ft(te,ne,oe)}function im(b,A){var I=b[A-1+0],D=b[A-1+32],H=b[A-1+64],Z=b[A-1+96];b[A+0+0]=I+D+1>>1,b[A+2+0]=b[A+0+32]=D+H+1>>1,b[A+2+32]=b[A+0+64]=H+Z+1>>1,b[A+1+0]=Ft(I,D,H),b[A+3+0]=b[A+1+32]=Ft(D,H,Z),b[A+3+32]=b[A+1+64]=Ft(H,Z,Z),b[A+3+64]=b[A+2+64]=b[A+0+96]=b[A+1+96]=b[A+2+96]=b[A+3+96]=Z}function Fv(b,A){var I=b[A-1+0],D=b[A-1+32],H=b[A-1+64],Z=b[A-1+96],J=b[A-1-32],te=b[A+0-32],ne=b[A+1-32],oe=b[A+2-32];b[A+0+0]=b[A+2+32]=I+J+1>>1,b[A+0+32]=b[A+2+64]=D+I+1>>1,b[A+0+64]=b[A+2+96]=H+D+1>>1,b[A+0+96]=Z+H+1>>1,b[A+3+0]=Ft(te,ne,oe),b[A+2+0]=Ft(J,te,ne),b[A+1+0]=b[A+3+32]=Ft(I,J,te),b[A+1+32]=b[A+3+64]=Ft(D,I,J),b[A+1+64]=b[A+3+96]=Ft(H,D,I),b[A+1+96]=Ft(Z,H,D)}function th(b,A){var I;for(I=0;8>I;++I)r(b,A+32*I,b,A-32,8)}function YO(b,A){var I;for(I=0;8>I;++I)i(b,A,b[A-1],8),A+=32}function Mc(b,A,I){var D;for(D=0;8>D;++D)i(A,I+32*D,b,8)}function ZO(b,A){var I,D=8;for(I=0;8>I;++I)D+=b[A+I-32]+b[A-1+32*I];Mc(D>>4,b,A)}function Bv(b,A){var I,D=4;for(I=0;8>I;++I)D+=b[A+I-32];Mc(D>>3,b,A)}function Uv(b,A){var I,D=4;for(I=0;8>I;++I)D+=b[A-1+32*I];Mc(D>>3,b,A)}function R_(b,A){Mc(128,b,A)}function Lc(b,A,I){var D=b[A-I],H=b[A+0],Z=3*(H-D)+XO[1020+b[A-2*I]-b[A+I]],J=U_[112+(Z+4>>3)];b[A-I]=us[255+D+U_[112+(Z+3>>3)]],b[A+0]=us[255+H-J]}function zv(b,A,I,D){var H=b[A+0],Z=b[A+I];return Js[255+b[A-2*I]-b[A-I]]>D||Js[255+Z-H]>D}function am(b,A,I,D){return 4*Js[255+b[A-I]-b[A+0]]+Js[255+b[A-2*I]-b[A+I]]<=D}function Vv(b,A,I,D,H){var Z=b[A-3*I],J=b[A-2*I],te=b[A-I],ne=b[A+0],oe=b[A+I],pe=b[A+2*I],be=b[A+3*I];return 4*Js[255+te-ne]+Js[255+J-oe]>D?0:Js[255+b[A-4*I]-Z]<=H&&Js[255+Z-J]<=H&&Js[255+J-te]<=H&&Js[255+be-pe]<=H&&Js[255+pe-oe]<=H&&Js[255+oe-ne]<=H}function nh(b,A,I,D){var H=2*D+1;for(D=0;16>D;++D)am(b,A+D,I,H)&&Lc(b,A+D,I)}function Wv(b,A,I,D){var H=2*D+1;for(D=0;16>D;++D)am(b,A+D*I,1,H)&&Lc(b,A+D*I,1)}function j_(b,A,I,D){var H;for(H=3;0<H;--H)nh(b,A+=4*I,I,D)}function $_(b,A,I,D){var H;for(H=3;0<H;--H)Wv(b,A+=4,I,D)}function Dc(b,A,I,D,H,Z,J,te){for(Z=2*Z+1;0<H--;){if(Vv(b,A,I,Z,J))if(zv(b,A,I,te))Lc(b,A,I);else{var ne=b,oe=A,pe=I,be=ne[oe-2*pe],le=ne[oe-pe],ge=ne[oe+0],ve=ne[oe+pe],Se=ne[oe+2*pe],we=27*(Ce=XO[1020+3*(ge-le)+XO[1020+be-ve]])+63>>7,ke=18*Ce+63>>7,Ce=9*Ce+63>>7;ne[oe-3*pe]=us[255+ne[oe-3*pe]+Ce],ne[oe-2*pe]=us[255+be+ke],ne[oe-pe]=us[255+le+we],ne[oe+0]=us[255+ge-we],ne[oe+pe]=us[255+ve-ke],ne[oe+2*pe]=us[255+Se-Ce]}A+=D}}function Fc(b,A,I,D,H,Z,J,te){for(Z=2*Z+1;0<H--;){if(Vv(b,A,I,Z,J))if(zv(b,A,I,te))Lc(b,A,I);else{var ne=b,oe=A,pe=I,be=ne[oe-pe],le=ne[oe+0],ge=ne[oe+pe],ve=U_[112+(4+(Se=3*(le-be))>>3)],Se=U_[112+(Se+3>>3)],we=ve+1>>1;ne[oe-2*pe]=us[255+ne[oe-2*pe]+we],ne[oe-pe]=us[255+be+Se],ne[oe+0]=us[255+le-ve],ne[oe+pe]=us[255+ge-we]}A+=D}}function M_(b,A,I,D,H,Z){Dc(b,A,I,1,16,D,H,Z)}function rh(b,A,I,D,H,Z){Dc(b,A,1,I,16,D,H,Z)}function L_(b,A,I,D,H,Z){var J;for(J=3;0<J;--J)Fc(b,A+=4*I,I,1,16,D,H,Z)}function C(b,A,I,D,H,Z){var J;for(J=3;0<J;--J)Fc(b,A+=4,1,I,16,D,H,Z)}function W(b,A,I,D,H,Z,J,te){Dc(b,A,H,1,8,Z,J,te),Dc(I,D,H,1,8,Z,J,te)}function ce(b,A,I,D,H,Z,J,te){Dc(b,A,1,H,8,Z,J,te),Dc(I,D,1,H,8,Z,J,te)}function he(b,A,I,D,H,Z,J,te){Fc(b,A+4*H,H,1,8,Z,J,te),Fc(I,D+4*H,H,1,8,Z,J,te)}function ye(b,A,I,D,H,Z,J,te){Fc(b,A+4,1,H,8,Z,J,te),Fc(I,D+4,1,H,8,Z,J,te)}function Te(){this.ba=new ze,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ut,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ft(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vt(){this.ua=0,this.Wa=new Qe,this.vb=new Qe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new U}function Lt(){this.xb=this.a=0,this.l=new tm,this.ca=new ze,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vt,this.ab=0,this.gc=s(4,ft),this.Oc=0}function Gt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tm,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pn(b,A,I,D,H,Z,J){for(b=b==null?0:b[A+0],A=0;A<J;++A)H[Z+A]=b+I[D+A]&255,b=H[Z+A]}function yr(b,A,I,D,H,Z,J){var te;if(b==null)pn(null,null,I,D,H,Z,J);else for(te=0;te<J;++te)H[Z+te]=b[A+te]+I[D+te]&255}function Hr(b,A,I,D,H,Z,J){if(b==null)pn(null,null,I,D,H,Z,J);else{var te,ne=b[A+0],oe=ne,pe=ne;for(te=0;te<J;++te)oe=pe+(ne=b[A+te])-oe,pe=I[D+te]+(-256&oe?0>oe?0:255:oe)&255,oe=ne,H[Z+te]=pe}}function qn(b,A,I,D){var H=A.width,Z=A.o;if(e(b!=null&&A!=null),0>I||0>=D||I+D>Z)return null;if(!b.Cc){if(b.ga==null){var J;if(b.ga=new Gt,(J=b.ga==null)||(J=A.width*A.o,e(b.Gb.length==0),b.Gb=a(J),b.Uc=0,b.Gb==null?J=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,J=1),J=!J),!J){J=b.ga;var te=b.Fa,ne=b.P,oe=b.qc,pe=b.mb,be=b.nb,le=ne+1,ge=oe-1,ve=J.l;if(e(te!=null&&pe!=null&&A!=null),hf[0]=null,hf[1]=pn,hf[2]=yr,hf[3]=Hr,J.ca=pe,J.tb=be,J.c=A.width,J.i=A.height,e(0<J.c&&0<J.i),1>=oe)A=0;else if(J.$a=3&te[ne+0],J.Z=te[ne+0]>>2&3,J.Lc=te[ne+0]>>4&3,ne=te[ne+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||ne)A=0;else if(ve.put=Ot,ve.ac=Ws,ve.bc=os,ve.ma=J,ve.width=A.width,ve.height=A.height,ve.Da=A.Da,ve.v=A.v,ve.va=A.va,ve.j=A.j,ve.o=A.o,J.$a)e:{e(J.$a==1),A=Xd();t:for(;;){if(A==null){A=0;break e}if(e(J!=null),J.mc=A,A.c=J.c,A.i=J.i,A.l=J.l,A.l.ma=J,A.l.width=J.c,A.l.height=J.i,A.a=0,G(A.m,te,le,ge),!Ml(J.c,J.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&jo(A.s)?(J.ic=1,te=A.c*A.i,A.Ta=null,A.Ua=0,A.V=a(te),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(J.ic=0,A=Jd(A,J.c)),!A))break t;A=1;break e}J.mc=null,A=0}else A=ge>=J.c*J.i;J=!A}if(J)return null;b.ga.Lc!=1?b.Ga=0:D=Z-I}e(b.ga!=null),e(I+D<=Z);e:{if(A=(te=b.ga).c,Z=te.l.o,te.$a==0){if(le=b.rc,ge=b.Vc,ve=b.Fa,ne=b.P+1+I*A,oe=b.mb,pe=b.nb+I*A,e(ne<=b.P+b.qc),te.Z!=0)for(e(hf[te.Z]!=null),J=0;J<D;++J)hf[te.Z](le,ge,ve,ne,oe,pe,A),le=oe,ge=pe,pe+=A,ne+=A;else for(J=0;J<D;++J)r(oe,pe,ve,ne,A),le=oe,ge=pe,pe+=A,ne+=A;b.rc=le,b.Vc=ge}else{if(e(te.mc!=null),A=I+D,e((J=te.mc)!=null),e(A<=J.i),J.C>=A)A=1;else if(te.ic||Do(),te.ic){te=J.V,le=J.Ba,ge=J.c;var Se=J.i,we=(ve=1,ne=J.$/ge,oe=J.$%ge,pe=J.m,be=J.s,J.$),ke=ge*Se,Ce=ge*A,De=be.wc,Me=we<Ce?Li(be,oe,ne):null;e(we<=ke),e(A<=Se),e(jo(be));t:for(;;){for(;!pe.h&&we<Ce;){if(oe&De||(Me=Li(be,oe,ne)),e(Me!=null),$(pe),256>(Se=Ar(Me.G[0],Me.H[0],pe)))te[le+we]=Se,++we,++oe>=ge&&(oe=0,++ne<=A&&!(ne%16)&&$o(J,ne));else{if(!(280>Se)){ve=0;break t}Se=Hs(Se-256,pe);var bt,st=Ar(Me.G[4],Me.H[4],pe);if($(pe),!(we>=(st=qs(ge,st=Hs(st,pe)))&&ke-we>=Se)){ve=0;break t}for(bt=0;bt<Se;++bt)te[le+we+bt]=te[le+we+bt-st];for(we+=Se,oe+=Se;oe>=ge;)oe-=ge,++ne<=A&&!(ne%16)&&$o(J,ne);we<Ce&&oe&De&&(Me=Li(be,oe,ne))}e(pe.h==re(pe))}$o(J,ne>A?A:ne);break t}!ve||pe.h&&we<ke?(ve=0,J.a=pe.h?5:3):J.$=we,A=ve}else A=Mo(J,J.V,J.Ba,J.c,J.i,A,Jp);if(!A){D=0;break e}}I+D>=Z&&(b.Cc=1),D=1}if(!D)return null;if(b.Cc&&((D=b.ga)!=null&&(D.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+I*H}function oi(b,A,I,D,H,Z){for(;0<H--;){var J,te=b,ne=A+(I?1:0),oe=b,pe=A+(I?0:3);for(J=0;J<D;++J){var be=oe[pe+4*J];be!=255&&(be*=32897,te[ne+4*J+0]=te[ne+4*J+0]*be>>23,te[ne+4*J+1]=te[ne+4*J+1]*be>>23,te[ne+4*J+2]=te[ne+4*J+2]*be>>23)}A+=Z}}function qr(b,A,I,D,H){for(;0<D--;){var Z;for(Z=0;Z<I;++Z){var J=b[A+2*Z+0],te=15&(oe=b[A+2*Z+1]),ne=4369*te,oe=(240&oe|oe>>4)*ne>>16;b[A+2*Z+0]=(240&J|J>>4)*ne>>16&240|(15&J|J<<4)*ne>>16>>4&15,b[A+2*Z+1]=240&oe|te}A+=H}}function Di(b,A,I,D,H,Z,J,te){var ne,oe,pe=255;for(oe=0;oe<H;++oe){for(ne=0;ne<D;++ne){var be=b[A+ne];Z[J+4*ne]=be,pe&=be}A+=I,J+=te}return pe!=255}function Bc(b,A,I,D,H){var Z;for(Z=0;Z<H;++Z)I[D+Z]=b[A+Z]>>8}function Do(){n0=oi,I6=qr,R6=Di,j6=Bc}function Uc(b,A,I){R[b]=function(D,H,Z,J,te,ne,oe,pe,be,le,ge,ve,Se,we,ke,Ce,De){var Me,bt=De-1>>1,st=te[ne+0]|oe[pe+0]<<16,Zt=be[le+0]|ge[ve+0]<<16;e(D!=null);var pt=3*st+Zt+131074>>2;for(A(D[H+0],255&pt,pt>>16,Se,we),Z!=null&&(pt=3*Zt+st+131074>>2,A(Z[J+0],255&pt,pt>>16,ke,Ce)),Me=1;Me<=bt;++Me){var cn=te[ne+Me]|oe[pe+Me]<<16,ci=be[le+Me]|ge[ve+Me]<<16,Xt=st+cn+Zt+ci+524296,mt=Xt+2*(cn+Zt)>>3;pt=mt+st>>1,st=(Xt=Xt+2*(st+ci)>>3)+cn>>1,A(D[H+2*Me-1],255&pt,pt>>16,Se,we+(2*Me-1)*I),A(D[H+2*Me-0],255&st,st>>16,Se,we+(2*Me-0)*I),Z!=null&&(pt=Xt+Zt>>1,st=mt+ci>>1,A(Z[J+2*Me-1],255&pt,pt>>16,ke,Ce+(2*Me-1)*I),A(Z[J+2*Me+0],255&st,st>>16,ke,Ce+(2*Me+0)*I)),st=cn,Zt=ci}1&De||(pt=3*st+Zt+131074>>2,A(D[H+De-1],255&pt,pt>>16,Se,we+(De-1)*I),Z!=null&&(pt=3*Zt+st+131074>>2,A(Z[J+De-1],255&pt,pt>>16,ke,Ce+(De-1)*I)))}}function Hv(){Qs[z_]=ipe,Qs[V_]=H6,Qs[B6]=ape,Qs[W_]=q6,Qs[H_]=G6,Qs[JO]=K6,Qs[U6]=spe,Qs[QO]=H6,Qs[eT]=q6,Qs[q_]=G6,Qs[tT]=K6}function sm(b){return b&-16384?0>b?0:255:b>>ope}function nf(b,A){return sm((19077*b>>8)+(26149*A>>8)-14234)}function ih(b,A,I){return sm((19077*b>>8)-(6419*A>>8)-(13320*I>>8)+8708)}function ah(b,A){return sm((19077*b>>8)+(33050*A>>8)-17685)}function rf(b,A,I,D,H){D[H+0]=nf(b,I),D[H+1]=ih(b,A,I),D[H+2]=ah(b,A)}function Fi(b,A,I,D,H){D[H+0]=ah(b,A),D[H+1]=ih(b,A,I),D[H+2]=nf(b,I)}function sh(b,A,I,D,H){var Z=ih(b,A,I);A=Z<<3&224|ah(b,A)>>3,D[H+0]=248&nf(b,I)|Z>>5,D[H+1]=A}function oh(b,A,I,D,H){var Z=240&ah(b,A)|15;D[H+0]=240&nf(b,I)|ih(b,A,I)>>4,D[H+1]=Z}function qv(b,A,I,D,H){D[H+0]=255,rf(b,A,I,D,H+1)}function Gv(b,A,I,D,H){Fi(b,A,I,D,H),D[H+3]=255}function va(b,A,I,D,H){rf(b,A,I,D,H),D[H+3]=255}function zc(b,A,I){R[b]=function(D,H,Z,J,te,ne,oe,pe,be){for(var le=pe+(-2&be)*I;pe!=le;)A(D[H+0],Z[J+0],te[ne+0],oe,pe),A(D[H+1],Z[J+0],te[ne+0],oe,pe+I),H+=2,++J,++ne,pe+=2*I;1&be&&A(D[H+0],Z[J+0],te[ne+0],oe,pe)}}function om(b,A,I){return I==0?b==0?A==0?6:5:A==0?4:0:I}function D_(b,A,I,D,H){switch(b>>>30){case 3:fh(A,I,D,H,0);break;case 2:Xs(A,I,D,H);break;case 1:En(A,I,D,H)}}function Zs(b,A){var I,D,H=A.M,Z=A.Nb,J=b.oc,te=b.pc+40,ne=b.oc,oe=b.pc+584,pe=b.oc,be=b.pc+600;for(I=0;16>I;++I)J[te+32*I-1]=129;for(I=0;8>I;++I)ne[oe+32*I-1]=129,pe[be+32*I-1]=129;for(0<H?J[te-1-32]=ne[oe-1-32]=pe[be-1-32]=129:(i(J,te-32-1,127,21),i(ne,oe-32-1,127,9),i(pe,be-32-1,127,9)),D=0;D<b.za;++D){var le=A.ya[A.aa+D];if(0<D){for(I=-1;16>I;++I)r(J,te+32*I-4,J,te+32*I+12,4);for(I=-1;8>I;++I)r(ne,oe+32*I-4,ne,oe+32*I+4,4),r(pe,be+32*I-4,pe,be+32*I+4,4)}var ge=b.Gd,ve=b.Hd+D,Se=le.ad,we=le.Hc;if(0<H&&(r(J,te-32,ge[ve].y,0,16),r(ne,oe-32,ge[ve].f,0,8),r(pe,be-32,ge[ve].ea,0,8)),le.Za){var ke=J,Ce=te-32+16;for(0<H&&(D>=b.za-1?i(ke,Ce,ge[ve].y[15],4):r(ke,Ce,ge[ve+1].y,0,4)),I=0;4>I;I++)ke[Ce+128+I]=ke[Ce+256+I]=ke[Ce+384+I]=ke[Ce+0+I];for(I=0;16>I;++I,we<<=2)ke=J,Ce=te+Z6[I],Fo[le.Ob[I]](ke,Ce),D_(we,Se,16*+I,ke,Ce)}else if(ke=om(D,H,le.Ob[0]),df[ke](J,te),we!=0)for(I=0;16>I;++I,we<<=2)D_(we,Se,16*+I,J,te+Z6[I]);for(I=le.Gc,ke=om(D,H,le.Dd),Hc[ke](ne,oe),Hc[ke](pe,be),we=Se,ke=ne,Ce=oe,255&(le=0|I)&&(170&le?zl(we,256,ke,Ce):Un(we,256,ke,Ce)),le=pe,we=be,255&(I>>=8)&&(170&I?zl(Se,320,le,we):Un(Se,320,le,we)),H<b.Ub-1&&(r(ge[ve].y,0,J,te+480,16),r(ge[ve].f,0,ne,oe+224,8),r(ge[ve].ea,0,pe,be+224,8)),I=8*Z*b.B,ge=b.sa,ve=b.ta+16*D+16*Z*b.R,Se=b.qa,le=b.ra+8*D+I,we=b.Ha,ke=b.Ia+8*D+I,I=0;16>I;++I)r(ge,ve+I*b.R,J,te+32*I,16);for(I=0;8>I;++I)r(Se,le+I*b.B,ne,oe+32*I,8),r(we,ke+I*b.B,pe,be+32*I,8)}}function lh(b,A,I,D,H,Z,J,te,ne){var oe=[0],pe=[0],be=0,le=ne!=null?ne.kd:0,ge=ne??new $e;if(b==null||12>I)return 7;ge.data=b,ge.w=A,ge.ha=I,A=[A],I=[I],ge.gb=[ge.gb];e:{var ve=A,Se=I,we=ge.gb;if(e(b!=null),e(Se!=null),e(we!=null),we[0]=0,12<=Se[0]&&!n(b,ve[0],"RIFF")){if(n(b,ve[0]+8,"WEBP")){we=3;break e}var ke=Oe(b,ve[0]+4);if(12>ke||4294967286<ke){we=3;break e}if(le&&ke>Se[0]-8){we=7;break e}we[0]=ke,ve[0]+=12,Se[0]-=12}we=0}if(we!=0)return we;for(ke=0<ge.gb[0],I=I[0];;){e:{var Ce=b;Se=A,we=I;var De=oe,Me=pe,bt=ve=[0];if((pt=be=[be])[0]=0,8>we[0])we=7;else{if(!n(Ce,Se[0],"VP8X")){if(Oe(Ce,Se[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var st=Oe(Ce,Se[0]+8),Zt=1+_e(Ce,Se[0]+12);if(2147483648<=Zt*(Ce=1+_e(Ce,Se[0]+15))){we=3;break e}bt!=null&&(bt[0]=st),De!=null&&(De[0]=Zt),Me!=null&&(Me[0]=Ce),Se[0]+=18,we[0]-=18,pt[0]=1}we=0}}if(be=be[0],ve=ve[0],we!=0)return we;if(Se=!!(2&ve),!ke&&be)return 3;if(Z!=null&&(Z[0]=!!(16&ve)),J!=null&&(J[0]=Se),te!=null&&(te[0]=0),J=oe[0],ve=pe[0],be&&Se&&ne==null){we=0;break}if(4>I){we=7;break}if(ke&&be||!ke&&!be&&!n(b,A[0],"ALPH")){I=[I],ge.na=[ge.na],ge.P=[ge.P],ge.Sa=[ge.Sa];e:{st=b,we=A,ke=I;var pt=ge.gb;De=ge.na,Me=ge.P,bt=ge.Sa,Zt=22,e(st!=null),e(ke!=null),Ce=we[0];var cn=ke[0];for(e(De!=null),e(bt!=null),De[0]=null,Me[0]=null,bt[0]=0;;){if(we[0]=Ce,ke[0]=cn,8>cn){we=7;break e}var ci=Oe(st,Ce+4);if(4294967286<ci){we=3;break e}var Xt=8+ci+1&-2;if(Zt+=Xt,0<pt&&Zt>pt){we=3;break e}if(!n(st,Ce,"VP8 ")||!n(st,Ce,"VP8L")){we=0;break e}if(cn[0]<Xt){we=7;break e}n(st,Ce,"ALPH")||(De[0]=st,Me[0]=Ce+8,bt[0]=ci),Ce+=Xt,cn-=Xt}}if(I=I[0],ge.na=ge.na[0],ge.P=ge.P[0],ge.Sa=ge.Sa[0],we!=0)break}I=[I],ge.Ja=[ge.Ja],ge.xa=[ge.xa];e:if(pt=b,we=A,ke=I,De=ge.gb[0],Me=ge.Ja,bt=ge.xa,st=we[0],Ce=!n(pt,st,"VP8 "),Zt=!n(pt,st,"VP8L"),e(pt!=null),e(ke!=null),e(Me!=null),e(bt!=null),8>ke[0])we=7;else{if(Ce||Zt){if(pt=Oe(pt,st+4),12<=De&&pt>De-12){we=3;break e}if(le&&pt>ke[0]-8){we=7;break e}Me[0]=pt,we[0]+=8,ke[0]-=8,bt[0]=Zt}else bt[0]=5<=ke[0]&&pt[st+0]==47&&!(pt[st+4]>>5),Me[0]=ke[0];we=0}if(I=I[0],ge.Ja=ge.Ja[0],ge.xa=ge.xa[0],A=A[0],we!=0)break;if(4294967286<ge.Ja)return 3;if(te==null||Se||(te[0]=ge.xa?2:1),J=[J],ve=[ve],ge.xa){if(5>I){we=7;break}te=J,le=ve,Se=Z,b==null||5>I?b=0:5<=I&&b[A+0]==47&&!(b[A+4]>>5)?(ke=[0],pt=[0],De=[0],G(Me=new K,b,A,I),Ic(Me,ke,pt,De)?(te!=null&&(te[0]=ke[0]),le!=null&&(le[0]=pt[0]),Se!=null&&(Se[0]=De[0]),b=1):b=0):b=0}else{if(10>I){we=7;break}te=ve,b==null||10>I||!O_(b,A+3,I-3)?b=0:(le=b[A+0]|b[A+1]<<8|b[A+2]<<16,Se=16383&(b[A+7]<<8|b[A+6]),b=16383&(b[A+9]<<8|b[A+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=ge.Ja||!Se||!b?b=0:(J&&(J[0]=Se),te&&(te[0]=b),b=1))}if(!b||(J=J[0],ve=ve[0],be&&(oe[0]!=J||pe[0]!=ve)))return 3;ne!=null&&(ne[0]=ge,ne.offset=A-ne.w,e(4294967286>A-ne.w),e(ne.offset==ne.ha-I));break}return we==0||we==7&&be&&ne==null?(Z!=null&&(Z[0]|=ge.na!=null&&0<ge.na.length),D!=null&&(D[0]=J),H!=null&&(H[0]=ve),0):we}function Kv(b,A,I){var D=A.width,H=A.height,Z=0,J=0,te=D,ne=H;if(A.Da=b!=null&&0<b.Da,A.Da&&(te=b.cd,ne=b.bd,Z=b.v,J=b.j,11>I||(Z&=-2,J&=-2),0>Z||0>J||0>=te||0>=ne||Z+te>D||J+ne>H))return 0;if(A.v=Z,A.j=J,A.va=Z+te,A.o=J+ne,A.U=te,A.T=ne,A.da=b!=null&&0<b.da,A.da){if(!tt(te,ne,I=[b.ib],Z=[b.hb]))return 0;A.ib=I[0],A.hb=Z[0]}return A.ob=b!=null&&b.ob,A.Kb=b==null||!b.Sd,A.da&&(A.ob=A.ib<3*D/4&&A.hb<3*H/4,A.Kb=0),1}function Yv(b){if(b==null)return 2;if(11>b.S){var A=b.f.RGBA;A.fb+=(b.height-1)*A.A,A.A=-A.A}else A=b.f.kb,b=b.height,A.O+=(b-1)*A.fa,A.fa=-A.fa,A.N+=(b-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(b-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(b-1)*A.lb,A.lb=-A.lb);return 0}function af(b,A,I,D){if(D==null||0>=b||0>=A)return 2;if(I!=null){if(I.Da){var H=I.cd,Z=I.bd,J=-2&I.v,te=-2&I.j;if(0>J||0>te||0>=H||0>=Z||J+H>b||te+Z>A)return 2;b=H,A=Z}if(I.da){if(!tt(b,A,H=[I.ib],Z=[I.hb]))return 2;b=H[0],A=Z[0]}}D.width=b,D.height=A;e:{var ne=D.width,oe=D.height;if(b=D.S,0>=ne||0>=oe||!(b>=z_&&13>b))b=2;else{if(0>=D.Rd&&D.sd==null){J=Z=H=A=0;var pe=(te=ne*X6[b])*oe;if(11>b||(Z=(oe+1)/2*(A=(ne+1)/2),b==12&&(J=(H=ne)*oe)),(oe=a(pe+2*Z+J))==null){b=1;break e}D.sd=oe,11>b?((ne=D.f.RGBA).eb=oe,ne.fb=0,ne.A=te,ne.size=pe):((ne=D.f.kb).y=oe,ne.O=0,ne.fa=te,ne.Fd=pe,ne.f=oe,ne.N=0+pe,ne.Ab=A,ne.Cd=Z,ne.ea=oe,ne.W=0+pe+Z,ne.Db=A,ne.Ed=Z,b==12&&(ne.F=oe,ne.J=0+pe+2*Z),ne.Tc=J,ne.lb=H)}if(A=1,H=D.S,Z=D.width,J=D.height,H>=z_&&13>H)if(11>H)b=D.f.RGBA,A&=(te=Math.abs(b.A))*(J-1)+Z<=b.size,A&=te>=Z*X6[H],A&=b.eb!=null;else{b=D.f.kb,te=(Z+1)/2,pe=(J+1)/2,ne=Math.abs(b.fa),oe=Math.abs(b.Ab);var be=Math.abs(b.Db),le=Math.abs(b.lb),ge=le*(J-1)+Z;A&=ne*(J-1)+Z<=b.Fd,A&=oe*(pe-1)+te<=b.Cd,A=(A&=be*(pe-1)+te<=b.Ed)&ne>=Z&oe>=te&be>=te,A&=b.y!=null,A&=b.f!=null,A&=b.ea!=null,H==12&&(A&=le>=Z,A&=ge<=b.Tc,A&=b.F!=null)}else A=0;b=A?0:2}}return b!=0||I!=null&&I.fd&&(b=Yv(D)),b}var ch=64,ls=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cs=24,sf=32,Vc=8,of=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(b){return b},R.Predictor2=function(b,A,I){return A[I+0]},R.Predictor3=function(b,A,I){return A[I+1]},R.Predictor4=function(b,A,I){return A[I-1]},R.Predictor5=function(b,A,I){return Ie(Ie(b,A[I+1]),A[I+0])},R.Predictor6=function(b,A,I){return Ie(b,A[I-1])},R.Predictor7=function(b,A,I){return Ie(b,A[I+0])},R.Predictor8=function(b,A,I){return Ie(A[I-1],A[I+0])},R.Predictor9=function(b,A,I){return Ie(A[I+0],A[I+1])},R.Predictor10=function(b,A,I){return Ie(Ie(b,A[I-1]),Ie(A[I+0],A[I+1]))},R.Predictor11=function(b,A,I){var D=A[I+0];return 0>=Ne(D>>24&255,b>>24&255,(A=A[I-1])>>24&255)+Ne(D>>16&255,b>>16&255,A>>16&255)+Ne(D>>8&255,b>>8&255,A>>8&255)+Ne(255&D,255&b,255&A)?D:b},R.Predictor12=function(b,A,I){var D=A[I+0];return(Ye((b>>24&255)+(D>>24&255)-((A=A[I-1])>>24&255))<<24|Ye((b>>16&255)+(D>>16&255)-(A>>16&255))<<16|Ye((b>>8&255)+(D>>8&255)-(A>>8&255))<<8|Ye((255&b)+(255&D)-(255&A)))>>>0},R.Predictor13=function(b,A,I){var D=A[I-1];return(je((b=Ie(b,A[I+0]))>>24&255,D>>24&255)<<24|je(b>>16&255,D>>16&255)<<16|je(b>>8&255,D>>8&255)<<8|je(255&b,255&D))>>>0};var Zv=R.PredictorAdd0;R.PredictorAdd1=Ke,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var lm=R.PredictorAdd2;dt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),dt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var $r,F_=R.ColorIndexInverseTransform,Bl=R.MapARGB,Ul=R.VP8LColorIndexInverseTransformAlpha,Xv=R.MapAlpha,Jv=R.VP8LPredictorsAdd=[];Jv.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Qv,e0,lf,cf,uf,uh,ff,fh,Xs,zl,En,Un,Mr,li,Wc,t0,cm,B_,k6,O6,T6,C6,P6,N6,n0,I6,R6,j6,$6=a(511),M6=a(2041),L6=a(225),D6=a(767),F6=0,XO=M6,U_=L6,us=D6,Js=$6,z_=0,V_=1,B6=2,W_=3,H_=4,JO=5,U6=6,QO=7,eT=8,q_=9,tT=10,Whe=[2,3,7],Hhe=[3,3,11],z6=[280,256,256,256,40],qhe=[0,1,1,1,0],Ghe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Khe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yhe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zhe=8,nT=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rT=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],r0=null,Xhe=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Jhe=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],V6=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Qhe=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],epe=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tpe=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],npe=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],df=[],Fo=[],Hc=[],rpe=1,W6=2,hf=[],Qs=[];Uc("UpsampleRgbLinePair",rf,3),Uc("UpsampleBgrLinePair",Fi,3),Uc("UpsampleRgbaLinePair",va,4),Uc("UpsampleBgraLinePair",Gv,4),Uc("UpsampleArgbLinePair",qv,4),Uc("UpsampleRgba4444LinePair",oh,2),Uc("UpsampleRgb565LinePair",sh,2);var ipe=R.UpsampleRgbLinePair,ape=R.UpsampleBgrLinePair,H6=R.UpsampleRgbaLinePair,q6=R.UpsampleBgraLinePair,G6=R.UpsampleArgbLinePair,K6=R.UpsampleRgba4444LinePair,spe=R.UpsampleRgb565LinePair,G_=16,K_=1<<G_-1,i0=-227,iT=482,ope=6,Y6=0,lpe=a(256),cpe=a(256),upe=a(256),fpe=a(256),dpe=a(iT-i0),hpe=a(iT-i0);zc("YuvToRgbRow",rf,3),zc("YuvToBgrRow",Fi,3),zc("YuvToRgbaRow",va,4),zc("YuvToBgraRow",Gv,4),zc("YuvToArgbRow",qv,4),zc("YuvToRgba4444Row",oh,2),zc("YuvToRgb565Row",sh,2);var Z6=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Y_=[0,2,8],ppe=[8,7,6,4,4,2,2,2,1,1,1,1],mpe=1;this.WebPDecodeRGBA=function(b,A,I,D,H){var Z=V_,J=new Te,te=new ze;J.ba=te,te.S=Z,te.width=[te.width],te.height=[te.height];var ne=te.width,oe=te.height,pe=new Xe;if(pe==null||b==null)var be=2;else e(pe!=null),be=lh(b,A,I,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(be!=0?ne=0:(ne!=null&&(ne[0]=pe.width[0]),oe!=null&&(oe[0]=pe.height[0]),ne=1),ne){te.width=te.width[0],te.height=te.height[0],D!=null&&(D[0]=te.width),H!=null&&(H[0]=te.height);e:{if(D=new tm,(H=new $e).data=b,H.w=A,H.ha=I,H.kd=1,A=[0],e(H!=null),((b=lh(H.data,H.w,H.ha,null,null,null,A,null,H))==0||b==7)&&A[0]&&(b=4),(A=b)==0){if(e(J!=null),D.data=H.data,D.w=H.w+H.offset,D.ha=H.ha-H.offset,D.put=Ot,D.ac=Ws,D.bc=os,D.ma=J,H.xa){if((b=Xd())==null){J=1;break e}if(function(le,ge){var ve=[0],Se=[0],we=[0];t:for(;;){if(le==null)return 0;if(ge==null)return le.a=2,0;if(le.l=ge,le.a=0,G(le.m,ge.data,ge.w,ge.ha),!Ic(le.m,ve,Se,we)){le.a=3;break t}if(le.xb=W6,ge.width=ve[0],ge.height=Se[0],!Ml(ve[0],Se[0],1,le,null))break t;return 1}return e(le.a!=0),0}(b,D)){if(D=(A=af(D.width,D.height,J.Oa,J.ba))==0){t:{D=b;n:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((I=D.l)!=null),e((H=I.ma)!=null),D.xb!=0){if(D.ca=H.ba,D.tb=H.tb,e(D.ca!=null),!Kv(H.Oa,I,W_)){D.a=2;break n}if(!Jd(D,I.width)||I.da)break n;if((I.da||Tt(D.ca.S))&&Do(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&Do()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!ee(D.s.vb,D.s.Wa.Xa)){D.a=1;break n}D.xb=0}if(!Mo(D,D.V,D.Ba,D.c,D.i,I.o,tf))break n;H.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(A=b.a)}else A=b.a}else{if((b=new MO)==null){J=1;break e}if(b.Fa=H.na,b.P=H.P,b.qc=H.Sa,Dl(b,D)){if((A=af(D.width,D.height,J.Oa,J.ba))==0){if(b.Aa=0,I=J.Oa,e((H=b)!=null),I!=null){if(0<(ne=0>(ne=I.Md)?0:100<ne?255:255*ne/100)){for(oe=pe=0;4>oe;++oe)12>(be=H.pb[oe]).lc&&(be.ia=ne*ppe[0>be.lc?0:be.lc]>>3),pe|=be.ia;pe&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=I.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(le,ge){if(le==null)return 0;if(ge==null)return Wr(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!Dl(le,ge))return 0;if(e(le.cb),ge.ac==null||ge.ac(ge)){ge.ob&&(le.L=0);var ve=Y_[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=ge.v-ve>>4,le.zb=ge.j-ve>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=ge.o+15+ve>>4,le.Hb=ge.va+15+ve>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var Se=le.ed;for(ve=0;4>ve;++ve){var we;if(le.Qa.Cb){var ke=le.Qa.Lb[ve];le.Qa.Fb||(ke+=Se.Tb)}else ke=Se.Tb;for(we=0;1>=we;++we){var Ce=le.gd[ve][we],De=ke;if(Se.Pc&&(De+=Se.vd[0],we&&(De+=Se.od[0])),0<(De=0>De?0:63<De?63:De)){var Me=De;0<Se.wb&&(Me=4<Se.wb?Me>>2:Me>>1)>9-Se.wb&&(Me=9-Se.wb),1>Me&&(Me=1),Ce.dd=Me,Ce.tc=2*De+Me,Ce.ld=40<=De?2:15<=De?1:0}else Ce.tc=0;Ce.La=we}}}ve=0}else Wr(le,6,"Frame setup failed"),ve=le.a;if(ve=ve==0){if(ve){le.$c=0,0<le.Aa||(le.Ic=mpe);t:{ve=le.Ic,Se=4*(Me=le.za);var bt=32*Me,st=Me+1,Zt=0<le.L?Me*(0<le.Aa?2:1):0,pt=(le.Aa==2?2:1)*Me;if((Ce=Se+832+(we=3*(16*ve+Y_[le.L])/2*bt)+(ke=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=Ce)ve=0;else{if(Ce>le.Vb){if(le.Vb=0,le.Ec=a(Ce),le.Fc=0,le.Ec==null){ve=Wr(le,1,"no memory during frame initialization.");break t}le.Vb=Ce}Ce=le.Ec,De=le.Fc,le.Ac=Ce,le.Bc=De,De+=Se,le.Gd=s(bt,A_),le.Hd=0,le.rb=s(st+1,$v),le.sb=1,le.wa=Zt?s(Zt,Ks):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=Me),e(!0),le.oc=Ce,le.pc=De,De+=832,le.ya=s(pt,Mv),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=Me),le.R=16*Me,le.B=8*Me,Me=(bt=Y_[le.L])*le.R,bt=bt/2*le.B,le.sa=Ce,le.ta=De+Me,le.qa=le.sa,le.ra=le.ta+16*ve*le.R+bt,le.Ha=le.qa,le.Ia=le.ra+8*ve*le.B+bt,le.$c=0,De+=we,le.mb=ke?Ce:null,le.nb=ke?De:null,e(De+ke<=le.Fc+le.Vb),T_(le),i(le.Ac,le.Bc,0,Se),ve=1}}if(ve){if(ge.ka=0,ge.y=le.sa,ge.O=le.ta,ge.f=le.qa,ge.N=le.ra,ge.ea=le.Ha,ge.Vd=le.Ia,ge.fa=le.R,ge.Rc=le.B,ge.F=null,ge.J=0,!F6){for(ve=-255;255>=ve;++ve)$6[255+ve]=0>ve?-ve:ve;for(ve=-1020;1020>=ve;++ve)M6[1020+ve]=-128>ve?-128:127<ve?127:ve;for(ve=-112;112>=ve;++ve)L6[112+ve]=-16>ve?-16:15<ve?15:ve;for(ve=-255;510>=ve;++ve)D6[255+ve]=0>ve?0:255<ve?255:ve;F6=1}ff=rm,fh=DO,zl=Fl,En=P_,Un=N_,Xs=LO,Mr=M_,li=rh,Wc=W,t0=ce,cm=L_,B_=C,k6=he,O6=ye,T6=nh,C6=Wv,P6=j_,N6=$_,Fo[0]=qO,Fo[1]=FO,Fo[2]=WO,Fo[3]=HO,Fo[4]=jc,Fo[5]=GO,Fo[6]=$c,Fo[7]=KO,Fo[8]=Fv,Fo[9]=im,df[0]=zO,df[1]=UO,df[2]=Lv,df[3]=I_,df[4]=eh,df[5]=Dv,df[6]=VO,Hc[0]=ZO,Hc[1]=BO,Hc[2]=th,Hc[3]=YO,Hc[4]=Uv,Hc[5]=Bv,Hc[6]=R_,ve=1}else ve=0}ve&&(ve=function(cn,ci){for(cn.M=0;cn.M<cn.Va;++cn.M){var Xt,mt=cn.Jc[cn.M&cn.Xb],Je=cn.m,Lr=cn;for(Xt=0;Xt<Lr.za;++Xt){var Ht=Je,hn=Lr,tr=hn.Ac,Bi=hn.Bc+4*Xt,wa=hn.zc,kr=hn.ya[hn.aa+Xt];if(hn.Qa.Bb?kr.$b=fe(Ht,hn.Pa.jb[0])?2+fe(Ht,hn.Pa.jb[2]):fe(Ht,hn.Pa.jb[1]):kr.$b=0,hn.kc&&(kr.Ad=fe(Ht,hn.Bd)),kr.Za=!fe(Ht,145)+0,kr.Za){var ta=kr.Ob,ba=0;for(hn=0;4>hn;++hn){var ui,mn=wa[0+hn];for(ui=0;4>ui;++ui){mn=epe[tr[Bi+ui]][mn];for(var Tn=V6[fe(Ht,mn[0])];0<Tn;)Tn=V6[2*Tn+fe(Ht,mn[Tn])];mn=-Tn,tr[Bi+ui]=mn}r(ta,ba,tr,Bi,4),ba+=4,wa[0+hn]=mn}}else mn=fe(Ht,156)?fe(Ht,128)?1:3:fe(Ht,163)?2:0,kr.Ob[0]=mn,i(tr,Bi,mn,4),i(wa,0,mn,4);kr.Dd=fe(Ht,142)?fe(Ht,114)?fe(Ht,183)?1:3:2:0}if(Lr.m.Ka)return Wr(cn,7,"Premature end-of-partition0 encountered.");for(;cn.ja<cn.za;++cn.ja){if(Lr=mt,Ht=(Je=cn).rb[Je.sb-1],tr=Je.rb[Je.sb+Je.ja],Xt=Je.ya[Je.aa+Je.ja],Bi=Je.kc?Xt.Ad:0)Ht.la=tr.la=0,Xt.Za||(Ht.Na=tr.Na=0),Xt.Hc=0,Xt.Gc=0,Xt.ia=0;else{var Or,Cn;if(Ht=tr,tr=Lr,Bi=Je.Pa.Xc,wa=Je.ya[Je.aa+Je.ja],kr=Je.pb[wa.$b],hn=wa.ad,ta=0,ba=Je.rb[Je.sb-1],mn=ui=0,i(hn,ta,0,384),wa.Za)var Ui=0,Bo=Bi[3];else{Tn=a(16);var Dr=Ht.Na+ba.Na;if(Dr=r0(tr,Bi[1],Dr,kr.Eb,0,Tn,0),Ht.Na=ba.Na=(0<Dr)+0,1<Dr)ff(Tn,0,hn,ta);else{var za=Tn[0]+3>>3;for(Tn=0;256>Tn;Tn+=16)hn[ta+Tn]=za}Ui=1,Bo=Bi[0]}var zn=15&Ht.la,fi=15&ba.la;for(Tn=0;4>Tn;++Tn){var fs=1&fi;for(za=Cn=0;4>za;++za)zn=zn>>1|(fs=(Dr=r0(tr,Bo,Dr=fs+(1&zn),kr.Sc,Ui,hn,ta))>Ui)<<7,Cn=Cn<<2|(3<Dr?3:1<Dr?2:hn[ta+0]!=0),ta+=16;zn>>=4,fi=fi>>1|fs<<7,ui=(ui<<8|Cn)>>>0}for(Bo=zn,Ui=fi>>4,Or=0;4>Or;Or+=2){for(Cn=0,zn=Ht.la>>4+Or,fi=ba.la>>4+Or,Tn=0;2>Tn;++Tn){for(fs=1&fi,za=0;2>za;++za)Dr=fs+(1&zn),zn=zn>>1|(fs=0<(Dr=r0(tr,Bi[2],Dr,kr.Qc,0,hn,ta)))<<3,Cn=Cn<<2|(3<Dr?3:1<Dr?2:hn[ta+0]!=0),ta+=16;zn>>=2,fi=fi>>1|fs<<5}mn|=Cn<<4*Or,Bo|=zn<<4<<Or,Ui|=(240&fi)<<Or}Ht.la=Bo,ba.la=Ui,wa.Hc=ui,wa.Gc=mn,wa.ia=43690&mn?0:kr.ia,Bi=!(ui|mn)}if(0<Je.L&&(Je.wa[Je.Y+Je.ja]=Je.gd[Xt.$b][Xt.Za],Je.wa[Je.Y+Je.ja].La|=!Bi),Lr.Ka)return Wr(cn,7,"Premature end-of-file encountered.")}if(T_(cn),Je=ci,Lr=1,Xt=(mt=cn).D,Ht=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)t:{if(Xt.M=mt.M,Xt.uc=Ht,Zs(mt,Xt),Lr=1,Xt=(Cn=mt.D).Nb,Ht=(mn=Y_[mt.L])*mt.R,tr=mn/2*mt.B,Tn=16*Xt*mt.R,za=8*Xt*mt.B,Bi=mt.sa,wa=mt.ta-Ht+Tn,kr=mt.qa,hn=mt.ra-tr+za,ta=mt.Ha,ba=mt.Ia-tr+za,fi=(zn=Cn.M)==0,ui=zn>=mt.Va-1,mt.Aa==2&&Zs(mt,Cn),Cn.uc)for(fs=(Dr=mt).D.M,e(Dr.D.uc),Cn=Dr.yb;Cn<Dr.Hb;++Cn){Ui=Cn,Bo=fs;var _a=(ds=(zi=Dr).D).Nb;Or=zi.R;var ds=ds.wa[ds.Y+Ui],hs=zi.sa,Va=zi.ta+16*_a*Or+16*Ui,ps=ds.dd,Gn=ds.tc;if(Gn!=0)if(e(3<=Gn),zi.L==1)0<Ui&&C6(hs,Va,Or,Gn+4),ds.La&&N6(hs,Va,Or,Gn),0<Bo&&T6(hs,Va,Or,Gn+4),ds.La&&P6(hs,Va,Or,Gn);else{var ms=zi.B,Uo=zi.qa,dh=zi.ra+8*_a*ms+8*Ui,qc=zi.Ha,zi=zi.Ia+8*_a*ms+8*Ui;_a=ds.ld,0<Ui&&(li(hs,Va,Or,Gn+4,ps,_a),t0(Uo,dh,qc,zi,ms,Gn+4,ps,_a)),ds.La&&(B_(hs,Va,Or,Gn,ps,_a),O6(Uo,dh,qc,zi,ms,Gn,ps,_a)),0<Bo&&(Mr(hs,Va,Or,Gn+4,ps,_a),Wc(Uo,dh,qc,zi,ms,Gn+4,ps,_a)),ds.La&&(cm(hs,Va,Or,Gn,ps,_a),k6(Uo,dh,qc,zi,ms,Gn,ps,_a))}}if(mt.ia&&alert("todo:DitherRow"),Je.put!=null){if(Cn=16*zn,zn=16*(zn+1),fi?(Je.y=mt.sa,Je.O=mt.ta+Tn,Je.f=mt.qa,Je.N=mt.ra+za,Je.ea=mt.Ha,Je.W=mt.Ia+za):(Cn-=mn,Je.y=Bi,Je.O=wa,Je.f=kr,Je.N=hn,Je.ea=ta,Je.W=ba),ui||(zn-=mn),zn>Je.o&&(zn=Je.o),Je.F=null,Je.J=null,mt.Fa!=null&&0<mt.Fa.length&&Cn<zn&&(Je.J=qn(mt,Je,Cn,zn-Cn),Je.F=mt.mb,Je.F==null&&Je.F.length==0)){Lr=Wr(mt,3,"Could not decode alpha data.");break t}Cn<Je.j&&(mn=Je.j-Cn,Cn=Je.j,e(!(1&mn)),Je.O+=mt.R*mn,Je.N+=mt.B*(mn>>1),Je.W+=mt.B*(mn>>1),Je.F!=null&&(Je.J+=Je.width*mn)),Cn<zn&&(Je.O+=Je.v,Je.N+=Je.v>>1,Je.W+=Je.v>>1,Je.F!=null&&(Je.J+=Je.v),Je.ka=Cn-Je.j,Je.U=Je.va-Je.v,Je.T=zn-Cn,Lr=Je.put(Je))}Xt+1!=mt.Ic||ui||(r(mt.sa,mt.ta-Ht,Bi,wa+16*mt.R,Ht),r(mt.qa,mt.ra-tr,kr,hn+8*mt.B,tr),r(mt.Ha,mt.Ia-tr,ta,ba+8*mt.B,tr))}if(!Lr)return Wr(cn,6,"Output aborted.")}return 1}(le,ge)),ge.bc!=null&&ge.bc(ge),ve&=1}return ve?(le.cb=0,ve):0})(b,D)||(A=b.a)}}else A=b.a}A==0&&J.Oa!=null&&J.Oa.fd&&(A=Yv(J.ba))}J=A}Z=J!=0?null:11>Z?te.f.RGBA.eb:te.f.kb.y}else Z=null;return Z};var X6=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(R,M){for(var N="",j=0;j<4;j++)N+=String.fromCharCode(R[M++]);return N}function u(R,M){return R[M+0]|R[M+1]<<8}function f(R,M){return(R[M+0]|R[M+1]<<8|R[M+2]<<16)>>>0}function d(R,M){return(R[M+0]|R[M+1]<<8|R[M+2]<<16|R[M+3]<<24)>>>0}new l;var h=[0],p=[0],m=[],y=new l,g=t,v=function(R,M){var N={},j=0,U=!1,B=0,V=0;if(N.frames=[],!function(L,K){for(var Q=0;Q<4;Q++)if(L[K+Q]!="RIFF".charCodeAt(Q))return!0;return!1}(R,M)){for(d(R,M+=4),M+=8;M<R.length;){var Y=c(R,M),X=d(R,M+=4);M+=4;var z=X+(1&X);switch(Y){case"VP8 ":case"VP8L":N.frames[j]===void 0&&(N.frames[j]={}),(ue=N.frames[j]).src_off=U?V:M-8,ue.src_size=B+X+8,j++,U&&(U=!1,B=0,V=0);break;case"VP8X":(ue=N.header={}).feature_flags=R[M];var G=M+4;ue.canvas_width=1+f(R,G),G+=3,ue.canvas_height=1+f(R,G),G+=3;break;case"ALPH":U=!0,B=z+8,V=M-8;break;case"ANIM":(ue=N.header).bgcolor=d(R,M),G=M+4,ue.loop_count=u(R,G),G+=2;break;case"ANMF":var ae,ue;(ue=N.frames[j]={}).offset_x=2*f(R,M),M+=3,ue.offset_y=2*f(R,M),M+=3,ue.width=1+f(R,M),M+=3,ue.height=1+f(R,M),M+=3,ue.duration=f(R,M),M+=3,ae=R[M++],ue.dispose=1&ae,ue.blend=ae>>1&1}Y!="ANMF"&&(M+=z)}return N}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var w=v.header?v.header:null,_=v.frames?v.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var x=0;x<_.length&&_[x].blend!=0;x++);}var E=_[0],T=y.WebPDecodeRGBA(g,E.src_off,E.src_size,p,h);E.rgba=T,E.imgwidth=p[0],E.imgheight=h[0];for(var O=0;O<p[0]*h[0]*4;O++)m[O]=T[O];return this.width=p,this.height=h,this.data=m,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function h0t(){var t,e=this.internal.__metadata__.metadata,n=unescape(encodeURIComponent(e));t=this.internal.__metadata__.rawXml?n:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+t.length+" >>"),this.internal.write("stream"),this.internal.write(t),this.internal.write("endstream"),this.internal.write("endobj")}function p0t(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(t){var e,n,r,i,a,s,o,l,c,u=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new s,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new s,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=L;Object.defineProperty(this,"pdf",{get:function(){return K}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(ee){Q=!!ee}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(ee){re=!!ee}});var F=0;Object.defineProperty(this,"posX",{get:function(){return F},set:function(ee){isNaN(ee)||(F=ee)}});var $=0;Object.defineProperty(this,"posY",{get:function(){return $},set:function(ee){isNaN(ee)||($=ee)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ee){var Ee;typeof ee=="number"?Ee=[ee,ee,ee,ee]:((Ee=new Array(4))[0]=ee[0],Ee[1]=ee.length>=2?ee[1]:Ee[0],Ee[2]=ee.length>=3?ee[2]:Ee[0],Ee[3]=ee.length>=4?ee[3]:Ee[1]),c.margin=Ee}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(ee){ie=ee}});var q=0;Object.defineProperty(this,"lastBreak",{get:function(){return q},set:function(ee){q=ee}});var fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return fe},set:function(ee){fe=ee}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ee){ee instanceof u&&(c=ee)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ee){c.path=ee}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(ee){me=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Ee;Ee=d(ee),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Ee=d(ee);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var de=null,_e=null,Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(ee){de=null,_e=null,Oe=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Ee;if(this.ctx.font=ee,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var Qe=Ee[1];Ee[2];var tt=Ee[3],Pe=Ee[4];Ee[5];var xe=Ee[6],Ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(Ze==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:Ze==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var Re=function(dt){var gr,ln,Kt=[],Yt=dt.trim();if(Yt==="")return xN;if(Yt in RG)return[RG[Yt]];for(;Yt!=="";){switch(ln=null,gr=(Yt=$G(Yt)).charAt(0)){case'"':case"'":ln=o0t(Yt.substring(1),gr);break;default:ln=l0t(Yt)}if(ln===null||(Kt.push(ln[0]),(Yt=$G(ln[1]))!==""&&Yt.charAt(0)!==","))return xN;Yt=Yt.replace(/^,/,"")}return Kt}(xe);if(this.fontFaces){var Ie=function(dt,gr){var ln=dt.getFontList(),Kt=JSON.stringify(ln);if(de===null||_e!==Kt){var Yt=function(Hn){var St=[];return Object.keys(Hn).forEach(function(Mn){Hn[Mn].forEach(function(Tt){var Ge=null;switch(Tt){case"bold":Ge={family:Mn,weight:"bold"};break;case"italic":Ge={family:Mn,style:"italic"};break;case"bolditalic":Ge={family:Mn,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:Mn}}Ge!==null&&(Ge.ref={name:Mn,style:Tt},St.push(Ge))})}),St}(ln);de=function(Hn){for(var St={},Mn=0;Mn<Hn.length;++Mn){var Tt=_N(Hn[Mn]),Ge=Tt.family,kt=Tt.stretch,ze=Tt.style,Xe=Tt.weight;St[Ge]=St[Ge]||{},St[Ge][kt]=St[Ge][kt]||{},St[Ge][kt][ze]=St[Ge][kt][ze]||{},St[Ge][kt][ze][Xe]=Tt}return St}(Yt.concat(gr)),_e=Kt}return de}(this.pdf,this.fontFaces),Ye=Re.map(function(dt){return{family:dt,stretch:"normal",weight:tt,style:Qe}}),je=function(dt,gr,ln){for(var Kt=(ln=ln||{}).defaultFontFamily||"times",Yt=Object.assign({},s0t,ln.genericFontFamilies||{}),Hn=null,St=null,Mn=0;Mn<gr.length;++Mn)if(Yt[(Hn=_N(gr[Mn])).family]&&(Hn.family=Yt[Hn.family]),dt.hasOwnProperty(Hn.family)){St=dt[Hn.family];break}if(!(St=St||dt[Kt]))throw new Error("Could not find a font-family for the rule '"+jG(Hn)+"' and default family '"+Kt+"'.");if(St=function(Tt,Ge){if(Ge[Tt])return Ge[Tt];var kt=a3[Tt],ze=kt<=a3.normal?-1:1,Xe=IG(Ge,Kde,kt,ze);if(!Xe)throw new Error("Could not find a matching font-stretch value for "+Tt);return Xe}(Hn.stretch,St),St=function(Tt,Ge){if(Ge[Tt])return Ge[Tt];for(var kt=Gde[Tt],ze=0;ze<kt.length;++ze)if(Ge[kt[ze]])return Ge[kt[ze]];throw new Error("Could not find a matching font-style for "+Tt)}(Hn.style,St),!(St=function(Tt,Ge){if(Ge[Tt])return Ge[Tt];if(Tt===400&&Ge[500])return Ge[500];if(Tt===500&&Ge[400])return Ge[400];var kt=a0t[Tt],ze=IG(Ge,Yde,kt,Tt<400?-1:1);if(!ze)throw new Error("Could not find a matching font-weight for value "+Tt);return ze}(Hn.weight,St)))throw new Error("Failed to resolve a font for the rule '"+jG(Hn)+"'.");return St}(Ie,Ye);this.pdf.setFont(je.ref.name,je.ref.style)}else{var Ne="";(tt==="bold"||parseInt(tt,10)>=700||Qe==="bold")&&(Ne="bold"),Qe==="italic"&&(Ne+="italic"),Ne.length===0&&(Ne="normal");for(var Ke="",He={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<Re.length;et++){if(this.pdf.internal.getFont(Re[et],Ne,{noFallback:!0,disableWarning:!0})!==void 0){Ke=Re[et];break}if(Ne==="bolditalic"&&this.pdf.internal.getFont(Re[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=Re[et],Ne="bold";else if(this.pdf.internal.getFont(Re[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=Re[et],Ne="normal";break}}if(Ke===""){for(var $t=0;$t<Re.length;$t++)if(He[Re[$t]]){Ke=He[Re[$t]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,Ne)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){_.call(this,"fill",!1)},f.prototype.stroke=function(){_.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,K){if(isNaN(L)||isNaN(K))throw Vn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new s(L,K));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new s(L,K)},f.prototype.closePath=function(){var L=new s(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&In(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){L=new s(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(L.x,L.y)},f.prototype.lineTo=function(L,K){if(isNaN(L)||isNaN(K))throw Vn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new s(L,K));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new s(Q.x,Q.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,K,Q,re){if(isNaN(Q)||isNaN(re)||isNaN(L)||isNaN(K))throw Vn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var F=this.ctx.transform.applyToPoint(new s(Q,re)),$=this.ctx.transform.applyToPoint(new s(L,K));this.path.push({type:"qct",x1:$.x,y1:$.y,x:F.x,y:F.y}),this.ctx.lastPoint=new s(F.x,F.y)},f.prototype.bezierCurveTo=function(L,K,Q,re,F,$){if(isNaN(F)||isNaN($)||isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re))throw Vn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new s(F,$)),q=this.ctx.transform.applyToPoint(new s(L,K)),fe=this.ctx.transform.applyToPoint(new s(Q,re));this.path.push({type:"bct",x1:q.x,y1:q.y,x2:fe.x,y2:fe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new s(ie.x,ie.y)},f.prototype.arc=function(L,K,Q,re,F,$){if(isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re)||isNaN(F))throw Vn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if($=!!$,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new s(L,K));L=ie.x,K=ie.y;var q=this.ctx.transform.applyToPoint(new s(0,Q)),fe=this.ctx.transform.applyToPoint(new s(0,0));Q=Math.sqrt(Math.pow(q.x-fe.x,2)+Math.pow(q.y-fe.y,2))}Math.abs(F-re)>=2*Math.PI&&(re=0,F=2*Math.PI),this.path.push({type:"arc",x:L,y:K,radius:Q,startAngle:re,endAngle:F,counterclockwise:$})},f.prototype.arcTo=function(L,K,Q,re,F){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,K,Q,re){if(isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re))throw Vn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,K),this.lineTo(L+Q,K),this.lineTo(L+Q,K+re),this.lineTo(L,K+re),this.lineTo(L,K),this.lineTo(L+Q,K),this.lineTo(L,K)},f.prototype.fillRect=function(L,K,Q,re){if(isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re))throw Vn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var F={};this.lineCap!=="butt"&&(F.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(F.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,K,Q,re),this.fill(),F.hasOwnProperty("lineCap")&&(this.lineCap=F.lineCap),F.hasOwnProperty("lineJoin")&&(this.lineJoin=F.lineJoin)}},f.prototype.strokeRect=function(L,K,Q,re){if(isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re))throw Vn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(L,K,Q,re),this.stroke())},f.prototype.clearRect=function(L,K,Q,re){if(isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re))throw Vn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,K,Q,re))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(K),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(L){var K,Q,re,F;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))K=0,Q=0,re=0,F=0;else{var $=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if($!==null)K=parseInt($[1]),Q=parseInt($[2]),re=parseInt($[3]),F=1;else if(($=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)K=parseInt($[1]),Q=parseInt($[2]),re=parseInt($[3]),F=parseFloat($[4]);else{if(F=1,typeof L=="string"&&L.charAt(0)!=="#"){var ie=new Bde(L);L=ie.ok?ie.toHex():"#000000"}L.length===4?(K=L.substring(1,2),K+=K,Q=L.substring(2,3),Q+=Q,re=L.substring(3,4),re+=re):(K=L.substring(1,3),Q=L.substring(3,5),re=L.substring(5,7)),K=parseInt(K,16),Q=parseInt(Q,16),re=parseInt(re,16)}}return{r:K,g:Q,b:re,a:F,style:L}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,K,Q,re){if(isNaN(K)||isNaN(Q)||typeof L!="string")throw Vn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!h.call(this)){var F=z(this.ctx.transform.rotation),$=this.ctx.transform.scaleX;j.call(this,{text:L,x:K,y:Q,scale:$,angle:F,align:this.textAlign,maxWidth:re})}},f.prototype.strokeText=function(L,K,Q,re){if(isNaN(K)||isNaN(Q)||typeof L!="string")throw Vn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){re=isNaN(re)?void 0:re;var F=z(this.ctx.transform.rotation),$=this.ctx.transform.scaleX;j.call(this,{text:L,x:K,y:Q,scale:$,renderingMode:"stroke",angle:F,align:this.textAlign,maxWidth:re})}},f.prototype.measureText=function(L){if(typeof L!="string")throw Vn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Q=this.pdf.internal.scaleFactor,re=K.internal.getFontSize(),F=K.getStringUnitWidth(L)*re/K.internal.scaleFactor;return new function($){var ie=($=$||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this}({width:F*=Math.round(96*Q/72*1e4)/1e4})},f.prototype.scale=function(L,K){if(isNaN(L)||isNaN(K))throw Vn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new l(L,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.rotate=function(L){if(isNaN(L))throw Vn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(L,K){if(isNaN(L)||isNaN(K))throw Vn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new l(1,0,0,1,L,K);this.ctx.transform=this.ctx.transform.multiply(Q)},f.prototype.transform=function(L,K,Q,re,F,$){if(isNaN(L)||isNaN(K)||isNaN(Q)||isNaN(re)||isNaN(F)||isNaN($))throw Vn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new l(L,K,Q,re,F,$);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(L,K,Q,re,F,$){L=isNaN(L)?1:L,K=isNaN(K)?0:K,Q=isNaN(Q)?0:Q,re=isNaN(re)?1:re,F=isNaN(F)?0:F,$=isNaN($)?0:$,this.ctx.transform=new l(L,K,Q,re,F,$)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,K,Q,re,F,$,ie,q,fe){var me=this.pdf.getImageProperties(L),de=1,_e=1,Oe=1,ee=1;re!==void 0&&q!==void 0&&(Oe=q/re,ee=fe/F,de=me.width/re*q/re,_e=me.height/F*fe/F),$===void 0&&($=K,ie=Q,K=0,Q=0),re!==void 0&&q===void 0&&(q=re,fe=F),re===void 0&&q===void 0&&(q=me.width,fe=me.height);var Ee=this.ctx.transform.decompose(),Qe=z(Ee.rotate.shx),tt=new l,Pe=(tt=(tt=(tt=tt.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new o($-K*Oe,ie-Q*ee,re*de,F*_e));if(this.autoPaging){for(var xe,Ze=y.call(this,Pe),Re=[],Ie=0;Ie<Ze.length;Ie+=1)Re.indexOf(Ze[Ie])===-1&&Re.push(Ze[Ie]);w(Re);for(var Ye=Re[0],je=Re[Re.length-1],Ne=Ye;Ne<je+1;Ne++){this.pdf.setPage(Ne);var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=Ne===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=Ne===1?0:et+(Ne-2)*$t;if(this.ctx.clip_path.length!==0){var gr=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(xe,this.posX+this.margin[3],-dt+He+this.ctx.prevPageLastElemOffset),x.call(this,"fill",!0),this.path=gr}var ln=JSON.parse(JSON.stringify(Pe));ln=v([ln],this.posX+this.margin[3],-dt+He+this.ctx.prevPageLastElemOffset)[0];var Kt=(Ne>Ye||Ne<je)&&m.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,$t,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",ln.x,ln.y,ln.w,ln.h,null,null,Qe),Kt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(L,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Qe)};var y=function(L,K,Q){var re=[];K=K||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var F=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":re.push(Math.floor((L.y+F)/Q)+1);break;case"arc":re.push(Math.floor((L.y+F-L.radius)/Q)+1),re.push(Math.floor((L.y+F+L.radius)/Q)+1);break;case"qct":var $=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);re.push(Math.floor(($.y+F)/Q)+1),re.push(Math.floor(($.y+$.h+F)/Q)+1);break;case"bct":var ie=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);re.push(Math.floor((ie.y+F)/Q)+1),re.push(Math.floor((ie.y+ie.h+F)/Q)+1);break;case"rect":re.push(Math.floor((L.y+F)/Q)+1),re.push(Math.floor((L.y+L.h+F)/Q)+1)}for(var q=0;q<re.length;q+=1)for(;this.pdf.internal.getNumberOfPages()<re[q];)g.call(this);return re},g=function(){var L=this.fillStyle,K=this.strokeStyle,Q=this.font,re=this.lineCap,F=this.lineWidth,$=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=K,this.font=Q,this.lineCap=re,this.lineWidth=F,this.lineJoin=$},v=function(L,K,Q){for(var re=0;re<L.length;re++)switch(L[re].type){case"bct":L[re].x2+=K,L[re].y2+=Q;case"qct":L[re].x1+=K,L[re].y1+=Q;default:L[re].x+=K,L[re].y+=Q}return L},w=function(L){return L.sort(function(K,Q){return K-Q})},_=function(L,K){var Q=this.fillStyle,re=this.strokeStyle,F=this.lineCap,$=this.lineWidth,ie=Math.abs($*this.ctx.transform.scaleX),q=this.lineJoin;if(this.autoPaging){for(var fe,me,de=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),Oe=[],ee=0;ee<_e.length;ee++)if(_e[ee].x!==void 0)for(var Ee=y.call(this,_e[ee]),Qe=0;Qe<Ee.length;Qe+=1)Oe.indexOf(Ee[Qe])===-1&&Oe.push(Ee[Qe]);for(var tt=0;tt<Oe.length;tt++)for(;this.pdf.internal.getNumberOfPages()<Oe[tt];)g.call(this);w(Oe);for(var Pe=Oe[0],xe=Oe[Oe.length-1],Ze=Pe;Ze<xe+1;Ze++){this.pdf.setPage(Ze),this.fillStyle=Q,this.strokeStyle=re,this.lineCap=F,this.lineWidth=ie,this.lineJoin=q;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ie=Ze===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=Ze===1?0:Ye+(Ze-2)*je;if(this.ctx.clip_path.length!==0){var Ke=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(fe,this.posX+this.margin[3],-Ne+Ie+this.ctx.prevPageLastElemOffset),x.call(this,L,!0),this.path=Ke}if(me=JSON.parse(JSON.stringify(de)),this.path=v(me,this.posX+this.margin[3],-Ne+Ie+this.ctx.prevPageLastElemOffset),K===!1||Ze===0){var He=(Ze>Pe||Ze<xe)&&m.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,je,null).clip().discardPath()),x.call(this,L,K),He&&this.pdf.restoreGraphicsState()}this.lineWidth=$}this.path=de}else this.lineWidth=ie,x.call(this,L,K),this.lineWidth=$},x=function(L,K){if((L!=="stroke"||K||!p.call(this))&&(L==="stroke"||K||!h.call(this))){for(var Q,re,F=[],$=this.path,ie=0;ie<$.length;ie++){var q=$[ie];switch(q.type){case"begin":F.push({begin:!0});break;case"close":F.push({close:!0});break;case"mt":F.push({start:q,deltas:[],abs:[]});break;case"lt":var fe=F.length;if($[ie-1]&&!isNaN($[ie-1].x)&&(Q=[q.x-$[ie-1].x,q.y-$[ie-1].y],fe>0)){for(;fe>=0;fe--)if(F[fe-1].close!==!0&&F[fe-1].begin!==!0){F[fe-1].deltas.push(Q),F[fe-1].abs.push(q);break}}break;case"bct":Q=[q.x1-$[ie-1].x,q.y1-$[ie-1].y,q.x2-$[ie-1].x,q.y2-$[ie-1].y,q.x-$[ie-1].x,q.y-$[ie-1].y],F[F.length-1].deltas.push(Q);break;case"qct":var me=$[ie-1].x+2/3*(q.x1-$[ie-1].x),de=$[ie-1].y+2/3*(q.y1-$[ie-1].y),_e=q.x+2/3*(q.x1-q.x),Oe=q.y+2/3*(q.y1-q.y),ee=q.x,Ee=q.y;Q=[me-$[ie-1].x,de-$[ie-1].y,_e-$[ie-1].x,Oe-$[ie-1].y,ee-$[ie-1].x,Ee-$[ie-1].y],F[F.length-1].deltas.push(Q);break;case"arc":F.push({deltas:[],abs:[],arc:!0}),Array.isArray(F[F.length-1].abs)&&F[F.length-1].abs.push(q)}}re=K?null:L==="stroke"?"stroke":"fill";for(var Qe=!1,tt=0;tt<F.length;tt++)if(F[tt].arc)for(var Pe=F[tt].abs,xe=0;xe<Pe.length;xe++){var Ze=Pe[xe];Ze.type==="arc"?O.call(this,Ze.x,Ze.y,Ze.radius,Ze.startAngle,Ze.endAngle,Ze.counterclockwise,void 0,K,!Qe):U.call(this,Ze.x,Ze.y),Qe=!0}else if(F[tt].close===!0)this.pdf.internal.out("h"),Qe=!1;else if(F[tt].begin!==!0){var Re=F[tt].start.x,Ie=F[tt].start.y;B.call(this,F[tt].deltas,Re,Ie),Qe=!0}re&&R.call(this,re),K&&M.call(this)}},E=function(L){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-Q;case"top":return L+K-Q;case"hanging":return L+K-2*Q;case"middle":return L+K/2-Q;default:return L}},T=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(K,Q){this.colorStops.push([K,Q])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(L,K,Q,re,F,$,ie,q,fe){for(var me=Y.call(this,Q,re,F,$),de=0;de<me.length;de++){var _e=me[de];de===0&&(fe?N.call(this,_e.x1+L,_e.y1+K):U.call(this,_e.x1+L,_e.y1+K)),V.call(this,L,K,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}q?M.call(this):R.call(this,ie)},R=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(L,K){this.pdf.internal.out(n(L)+" "+r(K)+" m")},j=function(L){var K;switch(L.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var Q,re,F,$=this.pdf.getTextDimensions(L.text),ie=E.call(this,L.y),q=T.call(this,ie)-$.h,fe=this.ctx.transform.applyToPoint(new s(L.x,ie));if(this.autoPaging){var me=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var _e=this.ctx.transform.applyToRectangle(new o(L.x,ie,$.w,$.h)),Oe=de.applyToRectangle(new o(L.x,q,$.w,$.h)),ee=y.call(this,Oe),Ee=[],Qe=0;Qe<ee.length;Qe+=1)Ee.indexOf(ee[Qe])===-1&&Ee.push(ee[Qe]);w(Ee);for(var tt=Ee[0],Pe=Ee[Ee.length-1],xe=tt;xe<Pe+1;xe++){this.pdf.setPage(xe);var Ze=xe===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[2],Ye=Ie-this.margin[0],je=this.pdf.internal.pageSize.width-this.margin[1],Ne=je-this.margin[3],Ke=xe===1?0:Re+(xe-2)*Ye;if(this.ctx.clip_path.length!==0){var He=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Q,this.posX+this.margin[3],-1*Ke+Ze),x.call(this,"fill",!0),this.path=He}var et=v([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Ke+Ze+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*L.scale),F=this.lineWidth,this.lineWidth=F*L.scale);var $t=this.autoPaging!=="text";if($t||et.y+et.h<=Ie){if($t||et.y>=Ze&&et.x<=je){var dt=$t?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||je-et.x)[0],gr=v([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Ke+Ze+this.ctx.prevPageLastElemOffset)[0],ln=$t&&(xe>tt||xe<Pe)&&m.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,Ye,null).clip().discardPath()),this.pdf.text(dt,gr.x,gr.y,{angle:L.angle,align:K,renderingMode:L.renderingMode}),ln&&this.pdf.restoreGraphicsState()}}else et.y<Ie&&(this.ctx.prevPageLastElemOffset+=Ie-et.y);L.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=F)}}else L.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*L.scale),F=this.lineWidth,this.lineWidth=F*L.scale),this.pdf.text(L.text,fe.x+this.posX,fe.y+this.posY,{angle:L.angle,align:K,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=F)},U=function(L,K,Q,re){Q=Q||0,re=re||0,this.pdf.internal.out(n(L+Q)+" "+r(K+re)+" l")},B=function(L,K,Q){return this.pdf.lines(L,K,Q,null,null)},V=function(L,K,Q,re,F,$,ie,q){this.pdf.internal.out([e(i(Q+L)),e(a(re+K)),e(i(F+L)),e(a($+K)),e(i(ie+L)),e(a(q+K)),"c"].join(" "))},Y=function(L,K,Q,re){for(var F=2*Math.PI,$=Math.PI/2;K>Q;)K-=F;var ie=Math.abs(Q-K);ie<F&&re&&(ie=F-ie);for(var q=[],fe=re?-1:1,me=K;ie>1e-5;){var de=me+fe*Math.min(ie,$);q.push(X.call(this,L,me,de)),ie-=Math.abs(de-me),me=de}return q},X=function(L,K,Q){var re=(Q-K)/2,F=L*Math.cos(re),$=L*Math.sin(re),ie=F,q=-$,fe=ie*ie+q*q,me=fe+ie*F+q*$,de=4/3*(Math.sqrt(2*fe*me)-me)/(ie*$-q*F),_e=ie-de*q,Oe=q+de*ie,ee=_e,Ee=-Oe,Qe=re+K,tt=Math.cos(Qe),Pe=Math.sin(Qe);return{x1:L*Math.cos(K),y1:L*Math.sin(K),x2:_e*tt-Oe*Pe,y2:_e*Pe+Oe*tt,x3:ee*tt-Ee*Pe,y3:ee*Pe+Ee*tt,x4:L*Math.cos(Q),y4:L*Math.sin(Q)}},z=function(L){return 180*L/Math.PI},G=function(L,K,Q,re,F,$){var ie=L+.5*(Q-L),q=K+.5*(re-K),fe=F+.5*(Q-F),me=$+.5*(re-$),de=Math.min(L,F,ie,fe),_e=Math.max(L,F,ie,fe),Oe=Math.min(K,$,q,me),ee=Math.max(K,$,q,me);return new o(de,Oe,_e-de,ee-Oe)},ae=function(L,K,Q,re,F,$,ie,q){var fe,me,de,_e,Oe,ee,Ee,Qe,tt,Pe,xe,Ze,Re,Ie,Ye=Q-L,je=re-K,Ne=F-Q,Ke=$-re,He=ie-F,et=q-$;for(me=0;me<41;me++)tt=(Ee=(de=L+(fe=me/40)*Ye)+fe*((Oe=Q+fe*Ne)-de))+fe*(Oe+fe*(F+fe*He-Oe)-Ee),Pe=(Qe=(_e=K+fe*je)+fe*((ee=re+fe*Ke)-_e))+fe*(ee+fe*($+fe*et-ee)-Qe),me==0?(xe=tt,Ze=Pe,Re=tt,Ie=Pe):(xe=Math.min(xe,tt),Ze=Math.min(Ze,Pe),Re=Math.max(Re,tt),Ie=Math.max(Ie,Pe));return new o(Math.round(xe),Math.round(Ze),Math.round(Re-xe),Math.round(Ie-Ze))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,K,Q=(L=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:K}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(_t.API),function(t){var e=function(s){var o,l,c,u,f,d,h,p,m,y;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(f=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(f=((f=((f=((f=(f-(y=f%85))/85)-(m=f%85))/85)-(p=f%85))/85)-(h=f%85))/85)%85,l.push(d+33,h+33,p+33,m+33,y+33)):l.push(122);return function(g,v){for(var w=v;w>0;w--)g.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var o,l,c,u,f,d=String,h="length",p=255,m="charCodeAt",y="slice",g="replace";for(s[y](-2),s=s[y](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],u=0,f=(s+=o="uuuuu"[y](s[h]%5||5))[h];f>u;u+=5)l=52200625*(s[m](u)-33)+614125*(s[m](u+1)-33)+7225*(s[m](u+2)-33)+85*(s[m](u+3)-33)+(s[m](u+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(v,w){for(var _=w;_>0;_--)v.pop()}(c,o[h]),d.fromCharCode.apply(d,c)},r=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=J4(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(_t.API),function(t){t.loadFile=function(e,n,r){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,c,u){var f=new XMLHttpRequest,d=0,h=function(p){var m=p.length,y=[],g=String.fromCharCode;for(d=0;d<m;d+=1)y.push(g(255&p.charCodeAt(d)));return y.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?u(h(this.responseText)):u(void 0)}),f.send(null),c&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(e,n,r)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile}(_t.API),function(t){function e(){return(Mt.html2canvas?Promise.resolve(Mt.html2canvas):rN(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Mt.DOMPurify?Promise.resolve(Mt.DOMPurify):rN(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=In(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},a=function o(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),f=l.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(o(f,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],m=p.src.find(function(y){return y.format==="truetype"});m&&c.addFont(m.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),l(this.prop.container,d)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,f).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),l&&(l=l.bind(u));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),d=c.call(f,o,l);return s.convert(d,u.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,_t.getPageSize=function(o,l,c){if(In(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var p,m=0,y=0;if(h.hasOwnProperty(d))m=h[d][1]/f,y=h[d][0]/f;else try{m=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",y>m&&(p=y,y=m,m=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>y&&(p=y,y=m,m=p)}return{width:y,height:m,unit:l,k:f,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(_N):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}(_t.API),_t.API.addJS=function(t){var e,n,r=t;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+r+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&n!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=r.exec(s);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(a=0;a<c;a++){var f=n.internal.newObject();u.push(f);var d=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<u.length;a++)n.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var s={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var s=r.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(_t.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,s,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(f){for(var d,h=256*f.charCodeAt(4)+f.charCodeAt(5),p=f.length,m={width:0,height:0,numcomponents:1},y=4;y<p;y+=2){if(y+=h,e.indexOf(f.charCodeAt(y+1))!==-1){d=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),m={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:d,numcomponents:f.charCodeAt(y+9)};break}h=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return m}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(_t.API),_t.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=Hvt(t,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,c=a.palette,u=a.depth;i=c&&l===1?function(O){for(var R=O.width,M=O.height,N=O.data,j=O.palette,U=O.depth,B=!1,V=[],Y=[],X=void 0,z=!1,G=0,ae=0;ae<j.length;ae++){var ue=Uq(j[ae],4),L=ue[0],K=ue[1],Q=ue[2],re=ue[3];V.push(L,K,Q),re!=null&&(re===0?(G++,Y.length<1&&Y.push(ae)):re<255&&(z=!0))}if(z||G>1){B=!0,Y=void 0;var F=R*M;X=new Uint8Array(F);for(var $=new DataView(N.buffer),ie=0;ie<F;ie++){var q=SN($,ie,U),fe=Uq(j[q],4)[3];X[ie]=fe}}else G===0&&(Y=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:B?8:void 0,colorBytes:N,alphaBytes:X,needSMask:B,palette:V,mask:Y}}(a):l===2||l===4?function(O){for(var R=O.data,M=O.width,N=O.height,j=O.channels,U=O.depth,B=j===2?"DeviceGray":"DeviceRGB",V=j-1,Y=M*N,X=V,z=Y*X,G=1*Y,ae=Math.ceil(z*U/8),ue=Math.ceil(G*U/8),L=new Uint8Array(ae),K=new Uint8Array(ue),Q=new DataView(R.buffer),re=new DataView(L.buffer),F=new DataView(K.buffer),$=!1,ie=0;ie<Y;ie++){for(var q=ie*j,fe=0;fe<X;fe++)WG(re,SN(Q,q+fe,U),ie*X+fe,U);var me=SN(Q,q+X,U);me<(1<<U)-1&&($=!0),WG(F,me,1*ie,U)}return{colorSpace:B,colorsPerPixel:V,sMaskBitsPerComponent:$?U:void 0,colorBytes:L,alphaBytes:K,needSMask:$}}(a):function(O){var R=O.data,M=O.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:R instanceof Uint16Array?function(N){for(var j=N.length,U=new Uint8Array(2*j),B=new DataView(U.buffer,U.byteOffset,U.byteLength),V=0;V<j;V++)B.setUint16(2*V,N[V],!1);return U}(R):R,needSMask:!1}}(a);var f,d,h,p=i,m=p.colorSpace,y=p.colorsPerPixel,g=p.sMaskBitsPerComponent,v=p.colorBytes,w=p.alphaBytes,_=p.needSMask,x=p.palette,E=p.mask,T=null;return r!==_t.API.image_compression.NONE&&typeof J4=="function"?(T=function(O){var R;switch(O){case _t.API.image_compression.FAST:R=11;break;case _t.API.image_compression.MEDIUM:R=13;break;case _t.API.image_compression.SLOW:R=14;break;default:R=12}return R}(r),f=this.decode.FLATE_DECODE,d="/Predictor ".concat(T," /Colors ").concat(y," /BitsPerComponent ").concat(u," /Columns ").concat(s),t=FG(v,Math.ceil(s*y*u/8),y,u,r),_&&(h=FG(w,Math.ceil(s*g/8),1,g,r))):(f=void 0,d=void 0,t=v,_&&(h=w)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:t,index:e,filter:f,decodeParameters:d,transparency:E,palette:x,sMask:h,predictor:T,width:s,height:o,bitsPerComponent:u,sMaskBitsPerComponent:g,colorSpace:m}}},function(t){t.processGIF89A=function(e,n,r,i){var a=new d0t(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new EN(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(_t.API),Zo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zo.prototype.parseBGR=function(){this.pos=this.offset;var t="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[t]()}catch(n){Vn.log("bit decode error:"+n)}},Zo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Zo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Zo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Zo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,c=a>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=t}},Zo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,u=i*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},Zo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Zo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=s}},Zo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var a=new Zo(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new EN(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(_t.API),qG.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var a=new qG(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new EN(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(_t.API),_t.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var u=r[c],f=r[c+1],d=r[c+2],h=r[c+3];a[o++]=u,a[o++]=f,a[o++]=d,s[l++]=h}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},_t.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$m=_t.API,P2=$m.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,f=e.doKerning!==!1,d=0,h=t.length,p=0,m=o[0]||l,y=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(d=f&&In(c[r])==="object"&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,y.push((o[r]||m)/l+d)),p=r;return y},MG=$m.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return $m.processArabic&&(t=$m.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:P2.apply(this,arguments).reduce(function(a,s){return a+s},0)},LG=function(t,e,n,r){for(var i=[],a=0,s=t.length,o=0;a!==s&&o+e[a]<n;)o+=e[a],a++;i.push(t.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>r&&(i.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},DG=function(t,e,n){n||(n={});var r,i,a,s,o,l,c,u=[],f=[u],d=n.textIndent||0,h=0,p=0,m=t.split(" "),y=P2.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?m[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),v=[];m.map(function(_){(_=_.split(/\s*\n/)).length>1?v=v.concat(_.map(function(x,E){return(E&&x.length?`
`:"")+x})):v.push(_[0])}),m=v,l=MG.apply(this,[g,n])}for(a=0,s=m.length;a<s;a++){var w=0;if(r=m[a],l&&r[0]==`
`&&(r=r.substr(1),w=1),d+h+(p=(i=P2.apply(this,[r,n])).reduce(function(_,x){return _+x},0))>e||w){if(p>e){for(o=LG.apply(this,[r,i,e-(d+h),e]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(_,x){return _+x},0)}else u=[r];f.push(u),d=p+l,h=y}else u.push(r),d+=h+p,h=y}return c=l?function(_,x){return(x?g:"")+_.join(" ")}:function(_){return _.join(" ")},f.map(c)},$m.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle),d="Unicode";return f.metadata[d]?{widths:f.metadata[d].widths||{0:1},kerning:f.metadata[d].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(DG.apply(this,[r[o],s,a]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=e[a],i[e[a]]=n[a];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,p,m,y,g=["{"];for(var v in d){if(h=d[v],isNaN(parseInt(v,10))?p="'"+v+"'":(v=parseInt(v,10),p=(p=s(v).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof h=="number")h<0?(m=s(h).slice(3),y="-"):(m=s(h).slice(2),y=""),m=y+m.slice(0,-1)+i[m.slice(-1)];else{if(In(h)!=="object")throw new Error("Don't know what to do with value type "+In(h)+".");m=o(h)}g.push(p+m)}return g.push("}"),g.join("")},l=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,m,y,g={},v=1,w=g,_=[],x="",E="",T=d.length-1,O=1;O<T;O+=1)(y=d[O])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(_.push([w,m]),w={},m=void 0):y=="}"?((p=_.pop())[0][p[1]]=w,m=void 0,w=p[0]):y=="-"?v=-1:m===void 0?r.hasOwnProperty(y)?(x+=r[y],m=parseInt(x,16)*v,v=1,x=""):x+=y:r.hasOwnProperty(y)?(E+=r[y],w[m]=parseInt(E,16)*v,v=1,m=void 0,E=""):E+=y;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,p=f.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var m=u.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(_t.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(AS(o)),s.metadata=t.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(_t),_t.API.addSvgAsImage=function(t,e,n,r,i,a,s,o){if(isNaN(e)||isNaN(n))throw Vn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw Vn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Mt.canvg?Promise.resolve(Mt.canvg):rN(()=>import("./index.es-CU84Pwwb.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load canvg: "+d))}).then(function(d){return d.default?d.default:d}).then(function(d){return d.fromString(c,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(d){return d.render(u)}).then(function(){f.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,s,o)})},_t.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},_t.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,f=0;function d(p,m){var y,g=!1;for(y=0;y<p.length;y+=1)p[y]===m&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=o.length;for(f=0;f<h;f+=1)n[o[f]].value=n[o[f]].defaultValue,n[o[f]].explicitSet=!1}if(In(t)==="object"){for(i in t)if(a=t[i],d(o,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&d(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(c=0;c<a.length;c+=1)if(r=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(u=0;u<a[c].length;u+=1)typeof a[c][u]!="number"&&(r=!1);r===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,m=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?m.push("/"+p+" /"+n[p].value):m.push("/"+p+" "+n[p].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},_t.API.addMetadata=function(t,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:t,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",p0t),this.internal.events.subscribe("postPutResources",h0t)),this},function(t){var e=t.API,n=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],f=0,d=a.length;f<d;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},r=function(a){var s,o,l,c,u,f,d;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,d=(o=Object.keys(a).sort(function(h,p){return h-p})).length;f<d;f++)s=o[f],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(c=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,d=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",p=0;p<d.length;p++)h+=String.fromCharCode(d[p]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var y=c();u({data:r(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var g=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+qm(o.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var v=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+qm(o.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+qm(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+v+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,d="",h=0;h<f.length;h++)d+=String.fromCharCode(f[h]);var p=c();u({data:d,addLength1:!0,objectId:p}),l("endobj");var m=c();u({data:r(o.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var y=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+qm(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var g=0;g<o.metadata.hmtx.widths.length;g++)o.metadata.hmtx.widths[g]=parseInt(o.metadata.hmtx.widths[g]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+qm(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,c=a.y,u=a.options||{},f=a.mutex||{},d=f.pdfEscape,h=f.activeFontKey,p=f.fonts,m=h,y="",g=0,v="",w=p[m].encoding;if(p[m].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:f};for(v=o,m=h,Array.isArray(o)&&(v=o[0]),g=0;g<v.length;g+=1)p[m].metadata.hasOwnProperty("cmap")&&(s=p[m].metadata.cmap.unicode.codeMap[v[g].charCodeAt(0)]),s||v[g].charCodeAt(0)<256&&p[m].metadata.hasOwnProperty("Unicode")?y+=v[g]:y+="";var _="";return parseInt(m.slice(1))<14||w==="WinAnsiEncoding"?_=d(y,m).split("").map(function(x){return x.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(_=n(y,p[m])),f.isHex=!0,{text:_,x:l,y:c,options:u,mutex:f}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(i(Object.assign({},l,{text:s[c]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(_t),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(_t.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,s,o,l,c,u,f=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,w=0;this.__bidiEngine__={};var _=function(N){var j=N.charCodeAt(),U=j>>8,B=m[U];return B!==void 0?f[256*B+(255&j)]:U===252||U===253?"AL":g.test(U)?"L":U===8?"R":"N"},x=function(N){for(var j,U=0;U<N.length;U++){if((j=_(N.charAt(U)))==="L")return!1;if(j==="R")return!0}return!1},E=function(N,j,U,B){var V,Y,X,z,G=j[B];switch(G){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"N":case"AN":break;case"EN":v&&(G="AN");break;case"AL":v=!0,G="R";break;case"WS":case"BN":G="N";break;case"CS":B<1||B+1>=j.length||(V=U[B-1])!=="EN"&&V!=="AN"||(Y=j[B+1])!=="EN"&&Y!=="AN"?G="N":v&&(Y="AN"),G=Y===V?Y:"N";break;case"ES":G=(V=B>0?U[B-1]:"B")==="EN"&&B+1<j.length&&j[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&U[B-1]==="EN"){G="EN";break}if(v){G="N";break}for(X=B+1,z=j.length;X<z&&j[X]==="ET";)X++;G=X<z&&j[X]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(z=j.length,X=B+1;X<z&&j[X]==="NSM";)X++;if(X<z){var ae=N[B],ue=ae>=1425&&ae<=2303||ae===64286;if(V=j[X],ue&&(V==="R"||V==="AL")){G="R";break}}}G=B<1||(V=j[B-1])==="B"?"N":U[B-1];break;case"B":v=!1,i=!0,G=w;break;case"S":a=!0,G="N"}return G},T=function(N,j,U){var B=N.split("");return U&&O(B,U,{hiLevel:w}),B.reverse(),j&&j.reverse(),B.join("")},O=function(N,j,U){var B,V,Y,X,z,G=-1,ae=N.length,ue=0,L=[],K=w?h:d,Q=[];for(v=!1,i=!1,a=!1,V=0;V<ae;V++)Q[V]=_(N[V]);for(Y=0;Y<ae;Y++){if(z=ue,L[Y]=E(N,Q,L,Y),B=240&(ue=K[z][p[L[Y]]]),ue&=15,j[Y]=X=K[ue][5],B>0)if(B===16){for(V=G;V<Y;V++)j[V]=1;G=-1}else G=-1;if(K[ue][6])G===-1&&(G=Y);else if(G>-1){for(V=G;V<Y;V++)j[V]=X;G=-1}Q[Y]==="B"&&(j[Y]=0),U.hiLevel|=X}a&&function(re,F,$){for(var ie=0;ie<$;ie++)if(re[ie]==="S"){F[ie]=w;for(var q=ie-1;q>=0&&re[q]==="WS";q--)F[q]=w}}(Q,j,ae)},R=function(N,j,U,B,V){if(!(V.hiLevel<N)){if(N===1&&w===1&&!i)return j.reverse(),void(U&&U.reverse());for(var Y,X,z,G,ae=j.length,ue=0;ue<ae;){if(B[ue]>=N){for(z=ue+1;z<ae&&B[z]>=N;)z++;for(G=ue,X=z-1;G<X;G++,X--)Y=j[G],j[G]=j[X],j[X]=Y,U&&(Y=U[G],U[G]=U[X],U[X]=Y);ue=z}ue++}}},M=function(N,j,U){var B=N.split(""),V={hiLevel:w};return U||(U=[]),O(B,U,V),function(Y,X,z){if(z.hiLevel!==0&&u)for(var G,ae=0;ae<Y.length;ae++)X[ae]===1&&(G=y.indexOf(Y[ae]))>=0&&(Y[ae]=y[G+1])}(B,U,V),R(2,B,j,U,V),R(1,B,j,U,V),B.join("")};return this.__bidiEngine__.doBidiReorder=function(N,j,U){if(function(V,Y){if(Y)for(var X=0;X<V.length;X++)Y[X]=X;o===void 0&&(o=x(V)),c===void 0&&(c=x(V))}(N,j),s||!l||c)if(s&&l&&o^c)w=o?1:0,N=T(N,j,U);else if(!s&&l&&c)w=o?1:0,N=M(N,j,U),N=T(N,j);else if(!s||o||l||c){if(s&&!l&&o^c)N=T(N,j),o?(w=0,N=M(N,j,U)):(w=1,N=M(N,j,U),N=T(N,j));else if(s&&o&&!l&&c)w=1,N=M(N,j,U),N=T(N,j);else if(!s&&!l&&o^c){var B=u;o?(w=1,N=M(N,j,U),w=0,u=!1,N=M(N,j,U),u=B):(w=0,N=M(N,j,U),N=T(N,j),w=1,u=!1,N=M(N,j,U),u=B,N=T(N,j))}}else w=0,N=M(N,j,U);else w=o?1:0,N=M(N,j,U);return N},this.__bidiEngine__.setOptions=function(N){N&&(s=N.isInputVisual,l=N.isOutputVisual,o=N.isInputRtl,c=N.isOutputRtl,u=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([n.doBidiReorder(i[o])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(_t),_t.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Pd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new C0t(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new m0t(this.contents),this.head=new y0t(this),this.name=new x0t(this),this.cmap=new Xde(this),this.toUnicode={},this.hhea=new v0t(this),this.maxp=new S0t(this),this.hmtx=new E0t(this),this.post=new b0t(this),this.os2=new w0t(this),this.loca=new T0t(this),this.glyf=new A0t(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var jl,Pd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,s,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*s+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),m0t=function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,s,o,l,c,u,f,d,h,p,m;for(m in h=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(h)/l),s=Math.floor(f/l),u=16*h-f,(i=new Pd).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(u),a=16*h,c=i.pos+a,o=null,p=[],n)for(d=n[m],i.writeString(m),i.writeInt(t(d)),i.writeInt(c),i.writeInt(d.length),p=p.concat(d),m==="head"&&(o=c),c+=d.length;c%4;)p.push(0),c++;return i.write(p),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,s;for(n=Jde.call(n);n.length%4;)n.push(0);for(a=new Pd(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),g0t={}.hasOwnProperty,Nc=function(t,e){for(var n in e)g0t.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};jl=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var y0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new Pd).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),GG=function(){function t(e,n){var r,i,a,s,o,l,c,u,f,d,h,p,m,y,g,v,w;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),d=h/2,e.pos+=6,a=function(){var _,x;for(x=[],l=_=0;0<=d?_<d:_>d;l=0<=d?++_:--_)x.push(e.readUInt16());return x}(),e.pos+=2,m=function(){var _,x;for(x=[],l=_=0;0<=d?_<d:_>d;l=0<=d?++_:--_)x.push(e.readUInt16());return x}(),c=function(){var _,x;for(x=[],l=_=0;0<=d?_<d:_>d;l=0<=d?++_:--_)x.push(e.readUInt16());return x}(),u=function(){var _,x;for(x=[],l=_=0;0<=d?_<d:_>d;l=0<=d?++_:--_)x.push(e.readUInt16());return x}(),i=(this.length-e.pos+this.offset)/2,o=function(){var _,x;for(x=[],l=_=0;0<=i?_<i:_>i;l=0<=i?++_:--_)x.push(e.readUInt16());return x}(),l=g=0,w=a.length;g<w;l=++g)for(y=a[l],r=v=p=m[l];p<=y?v<=y:v>=y;r=p<=y?++v:--v)u[l]===0?s=r+c[l]:(s=o[u[l]/2+(r-p)-(d-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=f}return t.encode=function(e,n){var r,i,a,s,o,l,c,u,f,d,h,p,m,y,g,v,w,_,x,E,T,O,R,M,N,j,U,B,V,Y,X,z,G,ae,ue,L,K,Q,re,F,$,ie,q,fe,me,de;switch(B=new Pd,s=Object.keys(e).sort(function(_e,Oe){return _e-Oe}),n){case"macroman":for(m=0,y=function(){var _e=[];for(p=0;p<256;++p)_e.push(0);return _e}(),v={0:0},a={},V=0,G=s.length;V<G;V++)v[q=e[i=s[V]]]==null&&(v[q]=++m),a[i]={old:e[i],new:v[e[i]]},y[i]=v[e[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(y),{charMap:a,subtable:B.data,maxGlyphID:m+1};case"unicode":for(j=[],f=[],w=0,v={},r={},g=c=null,Y=0,ae=s.length;Y<ae;Y++)v[x=e[i=s[Y]]]==null&&(v[x]=++w),r[i]={old:x,new:v[x]},o=v[x]-i,g!=null&&o===c||(g&&f.push(g),j.push(i),c=o),g=i;for(g&&f.push(g),f.push(65535),j.push(65535),M=2*(R=j.length),O=2*Math.pow(Math.log(R)/Math.LN2,2),d=Math.log(O/2)/Math.LN2,T=2*R-O,l=[],E=[],h=[],p=X=0,ue=j.length;X<ue;p=++X){if(N=j[p],u=f[p],N===65535){l.push(0),E.push(0);break}if(N-(U=r[N].new)>=32768)for(l.push(0),E.push(2*(h.length+R-p)),i=z=N;N<=u?z<=u:z>=u;i=N<=u?++z:--z)h.push(r[i].new);else l.push(U-N),E.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*R+2*h.length),B.writeUInt16(0),B.writeUInt16(M),B.writeUInt16(O),B.writeUInt16(d),B.writeUInt16(T),$=0,L=f.length;$<L;$++)i=f[$],B.writeUInt16(i);for(B.writeUInt16(0),ie=0,K=j.length;ie<K;ie++)i=j[ie],B.writeUInt16(i);for(fe=0,Q=l.length;fe<Q;fe++)o=l[fe],B.writeUInt16(o);for(me=0,re=E.length;me<re;me++)_=E[me],B.writeUInt16(_);for(de=0,F=h.length;de<F;de++)m=h[de],B.writeUInt16(m);return{charMap:r,subtable:B.data,maxGlyphID:w+1}}},t}(),Xde=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new GG(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=GG.encode(e,n),(i=new Pd).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),v0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),w0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),b0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},t}(),_0t=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},x0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,a,s,o,l,c,u,f,d;for(e.pos=this.offset,e.readShort(),n=e.readShort(),o=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=u=0,f=r.length;u<f;a=++u)i=r[a],e.pos=i.offset,c=e.readString(i.length),s=new _0t(c,i),l[d=i.nameID]==null&&(l[d]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),S0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),E0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],n=c=0;0<=i?c<i:c>i;n=0<=i?++c:--c)u.push(e.readInt16());return u}(),this.widths=(function(){var c,u,f,d;for(d=[],c=0,u=(f=this.metrics).length;c<u;c++)a=f[c],d.push(a.advance);return d}).call(this),r=this.widths[this.widths.length-1],l=[],n=s=0;0<=i?s<i:s>i;n=0<=i?++s:--s)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Jde=[].slice,A0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,a,s,o,l,c,u,f;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,s=(o=new Pd(n.read(i))).readShort(),c=o.readShort(),f=o.readShort(),l=o.readShort(),u=o.readShort(),this.cache[e]=s===-1?new O0t(o,c,f,l,u):new k0t(o,s,c,f,l,u),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,a,s,o,l;for(s=[],a=[],o=0,l=n.length;o<l;o++)i=e[n[o]],a.push(s.length),i&&(s=s.concat(i.encode(r)));return a.push(s.length),{table:s,offsets:a}},t}(),k0t=function(){function t(e,n,r,i,a,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),O0t=function(){function t(e,n,r,i,a){var s,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Pd(Jde.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),T0t=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Nc(t,jl),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<r.length;++s)if(r[s]=i,a<n.length&&n[a]==s){++a,r[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var c=new Array(4*r.length),u=0;u<r.length;++u)c[4*u+3]=255&r[u],c[4*u+2]=(65280&r[u])>>8,c[4*u+1]=(16711680&r[u])>>16,c[4*u]=(4278190080&r[u])>>24;return c},t}(),C0t=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,s,o,l,c,u,f,d,h,p,m,y,g;for(i in r=Xde.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},g=r.charMap)h[(l=g[i]).old]=l.new;for(p in d=r.maxGlyphID,s)p in h||(h[p]=d++);return u=function(v){var w,_;for(w in _={},v)_[v[w]]=w;return _}(h),f=Object.keys(u).sort(function(v,w){return v-w}),m=function(){var v,w,_;for(_=[],v=0,w=f.length;v<w;v++)o=f[v],_.push(u[o]);return _}(),a=this.font.glyf.encode(s,m,h),c=this.font.loca.encode(a.offsets,m),y={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t}();_t.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,s;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)s=n[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+n},e}();function Qde(t,e,n,r,i){r=r||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,c=o*l,u=/\r\n|\r|\n/g,f="",d=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(f=typeof t=="string"?t.split(u):t,d=f.length||1),n+=o*(2-a),r.valign==="middle"?n-=d/2*c:r.valign==="bottom"&&(n-=d*c),r.halign==="center"||r.halign==="right"){var h=o;if(r.halign==="center"&&(h*=.5),f&&d>=1){for(var p=0;p<f.length;p++)i.text(f[p],e-i.getStringUnitWidth(f[p])*h,n),n+=c;return i}e-=i.getStringUnitWidth(t)*h}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var KG={},Zg=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:KG=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var u=t.unifyColor(e.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),u=t.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=t.unifyColor(e.lineColor),u&&(a=this.jsPDFDocument).setDrawColor.apply(a,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,a){return this.jsPDFDocument.rect(e,n,r,i,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return KG||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),s3=function(t,e){return s3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},s3(t,e)};function ehe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var the=function(t){ehe(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function P0t(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function N0t(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function c5(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function nhe(t,e,n,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:a});var s=rhe(i,!1);s&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,s)}function rhe(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function IO(t,e){var n,r,i,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function ihe(t,e){var n=IO(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function I0t(t,e,n,r,i){var a={},s=1.3333333333333333,o=AN(e,function(w){return i.getComputedStyle(w).backgroundColor});o!=null&&(a.fillColor=o);var l=AN(e,function(w){return i.getComputedStyle(w).color});l!=null&&(a.textColor=l);var c=j0t(r,n);c&&(a.cellPadding=c);var u="borderTopColor",f=s*n,d=r.borderTopWidth;if(r.borderBottomWidth===d&&r.borderRightWidth===d&&r.borderLeftWidth===d){var h=(parseFloat(d)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/f,right:(parseFloat(r.borderRightWidth)||0)/f,bottom:(parseFloat(r.borderBottomWidth)||0)/f,left:(parseFloat(r.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?u="borderRightColor":a.lineWidth.bottom?u="borderBottomColor":a.lineWidth.left&&(u="borderLeftColor"));var p=AN(e,function(w){return i.getComputedStyle(w)[u]});p!=null&&(a.lineColor=p);var m=["left","right","center","justify"];m.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),m=["middle","bottom","top"],m.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var y=parseInt(r.fontSize||"");isNaN(y)||(a.fontSize=y/s);var g=R0t(r);g&&(a.fontStyle=g);var v=(r.fontFamily||"").toLowerCase();return t.indexOf(v)!==-1&&(a.font=v),a}function R0t(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function AN(t,e){var n=ahe(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function ahe(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:ahe(t.parentElement,e):n}function j0t(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),s=IO(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function she(t,e,n,r,i){var a,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),c=t.scaleFactor(),u=[],f=[],d=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:u,body:f,foot:d};for(var h=0;h<o.rows.length;h++){var p=o.rows[h],m=(s=(a=p==null?void 0:p.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=$0t(l,c,n,p,r,i);y&&(m==="thead"?u.push(y):m==="tfoot"?d.push(y):f.push(y))}return{head:u,body:f,foot:d}}function $0t(t,e,n,r,i,a){for(var s=new the(r),o=0;o<r.cells.length;o++){var l=r.cells[o],c=n.getComputedStyle(l);if(i||c.display!=="none"){var u=void 0;a&&(u=I0t(t,l,e,c,n)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:M0t(l)})}}var f=n.getComputedStyle(r);if(s.length>0&&(i||f.display!=="none"))return s}function M0t(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function L0t(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function yu(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function ohe(t,e){var n=new Zg(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();L0t(i,r,e);var a=yu({},i,r,e),s;typeof window<"u"&&(s=window);var o=D0t(i,r,e),l=F0t(i,r,e),c=B0t(n,a),u=z0t(n,a,s);return{id:e.tableId,content:u,hooks:l,styles:o,settings:c}}function D0t(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=t[l],u=e[l],f=n[l];r.columnStyles=yu({},c,u,f)}else{var d=[t,e,n],h=d.map(function(p){return p[l]||{}});r[l]=yu({},h[0],h[1],h[2])}},a=0,s=Object.keys(r);a<s.length;a++){var o=s[a];i(o)}return r}function F0t(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=r;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function B0t(t,e){var n,r,i,a,s,o,l,c,u,f,d,h,p=IO(e.margin,40/t.scaleFactor()),m=(n=U0t(t,e.startY))!==null&&n!==void 0?n:p.top,y;e.showFoot===!0?y="everyPage":e.showFoot===!1?y="never":y=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var g;e.showHead===!0?g="everyPage":e.showHead===!1?g="never":g=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var v=(a=e.useCss)!==null&&a!==void 0?a:!1,w=e.theme||(v?"plain":"striped"),_=!!e.horizontalPageBreak,x=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:v,theme:w,startY:m,margin:p,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=e.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:g,showFoot:y,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(d=e.tableLineColor)!==null&&d!==void 0?d:200,horizontalPageBreak:_,horizontalPageBreakRepeat:x,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function U0t(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var s=n.startPageNumber+n.pageNumber-1;a=s===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function z0t(t,e,n){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(n){var o=she(t,e.html,n,s,e.useCss)||{};r=o.head||r,i=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||V0t(r,i,a);return{columns:l,head:r,body:i,foot:a}}function V0t(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(r)?c=i.length:c=a+(l>0?"_".concat(l):"");var u={dataKey:c};i.push(u)}}),i}var o3=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),W0t=function(t){ehe(e,t);function e(n,r,i,a,s,o){var l=t.call(this,n,r,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return e}(o3),H0t=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,a,s){for(var o=0,l=n;o<l.length;o++){var c=l[o],u=new W0t(e,this,r,i,a,s),f=c(u)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new o3(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new o3(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),lhe=function(){function t(e,n,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof the&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=n.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,a){var s=r.cells[a.index];if(!s)return 0;var o=n.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+o;return c>i?c:i},0)},t}(),che=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=IO(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),q0t=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(n=Math.max(n,s.styles.cellWidth))}return n},t}();function G0t(t,e){K0t(t,e);var n=[],r=0;e.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(e);s?a.width=s:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=l3(n,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=l3(n,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),Z0t(e),X0t(e,t),Y0t(e)}function K0t(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=ihe(t,e);e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){var u=e.hooks.didParseCell;e.callCellHooks(t,u,c,a,l,null);var f=c.padding("horizontal");c.contentWidth=c5(c.text,c.styles,t)+f;var d=c5(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,t);if(c.minReadableWidth=d+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||r===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var h=10/n;c.minWidth=c.styles.minCellWidth||h,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},f=u.cellWidth||u.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function l3(t,e,n){for(var r=e,i=t.reduce(function(h,p){return h+p.wrappedWidth},0),a=0;a<t.length;a++){var s=t[a],o=s.wrappedWidth/i,l=r*o,c=s.width+l,u=n(s),f=c<u?u:c;e-=f-s.width,s.width=f}if(e=Math.round(e*1e10)/1e10,e){var d=t.filter(function(h){return e<0?h.width>n(h):!0});d.length&&(e=l3(d,e,n))}return e}function Y0t(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var a=r[i],s=0,o=t.columns;s<o.length;s++){var l=o[s],c=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,n=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete e[l.index];else{var u=a.cells[l.index];if(!u)continue;if(u.height=a.height,u.rowSpan>1){var f=r.length-i,d=u.rowSpan>f?f:u.rowSpan;e[l.index]={cell:u,left:d,row:a}}}}}function Z0t(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,a=0,s=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(s-=1,s>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(i){var c=i;delete r.cells[l.index],i=null,c.width=l.width+a}else{var c=r.cells[l.index];if(!c)continue;if(s=c.colSpan,a=0,c.colSpan>1){i=c,a+=l.width;continue}c.width=l.width+a}}}function X0t(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var a=i[r],s=0,o=t.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){e.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=e.splitTextToSize(c.text,u+1/e.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=YG(c.text,u,c.styles,e,"...");else if(c.styles.overflow==="hidden")c.text=YG(c.text,u,c.styles,e,"");else if(typeof c.styles.overflow=="function"){var f=c.styles.overflow(c.text,u);typeof f=="string"?c.text=[f]:c.text=f}c.contentHeight=c.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var d=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<d*c.rowSpan?n={height:d,count:c.rowSpan}:n&&n.count>0&&n.height>d&&(d=n.height),d>a.height&&(a.height=d)}}n.count--}}function YG(t,e,n,r,i){return t.map(function(a){return J0t(a,e,n,r,i)})}function J0t(t,e,n,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=c5(t,n,r))return t;for(;e<c5(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function uhe(t,e){var n=new Zg(t),r=Q0t(e,n.scaleFactor()),i=new H0t(e,r);return G0t(n,i),n.applyStyles(n.userStyles),i}function Q0t(t,e){var n=t.content,r=twt(n.columns);if(n.head.length===0){var i=ZG(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=ZG(r,"foot");i&&n.foot.push(i)}var a=t.settings.theme,s=t.styles;return{columns:r,head:kN("head",n.head,r,s,a,e),body:kN("body",n.body,r,s,a,e),foot:kN("foot",n.foot,r,s,a,e)}}function kN(t,e,n,r,i,a){var s={},o=e.map(function(l,c){for(var u=0,f={},d=0,h=0,p=0,m=n;p<m.length;p++){var y=m[p];if(s[y.index]==null||s[y.index].left===0)if(h===0){var g=void 0;Array.isArray(l)?g=l[y.index-d-u]:g=l[y.dataKey];var v={};typeof g=="object"&&!Array.isArray(g)&&(v=(g==null?void 0:g.styles)||{});var w=nwt(t,y,c,i,r,a,v),_=new che(g,w,t);f[y.dataKey]=_,f[y.index]=_,h=_.colSpan-1,s[y.index]={left:_.rowSpan-1,times:h}}else h--,d++;else s[y.index].left--,h=s[y.index].times,u++}return new lhe(l,c,t,f)});return o}function ZG(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=ewt(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function ewt(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function twt(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new q0t(i,e,n)})}function nwt(t,e,n,r,i,a,s){var o=N0t(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var c=yu({},o.table,o[t],i.styles,l),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},f=t==="body"?u:{},d=t==="body"&&n%2===0?yu({},o.alternateRow,i.alternateRowStyles):{},h=P0t(a),p=yu({},h,c,d,f);return yu(p,s)}function rwt(t,e,n){var r;n===void 0&&(n={});var i=ihe(t,e),a=new Map,s=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(d){var h=e.columns.find(function(p){return p.dataKey===d||p.index===d});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var c=!0,u=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;u<e.columns.length;){if(a.has(u)){u++;continue}var f=e.columns[u].wrappedWidth;if(c||i>=f)c=!1,s.push(u),o.push(e.columns[u]),i-=f;else break;u++}return{colIndexes:s,columns:o,lastIndex:u-1}}function iwt(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=rwt(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function fhe(t,e){var n=e.settings,r=n.startY,i=n.margin,a={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+i.bottom+s;if(n.pageBreak==="avoid"){var l=e.body,c=l.reduce(function(d,h){return d+h.height},0);o+=c}var u=new Zg(t);(n.pageBreak==="always"||n.startY!=null&&o>u.pageSize().height)&&(hhe(u),a.y=i.top),e.callWillDrawPageHooks(u,a);var f=yu({},a);e.startPageNumber=u.pageNumber(),n.horizontalPageBreak?awt(u,e,f,a):(u.applyStyles(u.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(d){return Vu(u,e,d,a,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(d,h){var p=h===e.body.length-1;u5(u,e,d,p,f,a,e.columns)}),u.applyStyles(u.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(d){return Vu(u,e,d,a,e.columns)})),nhe(u,e,f,a),e.callEndPageHooks(u,a),e.finalY=a.y,t.lastAutoTable=e,u.applyStyles(u.userStyles)}function awt(t,e,n,r){var i=iwt(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,u){t.applyStyles(t.userStyles),u>0?Rw(t,e,n,r,c.columns,!0):XG(t,e,r,c.columns),swt(t,e,n,r,c.columns),ON(t,e,r,c.columns)});else for(var s=-1,o=i[0],l=function(){var c=s;if(o){t.applyStyles(t.userStyles);var u=o.columns;s>=0?Rw(t,e,n,r,u,!0):XG(t,e,r,u),c=JG(t,e,s+1,r,u),ON(t,e,r,u)}var f=c-s;i.slice(1).forEach(function(d){t.applyStyles(t.userStyles),Rw(t,e,n,r,d.columns,!0),JG(t,e,s+1,r,d.columns,f),ON(t,e,r,d.columns)}),s=c};s<e.body.length-1;)l()}function XG(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return Vu(t,e,a,n,r)})}function swt(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(a,s){var o=s===e.body.length-1;u5(t,e,a,o,n,r,i)})}function JG(t,e,n,r,i,a){t.applyStyles(t.userStyles),a=a??e.body.length;var s=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,s).forEach(function(l,c){var u=n+c===e.body.length-1,f=dhe(t,e,u,r);l.canEntireRowFit(f,i)&&(Vu(t,e,l,r,i),o=n+c)}),o}function ON(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return Vu(t,e,a,n,r)})}function owt(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function lwt(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var a=0,s=0,o=n.columns;s<o.length;s++){var l=o[s],c=t.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new che(c.raw,c.styles,c.section);u=yu(u,c),u.text=[];var f=owt(c,e,r);c.text.length>f&&(u.text=c.text.splice(f,c.text.length));var d=r.scaleFactor(),h=r.getLineHeightFactor();c.contentHeight=c.getContentHeight(d,h),c.contentHeight>=e&&(c.contentHeight=e,u.styles.minCellHeight-=e),c.contentHeight>t.height&&(t.height=c.contentHeight),u.contentHeight=u.getContentHeight(d,h),u.contentHeight>a&&(a=u.contentHeight),i[l.index]=u}}var p=new lhe(t.raw,-1,t.section,i,!0);p.height=a;for(var m=0,y=n.columns;m<y.length;m++){var l=y[m],u=p.cells[l.index];u&&(u.height=p.height);var c=t.cells[l.index];c&&(c.height=t.height)}return p}function cwt(t,e,n,r){var i=t.pageSize().height,a=r.settings.margin,s=a.top+a.bottom,o=i-s;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),c=l<n;if(l>o)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=e.hasRowSpan(r.columns),f=e.getMaxCellHeight(r.columns)>o;return f?(u&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||r.settings.rowPageBreak==="avoid")}function u5(t,e,n,r,i,a,s){var o=dhe(t,e,r,a);if(n.canEntireRowFit(o,s))Vu(t,e,n,a,s);else if(cwt(t,n,o,e)){var l=lwt(n,o,e,t);Vu(t,e,n,a,s),Rw(t,e,i,a,s),u5(t,e,l,r,i,a,s)}else Rw(t,e,i,a,s),u5(t,e,n,r,i,a,s)}function Vu(t,e,n,r,i){r.x=e.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var c=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(c===!1){r.x+=o.width;continue}uwt(t,l,r);var u=l.getTextPos();Qde(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function uwt(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=rhe(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),fwt(t,e,n,r.lineWidth))}function fwt(t,e,n,r){var i,a,s,o;r.top&&(i=n.x,a=n.y,s=n.x+e.width,o=n.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,a,s,o)),r.bottom&&(i=n.x,a=n.y+e.height,s=n.x+e.width,o=n.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,a,s,o)),r.left&&(i=n.x,a=n.y,s=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,i,a,s,o)),r.right&&(i=n.x+e.width,a=n.y,s=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,i,a,s,o));function l(c,u,f,d,h){t.getDocument().setLineWidth(c),t.getDocument().line(u,f,d,h,"S")}}function dhe(t,e,n,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function Rw(t,e,n,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return Vu(t,e,o,r,i)}),e.callEndPageHooks(t,r);var s=e.settings.margin;nhe(t,e,n,r),hhe(t),e.pageNumber++,r.x=s.left,r.y=s.top,n.y=s.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return Vu(t,e,o,r,i)}),t.applyStyles(t.userStyles))}function hhe(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function dwt(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=ohe(this,r),a=uhe(this,i);return fhe(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){Qde(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Zg.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Zg.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Zg(this),a=she(i,e,window,n,!1),s=a.head,o=a.body,l=((r=s[0])===null||r===void 0?void 0:r.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var TN;function hwt(t,e){var n=ohe(t,e),r=uhe(t,n);fhe(t,r)}try{if(typeof window<"u"&&window){var QG=window,eK=QG.jsPDF||((TN=QG.jspdf)===null||TN===void 0?void 0:TN.jsPDF);eK&&dwt(eK)}}catch(t){console.error("Could not apply autoTable plugin",t)}const pwt=()=>{const{expenses:t,categories:e,formatCurrency:n,settings:r}=Gu(),[i,a]=k.useState("all"),[s,o]=k.useState("all"),[l,c]=k.useState(null),[u,f]=k.useState(null),d=k.useMemo(()=>t.filter(y=>{const g=new Date(y.date),v=new Date;let w=!0;i==="month"?w=g.getMonth()===v.getMonth()&&g.getFullYear()===v.getFullYear():i==="year"?w=g.getFullYear()===v.getFullYear():i==="custom"&&(l&&u?w=g>=l&&g<=u:l?w=g>=l:u&&(w=g<=u));const _=s==="all"||y.category_name===s;return w&&_}),[t,i,s,l,u]),h=k.useMemo(()=>d.reduce((y,g)=>y+g.amount,0),[d]),p=y=>{try{const{locale:g,code:v}=r.currency;return new Intl.NumberFormat(g,{style:"currency",currency:v,currencyDisplay:"code"}).format(y).replace(/\u00a0/g," ").replace(/\u202f/g," ")}catch{return(y==null?void 0:y.toLocaleString())||"0"}},m=()=>{const y=new _t;y.setFontSize(20),y.setTextColor(40),y.text("Spend-Mind Expense Report",14,22),y.setFontSize(10),y.setTextColor(100),y.text(`Generated on: ${new Date().toLocaleDateString()}`,14,30);let g="All Time";if(i==="month")g="Current Month";else if(i==="year")g="Current Year";else if(i==="custom"){const w=l?l.toLocaleDateString():"Beginning",_=u?u.toLocaleDateString():"Present";g=`${w} to ${_}`}y.text(`Filter: ${g}`,14,35),y.text(`Category: ${s==="all"?"All Categories":s}`,14,40),y.setDrawColor(200),y.setFillColor(245,247,250),y.rect(14,45,182,15,"F"),y.setFontSize(12),y.setTextColor(40),y.text(`Total Spending in Period: ${p(h)}`,20,54);const v=d.map(w=>[new Date(w.date).toLocaleDateString(),w.description||"N/A",w.category_name,p(w.amount)]);hwt(y,{startY:65,head:[["Date","Description","Category","Amount"]],body:v,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:255,fontSize:10,fontStyle:"bold",halign:"center"},columnStyles:{3:{halign:"right"}},styles:{fontSize:9,cellPadding:3,font:"helvetica"},alternateRowStyles:{fillColor:[249,250,251]}}),y.save(`SpendMind_Report_${new Date().toISOString().split("T")[0]}.pdf`)};return S.jsxs("div",{className:"space-y-8 pb-8",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground font-outfit transition-colors",children:"Expense Reports"}),S.jsx("p",{className:"text-muted-foreground transition-colors",children:"Generate and export detailed spending summaries."})]}),S.jsxs(lr,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm transition-all overflow-hidden",children:[S.jsx(ts,{className:"border-b border-border pb-6 bg-muted/30",children:S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[S.jsxs("div",{className:"flex flex-wrap gap-3",children:[S.jsxs("div",{className:"relative group",children:[S.jsx(y$,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-hover:text-foreground transition-colors"}),S.jsxs("select",{className:"bg-background border-border text-foreground text-sm rounded-lg pl-10 pr-10 py-2 appearance-none focus:ring-1 focus:ring-cyan-500 outline-none hover:bg-muted transition-colors cursor-pointer",value:i,onChange:y=>a(y.target.value),children:[S.jsx("option",{value:"all",children:"All Time"}),S.jsx("option",{value:"month",children:"This Month"}),S.jsx("option",{value:"year",children:"This Year"}),S.jsx("option",{value:"custom",children:"Custom Range"})]}),S.jsx(sE,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-hover:text-foreground transition-colors"})]}),i==="custom"&&S.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-300",children:[S.jsx(K4,{date:l,setDate:c,className:"w-[150px] h-9 text-xs shadow-sm"}),S.jsx("span",{className:"text-muted-foreground text-xs font-medium",children:"to"}),S.jsx(K4,{date:u,setDate:f,className:"w-[150px] h-9 text-xs shadow-sm"})]}),S.jsxs("div",{className:"relative group",children:[S.jsx(w$,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-hover:text-foreground transition-colors"}),S.jsxs("select",{className:"bg-background border-border text-foreground text-sm rounded-lg pl-10 pr-10 py-2 appearance-none focus:ring-1 focus:ring-cyan-500 outline-none hover:bg-muted transition-colors cursor-pointer",value:s,onChange:y=>o(y.target.value),children:[S.jsx("option",{value:"all",children:"All Categories"}),e.map(y=>S.jsx("option",{value:y,children:y},y))]}),S.jsx(sE,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-hover:text-foreground transition-colors"})]})]}),S.jsxs(sn,{className:"bg-cyan-500 hover:bg-cyan-600 text-white font-bold gap-2 shadow-sm transition-all shadow-cyan-500/20 active:scale-95",onClick:m,children:[S.jsx(Abe,{className:"h-4 w-4"})," Export PDF"]})]})}),S.jsxs(br,{className:"pt-8",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[S.jsxs("div",{className:"p-4 bg-accent/20 rounded-xl border border-border/50 shadow-sm transition-all hover:bg-accent/30",children:[S.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest mb-1.5 px-0.5",children:"Total Period Spending"}),S.jsx("p",{className:"text-xl font-bold text-foreground",children:n(h)})]}),S.jsxs("div",{className:"p-4 bg-accent/20 rounded-xl border border-border/50 shadow-sm transition-all hover:bg-accent/30",children:[S.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest mb-1.5 px-0.5",children:"Expense Count"}),S.jsx("p",{className:"text-xl font-bold text-foreground",children:d.length})]})]}),S.jsxs("div",{className:"overflow-x-auto",children:[S.jsxs("table",{className:"w-full text-sm text-left",children:[S.jsx("thead",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest bg-muted/20",children:S.jsxs("tr",{children:[S.jsx("th",{className:"py-3 px-4 rounded-l-lg font-bold",children:"Date"}),S.jsx("th",{className:"py-3 px-4 font-bold",children:"Description"}),S.jsx("th",{className:"py-3 px-4 font-bold",children:"Category"}),S.jsx("th",{className:"py-3 px-4 text-right rounded-r-lg font-bold",children:"Amount"})]})}),S.jsx("tbody",{className:"divide-y divide-border/50",children:d.length>0?d.slice(0,10).map(y=>S.jsxs("tr",{className:"text-foreground/80 hover:bg-muted/50 transition-colors group",children:[S.jsx("td",{className:"py-4 px-4 font-medium",children:new Date(y.date).toLocaleDateString()}),S.jsx("td",{className:"py-4 px-4 font-bold text-foreground group-hover:text-primary transition-colors",children:y.description||"Expense"}),S.jsx("td",{className:"py-4 px-4 text-xs",children:S.jsx("span",{className:"bg-secondary text-secondary-foreground px-2 py-1 rounded-md font-bold text-[10px] uppercase tracking-tighter",children:y.category_name})}),S.jsxs("td",{className:"py-4 px-4 text-right font-bold text-foreground",children:["-",n(y.amount)]})]},y.id)):S.jsx("tr",{children:S.jsx("td",{colSpan:"4",className:"py-12 text-center text-muted-foreground italic font-medium",children:"No expenses found for the selected filters."})})})]}),d.length>10&&S.jsx("p",{className:"mt-4 text-center text-[10px] text-muted-foreground font-bold uppercase tracking-widest opacity-60",children:"Showing first 10 transactions. Export PDF for full report."})]})]})]})]})};var RO="Tabs",[mwt]=kc(RO,[z5]),phe=z5(),[gwt,E6]=mwt(RO),mhe=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=t,u=R1(o),[f,d]=wd({prop:r,onChange:i,defaultProp:a??"",caller:RO});return S.jsx(gwt,{scope:n,baseId:yl(),value:f,onValueChange:d,orientation:s,dir:u,activationMode:l,children:S.jsx(Bt.div,{dir:u,"data-orientation":s,...c,ref:e})})});mhe.displayName=RO;var ghe="TabsList",yhe=k.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=E6(ghe,n),s=phe(n);return S.jsx(KX,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:S.jsx(Bt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});yhe.displayName=ghe;var vhe="TabsTrigger",whe=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,s=E6(vhe,n),o=phe(n),l=xhe(s.baseId,r),c=She(s.baseId,r),u=r===s.value;return S.jsx(YX,{asChild:!0,...o,focusable:!i,active:u,children:S.jsx(Bt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:e,onMouseDown:rt(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?s.onValueChange(r):f.preventDefault()}),onKeyDown:rt(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(r)}),onFocus:rt(t.onFocus,()=>{const f=s.activationMode!=="manual";!u&&!i&&f&&s.onValueChange(r)})})})});whe.displayName=vhe;var bhe="TabsContent",_he=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...s}=t,o=E6(bhe,n),l=xhe(o.baseId,r),c=She(o.baseId,r),u=r===o.value,f=k.useRef(u);return k.useEffect(()=>{const d=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(d)},[]),S.jsx(Cl,{present:i||u,children:({present:d})=>S.jsx(Bt.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0,...s,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:d&&a})})});_he.displayName=bhe;function xhe(t,e){return`${t}-trigger-${e}`}function She(t,e){return`${t}-content-${e}`}var ywt=mhe,Ehe=yhe,Ahe=whe,khe=_he;const vwt=ywt,Ohe=k.forwardRef(({className:t,...e},n)=>S.jsx(Ehe,{ref:n,className:xt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Ohe.displayName=Ehe.displayName;const PS=k.forwardRef(({className:t,...e},n)=>S.jsx(Ahe,{ref:n,className:xt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));PS.displayName=Ahe.displayName;const NS=k.forwardRef(({className:t,...e},n)=>S.jsx(khe,{ref:n,className:xt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));NS.displayName=khe.displayName;const wwt=()=>{const{categories:t,budgetLimits:e,updateLimit:n,settings:r}=Gu(),[i,a]=k.useState(e),[s,o]=k.useState(!1);k.useEffect(()=>{a(e)},[e]);const l=(u,f)=>{a(d=>({...d,[u]:f?parseFloat(f):""})),o(!1)},c=()=>{t.forEach(u=>{n(u,i[u]?parseFloat(i[u]):0)}),o(!0),setTimeout(()=>o(!1),2e3)};return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("div",{}),S.jsxs(sn,{onClick:c,className:"gap-2",children:[S.jsx(Bbe,{className:"h-4 w-4"}),s?"Saved!":"Save Changes"]})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>{var f;return S.jsxs(lr,{className:"group hover:border-primary/50 transition-colors",children:[S.jsxs(ts,{className:"flex flex-row items-center gap-4 pb-2",children:[S.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:S.jsx(dw,{className:"h-5 w-5"})}),S.jsx($s,{className:"text-lg font-bold",children:u})]}),S.jsxs(br,{className:"space-y-4",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsxs(Xi,{htmlFor:`limit-${u}`,children:["Monthly Limit (",((f=r==null?void 0:r.currency)==null?void 0:f.symbol)||"$",")"]}),S.jsx($a,{id:`limit-${u}`,type:"number",min:"0",placeholder:"0.00",value:i[u]!==void 0?i[u]:"",onChange:d=>l(u,d.target.value)})]}),S.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[S.jsx(eX,{className:"h-3 w-3"}),"Set to 0 to disable warnings"]})]})]},u)})})]})},bwt=()=>{const{settings:t,updateSettings:e,availableCurrencies:n}=Gu(),r=i=>{const a=n.find(s=>s.code===i);a&&e({currency:{code:a.code,symbol:a.symbol,locale:a.locale}})};return S.jsx("div",{className:"space-y-6",children:S.jsxs(lr,{children:[S.jsx(ts,{children:S.jsxs($s,{className:"flex items-center gap-2",children:[S.jsx(kbe,{className:"h-5 w-5 text-primary"}),"Regional Settings"]})}),S.jsx(br,{className:"space-y-4",children:S.jsxs("div",{className:"grid gap-2",children:[S.jsx(Xi,{htmlFor:"currency",children:"Currency & Locale"}),S.jsxs(mfe,{value:t.currency.code,onValueChange:r,children:[S.jsx(o6,{id:"currency",children:S.jsx(gfe,{placeholder:"Select currency"})}),S.jsx(l6,{children:n.map(i=>S.jsx(c6,{value:i.code,children:S.jsxs("span",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"text-muted-foreground w-6 text-center font-mono",children:i.symbol}),i.name," (",i.code,")"]})},i.code))})]}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"This will update formatting for all amounts across the application."})]})})]})})},_wt=["Food & Dining","Transportation","Housing","Entertainment","Health","Shopping","Salary","Education","Travel","Utilities"],xwt=()=>{const{categoriesRaw:t,addCategory:e,deleteCategory:n,expenses:r}=Gu(),[i,a]=k.useState(""),[s,o]=k.useState(!1),[l,c]=k.useState(null),u=t.map(m=>m.name.toLowerCase()),f=_wt.filter(m=>!u.includes(m.toLowerCase())),d=(m=i)=>{const y=typeof m=="string"?m:i;y.trim()&&(e(y.trim()),a(""))},h=m=>{if(r.some(g=>g.category===m.name)){alert(`Cannot delete '${m.name}' because it is used in existing expenses.`);return}c(m),o(!0)},p=()=>{l&&(n(l.id),c(null),o(!1))};return S.jsxs("div",{className:"space-y-6",children:[S.jsxs(lr,{children:[S.jsxs(ts,{children:[S.jsxs($s,{className:"flex items-center gap-2",children:[S.jsx(w$,{className:"h-5 w-5 text-primary"}),"Manage Categories"]}),S.jsx(Lu,{children:"Add or remove categories for your expenses."})]}),S.jsxs(br,{className:"space-y-6",children:[S.jsxs("div",{className:"flex gap-2",children:[S.jsxs("div",{className:"grid gap-2 flex-1",children:[S.jsx(Xi,{htmlFor:"new-category",className:"sr-only",children:"New Category"}),S.jsx($a,{id:"new-category",placeholder:"Enter category name...",value:i,onChange:m=>a(m.target.value),onKeyDown:m=>m.key==="Enter"&&d()})]}),S.jsxs(sn,{onClick:()=>d(),children:[S.jsx(ab,{className:"h-4 w-4 mr-2"}),"Add"]})]}),f.length>0&&S.jsxs("div",{className:"space-y-3",children:[S.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Suggested Categories"}),S.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(m=>S.jsxs(sn,{variant:"outline",size:"sm",className:"h-8 rounded-full border-slate-700 bg-slate-800/30 hover:bg-cyan-500/10 hover:border-cyan-500/50 hover:text-cyan-400 transition-all text-[11px]",onClick:()=>d(m),children:[S.jsx(ab,{className:"h-3 w-3 mr-1"}),m]},m))})]}),S.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[S.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4",children:"Your Categories"}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:t&&t.map(m=>S.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors group",children:[S.jsx("span",{className:"font-medium",children:m.name}),S.jsx(sn,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>h(m),children:S.jsx(b$,{className:"h-4 w-4"})})]},m.id))})]})]})]}),S.jsx(Cue,{open:s,onOpenChange:o,children:S.jsxs(r6,{children:[S.jsx(i6,{children:S.jsx(a6,{children:"Delete Category"})}),S.jsxs("div",{className:"py-4",children:[S.jsxs("p",{children:["Are you sure you want to delete"," ",S.jsx("strong",{children:l==null?void 0:l.name}),"?"]}),S.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This action cannot be undone."})]}),S.jsxs(Nue,{children:[S.jsx(jdt,{asChild:!0,children:S.jsx(sn,{variant:"outline",children:"Cancel"})}),S.jsx(sn,{variant:"destructive",onClick:p,children:"Delete"})]})]})})]})},Swt=()=>S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Settings"}),S.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your preferences and application data."})]}),S.jsxs(vwt,{defaultValue:"general",className:"space-y-4",children:[S.jsxs(Ohe,{children:[S.jsxs(PS,{value:"general",className:"flex items-center gap-2",children:[S.jsx(sX,{className:"h-4 w-4"}),"General"]}),S.jsxs(PS,{value:"categories",className:"flex items-center gap-2",children:[S.jsx(Cbe,{className:"h-4 w-4"}),"Categories"]}),S.jsxs(PS,{value:"budget",className:"flex items-center gap-2",children:[S.jsx(R5,{className:"h-4 w-4"}),"Budget & Limits"]})]}),S.jsx(NS,{value:"general",className:"space-y-4",children:S.jsx(bwt,{})}),S.jsx(NS,{value:"categories",className:"space-y-4",children:S.jsx(xwt,{})}),S.jsx(NS,{value:"budget",className:"space-y-4",children:S.jsx(wwt,{})})]})]});var The=["PageUp","PageDown"],Che=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Phe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Rv="Slider",[c3,Ewt,Awt]=$5(Rv),[Nhe]=kc(Rv,[Awt]),[kwt,jO]=Nhe(Rv),Ihe=k.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:a=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:f=()=>{},onValueCommit:d=()=>{},inverted:h=!1,form:p,...m}=t,y=k.useRef(new Set),g=k.useRef(0),w=s==="horizontal"?Owt:Twt,[_=[],x]=wd({prop:u,defaultProp:c,onChange:N=>{var U;(U=[...y.current][g.current])==null||U.focus(),f(N)}}),E=k.useRef(_);function T(N){const j=Rwt(_,N);M(N,j)}function O(N){M(N,g.current)}function R(){const N=E.current[g.current];_[g.current]!==N&&d(_)}function M(N,j,{commit:U}={commit:!1}){const B=Lwt(a),V=Dwt(Math.round((N-r)/a)*a+r,B),Y=n5(V,[r,i]);x((X=[])=>{const z=Nwt(X,Y,j);if(Mwt(z,l*a)){g.current=z.indexOf(Y);const G=String(z)!==String(X);return G&&U&&d(z),G?z:X}else return X})}return S.jsx(kwt,{scope:t.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:g,thumbs:y.current,values:_,orientation:s,form:p,children:S.jsx(c3.Provider,{scope:t.__scopeSlider,children:S.jsx(c3.Slot,{scope:t.__scopeSlider,children:S.jsx(w,{"aria-disabled":o,"data-disabled":o?"":void 0,...m,ref:e,onPointerDown:rt(m.onPointerDown,()=>{o||(E.current=_)}),min:r,max:i,inverted:h,onSlideStart:o?void 0:T,onSlideMove:o?void 0:O,onSlideEnd:o?void 0:R,onHomeKeyDown:()=>!o&&M(r,0,{commit:!0}),onEndKeyDown:()=>!o&&M(i,_.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:j})=>{if(!o){const V=The.includes(N.key)||N.shiftKey&&Che.includes(N.key)?10:1,Y=g.current,X=_[Y],z=a*V*j;M(X+z,Y,{commit:!0})}}})})})})});Ihe.displayName=Rv;var[Rhe,jhe]=Nhe(Rv,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Owt=k.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:a,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,[f,d]=k.useState(null),h=dn(e,w=>d(w)),p=k.useRef(void 0),m=R1(i),y=m==="ltr",g=y&&!a||!y&&a;function v(w){const _=p.current||f.getBoundingClientRect(),x=[0,_.width],T=A6(x,g?[n,r]:[r,n]);return p.current=_,T(w-_.left)}return S.jsx(Rhe,{scope:t.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:S.jsx($he,{dir:m,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=v(w.clientX);s==null||s(_)},onSlideMove:w=>{const _=v(w.clientX);o==null||o(_)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:w=>{const x=Phe[g?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:x?-1:1})}})})}),Twt=k.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...c}=t,u=k.useRef(null),f=dn(e,u),d=k.useRef(void 0),h=!i;function p(m){const y=d.current||u.current.getBoundingClientRect(),g=[0,y.height],w=A6(g,h?[r,n]:[n,r]);return d.current=y,w(m-y.top)}return S.jsx(Rhe,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:S.jsx($he,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const y=p(m.clientY);a==null||a(y)},onSlideMove:m=>{const y=p(m.clientY);s==null||s(y)},onSlideEnd:()=>{d.current=void 0,o==null||o()},onStepKeyDown:m=>{const g=Phe[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:g?-1:1})}})})}),$he=k.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...c}=t,u=jO(Rv,n);return S.jsx(Bt.span,{...c,ref:e,onKeyDown:rt(t.onKeyDown,f=>{f.key==="Home"?(s(f),f.preventDefault()):f.key==="End"?(o(f),f.preventDefault()):The.concat(Che).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:rt(t.onPointerDown,f=>{const d=f.target;d.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(d)?d.focus():r(f)}),onPointerMove:rt(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:rt(t.onPointerUp,f=>{const d=f.target;d.hasPointerCapture(f.pointerId)&&(d.releasePointerCapture(f.pointerId),a(f))})})}),Mhe="SliderTrack",Lhe=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=jO(Mhe,n);return S.jsx(Bt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});Lhe.displayName=Mhe;var u3="SliderRange",Dhe=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=jO(u3,n),a=jhe(u3,n),s=k.useRef(null),o=dn(e,s),l=i.values.length,c=i.values.map(d=>Uhe(d,i.min,i.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return S.jsx(Bt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...t.style,[a.startEdge]:u+"%",[a.endEdge]:f+"%"}})});Dhe.displayName=u3;var f3="SliderThumb",Fhe=k.forwardRef((t,e)=>{const n=Ewt(t.__scopeSlider),[r,i]=k.useState(null),a=dn(e,o=>i(o)),s=k.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return S.jsx(Cwt,{...t,ref:a,index:s})}),Cwt=k.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...a}=t,s=jO(f3,n),o=jhe(f3,n),[l,c]=k.useState(null),u=dn(e,v=>c(v)),f=l?s.form||!!l.closest("form"):!0,d=RX(l),h=s.values[r],p=h===void 0?0:Uhe(h,s.min,s.max),m=Iwt(r,s.values.length),y=d==null?void 0:d[o.size],g=y?jwt(y,p,o.direction):0;return k.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),S.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${p}% + ${g}px)`},children:[S.jsx(c3.ItemSlot,{scope:t.__scopeSlider,children:S.jsx(Bt.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":s.min,"aria-valuenow":h,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:u,style:h===void 0?{display:"none"}:t.style,onFocus:rt(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),f&&S.jsx(Bhe,{name:i??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:h},r)]})});Fhe.displayName=f3;var Pwt="RadioBubbleInput",Bhe=k.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=k.useRef(null),a=dn(i,r),s=Iue(e);return k.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const f=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(f)}},[s,e]),S.jsx(Bt.input,{style:{display:"none"},...n,ref:a,defaultValue:e})});Bhe.displayName=Pwt;function Nwt(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,a)=>i-a)}function Uhe(t,e,n){const a=100/(n-e)*(t-e);return n5(a,[0,100])}function Iwt(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Rwt(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function jwt(t,e,n){const r=t/2,a=A6([0,50],[0,r]);return(r-a(e)*n)*n}function $wt(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Mwt(t,e){if(e>0){const n=$wt(t);return Math.min(...n)>=e}return!0}function A6(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Lwt(t){return(String(t).split(".")[1]||"").length}function Dwt(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var zhe=Ihe,Fwt=Lhe,Bwt=Dhe,Uwt=Fhe;const Vhe=k.forwardRef(({className:t,...e},n)=>S.jsxs(zhe,{ref:n,className:xt("relative flex w-full touch-none select-none items-center",t),...e,children:[S.jsx(Fwt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:S.jsx(Bwt,{className:"absolute h-full bg-primary"})}),S.jsx(Uwt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Vhe.displayName=zhe.displayName;const zwt=async t=>{const{goals:e,expenses:n,categories:r,reductionRate:i}=t,a=await bne(),s=`You are the SpendMind AI Financial Advisor. 
  Your goal is to analyze the user's finances and provide a high-quality, prioritized action plan.
  
  You must return ONLY a JSON object with the following structure:
  {
    "recommendations": [
      {
        "id": "uuid",
        "priority": "high" | "medium" | "low",
        "type": "warning" | "success" | "optimization",
        "title": "Short descriptive title",
        "message": "Detailed explanation of the insight",
        "action": "Specific, actionable step to take",
        "color": "tailwind-color-classes" 
      }
    ],
    "totalPotentialSavings": number
  }

  Color guidelines (Tailwind classes):
  - high/warning: "text-red-500 bg-red-500/10 border-red-500/20"
  - medium/optimization: "text-amber-500 bg-amber-500/10 border-amber-500/20"
  - low/success: "text-emerald-500 bg-emerald-500/10 border-emerald-500/20"
  - indigo (generic): "text-indigo-500 bg-indigo-500/10 border-indigo-500/20"
  `,o=`
  Financial Goals: ${JSON.stringify(e)}
  Recent Expenses (Summary): ${JSON.stringify(n.slice(0,20))}
  Categories: ${JSON.stringify(r)}
  Spending Reduction Target: ${i}%
  
  Analyze the current spending patterns against the goals and reduction target. 
  Identify risks, calculate potential savings, and provide specific optimization steps.
  Be precise with numbers. Keep the tone professional but encouraging.
  `;try{const u=(await a.invoke([new Al(s),new Ma(o)])).content.match(/\{[\s\S]*\}/);if(u)return JSON.parse(u[0]);throw new Error("Failed to parse AI response as JSON")}catch(l){throw console.error("AI Advisor: Analysis failed",l),l}},Vwt=(t,e,n,r,i)=>{const a=[];let s=0;const o=e.reduce((h,p)=>h+p.amount,0),c=Math.max(0,5e3-o),u=n.map(h=>({name:h,amount:e.filter(p=>p.category===h).reduce((p,m)=>p+m.amount,0)})).sort((h,p)=>p.amount-h.amount),d=u.slice(0,3).reduce((h,p)=>h+p.amount,0)*(i/100);if(s+=d,t.forEach(h=>{const p=parseInt(h.months)||12,m=h.amount/p,y=c+d;y<m?a.push({id:crypto.randomUUID(),priority:"high",type:"warning",title:`Goal At Risk: ${h.title}`,message:`You need ${Math.round(m)}/mo but represent only ${Math.round(y)} potential savings.`,action:`Reduce spending in ${u[0].name} by an additional 10%`,color:"text-red-500 bg-red-500/10 border-red-500/20"}):a.push({id:crypto.randomUUID(),priority:"low",type:"success",title:`On Track: ${h.title}`,message:"With your current plan, you will reach this goal on time!",action:`Set up auto-deposit of ${Math.round(m)}`,color:"text-emerald-500 bg-emerald-500/10 border-emerald-500/20"})}),u.length>0){const h=u[0];a.push({id:crypto.randomUUID(),priority:"medium",type:"optimization",title:`Optimize: ${h.name}`,message:`${h.name} is your highest expense (${Math.round(h.amount)}).`,action:`Apply the ${i}% reduction target here to save ${Math.round(h.amount*(i/100))}/mo`,color:"text-amber-500 bg-amber-500/10 border-amber-500/20"})}return{recommendations:a,totalPotentialSavings:s}},Wwt=()=>{const{expenses:t,categories:e,budgetLimits:n,formatCurrency:r,goals:i,addGoal:a,deleteGoal:s}=Gu(),[o,l]=k.useState({title:"",amount:"",months:"12"}),[c,u]=k.useState(10),[f,d]=k.useState(null),[h,p]=k.useState(!1),m=g=>{g.preventDefault(),!(!o.title||!o.amount)&&(a(o),l({title:"",amount:"",months:"12"}))},y=async()=>{p(!0);try{const g=await zwt({goals:i,expenses:t,categories:e,reductionRate:c});d(g)}catch(g){console.error("AI Analysis failed:",g);const v=Vwt(i,t,e,n,c);d(v)}finally{p(!1)}};return S.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10",children:[S.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:S.jsxs("div",{children:[S.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2",children:[S.jsx(KF,{className:"h-8 w-8 text-indigo-500"}),"AI Financial Advisor"]}),S.jsx("p",{className:"text-muted-foreground mt-1",children:"Advanced analytics to optimize your savings strategy."})]})}),S.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"xl:col-span-1 space-y-6",children:[S.jsxs(lr,{className:"border-l-4 border-l-emerald-500 shadow-sm",children:[S.jsxs(ts,{children:[S.jsxs($s,{className:"flex items-center gap-2 text-lg",children:[S.jsx(lX,{className:"h-5 w-5 text-emerald-500"}),"Set Financial Goals"]}),S.jsx(Lu,{children:"Define clear targets for the AI to analyze."})]}),S.jsxs(br,{children:[S.jsxs("form",{onSubmit:m,className:"space-y-4",children:[S.jsxs("div",{className:"grid gap-2",children:[S.jsx(Xi,{children:"Goal Title"}),S.jsx($a,{placeholder:"e.g. Dream Vacation",value:o.title,onChange:g=>l({...o,title:g.target.value})})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"grid gap-2",children:[S.jsx(Xi,{children:"Target Amount"}),S.jsx($a,{type:"number",placeholder:"5000",value:o.amount,onChange:g=>l({...o,amount:g.target.value})})]}),S.jsxs("div",{className:"grid gap-2",children:[S.jsx(Xi,{children:"Timeline (Mo)"}),S.jsx($a,{type:"number",placeholder:"12",value:o.months,onChange:g=>l({...o,months:g.target.value})})]})]}),S.jsx(sn,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Add Goal"})]}),S.jsxs("div",{className:"mt-6 space-y-3",children:[S.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Active Goals"}),i.length===0&&S.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No goals active."}),i.map(g=>S.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg border bg-card/40 hover:bg-card/60 transition-colors group",children:[S.jsxs("div",{children:[S.jsx("div",{className:"font-semibold text-sm",children:g.title}),S.jsxs("div",{className:"text-xs text-muted-foreground",children:[r(g.amount)," by"," ",new Date(new Date().setMonth(new Date().getMonth()+parseInt(g.months))).toLocaleDateString(void 0,{month:"short",year:"numeric"})]})]}),S.jsx(sn,{variant:"ghost",size:"icon",onClick:()=>s(g.id),className:"h-7 w-7 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},g.id))]})]})]}),S.jsxs(lr,{className:"border-l-4 border-l-indigo-500 shadow-sm",children:[S.jsxs(ts,{children:[S.jsxs($s,{className:"flex items-center gap-2 text-lg",children:[S.jsx(YF,{className:"h-5 w-5 text-indigo-500"}),"Strategy Settings"]}),S.jsx(Lu,{children:"Adjust aggressiveness of savings."})]}),S.jsxs(br,{className:"space-y-6",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx(Xi,{children:"Spending Reduction Target"}),S.jsxs("span",{className:"text-sm font-bold text-indigo-500 bg-indigo-500/10 px-2 py-0.5 rounded",children:[c,"%"]})]}),S.jsx(Vhe,{defaultValue:[10],max:50,step:1,value:[c],onValueChange:g=>u(g[0]),className:"py-4"}),S.jsx("p",{className:"text-xs text-muted-foreground",children:"Target reduction for variable expenses to free up cash for goals."})]}),S.jsx(sn,{onClick:y,disabled:h,className:"w-full",size:"lg",children:h?"Analyzing...":"Run AI Analysis"})]})]})]}),S.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[!f&&!h&&S.jsxs(lr,{className:"h-full flex flex-col items-center justify-center p-12 border-dashed",children:[S.jsx("div",{className:"bg-primary/5 p-6 rounded-full mb-4",children:S.jsx(KF,{className:"h-12 w-12 text-primary/40"})}),S.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Ready to Analyze"}),S.jsx("p",{className:"text-muted-foreground text-center max-w-sm mt-2",children:'Add your financial goals and adjust your strategy settings, then click "Run AI Analysis" to generate personalized insights.'})]}),h&&S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsx("div",{className:"h-32 bg-primary/5 rounded-xl animate-pulse"}),S.jsx("div",{className:"h-32 bg-primary/5 rounded-xl animate-pulse"})]}),S.jsx("div",{className:"h-64 bg-primary/5 rounded-xl animate-pulse"})]}),f&&!h&&S.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsx(lr,{className:"bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border-indigo-500/20",children:S.jsxs(br,{className:"pt-6",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Potential Monthly Savings"}),S.jsx("h3",{className:"text-3xl font-bold text-indigo-500 mt-2",children:r(f.totalPotentialSavings)})]}),S.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-lg",children:S.jsx(Dbe,{className:"h-6 w-6 text-indigo-500"})})]}),S.jsxs("p",{className:"text-xs text-muted-foreground mt-4",children:["Based on ",c,"% reduction in top categories"]})]})}),S.jsx(lr,{className:"bg-card",children:S.jsxs(br,{className:"pt-6",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Recommendations"}),S.jsx("h3",{className:"text-3xl font-bold text-foreground mt-2",children:f.recommendations.length})]}),S.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:S.jsx(Pbe,{className:"h-6 w-6 text-primary"})})]}),S.jsxs("div",{className:"flex gap-2 mt-4",children:[S.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-500/10 text-red-500",children:[f.recommendations.filter(g=>g.priority==="high").length," ","High"]}),S.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-500/10 text-amber-500",children:[f.recommendations.filter(g=>g.priority==="medium").length," ","Med"]})]})]})})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[S.jsx(Hwt,{className:"h-5 w-5 text-indigo-500"}),"Personalized Action Plan"]}),f.recommendations.sort(g=>g.priority==="high"?-1:1).map(g=>S.jsx(lr,{className:`border-l-4 ${g.priority==="high"?"border-l-red-500":g.priority==="medium"?"border-l-amber-500":"border-l-emerald-500"}`,children:S.jsx(br,{className:"pt-6",children:S.jsxs("div",{className:"flex gap-4 items-start",children:[S.jsxs("div",{className:`p-2 rounded-full shrink-0 ${g.color.split(" ")[1]}`,children:[" ",g.type==="warning"&&S.jsx(eX,{className:`h-6 w-6 ${g.color.split(" ")[0]}`}),g.type==="optimization"&&S.jsx(YF,{className:`h-6 w-6 ${g.color.split(" ")[0]}`}),g.type==="success"&&S.jsx(wbe,{className:`h-6 w-6 ${g.color.split(" ")[0]}`})]}),S.jsxs("div",{className:"flex-1 space-y-1",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h4",{className:"font-bold text-lg",children:g.title}),S.jsxs("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded ${g.color}`,children:[g.priority," Priority"]})]}),S.jsx("p",{className:"text-muted-foreground",children:g.message}),S.jsxs("div",{className:"mt-4 bg-secondary/50 rounded-lg p-3 flex items-start gap-3",children:[S.jsx(gbe,{className:"h-4 w-4 text-primary mt-0.5"}),S.jsxs("div",{className:"text-sm",children:[S.jsxs("span",{className:"font-semibold text-foreground",children:["Action:"," "]}),S.jsx("span",{className:"text-muted-foreground",children:g.action})]})]})]})]})})},g.id))]})]})]})]})]})},Hwt=({className:t})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[S.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),S.jsx("path",{d:"M5 3v4"}),S.jsx("path",{d:"M9 5h4"}),S.jsx("path",{d:"M19 19v4"}),S.jsx("path",{d:"M15 21h4"})]});function qwt(){return S.jsx(Eve,{basename:"/Spend-Mind",children:S.jsx(dbe,{children:S.jsxs(eve,{children:[!1,S.jsxs(ro,{path:"/auth",element:S.jsx(SFe,{}),children:[S.jsx(ro,{path:"login",element:S.jsx(PFe,{})}),S.jsx(ro,{path:"signup",element:S.jsx(NFe,{})})]}),S.jsxs(ro,{path:"/",element:S.jsx(xFe,{}),children:[S.jsx(ro,{index:!0,element:S.jsx(hdt,{})}),S.jsx(ro,{path:"expenses",element:S.jsx(Mgt,{})}),S.jsx(ro,{path:"budgets",element:S.jsx(Lgt,{})}),S.jsx(ro,{path:"reports",element:S.jsx(pwt,{})}),S.jsx(ro,{path:"ai-advisor",element:S.jsx(Wwt,{})}),S.jsx(ro,{path:"settings",element:S.jsx(Swt,{})})]}),S.jsx(ro,{path:"*",element:S.jsx(d$,{to:"/",replace:!0})})]})})})}typeof window<"u"&&(window.global=window,window.process={env:{}});PN.createRoot(document.getElementById("root")).render(S.jsx(se.StrictMode,{children:S.jsx(N1e,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:S.jsx(qwt,{})})}));export{In as _,rx as c,wn as g};
