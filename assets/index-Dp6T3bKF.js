var q1e=Object.defineProperty;var K1e=(e,t,r)=>t in e?q1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var L=(e,t,r)=>K1e(e,typeof t!="symbol"?t+"":t,r);function Y1e(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var bS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var VJ={exports:{}},Y5={},WJ={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_=Symbol.for("react.element"),X1e=Symbol.for("react.portal"),Z1e=Symbol.for("react.fragment"),J1e=Symbol.for("react.strict_mode"),Q1e=Symbol.for("react.profiler"),ewe=Symbol.for("react.provider"),twe=Symbol.for("react.context"),rwe=Symbol.for("react.forward_ref"),nwe=Symbol.for("react.suspense"),iwe=Symbol.for("react.memo"),awe=Symbol.for("react.lazy"),z7=Symbol.iterator;function swe(e){return e===null||typeof e!="object"?null:(e=z7&&e[z7]||e["@@iterator"],typeof e=="function"?e:null)}var HJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GJ=Object.assign,qJ={};function Vv(e,t,r){this.props=e,this.context=t,this.refs=qJ,this.updater=r||HJ}Vv.prototype.isReactComponent={};Vv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function KJ(){}KJ.prototype=Vv.prototype;function vj(e,t,r){this.props=e,this.context=t,this.refs=qJ,this.updater=r||HJ}var wj=vj.prototype=new KJ;wj.constructor=vj;GJ(wj,Vv.prototype);wj.isPureReactComponent=!0;var V7=Array.isArray,YJ=Object.prototype.hasOwnProperty,xj={current:null},XJ={key:!0,ref:!0,__self:!0,__source:!0};function ZJ(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)YJ.call(t,n)&&!XJ.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:z_,type:e,key:a,ref:s,props:i,_owner:xj.current}}function owe(e,t){return{$$typeof:z_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bj(e){return typeof e=="object"&&e!==null&&e.$$typeof===z_}function lwe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var W7=/\/+/g;function QP(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lwe(""+e.key):t.toString(36)}function iA(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case z_:case X1e:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+QP(s,0):n,V7(i)?(r="",e!=null&&(r=e.replace(W7,"$&/")+"/"),iA(i,t,r,"",function(c){return c})):i!=null&&(bj(i)&&(i=owe(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(W7,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",V7(e))for(var o=0;o<e.length;o++){a=e[o];var l=n+QP(a,o);s+=iA(a,t,r,l,i)}else if(l=swe(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=n+QP(a,o++),s+=iA(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function _S(e,t,r){if(e==null)return e;var n=[],i=0;return iA(e,n,"","",function(a){return t.call(r,a,i++)}),n}function cwe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ws={current:null},aA={transition:null},uwe={ReactCurrentDispatcher:Ws,ReactCurrentBatchConfig:aA,ReactCurrentOwner:xj};function JJ(){throw Error("act(...) is not supported in production builds of React.")}Cr.Children={map:_S,forEach:function(e,t,r){_S(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return _S(e,function(){t++}),t},toArray:function(e){return _S(e,function(t){return t})||[]},only:function(e){if(!bj(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Cr.Component=Vv;Cr.Fragment=Z1e;Cr.Profiler=Q1e;Cr.PureComponent=vj;Cr.StrictMode=J1e;Cr.Suspense=nwe;Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uwe;Cr.act=JJ;Cr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=GJ({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=xj.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)YJ.call(t,l)&&!XJ.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:z_,type:e.type,key:i,ref:a,props:n,_owner:s}};Cr.createContext=function(e){return e={$$typeof:twe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ewe,_context:e},e.Consumer=e};Cr.createElement=ZJ;Cr.createFactory=function(e){var t=ZJ.bind(null,e);return t.type=e,t};Cr.createRef=function(){return{current:null}};Cr.forwardRef=function(e){return{$$typeof:rwe,render:e}};Cr.isValidElement=bj;Cr.lazy=function(e){return{$$typeof:awe,_payload:{_status:-1,_result:e},_init:cwe}};Cr.memo=function(e,t){return{$$typeof:iwe,type:e,compare:t===void 0?null:t}};Cr.startTransition=function(e){var t=aA.transition;aA.transition={};try{e()}finally{aA.transition=t}};Cr.unstable_act=JJ;Cr.useCallback=function(e,t){return Ws.current.useCallback(e,t)};Cr.useContext=function(e){return Ws.current.useContext(e)};Cr.useDebugValue=function(){};Cr.useDeferredValue=function(e){return Ws.current.useDeferredValue(e)};Cr.useEffect=function(e,t){return Ws.current.useEffect(e,t)};Cr.useId=function(){return Ws.current.useId()};Cr.useImperativeHandle=function(e,t,r){return Ws.current.useImperativeHandle(e,t,r)};Cr.useInsertionEffect=function(e,t){return Ws.current.useInsertionEffect(e,t)};Cr.useLayoutEffect=function(e,t){return Ws.current.useLayoutEffect(e,t)};Cr.useMemo=function(e,t){return Ws.current.useMemo(e,t)};Cr.useReducer=function(e,t,r){return Ws.current.useReducer(e,t,r)};Cr.useRef=function(e){return Ws.current.useRef(e)};Cr.useState=function(e){return Ws.current.useState(e)};Cr.useSyncExternalStore=function(e,t,r){return Ws.current.useSyncExternalStore(e,t,r)};Cr.useTransition=function(){return Ws.current.useTransition()};Cr.version="18.3.1";WJ.exports=Cr;var C=WJ.exports;const he=Hr(C),_j=Y1e({__proto__:null,default:he},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fwe=C,dwe=Symbol.for("react.element"),hwe=Symbol.for("react.fragment"),pwe=Object.prototype.hasOwnProperty,mwe=fwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gwe={key:!0,ref:!0,__self:!0,__source:!0};function QJ(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)pwe.call(t,n)&&!gwe.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:dwe,type:e,key:a,ref:s,props:i,_owner:mwe.current}}Y5.Fragment=hwe;Y5.jsx=QJ;Y5.jsxs=QJ;VJ.exports=Y5;var E=VJ.exports,T3={},eQ={exports:{}},Qo={},tQ={exports:{}},rQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,U){var se=Y.length;Y.push(U);e:for(;0<se;){var ue=se-1>>>1,I=Y[ue];if(0<i(I,U))Y[ue]=U,Y[se]=I,se=ue;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var U=Y[0],se=Y.pop();if(se!==U){Y[0]=se;e:for(var ue=0,I=Y.length,z=I>>>1;ue<z;){var H=2*(ue+1)-1,q=Y[H],F=H+1,D=Y[F];if(0>i(q,se))F<I&&0>i(D,q)?(Y[ue]=D,Y[F]=se,ue=F):(Y[ue]=q,Y[H]=se,ue=H);else if(F<I&&0>i(D,se))Y[ue]=D,Y[F]=se,ue=F;else break e}}return U}function i(Y,U){var se=Y.sortIndex-U.sortIndex;return se!==0?se:Y.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,f=null,d=3,h=!1,m=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(Y){for(var U=r(c);U!==null;){if(U.callback===null)n(c);else if(U.startTime<=Y)n(c),U.sortIndex=U.expirationTime,t(l,U);else break;U=r(c)}}function x(Y){if(p=!1,v(Y),!m)if(r(l)!==null)m=!0,Z(b);else{var U=r(c);U!==null&&J(x,U.startTime-Y)}}function b(Y,U){m=!1,p&&(p=!1,g(A),A=-1),h=!0;var se=d;try{for(v(U),f=r(l);f!==null&&(!(f.expirationTime>U)||Y&&!P());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,d=f.priorityLevel;var I=ue(f.expirationTime<=U);U=e.unstable_now(),typeof I=="function"?f.callback=I:f===r(l)&&n(l),v(U)}else n(l);f=r(l)}if(f!==null)var z=!0;else{var H=r(c);H!==null&&J(x,H.startTime-U),z=!1}return z}finally{f=null,d=se,h=!1}}var S=!1,T=null,A=-1,O=5,M=-1;function P(){return!(e.unstable_now()-M<O)}function N(){if(T!==null){var Y=e.unstable_now();M=Y;var U=!0;try{U=T(!0,Y)}finally{U?V():(S=!1,T=null)}}else S=!1}var V;if(typeof w=="function")V=function(){w(N)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=N,V=function(){G.postMessage(null)}}else V=function(){y(N,0)};function Z(Y){T=Y,S||(S=!0,V())}function J(Y,U){A=y(function(){Y(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,Z(b))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var se=d;d=U;try{return Y()}finally{d=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,U){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=d;d=Y;try{return U()}finally{d=se}},e.unstable_scheduleCallback=function(Y,U,se){var ue=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ue+se:ue):se=ue,Y){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=se+I,Y={id:u++,callback:U,priorityLevel:Y,startTime:se,expirationTime:I,sortIndex:-1},se>ue?(Y.sortIndex=se,t(c,Y),r(l)===null&&Y===r(c)&&(p?(g(A),A=-1):p=!0,J(x,se-ue))):(Y.sortIndex=I,t(l,Y),m||h||(m=!0,Z(b))),Y},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(Y){var U=d;return function(){var se=d;d=U;try{return Y.apply(this,arguments)}finally{d=se}}}})(rQ);tQ.exports=rQ;var ywe=tQ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vwe=C,Ko=ywe;function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nQ=new Set,zx={};function bm(e,t){Vy(e,t),Vy(e+"Capture",t)}function Vy(e,t){for(zx[e]=t,e=0;e<t.length;e++)nQ.add(t[e])}var Kf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k3=Object.prototype.hasOwnProperty,wwe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H7={},G7={};function xwe(e){return k3.call(G7,e)?!0:k3.call(H7,e)?!1:wwe.test(e)?G7[e]=!0:(H7[e]=!0,!1)}function bwe(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _we(e,t,r,n){if(t===null||typeof t>"u"||bwe(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Hs(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Va={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Va[e]=new Hs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Va[t]=new Hs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Va[e]=new Hs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Va[e]=new Hs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Va[e]=new Hs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Va[e]=new Hs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Va[e]=new Hs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Va[e]=new Hs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Va[e]=new Hs(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sj=/[\-:]([a-z])/g;function Ej(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sj,Ej);Va[t]=new Hs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sj,Ej);Va[t]=new Hs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sj,Ej);Va[t]=new Hs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Va[e]=new Hs(e,1,!1,e.toLowerCase(),null,!1,!1)});Va.xlinkHref=new Hs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Va[e]=new Hs(e,1,!1,e.toLowerCase(),null,!0,!0)});function Aj(e,t,r,n){var i=Va.hasOwnProperty(t)?Va[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_we(t,r,i,n)&&(r=null),n||i===null?xwe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var pd=vwe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,SS=Symbol.for("react.element"),Mg=Symbol.for("react.portal"),Dg=Symbol.for("react.fragment"),Tj=Symbol.for("react.strict_mode"),C3=Symbol.for("react.profiler"),iQ=Symbol.for("react.provider"),aQ=Symbol.for("react.context"),kj=Symbol.for("react.forward_ref"),O3=Symbol.for("react.suspense"),P3=Symbol.for("react.suspense_list"),Cj=Symbol.for("react.memo"),th=Symbol.for("react.lazy"),sQ=Symbol.for("react.offscreen"),q7=Symbol.iterator;function nw(e){return e===null||typeof e!="object"?null:(e=q7&&e[q7]||e["@@iterator"],typeof e=="function"?e:null)}var ei=Object.assign,eN;function Iw(e){if(eN===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);eN=t&&t[1]||""}return`
`+eN+e}var tN=!1;function rN(e,t){if(!e||tN)return"";tN=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{tN=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Iw(e):""}function Swe(e){switch(e.tag){case 5:return Iw(e.type);case 16:return Iw("Lazy");case 13:return Iw("Suspense");case 19:return Iw("SuspenseList");case 0:case 2:case 15:return e=rN(e.type,!1),e;case 11:return e=rN(e.type.render,!1),e;case 1:return e=rN(e.type,!0),e;default:return""}}function N3(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dg:return"Fragment";case Mg:return"Portal";case C3:return"Profiler";case Tj:return"StrictMode";case O3:return"Suspense";case P3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aQ:return(e.displayName||"Context")+".Consumer";case iQ:return(e._context.displayName||"Context")+".Provider";case kj:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cj:return t=e.displayName||null,t!==null?t:N3(e.type)||"Memo";case th:t=e._payload,e=e._init;try{return N3(e(t))}catch{}}return null}function Ewe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N3(t);case 8:return t===Tj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oQ(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Awe(e){var t=oQ(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ES(e){e._valueTracker||(e._valueTracker=Awe(e))}function lQ(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=oQ(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function sT(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function I3(e,t){var r=t.checked;return ei({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function K7(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Gh(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cQ(e,t){t=t.checked,t!=null&&Aj(e,"checked",t,!1)}function R3(e,t){cQ(e,t);var r=Gh(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?L3(e,t.type,r):t.hasOwnProperty("defaultValue")&&L3(e,t.type,Gh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Y7(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function L3(e,t,r){(t!=="number"||sT(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Rw=Array.isArray;function my(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Gh(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function M3(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return ei({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function X7(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(rt(92));if(Rw(r)){if(1<r.length)throw Error(rt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Gh(r)}}function uQ(e,t){var r=Gh(t.value),n=Gh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Z7(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fQ(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D3(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fQ(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var AS,dQ=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(AS=AS||document.createElement("div"),AS.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=AS.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ex={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Twe=["Webkit","ms","Moz","O"];Object.keys(ex).forEach(function(e){Twe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ex[t]=ex[e]})});function hQ(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ex.hasOwnProperty(e)&&ex[e]?(""+t).trim():t+"px"}function pQ(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=hQ(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var kwe=ei({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function j3(e,t){if(t){if(kwe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function $3(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var F3=null;function Oj(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var B3=null,gy=null,yy=null;function J7(e){if(e=H_(e)){if(typeof B3!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=eC(t),B3(e.stateNode,e.type,t))}}function mQ(e){gy?yy?yy.push(e):yy=[e]:gy=e}function gQ(){if(gy){var e=gy,t=yy;if(yy=gy=null,J7(e),t)for(e=0;e<t.length;e++)J7(t[e])}}function yQ(e,t){return e(t)}function vQ(){}var nN=!1;function wQ(e,t,r){if(nN)return e(t,r);nN=!0;try{return yQ(e,t,r)}finally{nN=!1,(gy!==null||yy!==null)&&(vQ(),gQ())}}function Wx(e,t){var r=e.stateNode;if(r===null)return null;var n=eC(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(rt(231,t,typeof r));return r}var U3=!1;if(Kf)try{var iw={};Object.defineProperty(iw,"passive",{get:function(){U3=!0}}),window.addEventListener("test",iw,iw),window.removeEventListener("test",iw,iw)}catch{U3=!1}function Cwe(e,t,r,n,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var tx=!1,oT=null,lT=!1,z3=null,Owe={onError:function(e){tx=!0,oT=e}};function Pwe(e,t,r,n,i,a,s,o,l){tx=!1,oT=null,Cwe.apply(Owe,arguments)}function Nwe(e,t,r,n,i,a,s,o,l){if(Pwe.apply(this,arguments),tx){if(tx){var c=oT;tx=!1,oT=null}else throw Error(rt(198));lT||(lT=!0,z3=c)}}function _m(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xQ(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Q7(e){if(_m(e)!==e)throw Error(rt(188))}function Iwe(e){var t=e.alternate;if(!t){if(t=_m(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Q7(i),e;if(a===n)return Q7(i),t;a=a.sibling}throw Error(rt(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,o=i.child;o;){if(o===r){s=!0,r=i,n=a;break}if(o===n){s=!0,n=i,r=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===r){s=!0,r=a,n=i;break}if(o===n){s=!0,n=a,r=i;break}o=o.sibling}if(!s)throw Error(rt(189))}}if(r.alternate!==n)throw Error(rt(190))}if(r.tag!==3)throw Error(rt(188));return r.stateNode.current===r?e:t}function bQ(e){return e=Iwe(e),e!==null?_Q(e):null}function _Q(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_Q(e);if(t!==null)return t;e=e.sibling}return null}var SQ=Ko.unstable_scheduleCallback,e9=Ko.unstable_cancelCallback,Rwe=Ko.unstable_shouldYield,Lwe=Ko.unstable_requestPaint,wi=Ko.unstable_now,Mwe=Ko.unstable_getCurrentPriorityLevel,Pj=Ko.unstable_ImmediatePriority,EQ=Ko.unstable_UserBlockingPriority,cT=Ko.unstable_NormalPriority,Dwe=Ko.unstable_LowPriority,AQ=Ko.unstable_IdlePriority,X5=null,Cu=null;function jwe(e){if(Cu&&typeof Cu.onCommitFiberRoot=="function")try{Cu.onCommitFiberRoot(X5,e,void 0,(e.current.flags&128)===128)}catch{}}var Oc=Math.clz32?Math.clz32:Bwe,$we=Math.log,Fwe=Math.LN2;function Bwe(e){return e>>>=0,e===0?32:31-($we(e)/Fwe|0)|0}var TS=64,kS=4194304;function Lw(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uT(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var o=s&~i;o!==0?n=Lw(o):(a&=s,a!==0&&(n=Lw(a)))}else s=r&~i,s!==0?n=Lw(s):a!==0&&(n=Lw(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Oc(t),i=1<<r,n|=e[r],t&=~i;return n}function Uwe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zwe(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Oc(a),o=1<<s,l=i[s];l===-1?(!(o&r)||o&n)&&(i[s]=Uwe(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function V3(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TQ(){var e=TS;return TS<<=1,!(TS&4194240)&&(TS=64),e}function iN(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function V_(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Oc(t),e[t]=r}function Vwe(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Oc(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Nj(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Oc(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ln=0;function kQ(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CQ,Ij,OQ,PQ,NQ,W3=!1,CS=[],Th=null,kh=null,Ch=null,Hx=new Map,Gx=new Map,uh=[],Wwe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t9(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":kh=null;break;case"mouseover":case"mouseout":Ch=null;break;case"pointerover":case"pointerout":Hx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gx.delete(t.pointerId)}}function aw(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=H_(t),t!==null&&Ij(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Hwe(e,t,r,n,i){switch(t){case"focusin":return Th=aw(Th,e,t,r,n,i),!0;case"dragenter":return kh=aw(kh,e,t,r,n,i),!0;case"mouseover":return Ch=aw(Ch,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Hx.set(a,aw(Hx.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Gx.set(a,aw(Gx.get(a)||null,e,t,r,n,i)),!0}return!1}function IQ(e){var t=h0(e.target);if(t!==null){var r=_m(t);if(r!==null){if(t=r.tag,t===13){if(t=xQ(r),t!==null){e.blockedOn=t,NQ(e.priority,function(){OQ(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sA(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=H3(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);F3=n,r.target.dispatchEvent(n),F3=null}else return t=H_(r),t!==null&&Ij(t),e.blockedOn=r,!1;t.shift()}return!0}function r9(e,t,r){sA(e)&&r.delete(t)}function Gwe(){W3=!1,Th!==null&&sA(Th)&&(Th=null),kh!==null&&sA(kh)&&(kh=null),Ch!==null&&sA(Ch)&&(Ch=null),Hx.forEach(r9),Gx.forEach(r9)}function sw(e,t){e.blockedOn===t&&(e.blockedOn=null,W3||(W3=!0,Ko.unstable_scheduleCallback(Ko.unstable_NormalPriority,Gwe)))}function qx(e){function t(i){return sw(i,e)}if(0<CS.length){sw(CS[0],e);for(var r=1;r<CS.length;r++){var n=CS[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Th!==null&&sw(Th,e),kh!==null&&sw(kh,e),Ch!==null&&sw(Ch,e),Hx.forEach(t),Gx.forEach(t),r=0;r<uh.length;r++)n=uh[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<uh.length&&(r=uh[0],r.blockedOn===null);)IQ(r),r.blockedOn===null&&uh.shift()}var vy=pd.ReactCurrentBatchConfig,fT=!0;function qwe(e,t,r,n){var i=ln,a=vy.transition;vy.transition=null;try{ln=1,Rj(e,t,r,n)}finally{ln=i,vy.transition=a}}function Kwe(e,t,r,n){var i=ln,a=vy.transition;vy.transition=null;try{ln=4,Rj(e,t,r,n)}finally{ln=i,vy.transition=a}}function Rj(e,t,r,n){if(fT){var i=H3(e,t,r,n);if(i===null)pN(e,t,n,dT,r),t9(e,n);else if(Hwe(i,e,t,r,n))n.stopPropagation();else if(t9(e,n),t&4&&-1<Wwe.indexOf(e)){for(;i!==null;){var a=H_(i);if(a!==null&&CQ(a),a=H3(e,t,r,n),a===null&&pN(e,t,n,dT,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else pN(e,t,n,null,r)}}var dT=null;function H3(e,t,r,n){if(dT=null,e=Oj(n),e=h0(e),e!==null)if(t=_m(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xQ(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dT=e,null}function RQ(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mwe()){case Pj:return 1;case EQ:return 4;case cT:case Dwe:return 16;case AQ:return 536870912;default:return 16}default:return 16}}var gh=null,Lj=null,oA=null;function LQ(){if(oA)return oA;var e,t=Lj,r=t.length,n,i="value"in gh?gh.value:gh.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return oA=i.slice(e,1<n?1-n:void 0)}function lA(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function OS(){return!0}function n9(){return!1}function el(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?OS:n9,this.isPropagationStopped=n9,this}return ei(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=OS)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=OS)},persist:function(){},isPersistent:OS}),t}var Wv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mj=el(Wv),W_=ei({},Wv,{view:0,detail:0}),Ywe=el(W_),aN,sN,ow,Z5=ei({},W_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dj,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ow&&(ow&&e.type==="mousemove"?(aN=e.screenX-ow.screenX,sN=e.screenY-ow.screenY):sN=aN=0,ow=e),aN)},movementY:function(e){return"movementY"in e?e.movementY:sN}}),i9=el(Z5),Xwe=ei({},Z5,{dataTransfer:0}),Zwe=el(Xwe),Jwe=ei({},W_,{relatedTarget:0}),oN=el(Jwe),Qwe=ei({},Wv,{animationName:0,elapsedTime:0,pseudoElement:0}),exe=el(Qwe),txe=ei({},Wv,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rxe=el(txe),nxe=ei({},Wv,{data:0}),a9=el(nxe),ixe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},axe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sxe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oxe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sxe[e])?!!t[e]:!1}function Dj(){return oxe}var lxe=ei({},W_,{key:function(e){if(e.key){var t=ixe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lA(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?axe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dj,charCode:function(e){return e.type==="keypress"?lA(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lA(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cxe=el(lxe),uxe=ei({},Z5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s9=el(uxe),fxe=ei({},W_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dj}),dxe=el(fxe),hxe=ei({},Wv,{propertyName:0,elapsedTime:0,pseudoElement:0}),pxe=el(hxe),mxe=ei({},Z5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gxe=el(mxe),yxe=[9,13,27,32],jj=Kf&&"CompositionEvent"in window,rx=null;Kf&&"documentMode"in document&&(rx=document.documentMode);var vxe=Kf&&"TextEvent"in window&&!rx,MQ=Kf&&(!jj||rx&&8<rx&&11>=rx),o9=" ",l9=!1;function DQ(e,t){switch(e){case"keyup":return yxe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jQ(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jg=!1;function wxe(e,t){switch(e){case"compositionend":return jQ(t);case"keypress":return t.which!==32?null:(l9=!0,o9);case"textInput":return e=t.data,e===o9&&l9?null:e;default:return null}}function xxe(e,t){if(jg)return e==="compositionend"||!jj&&DQ(e,t)?(e=LQ(),oA=Lj=gh=null,jg=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MQ&&t.locale!=="ko"?null:t.data;default:return null}}var bxe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c9(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bxe[e.type]:t==="textarea"}function $Q(e,t,r,n){mQ(n),t=hT(t,"onChange"),0<t.length&&(r=new Mj("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var nx=null,Kx=null;function _xe(e){YQ(e,0)}function J5(e){var t=Bg(e);if(lQ(t))return e}function Sxe(e,t){if(e==="change")return t}var FQ=!1;if(Kf){var lN;if(Kf){var cN="oninput"in document;if(!cN){var u9=document.createElement("div");u9.setAttribute("oninput","return;"),cN=typeof u9.oninput=="function"}lN=cN}else lN=!1;FQ=lN&&(!document.documentMode||9<document.documentMode)}function f9(){nx&&(nx.detachEvent("onpropertychange",BQ),Kx=nx=null)}function BQ(e){if(e.propertyName==="value"&&J5(Kx)){var t=[];$Q(t,Kx,e,Oj(e)),wQ(_xe,t)}}function Exe(e,t,r){e==="focusin"?(f9(),nx=t,Kx=r,nx.attachEvent("onpropertychange",BQ)):e==="focusout"&&f9()}function Axe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return J5(Kx)}function Txe(e,t){if(e==="click")return J5(t)}function kxe(e,t){if(e==="input"||e==="change")return J5(t)}function Cxe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mc=typeof Object.is=="function"?Object.is:Cxe;function Yx(e,t){if(Mc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!k3.call(t,i)||!Mc(e[i],t[i]))return!1}return!0}function d9(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function h9(e,t){var r=d9(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=d9(r)}}function UQ(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UQ(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zQ(){for(var e=window,t=sT();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=sT(e.document)}return t}function $j(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Oxe(e){var t=zQ(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&UQ(r.ownerDocument.documentElement,r)){if(n!==null&&$j(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=h9(r,a);var s=h9(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pxe=Kf&&"documentMode"in document&&11>=document.documentMode,$g=null,G3=null,ix=null,q3=!1;function p9(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;q3||$g==null||$g!==sT(n)||(n=$g,"selectionStart"in n&&$j(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ix&&Yx(ix,n)||(ix=n,n=hT(G3,"onSelect"),0<n.length&&(t=new Mj("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$g)))}function PS(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fg={animationend:PS("Animation","AnimationEnd"),animationiteration:PS("Animation","AnimationIteration"),animationstart:PS("Animation","AnimationStart"),transitionend:PS("Transition","TransitionEnd")},uN={},VQ={};Kf&&(VQ=document.createElement("div").style,"AnimationEvent"in window||(delete Fg.animationend.animation,delete Fg.animationiteration.animation,delete Fg.animationstart.animation),"TransitionEvent"in window||delete Fg.transitionend.transition);function Q5(e){if(uN[e])return uN[e];if(!Fg[e])return e;var t=Fg[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in VQ)return uN[e]=t[r];return e}var WQ=Q5("animationend"),HQ=Q5("animationiteration"),GQ=Q5("animationstart"),qQ=Q5("transitionend"),KQ=new Map,m9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lp(e,t){KQ.set(e,t),bm(t,[e])}for(var fN=0;fN<m9.length;fN++){var dN=m9[fN],Nxe=dN.toLowerCase(),Ixe=dN[0].toUpperCase()+dN.slice(1);lp(Nxe,"on"+Ixe)}lp(WQ,"onAnimationEnd");lp(HQ,"onAnimationIteration");lp(GQ,"onAnimationStart");lp("dblclick","onDoubleClick");lp("focusin","onFocus");lp("focusout","onBlur");lp(qQ,"onTransitionEnd");Vy("onMouseEnter",["mouseout","mouseover"]);Vy("onMouseLeave",["mouseout","mouseover"]);Vy("onPointerEnter",["pointerout","pointerover"]);Vy("onPointerLeave",["pointerout","pointerover"]);bm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bm("onBeforeInput",["compositionend","keypress","textInput","paste"]);bm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rxe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mw));function g9(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Nwe(n,t,void 0,e),e.currentTarget=null}function YQ(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;g9(i,o,c),a=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;g9(i,o,c),a=l}}}if(lT)throw e=z3,lT=!1,z3=null,e}function Rn(e,t){var r=t[J3];r===void 0&&(r=t[J3]=new Set);var n=e+"__bubble";r.has(n)||(XQ(t,e,2,!1),r.add(n))}function hN(e,t,r){var n=0;t&&(n|=4),XQ(r,e,n,t)}var NS="_reactListening"+Math.random().toString(36).slice(2);function Xx(e){if(!e[NS]){e[NS]=!0,nQ.forEach(function(r){r!=="selectionchange"&&(Rxe.has(r)||hN(r,!1,e),hN(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[NS]||(t[NS]=!0,hN("selectionchange",!1,t))}}function XQ(e,t,r,n){switch(RQ(t)){case 1:var i=qwe;break;case 4:i=Kwe;break;default:i=Rj}r=i.bind(null,t,r,e),i=void 0,!U3||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function pN(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=h0(o),s===null)return;if(l=s.tag,l===5||l===6){n=a=s;continue e}o=o.parentNode}}n=n.return}wQ(function(){var c=a,u=Oj(r),f=[];e:{var d=KQ.get(e);if(d!==void 0){var h=Mj,m=e;switch(e){case"keypress":if(lA(r)===0)break e;case"keydown":case"keyup":h=cxe;break;case"focusin":m="focus",h=oN;break;case"focusout":m="blur",h=oN;break;case"beforeblur":case"afterblur":h=oN;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=i9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Zwe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=dxe;break;case WQ:case HQ:case GQ:h=exe;break;case qQ:h=pxe;break;case"scroll":h=Ywe;break;case"wheel":h=gxe;break;case"copy":case"cut":case"paste":h=rxe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=s9}var p=(t&4)!==0,y=!p&&e==="scroll",g=p?d!==null?d+"Capture":null:d;p=[];for(var w=c,v;w!==null;){v=w;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,g!==null&&(x=Wx(w,g),x!=null&&p.push(Zx(w,x,v)))),y)break;w=w.return}0<p.length&&(d=new h(d,m,null,r,u),f.push({event:d,listeners:p}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&r!==F3&&(m=r.relatedTarget||r.fromElement)&&(h0(m)||m[Yf]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=c,m=m?h0(m):null,m!==null&&(y=_m(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=i9,x="onMouseLeave",g="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(p=s9,x="onPointerLeave",g="onPointerEnter",w="pointer"),y=h==null?d:Bg(h),v=m==null?d:Bg(m),d=new p(x,w+"leave",h,r,u),d.target=y,d.relatedTarget=v,x=null,h0(u)===c&&(p=new p(g,w+"enter",m,r,u),p.target=v,p.relatedTarget=y,x=p),y=x,h&&m)t:{for(p=h,g=m,w=0,v=p;v;v=Zm(v))w++;for(v=0,x=g;x;x=Zm(x))v++;for(;0<w-v;)p=Zm(p),w--;for(;0<v-w;)g=Zm(g),v--;for(;w--;){if(p===g||g!==null&&p===g.alternate)break t;p=Zm(p),g=Zm(g)}p=null}else p=null;h!==null&&y9(f,d,h,p,!1),m!==null&&y!==null&&y9(f,y,m,p,!0)}}e:{if(d=c?Bg(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var b=Sxe;else if(c9(d))if(FQ)b=kxe;else{b=Axe;var S=Exe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=Txe);if(b&&(b=b(e,c))){$Q(f,b,r,u);break e}S&&S(e,d,c),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&L3(d,"number",d.value)}switch(S=c?Bg(c):window,e){case"focusin":(c9(S)||S.contentEditable==="true")&&($g=S,G3=c,ix=null);break;case"focusout":ix=G3=$g=null;break;case"mousedown":q3=!0;break;case"contextmenu":case"mouseup":case"dragend":q3=!1,p9(f,r,u);break;case"selectionchange":if(Pxe)break;case"keydown":case"keyup":p9(f,r,u)}var T;if(jj)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else jg?DQ(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(MQ&&r.locale!=="ko"&&(jg||A!=="onCompositionStart"?A==="onCompositionEnd"&&jg&&(T=LQ()):(gh=u,Lj="value"in gh?gh.value:gh.textContent,jg=!0)),S=hT(c,A),0<S.length&&(A=new a9(A,e,null,r,u),f.push({event:A,listeners:S}),T?A.data=T:(T=jQ(r),T!==null&&(A.data=T)))),(T=vxe?wxe(e,r):xxe(e,r))&&(c=hT(c,"onBeforeInput"),0<c.length&&(u=new a9("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:c}),u.data=T))}YQ(f,t)})}function Zx(e,t,r){return{instance:e,listener:t,currentTarget:r}}function hT(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wx(e,r),a!=null&&n.unshift(Zx(e,a,i)),a=Wx(e,t),a!=null&&n.push(Zx(e,a,i))),e=e.return}return n}function Zm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y9(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,i?(l=Wx(r,a),l!=null&&s.unshift(Zx(r,l,o))):i||(l=Wx(r,a),l!=null&&s.push(Zx(r,l,o)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var Lxe=/\r\n?/g,Mxe=/\u0000|\uFFFD/g;function v9(e){return(typeof e=="string"?e:""+e).replace(Lxe,`
`).replace(Mxe,"")}function IS(e,t,r){if(t=v9(t),v9(e)!==t&&r)throw Error(rt(425))}function pT(){}var K3=null,Y3=null;function X3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Z3=typeof setTimeout=="function"?setTimeout:void 0,Dxe=typeof clearTimeout=="function"?clearTimeout:void 0,w9=typeof Promise=="function"?Promise:void 0,jxe=typeof queueMicrotask=="function"?queueMicrotask:typeof w9<"u"?function(e){return w9.resolve(null).then(e).catch($xe)}:Z3;function $xe(e){setTimeout(function(){throw e})}function mN(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),qx(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);qx(t)}function Oh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function x9(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Hv=Math.random().toString(36).slice(2),vu="__reactFiber$"+Hv,Jx="__reactProps$"+Hv,Yf="__reactContainer$"+Hv,J3="__reactEvents$"+Hv,Fxe="__reactListeners$"+Hv,Bxe="__reactHandles$"+Hv;function h0(e){var t=e[vu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Yf]||r[vu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=x9(e);e!==null;){if(r=e[vu])return r;e=x9(e)}return t}e=r,r=e.parentNode}return null}function H_(e){return e=e[vu]||e[Yf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function eC(e){return e[Jx]||null}var Q3=[],Ug=-1;function cp(e){return{current:e}}function Bn(e){0>Ug||(e.current=Q3[Ug],Q3[Ug]=null,Ug--)}function kn(e,t){Ug++,Q3[Ug]=e.current,e.current=t}var qh={},hs=cp(qh),ao=cp(!1),W0=qh;function Wy(e,t){var r=e.type.contextTypes;if(!r)return qh;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function so(e){return e=e.childContextTypes,e!=null}function mT(){Bn(ao),Bn(hs)}function b9(e,t,r){if(hs.current!==qh)throw Error(rt(168));kn(hs,t),kn(ao,r)}function ZQ(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(rt(108,Ewe(e)||"Unknown",i));return ei({},r,n)}function gT(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qh,W0=hs.current,kn(hs,e),kn(ao,ao.current),!0}function _9(e,t,r){var n=e.stateNode;if(!n)throw Error(rt(169));r?(e=ZQ(e,t,W0),n.__reactInternalMemoizedMergedChildContext=e,Bn(ao),Bn(hs),kn(hs,e)):Bn(ao),kn(ao,r)}var Sf=null,tC=!1,gN=!1;function JQ(e){Sf===null?Sf=[e]:Sf.push(e)}function Uxe(e){tC=!0,JQ(e)}function up(){if(!gN&&Sf!==null){gN=!0;var e=0,t=ln;try{var r=Sf;for(ln=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Sf=null,tC=!1}catch(i){throw Sf!==null&&(Sf=Sf.slice(e+1)),SQ(Pj,up),i}finally{ln=t,gN=!1}}return null}var zg=[],Vg=0,yT=null,vT=0,vl=[],wl=0,H0=null,Pf=1,Nf="";function Yp(e,t){zg[Vg++]=vT,zg[Vg++]=yT,yT=e,vT=t}function QQ(e,t,r){vl[wl++]=Pf,vl[wl++]=Nf,vl[wl++]=H0,H0=e;var n=Pf;e=Nf;var i=32-Oc(n)-1;n&=~(1<<i),r+=1;var a=32-Oc(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Pf=1<<32-Oc(t)+i|r<<i|n,Nf=a+e}else Pf=1<<a|r<<i|n,Nf=e}function Fj(e){e.return!==null&&(Yp(e,1),QQ(e,1,0))}function Bj(e){for(;e===yT;)yT=zg[--Vg],zg[Vg]=null,vT=zg[--Vg],zg[Vg]=null;for(;e===H0;)H0=vl[--wl],vl[wl]=null,Nf=vl[--wl],vl[wl]=null,Pf=vl[--wl],vl[wl]=null}var Ho=null,zo=null,Hn=!1,xc=null;function eee(e,t){var r=Sl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function S9(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ho=e,zo=Oh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ho=e,zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=H0!==null?{id:Pf,overflow:Nf}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Sl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ho=e,zo=null,!0):!1;default:return!1}}function eR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tR(e){if(Hn){var t=zo;if(t){var r=t;if(!S9(e,t)){if(eR(e))throw Error(rt(418));t=Oh(r.nextSibling);var n=Ho;t&&S9(e,t)?eee(n,r):(e.flags=e.flags&-4097|2,Hn=!1,Ho=e)}}else{if(eR(e))throw Error(rt(418));e.flags=e.flags&-4097|2,Hn=!1,Ho=e}}}function E9(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ho=e}function RS(e){if(e!==Ho)return!1;if(!Hn)return E9(e),Hn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!X3(e.type,e.memoizedProps)),t&&(t=zo)){if(eR(e))throw tee(),Error(rt(418));for(;t;)eee(e,t),t=Oh(t.nextSibling)}if(E9(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zo=Oh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zo=null}}else zo=Ho?Oh(e.stateNode.nextSibling):null;return!0}function tee(){for(var e=zo;e;)e=Oh(e.nextSibling)}function Hy(){zo=Ho=null,Hn=!1}function Uj(e){xc===null?xc=[e]:xc.push(e)}var zxe=pd.ReactCurrentBatchConfig;function lw(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(rt(309));var n=r.stateNode}if(!n)throw Error(rt(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(rt(284));if(!r._owner)throw Error(rt(290,e))}return e}function LS(e,t){throw e=Object.prototype.toString.call(t),Error(rt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function A9(e){var t=e._init;return t(e._payload)}function ree(e){function t(g,w){if(e){var v=g.deletions;v===null?(g.deletions=[w],g.flags|=16):v.push(w)}}function r(g,w){if(!e)return null;for(;w!==null;)t(g,w),w=w.sibling;return null}function n(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=Rh(g,w),g.index=0,g.sibling=null,g}function a(g,w,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<w?(g.flags|=2,w):v):(g.flags|=2,w)):(g.flags|=1048576,w)}function s(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,w,v,x){return w===null||w.tag!==6?(w=SN(v,g.mode,x),w.return=g,w):(w=i(w,v),w.return=g,w)}function l(g,w,v,x){var b=v.type;return b===Dg?u(g,w,v.props.children,x,v.key):w!==null&&(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===th&&A9(b)===w.type)?(x=i(w,v.props),x.ref=lw(g,w,v),x.return=g,x):(x=mA(v.type,v.key,v.props,null,g.mode,x),x.ref=lw(g,w,v),x.return=g,x)}function c(g,w,v,x){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=EN(v,g.mode,x),w.return=g,w):(w=i(w,v.children||[]),w.return=g,w)}function u(g,w,v,x,b){return w===null||w.tag!==7?(w=P0(v,g.mode,x,b),w.return=g,w):(w=i(w,v),w.return=g,w)}function f(g,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=SN(""+w,g.mode,v),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case SS:return v=mA(w.type,w.key,w.props,null,g.mode,v),v.ref=lw(g,null,w),v.return=g,v;case Mg:return w=EN(w,g.mode,v),w.return=g,w;case th:var x=w._init;return f(g,x(w._payload),v)}if(Rw(w)||nw(w))return w=P0(w,g.mode,v,null),w.return=g,w;LS(g,w)}return null}function d(g,w,v,x){var b=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:o(g,w,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case SS:return v.key===b?l(g,w,v,x):null;case Mg:return v.key===b?c(g,w,v,x):null;case th:return b=v._init,d(g,w,b(v._payload),x)}if(Rw(v)||nw(v))return b!==null?null:u(g,w,v,x,null);LS(g,v)}return null}function h(g,w,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(v)||null,o(w,g,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case SS:return g=g.get(x.key===null?v:x.key)||null,l(w,g,x,b);case Mg:return g=g.get(x.key===null?v:x.key)||null,c(w,g,x,b);case th:var S=x._init;return h(g,w,v,S(x._payload),b)}if(Rw(x)||nw(x))return g=g.get(v)||null,u(w,g,x,b,null);LS(w,x)}return null}function m(g,w,v,x){for(var b=null,S=null,T=w,A=w=0,O=null;T!==null&&A<v.length;A++){T.index>A?(O=T,T=null):O=T.sibling;var M=d(g,T,v[A],x);if(M===null){T===null&&(T=O);break}e&&T&&M.alternate===null&&t(g,T),w=a(M,w,A),S===null?b=M:S.sibling=M,S=M,T=O}if(A===v.length)return r(g,T),Hn&&Yp(g,A),b;if(T===null){for(;A<v.length;A++)T=f(g,v[A],x),T!==null&&(w=a(T,w,A),S===null?b=T:S.sibling=T,S=T);return Hn&&Yp(g,A),b}for(T=n(g,T);A<v.length;A++)O=h(T,g,A,v[A],x),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?A:O.key),w=a(O,w,A),S===null?b=O:S.sibling=O,S=O);return e&&T.forEach(function(P){return t(g,P)}),Hn&&Yp(g,A),b}function p(g,w,v,x){var b=nw(v);if(typeof b!="function")throw Error(rt(150));if(v=b.call(v),v==null)throw Error(rt(151));for(var S=b=null,T=w,A=w=0,O=null,M=v.next();T!==null&&!M.done;A++,M=v.next()){T.index>A?(O=T,T=null):O=T.sibling;var P=d(g,T,M.value,x);if(P===null){T===null&&(T=O);break}e&&T&&P.alternate===null&&t(g,T),w=a(P,w,A),S===null?b=P:S.sibling=P,S=P,T=O}if(M.done)return r(g,T),Hn&&Yp(g,A),b;if(T===null){for(;!M.done;A++,M=v.next())M=f(g,M.value,x),M!==null&&(w=a(M,w,A),S===null?b=M:S.sibling=M,S=M);return Hn&&Yp(g,A),b}for(T=n(g,T);!M.done;A++,M=v.next())M=h(T,g,A,M.value,x),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?A:M.key),w=a(M,w,A),S===null?b=M:S.sibling=M,S=M);return e&&T.forEach(function(N){return t(g,N)}),Hn&&Yp(g,A),b}function y(g,w,v,x){if(typeof v=="object"&&v!==null&&v.type===Dg&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case SS:e:{for(var b=v.key,S=w;S!==null;){if(S.key===b){if(b=v.type,b===Dg){if(S.tag===7){r(g,S.sibling),w=i(S,v.props.children),w.return=g,g=w;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===th&&A9(b)===S.type){r(g,S.sibling),w=i(S,v.props),w.ref=lw(g,S,v),w.return=g,g=w;break e}r(g,S);break}else t(g,S);S=S.sibling}v.type===Dg?(w=P0(v.props.children,g.mode,x,v.key),w.return=g,g=w):(x=mA(v.type,v.key,v.props,null,g.mode,x),x.ref=lw(g,w,v),x.return=g,g=x)}return s(g);case Mg:e:{for(S=v.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){r(g,w.sibling),w=i(w,v.children||[]),w.return=g,g=w;break e}else{r(g,w);break}else t(g,w);w=w.sibling}w=EN(v,g.mode,x),w.return=g,g=w}return s(g);case th:return S=v._init,y(g,w,S(v._payload),x)}if(Rw(v))return m(g,w,v,x);if(nw(v))return p(g,w,v,x);LS(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(r(g,w.sibling),w=i(w,v),w.return=g,g=w):(r(g,w),w=SN(v,g.mode,x),w.return=g,g=w),s(g)):r(g,w)}return y}var Gy=ree(!0),nee=ree(!1),wT=cp(null),xT=null,Wg=null,zj=null;function Vj(){zj=Wg=xT=null}function Wj(e){var t=wT.current;Bn(wT),e._currentValue=t}function rR(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wy(e,t){xT=e,zj=Wg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ro=!0),e.firstContext=null)}function Rl(e){var t=e._currentValue;if(zj!==e)if(e={context:e,memoizedValue:t,next:null},Wg===null){if(xT===null)throw Error(rt(308));Wg=e,xT.dependencies={lanes:0,firstContext:e}}else Wg=Wg.next=e;return t}var p0=null;function Hj(e){p0===null?p0=[e]:p0.push(e)}function iee(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Hj(t)):(r.next=i.next,i.next=r),t.interleaved=r,Xf(e,n)}function Xf(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var rh=!1;function Gj(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aee(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bf(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ph(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Vr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Xf(e,r)}return i=n.interleaved,i===null?(t.next=t,Hj(n)):(t.next=i.next,i.next=t),n.interleaved=t,Xf(e,r)}function cA(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nj(e,r)}}function T9(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bT(e,t,r,n){var i=e.updateQueue;rh=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?a=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,u=c=l=null,o=a;do{var d=o.lane,h=o.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(d=t,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,d=typeof m=="function"?m.call(h,f,d):m,d==null)break e;f=ei({},f,d);break e;case 2:rh=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);q0|=s,e.lanes=s,e.memoizedState=f}}function k9(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(rt(191,i));i.call(n)}}}var G_={},Ou=cp(G_),Qx=cp(G_),eb=cp(G_);function m0(e){if(e===G_)throw Error(rt(174));return e}function qj(e,t){switch(kn(eb,t),kn(Qx,e),kn(Ou,G_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:D3(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=D3(t,e)}Bn(Ou),kn(Ou,t)}function qy(){Bn(Ou),Bn(Qx),Bn(eb)}function see(e){m0(eb.current);var t=m0(Ou.current),r=D3(t,e.type);t!==r&&(kn(Qx,e),kn(Ou,r))}function Kj(e){Qx.current===e&&(Bn(Ou),Bn(Qx))}var Zn=cp(0);function _T(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yN=[];function Yj(){for(var e=0;e<yN.length;e++)yN[e]._workInProgressVersionPrimary=null;yN.length=0}var uA=pd.ReactCurrentDispatcher,vN=pd.ReactCurrentBatchConfig,G0=0,Qn=null,ia=null,ya=null,ST=!1,ax=!1,tb=0,Vxe=0;function qa(){throw Error(rt(321))}function Xj(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Mc(e[r],t[r]))return!1;return!0}function Zj(e,t,r,n,i,a){if(G0=a,Qn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uA.current=e===null||e.memoizedState===null?qxe:Kxe,e=r(n,i),ax){a=0;do{if(ax=!1,tb=0,25<=a)throw Error(rt(301));a+=1,ya=ia=null,t.updateQueue=null,uA.current=Yxe,e=r(n,i)}while(ax)}if(uA.current=ET,t=ia!==null&&ia.next!==null,G0=0,ya=ia=Qn=null,ST=!1,t)throw Error(rt(300));return e}function Jj(){var e=tb!==0;return tb=0,e}function du(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?Qn.memoizedState=ya=e:ya=ya.next=e,ya}function Ll(){if(ia===null){var e=Qn.alternate;e=e!==null?e.memoizedState:null}else e=ia.next;var t=ya===null?Qn.memoizedState:ya.next;if(t!==null)ya=t,ia=e;else{if(e===null)throw Error(rt(310));ia=e,e={memoizedState:ia.memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},ya===null?Qn.memoizedState=ya=e:ya=ya.next=e}return ya}function rb(e,t){return typeof t=="function"?t(e):t}function wN(e){var t=Ll(),r=t.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=e;var n=ia,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=s=null,l=null,c=a;do{var u=c.lane;if((G0&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,s=n):l=l.next=f,Qn.lanes|=u,q0|=u}c=c.next}while(c!==null&&c!==a);l===null?s=n:l.next=o,Mc(n,t.memoizedState)||(ro=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Qn.lanes|=a,q0|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xN(e){var t=Ll(),r=t.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Mc(a,t.memoizedState)||(ro=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function oee(){}function lee(e,t){var r=Qn,n=Ll(),i=t(),a=!Mc(n.memoizedState,i);if(a&&(n.memoizedState=i,ro=!0),n=n.queue,Qj(fee.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ya!==null&&ya.memoizedState.tag&1){if(r.flags|=2048,nb(9,uee.bind(null,r,n,i,t),void 0,null),xa===null)throw Error(rt(349));G0&30||cee(r,t,i)}return i}function cee(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Qn.updateQueue,t===null?(t={lastEffect:null,stores:null},Qn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function uee(e,t,r,n){t.value=r,t.getSnapshot=n,dee(t)&&hee(e)}function fee(e,t,r){return r(function(){dee(t)&&hee(e)})}function dee(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Mc(e,r)}catch{return!0}}function hee(e){var t=Xf(e,1);t!==null&&Pc(t,e,1,-1)}function C9(e){var t=du();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rb,lastRenderedState:e},t.queue=e,e=e.dispatch=Gxe.bind(null,Qn,e),[t.memoizedState,e]}function nb(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Qn.updateQueue,t===null?(t={lastEffect:null,stores:null},Qn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function pee(){return Ll().memoizedState}function fA(e,t,r,n){var i=du();Qn.flags|=e,i.memoizedState=nb(1|t,r,void 0,n===void 0?null:n)}function rC(e,t,r,n){var i=Ll();n=n===void 0?null:n;var a=void 0;if(ia!==null){var s=ia.memoizedState;if(a=s.destroy,n!==null&&Xj(n,s.deps)){i.memoizedState=nb(t,r,a,n);return}}Qn.flags|=e,i.memoizedState=nb(1|t,r,a,n)}function O9(e,t){return fA(8390656,8,e,t)}function Qj(e,t){return rC(2048,8,e,t)}function mee(e,t){return rC(4,2,e,t)}function gee(e,t){return rC(4,4,e,t)}function yee(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vee(e,t,r){return r=r!=null?r.concat([e]):null,rC(4,4,yee.bind(null,t,e),r)}function e6(){}function wee(e,t){var r=Ll();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xj(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function xee(e,t){var r=Ll();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xj(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function bee(e,t,r){return G0&21?(Mc(r,t)||(r=TQ(),Qn.lanes|=r,q0|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ro=!0),e.memoizedState=r)}function Wxe(e,t){var r=ln;ln=r!==0&&4>r?r:4,e(!0);var n=vN.transition;vN.transition={};try{e(!1),t()}finally{ln=r,vN.transition=n}}function _ee(){return Ll().memoizedState}function Hxe(e,t,r){var n=Ih(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},See(e))Eee(t,r);else if(r=iee(e,t,r,n),r!==null){var i=js();Pc(r,e,n,i),Aee(r,t,n)}}function Gxe(e,t,r){var n=Ih(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(See(e))Eee(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,r);if(i.hasEagerState=!0,i.eagerState=o,Mc(o,s)){var l=t.interleaved;l===null?(i.next=i,Hj(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=iee(e,t,i,n),r!==null&&(i=js(),Pc(r,e,n,i),Aee(r,t,n))}}function See(e){var t=e.alternate;return e===Qn||t!==null&&t===Qn}function Eee(e,t){ax=ST=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Aee(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nj(e,r)}}var ET={readContext:Rl,useCallback:qa,useContext:qa,useEffect:qa,useImperativeHandle:qa,useInsertionEffect:qa,useLayoutEffect:qa,useMemo:qa,useReducer:qa,useRef:qa,useState:qa,useDebugValue:qa,useDeferredValue:qa,useTransition:qa,useMutableSource:qa,useSyncExternalStore:qa,useId:qa,unstable_isNewReconciler:!1},qxe={readContext:Rl,useCallback:function(e,t){return du().memoizedState=[e,t===void 0?null:t],e},useContext:Rl,useEffect:O9,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,fA(4194308,4,yee.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fA(4194308,4,e,t)},useInsertionEffect:function(e,t){return fA(4,2,e,t)},useMemo:function(e,t){var r=du();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=du();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Hxe.bind(null,Qn,e),[n.memoizedState,e]},useRef:function(e){var t=du();return e={current:e},t.memoizedState=e},useState:C9,useDebugValue:e6,useDeferredValue:function(e){return du().memoizedState=e},useTransition:function(){var e=C9(!1),t=e[0];return e=Wxe.bind(null,e[1]),du().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Qn,i=du();if(Hn){if(r===void 0)throw Error(rt(407));r=r()}else{if(r=t(),xa===null)throw Error(rt(349));G0&30||cee(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,O9(fee.bind(null,n,a,e),[e]),n.flags|=2048,nb(9,uee.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=du(),t=xa.identifierPrefix;if(Hn){var r=Nf,n=Pf;r=(n&~(1<<32-Oc(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=tb++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Vxe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kxe={readContext:Rl,useCallback:wee,useContext:Rl,useEffect:Qj,useImperativeHandle:vee,useInsertionEffect:mee,useLayoutEffect:gee,useMemo:xee,useReducer:wN,useRef:pee,useState:function(){return wN(rb)},useDebugValue:e6,useDeferredValue:function(e){var t=Ll();return bee(t,ia.memoizedState,e)},useTransition:function(){var e=wN(rb)[0],t=Ll().memoizedState;return[e,t]},useMutableSource:oee,useSyncExternalStore:lee,useId:_ee,unstable_isNewReconciler:!1},Yxe={readContext:Rl,useCallback:wee,useContext:Rl,useEffect:Qj,useImperativeHandle:vee,useInsertionEffect:mee,useLayoutEffect:gee,useMemo:xee,useReducer:xN,useRef:pee,useState:function(){return xN(rb)},useDebugValue:e6,useDeferredValue:function(e){var t=Ll();return ia===null?t.memoizedState=e:bee(t,ia.memoizedState,e)},useTransition:function(){var e=xN(rb)[0],t=Ll().memoizedState;return[e,t]},useMutableSource:oee,useSyncExternalStore:lee,useId:_ee,unstable_isNewReconciler:!1};function dc(e,t){if(e&&e.defaultProps){t=ei({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function nR(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ei({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var nC={isMounted:function(e){return(e=e._reactInternals)?_m(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=js(),i=Ih(e),a=Bf(n,i);a.payload=t,r!=null&&(a.callback=r),t=Ph(e,a,i),t!==null&&(Pc(t,e,i,n),cA(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=js(),i=Ih(e),a=Bf(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ph(e,a,i),t!==null&&(Pc(t,e,i,n),cA(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=js(),n=Ih(e),i=Bf(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ph(e,i,n),t!==null&&(Pc(t,e,n,r),cA(t,e,n))}};function P9(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Yx(r,n)||!Yx(i,a):!0}function Tee(e,t,r){var n=!1,i=qh,a=t.contextType;return typeof a=="object"&&a!==null?a=Rl(a):(i=so(t)?W0:hs.current,n=t.contextTypes,a=(n=n!=null)?Wy(e,i):qh),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nC,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function N9(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nC.enqueueReplaceState(t,t.state,null)}function iR(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Gj(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Rl(a):(a=so(t)?W0:hs.current,i.context=Wy(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(nR(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&nC.enqueueReplaceState(i,i.state,null),bT(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ky(e,t){try{var r="",n=t;do r+=Swe(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function bN(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function aR(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Xxe=typeof WeakMap=="function"?WeakMap:Map;function kee(e,t,r){r=Bf(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){TT||(TT=!0,mR=n),aR(e,t)},r}function Cee(e,t,r){r=Bf(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){aR(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){aR(e,t),typeof n!="function"&&(Nh===null?Nh=new Set([this]):Nh.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function I9(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Xxe;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=ube.bind(null,e,t,r),t.then(e,e))}function R9(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function L9(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bf(-1,1),t.tag=2,Ph(r,t,1))),r.lanes|=1),e)}var Zxe=pd.ReactCurrentOwner,ro=!1;function As(e,t,r,n){t.child=e===null?nee(t,null,r,n):Gy(t,e.child,r,n)}function M9(e,t,r,n,i){r=r.render;var a=t.ref;return wy(t,i),n=Zj(e,t,r,n,a,i),r=Jj(),e!==null&&!ro?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zf(e,t,i)):(Hn&&r&&Fj(t),t.flags|=1,As(e,t,n,i),t.child)}function D9(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!l6(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Oee(e,t,a,n,i)):(e=mA(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Yx,r(s,n)&&e.ref===t.ref)return Zf(e,t,i)}return t.flags|=1,e=Rh(a,n),e.ref=t.ref,e.return=t,t.child=e}function Oee(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Yx(a,n)&&e.ref===t.ref)if(ro=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(ro=!0);else return t.lanes=e.lanes,Zf(e,t,i)}return sR(e,t,r,n,i)}function Pee(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Gg,Po),Po|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kn(Gg,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,kn(Gg,Po),Po|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,kn(Gg,Po),Po|=n;return As(e,t,i,r),t.child}function Nee(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sR(e,t,r,n,i){var a=so(r)?W0:hs.current;return a=Wy(t,a),wy(t,i),r=Zj(e,t,r,n,a,i),n=Jj(),e!==null&&!ro?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zf(e,t,i)):(Hn&&n&&Fj(t),t.flags|=1,As(e,t,r,i),t.child)}function j9(e,t,r,n,i){if(so(r)){var a=!0;gT(t)}else a=!1;if(wy(t,i),t.stateNode===null)dA(e,t),Tee(t,r,n),iR(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=r.contextType;typeof c=="object"&&c!==null?c=Rl(c):(c=so(r)?W0:hs.current,c=Wy(t,c));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==n||l!==c)&&N9(t,s,n,c),rh=!1;var d=t.memoizedState;s.state=d,bT(t,n,s,i),l=t.memoizedState,o!==n||d!==l||ao.current||rh?(typeof u=="function"&&(nR(t,r,u,n),l=t.memoizedState),(o=rh||P9(t,r,o,n,d,l,c))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,aee(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:dc(t.type,o),s.props=c,f=t.pendingProps,d=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=Rl(l):(l=so(r)?W0:hs.current,l=Wy(t,l));var h=r.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||d!==l)&&N9(t,s,n,l),rh=!1,d=t.memoizedState,s.state=d,bT(t,n,s,i);var m=t.memoizedState;o!==f||d!==m||ao.current||rh?(typeof h=="function"&&(nR(t,r,h,n),m=t.memoizedState),(c=rh||P9(t,r,c,n,d,m,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,m,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),s.props=n,s.state=m,s.context=l,n=c):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return oR(e,t,r,n,a,i)}function oR(e,t,r,n,i,a){Nee(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&_9(t,r,!1),Zf(e,t,a);n=t.stateNode,Zxe.current=t;var o=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Gy(t,e.child,null,a),t.child=Gy(t,null,o,a)):As(e,t,o,a),t.memoizedState=n.state,i&&_9(t,r,!0),t.child}function Iee(e){var t=e.stateNode;t.pendingContext?b9(e,t.pendingContext,t.pendingContext!==t.context):t.context&&b9(e,t.context,!1),qj(e,t.containerInfo)}function $9(e,t,r,n,i){return Hy(),Uj(i),t.flags|=256,As(e,t,r,n),t.child}var lR={dehydrated:null,treeContext:null,retryLane:0};function cR(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ree(e,t,r){var n=t.pendingProps,i=Zn.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),kn(Zn,i&1),e===null)return tR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=sC(s,n,0,null),e=P0(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=cR(r),t.memoizedState=lR,e):t6(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Jxe(e,t,s,n,o,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Rh(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Rh(o,a):(a=P0(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?cR(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=lR,n}return a=e.child,e=a.sibling,n=Rh(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function t6(e,t){return t=sC({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function MS(e,t,r,n){return n!==null&&Uj(n),Gy(t,e.child,null,r),e=t6(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jxe(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=bN(Error(rt(422))),MS(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=sC({mode:"visible",children:n.children},i,0,null),a=P0(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Gy(t,e.child,null,s),t.child.memoizedState=cR(s),t.memoizedState=lR,a);if(!(t.mode&1))return MS(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(rt(419)),n=bN(a,n,void 0),MS(e,t,s,n)}if(o=(s&e.childLanes)!==0,ro||o){if(n=xa,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Xf(e,i),Pc(n,e,i,-1))}return o6(),n=bN(Error(rt(421))),MS(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fbe.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,zo=Oh(i.nextSibling),Ho=t,Hn=!0,xc=null,e!==null&&(vl[wl++]=Pf,vl[wl++]=Nf,vl[wl++]=H0,Pf=e.id,Nf=e.overflow,H0=t),t=t6(t,n.children),t.flags|=4096,t)}function F9(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rR(e.return,t,r)}function _N(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Lee(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(As(e,t,n.children,r),n=Zn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&F9(e,r,t);else if(e.tag===19)F9(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(kn(Zn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&_T(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),_N(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&_T(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}_N(t,!0,r,null,a);break;case"together":_N(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dA(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zf(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),q0|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,r=Rh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Rh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Qxe(e,t,r){switch(t.tag){case 3:Iee(t),Hy();break;case 5:see(t);break;case 1:so(t.type)&&gT(t);break;case 4:qj(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;kn(wT,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(kn(Zn,Zn.current&1),t.flags|=128,null):r&t.child.childLanes?Ree(e,t,r):(kn(Zn,Zn.current&1),e=Zf(e,t,r),e!==null?e.sibling:null);kn(Zn,Zn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Lee(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kn(Zn,Zn.current),n)break;return null;case 22:case 23:return t.lanes=0,Pee(e,t,r)}return Zf(e,t,r)}var Mee,uR,Dee,jee;Mee=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uR=function(){};Dee=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,m0(Ou.current);var a=null;switch(r){case"input":i=I3(e,i),n=I3(e,n),a=[];break;case"select":i=ei({},i,{value:void 0}),n=ei({},n,{value:void 0}),a=[];break;case"textarea":i=M3(e,i),n=M3(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pT)}j3(r,n);var s;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zx.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in n){var l=n[c];if(o=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zx.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rn("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}r&&(a=a||[]).push("style",r);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};jee=function(e,t,r,n){r!==n&&(t.flags|=4)};function cw(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ka(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ebe(e,t,r){var n=t.pendingProps;switch(Bj(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:return so(t.type)&&mT(),Ka(t),null;case 3:return n=t.stateNode,qy(),Bn(ao),Bn(hs),Yj(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(RS(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xc!==null&&(vR(xc),xc=null))),uR(e,t),Ka(t),null;case 5:Kj(t);var i=m0(eb.current);if(r=t.type,e!==null&&t.stateNode!=null)Dee(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(rt(166));return Ka(t),null}if(e=m0(Ou.current),RS(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[vu]=t,n[Jx]=a,e=(t.mode&1)!==0,r){case"dialog":Rn("cancel",n),Rn("close",n);break;case"iframe":case"object":case"embed":Rn("load",n);break;case"video":case"audio":for(i=0;i<Mw.length;i++)Rn(Mw[i],n);break;case"source":Rn("error",n);break;case"img":case"image":case"link":Rn("error",n),Rn("load",n);break;case"details":Rn("toggle",n);break;case"input":K7(n,a),Rn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Rn("invalid",n);break;case"textarea":X7(n,a),Rn("invalid",n)}j3(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&IS(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&IS(n.textContent,o,e),i=["children",""+o]):zx.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Rn("scroll",n)}switch(r){case"input":ES(n),Y7(n,a,!0);break;case"textarea":ES(n),Z7(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=pT)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fQ(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[vu]=t,e[Jx]=n,Mee(e,t,!1,!1),t.stateNode=e;e:{switch(s=$3(r,n),r){case"dialog":Rn("cancel",e),Rn("close",e),i=n;break;case"iframe":case"object":case"embed":Rn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Mw.length;i++)Rn(Mw[i],e);i=n;break;case"source":Rn("error",e),i=n;break;case"img":case"image":case"link":Rn("error",e),Rn("load",e),i=n;break;case"details":Rn("toggle",e),i=n;break;case"input":K7(e,n),i=I3(e,n),Rn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ei({},n,{value:void 0}),Rn("invalid",e);break;case"textarea":X7(e,n),i=M3(e,n),Rn("invalid",e);break;default:i=n}j3(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?pQ(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dQ(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Vx(e,l):typeof l=="number"&&Vx(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(zx.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Rn("scroll",e):l!=null&&Aj(e,a,l,s))}switch(r){case"input":ES(e),Y7(e,n,!1);break;case"textarea":ES(e),Z7(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gh(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?my(e,!!n.multiple,a,!1):n.defaultValue!=null&&my(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pT)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&t.stateNode!=null)jee(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(rt(166));if(r=m0(eb.current),m0(Ou.current),RS(t)){if(n=t.stateNode,r=t.memoizedProps,n[vu]=t,(a=n.nodeValue!==r)&&(e=Ho,e!==null))switch(e.tag){case 3:IS(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&IS(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[vu]=t,t.stateNode=n}return Ka(t),null;case 13:if(Bn(Zn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Hn&&zo!==null&&t.mode&1&&!(t.flags&128))tee(),Hy(),t.flags|=98560,a=!1;else if(a=RS(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(rt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(rt(317));a[vu]=t}else Hy(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ka(t),a=!1}else xc!==null&&(vR(xc),xc=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Zn.current&1?oa===0&&(oa=3):o6())),t.updateQueue!==null&&(t.flags|=4),Ka(t),null);case 4:return qy(),uR(e,t),e===null&&Xx(t.stateNode.containerInfo),Ka(t),null;case 10:return Wj(t.type._context),Ka(t),null;case 17:return so(t.type)&&mT(),Ka(t),null;case 19:if(Bn(Zn),a=t.memoizedState,a===null)return Ka(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)cw(a,!1);else{if(oa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=_T(e),s!==null){for(t.flags|=128,cw(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return kn(Zn,Zn.current&1|2),t.child}e=e.sibling}a.tail!==null&&wi()>Yy&&(t.flags|=128,n=!0,cw(a,!1),t.lanes=4194304)}else{if(!n)if(e=_T(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),cw(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Hn)return Ka(t),null}else 2*wi()-a.renderingStartTime>Yy&&r!==1073741824&&(t.flags|=128,n=!0,cw(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wi(),t.sibling=null,r=Zn.current,kn(Zn,n?r&1|2:r&1),t):(Ka(t),null);case 22:case 23:return s6(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Po&1073741824&&(Ka(t),t.subtreeFlags&6&&(t.flags|=8192)):Ka(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function tbe(e,t){switch(Bj(t),t.tag){case 1:return so(t.type)&&mT(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qy(),Bn(ao),Bn(hs),Yj(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kj(t),null;case 13:if(Bn(Zn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));Hy()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Bn(Zn),null;case 4:return qy(),null;case 10:return Wj(t.type._context),null;case 22:case 23:return s6(),null;case 24:return null;default:return null}}var DS=!1,is=!1,rbe=typeof WeakSet=="function"?WeakSet:Set,St=null;function Hg(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ci(e,t,n)}else r.current=null}function fR(e,t,r){try{r()}catch(n){ci(e,t,n)}}var B9=!1;function nbe(e,t){if(K3=fT,e=zQ(),$j(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,o=-1,l=-1,c=0,u=0,f=e,d=null;t:for(;;){for(var h;f!==r||i!==0&&f.nodeType!==3||(o=s+i),f!==a||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===r&&++c===i&&(o=s),d===a&&++u===n&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Y3={focusedElem:e,selectionRange:r},fT=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,y=m.memoizedState,g=t.stateNode,w=g.getSnapshotBeforeUpdate(t.elementType===t.type?p:dc(t.type,p),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(x){ci(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return m=B9,B9=!1,m}function sx(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&fR(t,r,a)}i=i.next}while(i!==n)}}function iC(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function dR(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function $ee(e){var t=e.alternate;t!==null&&(e.alternate=null,$ee(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vu],delete t[Jx],delete t[J3],delete t[Fxe],delete t[Bxe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fee(e){return e.tag===5||e.tag===3||e.tag===4}function U9(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fee(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hR(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pT));else if(n!==4&&(e=e.child,e!==null))for(hR(e,t,r),e=e.sibling;e!==null;)hR(e,t,r),e=e.sibling}function pR(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pR(e,t,r),e=e.sibling;e!==null;)pR(e,t,r),e=e.sibling}var Ma=null,mc=!1;function zd(e,t,r){for(r=r.child;r!==null;)Bee(e,t,r),r=r.sibling}function Bee(e,t,r){if(Cu&&typeof Cu.onCommitFiberUnmount=="function")try{Cu.onCommitFiberUnmount(X5,r)}catch{}switch(r.tag){case 5:is||Hg(r,t);case 6:var n=Ma,i=mc;Ma=null,zd(e,t,r),Ma=n,mc=i,Ma!==null&&(mc?(e=Ma,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ma.removeChild(r.stateNode));break;case 18:Ma!==null&&(mc?(e=Ma,r=r.stateNode,e.nodeType===8?mN(e.parentNode,r):e.nodeType===1&&mN(e,r),qx(e)):mN(Ma,r.stateNode));break;case 4:n=Ma,i=mc,Ma=r.stateNode.containerInfo,mc=!0,zd(e,t,r),Ma=n,mc=i;break;case 0:case 11:case 14:case 15:if(!is&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&fR(r,t,s),i=i.next}while(i!==n)}zd(e,t,r);break;case 1:if(!is&&(Hg(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ci(r,t,o)}zd(e,t,r);break;case 21:zd(e,t,r);break;case 22:r.mode&1?(is=(n=is)||r.memoizedState!==null,zd(e,t,r),is=n):zd(e,t,r);break;default:zd(e,t,r)}}function z9(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new rbe),t.forEach(function(n){var i=dbe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Zl(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Ma=o.stateNode,mc=!1;break e;case 3:Ma=o.stateNode.containerInfo,mc=!0;break e;case 4:Ma=o.stateNode.containerInfo,mc=!0;break e}o=o.return}if(Ma===null)throw Error(rt(160));Bee(a,s,i),Ma=null,mc=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ci(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Uee(t,e),t=t.sibling}function Uee(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zl(t,e),iu(e),n&4){try{sx(3,e,e.return),iC(3,e)}catch(p){ci(e,e.return,p)}try{sx(5,e,e.return)}catch(p){ci(e,e.return,p)}}break;case 1:Zl(t,e),iu(e),n&512&&r!==null&&Hg(r,r.return);break;case 5:if(Zl(t,e),iu(e),n&512&&r!==null&&Hg(r,r.return),e.flags&32){var i=e.stateNode;try{Vx(i,"")}catch(p){ci(e,e.return,p)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&cQ(i,a),$3(o,s);var c=$3(o,a);for(s=0;s<l.length;s+=2){var u=l[s],f=l[s+1];u==="style"?pQ(i,f):u==="dangerouslySetInnerHTML"?dQ(i,f):u==="children"?Vx(i,f):Aj(i,u,f,c)}switch(o){case"input":R3(i,a);break;case"textarea":uQ(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?my(i,!!a.multiple,h,!1):d!==!!a.multiple&&(a.defaultValue!=null?my(i,!!a.multiple,a.defaultValue,!0):my(i,!!a.multiple,a.multiple?[]:"",!1))}i[Jx]=a}catch(p){ci(e,e.return,p)}}break;case 6:if(Zl(t,e),iu(e),n&4){if(e.stateNode===null)throw Error(rt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(p){ci(e,e.return,p)}}break;case 3:if(Zl(t,e),iu(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qx(t.containerInfo)}catch(p){ci(e,e.return,p)}break;case 4:Zl(t,e),iu(e);break;case 13:Zl(t,e),iu(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(i6=wi())),n&4&&z9(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(is=(c=is)||u,Zl(t,e),is=c):Zl(t,e),iu(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(St=e,u=e.child;u!==null;){for(f=St=u;St!==null;){switch(d=St,h=d.child,d.tag){case 0:case 11:case 14:case 15:sx(4,d,d.return);break;case 1:Hg(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){ci(n,r,p)}}break;case 5:Hg(d,d.return);break;case 22:if(d.memoizedState!==null){W9(f);continue}}h!==null?(h.return=d,St=h):W9(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=hQ("display",s))}catch(p){ci(e,e.return,p)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(p){ci(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zl(t,e),iu(e),n&4&&z9(e);break;case 21:break;default:Zl(t,e),iu(e)}}function iu(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Fee(r)){var n=r;break e}r=r.return}throw Error(rt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Vx(i,""),n.flags&=-33);var a=U9(e);pR(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,o=U9(e);hR(e,o,s);break;default:throw Error(rt(161))}}catch(l){ci(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ibe(e,t,r){St=e,zee(e)}function zee(e,t,r){for(var n=(e.mode&1)!==0;St!==null;){var i=St,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||DS;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||is;o=DS;var c=is;if(DS=s,(is=l)&&!c)for(St=i;St!==null;)s=St,l=s.child,s.tag===22&&s.memoizedState!==null?H9(i):l!==null?(l.return=s,St=l):H9(i);for(;a!==null;)St=a,zee(a),a=a.sibling;St=i,DS=o,is=c}V9(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,St=a):V9(e)}}function V9(e){for(;St!==null;){var t=St;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:is||iC(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!is)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:dc(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&k9(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}k9(t,s,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&qx(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}is||t.flags&512&&dR(t)}catch(d){ci(t,t.return,d)}}if(t===e){St=null;break}if(r=t.sibling,r!==null){r.return=t.return,St=r;break}St=t.return}}function W9(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var r=t.sibling;if(r!==null){r.return=t.return,St=r;break}St=t.return}}function H9(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{iC(4,t)}catch(l){ci(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){ci(t,i,l)}}var a=t.return;try{dR(t)}catch(l){ci(t,a,l)}break;case 5:var s=t.return;try{dR(t)}catch(l){ci(t,s,l)}}}catch(l){ci(t,t.return,l)}if(t===e){St=null;break}var o=t.sibling;if(o!==null){o.return=t.return,St=o;break}St=t.return}}var abe=Math.ceil,AT=pd.ReactCurrentDispatcher,r6=pd.ReactCurrentOwner,Cl=pd.ReactCurrentBatchConfig,Vr=0,xa=null,Ui=null,Ba=0,Po=0,Gg=cp(0),oa=0,ib=null,q0=0,aC=0,n6=0,ox=null,to=null,i6=0,Yy=1/0,xf=null,TT=!1,mR=null,Nh=null,jS=!1,yh=null,kT=0,lx=0,gR=null,hA=-1,pA=0;function js(){return Vr&6?wi():hA!==-1?hA:hA=wi()}function Ih(e){return e.mode&1?Vr&2&&Ba!==0?Ba&-Ba:zxe.transition!==null?(pA===0&&(pA=TQ()),pA):(e=ln,e!==0||(e=window.event,e=e===void 0?16:RQ(e.type)),e):1}function Pc(e,t,r,n){if(50<lx)throw lx=0,gR=null,Error(rt(185));V_(e,r,n),(!(Vr&2)||e!==xa)&&(e===xa&&(!(Vr&2)&&(aC|=r),oa===4&&fh(e,Ba)),oo(e,n),r===1&&Vr===0&&!(t.mode&1)&&(Yy=wi()+500,tC&&up()))}function oo(e,t){var r=e.callbackNode;zwe(e,t);var n=uT(e,e===xa?Ba:0);if(n===0)r!==null&&e9(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&e9(r),t===1)e.tag===0?Uxe(G9.bind(null,e)):JQ(G9.bind(null,e)),jxe(function(){!(Vr&6)&&up()}),r=null;else{switch(kQ(n)){case 1:r=Pj;break;case 4:r=EQ;break;case 16:r=cT;break;case 536870912:r=AQ;break;default:r=cT}r=Xee(r,Vee.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Vee(e,t){if(hA=-1,pA=0,Vr&6)throw Error(rt(327));var r=e.callbackNode;if(xy()&&e.callbackNode!==r)return null;var n=uT(e,e===xa?Ba:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=CT(e,n);else{t=n;var i=Vr;Vr|=2;var a=Hee();(xa!==e||Ba!==t)&&(xf=null,Yy=wi()+500,O0(e,t));do try{lbe();break}catch(o){Wee(e,o)}while(!0);Vj(),AT.current=a,Vr=i,Ui!==null?t=0:(xa=null,Ba=0,t=oa)}if(t!==0){if(t===2&&(i=V3(e),i!==0&&(n=i,t=yR(e,i))),t===1)throw r=ib,O0(e,0),fh(e,n),oo(e,wi()),r;if(t===6)fh(e,n);else{if(i=e.current.alternate,!(n&30)&&!sbe(i)&&(t=CT(e,n),t===2&&(a=V3(e),a!==0&&(n=a,t=yR(e,a))),t===1))throw r=ib,O0(e,0),fh(e,n),oo(e,wi()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(rt(345));case 2:Xp(e,to,xf);break;case 3:if(fh(e,n),(n&130023424)===n&&(t=i6+500-wi(),10<t)){if(uT(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){js(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Z3(Xp.bind(null,e,to,xf),t);break}Xp(e,to,xf);break;case 4:if(fh(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Oc(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=wi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*abe(n/1960))-n,10<n){e.timeoutHandle=Z3(Xp.bind(null,e,to,xf),n);break}Xp(e,to,xf);break;case 5:Xp(e,to,xf);break;default:throw Error(rt(329))}}}return oo(e,wi()),e.callbackNode===r?Vee.bind(null,e):null}function yR(e,t){var r=ox;return e.current.memoizedState.isDehydrated&&(O0(e,t).flags|=256),e=CT(e,t),e!==2&&(t=to,to=r,t!==null&&vR(t)),e}function vR(e){to===null?to=e:to.push.apply(to,e)}function sbe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Mc(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fh(e,t){for(t&=~n6,t&=~aC,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Oc(t),n=1<<r;e[r]=-1,t&=~n}}function G9(e){if(Vr&6)throw Error(rt(327));xy();var t=uT(e,0);if(!(t&1))return oo(e,wi()),null;var r=CT(e,t);if(e.tag!==0&&r===2){var n=V3(e);n!==0&&(t=n,r=yR(e,n))}if(r===1)throw r=ib,O0(e,0),fh(e,t),oo(e,wi()),r;if(r===6)throw Error(rt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xp(e,to,xf),oo(e,wi()),null}function a6(e,t){var r=Vr;Vr|=1;try{return e(t)}finally{Vr=r,Vr===0&&(Yy=wi()+500,tC&&up())}}function K0(e){yh!==null&&yh.tag===0&&!(Vr&6)&&xy();var t=Vr;Vr|=1;var r=Cl.transition,n=ln;try{if(Cl.transition=null,ln=1,e)return e()}finally{ln=n,Cl.transition=r,Vr=t,!(Vr&6)&&up()}}function s6(){Po=Gg.current,Bn(Gg)}function O0(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dxe(r)),Ui!==null)for(r=Ui.return;r!==null;){var n=r;switch(Bj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mT();break;case 3:qy(),Bn(ao),Bn(hs),Yj();break;case 5:Kj(n);break;case 4:qy();break;case 13:Bn(Zn);break;case 19:Bn(Zn);break;case 10:Wj(n.type._context);break;case 22:case 23:s6()}r=r.return}if(xa=e,Ui=e=Rh(e.current,null),Ba=Po=t,oa=0,ib=null,n6=aC=q0=0,to=ox=null,p0!==null){for(t=0;t<p0.length;t++)if(r=p0[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}p0=null}return e}function Wee(e,t){do{var r=Ui;try{if(Vj(),uA.current=ET,ST){for(var n=Qn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ST=!1}if(G0=0,ya=ia=Qn=null,ax=!1,tb=0,r6.current=null,r===null||r.return===null){oa=1,ib=t,Ui=null;break}e:{var a=e,s=r.return,o=r,l=t;if(t=Ba,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=R9(s);if(h!==null){h.flags&=-257,L9(h,s,o,a,t),h.mode&1&&I9(a,c,t),t=h,l=c;var m=t.updateQueue;if(m===null){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}else{if(!(t&1)){I9(a,c,t),o6();break e}l=Error(rt(426))}}else if(Hn&&o.mode&1){var y=R9(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),L9(y,s,o,a,t),Uj(Ky(l,o));break e}}a=l=Ky(l,o),oa!==4&&(oa=2),ox===null?ox=[a]:ox.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=kee(a,l,t);T9(a,g);break e;case 1:o=l;var w=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Nh===null||!Nh.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var x=Cee(a,o,t);T9(a,x);break e}}a=a.return}while(a!==null)}qee(r)}catch(b){t=b,Ui===r&&r!==null&&(Ui=r=r.return);continue}break}while(!0)}function Hee(){var e=AT.current;return AT.current=ET,e===null?ET:e}function o6(){(oa===0||oa===3||oa===2)&&(oa=4),xa===null||!(q0&268435455)&&!(aC&268435455)||fh(xa,Ba)}function CT(e,t){var r=Vr;Vr|=2;var n=Hee();(xa!==e||Ba!==t)&&(xf=null,O0(e,t));do try{obe();break}catch(i){Wee(e,i)}while(!0);if(Vj(),Vr=r,AT.current=n,Ui!==null)throw Error(rt(261));return xa=null,Ba=0,oa}function obe(){for(;Ui!==null;)Gee(Ui)}function lbe(){for(;Ui!==null&&!Rwe();)Gee(Ui)}function Gee(e){var t=Yee(e.alternate,e,Po);e.memoizedProps=e.pendingProps,t===null?qee(e):Ui=t,r6.current=null}function qee(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=tbe(r,t),r!==null){r.flags&=32767,Ui=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oa=6,Ui=null;return}}else if(r=ebe(r,t,Po),r!==null){Ui=r;return}if(t=t.sibling,t!==null){Ui=t;return}Ui=t=e}while(t!==null);oa===0&&(oa=5)}function Xp(e,t,r){var n=ln,i=Cl.transition;try{Cl.transition=null,ln=1,cbe(e,t,r,n)}finally{Cl.transition=i,ln=n}return null}function cbe(e,t,r,n){do xy();while(yh!==null);if(Vr&6)throw Error(rt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(rt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Vwe(e,a),e===xa&&(Ui=xa=null,Ba=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||jS||(jS=!0,Xee(cT,function(){return xy(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Cl.transition,Cl.transition=null;var s=ln;ln=1;var o=Vr;Vr|=4,r6.current=null,nbe(e,r),Uee(r,e),Oxe(Y3),fT=!!K3,Y3=K3=null,e.current=r,ibe(r),Lwe(),Vr=o,ln=s,Cl.transition=a}else e.current=r;if(jS&&(jS=!1,yh=e,kT=i),a=e.pendingLanes,a===0&&(Nh=null),jwe(r.stateNode),oo(e,wi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(TT)throw TT=!1,e=mR,mR=null,e;return kT&1&&e.tag!==0&&xy(),a=e.pendingLanes,a&1?e===gR?lx++:(lx=0,gR=e):lx=0,up(),null}function xy(){if(yh!==null){var e=kQ(kT),t=Cl.transition,r=ln;try{if(Cl.transition=null,ln=16>e?16:e,yh===null)var n=!1;else{if(e=yh,yh=null,kT=0,Vr&6)throw Error(rt(331));var i=Vr;for(Vr|=4,St=e.current;St!==null;){var a=St,s=a.child;if(St.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(St=c;St!==null;){var u=St;switch(u.tag){case 0:case 11:case 15:sx(8,u,a)}var f=u.child;if(f!==null)f.return=u,St=f;else for(;St!==null;){u=St;var d=u.sibling,h=u.return;if($ee(u),u===c){St=null;break}if(d!==null){d.return=h,St=d;break}St=h}}}var m=a.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}St=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,St=s;else e:for(;St!==null;){if(a=St,a.flags&2048)switch(a.tag){case 0:case 11:case 15:sx(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,St=g;break e}St=a.return}}var w=e.current;for(St=w;St!==null;){s=St;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,St=v;else e:for(s=w;St!==null;){if(o=St,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:iC(9,o)}}catch(b){ci(o,o.return,b)}if(o===s){St=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,St=x;break e}St=o.return}}if(Vr=i,up(),Cu&&typeof Cu.onPostCommitFiberRoot=="function")try{Cu.onPostCommitFiberRoot(X5,e)}catch{}n=!0}return n}finally{ln=r,Cl.transition=t}}return!1}function q9(e,t,r){t=Ky(r,t),t=kee(e,t,1),e=Ph(e,t,1),t=js(),e!==null&&(V_(e,1,t),oo(e,t))}function ci(e,t,r){if(e.tag===3)q9(e,e,r);else for(;t!==null;){if(t.tag===3){q9(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Nh===null||!Nh.has(n))){e=Ky(r,e),e=Cee(t,e,1),t=Ph(t,e,1),e=js(),t!==null&&(V_(t,1,e),oo(t,e));break}}t=t.return}}function ube(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=js(),e.pingedLanes|=e.suspendedLanes&r,xa===e&&(Ba&r)===r&&(oa===4||oa===3&&(Ba&130023424)===Ba&&500>wi()-i6?O0(e,0):n6|=r),oo(e,t)}function Kee(e,t){t===0&&(e.mode&1?(t=kS,kS<<=1,!(kS&130023424)&&(kS=4194304)):t=1);var r=js();e=Xf(e,t),e!==null&&(V_(e,t,r),oo(e,r))}function fbe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Kee(e,r)}function dbe(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(rt(314))}n!==null&&n.delete(t),Kee(e,r)}var Yee;Yee=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ao.current)ro=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ro=!1,Qxe(e,t,r);ro=!!(e.flags&131072)}else ro=!1,Hn&&t.flags&1048576&&QQ(t,vT,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;dA(e,t),e=t.pendingProps;var i=Wy(t,hs.current);wy(t,r),i=Zj(null,t,n,e,i,r);var a=Jj();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,so(n)?(a=!0,gT(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gj(t),i.updater=nC,t.stateNode=i,i._reactInternals=t,iR(t,n,e,r),t=oR(null,t,n,!0,a,r)):(t.tag=0,Hn&&a&&Fj(t),As(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(dA(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=pbe(n),e=dc(n,e),i){case 0:t=sR(null,t,n,e,r);break e;case 1:t=j9(null,t,n,e,r);break e;case 11:t=M9(null,t,n,e,r);break e;case 14:t=D9(null,t,n,dc(n.type,e),r);break e}throw Error(rt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dc(n,i),sR(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dc(n,i),j9(e,t,n,i,r);case 3:e:{if(Iee(t),e===null)throw Error(rt(387));n=t.pendingProps,a=t.memoizedState,i=a.element,aee(e,t),bT(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Ky(Error(rt(423)),t),t=$9(e,t,n,r,i);break e}else if(n!==i){i=Ky(Error(rt(424)),t),t=$9(e,t,n,r,i);break e}else for(zo=Oh(t.stateNode.containerInfo.firstChild),Ho=t,Hn=!0,xc=null,r=nee(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hy(),n===i){t=Zf(e,t,r);break e}As(e,t,n,r)}t=t.child}return t;case 5:return see(t),e===null&&tR(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,X3(n,i)?s=null:a!==null&&X3(n,a)&&(t.flags|=32),Nee(e,t),As(e,t,s,r),t.child;case 6:return e===null&&tR(t),null;case 13:return Ree(e,t,r);case 4:return qj(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Gy(t,null,n,r):As(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dc(n,i),M9(e,t,n,i,r);case 7:return As(e,t,t.pendingProps,r),t.child;case 8:return As(e,t,t.pendingProps.children,r),t.child;case 12:return As(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,kn(wT,n._currentValue),n._currentValue=s,a!==null)if(Mc(a.value,s)){if(a.children===i.children&&!ao.current){t=Zf(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Bf(-1,r&-r),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),rR(a.return,r,t),o.lanes|=r;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(rt(341));s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),rR(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}As(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,wy(t,r),i=Rl(i),n=n(i),t.flags|=1,As(e,t,n,r),t.child;case 14:return n=t.type,i=dc(n,t.pendingProps),i=dc(n.type,i),D9(e,t,n,i,r);case 15:return Oee(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dc(n,i),dA(e,t),t.tag=1,so(n)?(e=!0,gT(t)):e=!1,wy(t,r),Tee(t,n,i),iR(t,n,i,r),oR(null,t,n,!0,e,r);case 19:return Lee(e,t,r);case 22:return Pee(e,t,r)}throw Error(rt(156,t.tag))};function Xee(e,t){return SQ(e,t)}function hbe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sl(e,t,r,n){return new hbe(e,t,r,n)}function l6(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pbe(e){if(typeof e=="function")return l6(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kj)return 11;if(e===Cj)return 14}return 2}function Rh(e,t){var r=e.alternate;return r===null?(r=Sl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mA(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")l6(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Dg:return P0(r.children,i,a,t);case Tj:s=8,i|=8;break;case C3:return e=Sl(12,r,t,i|2),e.elementType=C3,e.lanes=a,e;case O3:return e=Sl(13,r,t,i),e.elementType=O3,e.lanes=a,e;case P3:return e=Sl(19,r,t,i),e.elementType=P3,e.lanes=a,e;case sQ:return sC(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case iQ:s=10;break e;case aQ:s=9;break e;case kj:s=11;break e;case Cj:s=14;break e;case th:s=16,n=null;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=Sl(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function P0(e,t,r,n){return e=Sl(7,e,n,t),e.lanes=r,e}function sC(e,t,r,n){return e=Sl(22,e,n,t),e.elementType=sQ,e.lanes=r,e.stateNode={isHidden:!1},e}function SN(e,t,r){return e=Sl(6,e,null,t),e.lanes=r,e}function EN(e,t,r){return t=Sl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mbe(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iN(0),this.expirationTimes=iN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iN(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function c6(e,t,r,n,i,a,s,o,l){return e=new mbe(e,t,r,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Sl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gj(a),e}function gbe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mg,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Zee(e){if(!e)return qh;e=e._reactInternals;e:{if(_m(e)!==e||e.tag!==1)throw Error(rt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(so(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(rt(171))}if(e.tag===1){var r=e.type;if(so(r))return ZQ(e,r,t)}return t}function Jee(e,t,r,n,i,a,s,o,l){return e=c6(r,n,!0,e,i,a,s,o,l),e.context=Zee(null),r=e.current,n=js(),i=Ih(r),a=Bf(n,i),a.callback=t??null,Ph(r,a,i),e.current.lanes=i,V_(e,i,n),oo(e,n),e}function oC(e,t,r,n){var i=t.current,a=js(),s=Ih(i);return r=Zee(r),t.context===null?t.context=r:t.pendingContext=r,t=Bf(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ph(i,t,s),e!==null&&(Pc(e,i,s,a),cA(e,i,s)),s}function OT(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function K9(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function u6(e,t){K9(e,t),(e=e.alternate)&&K9(e,t)}function ybe(){return null}var Qee=typeof reportError=="function"?reportError:function(e){console.error(e)};function f6(e){this._internalRoot=e}lC.prototype.render=f6.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(rt(409));oC(e,t,null,null)};lC.prototype.unmount=f6.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;K0(function(){oC(null,e,null,null)}),t[Yf]=null}};function lC(e){this._internalRoot=e}lC.prototype.unstable_scheduleHydration=function(e){if(e){var t=PQ();e={blockedOn:null,target:e,priority:t};for(var r=0;r<uh.length&&t!==0&&t<uh[r].priority;r++);uh.splice(r,0,e),r===0&&IQ(e)}};function d6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Y9(){}function vbe(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var c=OT(s);a.call(c)}}var s=Jee(t,n,e,0,null,!1,!1,"",Y9);return e._reactRootContainer=s,e[Yf]=s.current,Xx(e.nodeType===8?e.parentNode:e),K0(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var c=OT(l);o.call(c)}}var l=c6(e,0,!1,null,null,!1,!1,"",Y9);return e._reactRootContainer=l,e[Yf]=l.current,Xx(e.nodeType===8?e.parentNode:e),K0(function(){oC(t,l,r,n)}),l}function uC(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=OT(s);o.call(l)}}oC(t,s,e,i)}else s=vbe(r,t,e,i,n);return OT(s)}CQ=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Lw(t.pendingLanes);r!==0&&(Nj(t,r|1),oo(t,wi()),!(Vr&6)&&(Yy=wi()+500,up()))}break;case 13:K0(function(){var n=Xf(e,1);if(n!==null){var i=js();Pc(n,e,1,i)}}),u6(e,1)}};Ij=function(e){if(e.tag===13){var t=Xf(e,134217728);if(t!==null){var r=js();Pc(t,e,134217728,r)}u6(e,134217728)}};OQ=function(e){if(e.tag===13){var t=Ih(e),r=Xf(e,t);if(r!==null){var n=js();Pc(r,e,t,n)}u6(e,t)}};PQ=function(){return ln};NQ=function(e,t){var r=ln;try{return ln=e,t()}finally{ln=r}};B3=function(e,t,r){switch(t){case"input":if(R3(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=eC(n);if(!i)throw Error(rt(90));lQ(n),R3(n,i)}}}break;case"textarea":uQ(e,r);break;case"select":t=r.value,t!=null&&my(e,!!r.multiple,t,!1)}};yQ=a6;vQ=K0;var wbe={usingClientEntryPoint:!1,Events:[H_,Bg,eC,mQ,gQ,a6]},uw={findFiberByHostInstance:h0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xbe={bundleType:uw.bundleType,version:uw.version,rendererPackageName:uw.rendererPackageName,rendererConfig:uw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bQ(e),e===null?null:e.stateNode},findFiberByHostInstance:uw.findFiberByHostInstance||ybe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$S.isDisabled&&$S.supportsFiber)try{X5=$S.inject(xbe),Cu=$S}catch{}}Qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wbe;Qo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d6(t))throw Error(rt(200));return gbe(e,t,null,r)};Qo.createRoot=function(e,t){if(!d6(e))throw Error(rt(299));var r=!1,n="",i=Qee;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=c6(e,1,!1,null,null,r,!1,n,i),e[Yf]=t.current,Xx(e.nodeType===8?e.parentNode:e),new f6(t)};Qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):(e=Object.keys(e).join(","),Error(rt(268,e)));return e=bQ(t),e=e===null?null:e.stateNode,e};Qo.flushSync=function(e){return K0(e)};Qo.hydrate=function(e,t,r){if(!cC(t))throw Error(rt(200));return uC(null,e,t,!0,r)};Qo.hydrateRoot=function(e,t,r){if(!d6(e))throw Error(rt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=Qee;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Jee(t,null,e,1,r??null,i,!1,a,s),e[Yf]=t.current,Xx(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new lC(t)};Qo.render=function(e,t,r){if(!cC(t))throw Error(rt(200));return uC(null,e,t,!1,r)};Qo.unmountComponentAtNode=function(e){if(!cC(e))throw Error(rt(40));return e._reactRootContainer?(K0(function(){uC(null,null,e,!1,function(){e._reactRootContainer=null,e[Yf]=null})}),!0):!1};Qo.unstable_batchedUpdates=a6;Qo.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!cC(r))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return uC(e,t,r,!1,n)};Qo.version="18.3.1-next-f1338f8080-20240426";function ete(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ete)}catch(e){console.error(e)}}ete(),eQ.exports=Qo;var Gv=eQ.exports;const bbe=Hr(Gv);var X9=Gv;T3.createRoot=X9.createRoot,T3.hydrateRoot=X9.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Z9="popstate";function _be(e={}){function t(n,i){let{pathname:a,search:s,hash:o}=n.location;return wR("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:ab(i)}return Ebe(t,r,null,e)}function qn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sbe(){return Math.random().toString(36).substring(2,10)}function J9(e,t){return{usr:e.state,key:e.key,idx:t}}function wR(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qv(t):t,state:r,key:t&&t.key||n||Sbe()}}function ab({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qv(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Ebe(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,o="POP",l=null,c=u();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function f(){o="POP";let y=u(),g=y==null?null:y-c;c=y,l&&l({action:o,location:p.location,delta:g})}function d(y,g){o="PUSH";let w=wR(p.location,y,g);c=u()+1;let v=J9(w,c),x=p.createHref(w);try{s.pushState(v,"",x)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(x)}a&&l&&l({action:o,location:p.location,delta:1})}function h(y,g){o="REPLACE";let w=wR(p.location,y,g);c=u();let v=J9(w,c),x=p.createHref(w);s.replaceState(v,"",x),a&&l&&l({action:o,location:p.location,delta:0})}function m(y){return Abe(y)}let p={get action(){return o},get location(){return e(i,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Z9,f),l=y,()=>{i.removeEventListener(Z9,f),l=null}},createHref(y){return t(i,y)},createURL:m,encodeLocation(y){let g=m(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:h,go(y){return s.go(y)}};return p}function Abe(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),qn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ab(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function tte(e,t,r="/"){return Tbe(e,t,r,!1)}function Tbe(e,t,r,n){let i=typeof t=="string"?qv(t):t,a=Jf(i.pathname||"/",r);if(a==null)return null;let s=rte(e);kbe(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let c=$be(a);o=Dbe(s[l],c,n)}return o}function rte(e,t=[],r=[],n="",i=!1){let a=(s,o,l=i,c)=>{let u={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;qn(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let f=Uf([n,u.relativePath]),d=r.concat(u);s.children&&s.children.length>0&&(qn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),rte(s.children,t,d,f,l)),!(s.path==null&&!s.index)&&t.push({path:f,score:Lbe(f,s.index),routesMeta:d})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of nte(s.path))a(s,o,!0,c)}),t}function nte(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=nte(n.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function kbe(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Mbe(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Cbe=/^:[\w-]+$/,Obe=3,Pbe=2,Nbe=1,Ibe=10,Rbe=-2,Q9=e=>e==="*";function Lbe(e,t){let r=e.split("/"),n=r.length;return r.some(Q9)&&(n+=Rbe),t&&(n+=Pbe),r.filter(i=>!Q9(i)).reduce((i,a)=>i+(Cbe.test(a)?Obe:a===""?Nbe:Ibe),n)}function Mbe(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Dbe(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",s=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,u=a==="/"?t:t.slice(a.length)||"/",f=PT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!f&&c&&r&&!n[n.length-1].route.index&&(f=PT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:Uf([a,f.pathname]),pathnameBase:zbe(Uf([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=Uf([a,f.pathnameBase]))}return s}function PT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=jbe(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:f},d)=>{if(u==="*"){let m=o[d]||"";s=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const h=o[d];return f&&!h?c[u]=void 0:c[u]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:e}}function jbe(e,t=!1,r=!0){Dc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function $be(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Jf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var Fbe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Bbe(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?qv(e):e,a;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?a=eU(r.substring(1),"/"):a=eU(r,t)):a=t,{pathname:a,search:Vbe(n),hash:Wbe(i)}}function eU(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function AN(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ube(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function h6(e){let t=Ube(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function p6(e,t,r,n=!1){let i;typeof e=="string"?i=qv(e):(i={...e},qn(!i.pathname||!i.pathname.includes("?"),AN("?","pathname","search",i)),qn(!i.pathname||!i.pathname.includes("#"),AN("#","pathname","hash",i)),qn(!i.search||!i.search.includes("#"),AN("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=r;else{let f=t.length-1;if(!n&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}o=f>=0?t[f]:"/"}let l=Bbe(i,o),c=s&&s!=="/"&&s.endsWith("/"),u=(a||s===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Uf=e=>e.join("/").replace(/\/\/+/g,"/"),zbe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Vbe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Wbe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Hbe=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Gbe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function qbe(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ite=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ate(e,t){let r=e;if(typeof r!="string"||!Fbe.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(ite)try{let a=new URL(window.location.href),s=r.startsWith("//")?new URL(a.protocol+r):new URL(r),o=Jf(s.pathname,t);s.origin===a.origin&&o!=null?r=o+s.search+s.hash:i=!0}catch{Dc(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ste=["POST","PUT","PATCH","DELETE"];new Set(ste);var Kbe=["GET",...ste];new Set(Kbe);var Kv=C.createContext(null);Kv.displayName="DataRouter";var fC=C.createContext(null);fC.displayName="DataRouterState";var Ybe=C.createContext(!1),ote=C.createContext({isTransitioning:!1});ote.displayName="ViewTransition";var Xbe=C.createContext(new Map);Xbe.displayName="Fetchers";var Zbe=C.createContext(null);Zbe.displayName="Await";var tl=C.createContext(null);tl.displayName="Navigation";var q_=C.createContext(null);q_.displayName="Location";var Wc=C.createContext({outlet:null,matches:[],isDataRoute:!1});Wc.displayName="Route";var m6=C.createContext(null);m6.displayName="RouteError";var lte="REACT_ROUTER_ERROR",Jbe="REDIRECT",Qbe="ROUTE_ERROR_RESPONSE";function e_e(e){if(e.startsWith(`${lte}:${Jbe}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function t_e(e){if(e.startsWith(`${lte}:${Qbe}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Hbe(t.status,t.statusText,t.data)}catch{}}function r_e(e,{relative:t}={}){qn(Yv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(tl),{hash:i,pathname:a,search:s}=Y_(e,{relative:t}),o=a;return r!=="/"&&(o=a==="/"?r:Uf([r,a])),n.createHref({pathname:o,search:s,hash:i})}function Yv(){return C.useContext(q_)!=null}function fp(){return qn(Yv(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(q_).location}var cte="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ute(e){C.useContext(tl).static||C.useLayoutEffect(e)}function K_(){let{isDataRoute:e}=C.useContext(Wc);return e?y_e():n_e()}function n_e(){qn(Yv(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(Kv),{basename:t,navigator:r}=C.useContext(tl),{matches:n}=C.useContext(Wc),{pathname:i}=fp(),a=JSON.stringify(h6(n)),s=C.useRef(!1);return ute(()=>{s.current=!0}),C.useCallback((l,c={})=>{if(Dc(s.current,cte),!s.current)return;if(typeof l=="number"){r.go(l);return}let u=p6(l,JSON.parse(a),i,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Uf([t,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[t,r,a,i,e])}var i_e=C.createContext(null);function a_e(e){let t=C.useContext(Wc).outlet;return C.useMemo(()=>t&&C.createElement(i_e.Provider,{value:e},t),[t,e])}function Y_(e,{relative:t}={}){let{matches:r}=C.useContext(Wc),{pathname:n}=fp(),i=JSON.stringify(h6(r));return C.useMemo(()=>p6(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function s_e(e,t){return fte(e,t)}function fte(e,t,r,n,i){var w;qn(Yv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=C.useContext(tl),{matches:s}=C.useContext(Wc),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let v=f&&f.path||"";hte(c,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=fp(),h;if(t){let v=typeof t=="string"?qv(t):t;qn(u==="/"||((w=v.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${v.pathname}" was given in the \`location\` prop.`),h=v}else h=d;let m=h.pathname||"/",p=m;if(u!=="/"){let v=u.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=tte(e,{pathname:p});Dc(f||y!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Dc(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=f_e(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Uf([u,a.encodeLocation?a.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Uf([u,a.encodeLocation?a.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),s,r,n,i);return t&&g?C.createElement(q_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function o_e(){let e=g_e(),t=Gbe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:a},"ErrorBoundary")," or"," ",C.createElement("code",{style:a},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:i},r):null,s)}var l_e=C.createElement(o_e,null),dte=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=t_e(e.digest);r&&(e=r)}let t=e!==void 0?C.createElement(Wc.Provider,{value:this.props.routeContext},C.createElement(m6.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?C.createElement(c_e,{error:e},t):t}};dte.contextType=Ybe;var TN=new WeakMap;function c_e({children:e,error:t}){let{basename:r}=C.useContext(tl);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=e_e(t.digest);if(n){let i=TN.get(t);if(i)throw i;let a=ate(n.location,r);if(ite&&!TN.get(t))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw TN.set(t,s),s}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function u_e({routeContext:e,match:t,children:r}){let n=C.useContext(Kv);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(Wc.Provider,{value:e},r)}function f_e(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,s=r==null?void 0:r.errors;if(s!=null){let u=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);qn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<a.length;u++){let f=a[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=u),f.route.id){let{loaderData:d,errors:h}=r,m=f.route.loader&&!d.hasOwnProperty(f.route.id)&&(!h||h[f.route.id]===void 0);if(f.route.lazy||m){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let c=r&&n?(u,f)=>{var d,h;n(u,{location:r.location,params:((h=(d=r.matches)==null?void 0:d[0])==null?void 0:h.params)??{},unstable_pattern:qbe(r.matches),errorInfo:f})}:void 0;return a.reduceRight((u,f,d)=>{let h,m=!1,p=null,y=null;r&&(h=s&&f.route.id?s[f.route.id]:void 0,p=f.route.errorElement||l_e,o&&(l<0&&d===0?(hte("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):l===d&&(m=!0,y=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,d+1)),w=()=>{let v;return h?v=p:m?v=y:f.route.Component?v=C.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=u,C.createElement(u_e,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:v})};return r&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?C.createElement(dte,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):w()},null)}function g6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d_e(e){let t=C.useContext(Kv);return qn(t,g6(e)),t}function h_e(e){let t=C.useContext(fC);return qn(t,g6(e)),t}function p_e(e){let t=C.useContext(Wc);return qn(t,g6(e)),t}function y6(e){let t=p_e(e),r=t.matches[t.matches.length-1];return qn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function m_e(){return y6("useRouteId")}function g_e(){var n;let e=C.useContext(m6),t=h_e("useRouteError"),r=y6("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function y_e(){let{router:e}=d_e("useNavigate"),t=y6("useNavigate"),r=C.useRef(!1);return ute(()=>{r.current=!0}),C.useCallback(async(i,a={})=>{Dc(r.current,cte),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var tU={};function hte(e,t,r){!t&&!tU[e]&&(tU[e]=!0,Dc(!1,r))}C.memo(v_e);function v_e({routes:e,future:t,state:r,onError:n}){return fte(e,void 0,r,n,t)}function v6({to:e,replace:t,state:r,relative:n}){qn(Yv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(tl);Dc(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=C.useContext(Wc),{pathname:s}=fp(),o=K_(),l=p6(e,h6(a),s,n==="path"),c=JSON.stringify(l);return C.useEffect(()=>{o(JSON.parse(c),{replace:t,state:r,relative:n})},[o,c,n,t,r]),null}function pte(e){return a_e(e.context)}function To(e){qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w_e({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){qn(!Yv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof r=="string"&&(r=qv(r));let{pathname:c="/",search:u="",hash:f="",state:d=null,key:h="default"}=r,m=C.useMemo(()=>{let p=Jf(c,o);return p==null?null:{location:{pathname:p,search:u,hash:f,state:d,key:h},navigationType:n}},[o,c,u,f,d,h,n]);return Dc(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:C.createElement(tl.Provider,{value:l},C.createElement(q_.Provider,{children:t,value:m}))}function x_e({children:e,location:t}){return s_e(xR(e),t)}function xR(e,t=[]){let r=[];return C.Children.forEach(e,(n,i)=>{if(!C.isValidElement(n))return;let a=[...t,i];if(n.type===C.Fragment){r.push.apply(r,xR(n.props.children,a));return}qn(n.type===To,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=xR(n.props.children,a)),r.push(s)}),r}var gA="get",yA="application/x-www-form-urlencoded";function dC(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function b_e(e){return dC(e)&&e.tagName.toLowerCase()==="button"}function __e(e){return dC(e)&&e.tagName.toLowerCase()==="form"}function S_e(e){return dC(e)&&e.tagName.toLowerCase()==="input"}function E_e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function A_e(e,t){return e.button===0&&(!t||t==="_self")&&!E_e(e)}var FS=null;function T_e(){if(FS===null)try{new FormData(document.createElement("form"),0),FS=!1}catch{FS=!0}return FS}var k_e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kN(e){return e!=null&&!k_e.has(e)?(Dc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yA}"`),null):e}function C_e(e,t){let r,n,i,a,s;if(__e(e)){let o=e.getAttribute("action");n=o?Jf(o,t):null,r=e.getAttribute("method")||gA,i=kN(e.getAttribute("enctype"))||yA,a=new FormData(e)}else if(b_e(e)||S_e(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||o.getAttribute("action");if(n=l?Jf(l,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||gA,i=kN(e.getAttribute("formenctype"))||kN(o.getAttribute("enctype"))||yA,a=new FormData(o,e),!T_e()){let{name:c,type:u,value:f}=e;if(u==="image"){let d=c?`${c}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else c&&a.append(c,f)}}else{if(dC(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=gA,n=null,i=yA,s=e}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function w6(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function O_e(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Jf(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function P_e(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N_e(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function I_e(e,t,r){let n=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let s=await P_e(a,r);return s.links?s.links():[]}return[]}));return D_e(n.flat(1).filter(N_e).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rU(e,t,r,n,i,a){let s=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,o=(l,c)=>{var u;return r[c].pathname!==l.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==l.params["*"]};return a==="assets"?t.filter((l,c)=>s(l,c)||o(l,c)):a==="data"?t.filter((l,c)=>{var f;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function R_e(e,t,{includeHydrateFallback:r}={}){return L_e(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function L_e(e){return[...new Set(e)]}function M_e(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function D_e(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let a=JSON.stringify(M_e(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function mte(){let e=C.useContext(Kv);return w6(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function j_e(){let e=C.useContext(fC);return w6(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var x6=C.createContext(void 0);x6.displayName="FrameworkContext";function gte(){let e=C.useContext(x6);return w6(e,"You must render this element inside a <HydratedRouter> element"),e}function $_e(e,t){let r=C.useContext(x6),[n,i]=C.useState(!1),[a,s]=C.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=t,d=C.useRef(null);C.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let p=g=>{g.forEach(w=>{s(w.isIntersecting)})},y=new IntersectionObserver(p,{threshold:.5});return d.current&&y.observe(d.current),()=>{y.disconnect()}}},[e]),C.useEffect(()=>{if(n){let p=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{i(!0)},m=()=>{i(!1),s(!1)};return r?e!=="intent"?[a,d,{}]:[a,d,{onFocus:fw(o,h),onBlur:fw(l,m),onMouseEnter:fw(c,h),onMouseLeave:fw(u,m),onTouchStart:fw(f,h)}]:[!1,d,{}]}function fw(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function F_e({page:e,...t}){let{router:r}=mte(),n=C.useMemo(()=>tte(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?C.createElement(U_e,{page:e,matches:n,...t}):null}function B_e(e){let{manifest:t,routeModules:r}=gte(),[n,i]=C.useState([]);return C.useEffect(()=>{let a=!1;return I_e(e,t,r).then(s=>{a||i(s)}),()=>{a=!0}},[e,t,r]),n}function U_e({page:e,matches:t,...r}){let n=fp(),{future:i,manifest:a,routeModules:s}=gte(),{basename:o}=mte(),{loaderData:l,matches:c}=j_e(),u=C.useMemo(()=>rU(e,t,c,a,n,"data"),[e,t,c,a,n]),f=C.useMemo(()=>rU(e,t,c,a,n,"assets"),[e,t,c,a,n]),d=C.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let p=new Set,y=!1;if(t.forEach(w=>{var x;let v=a.routes[w.route.id];!v||!v.hasLoader||(!u.some(b=>b.route.id===w.route.id)&&w.route.id in l&&((x=s[w.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?y=!0:p.add(w.route.id))}),p.size===0)return[];let g=O_e(e,o,i.unstable_trailingSlashAwareDataRequests,"data");return y&&p.size>0&&g.searchParams.set("_routes",t.filter(w=>p.has(w.route.id)).map(w=>w.route.id).join(",")),[g.pathname+g.search]},[o,i.unstable_trailingSlashAwareDataRequests,l,n,a,u,t,e,s]),h=C.useMemo(()=>R_e(f,a),[f,a]),m=B_e(f);return C.createElement(C.Fragment,null,d.map(p=>C.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...r})),h.map(p=>C.createElement("link",{key:p,rel:"modulepreload",href:p,...r})),m.map(({key:p,link:y})=>C.createElement("link",{key:p,nonce:r.nonce,...y,crossOrigin:y.crossOrigin??r.crossOrigin})))}function z_e(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var V_e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{V_e&&(window.__reactRouterVersion="7.13.0")}catch{}function W_e({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=C.useRef();i.current==null&&(i.current=_be({window:n,v5Compat:!0}));let a=i.current,[s,o]=C.useState({action:a.action,location:a.location}),l=C.useCallback(c=>{r===!1?o(c):C.startTransition(()=>o(c))},[r]);return C.useLayoutEffect(()=>a.listen(l),[a,l]),C.createElement(w_e,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:r})}var yte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hC=C.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:d,...h},m){let{basename:p,unstable_useTransitions:y}=C.useContext(tl),g=typeof c=="string"&&yte.test(c),w=ate(c,p);c=w.to;let v=r_e(c,{relative:i}),[x,b,S]=$_e(n,h),T=q_e(c,{replace:s,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:d,unstable_useTransitions:y});function A(M){t&&t(M),M.defaultPrevented||T(M)}let O=C.createElement("a",{...h,...S,href:w.absoluteURL||v,onClick:w.isExternal||a?t:A,ref:z_e(m,b),target:l,"data-discover":!g&&r==="render"?"true":void 0});return x&&!g?C.createElement(C.Fragment,null,O,C.createElement(F_e,{page:v})):O});hC.displayName="Link";var vte=C.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...c},u){let f=Y_(s,{relative:c.relative}),d=fp(),h=C.useContext(fC),{navigator:m,basename:p}=C.useContext(tl),y=h!=null&&J_e(f)&&o===!0,g=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,w=d.pathname,v=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(w=w.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&p&&(v=Jf(v,p)||v);const x=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let b=w===g||!i&&w.startsWith(g)&&w.charAt(x)==="/",S=v!=null&&(v===g||!i&&v.startsWith(g)&&v.charAt(g.length)==="/"),T={isActive:b,isPending:S,isTransitioning:y},A=b?t:void 0,O;typeof n=="function"?O=n(T):O=[n,b?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(T):a;return C.createElement(hC,{...c,"aria-current":A,className:O,ref:u,style:M,to:s,viewTransition:o},typeof l=="function"?l(T):l)});vte.displayName="NavLink";var H_e=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:a,method:s=gA,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:d,...h},m)=>{let{unstable_useTransitions:p}=C.useContext(tl),y=X_e(),g=Z_e(o,{relative:c}),w=s.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&yte.test(o),x=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let S=b.nativeEvent.submitter,T=(S==null?void 0:S.getAttribute("formmethod"))||s,A=()=>y(S||b.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:i,state:a,relative:c,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:d});p&&r!==!1?C.startTransition(()=>A()):A()};return C.createElement("form",{ref:m,method:w,action:g,onSubmit:n?l:x,...h,"data-discover":!v&&e==="render"?"true":void 0})});H_e.displayName="Form";function G_e(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wte(e){let t=C.useContext(Kv);return qn(t,G_e(e)),t}function q_e(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=K_(),u=fp(),f=Y_(e,{relative:a});return C.useCallback(d=>{if(A_e(d,t)){d.preventDefault();let h=r!==void 0?r:ab(u)===ab(f),m=()=>c(e,{replace:h,state:n,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});l?C.startTransition(()=>m()):m()}},[u,c,f,r,n,t,e,i,a,s,o,l])}var K_e=0,Y_e=()=>`__${String(++K_e)}__`;function X_e(){let{router:e}=wte("useSubmit"),{basename:t}=C.useContext(tl),r=m_e(),n=e.fetch,i=e.navigate;return C.useCallback(async(a,s={})=>{let{action:o,method:l,encType:c,formData:u,body:f}=C_e(a,t);if(s.navigate===!1){let d=s.fetcherKey||Y_e();await n(d,r,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:u,body:f,formMethod:s.method||l,formEncType:s.encType||c,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:u,body:f,formMethod:s.method||l,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,i,t,r])}function Z_e(e,{relative:t}={}){let{basename:r}=C.useContext(tl),n=C.useContext(Wc);qn(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Y_(e||".",{relative:t})},s=fp();if(e==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();a.search=u?`?${u}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Uf([r,a.pathname])),ab(a)}function J_e(e,{relative:t}={}){let r=C.useContext(ote);qn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=wte("useViewTransitionState"),i=Y_(e,{relative:t});if(!r.isTransitioning)return!1;let a=Jf(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=Jf(r.nextLocation.pathname,n)||r.nextLocation.pathname;return PT(i.pathname,s)!=null||PT(i.pathname,a)!=null}var wu=function(){return wu=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},wu.apply(this,arguments)};function Xv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Q_e(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{c(n.next(u))}catch(f){s(f)}}function l(u){try{c(n.throw(u))}catch(f){s(f)}}function c(u){u.done?a(u.value):i(u.value).then(o,l)}c((n=n.apply(e,t||[])).next())})}function e2e(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}const t2e=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class b6 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class r2e extends b6{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nU extends b6{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class iU extends b6{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var bR;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(bR||(bR={}));class n2e{constructor(t,{headers:r={},customFetch:n,region:i=bR.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=t2e(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Q_e(this,arguments,void 0,function*(r,n={}){var i;let a,s;try{const{headers:o,method:l,body:c,signal:u,timeout:f}=n;let d={},{region:h}=n;h||(h=this.region);const m=new URL(`${this.url}/${r}`);h&&h!=="any"&&(d["x-region"]=h,m.searchParams.set("forceFunctionRegion",h));let p;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",p=c):typeof c=="string"?(d["Content-Type"]="text/plain",p=c):typeof FormData<"u"&&c instanceof FormData?p=c:(d["Content-Type"]="application/json",p=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?p=JSON.stringify(c):p=c;let y=u;f&&(s=new AbortController,a=setTimeout(()=>s.abort(),f),u?(y=s.signal,u.addEventListener("abort",()=>s.abort())):y=s.signal);const g=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),o),body:p,signal:y}).catch(b=>{throw new r2e(b)}),w=g.headers.get("x-relay-error");if(w&&w==="true")throw new nU(g);if(!g.ok)throw new iU(g);let v=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return v==="application/json"?x=yield g.json():v==="application/octet-stream"||v==="application/pdf"?x=yield g.blob():v==="text/event-stream"?x=g:v==="multipart/form-data"?x=yield g.formData():x=yield g.text(),{data:x,error:null,response:g}}catch(o){return{data:null,error:o,response:o instanceof iU||o instanceof nU?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var i2e=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},a2e=class{constructor(e){var t,r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=e.urlLengthLimit)!==null&&n!==void 0?n:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let s=null,o=null,l=null,c=a.status,u=a.statusText;if(a.ok){var f,d;if(r.method!=="HEAD"){var h;const g=await a.text();g===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((h=r.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?o=g:o=JSON.parse(g))}const p=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),y=(d=a.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");p&&y&&y.length>1&&(l=parseInt(y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var m;const p=await a.text();try{s=JSON.parse(p),Array.isArray(s)&&a.status===404&&(o=[],s=null,c=200,u="OK")}catch{a.status===404&&p===""?(c=204,u="No Content"):s={message:p}}if(s&&r.isMaybeSingle&&(!(s==null||(m=s.details)===null||m===void 0)&&m.includes("0 rows"))&&(s=null,c=200,u="OK"),s&&r.shouldThrowOnError)throw new i2e(s)}return{error:s,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(a=>{var s;let o="",l="",c="";const u=a==null?void 0:a.cause;if(u){var f,d,h,m;const g=(f=u==null?void 0:u.message)!==null&&f!==void 0?f:"",w=(d=u==null?void 0:u.code)!==null&&d!==void 0?d:"";o=`${(h=a==null?void 0:a.name)!==null&&h!==void 0?h:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(m=u==null?void 0:u.name)!==null&&m!==void 0?m:"Error"}: ${g}`,w&&(o+=` (${w})`),u!=null&&u.stack&&(o+=`
${u.stack}`)}else{var p;o=(p=a==null?void 0:a.stack)!==null&&p!==void 0?p:""}const y=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",y>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${y} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((u==null?void 0:u.name)==="HeadersOverflowError"||(u==null?void 0:u.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",y>this.urlLengthLimit&&(l+=`. Your request URL is ${y} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},s2e=class extends a2e{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var s;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const aU=new RegExp("[,()]");var Sg=class extends s2e{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&aU.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&aU.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},o2e=class{constructor(e,{headers:t={},schema:r,fetch:n,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},i=r?"HEAD":"GET";let a=!1;const s=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",s),n&&l.append("Prefer",`count=${n}`),new Sg({method:i,url:o,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const i="POST",{url:a,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),r||s.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);a.searchParams.set("columns",l.join(","))}}return new Sg({method:i,url:a,headers:s,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var a;const s="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),n&&l.append("Prefer",`count=${n}`),i||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);o.searchParams.set("columns",u.join(","))}}return new Sg({method:s,url:o,headers:l,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var r;const n="PATCH",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Sg({method:n,url:i,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Sg({method:r,url:n,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function sb(e){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sb(e)}function l2e(e,t){if(sb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c2e(e){var t=l2e(e,"string");return sb(t)=="symbol"?t:t+""}function u2e(e,t,r){return(t=c2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(r),!0).forEach(function(n){u2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var f2e=class xte{constructor(t,{headers:r={},schema:n,fetch:i,timeout:a,urlLengthLimit:s=8e3}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=s;const o=i??globalThis.fetch;a!==void 0&&a>0?this.fetch=(l,c)=>{const u=new AbortController,f=setTimeout(()=>u.abort(),a),d=c==null?void 0:c.signal;if(d){if(d.aborted)return clearTimeout(f),o(l,c);const h=()=>{clearTimeout(f),u.abort()};return d.addEventListener("abort",h,{once:!0}),o(l,BS(BS({},c),{},{signal:u.signal})).finally(()=>{clearTimeout(f),d.removeEventListener("abort",h)})}return o(l,BS(BS({},c),{},{signal:u.signal})).finally(()=>clearTimeout(f))}:this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new o2e(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new xte(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var s;let o;const l=new URL(`${this.url}/rpc/${t}`);let c;const u=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(u)),f=n&&Object.values(r).some(u);f?(o="POST",c=r):n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{l.searchParams.append(h,m)})):(o="POST",c=r);const d=new Headers(this.headers);return f?d.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&d.set("Prefer",`count=${a}`),new Sg({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}};class d2e{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const h2e="2.95.3",p2e=`realtime-js/${h2e}`,m2e="1.0.0",bte="2.0.0",oU=bte,_R=1e4,g2e=1e3,y2e=100;var nh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(nh||(nh={}));var ea;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ea||(ea={}));var gc;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(gc||(gc={}));var SR;(function(e){e.websocket="websocket"})(SR||(SR={}));var o0;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(o0||(o0={}));class v2e{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var r,n;const i=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,r,n){var i,a;const s=t.topic,o=(i=t.ref)!==null&&i!==void 0?i:"",l=(a=t.join_ref)!==null&&a!==void 0?a:"",c=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+s.length+c.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let m=new DataView(h),p=0;m.setUint8(p++,this.KINDS.userBroadcastPush),m.setUint8(p++,l.length),m.setUint8(p++,o.length),m.setUint8(p++,s.length),m.setUint8(p++,c.length),m.setUint8(p++,f.length),m.setUint8(p++,r),Array.from(l,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(o,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(s,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(c,g=>m.setUint8(p++,g.charCodeAt(0))),Array.from(f,g=>m.setUint8(p++,g.charCodeAt(0)));var y=new Uint8Array(h.byteLength+n.byteLength);return y.set(new Uint8Array(h),0),y.set(new Uint8Array(n),h.byteLength),y.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,a,s,o,l]=n;return r({join_ref:i,ref:a,topic:s,event:o,payload:l})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,i)}}_decodeUserBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2),s=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(t.slice(l,l+i));l=l+i;const u=n.decode(t.slice(l,l+a));l=l+a;const f=n.decode(t.slice(l,l+s));l=l+s;const d=t.slice(l,t.byteLength),h=o===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,m={type:this.BROADCAST_EVENT,event:u,payload:h};return s>0&&(m.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class _te{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Sn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Sn||(Sn={}));const lU=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=w2e(s,e,t,i),a),{}):{}},w2e=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?Ste(a,s):ER(s)},Ste=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return S2e(t,r)}switch(e){case Sn.bool:return x2e(t);case Sn.float4:case Sn.float8:case Sn.int2:case Sn.int4:case Sn.int8:case Sn.numeric:case Sn.oid:return b2e(t);case Sn.json:case Sn.jsonb:return _2e(t);case Sn.timestamp:return E2e(t);case Sn.abstime:case Sn.date:case Sn.daterange:case Sn.int4range:case Sn.int8range:case Sn.money:case Sn.reltime:case Sn.text:case Sn.time:case Sn.timestamptz:case Sn.timetz:case Sn.tsrange:case Sn.tstzrange:return ER(t);default:return ER(t)}},ER=e=>e,x2e=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},b2e=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_2e=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},S2e=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>Ste(t,o))}return e},E2e=e=>typeof e=="string"?e.replace(" ","T"):e,Ete=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class CN{constructor(t,r,n={},i=_R){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var cU;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(cU||(cU={}));class cx{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cx.syncState(this.state,i,a,s),this.pendingDiffs.forEach(l=>{this.state=cx.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=cx.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),o={},l={};return this.map(a,(c,u)=>{s[c]||(l[c]=u)}),this.map(s,(c,u)=>{const f=a[c];if(f){const d=u.map(y=>y.presence_ref),h=f.map(y=>y.presence_ref),m=u.filter(y=>h.indexOf(y.presence_ref)<0),p=f.filter(y=>d.indexOf(y.presence_ref)<0);m.length>0&&(o[c]=m),p.length>0&&(l[c]=p)}else o[c]=u}),this.syncDiff(a,{joins:o,leaves:l},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,l)=>{var c;const u=(c=t[o])!==null&&c!==void 0?c:[];if(t[o]=this.cloneDeep(l),u.length>0){const f=t[o].map(h=>h.presence_ref),d=u.filter(h=>f.indexOf(h.presence_ref)<0);t[o].unshift(...d)}n(o,u,l)}),this.map(s,(o,l)=>{let c=t[o];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),t[o]=c,i(o,c,l),c.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uU;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(uU||(uU={}));var ux;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ux||(ux={}));var bf;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(bf||(bf={}));class qg{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ea.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new CN(this,gc.join,this.params,this.timeout),this.rejoinTimer=new _te(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ea.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ea.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ea.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ea.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ea.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gc.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new cx(this),this.broadcastEndpointURL=Ete(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ea.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[ux.PRESENCE]&&this.bindings[ux.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(bf.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(bf.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t==null||t(bf.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,y=(m=p==null?void 0:p.length)!==null&&m!==void 0?m:0,g=[];for(let w=0;w<y;w++){const v=p[w],{filter:{event:x,schema:b,table:S,filter:T}}=v,A=h&&h[w];if(A&&A.event===x&&qg.isFilterValueEqual(A.schema,b)&&qg.isFilterValueEqual(A.table,S)&&qg.isFilterValueEqual(A.filter,T))g.push(Object.assign(Object.assign({},v),{id:A.id}));else{this.unsubscribe(),this.state=ea.errored,t==null||t(bf.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(bf.SUBSCRIBED);return}}).receive("error",h=>{this.state=ea.errored,t==null||t(bf.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(bf.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ea.joined&&t===ux.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,l;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ea.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gc.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new CN(this,gc.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ea.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new CN(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>y2e){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=gc;if(n&&[o,l,c,u].indexOf(s)>=0&&n!==this._joinRef())return;let d=this._onMessage(s,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var m,p,y;return((m=h.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(p=h.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(h=>h.callback(d,n)):(a=this.bindings[s])===null||a===void 0||a.filter(h=>{var m,p,y,g,w,v;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const x=h.id,b=(m=h.filter)===null||m===void 0?void 0:m.event;return x&&((p=r.ids)===null||p===void 0?void 0:p.includes(x))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const x=(w=(g=h==null?void 0:h.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return x==="*"||x===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof d=="object"&&"ids"in d){const m=d.data,{schema:p,table:y,commit_timestamp:g,type:w,errors:v}=m;d=Object.assign(Object.assign({},{schema:p,table:y,commit_timestamp:g,eventType:w,new:{},old:{},errors:v}),this._getPayloadRecords(m))}h.callback(d,n)})}_isClosed(){return this.state===ea.closed}_isJoined(){return this.state===ea.joined}_isJoining(){return this.state===ea.joining}_isLeaving(){return this.state===ea.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&qg.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(gc.close,{},t)}_onError(t){this._on(gc.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ea.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=lU(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=lU(t.columns,t.old_record)),r}}const ON=()=>{},US={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},A2e=[1e3,2e3,5e3,1e4],T2e=1e4,k2e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class C2e{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_R,this.transport=null,this.heartbeatIntervalMs=US.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ON,this.ref=0,this.reconnectTimer=null,this.vsn=oU,this.logger=ON,this.conn=null,this.sendBuffer=[],this.serializer=new v2e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${SR.websocket}`,this.httpEndpoint=Ete(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=d2e.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return r==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nh.connecting:return o0.Connecting;case nh.open:return o0.Open;case nh.closing:return o0.Closing;default:return o0.Closed}}isConnected(){return this.connectionState()===o0.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new qg(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(g2e,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},US.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:a,ref:s}=r,o=s?`(${s})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${o}`.trim(),a),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===nh.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===nh.open||this.conn.readyState===nh.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(gc.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([k2e],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const a={access_token:r,version:p2e};r&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(gc.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _te(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},US.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,o,l,c,u,f,d,h;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:_R,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:US.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:ON,this.vsn=(l=t==null?void 0:t.vsn)!==null&&l!==void 0?l:oU,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>A2e[m-1]||T2e,this.vsn){case m2e:this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(m,p)=>p(JSON.stringify(m)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(m,p)=>p(JSON.parse(m));break;case bte:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ob=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function O2e(e,t,r){const n=new URL(t,e);if(r)for(const[i,a]of Object.entries(r))a!==void 0&&n.searchParams.set(i,a);return n.toString()}async function P2e(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function N2e(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:a,headers:s}){const o=O2e(e.baseUrl,n,i),l=await P2e(e.auth),c=await t(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...l,...s},body:a?JSON.stringify(a):void 0}),u=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),d=f&&u?JSON.parse(u):u;if(!c.ok){const h=f?d:void 0,m=h==null?void 0:h.error;throw new ob((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:h})}return{status:c.status,headers:c.headers,data:d}}}}function zS(e){return e.join("")}var I2e=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:zS(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zS(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zS(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zS(e.namespace)}`}),!0}catch(t){if(t instanceof ob&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof ob&&r.status===409)return;throw r}}};function Jm(e){return e.join("")}var R2e=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jm(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jm(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jm(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jm(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jm(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jm(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof ob&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof ob&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},L2e=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=N2e({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new I2e(this.client,t),this.tableOps=new R2e(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},pC=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function mC(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var VS=class extends pC{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ate=class extends pC{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const M2e=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),D2e=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},AR=e=>{if(Array.isArray(e))return e.map(r=>AR(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=AR(n)}),t},j2e=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function lb(e){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lb(e)}function $2e(e,t){if(lb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F2e(e){var t=$2e(e,"string");return lb(t)=="symbol"?t:t+""}function B2e(e,t,r){return(t=F2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fU(Object(r),!0).forEach(function(n){B2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const dU=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},U2e=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e,a=i.status||500;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new VS(dU(s),a,o,n))}).catch(()=>{if(n==="vectors"){const s=a+"";t(new VS(i.statusText||`HTTP ${a} error`,a,s,n))}else{const s=a+"";t(new VS(i.statusText||`HTTP ${a} error`,a,s,n))}});else{const s=a+"";t(new VS(i.statusText||`HTTP ${a} error`,a,s,n))}}else t(new Ate(dU(e),e,n))},z2e=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!n?Qt(Qt({},i),r):(D2e(n)?(i.headers=Qt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Qt(Qt({},i),r))};async function dw(e,t,r,n,i,a,s){return new Promise((o,l)=>{e(r,z2e(t,n,i,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;if(s==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>o(c)).catch(c=>U2e(c,l,n,s))})}function Tte(e="storage"){return{get:async(t,r,n,i)=>dw(t,"GET",r,n,i,void 0,e),post:async(t,r,n,i,a)=>dw(t,"POST",r,i,a,n,e),put:async(t,r,n,i,a)=>dw(t,"PUT",r,i,a,n,e),head:async(t,r,n,i)=>dw(t,"HEAD",r,Qt(Qt({},n),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,r,n,i,a)=>dw(t,"DELETE",r,i,a,n,e)}}const V2e=Tte("storage"),{get:cb,post:hc,put:TR,head:W2e,remove:_6}=V2e,jo=Tte("vectors");var Zv=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=M2e(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(mC(r))return{data:null,error:r};throw r}}},H2e=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(mC(t))return{data:null,error:t};throw t}}};let kte;kte=Symbol.toStringTag;var G2e=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[kte]="BlobDownloadBuilder",this.promise=null}asStream(){return new H2e(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(mC(t))return{data:null,error:t};throw t}}};const q2e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hU={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var K2e=class extends Zv{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var i=this;return i.handleOperation(async()=>{let a;const s=Qt(Qt({},hU),n);let o=Qt(Qt({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",i.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),l&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(l))):(a=r,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),n!=null&&n.headers&&(o=Qt(Qt({},o),n.headers));const c=i._removeEmptyFolders(t),u=i._getFinalPath(c),f=await(e=="PUT"?TR:hc)(i.fetch,`${i.url}/object/${u}`,a,Qt({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{path:c,id:f.Id,fullPath:f.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var i=this;const a=i._removeEmptyFolders(e),s=i._getFinalPath(a),o=new URL(i.url+`/object/upload/sign/${s}`);return o.searchParams.set("token",t),i.handleOperation(async()=>{let l;const c=Qt({upsert:hU.upsert},n),u=Qt(Qt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:a,fullPath:(await TR(i.fetch,o.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const i=Qt({},r.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=await hc(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(r.url+a.url),o=s.searchParams.get("token");if(!o)throw new pC("No token returned by API");return{signedUrl:s.toString(),path:e,token:o}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await hc(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await hc(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(e),a=await hc(n.fetch,`${n.url}/object/sign/${i}`,Qt({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${a.signedURL}${s}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const i=await hc(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i.map(s=>Qt(Qt({},s),{},{signedUrl:s.signedURL?encodeURI(`${n.url}${s.signedURL}${a}`):null}))})}download(e,t,r){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"",s=this._getFinalPath(e),o=()=>cb(this.fetch,`${this.url}/${n}/${s}${a}`,{headers:this.headers,noResolveJson:!0},r);return new G2e(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>AR(await cb(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await W2e(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(mC(n)&&n instanceof Ate){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});s!==""&&n.push(s);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await _6(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const i=Qt(Qt(Qt({},q2e),t),{},{prefix:e||""});return await hc(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=Qt({},e);return await hc(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Y2e="2.95.3",X_={"X-Client-Info":`storage-js/${Y2e}`};var X2e=class extends Zv{constructor(e,t={},r,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),s=Qt(Qt({},X_),t);super(a,s,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await cb(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await cb(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await hc(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await TR(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await hc(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await _6(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Z2e=class extends Zv{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=Qt(Qt({},X_),t);super(n,i,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await hc(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await cb(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await _6(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!j2e(e))throw new pC("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new L2e({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,a){const s=i[a];return typeof s!="function"?s:async(...o)=>{try{return{data:await s.apply(i,o),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}},J2e=class extends Zv{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=Qt(Qt({},X_),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await jo.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await jo.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},Q2e=class extends Zv{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=Qt(Qt({},X_),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},eSe=class extends Zv{constructor(e,t={},r){const n=e.replace(/\/$/,""),i=Qt(Qt({},X_),{},{"Content-Type":"application/json"},t);super(n,i,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await jo.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},tSe=class extends eSe{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new rSe(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},rSe=class extends J2e{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new nSe(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},nSe=class extends Q2e{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Qt(Qt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},iSe=class extends X2e{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new K2e(this.url,this.headers,e,this.fetch)}get vectors(){return new tSe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Z2e(this.url+"/iceberg",this.headers,this.fetch)}};const Cte="2.95.3",Eg=30*1e3,kR=3,PN=kR*Eg,aSe="http://localhost:9999",sSe="supabase.auth.token",oSe={"X-Client-Info":`gotrue-js/${Cte}`},CR="X-Supabase-Api-Version",Ote={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lSe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cSe=10*60*1e3;class ub extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function jt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class uSe extends ub{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function fSe(e){return jt(e)&&e.name==="AuthApiError"}class l0 extends ub{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class md extends ub{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class ko extends md{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NN(e){return jt(e)&&e.name==="AuthSessionMissingError"}class Qm extends md{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class WS extends md{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class HS extends md{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dSe(e){return jt(e)&&e.name==="AuthImplicitGrantRedirectError"}class pU extends md{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hSe extends md{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class OR extends md{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function IN(e){return jt(e)&&e.name==="AuthRetryableFetchError"}class mU extends md{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class PR extends md{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const NT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gU=` 	
\r=`.split(""),pSe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gU.length;t+=1)e[gU[t].charCodeAt(0)]=-2;for(let t=0;t<NT.length;t+=1)e[NT[t].charCodeAt(0)]=t;return e})();function yU(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(NT[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(NT[n]),t.queuedBits-=6}}function Pte(e,t,r){const n=pSe[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function vU(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{ySe(s,n,r)};for(let s=0;s<e.length;s+=1)Pte(e.charCodeAt(s),i,a);return t.join("")}function mSe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gSe(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}mSe(n,t)}}function ySe(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function by(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Pte(e.charCodeAt(i),r,n);return new Uint8Array(t)}function vSe(e){const t=[];return gSe(e,r=>t.push(r)),new Uint8Array(t)}function g0(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>yU(i,r,n)),yU(null,r,n),t.join("")}function wSe(e){return Math.round(Date.now()/1e3)+e}function xSe(){return Symbol("auth-callback")}const Ra=()=>typeof window<"u"&&typeof document<"u",zp={tested:!1,writable:!1},Nte=()=>{if(!Ra())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zp.tested)return zp.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zp.tested=!0,zp.writable=!0}catch{zp.tested=!0,zp.writable=!1}return zp.writable};function bSe(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const Ite=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_Se=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ag=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Vp=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pa=async(e,t)=>{await e.removeItem(t)};class gC{constructor(){this.promise=new gC.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}gC.promiseConstructor=Promise;function GS(e){const t=e.split(".");if(t.length!==3)throw new PR("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!lSe.test(t[n]))throw new PR("JWT not in base64url format");return{header:JSON.parse(vU(t[0])),payload:JSON.parse(vU(t[1])),signature:by(t[2]),raw:{header:t[0],payload:t[1]}}}async function SSe(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ESe(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function ASe(e){return("0"+e.toString(16)).substr(-2)}function TSe(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,ASe).join("")}async function kSe(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function CSe(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await kSe(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function eg(e,t,r=!1){const n=TSe();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ag(e,`${t}-code-verifier`,i);const a=await CSe(n);return[a,n===a?"plain":"s256"]}const OSe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function PSe(e){const t=e.headers.get(CR);if(!t||!t.match(OSe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function NSe(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function ISe(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const RSe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tg(e){if(!RSe.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function RN(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LSe(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function wU(e){return JSON.parse(JSON.stringify(e))}const Zp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MSe=[502,503,504];async function xU(e){var t;if(!_Se(e))throw new OR(Zp(e),0);if(MSe.includes(e.status))throw new OR(Zp(e),e.status);let r;try{r=await e.json()}catch(a){throw new l0(Zp(a),a)}let n;const i=PSe(e);if(i&&i.getTime()>=Ote["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mU(Zp(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ko}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new mU(Zp(r),e.status,r.weak_password.reasons);throw new uSe(Zp(r),e.status||500,n)}const DSe=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function Zt(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[CR]||(a[CR]=Ote["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await jSe(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function jSe(e,t,r,n,i,a){const s=DSe(t,n,i,a);let o;try{o=await e(r,Object.assign({},s))}catch(l){throw console.error(l),new OR(Zp(l),0)}if(o.ok||await xU(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await xU(l)}}function lc(e){var t;let r=null;BSe(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=wSe(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function bU(e){const t=lc(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function dh(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $Se(e){return{data:e,error:null}}function FSe(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=Xv(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},s);return{data:{properties:o,user:l},error:null}}function _U(e){return e}function BSe(e){return e.access_token&&e.refresh_token&&e.expires_in}const LN=["global","local","others"];class USe{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ite(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=LN[0]){if(LN.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${LN.join(", ")}`);try{return await Zt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(jt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Zt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:dh})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Xv(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Zt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:FSe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(jt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Zt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dh})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Zt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:_U});if(u.error)throw u.error;const f=await u.json(),d=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(m=>{const p=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(jt(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){tg(t);try{return await Zt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dh})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){tg(t);try{return await Zt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:dh})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){tg(t);try{return await Zt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:dh})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){tg(t.userId);try{const{data:r,error:n}=await Zt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){tg(t.userId),tg(t.id);try{return{data:await Zt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Zt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:_U});if(u.error)throw u.error;const f=await u.json(),d=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(m=>{const p=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=p}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(jt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await Zt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Zt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Zt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Zt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Zt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}}function SU(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const rg={debug:!!(globalThis&&Nte()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rte extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class zSe extends Rte{}async function VSe(e,t,r){rg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),rg.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){rg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{rg.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw rg.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zSe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rg.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function WSe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lte(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function HSe(e){return parseInt(e,16)}function GSe(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function qSe(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:l,resources:c,scheme:u,uri:f,version:d}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=Lte(e.address),m=u?`${u}://${n}`:n,p=e.statement?`${e.statement}
`:"",y=`${m} wants you to sign in with your Ethereum account:
${h}

${p}`;let g=`URI: ${f}
Version: ${d}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),o&&(g+=`
Not Before: ${o.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let w=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);w+=`
- ${v}`}g+=w}return`${y}
${g}`}class Ri extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class IT extends Ri{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function KSe({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ri({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ri({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ri({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ri({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ri({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ri({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Ri({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ri({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(Mte(s)){if(a.rp.id!==s)return new Ri({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ri({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ri({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function YSe({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ri({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ri({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Mte(n)){if(r.rpId!==n)return new Ri({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ri({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ri({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ri({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class XSe{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ZSe=new XSe;function JSe(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=Xv(e,["challenge","user","excludeCredentials"]),a=by(t).buffer,s=Object.assign(Object.assign({},r),{id:by(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:by(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function QSe(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Xv(e,["challenge","allowCredentials"]),i=by(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const o=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:by(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function eEe(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:g0(new Uint8Array(e.response.attestationObject)),clientDataJSON:g0(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function tEe(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:g0(new Uint8Array(i.authenticatorData)),clientDataJSON:g0(new Uint8Array(i.clientDataJSON)),signature:g0(new Uint8Array(i.signature)),userHandle:i.userHandle?g0(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mte(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function EU(){var e,t;return!!(Ra()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function rEe(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new IT("Browser returned unexpected credential type",t)}:{data:null,error:new IT("Empty credential response",t)}}catch(t){return{data:null,error:KSe({error:t,options:e})}}}async function nEe(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new IT("Browser returned unexpected credential type",t)}:{data:null,error:new IT("Empty credential response",t)}}catch(t){return{data:null,error:YSe({error:t,options:e})}}}const iEe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},aEe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function RT(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const o=n[a];t(o)?n[a]=RT(o,s):n[a]=RT(s)}else n[a]=s}return n}function sEe(e,t){return RT(iEe,e,t||{})}function oEe(e,t){return RT(aEe,e,t||{})}class lEe{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){var s;try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=i??ZSe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;if(!u.name){const f=n;if(f)u.name=`${u.id}:${f}`;else{const h=(await this.client.getUser()).data.user,m=((s=h==null?void 0:h.user_metadata)===null||s===void 0?void 0:s.name)||(h==null?void 0:h.email)||(h==null?void 0:h.id)||"User";u.name=`${u.id}:${m}`}}u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=sEe(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:d}=await rEe({publicKey:u,signal:c});return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=oEe(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:d}=await nEe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new l0("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new ub("rpId is required for WebAuthn authentication")};try{if(!EU())return{data:null,error:new l0("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:o};const{webauthn:l}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(s){return jt(s)?{data:null,error:s}:{data:null,error:new l0("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!r)return{data:null,error:new ub("rpId is required for WebAuthn registration")};try{if(!EU())return{data:null,error:new l0("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===t&&d.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(s){return jt(s)?{data:null,error:s}:{data:null,error:new l0("Unexpected error in register",s)}}}}WSe();const cEe={url:aSe,storageKey:sSe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oSe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function AU(e,t,r){return await r()}const ng={};class fb{get jwks(){var t,r;return(r=(t=ng[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ng[this.storageKey]=Object.assign(Object.assign({},ng[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ng[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ng[this.storageKey]=Object.assign(Object.assign({},ng[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},cEe),t);if(this.storageKey=a.storageKey,this.instanceID=(r=fb.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,fb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ra()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new USe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ite(a.fetch),this.lock=a.lock||AU,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Ra()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=VSe:this.lock=AU,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lEe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Nte()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=SU(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=SU(this.memoryStorage)),Ra()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s);try{await this._notifyAllSubscribers(s.data.event,s.data.session,!1)}catch(o){this._debug("#broadcastChannel","error",o)}})}this.initialize().catch(s=>{this._debug("#initialize()","error",s)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Cte}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ra()&&(r=bSe(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ra()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dSe(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return jt(r)?this._returnResult({error:r}):this._returnResult({error:new l0("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await Zt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:lc}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(jt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:u,password:f,options:d}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await eg(this.storage,this.storageKey)),a=await Zt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:f,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:m},xform:lc})}else if("phone"in t){const{phone:u,password:f,options:d}=t;a=await Zt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(i=d==null?void 0:d.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:lc})}else throw new WS("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await Pa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(a){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:o}=t;r=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:bU})}else if("phone"in t){const{phone:a,password:s,options:o}=t;r=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:bU})}else throw new WS("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new Qm;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,o,l,c,u,f,d;let h,m;if("message"in t)h=t.message,m=t.signature;else{const{chain:p,wallet:y,statement:g,options:w}=t;let v;if(Ra())if(typeof y=="object")v=y;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")v=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const x=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),b=await v.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!b||b.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Lte(b[0]);let T=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const O=await v.request({method:"eth_chainId"});T=HSe(O)}const A={domain:x.host,address:S,statement:g,uri:x.href,version:"1",chainId:T,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=qSe(A),m=await v.request({method:"personal_sign",params:[GSe(h),S]})}try{const{data:p,error:y}=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:m},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(d=t.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:lc});if(y)throw y;if(!p||!p.session||!p.user){const g=new Qm;return this._returnResult({data:{user:null,session:null},error:g})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:y})}catch(p){if(jt(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(t){var r,n,i,a,s,o,l,c,u,f,d,h;let m,p;if("message"in t)m=t.message,p=t.signature;else{const{chain:y,wallet:g,statement:w,options:v}=t;let x;if(Ra())if(typeof g=="object")x=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))x=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const b=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const S=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),w?{statement:w}:null));let T;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")T=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)T=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),p=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${b.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(i=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const S=await x.signMessage(new TextEncoder().encode(m),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=S}}try{const{data:y,error:g}=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:g0(p)},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:lc});if(g)throw g;if(!y||!y.session||!y.user){const w=new Qm;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(jt(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const r=await Vp(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new hSe;const{data:a,error:s}=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:lc});if(await Pa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new Qm;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,o=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:lc}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Qm;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:o,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await eg(this.storage,this.storageKey));const{error:f}=await Zt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:l}=t,{data:c,error:u}=await Zt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new WS("You must provide either an email or phone number.")}catch(o){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await Zt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:lc});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,c=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i,a,s;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await eg(this.storage,this.storageKey));const c=await Zt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:$Se});return!((a=c.data)===null||a===void 0)&&a.url&&Ra()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new ko;const{error:i}=await Zt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(jt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await Zt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:o}=await Zt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new WS("You must provide either an email or phone number and a type")}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Vp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<PN:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await Vp(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=RN()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=LSe(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Zt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dh}):await this._useSession(async r=>{var n,i,a;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ko}:await Zt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:dh})})}catch(r){if(jt(r))return NN(r)&&(await this._removeSession(),await Pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new ko;const s=i.session;let o=null,l=null;this.flowType==="pkce"&&t.email!=null&&([o,l]=await eg(this.storage,this.storageKey));const{data:c,error:u}=await Zt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:l}),jwt:s.access_token,xform:dh});if(u)throw u;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ko;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=GS(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(t.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(jt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ko;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(jt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ra())throw new HS("No browser detected.");if(t.error||t.error_description||t.error_code)throw new HS(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new pU("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new HS("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pU("No code detected.");const{data:w,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:l,token_type:c}=t;if(!a||!o||!s||!c)throw new HS("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let d=u+f;l&&(d=parseInt(l));const h=d-u;h*1e3<=Eg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const m=d-f;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,d,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,d,u);const{data:p,error:y}=await this._getUser(a);if(y)throw y;const g={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:d,refresh_token:s,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(jt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Vp(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a&&!NN(a))return this._returnResult({error:a});const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(fSe(o)&&(o.status===404||o.status===401||o.status===403)||NN(o)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=xSe(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await eg(this.storage,this.storageKey,!0));try{return await Zt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,o,l,c,u;const{data:f,error:d}=a;if(d)throw d;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Zt(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Ra()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(jt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:o,token:l,access_token:c,nonce:u}=t,f=await Zt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:lc}),{data:d,error:h}=f;return h?this._returnResult({data:{user:null,session:null},error:h}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Qm}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h}))}catch(i){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await Zt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ESe(async i=>(i>0&&await SSe(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await Zt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:lc})),(i,a)=>{const s=200*Math.pow(2,i);return a&&IN(a)&&Date.now()+s-n<Eg})}catch(n){if(this._debug(r,"error",n),jt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ra()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Vp(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Vp(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Ag(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:RN()}else if(i&&!i.user&&!i.user){const s=await Vp(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Pa(this.storage,this.storageKey+"-user"),await Ag(this.storage,this.storageKey,i)):i.user=RN()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<PN;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${PN}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),IN(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new ko;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new gC;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new ko;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),jt(a)){const s={data:null,error:a};return IN(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Pa(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ag(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=wU(i);await Ag(this.storage,this.storageKey,a)}else{const i=wU(r);await Ag(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pa(this.storage,this.storageKey),await Pa(this.storage,this.storageKey+"-code-verifier"),await Pa(this.storage,this.storageKey+"-user"),this.userStorage&&await Pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ra()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Eg);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Eg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Eg}ms, refresh threshold is ${kR} ticks`),i<=kR&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Rte)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ra()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await eg(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await Zt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:c}=await Zt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?eEe(t.webauthn.credential_response):tEe(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:l}=await Zt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=await Zt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:JSe(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:QSe(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,i,a;if(t)try{const{payload:h}=GS(t);let m=null;h.aal&&(m=h.aal);let p=m;const{data:{user:y},error:g}=await this.getUser(t);if(g)return this._returnResult({data:null,error:g});((n=(r=y==null?void 0:y.factors)===null||r===void 0?void 0:r.filter(x=>x.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const v=h.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:v},error:null}}catch(h){if(jt(h))return this._returnResult({data:null,error:h});throw h}const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=GS(s.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((a=(i=s.user.factors)===null||i===void 0?void 0:i.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(u="aal2");const d=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await Zt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ko})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ko});const s=await Zt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Ra()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new ko});const s=await Zt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&Ra()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Zt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ko})})}catch(t){if(jt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await Zt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ko})})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+cSe>i)return n;const{data:a,error:s}=await Zt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:h,error:m}=await this.getSession();if(m||!h.session)return this._returnResult({data:null,error:m});n=h.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:l}}=GS(n);r!=null&&r.allowExpired||NSe(a.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:a,header:i,signature:s},error:null}}const u=ISe(i.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,vSe(`${o}.${l}`)))throw new PR("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}}fb.nextInstanceID={};const uEe=fb,fEe="2.95.3";let Dw="";typeof Deno<"u"?Dw="deno":typeof document<"u"?Dw="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dw="react-native":Dw="node";const dEe={"X-Client-Info":`supabase-js-${Dw}/${fEe}`},hEe={headers:dEe},pEe={schema:"public"},mEe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gEe={};function db(e){"@babel/helpers - typeof";return db=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},db(e)}function yEe(e,t){if(db(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(db(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vEe(e){var t=yEe(e,"string");return db(t)=="symbol"?t:t+""}function wEe(e,t,r){return(t=vEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function si(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TU(Object(r),!0).forEach(function(n){wEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const xEe=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bEe=()=>Headers,_Ee=(e,t,r)=>{const n=xEe(r),i=bEe();return async(a,s)=>{var o;const l=(o=await t())!==null&&o!==void 0?o:e;let c=new i(s==null?void 0:s.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(a,si(si({},s),{},{headers:c}))}};function SEe(e){return e.endsWith("/")?e:e+"/"}function EEe(e,t){var r,n;const{db:i,auth:a,realtime:s,global:o}=e,{db:l,auth:c,realtime:u,global:f}=t,d={db:si(si({},l),i),auth:si(si({},c),a),realtime:si(si({},u),s),storage:{},global:si(si(si({},f),o),{},{headers:si(si({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}function AEe(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SEe(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var TEe=class extends uEe{constructor(e){super(e)}},kEe=class{constructor(e,t,r){var n,i;this.supabaseUrl=e,this.supabaseKey=t;const a=AEe(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:pEe,realtime:gEe,auth:si(si({},mEe),{},{storageKey:s}),global:hEe},l=EEe(r??{},o);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=_Ee(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(si({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new f2e(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new iSe(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new n2e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:a,flowType:s,lock:o,debug:l,throwOnError:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new TEe({url:this.authUrl.href,headers:si(si({},d),u),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:s,lock:o,debug:l,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new C2e(this.realtimeUrl.href,si(si({},e),{},{params:si(si({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const CEe=(e,t,r)=>new kEe(e,t,r);function OEe(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}OEe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PEe="https://izeqxmfsdaspgshghepz.supabase.co",NEe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml6ZXF4bWZzZGFzcGdzaGdoZXB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5ODg2NDIsImV4cCI6MjA4NjU2NDY0Mn0.n6tVCc3-GHu_1t18T7C19RhJvc5cEED4VwISTEyTZh4",Yn=CEe(PEe,NEe),Dte=C.createContext({}),gd=()=>C.useContext(Dte),IEe=({children:e})=>{const[t,r]=C.useState(null),[n,i]=C.useState(null),[a,s]=C.useState(!0);C.useEffect(()=>{Yn.auth.getSession().then(({data:{session:c}})=>{i(c),r((c==null?void 0:c.user)??null),s(!1)});const{data:{subscription:l}}=Yn.auth.onAuthStateChange((c,u)=>{i(u),r((u==null?void 0:u.user)??null),s(!1)});return()=>l.unsubscribe()},[]);const o={signUp:l=>Yn.auth.signUp(l),signIn:l=>Yn.auth.signInWithPassword(l),signOut:()=>Yn.auth.signOut(),user:t,session:n,loading:a};return E.jsx(Dte.Provider,{value:o,children:!a&&e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var REe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LEe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Bt=(e,t)=>{const r=C.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...c},u)=>C.createElement("svg",{ref:u,...REe,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${LEe(e)}`,o].join(" "),...c},[...t.map(([f,d])=>C.createElement(f,d)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MEe=Bt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=Bt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DEe=Bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jEe=Bt("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=Bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Bt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=Bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=Bt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FEe=Bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fte=Bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BEe=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UEe=Bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=Bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zEe=Bt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VEe=Bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=Bt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=Bt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HEe=Bt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GEe=Bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qEe=Bt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=Bt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YEe=Bt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XEe=Bt("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZEe=Bt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Bt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=Bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=Bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QEe=Bt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eAe=Bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tAe=Bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rAe=Bt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nAe=Bt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iAe=Bt("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aAe=Bt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=Bt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sAe=Bt("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oAe=Bt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lAe=Bt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cAe=Bt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uAe=Bt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fAe=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=Bt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dAe=Bt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=Bt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=Bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=Bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=Bt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hAe=Bt("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pAe=Bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mAe=Bt("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=Bt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gAe=Bt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function OU(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Wu(...e){return t=>{let r=!1;const n=e.map(i=>{const a=OU(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():OU(e[i],null)}}}}function Mr(...e){return C.useCallback(Wu(...e),e)}var yAe=Symbol.for("react.lazy"),MT=_j[" use ".trim().toString()];function vAe(e){return typeof e=="object"&&e!==null&&"then"in e}function Kte(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===yAe&&"_payload"in e&&vAe(e._payload)}function vC(e){const t=xAe(e),r=C.forwardRef((n,i)=>{let{children:a,...s}=n;Kte(a)&&typeof MT=="function"&&(a=MT(a._payload));const o=C.Children.toArray(a),l=o.find(_Ae);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}var wAe=vC("Slot");function xAe(e){const t=C.forwardRef((r,n)=>{let{children:i,...a}=r;if(Kte(i)&&typeof MT=="function"&&(i=MT(i._payload)),C.isValidElement(i)){const s=EAe(i),o=SAe(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bAe=Symbol("radix.slottable");function _Ae(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bAe}function SAe(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function EAe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Yte(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Yte(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function _r(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Yte(e))&&(n&&(n+=" "),n+=t);return n}const PU=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,NU=_r,T6=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return NU(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=t,s=Object.keys(i).map(c=>{const u=r==null?void 0:r[c],f=a==null?void 0:a[c];if(u===null)return null;const d=PU(u)||PU(f);return i[c][d]}),o=r&&Object.entries(r).reduce((c,u)=>{let[f,d]=u;return d===void 0||(c[f]=d),c},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:f,className:d,...h}=u;return Object.entries(h).every(m=>{let[p,y]=m;return Array.isArray(y)?y.includes({...a,...o}[p]):{...a,...o}[p]===y})?[...c,f,d]:c},[]);return NU(e,s,l,r==null?void 0:r.class,r==null?void 0:r.className)},k6="-",AAe=e=>{const t=kAe(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:s=>{const o=s.split(k6);return o[0]===""&&o.length!==1&&o.shift(),Xte(o,t)||TAe(s)},getConflictingClassGroupIds:(s,o)=>{const l=r[s]||[];return o&&n[s]?[...l,...n[s]]:l}}},Xte=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?Xte(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(k6);return(s=t.validators.find(({validator:o})=>o(a)))==null?void 0:s.classGroupId},IU=/^\[(.+)\]$/,TAe=e=>{if(IU.test(e)){const t=IU.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},kAe=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return OAe(Object.entries(e.classGroups),r).forEach(([a,s])=>{NR(s,n,a,t)}),n},NR=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:RU(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(CAe(i)){NR(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,s])=>{NR(s,RU(t,a),r,n)})})},RU=(e,t)=>{let r=e;return t.split(k6).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},CAe=e=>e.isThemeGetter,OAe=(e,t)=>t?e.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([s,o])=>[t+s,o])):a);return[r,i]}):e,PAe=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(a,s)=>{r.set(a,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let s=r.get(a);if(s!==void 0)return s;if((s=n.get(a))!==void 0)return i(a,s),s},set(a,s){r.has(a)?r.set(a,s):i(a,s)}}},Zte="!",NAe=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],a=t.length,s=o=>{const l=[];let c=0,u=0,f;for(let y=0;y<o.length;y++){let g=o[y];if(c===0){if(g===i&&(n||o.slice(y,y+a)===t)){l.push(o.slice(u,y)),u=y+a;continue}if(g==="/"){f=y;continue}}g==="["?c++:g==="]"&&c--}const d=l.length===0?o:o.substring(u),h=d.startsWith(Zte),m=h?d.substring(1):d,p=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}};return r?o=>r({className:o,parseClassName:s}):s},IAe=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},RAe=e=>({cache:PAe(e.cacheSize),parseClassName:NAe(e),...AAe(e)}),LAe=/\s+/,MAe=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,a=[],s=e.trim().split(LAe);let o="";for(let l=s.length-1;l>=0;l-=1){const c=s[l],{modifiers:u,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}=r(c);let m=!!h,p=n(m?d.substring(0,h):d);if(!p){if(!m){o=c+(o.length>0?" "+o:o);continue}if(p=n(d),!p){o=c+(o.length>0?" "+o:o);continue}m=!1}const y=IAe(u).join(":"),g=f?y+Zte:y,w=g+p;if(a.includes(w))continue;a.push(w);const v=i(p,m);for(let x=0;x<v.length;++x){const b=v[x];a.push(g+b)}o=c+(o.length>0?" "+o:o)}return o};function DAe(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Jte(t))&&(n&&(n+=" "),n+=r);return n}const Jte=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Jte(e[n]))&&(r&&(r+=" "),r+=t);return r};function jAe(e,...t){let r,n,i,a=s;function s(l){const c=t.reduce((u,f)=>f(u),e());return r=RAe(c),n=r.cache.get,i=r.cache.set,a=o,o(l)}function o(l){const c=n(l);if(c)return c;const u=MAe(l,r);return i(l,u),u}return function(){return a(DAe.apply(null,arguments))}}const In=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Qte=/^\[(?:([a-z-]+):)?(.+)\]$/i,$Ae=/^\d+\/\d+$/,FAe=new Set(["px","full","screen"]),BAe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UAe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zAe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,VAe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WAe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mf=e=>_y(e)||FAe.has(e)||$Ae.test(e),Vd=e=>Jv(e,"length",JAe),_y=e=>!!e&&!Number.isNaN(Number(e)),MN=e=>Jv(e,"number",_y),hw=e=>!!e&&Number.isInteger(Number(e)),HAe=e=>e.endsWith("%")&&_y(e.slice(0,-1)),xr=e=>Qte.test(e),Wd=e=>BAe.test(e),GAe=new Set(["length","size","percentage"]),qAe=e=>Jv(e,GAe,ere),KAe=e=>Jv(e,"position",ere),YAe=new Set(["image","url"]),XAe=e=>Jv(e,YAe,eTe),ZAe=e=>Jv(e,"",QAe),pw=()=>!0,Jv=(e,t,r)=>{const n=Qte.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},JAe=e=>UAe.test(e)&&!zAe.test(e),ere=()=>!1,QAe=e=>VAe.test(e),eTe=e=>WAe.test(e),tTe=()=>{const e=In("colors"),t=In("spacing"),r=In("blur"),n=In("brightness"),i=In("borderColor"),a=In("borderRadius"),s=In("borderSpacing"),o=In("borderWidth"),l=In("contrast"),c=In("grayscale"),u=In("hueRotate"),f=In("invert"),d=In("gap"),h=In("gradientColorStops"),m=In("gradientColorStopPositions"),p=In("inset"),y=In("margin"),g=In("opacity"),w=In("padding"),v=In("saturate"),x=In("scale"),b=In("sepia"),S=In("skew"),T=In("space"),A=In("translate"),O=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",xr,t],N=()=>[xr,t],V=()=>["",mf,Vd],B=()=>["auto",_y,xr],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",xr],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[_y,xr];return{cacheSize:500,separator:":",theme:{colors:[pw],spacing:[mf,Vd],blur:["none","",Wd,xr],brightness:ue(),borderColor:[e],borderRadius:["none","","full",Wd,xr],borderSpacing:N(),borderWidth:V(),contrast:ue(),grayscale:U(),hueRotate:ue(),invert:U(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[HAe,Vd],inset:P(),margin:P(),opacity:ue(),padding:N(),saturate:ue(),scale:ue(),sepia:U(),skew:ue(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",xr]}],container:["container"],columns:[{columns:[Wd]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),xr]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hw,xr]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xr]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",hw,xr]}],"grid-cols":[{"grid-cols":[pw]}],"col-start-end":[{col:["auto",{span:["full",hw,xr]},xr]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[pw]}],"row-start-end":[{row:["auto",{span:[hw,xr]},xr]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xr]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xr,t]}],"min-w":[{"min-w":[xr,t,"min","max","fit"]}],"max-w":[{"max-w":[xr,t,"none","full","min","max","fit","prose",{screen:[Wd]},Wd]}],h:[{h:[xr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Wd,Vd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",MN]}],"font-family":[{font:[pw]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xr]}],"line-clamp":[{"line-clamp":["none",_y,MN]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",mf,xr]}],"list-image":[{"list-image":["none",xr]}],"list-style-type":[{list:["none","disc","decimal",xr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",mf,Vd]}],"underline-offset":[{"underline-offset":["auto",mf,xr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),KAe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qAe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XAe]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[mf,xr]}],"outline-w":[{outline:[mf,Vd]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[mf,Vd]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Wd,ZAe]}],"shadow-color":[{shadow:[pw]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Wd,xr]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xr]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",xr]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",xr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[hw,xr]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[mf,Vd,MN]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rTe=jAe(tTe);function Ft(...e){return rTe(_r(e))}const vA=T6("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Er=C.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},a)=>{const s=n?wAe:"button";return E.jsx(s,{className:Ft(vA({variant:t,size:r,className:e})),ref:a,...i})});Er.displayName="Button";const tre=C.createContext({theme:"system",setTheme:()=>null});function nTe({children:e,defaultTheme:t="system",storageKey:r="vite-ui-theme",...n}){const[i,a]=C.useState(()=>localStorage.getItem(r)||t);C.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),i==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(l);return}o.classList.add(i)},[i]);const s={theme:i,setTheme:o=>{localStorage.setItem(r,o),a(o)}};return E.jsx(tre.Provider,{...n,value:s,children:e})}const iTe=()=>{const e=C.useContext(tre);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e};function _t(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function aTe(e,t){const r=C.createContext(t),n=a=>{const{children:s,...o}=a,l=C.useMemo(()=>o,Object.values(o));return E.jsx(r.Provider,{value:l,children:s})};n.displayName=e+"Provider";function i(a){const s=C.useContext(r);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,i]}function Hu(e,t=[]){let r=[];function n(a,s){const o=C.createContext(s),l=r.length;r=[...r,s];const c=f=>{var g;const{scope:d,children:h,...m}=f,p=((g=d==null?void 0:d[e])==null?void 0:g[l])||o,y=C.useMemo(()=>m,Object.values(m));return E.jsx(p.Provider,{value:y,children:h})};c.displayName=a+"Provider";function u(f,d){var p;const h=((p=d==null?void 0:d[e])==null?void 0:p[l])||o,m=C.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=r.map(s=>C.createContext(s));return function(o){const l=(o==null?void 0:o[e])||a;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,sTe(i,...t)]}function sTe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=n.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var fa=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},oTe=_j[" useInsertionEffect ".trim().toString()]||fa;function Kh({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,s]=lTe({defaultProp:t,onChange:r}),o=e!==void 0,l=o?e:i;{const u=C.useRef(e!==void 0);C.useEffect(()=>{const f=u.current;f!==o&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const c=C.useCallback(u=>{var f;if(o){const d=cTe(u)?u(e):u;d!==e&&((f=s.current)==null||f.call(s,d))}else a(u)},[o,e,a,s]);return[l,c]}function lTe({defaultProp:e,onChange:t}){const[r,n]=C.useState(e),i=C.useRef(r),a=C.useRef(t);return oTe(()=>{a.current=t},[t]),C.useEffect(()=>{var s;i.current!==r&&((s=a.current)==null||s.call(a,r),i.current=r)},[r,i]),[r,n,a]}function cTe(e){return typeof e=="function"}function uTe(e){const t=fTe(e),r=C.forwardRef((n,i)=>{const{children:a,...s}=n,o=C.Children.toArray(a),l=o.find(hTe);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function fTe(e){const t=C.forwardRef((r,n)=>{const{children:i,...a}=r;if(C.isValidElement(i)){const s=mTe(i),o=pTe(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dTe=Symbol("radix.slottable");function hTe(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dTe}function pTe(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function mTe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var gTe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lr=gTe.reduce((e,t)=>{const r=uTe(`Primitive.${t}`),n=C.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(l,{...o,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function rre(e,t){e&&Gv.flushSync(()=>e.dispatchEvent(t))}function LU(e){const t=yTe(e),r=C.forwardRef((n,i)=>{const{children:a,...s}=n,o=C.Children.toArray(a),l=o.find(wTe);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function yTe(e){const t=C.forwardRef((r,n)=>{const{children:i,...a}=r;if(C.isValidElement(i)){const s=bTe(i),o=xTe(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var vTe=Symbol("radix.slottable");function wTe(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===vTe}function xTe(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function bTe(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function wC(e){const t=e+"CollectionProvider",[r,n]=Hu(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),s=p=>{const{scope:y,children:g}=p,w=he.useRef(null),v=he.useRef(new Map).current;return E.jsx(i,{scope:y,itemMap:v,collectionRef:w,children:g})};s.displayName=t;const o=e+"CollectionSlot",l=LU(o),c=he.forwardRef((p,y)=>{const{scope:g,children:w}=p,v=a(o,g),x=Mr(y,v.collectionRef);return E.jsx(l,{ref:x,children:w})});c.displayName=o;const u=e+"CollectionItemSlot",f="data-radix-collection-item",d=LU(u),h=he.forwardRef((p,y)=>{const{scope:g,children:w,...v}=p,x=he.useRef(null),b=Mr(y,x),S=a(u,g);return he.useEffect(()=>(S.itemMap.set(x,{ref:x,...v}),()=>void S.itemMap.delete(x))),E.jsx(d,{[f]:"",ref:b,children:w})});h.displayName=u;function m(p){const y=a(e+"CollectionConsumer",p);return he.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((S,T)=>v.indexOf(S.ref.current)-v.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:s,Slot:c,ItemSlot:h},m,n]}var _Te=C.createContext(void 0);function Z_(e){const t=C.useContext(_Te);return e||t||"ltr"}function jc(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function STe(e,t=globalThis==null?void 0:globalThis.document){const r=jc(e);C.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var ETe="DismissableLayer",IR="dismissableLayer.update",ATe="dismissableLayer.pointerDownOutside",TTe="dismissableLayer.focusOutside",MU,nre=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J_=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=e,c=C.useContext(nre),[u,f]=C.useState(null),d=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=C.useState({}),m=Mr(t,T=>f(T)),p=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=p.indexOf(y),w=u?p.indexOf(u):-1,v=c.layersWithOutsidePointerEventsDisabled.size>0,x=w>=g,b=OTe(T=>{const A=T.target,O=[...c.branches].some(M=>M.contains(A));!x||O||(i==null||i(T),s==null||s(T),T.defaultPrevented||o==null||o())},d),S=PTe(T=>{const A=T.target;[...c.branches].some(M=>M.contains(A))||(a==null||a(T),s==null||s(T),T.defaultPrevented||o==null||o())},d);return STe(T=>{w===c.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},d),C.useEffect(()=>{if(u)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(MU=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),DU(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=MU)}},[u,d,r,c]),C.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),DU())},[u,c]),C.useEffect(()=>{const T=()=>h({});return document.addEventListener(IR,T),()=>document.removeEventListener(IR,T)},[]),E.jsx(lr.div,{...l,ref:m,style:{pointerEvents:v?x?"auto":"none":void 0,...e.style},onFocusCapture:_t(e.onFocusCapture,S.onFocusCapture),onBlurCapture:_t(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:_t(e.onPointerDownCapture,b.onPointerDownCapture)})});J_.displayName=ETe;var kTe="DismissableLayerBranch",CTe=C.forwardRef((e,t)=>{const r=C.useContext(nre),n=C.useRef(null),i=Mr(t,n);return C.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),E.jsx(lr.div,{...e,ref:i})});CTe.displayName=kTe;function OTe(e,t=globalThis==null?void 0:globalThis.document){const r=jc(e),n=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const a=o=>{if(o.target&&!n.current){let l=function(){ire(ATe,r,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=l,t.addEventListener("click",i.current,{once:!0})):l()}else t.removeEventListener("click",i.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function PTe(e,t=globalThis==null?void 0:globalThis.document){const r=jc(e),n=C.useRef(!1);return C.useEffect(()=>{const i=a=>{a.target&&!n.current&&ire(TTe,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function DU(){const e=new CustomEvent(IR);document.dispatchEvent(e)}function ire(e,t,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?rre(i,a):i.dispatchEvent(a)}var DN=0;function xC(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jU()),document.body.insertAdjacentElement("beforeend",e[1]??jU()),DN++,()=>{DN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),DN--}},[])}function jU(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jN="focusScope.autoFocusOnMount",$N="focusScope.autoFocusOnUnmount",$U={bubbles:!1,cancelable:!0},NTe="FocusScope",Q_=C.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=e,[o,l]=C.useState(null),c=jc(i),u=jc(a),f=C.useRef(null),d=Mr(t,p=>l(p)),h=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(n){let p=function(v){if(h.paused||!o)return;const x=v.target;o.contains(x)?f.current=x:Jd(f.current,{select:!0})},y=function(v){if(h.paused||!o)return;const x=v.relatedTarget;x!==null&&(o.contains(x)||Jd(f.current,{select:!0}))},g=function(v){if(document.activeElement===document.body)for(const b of v)b.removedNodes.length>0&&Jd(o)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const w=new MutationObserver(g);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),w.disconnect()}}},[n,o,h.paused]),C.useEffect(()=>{if(o){BU.add(h);const p=document.activeElement;if(!o.contains(p)){const g=new CustomEvent(jN,$U);o.addEventListener(jN,c),o.dispatchEvent(g),g.defaultPrevented||(ITe(jTe(are(o)),{select:!0}),document.activeElement===p&&Jd(o))}return()=>{o.removeEventListener(jN,c),setTimeout(()=>{const g=new CustomEvent($N,$U);o.addEventListener($N,u),o.dispatchEvent(g),g.defaultPrevented||Jd(p??document.body,{select:!0}),o.removeEventListener($N,u),BU.remove(h)},0)}}},[o,c,u,h]);const m=C.useCallback(p=>{if(!r&&!n||h.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,g=document.activeElement;if(y&&g){const w=p.currentTarget,[v,x]=RTe(w);v&&x?!p.shiftKey&&g===x?(p.preventDefault(),r&&Jd(v,{select:!0})):p.shiftKey&&g===v&&(p.preventDefault(),r&&Jd(x,{select:!0})):g===w&&p.preventDefault()}},[r,n,h.paused]);return E.jsx(lr.div,{tabIndex:-1,...s,ref:d,onKeyDown:m})});Q_.displayName=NTe;function ITe(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Jd(n,{select:t}),document.activeElement!==r)return}function RTe(e){const t=are(e),r=FU(t,e),n=FU(t.reverse(),e);return[r,n]}function are(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function FU(e,t){for(const r of e)if(!LTe(r,{upTo:t}))return r}function LTe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function MTe(e){return e instanceof HTMLInputElement&&"select"in e}function Jd(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&MTe(e)&&t&&e.select()}}var BU=DTe();function DTe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=UU(e,t),e.unshift(t)},remove(t){var r;e=UU(e,t),(r=e[0])==null||r.resume()}}}function UU(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function jTe(e){return e.filter(t=>t.tagName!=="A")}var $Te=_j[" useId ".trim().toString()]||(()=>{}),FTe=0;function Nc(e){const[t,r]=C.useState($Te());return fa(()=>{r(n=>n??String(FTe++))},[e]),t?`radix-${t}`:""}const BTe=["top","right","bottom","left"],Yh=Math.min,Lo=Math.max,DT=Math.round,qS=Math.floor,Pu=e=>({x:e,y:e}),UTe={left:"right",right:"left",bottom:"top",top:"bottom"},zTe={start:"end",end:"start"};function RR(e,t,r){return Lo(e,Yh(t,r))}function Qf(e,t){return typeof e=="function"?e(t):e}function ed(e){return e.split("-")[0]}function Qv(e){return e.split("-")[1]}function C6(e){return e==="x"?"y":"x"}function O6(e){return e==="y"?"height":"width"}const VTe=new Set(["top","bottom"]);function _u(e){return VTe.has(ed(e))?"y":"x"}function P6(e){return C6(_u(e))}function WTe(e,t,r){r===void 0&&(r=!1);const n=Qv(e),i=P6(e),a=O6(i);let s=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=jT(s)),[s,jT(s)]}function HTe(e){const t=jT(e);return[LR(e),t,LR(t)]}function LR(e){return e.replace(/start|end/g,t=>zTe[t])}const zU=["left","right"],VU=["right","left"],GTe=["top","bottom"],qTe=["bottom","top"];function KTe(e,t,r){switch(e){case"top":case"bottom":return r?t?VU:zU:t?zU:VU;case"left":case"right":return t?GTe:qTe;default:return[]}}function YTe(e,t,r,n){const i=Qv(e);let a=KTe(ed(e),r==="start",n);return i&&(a=a.map(s=>s+"-"+i),t&&(a=a.concat(a.map(LR)))),a}function jT(e){return e.replace(/left|right|bottom|top/g,t=>UTe[t])}function XTe(e){return{top:0,right:0,bottom:0,left:0,...e}}function sre(e){return typeof e!="number"?XTe(e):{top:e,right:e,bottom:e,left:e}}function $T(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function WU(e,t,r){let{reference:n,floating:i}=e;const a=_u(t),s=P6(t),o=O6(s),l=ed(t),c=a==="y",u=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,d=n[o]/2-i[o]/2;let h;switch(l){case"top":h={x:u,y:n.y-i.height};break;case"bottom":h={x:u,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-i.width,y:f};break;default:h={x:n.x,y:n.y}}switch(Qv(t)){case"start":h[s]-=d*(r&&c?-1:1);break;case"end":h[s]+=d*(r&&c?-1:1);break}return h}async function ZTe(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Qf(t,e),m=sre(h),y=o[d?f==="floating"?"reference":"floating":f],g=$T(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),w=f==="floating"?{x:n,y:i,width:s.floating.width,height:s.floating.height}:s.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),x=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},b=$T(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:v,strategy:l}):w);return{top:(g.top-b.top+m.top)/x.y,bottom:(b.bottom-g.bottom+m.bottom)/x.y,left:(g.left-b.left+m.left)/x.x,right:(b.right-g.right+m.right)/x.x}}const JTe=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:s}=r,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:f}=WU(c,n,l),d=n,h={},m=0;for(let y=0;y<o.length;y++){var p;const{name:g,fn:w}=o[y],{x:v,y:x,data:b,reset:S}=await w({x:u,y:f,initialPlacement:n,placement:d,strategy:i,middlewareData:h,rects:c,platform:{...s,detectOverflow:(p=s.detectOverflow)!=null?p:ZTe},elements:{reference:e,floating:t}});u=v??u,f=x??f,h={...h,[g]:{...h[g],...b}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(c=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:u,y:f}=WU(c,d,l)),y=-1)}return{x:u,y:f,placement:d,strategy:i,middlewareData:h}},QTe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:u=0}=Qf(e,t)||{};if(c==null)return{};const f=sre(u),d={x:r,y:n},h=P6(i),m=O6(h),p=await s.getDimensions(c),y=h==="y",g=y?"top":"left",w=y?"bottom":"right",v=y?"clientHeight":"clientWidth",x=a.reference[m]+a.reference[h]-d[h]-a.floating[m],b=d[h]-a.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let T=S?S[v]:0;(!T||!await(s.isElement==null?void 0:s.isElement(S)))&&(T=o.floating[v]||a.floating[m]);const A=x/2-b/2,O=T/2-p[m]/2-1,M=Yh(f[g],O),P=Yh(f[w],O),N=M,V=T-p[m]-P,B=T/2-p[m]/2+A,G=RR(N,B,V),Z=!l.arrow&&Qv(i)!=null&&B!==G&&a.reference[m]/2-(B<N?M:P)-p[m]/2<0,J=Z?B<N?B-N:B-V:0;return{[h]:d[h]+J,data:{[h]:G,centerOffset:B-G-J,...Z&&{alignmentOffset:J}},reset:Z}}}),eke=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...y}=Qf(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const g=ed(i),w=_u(o),v=ed(o)===o,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=d||(v||!p?[jT(o)]:HTe(o)),S=m!=="none";!d&&S&&b.push(...YTe(o,p,m,x));const T=[o,...b],A=await l.detectOverflow(t,y),O=[];let M=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&O.push(A[g]),f){const B=WTe(i,s,x);O.push(A[B[0]],A[B[1]])}if(M=[...M,{placement:i,overflows:O}],!O.every(B=>B<=0)){var P,N;const B=(((P=a.flip)==null?void 0:P.index)||0)+1,G=T[B];if(G&&(!(f==="alignment"?w!==_u(G):!1)||M.every(Y=>_u(Y.placement)===w?Y.overflows[0]>0:!0)))return{data:{index:B,overflows:M},reset:{placement:G}};let Z=(N=M.filter(J=>J.overflows[0]<=0).sort((J,Y)=>J.overflows[1]-Y.overflows[1])[0])==null?void 0:N.placement;if(!Z)switch(h){case"bestFit":{var V;const J=(V=M.filter(Y=>{if(S){const U=_u(Y.placement);return U===w||U==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(U=>U>0).reduce((U,se)=>U+se,0)]).sort((Y,U)=>Y[1]-U[1])[0])==null?void 0:V[0];J&&(Z=J);break}case"initialPlacement":Z=o;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function HU(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function GU(e){return BTe.some(t=>e[t]>=0)}const tke=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r,platform:n}=t,{strategy:i="referenceHidden",...a}=Qf(e,t);switch(i){case"referenceHidden":{const s=await n.detectOverflow(t,{...a,elementContext:"reference"}),o=HU(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:GU(o)}}}case"escaped":{const s=await n.detectOverflow(t,{...a,altBoundary:!0}),o=HU(s,r.floating);return{data:{escapedOffsets:o,escaped:GU(o)}}}default:return{}}}}},ore=new Set(["left","top"]);async function rke(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),s=ed(r),o=Qv(r),l=_u(r)==="y",c=ore.has(s)?-1:1,u=a&&l?-1:1,f=Qf(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof m=="number"&&(h=o==="end"?m*-1:m),l?{x:h*u,y:d*c}:{x:d*c,y:h*u}}const nke=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:s,middlewareData:o}=t,l=await rke(t,e);return s===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},ike=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i,platform:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:w,y:v}=g;return{x:w,y:v}}},...c}=Qf(e,t),u={x:r,y:n},f=await a.detectOverflow(t,c),d=_u(ed(i)),h=C6(d);let m=u[h],p=u[d];if(s){const g=h==="y"?"top":"left",w=h==="y"?"bottom":"right",v=m+f[g],x=m-f[w];m=RR(v,m,x)}if(o){const g=d==="y"?"top":"left",w=d==="y"?"bottom":"right",v=p+f[g],x=p-f[w];p=RR(v,p,x)}const y=l.fn({...t,[h]:m,[d]:p});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[h]:s,[d]:o}}}}}},ake=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Qf(e,t),u={x:r,y:n},f=_u(i),d=C6(f);let h=u[d],m=u[f];const p=Qf(o,t),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const v=d==="y"?"height":"width",x=a.reference[d]-a.floating[v]+y.mainAxis,b=a.reference[d]+a.reference[v]-y.mainAxis;h<x?h=x:h>b&&(h=b)}if(c){var g,w;const v=d==="y"?"width":"height",x=ore.has(ed(i)),b=a.reference[f]-a.floating[v]+(x&&((g=s.offset)==null?void 0:g[f])||0)+(x?0:y.crossAxis),S=a.reference[f]+a.reference[v]+(x?0:((w=s.offset)==null?void 0:w[f])||0)-(x?y.crossAxis:0);m<b?m=b:m>S&&(m=S)}return{[d]:h,[f]:m}}}},ske=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:s,elements:o}=t,{apply:l=()=>{},...c}=Qf(e,t),u=await s.detectOverflow(t,c),f=ed(i),d=Qv(i),h=_u(i)==="y",{width:m,height:p}=a.floating;let y,g;f==="top"||f==="bottom"?(y=f,g=d===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(g=f,y=d==="end"?"top":"bottom");const w=p-u.top-u.bottom,v=m-u.left-u.right,x=Yh(p-u[y],w),b=Yh(m-u[g],v),S=!t.middlewareData.shift;let T=x,A=b;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(A=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(T=w),S&&!d){const M=Lo(u.left,0),P=Lo(u.right,0),N=Lo(u.top,0),V=Lo(u.bottom,0);h?A=m-2*(M!==0||P!==0?M+P:Lo(u.left,u.right)):T=p-2*(N!==0||V!==0?N+V:Lo(u.top,u.bottom))}await l({...t,availableWidth:A,availableHeight:T});const O=await s.getDimensions(o.floating);return m!==O.width||p!==O.height?{reset:{rects:!0}}:{}}}};function bC(){return typeof window<"u"}function e1(e){return lre(e)?(e.nodeName||"").toLowerCase():"#document"}function Go(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gu(e){var t;return(t=(lre(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lre(e){return bC()?e instanceof Node||e instanceof Go(e).Node:!1}function $c(e){return bC()?e instanceof Element||e instanceof Go(e).Element:!1}function $u(e){return bC()?e instanceof HTMLElement||e instanceof Go(e).HTMLElement:!1}function qU(e){return!bC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Go(e).ShadowRoot}const oke=new Set(["inline","contents"]);function e2(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Fc(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!oke.has(i)}const lke=new Set(["table","td","th"]);function cke(e){return lke.has(e1(e))}const uke=[":popover-open",":modal"];function _C(e){return uke.some(t=>{try{return e.matches(t)}catch{return!1}})}const fke=["transform","translate","scale","rotate","perspective"],dke=["transform","translate","scale","rotate","perspective","filter"],hke=["paint","layout","strict","content"];function N6(e){const t=I6(),r=$c(e)?Fc(e):e;return fke.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||dke.some(n=>(r.willChange||"").includes(n))||hke.some(n=>(r.contain||"").includes(n))}function pke(e){let t=Xh(e);for(;$u(t)&&!Xy(t);){if(N6(t))return t;if(_C(t))return null;t=Xh(t)}return null}function I6(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mke=new Set(["html","body","#document"]);function Xy(e){return mke.has(e1(e))}function Fc(e){return Go(e).getComputedStyle(e)}function SC(e){return $c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xh(e){if(e1(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qU(e)&&e.host||Gu(e);return qU(t)?t.host:t}function cre(e){const t=Xh(e);return Xy(t)?e.ownerDocument?e.ownerDocument.body:e.body:$u(t)&&e2(t)?t:cre(t)}function gb(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=cre(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),s=Go(i);if(a){const o=MR(s);return t.concat(s,s.visualViewport||[],e2(i)?i:[],o&&r?gb(o):[])}return t.concat(i,gb(i,[],r))}function MR(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ure(e){const t=Fc(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=$u(e),a=i?e.offsetWidth:r,s=i?e.offsetHeight:n,o=DT(r)!==a||DT(n)!==s;return o&&(r=a,n=s),{width:r,height:n,$:o}}function R6(e){return $c(e)?e:e.contextElement}function Sy(e){const t=R6(e);if(!$u(t))return Pu(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=ure(t);let s=(a?DT(r.width):r.width)/n,o=(a?DT(r.height):r.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const gke=Pu(0);function fre(e){const t=Go(e);return!I6()||!t.visualViewport?gke:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yke(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Go(e)?!1:t}function Y0(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=R6(e);let s=Pu(1);t&&(n?$c(n)&&(s=Sy(n)):s=Sy(e));const o=yke(a,r,n)?fre(a):Pu(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,u=i.width/s.x,f=i.height/s.y;if(a){const d=Go(a),h=n&&$c(n)?Go(n):n;let m=d,p=MR(m);for(;p&&n&&h!==m;){const y=Sy(p),g=p.getBoundingClientRect(),w=Fc(p),v=g.left+(p.clientLeft+parseFloat(w.paddingLeft))*y.x,x=g.top+(p.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,f*=y.y,l+=v,c+=x,m=Go(p),p=MR(m)}}return $T({width:u,height:f,x:l,y:c})}function EC(e,t){const r=SC(e).scrollLeft;return t?t.left+r:Y0(Gu(e)).left+r}function dre(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-EC(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function vke(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",s=Gu(n),o=t?_C(t.floating):!1;if(n===s||o&&a)return r;let l={scrollLeft:0,scrollTop:0},c=Pu(1);const u=Pu(0),f=$u(n);if((f||!f&&!a)&&((e1(n)!=="body"||e2(s))&&(l=SC(n)),$u(n))){const h=Y0(n);c=Sy(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}const d=s&&!f&&!a?dre(s,l):Pu(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:r.y*c.y-l.scrollTop*c.y+u.y+d.y}}function wke(e){return Array.from(e.getClientRects())}function xke(e){const t=Gu(e),r=SC(e),n=e.ownerDocument.body,i=Lo(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Lo(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-r.scrollLeft+EC(e);const o=-r.scrollTop;return Fc(n).direction==="rtl"&&(s+=Lo(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:s,y:o}}const KU=25;function bke(e,t){const r=Go(e),n=Gu(e),i=r.visualViewport;let a=n.clientWidth,s=n.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const u=I6();(!u||u&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=EC(n);if(c<=0){const u=n.ownerDocument,f=u.body,d=getComputedStyle(f),h=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,m=Math.abs(n.clientWidth-f.clientWidth-h);m<=KU&&(a-=m)}else c<=KU&&(a+=c);return{width:a,height:s,x:o,y:l}}const _ke=new Set(["absolute","fixed"]);function Ske(e,t){const r=Y0(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=$u(e)?Sy(e):Pu(1),s=e.clientWidth*a.x,o=e.clientHeight*a.y,l=i*a.x,c=n*a.y;return{width:s,height:o,x:l,y:c}}function YU(e,t,r){let n;if(t==="viewport")n=bke(e,r);else if(t==="document")n=xke(Gu(e));else if($c(t))n=Ske(t,r);else{const i=fre(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return $T(n)}function hre(e,t){const r=Xh(e);return r===t||!$c(r)||Xy(r)?!1:Fc(r).position==="fixed"||hre(r,t)}function Eke(e,t){const r=t.get(e);if(r)return r;let n=gb(e,[],!1).filter(o=>$c(o)&&e1(o)!=="body"),i=null;const a=Fc(e).position==="fixed";let s=a?Xh(e):e;for(;$c(s)&&!Xy(s);){const o=Fc(s),l=N6(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&_ke.has(i.position)||e2(s)&&!l&&hre(e,s))?n=n.filter(u=>u!==s):i=o,s=Xh(s)}return t.set(e,n),n}function Ake(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const s=[...r==="clippingAncestors"?_C(t)?[]:Eke(t,this._c):[].concat(r),n],o=s[0],l=s.reduce((c,u)=>{const f=YU(t,u,i);return c.top=Lo(f.top,c.top),c.right=Yh(f.right,c.right),c.bottom=Yh(f.bottom,c.bottom),c.left=Lo(f.left,c.left),c},YU(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Tke(e){const{width:t,height:r}=ure(e);return{width:t,height:r}}function kke(e,t,r){const n=$u(t),i=Gu(t),a=r==="fixed",s=Y0(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=Pu(0);function c(){l.x=EC(i)}if(n||!n&&!a)if((e1(t)!=="body"||e2(i))&&(o=SC(t)),n){const h=Y0(t,!0,a,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&c();a&&!n&&i&&c();const u=i&&!n&&!a?dre(i,o):Pu(0),f=s.left+o.scrollLeft-l.x-u.x,d=s.top+o.scrollTop-l.y-u.y;return{x:f,y:d,width:s.width,height:s.height}}function FN(e){return Fc(e).position==="static"}function XU(e,t){if(!$u(e)||Fc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Gu(e)===r&&(r=r.ownerDocument.body),r}function pre(e,t){const r=Go(e);if(_C(e))return r;if(!$u(e)){let i=Xh(e);for(;i&&!Xy(i);){if($c(i)&&!FN(i))return i;i=Xh(i)}return r}let n=XU(e,t);for(;n&&cke(n)&&FN(n);)n=XU(n,t);return n&&Xy(n)&&FN(n)&&!N6(n)?r:n||pke(e)||r}const Cke=async function(e){const t=this.getOffsetParent||pre,r=this.getDimensions,n=await r(e.floating);return{reference:kke(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Oke(e){return Fc(e).direction==="rtl"}const Pke={convertOffsetParentRelativeRectToViewportRelativeRect:vke,getDocumentElement:Gu,getClippingRect:Ake,getOffsetParent:pre,getElementRects:Cke,getClientRects:wke,getDimensions:Tke,getScale:Sy,isElement:$c,isRTL:Oke};function mre(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Nke(e,t){let r=null,n;const i=Gu(e);function a(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const c=e.getBoundingClientRect(),{left:u,top:f,width:d,height:h}=c;if(o||t(),!d||!h)return;const m=qS(f),p=qS(i.clientWidth-(u+d)),y=qS(i.clientHeight-(f+h)),g=qS(u),v={rootMargin:-m+"px "+-p+"px "+-y+"px "+-g+"px",threshold:Lo(0,Yh(1,l))||1};let x=!0;function b(S){const T=S[0].intersectionRatio;if(T!==l){if(!x)return s();T?s(!1,T):n=setTimeout(()=>{s(!1,1e-7)},1e3)}T===1&&!mre(c,e.getBoundingClientRect())&&s(),x=!1}try{r=new IntersectionObserver(b,{...v,root:i.ownerDocument})}catch{r=new IntersectionObserver(b,v)}r.observe(e)}return s(!0),a}function Ike(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=R6(e),u=i||a?[...c?gb(c):[],...gb(t)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",r,{passive:!0}),a&&g.addEventListener("resize",r)});const f=c&&o?Nke(c,r):null;let d=-1,h=null;s&&(h=new ResizeObserver(g=>{let[w]=g;w&&w.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var v;(v=h)==null||v.observe(t)})),r()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?Y0(e):null;l&&y();function y(){const g=Y0(e);p&&!mre(p,g)&&r(),p=g,m=requestAnimationFrame(y)}return r(),()=>{var g;u.forEach(w=>{i&&w.removeEventListener("scroll",r),a&&w.removeEventListener("resize",r)}),f==null||f(),(g=h)==null||g.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Rke=nke,Lke=ike,Mke=eke,Dke=ske,jke=tke,ZU=QTe,$ke=ake,Fke=(e,t,r)=>{const n=new Map,i={platform:Pke,...r},a={...i.platform,_c:n};return JTe(e,t,{...i,platform:a})};var Bke=typeof document<"u",Uke=function(){},wA=Bke?C.useLayoutEffect:Uke;function FT(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!FT(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!FT(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function gre(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function JU(e,t){const r=gre(e);return Math.round(t*r)/r}function BN(e){const t=C.useRef(e);return wA(()=>{t.current=e}),t}function zke(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,f]=C.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=C.useState(n);FT(d,n)||h(n);const[m,p]=C.useState(null),[y,g]=C.useState(null),w=C.useCallback(Y=>{Y!==S.current&&(S.current=Y,p(Y))},[]),v=C.useCallback(Y=>{Y!==T.current&&(T.current=Y,g(Y))},[]),x=a||m,b=s||y,S=C.useRef(null),T=C.useRef(null),A=C.useRef(u),O=l!=null,M=BN(l),P=BN(i),N=BN(c),V=C.useCallback(()=>{if(!S.current||!T.current)return;const Y={placement:t,strategy:r,middleware:d};P.current&&(Y.platform=P.current),Fke(S.current,T.current,Y).then(U=>{const se={...U,isPositioned:N.current!==!1};B.current&&!FT(A.current,se)&&(A.current=se,Gv.flushSync(()=>{f(se)}))})},[d,t,r,P,N]);wA(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(Y=>({...Y,isPositioned:!1})))},[c]);const B=C.useRef(!1);wA(()=>(B.current=!0,()=>{B.current=!1}),[]),wA(()=>{if(x&&(S.current=x),b&&(T.current=b),x&&b){if(M.current)return M.current(x,b,V);V()}},[x,b,V,M,O]);const G=C.useMemo(()=>({reference:S,floating:T,setReference:w,setFloating:v}),[w,v]),Z=C.useMemo(()=>({reference:x,floating:b}),[x,b]),J=C.useMemo(()=>{const Y={position:r,left:0,top:0};if(!Z.floating)return Y;const U=JU(Z.floating,u.x),se=JU(Z.floating,u.y);return o?{...Y,transform:"translate("+U+"px, "+se+"px)",...gre(Z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:U,top:se}},[r,o,Z.floating,u.x,u.y]);return C.useMemo(()=>({...u,update:V,refs:G,elements:Z,floatingStyles:J}),[u,V,G,Z,J])}const Vke=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?ZU({element:n.current,padding:i}).fn(r):{}:n?ZU({element:n,padding:i}).fn(r):{}}}},Wke=(e,t)=>({...Rke(e),options:[e,t]}),Hke=(e,t)=>({...Lke(e),options:[e,t]}),Gke=(e,t)=>({...$ke(e),options:[e,t]}),qke=(e,t)=>({...Mke(e),options:[e,t]}),Kke=(e,t)=>({...Dke(e),options:[e,t]}),Yke=(e,t)=>({...jke(e),options:[e,t]}),Xke=(e,t)=>({...Vke(e),options:[e,t]});var Zke="Arrow",yre=C.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return E.jsx(lr.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:E.jsx("polygon",{points:"0,0 30,0 15,10"})})});yre.displayName=Zke;var Jke=yre;function vre(e){const[t,r]=C.useState(void 0);return fa(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,o=c.blockSize}else s=e.offsetWidth,o=e.offsetHeight;r({width:s,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var L6="Popper",[wre,t1]=Hu(L6),[Qke,xre]=wre(L6),bre=e=>{const{__scopePopper:t,children:r}=e,[n,i]=C.useState(null);return E.jsx(Qke,{scope:t,anchor:n,onAnchorChange:i,children:r})};bre.displayName=L6;var _re="PopperAnchor",Sre=C.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,a=xre(_re,r),s=C.useRef(null),o=Mr(t,s),l=C.useRef(null);return C.useEffect(()=>{const c=l.current;l.current=(n==null?void 0:n.current)||s.current,c!==l.current&&a.onAnchorChange(l.current)}),n?null:E.jsx(lr.div,{...i,ref:o})});Sre.displayName=_re;var M6="PopperContent",[e5e,t5e]=wre(M6),Ere=C.forwardRef((e,t)=>{var D,re,K,le,xe,X;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:d=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,y=xre(M6,r),[g,w]=C.useState(null),v=Mr(t,Ie=>w(Ie)),[x,b]=C.useState(null),S=vre(x),T=(S==null?void 0:S.width)??0,A=(S==null?void 0:S.height)??0,O=n+(a!=="center"?"-"+a:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(c)?c:[c],N=P.length>0,V={padding:M,boundary:P.filter(n5e),altBoundary:N},{refs:B,floatingStyles:G,placement:Z,isPositioned:J,middlewareData:Y}=zke({strategy:"fixed",placement:O,whileElementsMounted:(...Ie)=>Ike(...Ie,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[Wke({mainAxis:i+A,alignmentAxis:s}),l&&Hke({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Gke():void 0,...V}),l&&qke({...V}),Kke({...V,apply:({elements:Ie,rects:Re,availableWidth:ie,availableHeight:Te})=>{const{width:Me,height:tt}=Re.reference,$e=Ie.floating.style;$e.setProperty("--radix-popper-available-width",`${ie}px`),$e.setProperty("--radix-popper-available-height",`${Te}px`),$e.setProperty("--radix-popper-anchor-width",`${Me}px`),$e.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),x&&Xke({element:x,padding:o}),i5e({arrowWidth:T,arrowHeight:A}),d&&Yke({strategy:"referenceHidden",...V})]}),[U,se]=kre(Z),ue=jc(m);fa(()=>{J&&(ue==null||ue())},[J,ue]);const I=(D=Y.arrow)==null?void 0:D.x,z=(re=Y.arrow)==null?void 0:re.y,H=((K=Y.arrow)==null?void 0:K.centerOffset)!==0,[q,F]=C.useState();return fa(()=>{g&&F(window.getComputedStyle(g).zIndex)},[g]),E.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:J?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(le=Y.transformOrigin)==null?void 0:le.x,(xe=Y.transformOrigin)==null?void 0:xe.y].join(" "),...((X=Y.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:E.jsx(e5e,{scope:r,placedSide:U,onArrowChange:b,arrowX:I,arrowY:z,shouldHideArrow:H,children:E.jsx(lr.div,{"data-side":U,"data-align":se,...p,ref:v,style:{...p.style,animation:J?void 0:"none"}})})})});Ere.displayName=M6;var Are="PopperArrow",r5e={top:"bottom",right:"left",bottom:"top",left:"right"},Tre=C.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,a=t5e(Are,n),s=r5e[a.placedSide];return E.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:E.jsx(Jke,{...i,ref:r,style:{...i.style,display:"block"}})})});Tre.displayName=Are;function n5e(e){return e!==null}var i5e=e=>({name:"transformOrigin",options:e,fn(t){var y,g,w;const{placement:r,rects:n,middlewareData:i}=t,s=((y=i.arrow)==null?void 0:y.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[c,u]=kre(r),f={start:"0%",center:"50%",end:"100%"}[u],d=(((g=i.arrow)==null?void 0:g.x)??0)+o/2,h=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=s?f:`${d}px`,p=`${-l}px`):c==="top"?(m=s?f:`${d}px`,p=`${n.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=s?f:`${h}px`):c==="left"&&(m=`${n.floating.width+l}px`,p=s?f:`${h}px`),{data:{x:m,y:p}}}});function kre(e){const[t,r="center"]=e.split("-");return[t,r]}var D6=bre,AC=Sre,j6=Ere,$6=Tre,a5e="Portal",t2=C.forwardRef((e,t)=>{var o;const{container:r,...n}=e,[i,a]=C.useState(!1);fa(()=>a(!0),[]);const s=r||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?bbe.createPortal(E.jsx(lr.div,{...n,ref:t}),s):null});t2.displayName=a5e;function s5e(e,t){return C.useReducer((r,n)=>t[r][n]??r,e)}var Hc=e=>{const{present:t,children:r}=e,n=o5e(t),i=typeof r=="function"?r({present:n.isPresent}):C.Children.only(r),a=Mr(n.ref,l5e(i));return typeof r=="function"||n.isPresent?C.cloneElement(i,{ref:a}):null};Hc.displayName="Presence";function o5e(e){const[t,r]=C.useState(),n=C.useRef(null),i=C.useRef(e),a=C.useRef("none"),s=e?"mounted":"unmounted",[o,l]=s5e(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const c=KS(n.current);a.current=o==="mounted"?c:"none"},[o]),fa(()=>{const c=n.current,u=i.current;if(u!==e){const d=a.current,h=KS(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),fa(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,f=h=>{const p=KS(n.current).includes(CSS.escape(h.animationName));if(h.target===t&&p&&(l("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},d=h=>{h.target===t&&(a.current=KS(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:C.useCallback(c=>{n.current=c?getComputedStyle(c):null,r(c)},[])}}function KS(e){return(e==null?void 0:e.animationName)||"none"}function l5e(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var UN="rovingFocusGroup.onEntryFocus",c5e={bubbles:!1,cancelable:!0},r2="RovingFocusGroup",[DR,Cre,u5e]=wC(r2),[f5e,TC]=Hu(r2,[u5e]),[d5e,h5e]=f5e(r2),Ore=C.forwardRef((e,t)=>E.jsx(DR.Provider,{scope:e.__scopeRovingFocusGroup,children:E.jsx(DR.Slot,{scope:e.__scopeRovingFocusGroup,children:E.jsx(p5e,{...e,ref:t})})}));Ore.displayName=r2;var p5e=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=e,d=C.useRef(null),h=Mr(t,d),m=Z_(a),[p,y]=Kh({prop:s,defaultProp:o??null,onChange:l,caller:r2}),[g,w]=C.useState(!1),v=jc(c),x=Cre(r),b=C.useRef(!1),[S,T]=C.useState(0);return C.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(UN,v),()=>A.removeEventListener(UN,v)},[v]),E.jsx(d5e,{scope:r,orientation:n,dir:m,loop:i,currentTabStopId:p,onItemFocus:C.useCallback(A=>y(A),[y]),onItemShiftTab:C.useCallback(()=>w(!0),[]),onFocusableItemAdd:C.useCallback(()=>T(A=>A+1),[]),onFocusableItemRemove:C.useCallback(()=>T(A=>A-1),[]),children:E.jsx(lr.div,{tabIndex:g||S===0?-1:0,"data-orientation":n,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:_t(e.onMouseDown,()=>{b.current=!0}),onFocus:_t(e.onFocus,A=>{const O=!b.current;if(A.target===A.currentTarget&&O&&!g){const M=new CustomEvent(UN,c5e);if(A.currentTarget.dispatchEvent(M),!M.defaultPrevented){const P=x().filter(Z=>Z.focusable),N=P.find(Z=>Z.active),V=P.find(Z=>Z.id===p),G=[N,V,...P].filter(Boolean).map(Z=>Z.ref.current);Ire(G,u)}}b.current=!1}),onBlur:_t(e.onBlur,()=>w(!1))})})}),Pre="RovingFocusGroupItem",Nre=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:s,...o}=e,l=Nc(),c=a||l,u=h5e(Pre,r),f=u.currentTabStopId===c,d=Cre(r),{onFocusableItemAdd:h,onFocusableItemRemove:m,currentTabStopId:p}=u;return C.useEffect(()=>{if(n)return h(),()=>m()},[n,h,m]),E.jsx(DR.ItemSlot,{scope:r,id:c,focusable:n,active:i,children:E.jsx(lr.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...o,ref:t,onMouseDown:_t(e.onMouseDown,y=>{n?u.onItemFocus(c):y.preventDefault()}),onFocus:_t(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:_t(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=y5e(y,u.orientation,u.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=d().filter(x=>x.focusable).map(x=>x.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const x=v.indexOf(y.currentTarget);v=u.loop?v5e(v,x+1):v.slice(x+1)}setTimeout(()=>Ire(v))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:p!=null}):s})})});Nre.displayName=Pre;var m5e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function g5e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function y5e(e,t,r){const n=g5e(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return m5e[n]}function Ire(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function v5e(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Rre=Ore,Lre=Nre;function w5e(e){const t=x5e(e),r=C.forwardRef((n,i)=>{const{children:a,...s}=n,o=C.Children.toArray(a),l=o.find(_5e);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function x5e(e){const t=C.forwardRef((r,n)=>{const{children:i,...a}=r;if(C.isValidElement(i)){const s=E5e(i),o=S5e(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var b5e=Symbol("radix.slottable");function _5e(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===b5e}function S5e(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function E5e(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var A5e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ig=new WeakMap,YS=new WeakMap,XS={},zN=0,Mre=function(e){return e&&(e.host||Mre(e.parentNode))},T5e=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=Mre(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},k5e=function(e,t,r,n){var i=T5e(t,Array.isArray(e)?e:[e]);XS[r]||(XS[r]=new WeakMap);var a=XS[r],s=[],o=new Set,l=new Set(i),c=function(f){!f||o.has(f)||(o.add(f),c(f.parentNode))};i.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(d){if(o.has(d))u(d);else try{var h=d.getAttribute(n),m=h!==null&&h!=="false",p=(ig.get(d)||0)+1,y=(a.get(d)||0)+1;ig.set(d,p),a.set(d,y),s.push(d),p===1&&m&&YS.set(d,!0),y===1&&d.setAttribute(r,"true"),m||d.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",d,g)}})};return u(t),o.clear(),zN++,function(){s.forEach(function(f){var d=ig.get(f)-1,h=a.get(f)-1;ig.set(f,d),a.set(f,h),d||(YS.has(f)||f.removeAttribute(n),YS.delete(f)),h||f.removeAttribute(r)}),zN--,zN||(ig=new WeakMap,ig=new WeakMap,YS=new WeakMap,XS={})}},kC=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=A5e(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),k5e(n,i,r,"aria-hidden")):function(){return null}},xA="right-scroll-bar-position",bA="width-before-scroll-bar",C5e="with-scroll-bars-hidden",O5e="--removed-body-scroll-bar-size";function VN(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function P5e(e,t){var r=C.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var N5e=typeof window<"u"?C.useLayoutEffect:C.useEffect,QU=new WeakMap;function I5e(e,t){var r=P5e(null,function(n){return e.forEach(function(i){return VN(i,n)})});return N5e(function(){var n=QU.get(r);if(n){var i=new Set(n),a=new Set(e),s=r.current;i.forEach(function(o){a.has(o)||VN(o,null)}),a.forEach(function(o){i.has(o)||VN(o,s)})}QU.set(r,e)},[e]),r}function R5e(e){return e}function L5e(e,t){t===void 0&&(t=R5e);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var s=t(a,n);return r.push(s),function(){r=r.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(n=!0;r.length;){var s=r;r=[],s.forEach(a)}r={push:function(o){return a(o)},filter:function(){return r}}},assignMedium:function(a){n=!0;var s=[];if(r.length){var o=r;r=[],o.forEach(a),s=r}var l=function(){var u=s;s=[],u.forEach(a)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),r}}}};return i}function M5e(e){e===void 0&&(e={});var t=L5e(null);return t.options=wu({async:!0,ssr:!1},e),t}var Dre=function(e){var t=e.sideCar,r=Xv(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return C.createElement(n,wu({},r))};Dre.isSideCarExport=!0;function D5e(e,t){return e.useMedium(t),Dre}var jre=M5e(),WN=function(){},CC=C.forwardRef(function(e,t){var r=C.useRef(null),n=C.useState({onScrollCapture:WN,onWheelCapture:WN,onTouchMoveCapture:WN}),i=n[0],a=n[1],s=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,f=e.shards,d=e.sideCar,h=e.noRelative,m=e.noIsolation,p=e.inert,y=e.allowPinchZoom,g=e.as,w=g===void 0?"div":g,v=e.gapMode,x=Xv(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=d,S=I5e([r,t]),T=wu(wu({},x),i);return C.createElement(C.Fragment,null,u&&C.createElement(b,{sideCar:jre,removeScrollBar:c,shards:f,noRelative:h,noIsolation:m,inert:p,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:v}),s?C.cloneElement(C.Children.only(o),wu(wu({},T),{ref:S})):C.createElement(w,wu({},T,{className:l,ref:S}),o))});CC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};CC.classNames={fullWidth:bA,zeroRight:xA};var j5e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $5e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=j5e();return t&&e.setAttribute("nonce",t),e}function F5e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function B5e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var U5e=function(){var e=0,t=null;return{add:function(r){e==0&&(t=$5e())&&(F5e(t,r),B5e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},z5e=function(){var e=U5e();return function(t,r){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},$re=function(){var e=z5e(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},V5e={left:0,top:0,right:0,gap:0},HN=function(e){return parseInt(e||"",10)||0},W5e=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[HN(r),HN(n),HN(i)]},H5e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return V5e;var t=W5e(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},G5e=$re(),Ey="data-scroll-locked",q5e=function(e,t,r,n){var i=e.left,a=e.top,s=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(C5e,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Ey,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(xA,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(bA,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(xA," .").concat(xA,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(bA," .").concat(bA,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ey,`] {
    `).concat(O5e,": ").concat(o,`px;
  }
`)},ez=function(){var e=parseInt(document.body.getAttribute(Ey)||"0",10);return isFinite(e)?e:0},K5e=function(){C.useEffect(function(){return document.body.setAttribute(Ey,(ez()+1).toString()),function(){var e=ez()-1;e<=0?document.body.removeAttribute(Ey):document.body.setAttribute(Ey,e.toString())}},[])},Y5e=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;K5e();var a=C.useMemo(function(){return H5e(i)},[i]);return C.createElement(G5e,{styles:q5e(a,!t,i,r?"":"!important")})},jR=!1;if(typeof window<"u")try{var ZS=Object.defineProperty({},"passive",{get:function(){return jR=!0,!0}});window.addEventListener("test",ZS,ZS),window.removeEventListener("test",ZS,ZS)}catch{jR=!1}var ag=jR?{passive:!1}:!1,X5e=function(e){return e.tagName==="TEXTAREA"},Fre=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!X5e(e)&&r[t]==="visible")},Z5e=function(e){return Fre(e,"overflowY")},J5e=function(e){return Fre(e,"overflowX")},tz=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=Bre(e,n);if(i){var a=Ure(e,n),s=a[1],o=a[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Q5e=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},eCe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Bre=function(e,t){return e==="v"?Z5e(t):J5e(t)},Ure=function(e,t){return e==="v"?Q5e(t):eCe(t)},tCe=function(e,t){return e==="h"&&t==="rtl"?-1:1},rCe=function(e,t,r,n,i){var a=tCe(e,window.getComputedStyle(t).direction),s=a*n,o=r.target,l=t.contains(o),c=!1,u=s>0,f=0,d=0;do{if(!o)break;var h=Ure(e,o),m=h[0],p=h[1],y=h[2],g=p-y-a*m;(m||g)&&Bre(e,o)&&(f+=g,d+=m);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(u&&Math.abs(f)<1||!u&&Math.abs(d)<1)&&(c=!0),c},JS=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rz=function(e){return[e.deltaX,e.deltaY]},nz=function(e){return e&&"current"in e?e.current:e},nCe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},iCe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},aCe=0,sg=[];function sCe(e){var t=C.useRef([]),r=C.useRef([0,0]),n=C.useRef(),i=C.useState(aCe++)[0],a=C.useState($re)[0],s=C.useRef(e);C.useEffect(function(){s.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=e2e([e.lockRef.current],(e.shards||[]).map(nz),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=C.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var g=JS(p),w=r.current,v="deltaX"in p?p.deltaX:w[0]-g[0],x="deltaY"in p?p.deltaY:w[1]-g[1],b,S=p.target,T=Math.abs(v)>Math.abs(x)?"h":"v";if("touches"in p&&T==="h"&&S.type==="range")return!1;var A=window.getSelection(),O=A&&A.anchorNode,M=O?O===S||O.contains(S):!1;if(M)return!1;var P=tz(T,S);if(!P)return!0;if(P?b=T:(b=T==="v"?"h":"v",P=tz(T,S)),!P)return!1;if(!n.current&&"changedTouches"in p&&(v||x)&&(n.current=b),!b)return!0;var N=n.current||b;return rCe(N,y,p,N==="h"?v:x)},[]),l=C.useCallback(function(p){var y=p;if(!(!sg.length||sg[sg.length-1]!==a)){var g="deltaY"in y?rz(y):JS(y),w=t.current.filter(function(b){return b.name===y.type&&(b.target===y.target||y.target===b.shadowParent)&&nCe(b.delta,g)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var v=(s.current.shards||[]).map(nz).filter(Boolean).filter(function(b){return b.contains(y.target)}),x=v.length>0?o(y,v[0]):!s.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),c=C.useCallback(function(p,y,g,w){var v={name:p,delta:y,target:g,should:w,shadowParent:oCe(g)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(x){return x!==v})},1)},[]),u=C.useCallback(function(p){r.current=JS(p),n.current=void 0},[]),f=C.useCallback(function(p){c(p.type,rz(p),p.target,o(p,e.lockRef.current))},[]),d=C.useCallback(function(p){c(p.type,JS(p),p.target,o(p,e.lockRef.current))},[]);C.useEffect(function(){return sg.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",l,ag),document.addEventListener("touchmove",l,ag),document.addEventListener("touchstart",u,ag),function(){sg=sg.filter(function(p){return p!==a}),document.removeEventListener("wheel",l,ag),document.removeEventListener("touchmove",l,ag),document.removeEventListener("touchstart",u,ag)}},[]);var h=e.removeScrollBar,m=e.inert;return C.createElement(C.Fragment,null,m?C.createElement(a,{styles:iCe(i)}):null,h?C.createElement(Y5e,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function oCe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const lCe=D5e(jre,sCe);var n2=C.forwardRef(function(e,t){return C.createElement(CC,wu({},e,{ref:t,sideCar:lCe}))});n2.classNames=CC.classNames;var $R=["Enter"," "],cCe=["ArrowDown","PageUp","Home"],zre=["ArrowUp","PageDown","End"],uCe=[...cCe,...zre],fCe={ltr:[...$R,"ArrowRight"],rtl:[...$R,"ArrowLeft"]},dCe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},i2="Menu",[yb,hCe,pCe]=wC(i2),[Em,Vre]=Hu(i2,[pCe,t1,TC]),OC=t1(),Wre=TC(),[mCe,Am]=Em(i2),[gCe,a2]=Em(i2),Hre=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:a,modal:s=!0}=e,o=OC(t),[l,c]=C.useState(null),u=C.useRef(!1),f=jc(a),d=Z_(i);return C.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),E.jsx(D6,{...o,children:E.jsx(mCe,{scope:t,open:r,onOpenChange:f,content:l,onContentChange:c,children:E.jsx(gCe,{scope:t,onClose:C.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:d,modal:s,children:n})})})};Hre.displayName=i2;var yCe="MenuAnchor",F6=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=OC(r);return E.jsx(AC,{...i,...n,ref:t})});F6.displayName=yCe;var B6="MenuPortal",[vCe,Gre]=Em(B6,{forceMount:void 0}),qre=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:i}=e,a=Am(B6,t);return E.jsx(vCe,{scope:t,forceMount:r,children:E.jsx(Hc,{present:r||a.open,children:E.jsx(t2,{asChild:!0,container:i,children:n})})})};qre.displayName=B6;var Ol="MenuContent",[wCe,U6]=Em(Ol),Kre=C.forwardRef((e,t)=>{const r=Gre(Ol,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=Am(Ol,e.__scopeMenu),s=a2(Ol,e.__scopeMenu);return E.jsx(yb.Provider,{scope:e.__scopeMenu,children:E.jsx(Hc,{present:n||a.open,children:E.jsx(yb.Slot,{scope:e.__scopeMenu,children:s.modal?E.jsx(xCe,{...i,ref:t}):E.jsx(bCe,{...i,ref:t})})})})}),xCe=C.forwardRef((e,t)=>{const r=Am(Ol,e.__scopeMenu),n=C.useRef(null),i=Mr(t,n);return C.useEffect(()=>{const a=n.current;if(a)return kC(a)},[]),E.jsx(z6,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:_t(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),bCe=C.forwardRef((e,t)=>{const r=Am(Ol,e.__scopeMenu);return E.jsx(z6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),_Ce=w5e("MenuContent.ScrollLock"),z6=C.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:h,disableOutsideScroll:m,...p}=e,y=Am(Ol,r),g=a2(Ol,r),w=OC(r),v=Wre(r),x=hCe(r),[b,S]=C.useState(null),T=C.useRef(null),A=Mr(t,T,y.onContentChange),O=C.useRef(0),M=C.useRef(""),P=C.useRef(0),N=C.useRef(null),V=C.useRef("right"),B=C.useRef(0),G=m?n2:C.Fragment,Z=m?{as:_Ce,allowPinchZoom:!0}:void 0,J=U=>{var D,re;const se=M.current+U,ue=x().filter(K=>!K.disabled),I=document.activeElement,z=(D=ue.find(K=>K.ref.current===I))==null?void 0:D.textValue,H=ue.map(K=>K.textValue),q=LCe(H,se,z),F=(re=ue.find(K=>K.textValue===q))==null?void 0:re.ref.current;(function K(le){M.current=le,window.clearTimeout(O.current),le!==""&&(O.current=window.setTimeout(()=>K(""),1e3))})(se),F&&setTimeout(()=>F.focus())};C.useEffect(()=>()=>window.clearTimeout(O.current),[]),xC();const Y=C.useCallback(U=>{var ue,I;return V.current===((ue=N.current)==null?void 0:ue.side)&&DCe(U,(I=N.current)==null?void 0:I.area)},[]);return E.jsx(wCe,{scope:r,searchRef:M,onItemEnter:C.useCallback(U=>{Y(U)&&U.preventDefault()},[Y]),onItemLeave:C.useCallback(U=>{var se;Y(U)||((se=T.current)==null||se.focus(),S(null))},[Y]),onTriggerLeave:C.useCallback(U=>{Y(U)&&U.preventDefault()},[Y]),pointerGraceTimerRef:P,onPointerGraceIntentChange:C.useCallback(U=>{N.current=U},[]),children:E.jsx(G,{...Z,children:E.jsx(Q_,{asChild:!0,trapped:i,onMountAutoFocus:_t(a,U=>{var se;U.preventDefault(),(se=T.current)==null||se.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:E.jsx(J_,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:d,onDismiss:h,children:E.jsx(Rre,{asChild:!0,...v,dir:g.dir,orientation:"vertical",loop:n,currentTabStopId:b,onCurrentTabStopIdChange:S,onEntryFocus:_t(l,U=>{g.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:E.jsx(j6,{role:"menu","aria-orientation":"vertical","data-state":une(y.open),"data-radix-menu-content":"",dir:g.dir,...w,...p,ref:A,style:{outline:"none",...p.style},onKeyDown:_t(p.onKeyDown,U=>{const ue=U.target.closest("[data-radix-menu-content]")===U.currentTarget,I=U.ctrlKey||U.altKey||U.metaKey,z=U.key.length===1;ue&&(U.key==="Tab"&&U.preventDefault(),!I&&z&&J(U.key));const H=T.current;if(U.target!==H||!uCe.includes(U.key))return;U.preventDefault();const F=x().filter(D=>!D.disabled).map(D=>D.ref.current);zre.includes(U.key)&&F.reverse(),ICe(F)}),onBlur:_t(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(O.current),M.current="")}),onPointerMove:_t(e.onPointerMove,vb(U=>{const se=U.target,ue=B.current!==U.clientX;if(U.currentTarget.contains(se)&&ue){const I=U.clientX>B.current?"right":"left";V.current=I,B.current=U.clientX}}))})})})})})})});Kre.displayName=Ol;var SCe="MenuGroup",V6=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return E.jsx(lr.div,{role:"group",...n,ref:t})});V6.displayName=SCe;var ECe="MenuLabel",Yre=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return E.jsx(lr.div,{...n,ref:t})});Yre.displayName=ECe;var BT="MenuItem",iz="menu.itemSelect",PC=C.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...i}=e,a=C.useRef(null),s=a2(BT,e.__scopeMenu),o=U6(BT,e.__scopeMenu),l=Mr(t,a),c=C.useRef(!1),u=()=>{const f=a.current;if(!r&&f){const d=new CustomEvent(iz,{bubbles:!0,cancelable:!0});f.addEventListener(iz,h=>n==null?void 0:n(h),{once:!0}),rre(f,d),d.defaultPrevented?c.current=!1:s.onClose()}};return E.jsx(Xre,{...i,ref:l,disabled:r,onClick:_t(e.onClick,u),onPointerDown:f=>{var d;(d=e.onPointerDown)==null||d.call(e,f),c.current=!0},onPointerUp:_t(e.onPointerUp,f=>{var d;c.current||(d=f.currentTarget)==null||d.click()}),onKeyDown:_t(e.onKeyDown,f=>{const d=o.searchRef.current!=="";r||d&&f.key===" "||$R.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});PC.displayName=BT;var Xre=C.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...a}=e,s=U6(BT,r),o=Wre(r),l=C.useRef(null),c=Mr(t,l),[u,f]=C.useState(!1),[d,h]=C.useState("");return C.useEffect(()=>{const m=l.current;m&&h((m.textContent??"").trim())},[a.children]),E.jsx(yb.ItemSlot,{scope:r,disabled:n,textValue:i??d,children:E.jsx(Lre,{asChild:!0,...o,focusable:!n,children:E.jsx(lr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:c,onPointerMove:_t(e.onPointerMove,vb(m=>{n?s.onItemLeave(m):(s.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:_t(e.onPointerLeave,vb(m=>s.onItemLeave(m))),onFocus:_t(e.onFocus,()=>f(!0)),onBlur:_t(e.onBlur,()=>f(!1))})})})}),ACe="MenuCheckboxItem",Zre=C.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...i}=e;return E.jsx(rne,{scope:e.__scopeMenu,checked:r,children:E.jsx(PC,{role:"menuitemcheckbox","aria-checked":UT(r)?"mixed":r,...i,ref:t,"data-state":H6(r),onSelect:_t(i.onSelect,()=>n==null?void 0:n(UT(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Zre.displayName=ACe;var Jre="MenuRadioGroup",[TCe,kCe]=Em(Jre,{value:void 0,onValueChange:()=>{}}),Qre=C.forwardRef((e,t)=>{const{value:r,onValueChange:n,...i}=e,a=jc(n);return E.jsx(TCe,{scope:e.__scopeMenu,value:r,onValueChange:a,children:E.jsx(V6,{...i,ref:t})})});Qre.displayName=Jre;var ene="MenuRadioItem",tne=C.forwardRef((e,t)=>{const{value:r,...n}=e,i=kCe(ene,e.__scopeMenu),a=r===i.value;return E.jsx(rne,{scope:e.__scopeMenu,checked:a,children:E.jsx(PC,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":H6(a),onSelect:_t(n.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,r)},{checkForDefaultPrevented:!1})})})});tne.displayName=ene;var W6="MenuItemIndicator",[rne,CCe]=Em(W6,{checked:!1}),nne=C.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...i}=e,a=CCe(W6,r);return E.jsx(Hc,{present:n||UT(a.checked)||a.checked===!0,children:E.jsx(lr.span,{...i,ref:t,"data-state":H6(a.checked)})})});nne.displayName=W6;var OCe="MenuSeparator",ine=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return E.jsx(lr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});ine.displayName=OCe;var PCe="MenuArrow",ane=C.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=OC(r);return E.jsx($6,{...i,...n,ref:t})});ane.displayName=PCe;var NCe="MenuSub",[S4t,sne]=Em(NCe),jw="MenuSubTrigger",one=C.forwardRef((e,t)=>{const r=Am(jw,e.__scopeMenu),n=a2(jw,e.__scopeMenu),i=sne(jw,e.__scopeMenu),a=U6(jw,e.__scopeMenu),s=C.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,c={__scopeMenu:e.__scopeMenu},u=C.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return C.useEffect(()=>u,[u]),C.useEffect(()=>{const f=o.current;return()=>{window.clearTimeout(f),l(null)}},[o,l]),E.jsx(F6,{asChild:!0,...c,children:E.jsx(Xre,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":une(r.open),...e,ref:Wu(t,i.onTriggerChange),onClick:f=>{var d;(d=e.onClick)==null||d.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:_t(e.onPointerMove,vb(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!s.current&&(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:_t(e.onPointerLeave,vb(f=>{var h,m;u();const d=(h=r.content)==null?void 0:h.getBoundingClientRect();if(d){const p=(m=r.content)==null?void 0:m.dataset.side,y=p==="right",g=y?-5:5,w=d[y?"left":"right"],v=d[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+g,y:f.clientY},{x:w,y:d.top},{x:v,y:d.top},{x:v,y:d.bottom},{x:w,y:d.bottom}],side:p}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:_t(e.onKeyDown,f=>{var h;const d=a.searchRef.current!=="";e.disabled||d&&f.key===" "||fCe[n.dir].includes(f.key)&&(r.onOpenChange(!0),(h=r.content)==null||h.focus(),f.preventDefault())})})})});one.displayName=jw;var lne="MenuSubContent",cne=C.forwardRef((e,t)=>{const r=Gre(Ol,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=Am(Ol,e.__scopeMenu),s=a2(Ol,e.__scopeMenu),o=sne(lne,e.__scopeMenu),l=C.useRef(null),c=Mr(t,l);return E.jsx(yb.Provider,{scope:e.__scopeMenu,children:E.jsx(Hc,{present:n||a.open,children:E.jsx(yb.Slot,{scope:e.__scopeMenu,children:E.jsx(z6,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;s.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:_t(e.onFocusOutside,u=>{u.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:_t(e.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:_t(e.onKeyDown,u=>{var h;const f=u.currentTarget.contains(u.target),d=dCe[s.dir].includes(u.key);f&&d&&(a.onOpenChange(!1),(h=o.trigger)==null||h.focus(),u.preventDefault())})})})})})});cne.displayName=lne;function une(e){return e?"open":"closed"}function UT(e){return e==="indeterminate"}function H6(e){return UT(e)?"indeterminate":e?"checked":"unchecked"}function ICe(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function RCe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function LCe(e,t,r){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let s=RCe(e,Math.max(a,0));i.length===1&&(s=s.filter(c=>c!==r));const l=s.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function MCe(e,t){const{x:r,y:n}=e;let i=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){const o=t[a],l=t[s],c=o.x,u=o.y,f=l.x,d=l.y;u>n!=d>n&&r<(f-c)*(n-u)/(d-u)+c&&(i=!i)}return i}function DCe(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return MCe(r,t)}function vb(e){return t=>t.pointerType==="mouse"?e(t):void 0}var jCe=Hre,$Ce=F6,FCe=qre,BCe=Kre,UCe=V6,zCe=Yre,VCe=PC,WCe=Zre,HCe=Qre,GCe=tne,qCe=nne,KCe=ine,YCe=ane,XCe=one,ZCe=cne,NC="DropdownMenu",[JCe]=Hu(NC,[Vre]),Gs=Vre(),[QCe,fne]=JCe(NC),dne=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=Gs(t),c=C.useRef(null),[u,f]=Kh({prop:i,defaultProp:a??!1,onChange:s,caller:NC});return E.jsx(QCe,{scope:t,triggerId:Nc(),triggerRef:c,contentId:Nc(),open:u,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(d=>!d),[f]),modal:o,children:E.jsx(jCe,{...l,open:u,onOpenChange:f,dir:n,modal:o,children:r})})};dne.displayName=NC;var hne="DropdownMenuTrigger",pne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,a=fne(hne,r),s=Gs(r);return E.jsx($Ce,{asChild:!0,...s,children:E.jsx(lr.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:Wu(t,a.triggerRef),onPointerDown:_t(e.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(a.onOpenToggle(),a.open||o.preventDefault())}),onKeyDown:_t(e.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&a.onOpenToggle(),o.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});pne.displayName=hne;var eOe="DropdownMenuPortal",mne=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Gs(t);return E.jsx(FCe,{...n,...r})};mne.displayName=eOe;var gne="DropdownMenuContent",yne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=fne(gne,r),a=Gs(r),s=C.useRef(!1);return E.jsx(BCe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:t,onCloseAutoFocus:_t(e.onCloseAutoFocus,o=>{var l;s.current||(l=i.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:_t(e.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yne.displayName=gne;var tOe="DropdownMenuGroup",rOe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(UCe,{...i,...n,ref:t})});rOe.displayName=tOe;var nOe="DropdownMenuLabel",vne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(zCe,{...i,...n,ref:t})});vne.displayName=nOe;var iOe="DropdownMenuItem",wne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(VCe,{...i,...n,ref:t})});wne.displayName=iOe;var aOe="DropdownMenuCheckboxItem",xne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(WCe,{...i,...n,ref:t})});xne.displayName=aOe;var sOe="DropdownMenuRadioGroup",oOe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(HCe,{...i,...n,ref:t})});oOe.displayName=sOe;var lOe="DropdownMenuRadioItem",bne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(GCe,{...i,...n,ref:t})});bne.displayName=lOe;var cOe="DropdownMenuItemIndicator",_ne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(qCe,{...i,...n,ref:t})});_ne.displayName=cOe;var uOe="DropdownMenuSeparator",Sne=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(KCe,{...i,...n,ref:t})});Sne.displayName=uOe;var fOe="DropdownMenuArrow",dOe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(YCe,{...i,...n,ref:t})});dOe.displayName=fOe;var hOe="DropdownMenuSubTrigger",Ene=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(XCe,{...i,...n,ref:t})});Ene.displayName=hOe;var pOe="DropdownMenuSubContent",Ane=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Gs(r);return E.jsx(ZCe,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ane.displayName=pOe;var mOe=dne,gOe=pne,yOe=mne,Tne=yne,kne=vne,Cne=wne,One=xne,Pne=bne,Nne=_ne,Ine=Sne,Rne=Ene,Lne=Ane;const Mne=mOe,Dne=gOe,vOe=C.forwardRef(({className:e,inset:t,children:r,...n},i)=>E.jsxs(Rne,{ref:i,className:Ft("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,E.jsx(Fte,{className:"ml-auto h-4 w-4"})]}));vOe.displayName=Rne.displayName;const wOe=C.forwardRef(({className:e,...t},r)=>E.jsx(Lne,{ref:r,className:Ft("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));wOe.displayName=Lne.displayName;const G6=C.forwardRef(({className:e,sideOffset:t=4,...r},n)=>E.jsx(yOe,{children:E.jsx(Tne,{ref:n,sideOffset:t,className:Ft("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));G6.displayName=Tne.displayName;const dx=C.forwardRef(({className:e,inset:t,...r},n)=>E.jsx(Cne,{ref:n,className:Ft("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));dx.displayName=Cne.displayName;const xOe=C.forwardRef(({className:e,children:t,checked:r,...n},i)=>E.jsxs(One,{ref:i,className:Ft("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[E.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:E.jsx(Nne,{children:E.jsx(hb,{className:"h-4 w-4"})})}),t]}));xOe.displayName=One.displayName;const bOe=C.forwardRef(({className:e,children:t,...r},n)=>E.jsxs(Pne,{ref:n,className:Ft("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[E.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:E.jsx(Nne,{children:E.jsx(UEe,{className:"h-2 w-2 fill-current"})})}),t]}));bOe.displayName=Pne.displayName;const jne=C.forwardRef(({className:e,inset:t,...r},n)=>E.jsx(kne,{ref:n,className:Ft("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));jne.displayName=kne.displayName;const $ne=C.forwardRef(({className:e,...t},r)=>E.jsx(Ine,{ref:r,className:Ft("-mx-1 my-1 h-px bg-muted",e),...t}));$ne.displayName=Ine.displayName;function _Oe(e,t=[]){let r=[];function n(a,s){const o=C.createContext(s);o.displayName=a+"Context";const l=r.length;r=[...r,s];const c=f=>{var g;const{scope:d,children:h,...m}=f,p=((g=d==null?void 0:d[e])==null?void 0:g[l])||o,y=C.useMemo(()=>m,Object.values(m));return E.jsx(p.Provider,{value:y,children:h})};c.displayName=a+"Provider";function u(f,d){var p;const h=((p=d==null?void 0:d[e])==null?void 0:p[l])||o,m=C.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=r.map(s=>C.createContext(s));return function(o){const l=(o==null?void 0:o[e])||a;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,SOe(i,...t)]}function SOe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=n.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var EOe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q6=EOe.reduce((e,t)=>{const r=vC(`Primitive.${t}`),n=C.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(l,{...o,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),Fne={exports:{}},Bne={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=C;function AOe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TOe=typeof Object.is=="function"?Object.is:AOe,kOe=Zy.useState,COe=Zy.useEffect,OOe=Zy.useLayoutEffect,POe=Zy.useDebugValue;function NOe(e,t){var r=t(),n=kOe({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return OOe(function(){i.value=r,i.getSnapshot=t,GN(i)&&a({inst:i})},[e,r,t]),COe(function(){return GN(i)&&a({inst:i}),e(function(){GN(i)&&a({inst:i})})},[e]),POe(r),r}function GN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!TOe(e,r)}catch{return!0}}function IOe(e,t){return t()}var ROe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?IOe:NOe;Bne.useSyncExternalStore=Zy.useSyncExternalStore!==void 0?Zy.useSyncExternalStore:ROe;Fne.exports=Bne;var LOe=Fne.exports;function MOe(){return LOe.useSyncExternalStore(DOe,()=>!0,()=>!1)}function DOe(){return()=>{}}var K6="Avatar",[jOe]=_Oe(K6),[$Oe,Une]=jOe(K6),zne=C.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[i,a]=C.useState("idle");return E.jsx($Oe,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:E.jsx(q6.span,{...n,ref:t})})});zne.displayName=K6;var Vne="AvatarImage",Wne=C.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=e,s=Une(Vne,r),o=FOe(n,a),l=jc(c=>{i(c),s.onImageLoadingStatusChange(c)});return fa(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?E.jsx(q6.img,{...a,ref:t,src:n}):null});Wne.displayName=Vne;var Hne="AvatarFallback",Gne=C.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...i}=e,a=Une(Hne,r),[s,o]=C.useState(n===void 0);return C.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(l)}},[n]),s&&a.imageLoadingStatus!=="loaded"?E.jsx(q6.span,{...i,ref:t}):null});Gne.displayName=Hne;function az(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function FOe(e,{referrerPolicy:t,crossOrigin:r}){const n=MOe(),i=C.useRef(null),a=n?(i.current||(i.current=new window.Image),i.current):null,[s,o]=C.useState(()=>az(a,e));return fa(()=>{o(az(a,e))},[a,e]),fa(()=>{const l=f=>()=>{o(f)};if(!a)return;const c=l("loaded"),u=l("error");return a.addEventListener("load",c),a.addEventListener("error",u),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",c),a.removeEventListener("error",u)}},[a,r,t]),s}var qne=zne,Kne=Wne,Yne=Gne;const Y6=C.forwardRef(({className:e,...t},r)=>E.jsx(qne,{ref:r,className:Ft("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Y6.displayName=qne.displayName;const X6=C.forwardRef(({className:e,...t},r)=>E.jsx(Kne,{ref:r,className:Ft("aspect-square h-full w-full",e),...t}));X6.displayName=Kne.displayName;const Z6=C.forwardRef(({className:e,...t},r)=>E.jsx(Yne,{ref:r,className:Ft("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Z6.displayName=Yne.displayName;const sz=({className:e,onNavigate:t})=>{var s,o,l,c,u;const{setTheme:r}=iTe(),{user:n,signOut:i}=gd(),a=[{id:"dashboard",label:"Dashboard",icon:YEe,path:"/"},{id:"transactions",label:"Expenses",icon:oAe,path:"/expenses"},{id:"budgets",label:"Budgets",icon:Wte,path:"/budgets"},{id:"reports",label:"Reports",icon:jEe,path:"/reports"},{id:"ai-advisor",label:"AI Advisor",icon:Gte,path:"/ai-advisor"},{id:"settings",label:"Settings",icon:Hte,path:"/settings"},{id:"subscription",label:"Subscription",icon:Bte,path:"/subscription"}];return E.jsxs("div",{className:Ft("w-64 bg-card border-r border-border h-screen flex flex-col p-4 shadow-sm",e),children:[E.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2 pl-2",children:[E.jsx("div",{className:"bg-cyan-500 text-white p-1.5 rounded-lg shadow-sm",children:E.jsx(yC,{className:"h-5 w-5"})}),E.jsx("span",{className:"text-xl font-bold tracking-tight text-foreground",children:"SpendMind"})]}),E.jsx("nav",{className:"flex-1 space-y-1",children:a.map(f=>{const d=f.icon;return E.jsxs(vte,{to:f.path,onClick:t,className:({isActive:h})=>Ft("flex items-center w-full justify-start gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 group text-sm font-medium",h?"bg-cyan-500/10 text-cyan-600 dark:text-cyan-400 font-bold border border-cyan-500/20 shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[E.jsx(d,{className:Ft("h-4 w-4","transition-colors")}),E.jsx("span",{className:"flex-1",children:f.label}),f.id==="dashboard"&&E.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 hidden group-[.active]:block"})]},f.id)})}),E.jsxs("div",{className:"mt-auto pt-6 border-t border-border space-y-4",children:[E.jsxs("div",{className:"flex items-center gap-3 px-2 py-3 bg-accent/30 rounded-xl border border-border/50",children:[E.jsxs(Y6,{className:"h-9 w-9 border-2 border-border transition-transform hover:scale-105",children:[E.jsx(X6,{src:(s=n==null?void 0:n.user_metadata)==null?void 0:s.avatar_url}),E.jsx(Z6,{className:"bg-secondary text-secondary-foreground font-bold",children:((l=(o=n==null?void 0:n.user_metadata)==null?void 0:o.full_name)==null?void 0:l.charAt(0))||((c=n==null?void 0:n.email)==null?void 0:c.charAt(0).toUpperCase())})]}),E.jsxs("div",{className:"flex-1 min-w-0 px-1",children:[E.jsx("p",{className:"text-xs font-bold text-foreground truncate",children:((u=n==null?void 0:n.user_metadata)==null?void 0:u.full_name)||"User Name"}),E.jsx("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-500 font-bold",children:"Premium Member"})]}),E.jsx(Er,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors",children:E.jsx(Vte,{className:"h-4 w-4"})})]}),E.jsxs("div",{className:"flex items-center justify-between px-2 pb-2",children:[E.jsxs(Mne,{children:[E.jsx(Dne,{asChild:!0,children:E.jsxs(Er,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground gap-2 px-2 hover:bg-accent/50 transition-colors",children:[E.jsxs("div",{className:"relative w-4 h-4 flex items-center justify-center",children:[E.jsx(dAe,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),E.jsx(nAe,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]}),E.jsx("span",{className:"text-xs font-medium",children:"Appearance"})]})}),E.jsxs(G6,{align:"start",className:"bg-popover border-border text-popover-foreground shadow-lg",children:[E.jsx(dx,{onClick:()=>r("light"),className:"cursor-pointer",children:"Light"}),E.jsx(dx,{onClick:()=>r("dark"),className:"cursor-pointer",children:"Dark"}),E.jsx(dx,{onClick:()=>r("system"),className:"cursor-pointer",children:"System"})]})]}),E.jsx("span",{className:"text-[10px] text-muted-foreground/60 font-medium",children:"v1.2.0"})]})]})]})};function BOe({onMenuClick:e}){var a,s;const{user:t,signOut:r}=gd(),n=(t==null?void 0:t.email)||"",i=n.charAt(0).toUpperCase();return E.jsxs("header",{className:"bg-card/50 backdrop-blur-sm border-b h-16 flex items-center justify-between px-6 sticky top-0 z-40",children:[E.jsxs("div",{className:"flex items-center gap-4 md:hidden",children:[E.jsx(Er,{variant:"ghost",size:"icon",onClick:e,className:"hover:bg-accent/50",children:E.jsx(eAe,{className:"h-5 w-5"})}),E.jsx("div",{className:"font-bold text-lg tracking-tight text-foreground",children:"SpendMind"})]}),E.jsx("div",{className:"hidden md:block flex-1"})," ",E.jsx("div",{className:"flex items-center gap-4 ml-auto",children:E.jsxs(Mne,{children:[E.jsx(Dne,{asChild:!0,children:E.jsx(Er,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:E.jsxs(Y6,{className:"h-8 w-8",children:[E.jsx(X6,{src:(a=t==null?void 0:t.user_metadata)==null?void 0:a.avatar_url,alt:n}),E.jsx(Z6,{children:i})]})})}),E.jsxs(G6,{className:"w-56",align:"end",forceMount:!0,children:[E.jsx(jne,{className:"font-normal",children:E.jsxs("div",{className:"flex flex-col space-y-1",children:[E.jsx("p",{className:"text-sm font-medium leading-none",children:((s=t==null?void 0:t.user_metadata)==null?void 0:s.full_name)||"User"}),E.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:n})]})}),E.jsx($ne,{}),E.jsxs(dx,{onClick:()=>r(),className:"text-red-500 focus:text-red-500",children:[E.jsx(Vte,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})})]})}const Xne=C.createContext();function UOe({children:e}){const{user:t}=gd(),[r,n]=C.useState([]),[i,a]=C.useState([]),[s,o]=C.useState([]),[l,c]=C.useState({currency:{code:"USD",symbol:"$",locale:"en-US"},country:"US"}),[u,f]=C.useState(!0),[d,h]=C.useState([]);C.useEffect(()=>{if(!t){n([]),a([]),o([]),f(!1);return}(async()=>{var P,N,V;f(!0);try{const{data:B}=await Yn.from("settings").select("*, currencies(*)").single();B&&c({currency:{code:((P=B.currencies)==null?void 0:P.code)||"USD",symbol:((N=B.currencies)==null?void 0:N.symbol)||"$",locale:((V=B.currencies)==null?void 0:V.locale)||"en-US"},country:B.country_code,theme:B.theme||"system"});const{data:G}=await Yn.from("categories").select("*").order("name");G&&a(G);const{data:Z}=await Yn.from("expenses").select("*").order("date",{ascending:!1});Z&&n(Z.map(U=>({...U,amount:Number(U.amount),category:U.category_name})));const{data:J}=await Yn.from("goals").select("*");J&&o(J);const{data:Y}=await Yn.from("currencies").select("*").order("code");Y&&h(Y)}catch(B){console.error("Error fetching data:",B)}finally{f(!1)}})()},[t]);const m=async M=>{if(t)try{const{data:P,error:N}=await Yn.from("expenses").insert([{user_id:t.id,amount:M.amount,category_name:M.category,date:M.date,description:M.description}]).select().single();if(N)throw N;n(V=>[{...P,amount:Number(P.amount)},...V])}catch(P){console.error("Error adding expense:",P)}},p=async M=>{if(t)try{const{error:P}=await Yn.from("expenses").delete().eq("id",M);if(P)throw P;n(N=>N.filter(V=>V.id!==M))}catch(P){console.error("Error deleting expense:",P)}},y=async M=>{if(t)try{const{data:P,error:N}=await Yn.from("categories").insert([{user_id:t.id,name:M,budget_limit:0}]).select().single();if(N)throw N;a(V=>[...V,P])}catch(P){console.error("Error adding category:",P)}},g=async M=>{if(t)try{const{error:P}=await Yn.from("categories").delete().eq("id",M);if(P)throw P;a(N=>N.filter(V=>V.id!==M))}catch(P){console.error("Error deleting category:",P)}},w=async(M,P)=>{if(!t)return;const N=i.find(V=>V.name===M);if(N)try{const{error:V}=await Yn.from("categories").update({budget_limit:P}).eq("id",N.id);if(V)throw V;a(B=>B.map(G=>G.id===N.id?{...G,budget_limit:P}:G))}catch(V){console.error("Error updating limit:",V)}},v=async M=>{if(t)try{const{data:P,error:N}=await Yn.from("goals").insert([{user_id:t.id,title:M.title,target_amount:M.amount,months:M.months}]).select().single();if(N)throw N;o(V=>[...V,P])}catch(P){console.error("Error adding goal:",P)}},x=async M=>{if(t)try{const{error:P}=await Yn.from("goals").delete().eq("id",M);if(P)throw P;o(N=>N.filter(V=>V.id!==M))}catch(P){console.error("Error deleting goal:",P)}},b=async M=>{var P,N,V;if(t)try{const B={};M.currency&&(B.currency_code=M.currency.code),M.theme&&(B.theme=M.theme),M.country&&(B.country_code=M.country);const{data:G,error:Z}=await Yn.from("settings").update(B).eq("user_id",t.id).select("*, currencies(*)").single();if(Z)throw Z;G&&c({currency:{code:((P=G.currencies)==null?void 0:P.code)||"USD",symbol:((N=G.currencies)==null?void 0:N.symbol)||"$",locale:((V=G.currencies)==null?void 0:V.locale)||"en-US"},theme:G.theme,country:G.country_code})}catch(B){console.error("Error updating settings:",B)}},S=()=>r.reduce((M,P)=>M+P.amount,0),T=M=>r.filter(P=>P.category_name===M).reduce((P,N)=>P+N.amount,0),A=M=>{const P=i.find(B=>B.name===M),N=(P==null?void 0:P.budget_limit)||0;if(N===0)return 1/0;const V=T(M);return N-V},O=M=>{const{locale:P,code:N}=l.currency;return new Intl.NumberFormat(P,{style:"currency",currency:N}).format(M)};return E.jsx(Xne.Provider,{value:{expenses:r,categories:i.map(M=>M.name),categoriesRaw:i,budgetLimits:i.reduce((M,P)=>({...M,[P.name]:P.budget_limit}),{}),goals:s,settings:l,isLoading:u,addExpense:m,deleteExpense:p,updateLimit:w,addCategory:y,deleteCategory:g,addGoal:v,deleteGoal:x,updateSettings:b,getTotalSpent:S,getCategorySpent:T,getRemainingBudget:A,formatCurrency:O,availableCurrencies:d},children:e})}const yd=()=>C.useContext(Xne);var zOe=Object.defineProperty,Gt=(e,t)=>{for(var r in t)zOe(e,r,{get:t[r],enumerable:!0})};function Ar(e,t,r){function n(o,l){var c;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(c=o._zod).traits??(c.traits=new Set),o._zod.traits.add(e),t(o,l);for(const u in s.prototype)u in o||Object.defineProperty(o,u,{value:s.prototype[u].bind(o)});o._zod.constr=s,o._zod.def=l}const i=(r==null?void 0:r.Parent)??Object;class a extends i{}Object.defineProperty(a,"name",{value:e});function s(o){var l;const c=r!=null&&r.Parent?new a:this;n(c,o),(l=c._zod).deferred??(l.deferred=[]);for(const u of c._zod.deferred)u();return c}return Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:o=>{var l,c;return r!=null&&r.Parent&&o instanceof r.Parent?!0:(c=(l=o==null?void 0:o._zod)==null?void 0:l.traits)==null?void 0:c.has(e)}}),Object.defineProperty(s,"name",{value:e}),s}class wb extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const VOe={};function X0(e){return VOe}function WOe(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,i])=>t.indexOf(+n)===-1).map(([n,i])=>i)}function HOe(e,t){return typeof t=="bigint"?t.toString():t}function J6(e){return e==null}function Q6(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function di(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function GOe(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}const Zne=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function oz(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function FR(e){if(oz(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(oz(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function El(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function vd(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function qOe(e,t){if(!FR(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return GOe(this,"shape",n),n},checks:[]};return El(e,r)}function KOe(e,t,r){const n=t._zod.def.shape,i={...n};for(const a in n)i[a]=e?new e({type:"optional",innerType:n[a]}):n[a];return El(t,{...t._zod.def,shape:i,checks:[]})}function hx(e,t=0){var r;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function YOe(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function QS(e){return typeof e=="string"?e:e==null?void 0:e.message}function Z0(e,t,r){var i,a,s,o,l,c;const n={...e,path:e.path??[]};if(!e.message){const u=QS((s=(a=(i=e.inst)==null?void 0:i._zod.def)==null?void 0:a.error)==null?void 0:s.call(a,e))??QS((o=t==null?void 0:t.error)==null?void 0:o.call(t,e))??QS((l=r.customError)==null?void 0:l.call(r,e))??QS((c=r.localeError)==null?void 0:c.call(r,e))??"Invalid input";n.message=u}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function e$(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function xb(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Jne=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,HOe,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Qne=Ar("$ZodError",Jne),IC=Ar("$ZodError",Jne,{Parent:Error});function XOe(e,t=r=>r.message){const r={},n=[];for(const i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function ZOe(e,t){const r=t||function(a){return a.message},n={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(o=>i({issues:o}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)n._errors.push(r(s));else{let o=n,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(e),n}function JOe(e){const t=[];for(const r of e)typeof r=="number"?t.push(`[${r}]`):typeof r=="symbol"?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}function QOe(e){var n;const t=[],r=[...e.issues].sort((i,a)=>i.path.length-a.path.length);for(const i of r)t.push(` ${i.message}`),(n=i.path)!=null&&n.length&&t.push(`   at ${JOe(i.path)}`);return t.join(`
`)}const eie=e=>(t,r,n,i)=>{const a=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise)throw new wb;if(s.issues.length){const o=new((i==null?void 0:i.Err)??e)(s.issues.map(l=>Z0(l,a,X0())));throw Zne(o,i==null?void 0:i.callee),o}return s.value},t$=eie(IC),tie=e=>async(t,r,n,i)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){const o=new((i==null?void 0:i.Err)??e)(s.issues.map(l=>Z0(l,a,X0())));throw Zne(o,i==null?void 0:i.callee),o}return s.value},rie=tie(IC),nie=e=>(t,r,n)=>{const i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new wb;return a.issues.length?{success:!1,error:new(e??Qne)(a.issues.map(s=>Z0(s,i,X0())))}:{success:!0,data:a.value}},ePe=nie(IC),iie=e=>async(t,r,n)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(s=>Z0(s,i,X0())))}:{success:!0,data:a.value}},tPe=iie(IC),r1=Ar("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),rPe=Ar("$ZodCheckMaxLength",(e,t)=>{var r;r1.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!J6(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const i=n.value;if(i.length<=t.maximum)return;const s=e$(i);n.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),nPe=Ar("$ZodCheckMinLength",(e,t)=>{var r;r1.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!J6(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const i=n.value;if(i.length>=t.minimum)return;const s=e$(i);n.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),iPe=Ar("$ZodCheckLengthEquals",(e,t)=>{var r;r1.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!J6(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=n=>{const i=n.value,a=i.length;if(a===t.length)return;const s=e$(i),o=a>t.length;n.issues.push({origin:s,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),aPe=Ar("$ZodCheckOverwrite",(e,t)=>{r1.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}}),sPe={major:4,minor:0,patch:0},Wa=Ar("$ZodType",(e,t)=>{var i;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=sPe;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const a of n)for(const s of a._zod.onattach)s(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(i=e._zod.deferred)==null||i.push(()=>{e._zod.run=e._zod.parse});else{const a=(s,o,l)=>{let c=hx(s),u;for(const f of o){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(c)continue;const d=s.issues.length,h=f._zod.check(s);if(h instanceof Promise&&(l==null?void 0:l.async)===!1)throw new wb;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await h,s.issues.length!==d&&(c||(c=hx(s,d)))});else{if(s.issues.length===d)continue;c||(c=hx(s,d))}}return u?u.then(()=>s):s};e._zod.run=(s,o)=>{const l=e._zod.parse(s,o);if(l instanceof Promise){if(o.async===!1)throw new wb;return l.then(c=>a(c,n,o))}return a(l,n,o)}}e["~standard"]={validate:a=>{var s;try{const o=ePe(e,a);return o.success?{value:o.data}:{issues:(s=o.error)==null?void 0:s.issues}}catch{return tPe(e,a).then(l=>{var c;return l.success?{value:l.data}:{issues:(c=l.error)==null?void 0:c.issues}})}},vendor:"zod",version:1}}),oPe=Ar("$ZodAny",(e,t)=>{Wa.init(e,t),e._zod.parse=r=>r}),lPe=Ar("$ZodUnknown",(e,t)=>{Wa.init(e,t),e._zod.parse=r=>r}),cPe=Ar("$ZodNever",(e,t)=>{Wa.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function lz(e,t,r){e.issues.length&&t.issues.push(...YOe(r,e.issues)),t.value[r]=e.value}const uPe=Ar("$ZodArray",(e,t)=>{Wa.init(e,t),e._zod.parse=(r,n)=>{const i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);const a=[];for(let s=0;s<i.length;s++){const o=i[s],l=t.element._zod.run({value:o,issues:[]},n);l instanceof Promise?a.push(l.then(c=>lz(c,r,s))):lz(l,r,s)}return a.length?Promise.all(a).then(()=>r):r}});function cz(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(a=>Z0(a,n,X0())))}),t}const fPe=Ar("$ZodUnion",(e,t)=>{Wa.init(e,t),di(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),di(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),di(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),di(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Q6(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let i=!1;const a=[];for(const s of t.options){const o=s._zod.run({value:r.value,issues:[]},n);if(o instanceof Promise)a.push(o),i=!0;else{if(o.issues.length===0)return o;a.push(o)}}return i?Promise.all(a).then(s=>cz(s,r,e,n)):cz(a,r,e,n)}}),dPe=Ar("$ZodIntersection",(e,t)=>{Wa.init(e,t),e._zod.parse=(r,n)=>{const i=r.value,a=t.left._zod.run({value:i,issues:[]},n),s=t.right._zod.run({value:i,issues:[]},n);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then(([l,c])=>uz(r,l,c)):uz(r,a,s)}});function BR(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(FR(e)&&FR(t)){const r=Object.keys(t),n=Object.keys(e).filter(a=>r.indexOf(a)!==-1),i={...e,...t};for(const a of n){const s=BR(e[a],t[a]);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};i[a]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const i=e[n],a=t[n],s=BR(i,a);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function uz(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),hx(e))return e;const n=BR(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const hPe=Ar("$ZodTransform",(e,t)=>{Wa.init(e,t),e._zod.parse=(r,n)=>{const i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(r.value=s,r));if(i instanceof Promise)throw new wb;return r.value=i,r}}),r$=Ar("$ZodOptional",(e,t)=>{Wa.init(e,t),e._zod.optin="optional",e._zod.optout="optional",di(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),di(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Q6(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),pPe=Ar("$ZodNullable",(e,t)=>{Wa.init(e,t),di(e._zod,"optin",()=>t.innerType._zod.optin),di(e._zod,"optout",()=>t.innerType._zod.optout),di(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Q6(r.source)}|null)$`):void 0}),di(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),mPe=Ar("$ZodDefault",(e,t)=>{Wa.init(e,t),e._zod.optin="optional",di(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(a=>fz(a,t)):fz(i,t)}});function fz(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const gPe=Ar("$ZodPrefault",(e,t)=>{Wa.init(e,t),e._zod.optin="optional",di(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),yPe=Ar("$ZodNonOptional",(e,t)=>{Wa.init(e,t),di(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(a=>dz(a,e)):dz(i,e)}});function dz(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const vPe=Ar("$ZodCatch",(e,t)=>{Wa.init(e,t),e._zod.optin="optional",di(e._zod,"optout",()=>t.innerType._zod.optout),di(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(a=>(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(s=>Z0(s,n,X0()))},input:r.value}),r.issues=[]),r)):(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(a=>Z0(a,n,X0()))},input:r.value}),r.issues=[]),r)}}),wPe=Ar("$ZodPipe",(e,t)=>{Wa.init(e,t),di(e._zod,"values",()=>t.in._zod.values),di(e._zod,"optin",()=>t.in._zod.optin),di(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const i=t.in._zod.run(r,n);return i instanceof Promise?i.then(a=>hz(a,t,n)):hz(i,t,n)}});function hz(e,t,r){return hx(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const xPe=Ar("$ZodReadonly",(e,t)=>{Wa.init(e,t),di(e._zod,"propValues",()=>t.innerType._zod.propValues),di(e._zod,"values",()=>t.innerType._zod.values),di(e._zod,"optin",()=>t.innerType._zod.optin),di(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(pz):pz(i)}});function pz(e){return e.value=Object.freeze(e.value),e}const bPe=Ar("$ZodCustom",(e,t)=>{r1.init(e,t),Wa.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(a=>mz(a,r,n,e));mz(i,r,n,e)}});function mz(e,t,r,n){if(!e){const i={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(i.params=n._zod.def.params),t.issues.push(xb(i))}}class aie{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function _Pe(){return new aie}const wa=_Pe();function SPe(e){return new e({type:"any"})}function EPe(e){return new e({type:"unknown"})}function APe(e,t){return new e({type:"never",...vd(t)})}function TPe(e,t){return new rPe({check:"max_length",...vd(t),maximum:e})}function gz(e,t){return new nPe({check:"min_length",...vd(t),minimum:e})}function kPe(e,t){return new iPe({check:"length_equals",...vd(t),length:e})}function CPe(e){return new aPe({check:"overwrite",tx:e})}function OPe(e,t,r){return new e({type:"array",element:t,...vd(r)})}function PPe(e,t,r){const n=vd(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function NPe(e,t,r){return new e({type:"custom",check:"custom",fn:t,...vd(r)})}class yz{constructor(t){this.counter=0,this.metadataRegistry=(t==null?void 0:t.metadata)??wa,this.target=(t==null?void 0:t.target)??"draft-2020-12",this.unrepresentable=(t==null?void 0:t.unrepresentable)??"throw",this.override=(t==null?void 0:t.override)??(()=>{}),this.io=(t==null?void 0:t.io)??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var f,d,h;var n;const i=t._zod.def,a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(t);if(s)return s.count++,r.schemaPath.includes(t)&&(s.cycle=r.path),s.schema;const o={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,o);const l=(d=(f=t._zod).toJSONSchema)==null?void 0:d.call(f);if(l)o.schema=l;else{const m={...r,schemaPath:[...r.schemaPath,t],path:r.path},p=t._zod.parent;if(p)o.ref=p,this.process(p,m),this.seen.get(p).isParent=!0;else{const y=o.schema;switch(i.type){case"string":{const g=y;g.type="string";const{minimum:w,maximum:v,format:x,patterns:b,contentEncoding:S}=t._zod.bag;if(typeof w=="number"&&(g.minLength=w),typeof v=="number"&&(g.maxLength=v),x&&(g.format=a[x]??x,g.format===""&&delete g.format),S&&(g.contentEncoding=S),b&&b.size>0){const T=[...b];T.length===1?g.pattern=T[0].source:T.length>1&&(o.schema.allOf=[...T.map(A=>({...this.target==="draft-7"?{type:"string"}:{},pattern:A.source}))])}break}case"number":{const g=y,{minimum:w,maximum:v,format:x,multipleOf:b,exclusiveMaximum:S,exclusiveMinimum:T}=t._zod.bag;typeof x=="string"&&x.includes("int")?g.type="integer":g.type="number",typeof T=="number"&&(g.exclusiveMinimum=T),typeof w=="number"&&(g.minimum=w,typeof T=="number"&&(T>=w?delete g.minimum:delete g.exclusiveMinimum)),typeof S=="number"&&(g.exclusiveMaximum=S),typeof v=="number"&&(g.maximum=v,typeof S=="number"&&(S<=v?delete g.maximum:delete g.exclusiveMaximum)),typeof b=="number"&&(g.multipleOf=b);break}case"boolean":{const g=y;g.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const g=y,{minimum:w,maximum:v}=t._zod.bag;typeof w=="number"&&(g.minItems=w),typeof v=="number"&&(g.maxItems=v),g.type="array",g.items=this.process(i.element,{...m,path:[...m.path,"items"]});break}case"object":{const g=y;g.type="object",g.properties={};const w=i.shape;for(const b in w)g.properties[b]=this.process(w[b],{...m,path:[...m.path,"properties",b]});const v=new Set(Object.keys(w)),x=new Set([...v].filter(b=>{const S=i.shape[b]._zod;return this.io==="input"?S.optin===void 0:S.optout===void 0}));x.size>0&&(g.required=Array.from(x)),((h=i.catchall)==null?void 0:h._zod.def.type)==="never"?g.additionalProperties=!1:i.catchall?i.catchall&&(g.additionalProperties=this.process(i.catchall,{...m,path:[...m.path,"additionalProperties"]})):this.io==="output"&&(g.additionalProperties=!1);break}case"union":{const g=y;g.anyOf=i.options.map((w,v)=>this.process(w,{...m,path:[...m.path,"anyOf",v]}));break}case"intersection":{const g=y,w=this.process(i.left,{...m,path:[...m.path,"allOf",0]}),v=this.process(i.right,{...m,path:[...m.path,"allOf",1]}),x=S=>"allOf"in S&&Object.keys(S).length===1,b=[...x(w)?w.allOf:[w],...x(v)?v.allOf:[v]];g.allOf=b;break}case"tuple":{const g=y;g.type="array";const w=i.items.map((b,S)=>this.process(b,{...m,path:[...m.path,"prefixItems",S]}));if(this.target==="draft-2020-12"?g.prefixItems=w:g.items=w,i.rest){const b=this.process(i.rest,{...m,path:[...m.path,"items"]});this.target==="draft-2020-12"?g.items=b:g.additionalItems=b}i.rest&&(g.items=this.process(i.rest,{...m,path:[...m.path,"items"]}));const{minimum:v,maximum:x}=t._zod.bag;typeof v=="number"&&(g.minItems=v),typeof x=="number"&&(g.maxItems=x);break}case"record":{const g=y;g.type="object",g.propertyNames=this.process(i.keyType,{...m,path:[...m.path,"propertyNames"]}),g.additionalProperties=this.process(i.valueType,{...m,path:[...m.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const g=y,w=WOe(i.entries);w.every(v=>typeof v=="number")&&(g.type="number"),w.every(v=>typeof v=="string")&&(g.type="string"),g.enum=w;break}case"literal":{const g=y,w=[];for(const v of i.values)if(v===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof v=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");w.push(Number(v))}else w.push(v);if(w.length!==0)if(w.length===1){const v=w[0];g.type=v===null?"null":typeof v,g.const=v}else w.every(v=>typeof v=="number")&&(g.type="number"),w.every(v=>typeof v=="string")&&(g.type="string"),w.every(v=>typeof v=="boolean")&&(g.type="string"),w.every(v=>v===null)&&(g.type="null"),g.enum=w;break}case"file":{const g=y,w={type:"string",format:"binary",contentEncoding:"binary"},{minimum:v,maximum:x,mime:b}=t._zod.bag;v!==void 0&&(w.minLength=v),x!==void 0&&(w.maxLength=x),b?b.length===1?(w.contentMediaType=b[0],Object.assign(g,w)):g.anyOf=b.map(S=>({...w,contentMediaType:S})):Object.assign(g,w);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const g=this.process(i.innerType,m);y.anyOf=[g,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,m),o.ref=i.innerType;break}case"success":{const g=y;g.type="boolean";break}case"default":{this.process(i.innerType,m),o.ref=i.innerType,y.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,m),o.ref=i.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,m),o.ref=i.innerType;let g;try{g=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=g;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const g=y,w=t._zod.pattern;if(!w)throw new Error("Pattern not found in template literal");g.type="string",g.pattern=w.source;break}case"pipe":{const g=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(g,m),o.ref=g;break}case"readonly":{this.process(i.innerType,m),o.ref=i.innerType,y.readOnly=!0;break}case"promise":{this.process(i.innerType,m),o.ref=i.innerType;break}case"optional":{this.process(i.innerType,m),o.ref=i.innerType;break}case"lazy":{const g=t._zod.innerType;this.process(g,m),o.ref=g;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const c=this.metadataRegistry.get(t);return c&&Object.assign(o.schema,c),this.io==="input"&&Ji(t)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((n=o.schema).default??(n.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(t).schema}emit(t,r){var u,f,d,h,m,p;const n={cycles:(r==null?void 0:r.cycles)??"ref",reused:(r==null?void 0:r.reused)??"inline",external:(r==null?void 0:r.external)??void 0},i=this.seen.get(t);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=y=>{var b;const g=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const S=(b=n.external.registry.get(y[0]))==null?void 0:b.id,T=n.external.uri??(O=>O);if(S)return{ref:T(S)};const A=y[1].defId??y[1].schema.id??`schema${this.counter++}`;return y[1].defId=A,{defId:A,ref:`${T("__shared")}#/${g}/${A}`}}if(y[1]===i)return{ref:"#"};const v=`#/${g}/`,x=y[1].schema.id??`__schema${this.counter++}`;return{defId:x,ref:v+x}},s=y=>{if(y[1].schema.$ref)return;const g=y[1],{ref:w,defId:v}=a(y);g.def={...g.schema},v&&(g.defId=v);const x=g.schema;for(const b in x)delete x[b];x.$ref=w};if(n.cycles==="throw")for(const y of this.seen.entries()){const g=y[1];if(g.cycle)throw new Error(`Cycle detected: #/${(u=g.cycle)==null?void 0:u.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const y of this.seen.entries()){const g=y[1];if(t===y[0]){s(y);continue}if(n.external){const v=(f=n.external.registry.get(y[0]))==null?void 0:f.id;if(t!==y[0]&&v){s(y);continue}}if((d=this.metadataRegistry.get(y[0]))==null?void 0:d.id){s(y);continue}if(g.cycle){s(y);continue}if(g.count>1&&n.reused==="ref"){s(y);continue}}const o=(y,g)=>{const w=this.seen.get(y),v=w.def??w.schema,x={...v};if(w.ref===null)return;const b=w.ref;if(w.ref=null,b){o(b,g);const S=this.seen.get(b).schema;S.$ref&&g.target==="draft-7"?(v.allOf=v.allOf??[],v.allOf.push(S)):(Object.assign(v,S),Object.assign(v,x))}w.isParent||this.override({zodSchema:y,jsonSchema:v,path:w.path??[]})};for(const y of[...this.seen.entries()].reverse())o(y[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(h=n.external)!=null&&h.uri){const y=(m=n.external.registry.get(t))==null?void 0:m.id;if(!y)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(y)}Object.assign(l,i.def);const c=((p=n.external)==null?void 0:p.defs)??{};for(const y of this.seen.entries()){const g=y[1];g.def&&g.defId&&(c[g.defId]=g.def)}n.external||Object.keys(c).length>0&&(this.target==="draft-2020-12"?l.$defs=c:l.definitions=c);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function vz(e,t){if(e instanceof aie){const n=new yz(t),i={};for(const o of e._idmap.entries()){const[l,c]=o;n.process(c)}const a={},s={registry:e,uri:t==null?void 0:t.uri,defs:i};for(const o of e._idmap.entries()){const[l,c]=o;a[l]=n.emit(c,{...t,external:s})}if(Object.keys(i).length>0){const o=n.target==="draft-2020-12"?"$defs":"definitions";a.__shared={[o]:i}}return{schemas:a}}const r=new yz(t);return r.process(e),r.emit(e,t)}function Ji(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const i=e._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Ji(i.element,r);case"object":{for(const a in i.shape)if(Ji(i.shape[a],r))return!0;return!1}case"union":{for(const a of i.options)if(Ji(a,r))return!0;return!1}case"intersection":return Ji(i.left,r)||Ji(i.right,r);case"tuple":{for(const a of i.items)if(Ji(a,r))return!0;return!!(i.rest&&Ji(i.rest,r))}case"record":return Ji(i.keyType,r)||Ji(i.valueType,r);case"map":return Ji(i.keyType,r)||Ji(i.valueType,r);case"set":return Ji(i.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Ji(i.innerType,r);case"lazy":return Ji(i.getter(),r);case"default":return Ji(i.innerType,r);case"prefault":return Ji(i.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return Ji(i.in,r)||Ji(i.out,r);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${i.type}`)}function ti(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("_zod"in t))return!1;const r=t._zod;return typeof r=="object"&&r!==null&&"def"in r}function Wi(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("_def"in t)||"_zod"in t)return!1;const r=t._def;return typeof r=="object"&&r!=null&&"typeName"in r}function IPe(e){return ti(e)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),Wi(e)}function dp(e){return!e||typeof e!="object"||Array.isArray(e)?!1:!!(ti(e)||Wi(e))}function sie(e){return typeof e=="object"&&e!==null&&"_def"in e&&typeof e._def=="object"&&e._def!==null&&"typeName"in e._def&&e._def.typeName==="ZodLiteral"}function oie(e){return ti(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="literal":!1}function RPe(e){return!!(sie(e)||oie(e))}async function n$(e,t){if(ti(e))try{return{success:!0,data:await rie(e,t)}}catch(r){return{success:!1,error:r}}if(Wi(e))return await e.safeParseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function RC(e,t){if(ti(e))return await rie(e,t);if(Wi(e))return await e.parseAsync(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function LPe(e,t){if(ti(e))try{return{success:!0,data:t$(e,t)}}catch(r){return{success:!1,error:r}}if(Wi(e))return e.safeParse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function _A(e,t){if(ti(e))return t$(e,t);if(Wi(e))return e.parse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function bb(e){var t;if(ti(e))return(t=wa.get(e))==null?void 0:t.description;if(Wi(e)||"description"in e&&typeof e.description=="string")return e.description}function MPe(e){if(!dp(e))return!1;if(Wi(e)){const t=e._def;if(t.typeName==="ZodObject"){const r=e;return!r.shape||Object.keys(r.shape).length===0}if(t.typeName==="ZodRecord")return!0}if(ti(e)){const t=e._zod.def;if(t.type==="object"){const r=e;return!r.shape||Object.keys(r.shape).length===0}if(t.type==="record")return!0}return typeof e=="object"&&e!==null&&!("shape"in e)}function i$(e){return dp(e)?Wi(e)?e._def.typeName==="ZodString":ti(e)?e._zod.def.type==="string":!1:!1}function a$(e){return typeof e=="object"&&e!==null&&"_def"in e&&typeof e._def=="object"&&e._def!==null&&"typeName"in e._def&&e._def.typeName==="ZodObject"}function Nu(e){return ti(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="object":!1}function LC(e){return ti(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="array":!1}function lie(e){return ti(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="optional":!1}function cie(e){return ti(e)?typeof e=="object"&&e!==null&&"_zod"in e&&typeof e._zod=="object"&&e._zod!==null&&"def"in e._zod&&typeof e._zod.def=="object"&&e._zod.def!==null&&"type"in e._zod.def&&e._zod.def.type==="nullable":!1}function yl(e){return!!(a$(e)||Nu(e))}function _b(e){if(Wi(e))return e.shape;if(ti(e))return e._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function uie(e,t){if(Wi(e))return e.extend(t);if(ti(e))return qOe(e,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function s$(e){if(Wi(e))return e.partial();if(ti(e))return KOe(r$,e);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function zT(e,t=!1){if(Wi(e))return e.strict();if(Nu(e)){const r=e._zod.def.shape;if(t)for(const[a,s]of Object.entries(e._zod.def.shape)){if(Nu(s)){const l=zT(s,t);r[a]=l}else if(LC(s)){let l=s._zod.def.element;Nu(l)&&(l=zT(l,t)),r[a]=El(s,{...s._zod.def,element:l})}else r[a]=s;const o=wa.get(s);o&&wa.add(r[a],o)}const n=El(e,{...e._zod.def,shape:r,catchall:APe(cPe)}),i=wa.get(e);return i&&wa.add(n,i),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function UR(e,t=!1){if(a$(e))return e.passthrough();if(Nu(e)){const r=e._zod.def.shape;if(t)for(const[a,s]of Object.entries(e._zod.def.shape)){if(Nu(s)){const l=UR(s,t);r[a]=l}else if(LC(s)){let l=s._zod.def.element;Nu(l)&&(l=UR(l,t)),r[a]=El(s,{...s._zod.def,element:l})}else r[a]=s;const o=wa.get(s);o&&wa.add(r[a],o)}const n=El(e,{...e._zod.def,shape:r,catchall:EPe(lPe)}),i=wa.get(e);return i&&wa.add(n,i),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function fie(e){if(Wi(e))try{const t=e.parse(void 0);return()=>t}catch{return}if(ti(e))try{const t=t$(e,void 0);return()=>t}catch{return}}function DPe(e){return Wi(e)&&"typeName"in e._def&&e._def.typeName==="ZodEffects"}function jPe(e){return ti(e)&&e._zod.def.type==="pipe"}function Jp(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(Wi(e))return DPe(e)?Jp(e._def.schema,t,r):e;if(ti(e)){let i=e;if(jPe(e)&&(i=Jp(e._zod.def.in,t,r)),t){if(Nu(i)){const s={};for(const[o,l]of Object.entries(i._zod.def.shape))s[o]=Jp(l,t,r);i=El(i,{...i._zod.def,shape:s})}else if(LC(i)){const s=Jp(i._zod.def.element,t,r);i=El(i,{...i._zod.def,element:s})}else if(lie(i)){const s=Jp(i._zod.def.innerType,t,r);i=El(i,{...i._zod.def,innerType:s})}else if(cie(i)){const s=Jp(i._zod.def.innerType,t,r);i=El(i,{...i._zod.def,innerType:s})}}const a=wa.get(e);return a&&wa.add(i,a),r.set(e,i),i}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function die(e,t=!1){return Jp(e,t,new WeakMap)}function $Pe(e,t){if(Wi(e)){const r=_b(e),n={};for(const[i,a]of Object.entries(r))t(i,a)?n[i]=a.optional():n[i]=a;return e.extend(n)}if(ti(e)){const r=_b(e),n={...e._zod.def.shape};for(const[s,o]of Object.entries(r))t(s,o)&&(n[s]=new r$({type:"optional",innerType:o}));const i=El(e,{...e._zod.def,shape:n}),a=wa.get(e);return a&&wa.add(i,a),i}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function hie(e){return e instanceof Error&&(e.constructor.name==="ZodError"||e.constructor.name==="$ZodError")}var pie={};Gt(pie,{extendInteropZodObject:()=>uie,getInteropZodDefaultGetter:()=>fie,getInteropZodObjectShape:()=>_b,getSchemaDescription:()=>bb,interopParse:()=>_A,interopParseAsync:()=>RC,interopSafeParse:()=>LPe,interopSafeParseAsync:()=>n$,interopZodObjectMakeFieldsOptional:()=>$Pe,interopZodObjectPartial:()=>s$,interopZodObjectPassthrough:()=>UR,interopZodObjectStrict:()=>zT,interopZodTransformInputSchema:()=>die,isInteropZodError:()=>hie,isInteropZodLiteral:()=>RPe,isInteropZodObject:()=>yl,isInteropZodSchema:()=>dp,isShapelessZodSchema:()=>MPe,isSimpleStringZodSchema:()=>i$,isZodArrayV4:()=>LC,isZodLiteralV3:()=>sie,isZodLiteralV4:()=>oie,isZodNullableV4:()=>cie,isZodObjectV3:()=>a$,isZodObjectV4:()=>Nu,isZodOptionalV4:()=>lie,isZodSchema:()=>IPe,isZodSchemaV3:()=>Wi,isZodSchemaV4:()=>ti});const FPe=Symbol("Let zodToJsonSchema decide on which parser to use"),BPe={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},UPe=e=>({...BPe,...e}),zPe=e=>{const t=UPe(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},mie=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function Yo(e){if(e.target!=="openAi")return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:e.$refStrategy==="relative"?mie(t,e.currentPath):t.join("/")}}function gie(e,t,r,n){n!=null&&n.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function an(e,t,r,n,i){e[t]=r,gie(e,t,n,i)}var Kr;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const a={};for(const s of i)a[s]=s;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),s={};for(const o of a)s[o]=i[o];return e.objectValues(s)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&a.push(s);return a},e.find=(i,a)=>{for(const s of i)if(a(s))return s},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(a)}e.joinValues=n,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Kr||(Kr={}));var wz;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(wz||(wz={}));const Nt=Kr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ih=e=>{switch(typeof e){case"undefined":return Nt.undefined;case"string":return Nt.string;case"number":return Number.isNaN(e)?Nt.nan:Nt.number;case"boolean":return Nt.boolean;case"function":return Nt.function;case"bigint":return Nt.bigint;case"symbol":return Nt.symbol;case"object":return Array.isArray(e)?Nt.array:e===null?Nt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Nt.promise:typeof Map<"u"&&e instanceof Map?Nt.map:typeof Set<"u"&&e instanceof Set?Nt.set:typeof Date<"u"&&e instanceof Date?Nt.date:Nt.object;default:return Nt.unknown}},ut=Kr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class td extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(a){return a.message},n={_errors:[]},i=a=>{for(const s of a.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let o=n,l=0;for(;l<s.path.length;){const c=s.path[l];l===s.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(s))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),n}static assert(t){if(!(t instanceof td))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];r[a]=r[a]||[],r[a].push(t(i))}else n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}td.create=e=>new td(e);const zR=(e,t)=>{let r;switch(e.code){case ut.invalid_type:e.received===Nt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case ut.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Kr.jsonStringifyReplacer)}`;break;case ut.unrecognized_keys:r=`Unrecognized key(s) in object: ${Kr.joinValues(e.keys,", ")}`;break;case ut.invalid_union:r="Invalid input";break;case ut.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Kr.joinValues(e.options)}`;break;case ut.invalid_enum_value:r=`Invalid enum value. Expected ${Kr.joinValues(e.options)}, received '${e.received}'`;break;case ut.invalid_arguments:r="Invalid function arguments";break;case ut.invalid_return_type:r="Invalid function return type";break;case ut.invalid_date:r="Invalid date";break;case ut.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Kr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case ut.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case ut.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case ut.custom:r="Invalid input";break;case ut.invalid_intersection_types:r="Intersection results could not be merged";break;case ut.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ut.not_finite:r="Number must be finite";break;default:r=t.defaultError,Kr.assertNever(e)}return{message:r}};let VPe=zR;function WPe(){return VPe}const HPe=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let o="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)o=c(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}};function bt(e,t){const r=WPe(),n=HPe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===zR?void 0:zR].filter(i=>!!i)});e.common.issues.push(n)}class Xo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return pr;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const a=await i.key,s=await i.value;n.push({key:a,value:s})}return Xo.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:a,value:s}=i;if(a.status==="aborted"||s.status==="aborted")return pr;a.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[a.value]=s.value)}return{status:t.value,value:n}}}const pr=Object.freeze({status:"aborted"}),$w=e=>({status:"dirty",value:e}),Bl=e=>({status:"valid",value:e}),xz=e=>e.status==="aborted",bz=e=>e.status==="dirty",Jy=e=>e.status==="valid",VT=e=>typeof Promise<"u"&&e instanceof Promise;var Mt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Mt||(Mt={}));class Zh{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _z=(e,t)=>{if(Jy(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new td(e.common.issues);return this._error=r,this._error}}};function Tr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,o)=>{const{message:l}=e;return s.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??n??o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:l??r??o.defaultError}},description:i}}let Gr=class{get description(){return this._def.description}_getType(t){return ih(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:ih(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Xo,ctx:{common:t.parent.common,data:t.data,parsedType:ih(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(VT(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ih(t)},i=this._parseSync({data:t,path:n.path,parent:n});return _z(n,i)}"~validate"(t){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ih(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:r});return Jy(a)?{value:a.value}:{issues:r.common.issues}}catch(a){(i=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(a=>Jy(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ih(t)},i=this._parse({data:t,path:n.path,parent:n}),a=await(VT(i)?i:Promise.resolve(i));return _z(n,a)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const s=t(i),o=()=>a.addIssue({code:ut.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new tv({schema:this,typeName:mt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Lh.create(this,this._def)}nullable(){return rv.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qy.create(this)}promise(){return KT.create(this,this._def)}or(t){return GT.create([this,t],this._def)}and(t){return qT.create(this,t,this._def)}transform(t){return new tv({...Tr(this._def),schema:this,typeName:mt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new WR({...Tr(this._def),innerType:this,defaultValue:r,typeName:mt.ZodDefault})}brand(){return new pNe({typeName:mt.ZodBranded,type:this,...Tr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new HR({...Tr(this._def),innerType:this,catchValue:r,typeName:mt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return o$.create(this,t)}readonly(){return GR.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const GPe=/^c[^\s-]{8,}$/i,qPe=/^[0-9a-z]+$/,KPe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YPe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,XPe=/^[a-z0-9_-]{21}$/i,ZPe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,JPe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,QPe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eNe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qN;const tNe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rNe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nNe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iNe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aNe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,sNe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yie="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",oNe=new RegExp(`^${yie}$`);function vie(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function lNe(e){return new RegExp(`^${vie(e)}$`)}function cNe(e){let t=`${yie}T${vie(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function uNe(e,t){return!!((t==="v4"||!t)&&tNe.test(e)||(t==="v6"||!t)&&nNe.test(e))}function fNe(e,t){if(!ZPe.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function dNe(e,t){return!!((t==="v4"||!t)&&rNe.test(e)||(t==="v6"||!t)&&iNe.test(e))}class vh extends Gr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Nt.string){const a=this._getOrReturnCtx(t);return bt(a,{code:ut.invalid_type,expected:Nt.string,received:a.parsedType}),pr}const n=new Xo;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const s=t.data.length>a.value,o=t.data.length<a.value;(s||o)&&(i=this._getOrReturnCtx(t,i),s?bt(i,{code:ut.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&bt(i,{code:ut.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")QPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"email",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")qN||(qN=new RegExp(eNe,"u")),qN.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"emoji",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")YPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"uuid",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")XPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"nanoid",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")GPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"cuid",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")qPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"cuid2",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")KPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"ulid",code:ut.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),bt(i,{validation:"url",code:ut.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"regex",code:ut.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?cNe(a).test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?oNe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?lNe(a).test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?JPe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"duration",code:ut.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?uNe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"ip",code:ut.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?fNe(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"jwt",code:ut.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?dNe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"cidr",code:ut.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?aNe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"base64",code:ut.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?sNe.test(t.data)||(i=this._getOrReturnCtx(t,i),bt(i,{validation:"base64url",code:ut.invalid_string,message:a.message}),n.dirty()):Kr.assertNever(a);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:ut.invalid_string,...Mt.errToObj(n)})}_addCheck(t){return new vh({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Mt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Mt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Mt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Mt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Mt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Mt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Mt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Mt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Mt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Mt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Mt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Mt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Mt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Mt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Mt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Mt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Mt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Mt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Mt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Mt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Mt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Mt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Mt.errToObj(r)})}nonempty(t){return this.min(1,Mt.errToObj(t))}trim(){return new vh({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vh({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vh({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}vh.create=e=>new vh({checks:[],typeName:mt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Tr(e)});function hNe(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,a=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return a%s/10**i}class Sb extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Nt.number){const a=this._getOrReturnCtx(t);return bt(a,{code:ut.invalid_type,expected:Nt.number,received:a.parsedType}),pr}let n;const i=new Xo;for(const a of this._def.checks)a.kind==="int"?Kr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?hNe(t.data,a.value)!==0&&(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.not_finite,message:a.message}),i.dirty()):Kr.assertNever(a);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Mt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Mt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Mt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Mt.toString(r))}setLimit(t,r,n,i){return new Sb({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Mt.toString(i)}]})}_addCheck(t){return new Sb({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Mt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Mt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Mt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Mt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Mt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Mt.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Sb.create=e=>new Sb({checks:[],typeName:mt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Tr(e)});class Eb extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Nt.bigint)return this._getInvalidInput(t);let n;const i=new Xo;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),bt(n,{code:ut.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Kr.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return bt(r,{code:ut.invalid_type,expected:Nt.bigint,received:r.parsedType}),pr}gte(t,r){return this.setLimit("min",t,!0,Mt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Mt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Mt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Mt.toString(r))}setLimit(t,r,n,i){return new Eb({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Mt.toString(i)}]})}_addCheck(t){return new Eb({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Mt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Mt.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Eb.create=e=>new Eb({checks:[],typeName:mt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Tr(e)});class Sz extends Gr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Nt.boolean){const n=this._getOrReturnCtx(t);return bt(n,{code:ut.invalid_type,expected:Nt.boolean,received:n.parsedType}),pr}return Bl(t.data)}}Sz.create=e=>new Sz({typeName:mt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Tr(e)});class WT extends Gr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Nt.date){const a=this._getOrReturnCtx(t);return bt(a,{code:ut.invalid_type,expected:Nt.date,received:a.parsedType}),pr}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return bt(a,{code:ut.invalid_date}),pr}const n=new Xo;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),bt(i,{code:ut.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):Kr.assertNever(a);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new WT({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Mt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Mt.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}WT.create=e=>new WT({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:mt.ZodDate,...Tr(e)});class Ez extends Gr{_parse(t){if(this._getType(t)!==Nt.symbol){const n=this._getOrReturnCtx(t);return bt(n,{code:ut.invalid_type,expected:Nt.symbol,received:n.parsedType}),pr}return Bl(t.data)}}Ez.create=e=>new Ez({typeName:mt.ZodSymbol,...Tr(e)});class Az extends Gr{_parse(t){if(this._getType(t)!==Nt.undefined){const n=this._getOrReturnCtx(t);return bt(n,{code:ut.invalid_type,expected:Nt.undefined,received:n.parsedType}),pr}return Bl(t.data)}}Az.create=e=>new Az({typeName:mt.ZodUndefined,...Tr(e)});class Tz extends Gr{_parse(t){if(this._getType(t)!==Nt.null){const n=this._getOrReturnCtx(t);return bt(n,{code:ut.invalid_type,expected:Nt.null,received:n.parsedType}),pr}return Bl(t.data)}}Tz.create=e=>new Tz({typeName:mt.ZodNull,...Tr(e)});let HT=class extends Gr{constructor(){super(...arguments),this._any=!0}_parse(t){return Bl(t.data)}};HT.create=e=>new HT({typeName:mt.ZodAny,...Tr(e)});class kz extends Gr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Bl(t.data)}}kz.create=e=>new kz({typeName:mt.ZodUnknown,...Tr(e)});class Jh extends Gr{_parse(t){const r=this._getOrReturnCtx(t);return bt(r,{code:ut.invalid_type,expected:Nt.never,received:r.parsedType}),pr}}Jh.create=e=>new Jh({typeName:mt.ZodNever,...Tr(e)});class Cz extends Gr{_parse(t){if(this._getType(t)!==Nt.undefined){const n=this._getOrReturnCtx(t);return bt(n,{code:ut.invalid_type,expected:Nt.void,received:n.parsedType}),pr}return Bl(t.data)}}Cz.create=e=>new Cz({typeName:mt.ZodVoid,...Tr(e)});let Qy=class SA extends Gr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Nt.array)return bt(r,{code:ut.invalid_type,expected:Nt.array,received:r.parsedType}),pr;if(i.exactLength!==null){const s=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(s||o)&&(bt(r,{code:s?ut.too_big:ut.too_small,minimum:o?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(bt(r,{code:ut.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(bt(r,{code:ut.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,o)=>i.type._parseAsync(new Zh(r,s,r.path,o)))).then(s=>Xo.mergeArray(n,s));const a=[...r.data].map((s,o)=>i.type._parseSync(new Zh(r,s,r.path,o)));return Xo.mergeArray(n,a)}get element(){return this._def.type}min(t,r){return new SA({...this._def,minLength:{value:t,message:Mt.toString(r)}})}max(t,r){return new SA({...this._def,maxLength:{value:t,message:Mt.toString(r)}})}length(t,r){return new SA({...this._def,exactLength:{value:t,message:Mt.toString(r)}})}nonempty(t){return this.min(1,t)}};Qy.create=(e,t)=>new Qy({type:e,minLength:null,maxLength:null,exactLength:null,typeName:mt.ZodArray,...Tr(t)});function Tg(e){if(e instanceof Mi){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Lh.create(Tg(n))}return new Mi({...e._def,shape:()=>t})}else return e instanceof Qy?new Qy({...e._def,type:Tg(e.element)}):e instanceof Lh?Lh.create(Tg(e.unwrap())):e instanceof rv?rv.create(Tg(e.unwrap())):e instanceof J0?J0.create(e.items.map(t=>Tg(t))):e}class Mi extends Gr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Kr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Nt.object){const c=this._getOrReturnCtx(t);return bt(c,{code:ut.invalid_type,expected:Nt.object,received:c.parsedType}),pr}const{status:n,ctx:i}=this._processInputParams(t),{shape:a,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Jh&&this._def.unknownKeys==="strip"))for(const c in i.data)s.includes(c)||o.push(c);const l=[];for(const c of s){const u=a[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Zh(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Jh){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")o.length>0&&(bt(i,{code:ut.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Zh(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,d=await u.value;c.push({key:f,value:d,alwaysSet:u.alwaysSet})}return c}).then(c=>Xo.mergeObjectSync(n,c)):Xo.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(t){return Mt.errToObj,new Mi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var a,s;const i=((s=(a=this._def).errorMap)==null?void 0:s.call(a,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:Mt.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new Mi({...this._def,unknownKeys:"strip"})}passthrough(){return new Mi({...this._def,unknownKeys:"passthrough"})}extend(t){return new Mi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Mi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:mt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Mi({...this._def,catchall:t})}pick(t){const r={};for(const n of Kr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Mi({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Kr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Mi({...this._def,shape:()=>r})}deepPartial(){return Tg(this)}partial(t){const r={};for(const n of Kr.objectKeys(this.shape)){const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}return new Mi({...this._def,shape:()=>r})}required(t){const r={};for(const n of Kr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Lh;)a=a._def.innerType;r[n]=a}return new Mi({...this._def,shape:()=>r})}keyof(){return wie(Kr.objectKeys(this.shape))}}Mi.create=(e,t)=>new Mi({shape:()=>e,unknownKeys:"strip",catchall:Jh.create(),typeName:mt.ZodObject,...Tr(t)});Mi.strictCreate=(e,t)=>new Mi({shape:()=>e,unknownKeys:"strict",catchall:Jh.create(),typeName:mt.ZodObject,...Tr(t)});Mi.lazycreate=(e,t)=>new Mi({shape:e,unknownKeys:"strip",catchall:Jh.create(),typeName:mt.ZodObject,...Tr(t)});let GT=class extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const s=a.map(o=>new td(o.ctx.common.issues));return bt(r,{code:ut.invalid_union,unionErrors:s}),pr}if(r.common.async)return Promise.all(n.map(async a=>{const s={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let a;const s=[];for(const l of n){const c={...r,common:{...r.common,issues:[]},parent:null},u=l._parseSync({data:r.data,path:r.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:c}),c.common.issues.length&&s.push(c.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(l=>new td(l));return bt(r,{code:ut.invalid_union,unionErrors:o}),pr}}get options(){return this._def.options}};GT.create=(e,t)=>new GT({options:e,typeName:mt.ZodUnion,...Tr(t)});function VR(e,t){const r=ih(e),n=ih(t);if(e===t)return{valid:!0,data:e};if(r===Nt.object&&n===Nt.object){const i=Kr.objectKeys(t),a=Kr.objectKeys(e).filter(o=>i.indexOf(o)!==-1),s={...e,...t};for(const o of a){const l=VR(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(r===Nt.array&&n===Nt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const s=e[a],o=t[a],l=VR(s,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Nt.date&&n===Nt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let qT=class extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(a,s)=>{if(xz(a)||xz(s))return pr;const o=VR(a.value,s.value);return o.valid?((bz(a)||bz(s))&&r.dirty(),{status:r.value,value:o.data}):(bt(n,{code:ut.invalid_intersection_types}),pr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,s])=>i(a,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};qT.create=(e,t,r)=>new qT({left:e,right:t,typeName:mt.ZodIntersection,...Tr(r)});class J0 extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Nt.array)return bt(n,{code:ut.invalid_type,expected:Nt.array,received:n.parsedType}),pr;if(n.data.length<this._def.items.length)return bt(n,{code:ut.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pr;!this._def.rest&&n.data.length>this._def.items.length&&(bt(n,{code:ut.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Zh(n,s,n.path,o)):null}).filter(s=>!!s);return n.common.async?Promise.all(a).then(s=>Xo.mergeArray(r,s)):Xo.mergeArray(r,a)}get items(){return this._def.items}rest(t){return new J0({...this._def,rest:t})}}J0.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new J0({items:e,typeName:mt.ZodTuple,rest:null,...Tr(t)})};class Oz extends Gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Nt.map)return bt(n,{code:ut.invalid_type,expected:Nt.map,received:n.parsedType}),pr;const i=this._def.keyType,a=this._def.valueType,s=[...n.data.entries()].map(([o,l],c)=>({key:i._parse(new Zh(n,o,n.path,[c,"key"])),value:a._parse(new Zh(n,l,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return pr;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(c.value,u.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const l of s){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return pr;(c.status==="dirty"||u.status==="dirty")&&r.dirty(),o.set(c.value,u.value)}return{status:r.value,value:o}}}}Oz.create=(e,t,r)=>new Oz({valueType:t,keyType:e,typeName:mt.ZodMap,...Tr(r)});class Ab extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Nt.set)return bt(n,{code:ut.invalid_type,expected:Nt.set,received:n.parsedType}),pr;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(bt(n,{code:ut.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(bt(n,{code:ut.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function s(l){const c=new Set;for(const u of l){if(u.status==="aborted")return pr;u.status==="dirty"&&r.dirty(),c.add(u.value)}return{status:r.value,value:c}}const o=[...n.data.values()].map((l,c)=>a._parse(new Zh(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,r){return new Ab({...this._def,minSize:{value:t,message:Mt.toString(r)}})}max(t,r){return new Ab({...this._def,maxSize:{value:t,message:Mt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Ab.create=(e,t)=>new Ab({valueType:e,minSize:null,maxSize:null,typeName:mt.ZodSet,...Tr(t)});class Pz extends Gr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Pz.create=(e,t)=>new Pz({getter:e,typeName:mt.ZodLazy,...Tr(t)});class Nz extends Gr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return bt(r,{received:r.data,code:ut.invalid_literal,expected:this._def.value}),pr}return{status:"valid",value:t.data}}get value(){return this._def.value}}Nz.create=(e,t)=>new Nz({value:e,typeName:mt.ZodLiteral,...Tr(t)});function wie(e,t){return new ev({values:e,typeName:mt.ZodEnum,...Tr(t)})}class ev extends Gr{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return bt(r,{expected:Kr.joinValues(n),received:r.parsedType,code:ut.invalid_type}),pr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return bt(r,{received:r.data,code:ut.invalid_enum_value,options:n}),pr}return Bl(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return ev.create(t,{...this._def,...r})}exclude(t,r=this._def){return ev.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}ev.create=wie;class Iz extends Gr{_parse(t){const r=Kr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Nt.string&&n.parsedType!==Nt.number){const i=Kr.objectValues(r);return bt(n,{expected:Kr.joinValues(i),received:n.parsedType,code:ut.invalid_type}),pr}if(this._cache||(this._cache=new Set(Kr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Kr.objectValues(r);return bt(n,{received:n.data,code:ut.invalid_enum_value,options:i}),pr}return Bl(t.data)}get enum(){return this._def.values}}Iz.create=(e,t)=>new Iz({values:e,typeName:mt.ZodNativeEnum,...Tr(t)});class KT extends Gr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Nt.promise&&r.common.async===!1)return bt(r,{code:ut.invalid_type,expected:Nt.promise,received:r.parsedType}),pr;const n=r.parsedType===Nt.promise?r.data:Promise.resolve(r.data);return Bl(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}KT.create=(e,t)=>new KT({type:e,typeName:mt.ZodPromise,...Tr(t)});class tv extends Gr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:s=>{bt(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const s=i.transform(n.data,a);if(n.common.async)return Promise.resolve(s).then(async o=>{if(r.value==="aborted")return pr;const l=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?pr:l.status==="dirty"||r.value==="dirty"?$w(l.value):l});{if(r.value==="aborted")return pr;const o=this._def.schema._parseSync({data:s,path:n.path,parent:n});return o.status==="aborted"?pr:o.status==="dirty"||r.value==="dirty"?$w(o.value):o}}if(i.type==="refinement"){const s=o=>{const l=i.refinement(o,a);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?pr:(o.status==="dirty"&&r.dirty(),s(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?pr:(o.status==="dirty"&&r.dirty(),s(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Jy(s))return pr;const o=i.transform(s.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Jy(s)?Promise.resolve(i.transform(s.value,a)).then(o=>({status:r.value,value:o})):pr);Kr.assertNever(i)}}tv.create=(e,t,r)=>new tv({schema:e,typeName:mt.ZodEffects,effect:t,...Tr(r)});tv.createWithPreprocess=(e,t,r)=>new tv({schema:t,effect:{type:"preprocess",transform:e},typeName:mt.ZodEffects,...Tr(r)});let Lh=class extends Gr{_parse(t){return this._getType(t)===Nt.undefined?Bl(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};Lh.create=(e,t)=>new Lh({innerType:e,typeName:mt.ZodOptional,...Tr(t)});let rv=class extends Gr{_parse(t){return this._getType(t)===Nt.null?Bl(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}};rv.create=(e,t)=>new rv({innerType:e,typeName:mt.ZodNullable,...Tr(t)});let WR=class extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Nt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};WR.create=(e,t)=>new WR({innerType:e,typeName:mt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Tr(t)});let HR=class extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return VT(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new td(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new td(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};HR.create=(e,t)=>new HR({innerType:e,typeName:mt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Tr(t)});class Rz extends Gr{_parse(t){if(this._getType(t)!==Nt.nan){const n=this._getOrReturnCtx(t);return bt(n,{code:ut.invalid_type,expected:Nt.nan,received:n.parsedType}),pr}return{status:"valid",value:t.data}}}Rz.create=e=>new Rz({typeName:mt.ZodNaN,...Tr(e)});class pNe extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class o$ extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?pr:a.status==="dirty"?(r.dirty(),$w(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?pr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new o$({in:t,out:r,typeName:mt.ZodPipeline})}}let GR=class extends Gr{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Jy(i)&&(i.value=Object.freeze(i.value)),i);return VT(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};GR.create=(e,t)=>new GR({innerType:e,typeName:mt.ZodReadonly,...Tr(t)});function mNe(e,t={},r){return HT.create()}var mt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(mt||(mt={}));const Tm=vh.create,Lz=HT.create;Jh.create;Qy.create;const hp=Mi.create;GT.create;qT.create;J0.create;ev.create;KT.create;Lh.create;rv.create;function gNe(e,t){var n,i,a;const r={type:"array"};return(n=e.type)!=null&&n._def&&((a=(i=e.type)==null?void 0:i._def)==null?void 0:a.typeName)!==mt.ZodAny&&(r.items=en(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&an(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&an(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(an(r,"minItems",e.exactLength.value,e.exactLength.message,t),an(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function yNe(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":t.target==="jsonSchema7"?n.inclusive?an(r,"minimum",n.value,n.message,t):an(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),an(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?an(r,"maximum",n.value,n.message,t):an(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),an(r,"maximum",n.value,n.message,t));break;case"multipleOf":an(r,"multipleOf",n.value,n.message,t);break}return r}function vNe(){return{type:"boolean"}}function xie(e,t){return en(e.type._def,t)}const wNe=(e,t)=>en(e.innerType._def,t);function bie(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map(i=>bie(e,t,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return xNe(e,t)}}const xNe=(e,t)=>{const r={type:"integer",format:"unix-time"};if(t.target==="openApi3")return r;for(const n of e.checks)switch(n.kind){case"min":an(r,"minimum",n.value,n.message,t);break;case"max":an(r,"maximum",n.value,n.message,t);break}return r};function bNe(e,t){return{...en(e.innerType._def,t),default:e.defaultValue()}}function _Ne(e,t){return t.effectStrategy==="input"?en(e.schema._def,t):Yo(t)}function SNe(e){return{type:"string",enum:Array.from(e.values)}}const ENe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function ANe(e,t){const r=[en(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),en(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a);let n=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return r.forEach(a=>{if(ENe(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else n=void 0;i.push(s)}}),i.length?{allOf:i,...n}:void 0}function TNe(e,t){const r=typeof e.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[e.value]}:{type:r==="bigint"?"integer":r,const:e.value}}let KN;const Jl={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(KN===void 0&&(KN=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),KN),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function _ie(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":an(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":an(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ql(r,"email",n.message,t);break;case"format:idn-email":Ql(r,"idn-email",n.message,t);break;case"pattern:zod":Ss(r,Jl.email,n.message,t);break}break;case"url":Ql(r,"uri",n.message,t);break;case"uuid":Ql(r,"uuid",n.message,t);break;case"regex":Ss(r,n.regex,n.message,t);break;case"cuid":Ss(r,Jl.cuid,n.message,t);break;case"cuid2":Ss(r,Jl.cuid2,n.message,t);break;case"startsWith":Ss(r,RegExp(`^${YN(n.value,t)}`),n.message,t);break;case"endsWith":Ss(r,RegExp(`${YN(n.value,t)}$`),n.message,t);break;case"datetime":Ql(r,"date-time",n.message,t);break;case"date":Ql(r,"date",n.message,t);break;case"time":Ql(r,"time",n.message,t);break;case"duration":Ql(r,"duration",n.message,t);break;case"length":an(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,t),an(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":Ss(r,RegExp(YN(n.value,t)),n.message,t);break;case"ip":n.version!=="v6"&&Ql(r,"ipv4",n.message,t),n.version!=="v4"&&Ql(r,"ipv6",n.message,t);break;case"base64url":Ss(r,Jl.base64url,n.message,t);break;case"jwt":Ss(r,Jl.jwt,n.message,t);break;case"cidr":n.version!=="v6"&&Ss(r,Jl.ipv4Cidr,n.message,t),n.version!=="v4"&&Ss(r,Jl.ipv6Cidr,n.message,t);break;case"emoji":Ss(r,Jl.emoji(),n.message,t);break;case"ulid":Ss(r,Jl.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":Ql(r,"binary",n.message,t);break;case"contentEncoding:base64":an(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":Ss(r,Jl.base64,n.message,t);break}break;case"nanoid":Ss(r,Jl.nanoid,n.message,t);break}return r}function YN(e,t){return t.patternStrategy==="escape"?CNe(e):e}const kNe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function CNe(e){let t="";for(let r=0;r<e.length;r++)kNe.has(e[r])||(t+="\\"),t+=e[r];return t}function Ql(e,t,r,n){var i;e.format||(i=e.anyOf)!=null&&i.some(a=>a.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):an(e,"format",t,r,n)}function Ss(e,t,r,n){var i;e.pattern||(i=e.allOf)!=null&&i.some(a=>a.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:Mz(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):an(e,"pattern",Mz(t,n),r,n)}function Mz(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=r.i?e.source.toLowerCase():e.source;let i="",a=!1,s=!1,o=!1;for(let c=0;c<n.length;c++){if(a){i+=n[c],a=!1;continue}if(r.i){if(s){if(n[c].match(/[a-z]/)){o?(i+=n[c],i+=`${n[c-2]}-${n[c]}`.toUpperCase(),o=!1):n[c+1]==="-"&&((l=n[c+2])!=null&&l.match(/[a-z]/))?(i+=n[c],o=!0):i+=`${n[c]}${n[c].toUpperCase()}`;continue}}else if(n[c].match(/[a-z]/)){i+=`[${n[c]}${n[c].toUpperCase()}]`;continue}}if(r.m){if(n[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[c]==="."){i+=s?`${n[c]}\r
`:`[${n[c]}\r
]`;continue}i+=n[c],n[c]==="\\"?a=!0:s&&n[c]==="]"?s=!1:!s&&n[c]==="["&&(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function Sie(e,t){var n,i,a,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((n=e.keyType)==null?void 0:n._def.typeName)===mt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,u)=>({...c,[u]:en(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",u]})??Yo(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const r={type:"object",additionalProperties:en(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return r;if(((i=e.keyType)==null?void 0:i._def.typeName)===mt.ZodString&&((a=e.keyType._def.checks)!=null&&a.length)){const{type:c,...u}=_ie(e.keyType._def,t);return{...r,propertyNames:u}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===mt.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===mt.ZodBranded&&e.keyType._def.type._def.typeName===mt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...u}=xie(e.keyType._def,t);return{...r,propertyNames:u}}}return r}function ONe(e,t){if(t.mapStrategy==="record")return Sie(e,t);const r=en(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Yo(t),n=en(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Yo(t);return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function PNe(e){const t=e.values,n=Object.keys(e.values).filter(a=>typeof t[t[a]]!="number").map(a=>t[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function NNe(e){return e.target==="openAi"?void 0:{not:Yo({...e,currentPath:[...e.currentPath,"not"]})}}function INe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const YT={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function RNe(e,t){if(t.target==="openApi3")return Dz(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in YT&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((i,a)=>{const s=YT[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":return a._def.value===null?[...i,"null"]:i;case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){const i=n.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:r.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return Dz(e,t)}const Dz=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,i)=>en(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function LNe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:YT[e.innerType._def.typeName],nullable:!0}:{type:[YT[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const n=en(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=en(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function MNe(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",gie(r,"type",n.message,t);break;case"min":t.target==="jsonSchema7"?n.inclusive?an(r,"minimum",n.value,n.message,t):an(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),an(r,"minimum",n.value,n.message,t));break;case"max":t.target==="jsonSchema7"?n.inclusive?an(r,"maximum",n.value,n.message,t):an(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),an(r,"maximum",n.value,n.message,t));break;case"multipleOf":an(r,"multipleOf",n.value,n.message,t);break}return r}function DNe(e,t){const r=t.target==="openAi",n={type:"object",properties:{}},i=[],a=e.shape();for(const o in a){let l=a[o];if(l===void 0||l._def===void 0)continue;let c=$Ne(l);c&&r&&(l._def.typeName==="ZodOptional"&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const u=en(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});u!==void 0&&(n.properties[o]=u,c||i.push(o))}i.length&&(n.required=i);const s=jNe(e,t);return s!==void 0&&(n.additionalProperties=s),n}function jNe(e,t){if(e.catchall._def.typeName!=="ZodNever")return en(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function $Ne(e){try{return e.isOptional()}catch{return!0}}const FNe=(e,t)=>{var n;if(t.currentPath.toString()===((n=t.propertyPath)==null?void 0:n.toString()))return en(e.innerType._def,t);const r=en(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:Yo(t)},r]}:Yo(t)},BNe=(e,t)=>{if(t.pipeStrategy==="input")return en(e.in._def,t);if(t.pipeStrategy==="output")return en(e.out._def,t);const r=en(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=en(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function UNe(e,t){return en(e.type._def,t)}function zNe(e,t){const n={type:"array",uniqueItems:!0,items:en(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&an(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&an(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}function VNe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>en(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:en(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>en(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function WNe(e){return{not:Yo(e)}}function HNe(e){return Yo(e)}const GNe=(e,t)=>en(e.innerType._def,t),qNe=(e,t,r)=>{switch(t){case mt.ZodString:return _ie(e,r);case mt.ZodNumber:return MNe(e,r);case mt.ZodObject:return DNe(e,r);case mt.ZodBigInt:return yNe(e,r);case mt.ZodBoolean:return vNe();case mt.ZodDate:return bie(e,r);case mt.ZodUndefined:return WNe(r);case mt.ZodNull:return INe(r);case mt.ZodArray:return gNe(e,r);case mt.ZodUnion:case mt.ZodDiscriminatedUnion:return RNe(e,r);case mt.ZodIntersection:return ANe(e,r);case mt.ZodTuple:return VNe(e,r);case mt.ZodRecord:return Sie(e,r);case mt.ZodLiteral:return TNe(e,r);case mt.ZodEnum:return SNe(e);case mt.ZodNativeEnum:return PNe(e);case mt.ZodNullable:return LNe(e,r);case mt.ZodOptional:return FNe(e,r);case mt.ZodMap:return ONe(e,r);case mt.ZodSet:return zNe(e,r);case mt.ZodLazy:return()=>e.getter()._def;case mt.ZodPromise:return UNe(e,r);case mt.ZodNaN:case mt.ZodNever:return NNe(r);case mt.ZodEffects:return _Ne(e,r);case mt.ZodAny:return Yo(r);case mt.ZodUnknown:return HNe(r);case mt.ZodDefault:return bNe(e,r);case mt.ZodBranded:return xie(e,r);case mt.ZodReadonly:return GNe(e,r);case mt.ZodCatch:return wNe(e,r);case mt.ZodPipeline:return BNe(e,r);case mt.ZodFunction:case mt.ZodVoid:case mt.ZodSymbol:return;default:return(n=>{})()}};function en(e,t,r=!1){var o;const n=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,n,r);if(l!==FPe)return l}if(n&&!r){const l=KNe(n,t);if(l!==void 0)return l}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const a=qNe(e,e.typeName,t),s=typeof a=="function"?en(a(),t):a;if(s&&YNe(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return i.jsonSchema=s,l}return i.jsonSchema=s,s}const KNe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:mie(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Yo(t)):t.$refStrategy==="seen"?Yo(t):void 0}},YNe=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),XNe=(e,t)=>{const r=zPe(t);let n;const i=en(e._def,r,!1)??Yo(r);r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const a=n?{...i,[r.definitionPath]:n}:i;return r.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function N0(e,t){const r=typeof e;if(r!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(!N0(e[i],t[i]))return!1;return!0}if(r==="object"){if(!e||!t)return e===t;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const s of n)if(!N0(e[s],t[s]))return!1;return!0}return e===t}function cc(e){return encodeURI(ZNe(e))}function ZNe(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const JNe={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},QNe={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},e4e={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let t4e=typeof self<"u"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function wh(e,t=Object.create(null),r=t4e,n=""){if(e&&typeof e=="object"&&!Array.isArray(e)){const a=e.$id||e.id;if(a){const s=new URL(a,r.href);s.hash.length>1?t[s.href]=e:(s.hash="",n===""?r=s:wh(e,t,r))}}else if(e!==!0&&e!==!1)return t;const i=r.href+(n?"#"+n:"");if(t[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(t[i]=e,e===!0||e===!1)return t;if(e.__absolute_uri__===void 0&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:i}),e.$ref&&e.__absolute_ref__===void 0){const a=new URL(e.$ref,r.href);a.hash=a.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:a.href})}if(e.$recursiveRef&&e.__absolute_recursive_ref__===void 0){const a=new URL(e.$recursiveRef,r.href);a.hash=a.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:a.href})}if(e.$anchor){const a=new URL("#"+e.$anchor,r.href);t[a.href]=e}for(let a in e){if(e4e[a])continue;const s=`${n}/${cc(a)}`,o=e[a];if(Array.isArray(o)){if(JNe[a]){const l=o.length;for(let c=0;c<l;c++)wh(o[c],t,r,`${s}/${c}`)}}else if(QNe[a])for(let l in o)wh(o[l],t,r,`${s}/${cc(l)}`);else wh(o,t,r,s)}return t}const r4e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n4e=[0,31,28,31,30,31,30,31,31,30,31,30,31],i4e=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a4e=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,s4e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,o4e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l4e=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,c4e=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,u4e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,f4e=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d4e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,h4e=e=>{if(e[0]==='"')return!1;const[t,r,...n]=e.split("@");return!t||!r||n.length!==0||t.length>64||r.length>253||t[0]==="."||t.endsWith(".")||t.includes("..")||!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t)?!1:r.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},p4e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,m4e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,g4e=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function au(e){return e.test.bind(e)}const jz={date:Eie,time:Aie.bind(void 0,!1),"date-time":w4e,duration:g4e,uri:_4e,"uri-reference":au(s4e),"uri-template":au(o4e),url:au(l4e),email:h4e,hostname:au(a4e),ipv4:au(p4e),ipv6:au(m4e),regex:E4e,uuid:au(c4e),"json-pointer":au(u4e),"json-pointer-uri-fragment":au(f4e),"relative-json-pointer":au(d4e)};function y4e(e){return e%4===0&&(e%100!==0||e%400===0)}function Eie(e){const t=e.match(r4e);if(!t)return!1;const r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&y4e(r)?29:n4e[n])}function Aie(e,t){const r=t.match(i4e);if(!r)return!1;const n=+r[1],i=+r[2],a=+r[3],s=!!r[5];return(n<=23&&i<=59&&a<=59||n==23&&i==59&&a==60)&&(!e||s)}const v4e=/t|\s/i;function w4e(e){const t=e.split(v4e);return t.length==2&&Eie(t[0])&&Aie(!0,t[1])}const x4e=/\/|:/,b4e=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function _4e(e){return x4e.test(e)&&b4e.test(e)}const S4e=/[^\\]\\Z/;function E4e(e){if(S4e.test(e))return!1;try{return new RegExp(e,"u"),!0}catch{return!1}}function A4e(e){let t=0,r=e.length,n=0,i;for(;n<r;)t++,i=e.charCodeAt(n++),i>=55296&&i<=56319&&n<r&&(i=e.charCodeAt(n),(i&64512)==56320&&n++);return t}function Vn(e,t,r="2019-09",n=wh(t),i=!0,a=null,s="#",o="#",l=Object.create(null)){if(t===!0)return{valid:!0,errors:[]};if(t===!1)return{valid:!1,errors:[{instanceLocation:s,keyword:"false",keywordLocation:s,error:"False boolean schema."}]};const c=typeof e;let u;switch(c){case"boolean":case"number":case"string":u=c;break;case"object":e===null?u="null":Array.isArray(e)?u="array":u="object";break;default:throw new Error(`Instances of "${c}" type are not supported.`)}const{$ref:f,$recursiveRef:d,$recursiveAnchor:h,type:m,const:p,enum:y,required:g,not:w,anyOf:v,allOf:x,oneOf:b,if:S,then:T,else:A,format:O,properties:M,patternProperties:P,additionalProperties:N,unevaluatedProperties:V,minProperties:B,maxProperties:G,propertyNames:Z,dependentRequired:J,dependentSchemas:Y,dependencies:U,prefixItems:se,items:ue,additionalItems:I,unevaluatedItems:z,contains:H,minContains:q,maxContains:F,minItems:D,maxItems:re,uniqueItems:K,minimum:le,maximum:xe,exclusiveMinimum:X,exclusiveMaximum:Ie,multipleOf:Re,minLength:ie,maxLength:Te,pattern:Me,__absolute_ref__:tt,__absolute_recursive_ref__:$e}=t,De=[];if(h===!0&&a===null&&(a=t),d==="#"){const qe=a===null?n[$e]:a,Ue=`${o}/$recursiveRef`,Qe=Vn(e,a===null?t:a,r,n,i,qe,s,Ue,l);Qe.valid||De.push({instanceLocation:s,keyword:"$recursiveRef",keywordLocation:Ue,error:"A subschema had errors."},...Qe.errors)}if(f!==void 0){const Ue=n[tt||f];if(Ue===void 0){let Fe=`Unresolved $ref "${f}".`;throw tt&&tt!==f&&(Fe+=`  Absolute URI "${tt}".`),Fe+=`
Known schemas:
- ${Object.keys(n).join(`
- `)}`,new Error(Fe)}const Qe=`${o}/$ref`,Ge=Vn(e,Ue,r,n,i,a,s,Qe,l);if(Ge.valid||De.push({instanceLocation:s,keyword:"$ref",keywordLocation:Qe,error:"A subschema had errors."},...Ge.errors),r==="4"||r==="7")return{valid:De.length===0,errors:De}}if(Array.isArray(m)){let qe=m.length,Ue=!1;for(let Qe=0;Qe<qe;Qe++)if(u===m[Qe]||m[Qe]==="integer"&&u==="number"&&e%1===0&&e===e){Ue=!0;break}Ue||De.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${u}" is invalid. Expected "${m.join('", "')}".`})}else m==="integer"?(u!=="number"||e%1||e!==e)&&De.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${u}" is invalid. Expected "${m}".`}):m!==void 0&&u!==m&&De.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${u}" is invalid. Expected "${m}".`});if(p!==void 0&&(u==="object"||u==="array"?N0(e,p)||De.push({instanceLocation:s,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(p)}.`}):e!==p&&De.push({instanceLocation:s,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(p)}.`})),y!==void 0&&(u==="object"||u==="array"?y.some(qe=>N0(e,qe))||De.push({instanceLocation:s,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`}):y.some(qe=>e===qe)||De.push({instanceLocation:s,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`})),w!==void 0){const qe=`${o}/not`;Vn(e,w,r,n,i,a,s,qe).valid&&De.push({instanceLocation:s,keyword:"not",keywordLocation:qe,error:'Instance matched "not" schema.'})}let nt=[];if(v!==void 0){const qe=`${o}/anyOf`,Ue=De.length;let Qe=!1;for(let Ge=0;Ge<v.length;Ge++){const Fe=v[Ge],at=Object.create(l),Ze=Vn(e,Fe,r,n,i,h===!0?a:null,s,`${qe}/${Ge}`,at);De.push(...Ze.errors),Qe=Qe||Ze.valid,Ze.valid&&nt.push(at)}Qe?De.length=Ue:De.splice(Ue,0,{instanceLocation:s,keyword:"anyOf",keywordLocation:qe,error:"Instance does not match any subschemas."})}if(x!==void 0){const qe=`${o}/allOf`,Ue=De.length;let Qe=!0;for(let Ge=0;Ge<x.length;Ge++){const Fe=x[Ge],at=Object.create(l),Ze=Vn(e,Fe,r,n,i,h===!0?a:null,s,`${qe}/${Ge}`,at);De.push(...Ze.errors),Qe=Qe&&Ze.valid,Ze.valid&&nt.push(at)}Qe?De.length=Ue:De.splice(Ue,0,{instanceLocation:s,keyword:"allOf",keywordLocation:qe,error:"Instance does not match every subschema."})}if(b!==void 0){const qe=`${o}/oneOf`,Ue=De.length,Qe=b.filter((Ge,Fe)=>{const at=Object.create(l),Ze=Vn(e,Ge,r,n,i,h===!0?a:null,s,`${qe}/${Fe}`,at);return De.push(...Ze.errors),Ze.valid&&nt.push(at),Ze.valid}).length;Qe===1?De.length=Ue:De.splice(Ue,0,{instanceLocation:s,keyword:"oneOf",keywordLocation:qe,error:`Instance does not match exactly one subschema (${Qe} matches).`})}if((u==="object"||u==="array")&&Object.assign(l,...nt),S!==void 0){const qe=`${o}/if`;if(Vn(e,S,r,n,i,a,s,qe,l).valid){if(T!==void 0){const Qe=Vn(e,T,r,n,i,a,s,`${o}/then`,l);Qe.valid||De.push({instanceLocation:s,keyword:"if",keywordLocation:qe,error:'Instance does not match "then" schema.'},...Qe.errors)}}else if(A!==void 0){const Qe=Vn(e,A,r,n,i,a,s,`${o}/else`,l);Qe.valid||De.push({instanceLocation:s,keyword:"if",keywordLocation:qe,error:'Instance does not match "else" schema.'},...Qe.errors)}}if(u==="object"){if(g!==void 0)for(const Ge of g)Ge in e||De.push({instanceLocation:s,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${Ge}".`});const qe=Object.keys(e);if(B!==void 0&&qe.length<B&&De.push({instanceLocation:s,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${B} properties.`}),G!==void 0&&qe.length>G&&De.push({instanceLocation:s,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${G} properties.`}),Z!==void 0){const Ge=`${o}/propertyNames`;for(const Fe in e){const at=`${s}/${cc(Fe)}`,Ze=Vn(Fe,Z,r,n,i,a,at,Ge);Ze.valid||De.push({instanceLocation:s,keyword:"propertyNames",keywordLocation:Ge,error:`Property name "${Fe}" does not match schema.`},...Ze.errors)}}if(J!==void 0){const Ge=`${o}/dependantRequired`;for(const Fe in J)if(Fe in e){const at=J[Fe];for(const Ze of at)Ze in e||De.push({instanceLocation:s,keyword:"dependentRequired",keywordLocation:Ge,error:`Instance has "${Fe}" but does not have "${Ze}".`})}}if(Y!==void 0)for(const Ge in Y){const Fe=`${o}/dependentSchemas`;if(Ge in e){const at=Vn(e,Y[Ge],r,n,i,a,s,`${Fe}/${cc(Ge)}`,l);at.valid||De.push({instanceLocation:s,keyword:"dependentSchemas",keywordLocation:Fe,error:`Instance has "${Ge}" but does not match dependant schema.`},...at.errors)}}if(U!==void 0){const Ge=`${o}/dependencies`;for(const Fe in U)if(Fe in e){const at=U[Fe];if(Array.isArray(at))for(const Ze of at)Ze in e||De.push({instanceLocation:s,keyword:"dependencies",keywordLocation:Ge,error:`Instance has "${Fe}" but does not have "${Ze}".`});else{const Ze=Vn(e,at,r,n,i,a,s,`${Ge}/${cc(Fe)}`);Ze.valid||De.push({instanceLocation:s,keyword:"dependencies",keywordLocation:Ge,error:`Instance has "${Fe}" but does not match dependant schema.`},...Ze.errors)}}}const Ue=Object.create(null);let Qe=!1;if(M!==void 0){const Ge=`${o}/properties`;for(const Fe in M){if(!(Fe in e))continue;const at=`${s}/${cc(Fe)}`,Ze=Vn(e[Fe],M[Fe],r,n,i,a,at,`${Ge}/${cc(Fe)}`);if(Ze.valid)l[Fe]=Ue[Fe]=!0;else if(Qe=i,De.push({instanceLocation:s,keyword:"properties",keywordLocation:Ge,error:`Property "${Fe}" does not match schema.`},...Ze.errors),Qe)break}}if(!Qe&&P!==void 0){const Ge=`${o}/patternProperties`;for(const Fe in P){const at=new RegExp(Fe,"u"),Ze=P[Fe];for(const ft in e){if(!at.test(ft))continue;const pt=`${s}/${cc(ft)}`,yt=Vn(e[ft],Ze,r,n,i,a,pt,`${Ge}/${cc(Fe)}`);yt.valid?l[ft]=Ue[ft]=!0:(Qe=i,De.push({instanceLocation:s,keyword:"patternProperties",keywordLocation:Ge,error:`Property "${ft}" matches pattern "${Fe}" but does not match associated schema.`},...yt.errors))}}}if(!Qe&&N!==void 0){const Ge=`${o}/additionalProperties`;for(const Fe in e){if(Ue[Fe])continue;const at=`${s}/${cc(Fe)}`,Ze=Vn(e[Fe],N,r,n,i,a,at,Ge);Ze.valid?l[Fe]=!0:(Qe=i,De.push({instanceLocation:s,keyword:"additionalProperties",keywordLocation:Ge,error:`Property "${Fe}" does not match additional properties schema.`},...Ze.errors))}}else if(!Qe&&V!==void 0){const Ge=`${o}/unevaluatedProperties`;for(const Fe in e)if(!l[Fe]){const at=`${s}/${cc(Fe)}`,Ze=Vn(e[Fe],V,r,n,i,a,at,Ge);Ze.valid?l[Fe]=!0:De.push({instanceLocation:s,keyword:"unevaluatedProperties",keywordLocation:Ge,error:`Property "${Fe}" does not match unevaluated properties schema.`},...Ze.errors)}}}else if(u==="array"){re!==void 0&&e.length>re&&De.push({instanceLocation:s,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${e.length} > ${re}).`}),D!==void 0&&e.length<D&&De.push({instanceLocation:s,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${e.length} < ${D}).`});const qe=e.length;let Ue=0,Qe=!1;if(se!==void 0){const Ge=`${o}/prefixItems`,Fe=Math.min(se.length,qe);for(;Ue<Fe;Ue++){const at=Vn(e[Ue],se[Ue],r,n,i,a,`${s}/${Ue}`,`${Ge}/${Ue}`);if(l[Ue]=!0,!at.valid&&(Qe=i,De.push({instanceLocation:s,keyword:"prefixItems",keywordLocation:Ge,error:"Items did not match schema."},...at.errors),Qe))break}}if(ue!==void 0){const Ge=`${o}/items`;if(Array.isArray(ue)){const Fe=Math.min(ue.length,qe);for(;Ue<Fe;Ue++){const at=Vn(e[Ue],ue[Ue],r,n,i,a,`${s}/${Ue}`,`${Ge}/${Ue}`);if(l[Ue]=!0,!at.valid&&(Qe=i,De.push({instanceLocation:s,keyword:"items",keywordLocation:Ge,error:"Items did not match schema."},...at.errors),Qe))break}}else for(;Ue<qe;Ue++){const Fe=Vn(e[Ue],ue,r,n,i,a,`${s}/${Ue}`,Ge);if(l[Ue]=!0,!Fe.valid&&(Qe=i,De.push({instanceLocation:s,keyword:"items",keywordLocation:Ge,error:"Items did not match schema."},...Fe.errors),Qe))break}if(!Qe&&I!==void 0){const Fe=`${o}/additionalItems`;for(;Ue<qe;Ue++){const at=Vn(e[Ue],I,r,n,i,a,`${s}/${Ue}`,Fe);l[Ue]=!0,at.valid||(Qe=i,De.push({instanceLocation:s,keyword:"additionalItems",keywordLocation:Fe,error:"Items did not match additional items schema."},...at.errors))}}}if(H!==void 0)if(qe===0&&q===void 0)De.push({instanceLocation:s,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(q!==void 0&&qe<q)De.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${qe}) than minContains (${q}).`});else{const Ge=`${o}/contains`,Fe=De.length;let at=0;for(let Ze=0;Ze<qe;Ze++){const ft=Vn(e[Ze],H,r,n,i,a,`${s}/${Ze}`,Ge);ft.valid?(l[Ze]=!0,at++):De.push(...ft.errors)}at>=(q||0)&&(De.length=Fe),q===void 0&&F===void 0&&at===0?De.splice(Fe,0,{instanceLocation:s,keyword:"contains",keywordLocation:Ge,error:"Array does not contain item matching schema."}):q!==void 0&&at<q?De.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${q} items matching schema. Only ${at} items were found.`}):F!==void 0&&at>F&&De.push({instanceLocation:s,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${F} items matching schema. ${at} items were found.`})}if(!Qe&&z!==void 0){const Ge=`${o}/unevaluatedItems`;for(Ue;Ue<qe;Ue++){if(l[Ue])continue;const Fe=Vn(e[Ue],z,r,n,i,a,`${s}/${Ue}`,Ge);l[Ue]=!0,Fe.valid||De.push({instanceLocation:s,keyword:"unevaluatedItems",keywordLocation:Ge,error:"Items did not match unevaluated items schema."},...Fe.errors)}}if(K)for(let Ge=0;Ge<qe;Ge++){const Fe=e[Ge],at=typeof Fe=="object"&&Fe!==null;for(let Ze=0;Ze<qe;Ze++){if(Ge===Ze)continue;const ft=e[Ze];(Fe===ft||at&&(typeof ft=="object"&&ft!==null)&&N0(Fe,ft))&&(De.push({instanceLocation:s,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${Ge} and ${Ze}.`}),Ge=Number.MAX_SAFE_INTEGER,Ze=Number.MAX_SAFE_INTEGER)}}}else if(u==="number"){if(r==="4"?(le!==void 0&&(X===!0&&e<=le||e<le)&&De.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${X?"or equal to ":""} ${le}.`}),xe!==void 0&&(Ie===!0&&e>=xe||e>xe)&&De.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${Ie?"or equal to ":""} ${xe}.`})):(le!==void 0&&e<le&&De.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${le}.`}),xe!==void 0&&e>xe&&De.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${xe}.`}),X!==void 0&&e<=X&&De.push({instanceLocation:s,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${e} is less than ${X}.`}),Ie!==void 0&&e>=Ie&&De.push({instanceLocation:s,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${e} is greater than or equal to ${Ie}.`})),Re!==void 0){const qe=e%Re;Math.abs(0-qe)>=11920929e-14&&Math.abs(Re-qe)>=11920929e-14&&De.push({instanceLocation:s,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${e} is not a multiple of ${Re}.`})}}else if(u==="string"){const qe=ie===void 0&&Te===void 0?0:A4e(e);ie!==void 0&&qe<ie&&De.push({instanceLocation:s,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${qe} < ${ie}).`}),Te!==void 0&&qe>Te&&De.push({instanceLocation:s,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${qe} > ${Te}).`}),Me!==void 0&&!new RegExp(Me,"u").test(e)&&De.push({instanceLocation:s,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),O!==void 0&&jz[O]&&!jz[O](e)&&De.push({instanceLocation:s,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${O}".`})}return{valid:De.length===0,errors:De}}class T4e{constructor(t,r="2019-09",n=!0){L(this,"schema");L(this,"draft");L(this,"shortCircuit");L(this,"lookup");this.schema=t,this.draft=r,this.shortCircuit=n,this.lookup=wh(t)}validate(t){return Vn(t,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(t,r){r&&(t={...t,$id:r}),wh(t,this.lookup)}}var Tie={};Gt(Tie,{Validator:()=>T4e,deepCompareStrict:()=>N0,toJsonSchema:()=>Ps,validatesOnlyStrings:()=>px});function Ps(e,t){if(ti(e)){const r=die(e,!0);if(Nu(r)){const n=zT(r,!0);return vz(n,t)}else return vz(e,t)}return Wi(e)?XNe(e):e}function px(e){if(!e||typeof e!="object"||Object.keys(e).length===0||Array.isArray(e))return!1;if("type"in e)return typeof e.type=="string"?e.type==="string":Array.isArray(e.type)?e.type.every(t=>t==="string"):!1;if("enum"in e)return Array.isArray(e.enum)&&e.enum.length>0&&e.enum.every(t=>typeof t=="string");if("const"in e)return typeof e.const=="string";if("allOf"in e&&Array.isArray(e.allOf))return e.allOf.some(t=>px(t));if("anyOf"in e&&Array.isArray(e.anyOf)||"oneOf"in e&&Array.isArray(e.oneOf)){const t="anyOf"in e?e.anyOf:e.oneOf;return t.length>0&&t.every(r=>px(r))}if("not"in e)return!1;if("$ref"in e&&typeof e.$ref=="string"){const t=e.$ref,r=wh(e);return r[t]?px(r[t]):!1}return!1}function Q0(e){if(typeof e=="object"&&e!==null){const t={...e};"additionalProperties"in t&&delete t.additionalProperties,"$schema"in t&&delete t.$schema,"strict"in t&&delete t.strict;for(const r in t)r in t&&(Array.isArray(t[r])?t[r]=t[r].map(Q0):typeof t[r]=="object"&&t[r]!==null&&(t[r]=Q0(t[r])));return t}return e}function qR(e){const t=Q0(dp(e)?Ps(e):e),{$schema:r,...n}=t;return n}function k4e(e){const t=Q0(e),{$schema:r,...n}=t;return n}function Kg(e,t,r=[]){if(e==null||typeof e!="object")return;const n=e;if(Array.isArray(n.enum)&&n.enum.some(i=>i==="")){const i=r.length?` at path "${r.join(".")}"`:"",a=t?` in tool "${t}"`:"";throw new Error(`Invalid enum: empty string not allowed${a}${i}. Gemini API rejects empty strings in enums.`)}if(n.type==="object"&&n.properties&&typeof n.properties=="object")for(const[i,a]of Object.entries(n.properties))Kg(a,t,[...r,i]);n.items&&Kg(n.items,t,[...r,"[]"]);for(const i of["anyOf","oneOf","allOf"]){const a=n[i];Array.isArray(a)&&a.forEach((s,o)=>Kg(s,t,[...r,`${i}[${o}]`]))}n.additionalProperties&&typeof n.additionalProperties=="object"&&Kg(n.additionalProperties,t,[...r,"additionalProperties"])}function rd(e){return typeof e=="object"&&e!==null&&"type"in e&&typeof e.type=="string"&&"source_type"in e&&(e.source_type==="url"||e.source_type==="base64"||e.source_type==="text"||e.source_type==="id")}function l$(e){return rd(e)&&e.source_type==="url"&&"url"in e&&typeof e.url=="string"}function c$(e){return rd(e)&&e.source_type==="base64"&&"data"in e&&typeof e.data=="string"}function C4e(e){return rd(e)&&e.source_type==="text"&&"text"in e&&typeof e.text=="string"}function kie(e){return rd(e)&&e.source_type==="id"&&"id"in e&&typeof e.id=="string"}function Cie(e){if(rd(e)){if(e.source_type==="url")return{type:"image_url",image_url:{url:e.url}};if(e.source_type==="base64"){if(!e.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${e.mime_type};base64,${e.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function O4e(e){const t=e.split(";")[0].split("/");if(t.length!==2)throw new Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);const r=t[0].trim(),n=t[1].trim();if(r===""||n==="")throw new Error(`Invalid mime type: "${e}" - type or subtype is empty.`);const i={};for(const a of e.split(";").slice(1)){const s=a.split("=");if(s.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);const o=s[0].trim(),l=s[1].trim();if(o==="")throw new Error(`Invalid parameter syntax in mime type: "${e}".`);i[o]=l}return{type:r,subtype:n,parameters:i}}function Ay({dataUrl:e,asTypedArray:t=!1}){const r=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let n;if(r){n=r[1].toLowerCase();const i=t?Uint8Array.from(atob(r[2]),a=>a.charCodeAt(0)):r[2];return{mime_type:n,data:i}}}function Oie(e,t){if(e.type==="text"){if(!t.fromStandardTextBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if(e.type==="image"){if(!t.fromStandardImageBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if(e.type==="audio"){if(!t.fromStandardAudioBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if(e.type==="file"){if(!t.fromStandardFileBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw new Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}function Pie(e){return typeof e=="object"&&e!==null&&"type"in e&&"content"in e&&(typeof e.content=="string"||Array.isArray(e.content))}var P4e=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");return t=typeof t>"u"?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()};const N4e=Hr(P4e);var u$={exports:{}};const I4e=/[\p{Lu}]/u,R4e=/[\p{Ll}]/u,$z=/^[\p{Lu}](?![\p{Lu}])/gu,Nie=/([\p{Alpha}\p{N}_]|$)/u,Iie=/[_.\- ]+/,L4e=new RegExp("^"+Iie.source),Fz=new RegExp(Iie.source+Nie.source,"gu"),Bz=new RegExp("\\d+"+Nie.source,"gu"),M4e=(e,t,r)=>{let n=!1,i=!1,a=!1;for(let s=0;s<e.length;s++){const o=e[s];n&&I4e.test(o)?(e=e.slice(0,s)+"-"+e.slice(s),n=!1,a=i,i=!0,s++):i&&a&&R4e.test(o)?(e=e.slice(0,s-1)+"-"+e.slice(s-1),a=i,i=!1,n=!0):(n=t(o)===o&&r(o)!==o,a=i,i=r(o)===o&&t(o)!==o)}return e},D4e=(e,t)=>($z.lastIndex=0,e.replace($z,r=>t(r))),j4e=(e,t)=>(Fz.lastIndex=0,Bz.lastIndex=0,e.replace(Fz,(r,n)=>t(n)).replace(Bz,r=>t(r))),Rie=(e,t)=>{if(!(typeof e=="string"||Array.isArray(e)))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},Array.isArray(e)?e=e.map(a=>a.trim()).filter(a=>a.length).join("-"):e=e.trim(),e.length===0)return"";const r=t.locale===!1?a=>a.toLowerCase():a=>a.toLocaleLowerCase(t.locale),n=t.locale===!1?a=>a.toUpperCase():a=>a.toLocaleUpperCase(t.locale);return e.length===1?t.pascalCase?n(e):r(e):(e!==r(e)&&(e=M4e(e,r,n)),e=e.replace(L4e,""),t.preserveConsecutiveUppercase?e=D4e(e,r):e=r(e),t.pascalCase&&(e=n(e.charAt(0))+e.slice(1)),j4e(e,n))};u$.exports=Rie;u$.exports.default=Rie;var $4e=u$.exports;const F4e=Hr($4e);function B4e(e,t){return(t==null?void 0:t[e])||N4e(e)}function U4e(e,t){return(t==null?void 0:t[e])||F4e(e)}function Lie(e,t,r){const n={};for(const i in e)Object.hasOwn(e,i)&&(n[t(i,r)]=e[i]);return n}const MC="__lc_escaped__";function z4e(e){return"lc"in e||Object.keys(e).length===1&&MC in e}function V4e(e){return{[MC]:e}}function Mie(e){return Object.keys(e).length===1&&MC in e}function W4e(e){return e!==null&&typeof e=="object"&&"lc_serializable"in e&&typeof e.toJSON=="function"}function H4e(e){var r;let t;return e!==null&&typeof e=="object"?"lc_id"in e&&Array.isArray(e.lc_id)?t=e.lc_id:t=[((r=e.constructor)==null?void 0:r.name)??"Object"]:t=[typeof e],{lc:1,type:"not_implemented",id:t}}function KR(e,t=new WeakSet){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){if(t.has(e))return H4e(e);if(W4e(e))return e;t.add(e);const r=e;if(z4e(r))return t.delete(e),V4e(r);const n={};for(const[i,a]of Object.entries(r))n[i]=KR(a,t);return t.delete(e),n}return Array.isArray(e)?e.map(r=>KR(r,t)):e}function YR(e){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){const t=e;if(Mie(t))return t[MC];const r={};for(const[n,i]of Object.entries(t))r[n]=YR(i);return r}return Array.isArray(e)?e.map(t=>YR(t)):e}var Die={};Gt(Die,{Serializable:()=>Ml,get_lc_unique_name:()=>DC});function Uz(e){return Array.isArray(e)?[...e]:{...e}}function G4e(e,t){const r=Uz(e);for(const[n,i]of Object.entries(t)){const[a,...s]=n.split(".").reverse();let o=r;for(const l of s.reverse()){if(o[l]===void 0)break;o[l]=Uz(o[l]),o=o[l]}o[a]!==void 0&&(o[a]={lc:1,type:"secret",id:[i]})}return r}function DC(e){const t=Object.getPrototypeOf(e);return typeof e.lc_name=="function"&&(typeof t.lc_name!="function"||e.lc_name()!==t.lc_name())?e.lc_name():e.name}var Ml=class jie{constructor(t,...r){L(this,"lc_serializable",!1);L(this,"lc_kwargs");this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(t||{}).filter(([n])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(n)})):this.lc_kwargs=t??{}}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,DC(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof jie||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const t={},r={},n=Object.keys(this.lc_kwargs).reduce((l,c)=>(l[c]=c in this?this[c]:this.lc_kwargs[c],l),{});for(let l=Object.getPrototypeOf(this);l;l=Object.getPrototypeOf(l))Object.assign(t,Reflect.get(l,"lc_aliases",this)),Object.assign(r,Reflect.get(l,"lc_secrets",this)),Object.assign(n,Reflect.get(l,"lc_attributes",this));Object.keys(r).forEach(l=>{let c=this,u=n;const[f,...d]=l.split(".").reverse();for(const h of d.reverse()){if(!(h in c)||c[h]===void 0)return;(!(h in u)||u[h]===void 0)&&(typeof c[h]=="object"&&c[h]!=null?u[h]={}:Array.isArray(c[h])&&(u[h]=[])),c=c[h],u=u[h]}f in c&&c[f]!==void 0&&(u[f]=u[f]||c[f])});const i={},a=new WeakSet;a.add(this);for(const[l,c]of Object.entries(n))i[l]=KR(c,a);const s=Object.keys(r).length?G4e(i,r):i,o=Lie(s,B4e,t);return{lc:1,type:"constructor",id:this.lc_id,kwargs:o}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function Ot(e,t){return Yt(e)&&e.type===t}function Yt(e){return typeof e=="object"&&e!==null}function $o(e){return Array.isArray(e)}function ot(e){return typeof e=="string"}function pc(e){return typeof e=="number"}function f$(e){return e instanceof Uint8Array}function zz(e){try{return JSON.parse(e)}catch{return}}const Mh=e=>e();function q4e(e){if(e.type==="char_location"&&ot(e.document_title)&&pc(e.start_char_index)&&pc(e.end_char_index)&&ot(e.cited_text)){const{document_title:t,start_char_index:r,end_char_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"char",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if(e.type==="page_location"&&ot(e.document_title)&&pc(e.start_page_number)&&pc(e.end_page_number)&&ot(e.cited_text)){const{document_title:t,start_page_number:r,end_page_number:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"page",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if(e.type==="content_block_location"&&ot(e.document_title)&&pc(e.start_block_index)&&pc(e.end_block_index)&&ot(e.cited_text)){const{document_title:t,start_block_index:r,end_block_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"block",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if(e.type==="web_search_result_location"&&ot(e.url)&&ot(e.title)&&ot(e.encrypted_index)&&ot(e.cited_text)){const{url:t,title:r,encrypted_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"url",url:t,title:r,startIndex:Number(n),endIndex:Number(n),citedText:i}}if(e.type==="search_result_location"&&ot(e.source)&&ot(e.title)&&pc(e.start_block_index)&&pc(e.end_block_index)&&ot(e.cited_text)){const{source:t,title:r,start_block_index:n,end_block_index:i,cited_text:a,...s}=e;return{...s,type:"citation",source:"search",url:t,title:r??void 0,startIndex:n,endIndex:i,citedText:a}}}function $ie(e){if(Ot(e,"document")&&Yt(e.source)&&"type"in e.source){if(e.source.type==="base64"&&ot(e.source.media_type)&&ot(e.source.data))return{type:"file",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&ot(e.source.url))return{type:"file",url:e.source.url};if(e.source.type==="file"&&ot(e.source.file_id))return{type:"file",fileId:e.source.file_id};if(e.source.type==="text"&&ot(e.source.data))return{type:"file",mimeType:String(e.source.media_type??"text/plain"),data:e.source.data}}else if(Ot(e,"image")&&Yt(e.source)&&"type"in e.source){if(e.source.type==="base64"&&ot(e.source.media_type)&&ot(e.source.data))return{type:"image",mimeType:e.source.media_type,data:e.source.data};if(e.source.type==="url"&&ot(e.source.url))return{type:"image",url:e.source.url};if(e.source.type==="file"&&ot(e.source.file_id))return{type:"image",fileId:e.source.file_id}}}function K4e(e){function*t(){for(const r of e){const n=$ie(r);n?yield n:yield r}}return Array.from(t())}function Vz(e){function*t(){var n;const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const i of r){if(Ot(i,"text")&&ot(i.text)){const{text:a,citations:s,...o}=i;if($o(s)&&s.length){const l=s.reduce((c,u)=>{const f=q4e(u);return f?[...c,f]:c},[]);yield{...o,type:"text",text:a,annotations:l};continue}else{yield{...o,type:"text",text:a};continue}}else if(Ot(i,"thinking")&&ot(i.thinking)){const{thinking:a,signature:s,...o}=i;yield{...o,type:"reasoning",reasoning:a,signature:s};continue}else if(Ot(i,"redacted_thinking")){yield{type:"non_standard",value:i};continue}else if(Ot(i,"tool_use")&&ot(i.name)&&ot(i.id)){yield{type:"tool_call",id:i.id,name:i.name,args:i.input};continue}else if(Ot(i,"input_json_delta")){if(X4e(e)&&((n=e.tool_call_chunks)!=null&&n.length)){const a=e.tool_call_chunks[0];yield{type:"tool_call_chunk",id:a.id,name:a.name,args:a.args,index:a.index};continue}}else if(Ot(i,"server_tool_use")&&ot(i.name)&&ot(i.id)){const{name:a,id:s}=i;if(a==="web_search"){const o=Mh(()=>{if(typeof i.input=="string")return i.input;if(Yt(i.input)&&ot(i.input.query))return i.input.query;if(ot(i.partial_json)){const l=zz(i.partial_json);if(l!=null&&l.query)return l.query}return""});yield{id:s,type:"server_tool_call",name:"web_search",args:{query:o}};continue}else if(i.name==="code_execution"){const o=Mh(()=>{if(typeof i.input=="string")return i.input;if(Yt(i.input)&&ot(i.input.code))return i.input.code;if(ot(i.partial_json)){const l=zz(i.partial_json);if(l!=null&&l.code)return l.code}return""});yield{id:s,type:"server_tool_call",name:"code_execution",args:{code:o}};continue}}else if(Ot(i,"web_search_tool_result")&&ot(i.tool_use_id)&&$o(i.content)){const{content:a,tool_use_id:s}=i,o=a.reduce((l,c)=>Ot(c,"web_search_result")?[...l,c.url]:l,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:s,status:"success",output:{urls:o}};continue}else if(Ot(i,"code_execution_tool_result")&&ot(i.tool_use_id)&&Yt(i.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(Ot(i,"mcp_tool_use")){yield{id:i.id,type:"server_tool_call",name:"mcp_tool_use",args:i.input};continue}else if(Ot(i,"mcp_tool_result")&&ot(i.tool_use_id)&&Yt(i.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:i.tool_use_id,status:"success",output:i.content};continue}else if(Ot(i,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:i.input};continue}else if(Ot(i,"search_result")){yield{id:i.id,type:"non_standard",value:i};continue}else if(Ot(i,"tool_result")){yield{id:i.id,type:"non_standard",value:i};continue}else{const a=$ie(i);if(a){yield a;continue}}yield{type:"non_standard",value:i}}}return Array.from(t())}const Y4e={translateContent:Vz,translateContentChunk:Vz};function X4e(e){return typeof(e==null?void 0:e._getType)=="function"&&typeof e.concat=="function"&&e._getType()==="ai"}function Z4e(e){return l$(e)?{type:e.type,mimeType:e.mime_type,url:e.url,metadata:e.metadata}:c$(e)?{type:e.type,mimeType:e.mime_type??"application/octet-stream",data:e.data,metadata:e.metadata}:kie(e)?{type:e.type,mimeType:e.mime_type,fileId:e.id,metadata:e.metadata}:e}function J4e(e){return e.map(Z4e)}function Q4e(e){return!!(Ot(e,"image_url")&&Yt(e.image_url)||Ot(e,"input_audio")&&Yt(e.input_audio)||Ot(e,"file")&&Yt(e.file))}function eIe(e){if(Ot(e,"image_url")&&Yt(e.image_url)&&ot(e.image_url.url)){const t=Ay({dataUrl:e.image_url.url});return t?{type:"image",mimeType:t.mime_type,data:t.data}:{type:"image",url:e.image_url.url}}else{if(Ot(e,"input_audio")&&Yt(e.input_audio)&&ot(e.input_audio.data)&&ot(e.input_audio.format))return{type:"audio",data:e.input_audio.data,mimeType:`audio/${e.input_audio.format}`};if(Ot(e,"file")&&Yt(e.file)&&ot(e.file.data)){const t=Ay({dataUrl:e.file.data});if(t)return{type:"file",data:t.data,mimeType:t.mime_type};if(ot(e.file.file_id))return{type:"file",fileId:e.file.file_id}}}return e}function tIe(e){const t=[];typeof e.content=="string"?e.content.length>0&&t.push({type:"text",text:e.content}):t.push(...d$(e.content));for(const r of e.tool_calls??[])t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}function rIe(e){const t=[];typeof e.content=="string"?e.content.length>0&&t.push({type:"text",text:e.content}):t.push(...d$(e.content));for(const r of e.tool_calls??[])t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}function d$(e){const t=[];for(const r of e)Q4e(r)?t.push(eIe(r)):t.push(r);return t}function nIe(e){if(e.type==="url_citation"){const{url:t,title:r,start_index:n,end_index:i}=e;return{type:"citation",url:t,title:r,startIndex:n,endIndex:i}}if(e.type==="file_citation"){const{file_id:t,filename:r,index:n}=e;return{type:"citation",title:r,startIndex:n,endIndex:n,fileId:t}}return e}function Fie(e){function*t(){var n;Yt((n=e.additional_kwargs)==null?void 0:n.reasoning)&&$o(e.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:e.additional_kwargs.reasoning.summary.reduce((a,s)=>Yt(s)&&ot(s.text)?`${a}${s.text}`:a,"")});const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const i of r)if(Ot(i,"text")){const{text:a,annotations:s,...o}=i;Array.isArray(s)?yield{...o,type:"text",text:String(a),annotations:s.map(nIe)}:yield{...o,type:"text",text:String(a)}}for(const i of e.tool_calls??[])yield{type:"tool_call",id:i.id,name:i.name,args:i.args};if(Yt(e.additional_kwargs)&&$o(e.additional_kwargs.tool_outputs))for(const i of e.additional_kwargs.tool_outputs){if(Ot(i,"web_search_call")){const a={};if(Yt(i.action)&&ot(i.action.query)&&(a.query=i.action.query),yield{id:i.id,type:"server_tool_call",name:"web_search",args:a},i.status==="completed"||i.status==="failed"){const s={};Yt(i.action)&&(s.action=i.action),yield{type:"server_tool_call_result",toolCallId:ot(i.id)?i.id:"",status:i.status==="completed"?"success":"error",output:s}}continue}else if(Ot(i,"file_search_call")){yield{id:i.id,type:"server_tool_call",name:"file_search",args:{queries:$o(i.queries)?i.queries:[]}},(i.status==="completed"||i.status==="failed")&&(yield{type:"server_tool_call_result",toolCallId:ot(i.id)?i.id:"",status:i.status==="completed"?"success":"error",output:$o(i.results)?{results:i.results}:{}});continue}else if(Ot(i,"computer_call")){yield{type:"non_standard",value:i};continue}else if(Ot(i,"code_interpreter_call")){if(ot(i.code)&&(yield{id:i.id,type:"server_tool_call",name:"code_interpreter",args:{code:i.code}}),$o(i.outputs)){const a=Mh(()=>{if(i.status!=="in_progress"){if(i.status==="completed")return 0;if(i.status==="incomplete")return 127;if(i.status!=="interpreting"&&i.status==="failed")return 1}});for(const s of i.outputs)if(Ot(s,"logs")){yield{type:"server_tool_call_result",toolCallId:i.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:a??0,stderr:[0,void 0].includes(a)?void 0:String(s.logs),stdout:[0,void 0].includes(a)?String(s.logs):void 0}};continue}}continue}else if(Ot(i,"mcp_call")){yield{id:i.id,type:"server_tool_call",name:"mcp_call",args:i.input};continue}else if(Ot(i,"mcp_list_tools")){yield{id:i.id,type:"server_tool_call",name:"mcp_list_tools",args:i.input};continue}else if(Ot(i,"mcp_approval_request")){yield{type:"non_standard",value:i};continue}else if(Ot(i,"image_generation_call")){ot(i.result)&&(yield{type:"image",mimeType:"image/png",data:i.result,id:ot(i.id)?i.id:void 0,metadata:{status:ot(i.status)?i.status:void 0}}),yield{type:"non_standard",value:i};continue}Yt(i)&&(yield{type:"non_standard",value:i})}}return Array.from(t())}function iIe(e){function*t(){yield*Fie(e);for(const r of e.tool_call_chunks??[])yield{type:"tool_call_chunk",id:r.id,name:r.name,args:r.args}}return Array.from(t())}const aIe={translateContent:e=>typeof e.content=="string"?tIe(e):Fie(e),translateContentChunk:e=>typeof e.content=="string"?rIe(e):iIe(e)};function sIe(e,t="pretty"){return t==="pretty"?oIe(e):JSON.stringify(e)}function oIe(e){const t=[],r=` ${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Message `,n=Math.floor((80-r.length)/2),i="=".repeat(n),a=r.length%2===0?i:`${i}=`;if(t.push(`${i}${r}${a}`),e.type==="ai"){const s=e;if(s.tool_calls&&s.tool_calls.length>0){t.push("Tool Calls:");for(const o of s.tool_calls){t.push(`  ${o.name} (${o.id})`),t.push(` Call ID: ${o.id}`),t.push("  Args:");for(const[l,c]of Object.entries(o.args))t.push(`    ${l}: ${typeof c=="object"?JSON.stringify(c):c}`)}}}if(e.type==="tool"){const s=e;s.name&&t.push(`Name: ${s.name}`)}return typeof e.content=="string"&&e.content.trim()&&(t.length>1&&t.push(""),t.push(e.content)),t.join(`
`)}const XN=Symbol.for("langchain.message");function nd(e,t){return typeof e=="string"?e===""?t:typeof t=="string"?e+t:Array.isArray(t)&&t.length===0?e:Array.isArray(t)&&t.some(r=>rd(r))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?s2(e,t)??[...e,...t]:t===""?e:Array.isArray(e)&&e.some(r=>rd(r))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function Bie(e,t){return e==="error"||t==="error"?"error":"success"}function lIe(e,t){function r(n,i){if(typeof n!="object"||n===null||n===void 0)return n;if(i>=t)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(s=>r(s,i+1));const a={};for(const s of Object.keys(n))a[s]=r(n[s],i+1);return a}return JSON.stringify(r(e,0),null,2)}var $J,Pl=class extends Ml{constructor(t){const r=typeof t=="string"||Array.isArray(t)?{content:t}:t;r.additional_kwargs||(r.additional_kwargs={}),r.response_metadata||(r.response_metadata={});super(r);L(this,"lc_namespace",["langchain_core","messages"]);L(this,"lc_serializable",!0);L(this,$J,!0);L(this,"id");L(this,"name");L(this,"content");L(this,"additional_kwargs");L(this,"response_metadata");this.name=r.name,r.content===void 0&&r.contentBlocks!==void 0?(this.content=r.contentBlocks,this.response_metadata={output_version:"v1",...r.response_metadata}):r.content!==void 0?(this.content=r.content??[],this.response_metadata=r.response_metadata):(this.content=[],this.response_metadata=r.response_metadata),this.additional_kwargs=r.additional_kwargs,this.id=r.id}get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}_getType(){return this.type}getType(){return this._getType()}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(t=>typeof t=="string"?t:t.type==="text"?t.text:"").join(""):""}get contentBlocks(){const t=typeof this.content=="string"?[{type:"text",text:this.content}]:this.content;return[J4e,d$,K4e].reduce((i,a)=>a(i),t)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(t){return typeof t=="object"&&t!==null&&XN in t&&t[XN]===!0&&Pie(t)}_updateId(t){this.id=t,this.lc_kwargs.id=t}get[($J=XN,Symbol.toStringTag)](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](t){if(t===null)return this;const r=lIe(this._printableFields,Math.max(4,t));return`${this.constructor.lc_name()} ${r}`}toFormattedString(t="pretty"){return sIe(this,t)}};function cIe(e){return Array.isArray(e)&&e.every(t=>typeof t.index=="number")}const Uie=["index","created","timestamp"];function ps(e,t,r){const n=(r==null?void 0:r.ignoreKeys)??Uie;if(e==null&&t==null)return;if(e==null||t==null)return e??t;const i={...e};for(const[a,s]of Object.entries(t))if(i[a]==null)i[a]=s;else{if(s==null)continue;if(typeof i[a]!=typeof s||Array.isArray(i[a])!==Array.isArray(s))throw new Error(`field[${a}] already exists in the message chunk, but with a different type.`);if(typeof i[a]=="string"){if(a==="type")continue;if(["id","name","output_version","model_provider"].includes(a))s&&(i[a]=s);else{if(n.includes(a))continue;i[a]+=s}}else if(typeof i[a]=="number"){if(n.includes(a))continue;i[a]=i[a]+s}else if(typeof i[a]=="object"&&!Array.isArray(i[a]))i[a]=ps(i[a],s,r);else if(Array.isArray(i[a]))i[a]=s2(i[a],s,r);else{if(i[a]===s)continue;console.warn(`field[${a}] already exists in this message chunk and value has unsupported type.`)}}return i}function s2(e,t,r){if(!(e==null&&t==null)){if(e==null||t==null)return e||t;{const n=[...e];for(const i of t)if(typeof i=="object"&&i!==null&&"index"in i&&typeof i.index=="number"){const a=n.findIndex(s=>{const o=typeof s=="object",l="index"in s&&s.index===i.index,c="id"in s&&"id"in i&&(s==null?void 0:s.id)===(i==null?void 0:i.id),u=!("id"in s)||!(s!=null&&s.id)||!("id"in i)||!(i!=null&&i.id);return o&&l&&(c||u)});a!==-1&&typeof n[a]=="object"&&n[a]!==null?n[a]=ps(n[a],i,r):n.push(i)}else{if(typeof i=="object"&&i!==null&&"text"in i&&i.text==="")continue;n.push(i)}return n}}}function zie(e,t,r){if(!(e==null&&t==null)){if(e==null||t==null)return e??t;if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.
Left ${typeof e}
Right ${typeof t}`);if(typeof e=="string"&&typeof t=="string")return e+t;if(Array.isArray(e)&&Array.isArray(t))return s2(e,t,r);if(typeof e=="object"&&typeof t=="object")return ps(e,t,r);if(e===t)return e;throw new Error(`Can not merge objects of different types.
Left ${e}
Right ${t}`)}}var pp=class Vie extends Pl{static isInstance(t){if(!super.isInstance(t))return!1;let r=Object.getPrototypeOf(t);for(;r!==null;){if(r===Vie.prototype)return!0;r=Object.getPrototypeOf(r)}return!1}};function Wie(e){return typeof e.role=="string"}function ji(e){return typeof(e==null?void 0:e._getType)=="function"}function Tb(e){return pp.isInstance(e)}function Hie(e,t){return ps(e,t)??{}}function Gie(e,t){const r={};return((e==null?void 0:e.audio)!==void 0||(t==null?void 0:t.audio)!==void 0)&&(r.audio=((e==null?void 0:e.audio)??0)+((t==null?void 0:t.audio)??0)),((e==null?void 0:e.image)!==void 0||(t==null?void 0:t.image)!==void 0)&&(r.image=((e==null?void 0:e.image)??0)+((t==null?void 0:t.image)??0)),((e==null?void 0:e.video)!==void 0||(t==null?void 0:t.video)!==void 0)&&(r.video=((e==null?void 0:e.video)??0)+((t==null?void 0:t.video)??0)),((e==null?void 0:e.document)!==void 0||(t==null?void 0:t.document)!==void 0)&&(r.document=((e==null?void 0:e.document)??0)+((t==null?void 0:t.document)??0)),((e==null?void 0:e.text)!==void 0||(t==null?void 0:t.text)!==void 0)&&(r.text=((e==null?void 0:e.text)??0)+((t==null?void 0:t.text)??0)),r}function uIe(e,t){const r={...Gie(e,t)};return((e==null?void 0:e.cache_read)!==void 0||(t==null?void 0:t.cache_read)!==void 0)&&(r.cache_read=((e==null?void 0:e.cache_read)??0)+((t==null?void 0:t.cache_read)??0)),((e==null?void 0:e.cache_creation)!==void 0||(t==null?void 0:t.cache_creation)!==void 0)&&(r.cache_creation=((e==null?void 0:e.cache_creation)??0)+((t==null?void 0:t.cache_creation)??0)),r}function fIe(e,t){const r={...Gie(e,t)};return((e==null?void 0:e.reasoning)!==void 0||(t==null?void 0:t.reasoning)!==void 0)&&(r.reasoning=((e==null?void 0:e.reasoning)??0)+((t==null?void 0:t.reasoning)??0)),r}function h$(e,t){return{input_tokens:((e==null?void 0:e.input_tokens)??0)+((t==null?void 0:t.input_tokens)??0),output_tokens:((e==null?void 0:e.output_tokens)??0)+((t==null?void 0:t.output_tokens)??0),total_tokens:((e==null?void 0:e.total_tokens)??0)+((t==null?void 0:t.total_tokens)??0),input_token_details:uIe(e==null?void 0:e.input_token_details,t==null?void 0:t.input_token_details),output_token_details:fIe(e==null?void 0:e.output_token_details,t==null?void 0:t.output_token_details)}}var qie={};Gt(qie,{ToolMessage:()=>Fu,ToolMessageChunk:()=>jC,defaultToolCallParser:()=>m$,isDirectToolOutput:()=>p$,isToolMessage:()=>$C,isToolMessageChunk:()=>Kie});function p$(e){return e!=null&&typeof e=="object"&&"lc_direct_tool_output"in e&&e.lc_direct_tool_output===!0}var Fu=class extends Pl{constructor(t,r,n){const i=typeof t=="string"||Array.isArray(t)?{content:t,name:n,tool_call_id:r}:t;super(i);L(this,"lc_direct_tool_output",!0);L(this,"type","tool");L(this,"status");L(this,"tool_call_id");L(this,"metadata");L(this,"artifact");this.tool_call_id=i.tool_call_id,this.artifact=i.artifact,this.status=i.status,this.metadata=i.metadata}static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}static isInstance(t){return super.isInstance(t)&&t.type==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},jC=class extends pp{constructor(t){super(t);L(this,"type","tool");L(this,"tool_call_id");L(this,"status");L(this,"artifact");this.tool_call_id=t.tool_call_id,this.artifact=t.artifact,this.status=t.status}static lc_name(){return"ToolMessageChunk"}concat(t){const r=this.constructor;return new r({content:nd(this.content,t.content),additional_kwargs:ps(this.additional_kwargs,t.additional_kwargs),response_metadata:ps(this.response_metadata,t.response_metadata),artifact:zie(this.artifact,t.artifact),tool_call_id:this.tool_call_id,id:this.id??t.id,status:Bie(this.status,t.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function m$(e){const t=[],r=[];for(const n of e)if(n.function){const i=n.function.name;try{const a=JSON.parse(n.function.arguments);t.push({name:i||"",args:a||{},id:n.id})}catch{r.push({name:i,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[t,r]}function $C(e){return typeof e=="object"&&e!==null&&"getType"in e&&typeof e.getType=="function"&&e.getType()==="tool"}function Kie(e){return e._getType()==="tool"}var mp=class Yie extends Pl{constructor(r,n){(typeof r=="string"||Array.isArray(r))&&(r={content:r,role:n});super(r);L(this,"type","generic");L(this,"role");this.role=r.role}static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Yie}static isInstance(r){return super.isInstance(r)&&r.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},FC=class extends pp{constructor(t,r){(typeof t=="string"||Array.isArray(t))&&(t={content:t,role:r});super(t);L(this,"type","generic");L(this,"role");this.role=t.role}static lc_name(){return"ChatMessageChunk"}concat(t){const r=this.constructor;return new r({content:nd(this.content,t.content),additional_kwargs:ps(this.additional_kwargs,t.additional_kwargs),response_metadata:ps(this.response_metadata,t.response_metadata),role:this.role,id:this.id??t.id})}static isInstance(t){return super.isInstance(t)&&t.type==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};function dIe(e){return e._getType()==="generic"}function hIe(e){return e._getType()==="generic"}var BC=class extends Pl{constructor(t){super(t);L(this,"type","function");L(this,"name");this.name=t.name}static lc_name(){return"FunctionMessage"}},UC=class extends pp{constructor(){super(...arguments);L(this,"type","function")}static lc_name(){return"FunctionMessageChunk"}concat(t){const r=this.constructor;return new r({content:nd(this.content,t.content),additional_kwargs:ps(this.additional_kwargs,t.additional_kwargs),response_metadata:ps(this.response_metadata,t.response_metadata),name:this.name??"",id:this.id??t.id})}};function pIe(e){return e._getType()==="function"}function mIe(e){return e._getType()==="function"}var ms=class extends Pl{constructor(t){super(t);L(this,"type","human")}static lc_name(){return"HumanMessage"}static isInstance(t){return super.isInstance(t)&&t.type==="human"}},zC=class extends pp{constructor(t){super(t);L(this,"type","human")}static lc_name(){return"HumanMessageChunk"}concat(t){const r=this.constructor;return new r({content:nd(this.content,t.content),additional_kwargs:ps(this.additional_kwargs,t.additional_kwargs),response_metadata:ps(this.response_metadata,t.response_metadata),id:this.id??t.id})}static isInstance(t){return super.isInstance(t)&&t.type==="human"}};function gIe(e){return e.getType()==="human"}function yIe(e){return e.getType()==="human"}var I0=class extends Pl{constructor(t){super({...t,content:[]});L(this,"type","remove");L(this,"id");this.id=t.id}get _printableFields(){return{...super._printableFields,id:this.id}}static isInstance(t){return super.isInstance(t)&&t.type==="remove"}},Bc=class EA extends Pl{constructor(r){super(r);L(this,"type","system")}static lc_name(){return"SystemMessage"}concat(r){if(typeof r=="string")return new EA({...this,content:nd(this.content,r)});if(EA.isInstance(r))return new EA({...this,additional_kwargs:{...this.additional_kwargs,...r.additional_kwargs},response_metadata:{...this.response_metadata,...r.response_metadata},content:nd(this.content,r.content)});throw new Error("Unexpected chunk type for system message")}static isInstance(r){return super.isInstance(r)&&r.type==="system"}},nv=class extends pp{constructor(t){super(t);L(this,"type","system")}static lc_name(){return"SystemMessageChunk"}concat(t){const r=this.constructor;return new r({content:nd(this.content,t.content),additional_kwargs:ps(this.additional_kwargs,t.additional_kwargs),response_metadata:ps(this.response_metadata,t.response_metadata),id:this.id??t.id})}static isInstance(t){return super.isInstance(t)&&t.type==="system"}};function vIe(e){return e._getType()==="system"}function wIe(e){return e._getType()==="system"}var Xie={};Gt(Xie,{ModelAbortError:()=>XR,addLangChainErrorFields:()=>o2});function o2(e,t){return e.lc_error_code=t,e.message=`${e.message}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${t}/
`,e}var XR=class Zie extends Error{constructor(r,n){super(r);L(this,"name","ModelAbortError");L(this,"lc_error_code","MODEL_ABORTED");L(this,"partialOutput");this.partialOutput=n,Error.captureStackTrace&&Error.captureStackTrace(this,Zie)}static isInstance(r){return typeof r=="object"&&r!==null&&"name"in r&&r.name==="ModelAbortError"&&"lc_error_code"in r&&r.lc_error_code==="MODEL_ABORTED"}};function mx(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="tool_call")}function xIe(e){return!!(e&&typeof e=="object"&&"toolCall"in e&&e.toolCall!=null&&typeof e.toolCall=="object"&&"id"in e.toolCall&&typeof e.toolCall.id=="string")}var XT=class extends Error{constructor(t,r){super(t);L(this,"output");this.output=r}};function ZR(e,t=iv){e=e.trim();const r=e.indexOf("```");if(r===-1)return t(e);let n=e.substring(r+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));const i=n.indexOf("```");let a=n;return i!==-1&&(a=n.substring(0,i)),t(a.trim())}function bIe(e){try{return JSON.parse(e)}catch{}const t=e.trim();if(t.length===0)throw new Error("Unexpected end of JSON input");let r=0;function n(){for(;r<t.length&&/\s/.test(t[r]);)r+=1}function i(){if(t[r]!=='"')throw new Error(`Expected '"' at position ${r}, got '${t[r]}'`);r+=1;let u="",f=!1;for(;r<t.length;){const d=t[r];if(f){if(d==="n")u+=`
`;else if(d==="t")u+="	";else if(d==="r")u+="\r";else if(d==="\\")u+="\\";else if(d==='"')u+='"';else if(d==="b")u+="\b";else if(d==="f")u+="\f";else if(d==="/")u+="/";else if(d==="u"){const h=t.substring(r+1,r+5);if(/^[0-9A-Fa-f]{0,4}$/.test(h))h.length===4?u+=String.fromCharCode(Number.parseInt(h,16)):u+=`u${h}`,r+=h.length;else throw new Error(`Invalid unicode escape sequence '\\u${h}' at position ${r}`)}else throw new Error(`Invalid escape sequence '\\${d}' at position ${r}`);f=!1}else if(d==="\\")f=!0;else{if(d==='"')return r+=1,u;u+=d}r+=1}return f&&(u+="\\"),u}function a(){const u=r;let f="";if(t[r]==="-"&&(f+="-",r+=1),r<t.length&&t[r]==="0"&&(f+="0",r+=1,t[r]>="0"&&t[r]<="9"))throw new Error(`Invalid number at position ${u}`);if(r<t.length&&t[r]>="1"&&t[r]<="9")for(;r<t.length&&t[r]>="0"&&t[r]<="9";)f+=t[r],r+=1;if(r<t.length&&t[r]===".")for(f+=".",r+=1;r<t.length&&t[r]>="0"&&t[r]<="9";)f+=t[r],r+=1;if(r<t.length&&(t[r]==="e"||t[r]==="E"))for(f+=t[r],r+=1,r<t.length&&(t[r]==="+"||t[r]==="-")&&(f+=t[r],r+=1);r<t.length&&t[r]>="0"&&t[r]<="9";)f+=t[r],r+=1;if(f==="-")return-0;const d=Number.parseFloat(f);if(Number.isNaN(d))throw r=u,new Error(`Invalid number '${f}' at position ${u}`);return d}function s(){if(n(),r>=t.length)throw new Error(`Unexpected end of input at position ${r}`);const u=t[r];if(u==="{")return l();if(u==="[")return o();if(u==='"')return i();if("null".startsWith(t.substring(r,r+4)))return r+=Math.min(4,t.length-r),null;if("true".startsWith(t.substring(r,r+4)))return r+=Math.min(4,t.length-r),!0;if("false".startsWith(t.substring(r,r+5)))return r+=Math.min(5,t.length-r),!1;if(u==="-"||u>="0"&&u<="9")return a();throw new Error(`Unexpected character '${u}' at position ${r}`)}function o(){if(t[r]!=="[")throw new Error(`Expected '[' at position ${r}, got '${t[r]}'`);const u=[];if(r+=1,n(),r>=t.length)return u;if(t[r]==="]")return r+=1,u;for(;r<t.length;){if(n(),r>=t.length||(u.push(s()),n(),r>=t.length))return u;if(t[r]==="]")return r+=1,u;if(t[r]===","){r+=1;continue}throw new Error(`Expected ',' or ']' at position ${r}, got '${t[r]}'`)}return u}function l(){if(t[r]!=="{")throw new Error(`Expected '{' at position ${r}, got '${t[r]}'`);const u={};if(r+=1,n(),r>=t.length)return u;if(t[r]==="}")return r+=1,u;for(;r<t.length;){if(n(),r>=t.length)return u;const f=i();if(n(),r>=t.length)return u;if(t[r]!==":")throw new Error(`Expected ':' at position ${r}, got '${t[r]}'`);if(r+=1,n(),r>=t.length||(u[f]=s(),n(),r>=t.length))return u;if(t[r]==="}")return r+=1,u;if(t[r]===","){r+=1;continue}throw new Error(`Expected ',' or '}' at position ${r}, got '${t[r]}'`)}return u}const c=s();if(n(),r<t.length)throw new Error(`Unexpected character '${t[r]}' at position ${r}`);return c}function iv(e){try{return typeof e>"u"?null:bIe(e)}catch{return null}}function g$(e){switch(e){case"csv":return"text/csv";case"doc":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":return"image/jpeg";case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function _Ie(e){if(Yt(e.document)&&Yt(e.document.source)){const t=Yt(e.document)&&ot(e.document.format)?e.document.format:"",r=g$(t);if(Yt(e.document.source)){if(Yt(e.document.source.s3Location)&&ot(e.document.source.s3Location.uri))return{type:"file",mimeType:r,fileId:e.document.source.s3Location.uri};if(f$(e.document.source.bytes))return{type:"file",mimeType:r,data:e.document.source.bytes};if(ot(e.document.source.text))return{type:"file",mimeType:r,data:Buffer.from(e.document.source.text).toString("base64")};if($o(e.document.source.content)){const n=e.document.source.content.reduce((i,a)=>Yt(a)&&ot(a.text)?i+a.text:i,"");return{type:"file",mimeType:r,data:n}}}}return{type:"non_standard",value:e}}function SIe(e){if(Ot(e,"image")&&Yt(e.image)){const t=Yt(e.image)&&ot(e.image.format)?e.image.format:"",r=g$(t);if(Yt(e.image.source)){if(Yt(e.image.source.s3Location)&&ot(e.image.source.s3Location.uri))return{type:"image",mimeType:r,fileId:e.image.source.s3Location.uri};if(f$(e.image.source.bytes))return{type:"image",mimeType:r,data:e.image.source.bytes}}}return{type:"non_standard",value:e}}function EIe(e){if(Ot(e,"video")&&Yt(e.video)){const t=Yt(e.video)&&ot(e.video.format)?e.video.format:"",r=g$(t);if(Yt(e.video.source)){if(Yt(e.video.source.s3Location)&&ot(e.video.source.s3Location.uri))return{type:"video",mimeType:r,fileId:e.video.source.s3Location.uri};if(f$(e.video.source.bytes))return{type:"video",mimeType:r,data:e.video.source.bytes}}}return{type:"non_standard",value:e}}function Wz(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ot(n,"cache_point")){yield{type:"non_standard",value:n};continue}else if(Ot(n,"citations_content")&&Yt(n.citationsContent)){const i=$o(n.citationsContent.content)?n.citationsContent.content.reduce((s,o)=>Yt(o)&&ot(o.text)?s+o.text:s,""):"",a=$o(n.citationsContent.citations)?n.citationsContent.citations.reduce((s,o)=>{if(Yt(o)){const l=$o(o.sourceContent)?o.sourceContent.reduce((u,f)=>Yt(f)&&ot(f.text)?u+f.text:u,""):"",c=Mh(()=>{if(Yt(o.location)){const u=o.location.documentChar||o.location.documentPage||o.location.documentChunk;if(Yt(u))return{source:pc(u.documentIndex)?u.documentIndex.toString():void 0,startIndex:pc(u.start)?u.start:void 0,endIndex:pc(u.end)?u.end:void 0}}return{}});s.push({type:"citation",citedText:l,...c})}return s},[]):[];yield{type:"text",text:i,annotations:a};continue}else if(Ot(n,"document")&&Yt(n.document)){yield _Ie(n);continue}else if(Ot(n,"guard_content")){yield{type:"non_standard",value:n};continue}else if(Ot(n,"image")&&Yt(n.image)){yield SIe(n);continue}else if(Ot(n,"reasoning_content")&&ot(n.reasoningText)){yield{type:"reasoning",reasoning:n.reasoningText};continue}else if(Ot(n,"text")&&ot(n.text)){yield{type:"text",text:n.text};continue}else if(Ot(n,"tool_result")){yield{type:"non_standard",value:n};continue}else{if(Ot(n,"tool_call"))continue;if(Ot(n,"video")&&Yt(n.video)){yield EIe(n);continue}}yield{type:"non_standard",value:n}}}return Array.from(t())}const AIe={translateContent:Wz,translateContentChunk:Wz};function Hz(e){var n;const t=[],r=(n=e.additional_kwargs)==null?void 0:n.reasoning_content;if(ot(r)&&r.length>0&&t.push({type:"reasoning",reasoning:r}),typeof e.content=="string")e.content.length>0&&t.push({type:"text",text:e.content});else for(const i of e.content)typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&ot(i.text)&&t.push({type:"text",text:i.text});for(const i of e.tool_calls??[])t.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return t}const TIe={translateContent:Hz,translateContentChunk:Hz};function Gz(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ot(n,"text")&&ot(n.text)){yield{type:"text",text:n.text};continue}else if(Ot(n,"thinking")&&ot(n.thinking)){yield{type:"reasoning",reasoning:n.thinking,...n.signature?{signature:n.signature}:{}};continue}else if(Ot(n,"inlineData")&&Yt(n.inlineData)&&ot(n.inlineData.mimeType)&&ot(n.inlineData.data)){yield{type:"file",mimeType:n.inlineData.mimeType,data:n.inlineData.data};continue}else if(Ot(n,"functionCall")&&Yt(n.functionCall)&&ot(n.functionCall.name)&&Yt(n.functionCall.args)){yield{type:"tool_call",id:e.id,name:n.functionCall.name,args:n.functionCall.args};continue}else if(Ot(n,"functionResponse")){yield{type:"non_standard",value:n};continue}else if(Ot(n,"fileData")&&Yt(n.fileData)&&ot(n.fileData.mimeType)&&ot(n.fileData.fileUri)){yield{type:"file",mimeType:n.fileData.mimeType,fileId:n.fileData.fileUri};continue}else if(Ot(n,"executableCode")){yield{type:"non_standard",value:n};continue}else if(Ot(n,"codeExecutionResult")){yield{type:"non_standard",value:n};continue}yield{type:"non_standard",value:n}}}return Array.from(t())}const kIe={translateContent:Gz,translateContentChunk:Gz};function qz(e){function*t(){const r=typeof e.content=="string"?[{type:"text",text:e.content}]:e.content;for(const n of r){if(Ot(n,"reasoning")&&ot(n.reasoning)){const i=Mh(()=>{var s;const a=r.indexOf(n);if($o((s=e.additional_kwargs)==null?void 0:s.signatures)&&a>=0)return e.additional_kwargs.signatures.at(a)});ot(i)?yield{type:"reasoning",reasoning:n.reasoning,signature:i}:yield{type:"reasoning",reasoning:n.reasoning};continue}else if(Ot(n,"thinking")&&ot(n.thinking)){yield{type:"reasoning",reasoning:n.thinking,...n.signature?{signature:n.signature}:{}};continue}else if(Ot(n,"text")&&ot(n.text)){yield{type:"text",text:n.text};continue}else if(Ot(n,"image_url")){if(ot(n.image_url))if(n.image_url.startsWith("data:")){const i=/^data:([^;]+);base64,(.+)$/,a=n.image_url.match(i);a?yield{type:"image",data:a[2],mimeType:a[1]}:yield{type:"image",url:n.image_url}}else yield{type:"image",url:n.image_url};continue}else if(Ot(n,"media")&&ot(n.mimeType)&&ot(n.data)){yield{type:"file",mimeType:n.mimeType,data:n.data};continue}yield{type:"non_standard",value:n}}}return Array.from(t())}const CIe={translateContent:qz,translateContentChunk:qz};function Kz(e){var n;const t=[],r=(n=e.additional_kwargs)==null?void 0:n.reasoning;if(ot(r)&&r.length>0&&t.push({type:"reasoning",reasoning:r}),typeof e.content=="string"){let i=e.content;const a=i.match(/<think>([\s\S]*?)<\/think>/);if(a){const s=a[1].trim();s.length>0&&t.push({type:"reasoning",reasoning:s}),i=i.replace(/<think>[\s\S]*?<\/think>/,"").trim()}i.length>0&&t.push({type:"text",text:i})}else for(const i of e.content)if(typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&ot(i.text)){let a=i.text;const s=a.match(/<think>([\s\S]*?)<\/think>/);if(s){const o=s[1].trim();o.length>0&&t.push({type:"reasoning",reasoning:o}),a=a.replace(/<think>[\s\S]*?<\/think>/,"").trim()}a.length>0&&t.push({type:"text",text:a})}for(const i of e.tool_calls??[])t.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return t}const OIe={translateContent:Kz,translateContentChunk:Kz};function Yz(e){var n;const t=[],r=(n=e.additional_kwargs)==null?void 0:n.reasoning_content;if(ot(r)&&r.length>0&&t.push({type:"reasoning",reasoning:r}),typeof e.content=="string")e.content.length>0&&t.push({type:"text",text:e.content});else for(const i of e.content)typeof i=="object"&&"type"in i&&i.type==="text"&&"text"in i&&ot(i.text)&&t.push({type:"text",text:i.text});for(const i of e.tool_calls??[])t.push({type:"tool_call",id:i.id,name:i.name,args:i.args});return t}const PIe={translateContent:Yz,translateContentChunk:Yz};function Xz(e){var n,i;const t=[];if(Yt((n=e.additional_kwargs)==null?void 0:n.reasoning)){const a=e.additional_kwargs.reasoning;if($o(a.summary)){const s=a.summary.reduce((o,l)=>Yt(l)&&ot(l.text)?`${o}${l.text}`:o,"");s.length>0&&t.push({type:"reasoning",reasoning:s})}}const r=(i=e.additional_kwargs)==null?void 0:i.reasoning_content;if(ot(r)&&r.length>0&&t.push({type:"reasoning",reasoning:r}),typeof e.content=="string")e.content.length>0&&t.push({type:"text",text:e.content});else for(const a of e.content)typeof a=="object"&&"type"in a&&a.type==="text"&&"text"in a&&ot(a.text)&&t.push({type:"text",text:a.text});for(const a of e.tool_calls??[])t.push({type:"tool_call",id:a.id,name:a.name,args:a.args});return t}const NIe={translateContent:Xz,translateContentChunk:Xz};function Zz(e){function*t(){const r=Mh(()=>typeof e.content=="string"?e.additional_kwargs.originalTextContentBlock?[{...e.additional_kwargs.originalTextContentBlock,type:"text"}]:[{type:"text",text:e.content}]:e.content);for(const n of r){const i=Mh(()=>Ot(n,"text")&&ot(n.text)?{type:"text",text:n.text}:Ot(n,"inlineData")&&Yt(n.inlineData)&&ot(n.inlineData.mimeType)&&ot(n.inlineData.data)?{type:"file",mimeType:n.inlineData.mimeType,data:n.inlineData.data}:Ot(n,"functionCall")&&Yt(n.functionCall)&&ot(n.functionCall.name)&&Yt(n.functionCall.args)?{type:"tool_call",id:e.id,name:n.functionCall.name,args:n.functionCall.args}:Ot(n,"functionResponse")?{type:"non_standard",value:n}:Ot(n,"fileData")&&Yt(n.fileData)&&ot(n.fileData.mimeType)&&ot(n.fileData.fileUri)?{type:"file",mimeType:n.fileData.mimeType,fileId:n.fileData.fileUri}:Ot(n,"executableCode")?{type:"non_standard",value:n}:Ot(n,"codeExecutionResult")?{type:"non_standard",value:n}:{type:"non_standard",value:n}),a=Mh(()=>"thought"in n&&n.thought?{type:"reasoning",reasoning:i.type==="text"?i.text:"",reasoningContentBlock:i}:i),s={thought:n.thought,thoughtSignature:n.thoughtSignature,partMetadata:n.partMetadata,...a};for(const o in s)s[o]===void 0&&delete s[o];yield s}}return Array.from(t())}const IIe={translateContent:Zz,translateContentChunk:Zz};globalThis.lc_block_translators_registry??(globalThis.lc_block_translators_registry=new Map([["anthropic",Y4e],["bedrock-converse",AIe],["deepseek",TIe],["google",IIe],["google-genai",kIe],["google-vertexai",CIe],["groq",OIe],["ollama",PIe],["openai",aIe],["xai",NIe]]));function Jie(e){return globalThis.lc_block_translators_registry.get(e)}var da=class extends Pl{constructor(t){var n;let r;if(typeof t=="string"||Array.isArray(t))r={content:t,tool_calls:[],invalid_tool_calls:[],additional_kwargs:{}};else{r=t;const i=(n=r.additional_kwargs)==null?void 0:n.tool_calls,a=r.tool_calls;i!=null&&i.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `pnpm install @langchain/anthropic`,","pnpm install @langchain/openai`, etc."].join(" "));try{if(i!=null&&a===void 0){const[s,o]=m$(i);r.tool_calls=s??[],r.invalid_tool_calls=o??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}if(r.response_metadata!==void 0&&"output_version"in r.response_metadata&&r.response_metadata.output_version==="v1"&&(r.contentBlocks=r.content,r.content=void 0),r.contentBlocks!==void 0){r.tool_calls&&r.contentBlocks.push(...r.tool_calls.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})));const s=r.contentBlocks.filter(o=>o.type==="tool_call").filter(o=>{var l;return!((l=r.tool_calls)!=null&&l.some(c=>c.id===o.id&&c.name===o.name))});s.length>0&&(r.tool_calls=s.map(o=>({type:"tool_call",id:o.id,name:o.name,args:o.args})))}}super(r);L(this,"type","ai");L(this,"tool_calls",[]);L(this,"invalid_tool_calls",[]);L(this,"usage_metadata");typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}static lc_name(){return"AIMessage"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const r=Jie(this.response_metadata.model_provider);if(r)return r.translateContent(this)}const t=super.contentBlocks;if(this.tool_calls){const r=this.tool_calls.filter(n=>!t.some(i=>i.id===n.id&&i.name===n.name));t.push(...r.map(n=>({type:"tool_call",id:n.id,name:n.name,args:n.args})))}return t}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}static isInstance(t){return super.isInstance(t)&&t.type==="ai"}};function em(e){return e._getType()==="ai"}function JR(e){return e._getType()==="ai"}var Dl=class extends pp{constructor(t){let r;if(typeof t=="string"||Array.isArray(t))r={content:t,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(t.tool_call_chunks===void 0||t.tool_call_chunks.length===0)r={...t,tool_calls:t.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:t.usage_metadata!==void 0?t.usage_metadata:void 0};else{const n=Qie(t.tool_call_chunks??[]);r={...t,tool_call_chunks:n.tool_call_chunks,tool_calls:n.tool_calls,invalid_tool_calls:n.invalid_tool_calls,usage_metadata:t.usage_metadata!==void 0?t.usage_metadata:void 0}}super(r);L(this,"type","ai");L(this,"tool_calls",[]);L(this,"invalid_tool_calls",[]);L(this,"tool_call_chunks",[]);L(this,"usage_metadata");this.tool_call_chunks=r.tool_call_chunks??this.tool_call_chunks,this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&this.response_metadata.output_version==="v1")return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&typeof this.response_metadata.model_provider=="string"){const r=Jie(this.response_metadata.model_provider);if(r)return r.translateContent(this)}const t=super.contentBlocks;if(this.tool_calls&&typeof this.content!="string"){const r=this.content.filter(n=>n.type==="tool_call").map(n=>n.id);for(const n of this.tool_calls)n.id&&!r.includes(n.id)&&t.push({...n,type:"tool_call",id:n.id,name:n.name,args:n.args})}return t}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(t){const r={content:nd(this.content,t.content),additional_kwargs:ps(this.additional_kwargs,t.additional_kwargs),response_metadata:Hie(this.response_metadata,t.response_metadata),tool_call_chunks:[],id:this.id??t.id};if(this.tool_call_chunks!==void 0||t.tool_call_chunks!==void 0){const i=s2(this.tool_call_chunks,t.tool_call_chunks);i!==void 0&&i.length>0&&(r.tool_call_chunks=i)}(this.usage_metadata!==void 0||t.usage_metadata!==void 0)&&(r.usage_metadata=h$(this.usage_metadata,t.usage_metadata));const n=this.constructor;return new n(r)}static isInstance(t){return super.isInstance(t)&&t.type==="ai"}};const RIe=e=>e();function LIe(e){return mx(e)?e:typeof e.id=="string"&&e.type==="function"&&typeof e.function=="object"&&e.function!==null&&"arguments"in e.function&&typeof e.function.arguments=="string"&&"name"in e.function&&typeof e.function.name=="string"?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function MIe(e){return typeof e=="object"&&e!=null&&e.lc===1&&Array.isArray(e.id)&&e.kwargs!=null&&typeof e.kwargs=="object"}function ZN(e){let t,r;if(MIe(e)){const n=e.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?t="user":n==="AIMessage"||n==="AIMessageChunk"?t="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?t="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?t="function":n==="ToolMessage"||n==="ToolMessageChunk"?t="tool":t="unknown",r=e.kwargs}else{const{type:n,...i}=e;t=n,r=i}if(t==="human"||t==="user")return new ms(r);if(t==="ai"||t==="assistant"){const{tool_calls:n,...i}=r;if(!Array.isArray(n))return new da(r);const a=n.map(LIe);return new da({...i,tool_calls:a})}else{if(t==="system")return new Bc(r);if(t==="developer")return new Bc({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if(t==="tool"&&"tool_call_id"in r)return new Fu({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});if(t==="remove"&&"id"in r&&typeof r.id=="string")return new I0({...r,id:r.id});throw o2(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Iu(e){if(typeof e=="string")return new ms(e);if(ji(e))return e;if(Array.isArray(e)){const[t,r]=e;return ZN({type:t,content:r})}else if(Wie(e)){const{role:t,...r}=e;return ZN({...r,type:t})}else return ZN(e)}function y$(e,t="Human",r="AI"){const n=[];for(const i of e){let a;if(i.type==="human")a=t;else if(i.type==="ai")a=r;else if(i.type==="system")a="System";else if(i.type==="tool")a="Tool";else if(i.type==="generic")a=i.role;else throw new Error(`Got unsupported message type: ${i.type}`);const s=i.name?`${i.name}, `:"",o=i.text;let l=`${a}: ${s}${o}`;if(i.type==="ai"){const c=i;c.tool_calls&&c.tool_calls.length>0?l+=JSON.stringify(c.tool_calls):c.additional_kwargs&&"function_call"in c.additional_kwargs&&(l+=JSON.stringify(c.additional_kwargs.function_call))}n.push(l)}return n.join(`
`)}function DIe(e){if(e.data!==void 0)return e;{const t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}function v$(e){const t=DIe(e);switch(t.type){case"human":return new ms(t.data);case"ai":return new da(t.data);case"system":return new Bc(t.data);case"function":if(t.data.name===void 0)throw new Error("Name must be defined for function messages");return new BC(t.data);case"tool":if(t.data.tool_call_id===void 0)throw new Error("Tool call ID must be defined for tool messages");return new Fu(t.data);case"generic":if(t.data.role===void 0)throw new Error("Role must be defined for chat messages");return new mp(t.data);default:throw new Error(`Got unexpected type: ${t.type}`)}}function jIe(e){return e.map(v$)}function $Ie(e){return e.map(t=>t.toDict())}function ZT(e){var r;const t=e._getType();if(t==="human")return new zC({...e});if(t==="ai"){let n={...e};return"tool_calls"in n&&(n={...n,tool_call_chunks:(r=n.tool_calls)==null?void 0:r.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Dl({...n})}else{if(t==="system")return new nv({...e});if(t==="function")return new UC({...e});if(mp.isInstance(e))return new FC({...e});throw new Error("Unknown message type.")}}function Qie(e){var i,a;const t=e.reduce((s,o)=>{const l=s.findIndex(([c])=>"id"in o&&o.id&&"index"in o&&o.index!==void 0?o.id===c.id&&o.index===c.index:"id"in o&&o.id?o.id===c.id:"index"in o&&o.index!==void 0?o.index===c.index:!1);return l!==-1?s[l].push(o):s.push([o]),s},[]),r=[],n=[];for(const s of t){let o=null;const l=((i=s[0])==null?void 0:i.name)??"",c=s.map(d=>d.args||"").join("").trim(),u=c.length?c:"{}",f=(a=s[0])==null?void 0:a.id;try{if(o=iv(u),!f||o===null||typeof o!="object"||Array.isArray(o))throw new Error("Malformed tool call chunk args.");r.push({name:l,args:o,id:f,type:"tool_call"})}catch{n.push({name:l,args:u,id:f,error:"Malformed args.",type:"invalid_tool_call"})}}return{tool_call_chunks:e,tool_calls:r,invalid_tool_calls:n}}const eae=Symbol.for("ls:tracing_async_local_storage"),gx=Symbol.for("lc:context_variables"),FIe=e=>{globalThis[eae]=e},kb=()=>globalThis[eae];var JN={},tae={};Gt(tae,{getEnv:()=>sae,getEnvironmentVariable:()=>Ru,getRuntimeEnvironment:()=>oae,isBrowser:()=>rae,isDeno:()=>VC,isJsDom:()=>iae,isNode:()=>aae,isWebWorker:()=>nae});const rae=()=>typeof window<"u"&&typeof window.document<"u",nae=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",iae=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),VC=()=>typeof Deno<"u",aae=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!VC(),sae=()=>{let e;return rae()?e="browser":aae()?e="node":nae()?e="webworker":iae()?e="jsdom":VC()?e="deno":e="other",e};let QN;function oae(){return QN===void 0&&(QN={library:"langchain-js",runtime:sae()}),QN}function Ru(e){try{return typeof process<"u"?JN==null?void 0:JN[e]:VC()?Deno==null?void 0:Deno.env.get(e):void 0}catch{return}}const BIe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function R0(e){return typeof e=="string"&&BIe.test(e)}function lae(e){if(!R0(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Na=[];for(var e4=0;e4<256;++e4)Na.push((e4+256).toString(16).slice(1));function n1(e,t=0){return(Na[e[t+0]]+Na[e[t+1]]+Na[e[t+2]]+Na[e[t+3]]+"-"+Na[e[t+4]]+Na[e[t+5]]+"-"+Na[e[t+6]]+Na[e[t+7]]+"-"+Na[e[t+8]]+Na[e[t+9]]+"-"+Na[e[t+10]]+Na[e[t+11]]+Na[e[t+12]]+Na[e[t+13]]+Na[e[t+14]]+Na[e[t+15]]).toLowerCase()}var eE,UIe=new Uint8Array(16);function w$(){if(!eE&&(eE=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eE(UIe)}var t4,tE,r4=0,n4=0;function zIe(e,t,r){var n=0,i=t||new Array(16);e=e||{};var a=e.node,s=e.clockseq;if(e._v6||(a||(a=t4),s==null&&(s=tE)),a==null||s==null){var o=e.random||(e.rng||w$)();a==null&&(a=[o[0],o[1],o[2],o[3],o[4],o[5]],!t4&&!e._v6&&(a[0]|=1,t4=a)),s==null&&(s=(o[6]<<8|o[7])&16383,tE===void 0&&!e._v6&&(tE=s))}var l=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:n4+1,u=l-r4+(c-n4)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||l>r4)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r4=l,n4=c,tE=s,l+=122192928e5;var f=((l&268435455)*1e4+c)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;var d=l/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(var h=0;h<6;++h)i[n+h]=a[h];return t||n1(i)}function VIe(e){var t=typeof e=="string"?lae(e):e,r=WIe(t);return typeof e=="string"?n1(r):r}function WIe(e,t=!1){return Uint8Array.of((e[6]&15)<<4|e[7]>>4&15,(e[7]&15)<<4|(e[4]&240)>>4,(e[4]&15)<<4|(e[5]&240)>>4,(e[5]&15)<<4|(e[0]&240)>>4,(e[0]&15)<<4|(e[1]&240)>>4,(e[1]&15)<<4|(e[2]&240)>>4,96|e[2]&15,e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function HIe(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var GIe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",qIe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function KIe(e,t,r){function n(i,a,s,o){var l;if(typeof i=="string"&&(i=HIe(i)),typeof a=="string"&&(a=lae(a)),((l=a)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,s){o=o||0;for(var u=0;u<16;++u)s[o+u]=c[u];return s}return n1(c)}try{n.name=e}catch{}return n.DNS=GIe,n.URL=qIe,n}var YIe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Jz={randomUUID:YIe};function Of(e,t,r){if(Jz.randomUUID&&!e)return Jz.randomUUID();e=e||{};var n=e.random||(e.rng||w$)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,n1(n)}function XIe(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function i4(e,t){return e<<t|e>>>32-t}function ZIe(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,s=Math.ceil(a/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[l*64+u*4]<<24|e[l*64+u*4+1]<<16|e[l*64+u*4+2]<<8|e[l*64+u*4+3];o[l]=c}o[s-1][14]=(e.length-1)*8/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(e.length-1)*8&4294967295;for(var f=0;f<s;++f){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=o[f][h];for(var m=16;m<80;++m)d[m]=i4(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var p=r[0],y=r[1],g=r[2],w=r[3],v=r[4],x=0;x<80;++x){var b=Math.floor(x/20),S=i4(p,5)+XIe(b,y,g,w)+v+t[b]+d[x]>>>0;v=w,w=g,g=i4(y,30)>>>0,y=p,p=S}r[0]=r[0]+p>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+g>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var JT=KIe("v5",80,ZIe);function Qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(r),!0).forEach(function(n){JIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JIe(e,t,r){return(t=QIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QIe(e){var t=e3e(e,"string");return typeof t=="symbol"?t:t+""}function e3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t3e(e={},t,r=0){var n=zIe(eV(eV({},e),{},{_v6:!0}),new Uint8Array(16));return n=VIe(n),n1(n)}var tV=null,rV=null,ec=0;function ah(e,t,r){e=e||{};var n=0,i=new Uint8Array(16),a=e.random||(e.rng||w$)(),s=e.msecs!==void 0?e.msecs:Date.now(),o=e.seq!==void 0?e.seq:null,l=rV,c=tV;return s>ec&&e.msecs===void 0&&(ec=s,o!==null&&(l=null,c=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,c=o&524287),(l===null||c===null)&&(l=a[6]&127,l=l<<8|a[7],c=a[8]&63,c=c<<8|a[9],c=c<<5|a[10]>>>3),s+1e4>ec&&o===null?++c>524287&&(c=0,++l>4095&&(l=0,ec++)):ec=s,rV=l,tV=c,i[n++]=ec/1099511627776&255,i[n++]=ec/4294967296&255,i[n++]=ec/16777216&255,i[n++]=ec/65536&255,i[n++]=ec/256&255,i[n++]=ec&255,i[n++]=l>>>4&15|112,i[n++]=l&255,i[n++]=c>>>13&63|128,i[n++]=c>>>5&255,i[n++]=c<<3&255|a[10]&7,i[n++]=a[11],i[n++]=a[12],i[n++]=a[13],i[n++]=a[14],i[n++]=a[15],t||n1(i)}var cae={};Gt(cae,{BaseCallbackHandler:()=>i1,callbackHandlerPrefersStreaming:()=>x$,isBaseCallbackHandler:()=>uae});var r3e=class{};function x$(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}var i1=class extends r3e{constructor(t){super();L(this,"lc_serializable",!1);L(this,"lc_kwargs");L(this,"ignoreLLM",!1);L(this,"ignoreChain",!1);L(this,"ignoreAgent",!1);L(this,"ignoreRetriever",!1);L(this,"ignoreCustomEvent",!1);L(this,"raiseError",!1);L(this,"awaitHandlers",Ru("LANGCHAIN_CALLBACKS_BACKGROUND")==="false");this.lc_kwargs=t||{},t&&(this.ignoreLLM=t.ignoreLLM??this.ignoreLLM,this.ignoreChain=t.ignoreChain??this.ignoreChain,this.ignoreAgent=t.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=t.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=t.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=t.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(t._awaitHandler??this.awaitHandlers))}get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,DC(this.constructor)]}copy(){return new this.constructor(this)}toJSON(){return Ml.prototype.toJSON.call(this)}toJSONNotImplemented(){return Ml.prototype.toJSONNotImplemented.call(this)}static fromMethods(t){class r extends i1{constructor(){super();L(this,"name",ah());Object.assign(this,t)}}return new r}};const uae=e=>{const t=e;return t!==void 0&&typeof t.copy=="function"&&typeof t.name=="string"&&typeof t.awaitHandlers=="boolean"},n3e="gen_ai.operation.name",i3e="gen_ai.system",nV="gen_ai.request.model",a3e="gen_ai.response.model",iV="gen_ai.usage.input_tokens",aV="gen_ai.usage.output_tokens",sV="gen_ai.usage.total_tokens",s3e="gen_ai.request.max_tokens",o3e="gen_ai.request.temperature",l3e="gen_ai.request.top_p",c3e="gen_ai.request.frequency_penalty",u3e="gen_ai.request.presence_penalty",f3e="gen_ai.response.finish_reasons",d3e="gen_ai.prompt",h3e="gen_ai.completion",p3e="gen_ai.request.extra_query",m3e="gen_ai.request.extra_body",g3e="gen_ai.serialized.name",y3e="gen_ai.serialized.signature",v3e="gen_ai.serialized.doc",w3e="gen_ai.response.id",x3e="gen_ai.response.service_tier",b3e="gen_ai.response.system_fingerprint",_3e="gen_ai.usage.input_token_details",S3e="gen_ai.usage.output_token_details",E3e="langsmith.trace.session_id",A3e="langsmith.trace.session_name",T3e="langsmith.span.kind",k3e="langsmith.trace.name",C3e="langsmith.metadata",oV="langsmith.span.tags",O3e="langsmith.request.streaming",P3e="langsmith.request.headers",N3e=(...e)=>fetch(...e),fae=Symbol.for("ls:fetch_implementation"),I3e=()=>globalThis[fae]===void 0,R3e=e=>async(...t)=>{if(e||ks("DEBUG")==="true"){const[n,i]=t;console.log(` ${(i==null?void 0:i.method)||"GET"} ${n}`)}const r=await(globalThis[fae]??N3e)(...t);return(e||ks("DEBUG")==="true")&&console.log(` ${r.status} ${r.statusText} ${r.url}`),r},dae=()=>ks("PROJECT")??Bu("LANGCHAIN_SESSION")??"default",lV={};function AA(e){lV[e]||(console.warn(e),lV[e]=!0)}const Xe=e=>BigInt(e),hae=Xe("0x9E3779B1"),pae=Xe("0x85EBCA77"),L3e=Xe("0xC2B2AE3D"),Qh=Xe("0x9E3779B185EBCA87"),tm=Xe("0xC2B2AE3D27D4EB4F"),mae=Xe("0x165667B19E3779F9"),b$=Xe("0x85EBCA77C2B2AE63"),M3e=Xe("0x27D4EB2F165667C5"),D3e=Xe("0x165667919E3779F9"),j3e=Xe("0x9FB21C651E98DF25");function $3e(e){const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substring(r,r+2),16);return t}const mu=$3e("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),Ty=(Xe(1)<<Xe(128))-Xe(1),br=(Xe(1)<<Xe(64))-Xe(1),QT=(Xe(1)<<Xe(32))-Xe(1),Ef=64,gae=Ef/8,F3e=8,rE=4;function Tn(e,t=0){return new Uint8Array(e.buffer,e.byteOffset+t,e.length-t)}function jn(e,t=0){return new DataView(e.buffer,e.byteOffset+t).getBigUint64(0,!0)}function Yg(e,t=0){return new DataView(e.buffer,e.byteOffset+t).getUint32(0,!0)}function a4(e,t=0){return e[t]}const B3e=e=>(e&Xe(255))<<Xe(56)|(e&Xe(65280))<<Xe(40)|(e&Xe(16711680))<<Xe(24)|(e&Xe(4278190080))<<Xe(8)|(e&Xe(0xff00000000))>>Xe(8)|(e&Xe(0xff0000000000))>>Xe(24)|(e&Xe(0xff000000000000))>>Xe(40)|(e&Xe(0xff00000000000000))>>Xe(56),U3e=e=>(e=(e&Xe(65535))<<Xe(16)|(e&Xe(4294901760))>>Xe(16),e=(e&Xe(16711935))<<Xe(8)|(e&Xe(4278255360))>>Xe(8),e),z3e=(e,t)=>(e&QT)*(t&QT)&br,av=e=>{if(!e)throw new Error("Assert failed")};function V3e(e,t){return(e<<t|e>>Xe(32)-t)&QT}function yae(e,t,r){for(let n=0;n<gae;n++){const i=jn(t,n*8),a=i^jn(r,n*8);e[n^1]+=i,e[n]+=z3e(a,a>>Xe(32))}return e}function cV(e,t,r,n){for(let i=0;i<n;i++)yae(e,Tn(t,i*Ef),Tn(r,i*8));return e}function W3e(e,t){for(let r=0;r<gae;r++){const n=jn(t,r*8);let i=e[r];i=QR(i,Xe(47)),i^=n,i*=hae,e[r]=i&br}return e}function nE(e,t){return vae(e[0]^jn(t,0),e[1]^jn(t,F3e))}function uV(e,t,r){let n=r;return n+=nE(e.slice(0),Tn(t,0*rE)),n+=nE(e.slice(2),Tn(t,4*rE)),n+=nE(e.slice(4),Tn(t,8*rE)),n+=nE(e.slice(6),Tn(t,12*rE)),Su(n&br)}function H3e(e,t,r,n,i){const a=Math.floor((r.byteLength-Ef)/8),s=Ef*a,o=Math.floor((t.byteLength-1)/s);for(let l=0;l<o;l++)e=cV(e,Tn(t,l*s),r,a),e=i(e,Tn(r,r.byteLength-Ef));{const l=Math.floor((t.byteLength-1-s*o)/Ef);e=cV(e,Tn(t,o*s),r,l),e=n(e,Tn(t,t.byteLength-Ef),Tn(r,r.byteLength-Ef-7))}return e}function G3e(e,t,r){let n=new BigUint64Array([L3e,Qh,tm,mae,b$,pae,M3e,hae]);av(e.length>128),n=H3e(n,e,t,yae,W3e),av(n.length*8==64);{const i=uV(n,Tn(t,11),Xe(e.byteLength)*Qh&br);return uV(n,Tn(t,t.byteLength-Ef-11),~(Xe(e.byteLength)*tm)&br)<<Xe(64)|i}}function vae(e,t){const r=e*t&Ty;return r&br^r>>Xe(64)}function fV(e,t,r){return vae((jn(e,0)^jn(t,0)+r)&br,(jn(e,8)^jn(t,8)-r)&br)}function TA(e,t,r,n,i){let a=e&br,s=e>>Xe(64)&br;return a+=fV(t,n,i),a^=jn(r,0)+jn(r,8),a&=br,s+=fV(r,Tn(n,16),i),s^=jn(t,0)+jn(t,8),s&=br,s<<Xe(64)|a}function Su(e){return e^=e>>Xe(37),e*=D3e,e&=br,e^=e>>Xe(32),e}function ek(e){return e^=e>>Xe(33),e*=tm,e&=br,e^=e>>Xe(29),e*=mae,e&=br,e^=e>>Xe(32),e}function q3e(e,t,r){const n=e.byteLength;av(n>0&&n<=3);const i=Xe(a4(e,n-1))|Xe(n<<8)|Xe(a4(e,0)<<16)|Xe(a4(e,n>>1)<<24),a=(Xe(Yg(t,0))^Xe(Yg(t,4)))+r,s=(i^a)&br,o=(Xe(Yg(t,8))^Xe(Yg(t,12)))-r,l=(V3e(U3e(i),Xe(13))^o)&br;return(ek(l)&br)<<Xe(64)|ek(s)}function QR(e,t){return e^e>>t}function K3e(e,t,r){const n=e.byteLength;av(n>=4&&n<=8);{const i=Yg(e,0),a=Yg(e,n-4),s=Xe(i)|Xe(a)<<Xe(32),o=(jn(t,16)^jn(t,24))+r&br;let c=(s^o)*(Qh+(Xe(n)<<Xe(2)))&Ty;return c+=(c&br)<<Xe(65),c&=Ty,c^=c>>Xe(67),QR(QR(c&br,Xe(35))*j3e&br,Xe(28))|Su(c>>Xe(64))<<Xe(64)}}function Y3e(e,t,r){const n=e.byteLength;av(n>=9&&n<=16);{const i=(jn(t,32)^jn(t,40))+r&br,a=(jn(t,48)^jn(t,56))-r&br,s=jn(e);let o=jn(e,n-8),l=(s^o^i)*Qh;const c=(l&br)+(Xe(n-1)<<Xe(54));l=l&(Ty^br)|c,o^=a,l+=o+(o&QT)*(pae-Xe(1))<<Xe(64),l&=Ty,l^=B3e(l>>Xe(64));let u=(l&br)*tm;return u+=(l>>Xe(64))*tm<<Xe(64),u&=Ty,Su(u&br)|Su(u>>Xe(64))<<Xe(64)}}function X3e(e,t){const r=e.byteLength;return av(r<=16),r>8?Y3e(e,mu,t):r>=4?K3e(e,mu,t):r>0?q3e(e,mu,t):ek(t^jn(mu,64)^jn(mu,72))|ek(t^jn(mu,80)^jn(mu,88))<<Xe(64)}function eL(e){return~e+Xe(1)&br}function Z3e(e,t,r){let n=Xe(e.byteLength)*Qh&br,i=Xe(e.byteLength-1)/Xe(32);for(;i>=0;){const o=Number(i);n=TA(n,Tn(e,16*o),Tn(e,e.byteLength-16*(o+1)),Tn(t,32*o),r),i--}let a=n+(n>>Xe(64))&br;a=Su(a);let s=(n&br)*Qh+(n>>Xe(64))*b$+(Xe(e.byteLength)-r&br)*tm;return s&=br,s=eL(Su(s)),a|s<<Xe(64)}function J3e(e,t,r){let n=Xe(e.byteLength)*Qh&br;for(let s=32;s<160;s+=32)n=TA(n,Tn(e,s-32),Tn(e,s-16),Tn(t,s-32),r);n=Su(n&br)|Su(n>>Xe(64))<<Xe(64);for(let s=160;s<=e.byteLength;s+=32)n=TA(n,Tn(e,s-32),Tn(e,s-16),Tn(t,3+s-160),r);n=TA(n,Tn(e,e.byteLength-16),Tn(e,e.byteLength-32),Tn(t,103),eL(r));let i=n+(n>>Xe(64))&br;i=Su(i);let a=(n&br)*Qh+(n>>Xe(64))*b$+(Xe(e.byteLength)-r&br)*tm;return a&=br,a=eL(Su(a)),i|a<<Xe(64)}function Q3e(e,t=Xe(0)){const r=e.byteLength;return r<=16?X3e(e,t):r<=128?Z3e(e,mu,t):r<=240?J3e(e,mu,t):G3e(e,mu)}function eRe(e){const t=new Uint8Array(16),r=new DataView(t.buffer),n=e&br,i=e>>Xe(64);return r.setBigUint64(0,i,!1),r.setBigUint64(8,n,!1),t}const wae=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function fr(e,t){if(!wae.test(e)){const r=t!==void 0?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`;throw new Error(r)}return e}function tRe(e){const t=typeof e=="string"?Date.parse(e):e;return ah({msecs:t,seq:0})}function rRe(e){if(!wae.test(e))return null;const t=e[14];return parseInt(t,16)}function nRe(e){const t=e.replace(/-/g,""),r=new Uint8Array(16);for(let n=0;n<16;n++)r[n]=parseInt(t.slice(n*2,n*2+2),16);return r}function iRe(e){const t=Array.from(e).map(r=>r.toString(16).padStart(2,"0")).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`}const aRe=new TextEncoder;function sRe(e){const t=aRe.encode(e),r=Q3e(t);return eRe(r)}function iE(e,t){const r=`${e}:${t}`,n=sRe(r),i=new Uint8Array(16);if(rRe(e)===7){const s=nRe(e);i.set(s.slice(0,6),0)}else{const s=Date.now();i[0]=s/1099511627776&255,i[1]=s/4294967296&255,i[2]=s/16777216&255,i[3]=s/65536&255,i[4]=s/256&255,i[5]=s&255}return i[6]=112|n[0]&15,i[7]=n[1],i[8]=128|n[2]&63,i.set(n.slice(3,10),9),iRe(i)}function oRe(e,t){throw new Error("dump() is not supported in browser environments.")}function lRe(e){throw new Error("load() is not supported in browser environments.")}function cRe(e,t){return t===null?!1:Date.now()-e.createdAt>t*1e3}class uRe{constructor(t={}){Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ttlSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshIntervalSeconds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"refreshTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_metrics",{enumerable:!0,configurable:!0,writable:!0,value:{hits:0,misses:0,refreshes:0,refreshErrors:0}}),this.configure(t)}get metrics(){return{...this._metrics}}get totalRequests(){return this._metrics.hits+this._metrics.misses}get hitRate(){const t=this.totalRequests;return t>0?this._metrics.hits/t:0}resetMetrics(){this._metrics={hits:0,misses:0,refreshes:0,refreshErrors:0}}get(t,r){if(this.maxSize===0)return;const n=this.cache.get(t);if(!n){this._metrics.misses+=1;return}return this.cache.delete(t),this.cache.set(t,{...n,refreshFunc:r}),this._metrics.hits+=1,n.value}set(t,r,n){if(this.maxSize===0)return;if(this.refreshTimer===void 0&&this.startRefreshLoop(),!this.cache.has(t)&&this.cache.size>=this.maxSize){const a=this.cache.keys().next().value;a!==void 0&&this.cache.delete(a)}const i={value:r,createdAt:Date.now(),refreshFunc:n};this.cache.delete(t),this.cache.set(t,i)}invalidate(t){this.cache.delete(t)}clear(){this.cache.clear()}get size(){return this.cache.size}stop(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=void 0)}dump(t){for(const[r,n]of this.cache.entries())n.value;oRe()}load(t){const r=lRe();if(!r)return 0;let n=0;const i=Date.now();for(const[a,s]of Object.entries(r)){if(this.cache.size>=this.maxSize)break;const o={value:s,createdAt:i};this.cache.set(a,o),n+=1}return n}startRefreshLoop(){this.stop(),this.ttlSeconds!==null&&(this.refreshTimer=setInterval(()=>{this.refreshStaleEntries().catch(t=>{console.warn("Unexpected error in cache refresh loop:",t)})},this.refreshIntervalSeconds*1e3),this.refreshTimer.unref&&this.refreshTimer.unref())}getStaleEntries(){const t=[];for(const[r,n]of this.cache.entries())cRe(n,this.ttlSeconds)&&t.push([r,n]);return t}async refreshStaleEntries(){const t=this.getStaleEntries();if(t.length!==0){for(const[r,n]of t)if(n.refreshFunc!==void 0)try{const i=await n.refreshFunc();this.set(r,i,n.refreshFunc),this._metrics.refreshes+=1}catch(i){this._metrics.refreshErrors+=1,console.warn(`Failed to refresh cache entry ${r}:`,i)}}}configure(t){this.stop(),this.refreshIntervalSeconds=t.refreshIntervalSeconds??60,this.maxSize=t.maxSize??100,this.ttlSeconds=t.ttlSeconds??5*60}}const dV=new uRe,xae="0.5.4";var yx={};let su;const fRe=()=>typeof window<"u"&&typeof window.document<"u",dRe=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",hRe=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),bae=()=>typeof Deno<"u",pRe=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!bae(),_ae=()=>su||(typeof Bun<"u"?su="bun":fRe()?su="browser":pRe()?su="node":dRe()?su="webworker":hRe()?su="jsdom":bae()?su="deno":su="other",su);let s4;function Sae(){if(s4===void 0){const e=_ae(),t=gRe();s4={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:xae,...t}}return s4}function Eae(){const e=mRe(),t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[n,i]of Object.entries(e))typeof i=="string"&&!r.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?t.revision_id=i:t[n]=i);return t}function mRe(){const e={};try{if(typeof process<"u"&&yx)for(const[t,r]of Object.entries(yx))(t.startsWith("LANGCHAIN_")||t.startsWith("LANGSMITH_"))&&r!=null&&((t.toLowerCase().includes("key")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"))&&typeof r=="string"?e[t]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2):e[t]=r)}catch{}return e}function Bu(e){try{return typeof process<"u"?yx==null?void 0:yx[e]:void 0}catch{return}}function ks(e){return Bu(`LANGSMITH_${e}`)||Bu(`LANGCHAIN_${e}`)}let o4;function gRe(){if(o4!==void 0)return o4;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const r of e){const n=Bu(r);n!==void 0&&(t[r]=n)}return o4=t,t}function Aae(){return Bu("OTEL_ENABLED")==="true"||ks("OTEL_ENABLED")==="true"}class yRe{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(t,...r){!this.hasWarned&&Aae()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0);let n;if(r.length===1&&typeof r[0]=="function"?n=r[0]:r.length===2&&typeof r[1]=="function"?n=r[1]:r.length===3&&typeof r[2]=="function"&&(n=r[2]),typeof n=="function")return n()}}class vRe{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new yRe})}getTracer(t,r){return this.mockTracer}getActiveSpan(){}setSpan(t,r){return t}getSpan(t){}setSpanContext(t,r){return t}getTracerProvider(){}setGlobalTracerProvider(t){return!1}}class wRe{active(){return{}}with(t,r){return r()}}const l4=Symbol.for("ls:otel_trace"),c4=Symbol.for("ls:otel_context"),hV=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),xRe=new vRe,bRe=new wRe;class _Re{getTraceInstance(){return globalThis[l4]??xRe}getContextInstance(){return globalThis[c4]??bRe}initializeGlobalInstances(t){globalThis[l4]===void 0&&(globalThis[l4]=t.trace),globalThis[c4]===void 0&&(globalThis[c4]=t.context)}setDefaultOTLPTracerComponents(t){globalThis[hV]=t}getDefaultOTLPTracerComponents(){return globalThis[hV]??void 0}}const _$=new _Re;function Tae(){return _$.getTraceInstance()}function SRe(){return _$.getContextInstance()}function ERe(){return _$.getDefaultOTLPTracerComponents()}const ARe={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function TRe(e){return ARe[e]||e}class kRe{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(t,r){for(const n of t)try{if(!n.run)continue;if(n.operation==="post"){const i=this.createSpanForRun(n,n.run,r.get(n.id));i&&!n.run.end_time&&this.spans.set(n.id,i)}else this.updateSpanForRun(n,n.run)}catch(i){console.error(`Error processing operation ${n.id}:`,i)}}createSpanForRun(t,r,n){const i=n&&Tae().getSpan(n);if(i)try{return this.finishSpanSetup(i,r,t)}catch(a){console.error(`Failed to create span for run ${t.id}:`,a);return}}finishSpanSetup(t,r,n){return this.setSpanAttributes(t,r,n),r.error?(t.setStatus({code:2}),t.recordException(new Error(r.error))):t.setStatus({code:1}),r.end_time&&t.end(new Date(r.end_time)),t}updateSpanForRun(t,r){try{const n=this.spans.get(t.id);if(!n){console.debug(`No span found for run ${t.id} during update`);return}this.setSpanAttributes(n,r,t),r.error?(n.setStatus({code:2}),n.recordException(new Error(r.error))):n.setStatus({code:1});const i=r.end_time;i&&(n.end(new Date(i)),this.spans.delete(t.id))}catch(n){console.error(`Failed to update span for run ${t.id}:`,n)}}extractModelName(t){var r;if((r=t.extra)!=null&&r.metadata){const n=t.extra.metadata;if(n.ls_model_name)return n.ls_model_name;if(n.invocation_params){const i=n.invocation_params;if(i.model)return i.model;if(i.model_name)return i.model_name}}}setSpanAttributes(t,r,n){var o;if("run_type"in r&&r.run_type){t.setAttribute(T3e,r.run_type);const l=TRe(r.run_type||"chain");t.setAttribute(n3e,l)}"name"in r&&r.name&&t.setAttribute(k3e,r.name),"session_id"in r&&r.session_id&&t.setAttribute(E3e,r.session_id),"session_name"in r&&r.session_name&&t.setAttribute(A3e,r.session_name),this.setGenAiSystem(t,r);const i=this.extractModelName(r);i&&t.setAttribute(nV,i),"prompt_tokens"in r&&typeof r.prompt_tokens=="number"&&t.setAttribute(iV,r.prompt_tokens),"completion_tokens"in r&&typeof r.completion_tokens=="number"&&t.setAttribute(aV,r.completion_tokens),"total_tokens"in r&&typeof r.total_tokens=="number"&&t.setAttribute(sV,r.total_tokens),this.setInvocationParameters(t,r);const a=((o=r.extra)==null?void 0:o.metadata)||{};for(const[l,c]of Object.entries(a))c!=null&&t.setAttribute(`${C3e}.${l}`,String(c));const s=r.tags;if(s&&Array.isArray(s)?t.setAttribute(oV,s.join(", ")):s&&t.setAttribute(oV,String(s)),"serialized"in r&&typeof r.serialized=="object"){const l=r.serialized;l.name&&t.setAttribute(g3e,String(l.name)),l.signature&&t.setAttribute(y3e,String(l.signature)),l.doc&&t.setAttribute(v3e,String(l.doc))}this.setIOAttributes(t,n)}setGenAiSystem(t,r){let n="langchain";const i=this.extractModelName(r);if(i){const a=i.toLowerCase();a.includes("anthropic")||a.startsWith("claude")?n="anthropic":a.includes("bedrock")?n="aws.bedrock":a.includes("azure")&&a.includes("openai")?n="az.ai.openai":a.includes("azure")&&a.includes("inference")?n="az.ai.inference":a.includes("cohere")?n="cohere":a.includes("deepseek")?n="deepseek":a.includes("gemini")?n="gemini":a.includes("groq")?n="groq":a.includes("watson")||a.includes("ibm")?n="ibm.watsonx.ai":a.includes("mistral")?n="mistral_ai":a.includes("gpt")||a.includes("openai")?n="openai":a.includes("perplexity")||a.includes("sonar")?n="perplexity":a.includes("vertex")?n="vertex_ai":(a.includes("xai")||a.includes("grok"))&&(n="xai")}t.setAttribute(i3e,n)}setInvocationParameters(t,r){var i,a;if(!((a=(i=r.extra)==null?void 0:i.metadata)!=null&&a.invocation_params))return;const n=r.extra.metadata.invocation_params;n.max_tokens!==void 0&&t.setAttribute(s3e,n.max_tokens),n.temperature!==void 0&&t.setAttribute(o3e,n.temperature),n.top_p!==void 0&&t.setAttribute(l3e,n.top_p),n.frequency_penalty!==void 0&&t.setAttribute(c3e,n.frequency_penalty),n.presence_penalty!==void 0&&t.setAttribute(u3e,n.presence_penalty)}setIOAttributes(t,r){if(r.run.inputs)try{const n=r.run.inputs;typeof n=="object"&&n!==null&&(n.model&&Array.isArray(n.messages)&&t.setAttribute(nV,n.model),n.stream!==void 0&&t.setAttribute(O3e,n.stream),n.extra_headers&&t.setAttribute(P3e,JSON.stringify(n.extra_headers)),n.extra_query&&t.setAttribute(p3e,JSON.stringify(n.extra_query)),n.extra_body&&t.setAttribute(m3e,JSON.stringify(n.extra_body))),t.setAttribute(d3e,JSON.stringify(n))}catch(n){console.debug(`Failed to process inputs for run ${r.id}`,n)}if(r.run.outputs)try{const n=r.run.outputs,i=this.getUnifiedRunTokens(n);if(i&&(t.setAttribute(iV,i[0]),t.setAttribute(aV,i[1]),t.setAttribute(sV,i[0]+i[1])),n&&typeof n=="object"){if(n.model&&t.setAttribute(a3e,String(n.model)),n.id&&t.setAttribute(w3e,n.id),n.choices&&Array.isArray(n.choices)){const a=n.choices.map(s=>s.finish_reason).filter(s=>s).map(String);a.length>0&&t.setAttribute(f3e,a.join(", "))}if(n.service_tier&&t.setAttribute(x3e,n.service_tier),n.system_fingerprint&&t.setAttribute(b3e,n.system_fingerprint),n.usage_metadata&&typeof n.usage_metadata=="object"){const a=n.usage_metadata;a.input_token_details&&t.setAttribute(_3e,JSON.stringify(a.input_token_details)),a.output_token_details&&t.setAttribute(S3e,JSON.stringify(a.output_token_details))}}t.setAttribute(h3e,JSON.stringify(n))}catch(n){console.debug(`Failed to process outputs for run ${r.id}`,n)}}getUnifiedRunTokens(t){if(!t)return null;let r=this.extractUnifiedRunTokens(t.usage_metadata);if(r)return r;const n=Object.keys(t);for(const s of n){const o=t[s];if(!(!o||typeof o!="object")&&(r=this.extractUnifiedRunTokens(o.usage_metadata),r||o.lc===1&&o.kwargs&&typeof o.kwargs=="object"&&(r=this.extractUnifiedRunTokens(o.kwargs.usage_metadata),r)))return r}const i=t.generations||[];if(!Array.isArray(i))return null;const a=Array.isArray(i[0])?i.flat():i;for(const s of a)if(typeof s=="object"&&s.message&&typeof s.message=="object"&&s.message.kwargs&&typeof s.message.kwargs=="object"&&(r=this.extractUnifiedRunTokens(s.message.kwargs.usage_metadata),r))return r;return null}extractUnifiedRunTokens(t){return!t||typeof t!="object"||typeof t.input_tokens!="number"||typeof t.output_tokens!="number"?null:[t.input_tokens,t.output_tokens]}}const CRe=Object.prototype.toString,ORe=e=>CRe.call(e)==="[object Error]",PRe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function NRe(e){if(!(e&&ORe(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;const{message:r,stack:n}=e;return r==="Load failed"?n===void 0||"__sentry_captured__"in e:r.startsWith("error sending request for url")?!0:PRe.has(r)}function IRe(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function aE(e,t,{min:r=0,allowInfinity:n=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<r)throw new TypeError(`Expected \`${e}\` to be  ${r}.`)}}let RRe=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}};function LRe(e,t){const r=Math.max(1,e+1),n=t.randomize?Math.random()+1:1;let i=Math.round(n*t.minTimeout*t.factor**(r-1));return i=Math.min(i,t.maxTimeout),i}function pV(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function MRe({error:e,attemptNumber:t,retriesConsumed:r,startTime:n,options:i}){var h,m,p;const a=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof RRe)throw a.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-r):i.retries,o=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:a,attemptNumber:t,retriesLeft:s,retriesConsumed:r});if(await i.onFailedAttempt(l),pV(n,o)<=0)throw a;const c=await i.shouldConsumeRetry(l),u=pV(n,o);if(u<=0||s<=0)throw a;if(a instanceof TypeError&&!NRe(a)){if(c)throw a;return(h=i.signal)==null||h.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!c)return(m=i.signal)==null||m.throwIfAborted(),!1;const f=LRe(r,i),d=Math.min(f,u);return d>0&&await new Promise((y,g)=>{var x,b;const w=()=>{var S;clearTimeout(v),(S=i.signal)==null||S.removeEventListener("abort",w),g(i.signal.reason)},v=setTimeout(()=>{var S;(S=i.signal)==null||S.removeEventListener("abort",w),y()},d);i.unref&&((x=v.unref)==null||x.call(v)),(b=i.signal)==null||b.addEventListener("abort",w,{once:!0})}),(p=i.signal)==null||p.throwIfAborted(),!0}async function DRe(e,t={}){var a,s,o;if(t={...t},IRe(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??(t.retries=10),t.factor??(t.factor=2),t.minTimeout??(t.minTimeout=1e3),t.maxTimeout??(t.maxTimeout=Number.POSITIVE_INFINITY),t.maxRetryTime??(t.maxRetryTime=Number.POSITIVE_INFINITY),t.randomize??(t.randomize=!1),t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.shouldConsumeRetry??(t.shouldConsumeRetry=()=>!0),aE("factor",t.factor,{min:0,allowInfinity:!1}),aE("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),aE("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),aE("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),(a=t.signal)==null||a.throwIfAborted();let r=0,n=0;const i=performance.now();for(;!Number.isFinite(t.retries)||n<=t.retries;){r++;try{(s=t.signal)==null||s.throwIfAborted();const l=await e(r);return(o=t.signal)==null||o.throwIfAborted(),l}catch(l){await MRe({error:l,attemptNumber:r,retriesConsumed:n,startTime:i,options:t})&&n++}}throw new Error("Retry attempts exhausted without throwing an error.")}var kae={},Cae={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,f||l,d),m=r?r+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)t.call(u,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=r?r+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,m=new Array(h);d<h;d++)m[d]=f[d].fn;return m},o.prototype.listenerCount=function(c){var u=r?r+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,d,h,m){var p=r?r+c:c;if(!this._events[p])return!1;var y=this._events[p],g=arguments.length,w,v;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,d),!0;case 5:return y.fn.call(y.context,u,f,d,h),!0;case 6:return y.fn.call(y.context,u,f,d,h,m),!0}for(v=1,w=new Array(g-1);v<g;v++)w[v-1]=arguments[v];y.fn.apply(y.context,w)}else{var x=y.length,b;for(v=0;v<x;v++)switch(y[v].once&&this.removeListener(c,y[v].fn,void 0,!0),g){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,f);break;case 4:y[v].fn.call(y[v].context,u,f,d);break;default:if(!w)for(b=1,w=new Array(g-1);b<g;b++)w[b-1]=arguments[b];y[v].fn.apply(y[v].context,w)}}return!0},o.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,d){var h=r?r+c:c;if(!this._events[h])return this;if(!u)return s(this,h),this;var m=this._events[h];if(m.fn)m.fn===u&&(!d||m.once)&&(!f||m.context===f)&&s(this,h);else{for(var p=0,y=[],g=m.length;p<g;p++)(m[p].fn!==u||d&&!m[p].once||f&&m[p].context!==f)&&y.push(m[p]);y.length?this._events[h]=y.length===1?y[0]:y:s(this,h)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(Cae);var Oae=Cae.exports;const jRe=Hr(Oae);var WC={exports:{}},$Re=(e,t)=>(t=t||(()=>{}),e.then(r=>new Promise(n=>{n(t())}).then(()=>r),r=>new Promise(n=>{n(t())}).then(()=>{throw r})));const FRe=$Re;class Pae extends Error{constructor(t){super(t),this.name="TimeoutError"}}const Nae=(e,t,r)=>new Promise((n,i)=>{if(typeof t!="number"||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){n(e);return}const a=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(l){i(l)}return}const s=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,o=r instanceof Error?r:new Pae(s);typeof e.cancel=="function"&&e.cancel(),i(o)},t);FRe(e.then(n,i),()=>{clearTimeout(a)})});WC.exports=Nae;WC.exports.default=Nae;WC.exports.TimeoutError=Pae;var BRe=WC.exports,S$={},E$={};Object.defineProperty(E$,"__esModule",{value:!0});function URe(e,t,r){let n=0,i=e.length;for(;i>0;){const a=i/2|0;let s=n+a;r(e[s],t)<=0?(n=++s,i-=a+1):i=a}return n}E$.default=URe;Object.defineProperty(S$,"__esModule",{value:!0});const zRe=E$;class VRe{constructor(){this._queue=[]}enqueue(t,r){r=Object.assign({priority:0},r);const n={priority:r.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}const i=zRe.default(this._queue,n,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){const t=this._queue.shift();return t==null?void 0:t.run}filter(t){return this._queue.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this._queue.length}}S$.default=VRe;Object.defineProperty(kae,"__esModule",{value:!0});const WRe=Oae,Iae=BRe,HRe=S$,sE=()=>{},GRe=new Iae.TimeoutError;let qRe=class extends WRe{constructor(t){var r,n,i,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=sE,this._resolveIdle=sE,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:HRe.default},t),!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||t.interval===0,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=t.throwOnTimeout===!0,this._isPaused=t.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=sE,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=sE,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const t=Date.now();if(this._intervalId===void 0){const r=this._intervalEnd-t;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const r=this._queue.dequeue();return r?(this.emit("active"),r(),t&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,r={}){return new Promise((n,i)=>{const a=async()=>{this._pendingCount++,this._intervalCount++;try{const s=this._timeout===void 0&&r.timeout===void 0?t():Iae.default(Promise.resolve(t()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(GRe)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,r),this._tryToStartAnother(),this.emit("add")})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(t=>{const r=this._resolveEmpty;this._resolveEmpty=()=>{r(),t()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(t=>{const r=this._resolveIdle;this._resolveIdle=()=>{r(),t()}})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}};var zf=kae.default=qRe;const KRe="default"in zf?zf.default:zf,YRe=[408,425,429,500,502,503,504];let mV=class{constructor(t){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=t.maxConcurrency??1/0,this.maxRetries=t.maxRetries??6,this.maxQueueSizeBytes=t.maxQueueSizeBytes,this.queue=new KRe({concurrency:this.maxConcurrency}),this.onFailedResponseHook=t==null?void 0:t.onFailedResponseHook}call(t,...r){return this.callWithOptions({},t,...r)}callWithOptions(t,r,...n){const i=t.sizeBytes??0;if(this.maxQueueSizeBytes!==void 0&&i>0&&this.queueSizeBytes+i>this.maxQueueSizeBytes)return Promise.reject(new Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${i} bytes.`));i>0&&(this.queueSizeBytes+=i);const a=this.onFailedResponseHook;let s=this.queue.add(()=>DRe(()=>r(...n).catch(o=>{throw o instanceof Error?o:new Error(o)}),{async onFailedAttempt({error:o}){if(typeof o!="object"||o==null)throw o;const l="message"in o&&typeof o.message=="string"?o.message:void 0;if(l!=null&&l.startsWith("Cancel")||l!=null&&l.startsWith("TimeoutError")||l!=null&&l.startsWith("AbortError")||"name"in o&&o.name==="TimeoutError"||"code"in o&&o.code==="ECONNABORTED")throw o;const c="response"in o?o.response:void 0;if(a&&await a(c))return;const u=(c==null?void 0:c.status)??("status"in o?o.status:void 0);if(u!=null&&(typeof u=="number"||typeof u=="string")&&!YRe.includes(+u))throw o},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return i>0&&(s=s.finally(()=>{this.queueSizeBytes-=i})),t.signal?Promise.race([s,new Promise((o,l)=>{var c;(c=t.signal)==null||c.addEventListener("abort",()=>{l(new Error("AbortError"))})})]):s}};function gV(e){return typeof(e==null?void 0:e._getType)=="function"}function yV(e){const t={type:e._getType(),data:{content:e.content}};return e!=null&&e.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}var tL={exports:{}};const XRe="2.0.0",Rae=256,ZRe=Number.MAX_SAFE_INTEGER||9007199254740991,JRe=16,QRe=Rae-6,eLe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var HC={MAX_LENGTH:Rae,MAX_SAFE_COMPONENT_LENGTH:JRe,MAX_SAFE_BUILD_LENGTH:QRe,MAX_SAFE_INTEGER:ZRe,RELEASE_TYPES:eLe,SEMVER_SPEC_VERSION:XRe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},u4={};const tLe=typeof process=="object"&&u4&&u4.NODE_DEBUG&&/\bsemver\b/i.test(u4.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var GC=tLe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=HC,a=GC;t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],u=t.t={};let f=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,n]],m=y=>{for(const[g,w]of h)y=y.split(`${g}*`).join(`${g}{0,${w}}`).split(`${g}+`).join(`${g}{1,${w}}`);return y},p=(y,g,w)=>{const v=m(g),x=f++;a(y,x,g),u[y]=x,l[x]=g,c[x]=v,s[x]=new RegExp(g,w?"g":void 0),o[x]=new RegExp(v,w?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(tL,tL.exports);var l2=tL.exports;const rLe=Object.freeze({loose:!0}),nLe=Object.freeze({}),iLe=e=>e?typeof e!="object"?rLe:e:nLe;var A$=iLe;const vV=/^[0-9]+$/,Lae=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;const r=vV.test(e),n=vV.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},aLe=(e,t)=>Lae(t,e);var Mae={compareIdentifiers:Lae,rcompareIdentifiers:aLe};const oE=GC,{MAX_LENGTH:wV,MAX_SAFE_INTEGER:lE}=HC,{safeRe:cE,t:uE}=l2,sLe=A$,{compareIdentifiers:f4}=Mae;let oLe=class cu{constructor(t,r){if(r=sLe(r),t instanceof cu){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>wV)throw new TypeError(`version is longer than ${wV} characters`);oE("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?cE[uE.LOOSE]:cE[uE.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>lE||this.major<0)throw new TypeError("Invalid major version");if(this.minor>lE||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>lE||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<lE)return a}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(oE("SemVer.compare",this.version,this.options,t),!(t instanceof cu)){if(typeof t=="string"&&t===this.version)return 0;t=new cu(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof cu||(t=new cu(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof cu||(t=new cu(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=t.prerelease[r];if(oE("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return f4(n,i)}while(++r)}compareBuild(t){t instanceof cu||(t=new cu(t,this.options));let r=0;do{const n=this.build[r],i=t.build[r];if(oE("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return f4(n,i)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const i=`-${r}`.match(this.options.loose?cE[uE.PRERELEASELOOSE]:cE[uE.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let a=[r,i];n===!1&&(a=[r]),f4(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var T$=oLe;const xV=T$,lLe=(e,t,r)=>new xV(e,r).compare(new xV(t,r));var a1=lLe;const cLe=a1,uLe=(e,t,r)=>cLe(e,t,r)>0;var fLe=uLe;const dLe=a1,hLe=(e,t,r)=>dLe(e,t,r)<0;var pLe=hLe;const mLe=a1,gLe=(e,t,r)=>mLe(e,t,r)===0;var yLe=gLe;const vLe=a1,wLe=(e,t,r)=>vLe(e,t,r)!==0;var xLe=wLe;const bLe=a1,_Le=(e,t,r)=>bLe(e,t,r)>=0;var SLe=_Le;const ELe=a1,ALe=(e,t,r)=>ELe(e,t,r)<=0;var TLe=ALe;const kLe=yLe,CLe=xLe,OLe=fLe,PLe=SLe,NLe=pLe,ILe=TLe,RLe=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return kLe(e,r,n);case"!=":return CLe(e,r,n);case">":return OLe(e,r,n);case">=":return PLe(e,r,n);case"<":return NLe(e,r,n);case"<=":return ILe(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var LLe=RLe;const{safeRe:D4t,t:j4t}=l2;class MLe{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,r)}return this}}var DLe=MLe,d4,bV;function Gc(){if(bV)return d4;bV=1;const e=/\s+/g;class t{constructor(G,Z){if(Z=i(Z),G instanceof t)return G.loose===!!Z.loose&&G.includePrerelease===!!Z.includePrerelease?G:new t(G.raw,Z);if(G instanceof a)return this.raw=G.value,this.set=[[G]],this.formatted=void 0,this;if(this.options=Z,this.loose=!!Z.loose,this.includePrerelease=!!Z.includePrerelease,this.raw=G.trim().replace(e," "),this.set=this.raw.split("||").map(J=>this.parseRange(J.trim())).filter(J=>J.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const J=this.set[0];if(this.set=this.set.filter(Y=>!p(Y[0])),this.set.length===0)this.set=[J];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&y(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let G=0;G<this.set.length;G++){G>0&&(this.formatted+="||");const Z=this.set[G];for(let J=0;J<Z.length;J++)J>0&&(this.formatted+=" "),this.formatted+=Z[J].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(G){const J=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+G,Y=n.get(J);if(Y)return Y;const U=this.options.loose,se=U?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];G=G.replace(se,N(this.options.includePrerelease)),s("hyphen replace",G),G=G.replace(l[c.COMPARATORTRIM],u),s("comparator trim",G),G=G.replace(l[c.TILDETRIM],f),s("tilde trim",G),G=G.replace(l[c.CARETTRIM],d),s("caret trim",G);let ue=G.split(" ").map(q=>w(q,this.options)).join(" ").split(/\s+/).map(q=>P(q,this.options));U&&(ue=ue.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(l[c.COMPARATORLOOSE])))),s("range list",ue);const I=new Map,z=ue.map(q=>new a(q,this.options));for(const q of z){if(p(q))return[q];I.set(q.value,q)}I.size>1&&I.has("")&&I.delete("");const H=[...I.values()];return n.set(J,H),H}intersects(G,Z){if(!(G instanceof t))throw new TypeError("a Range is required");return this.set.some(J=>g(J,Z)&&G.set.some(Y=>g(Y,Z)&&J.every(U=>Y.every(se=>U.intersects(se,Z)))))}test(G){if(!G)return!1;if(typeof G=="string")try{G=new o(G,this.options)}catch{return!1}for(let Z=0;Z<this.set.length;Z++)if(V(this.set[Z],G,this.options))return!0;return!1}}d4=t;const r=DLe,n=new r,i=A$,a=qC(),s=GC,o=T$,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:d}=l2,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=HC,p=B=>B.value==="<0.0.0-0",y=B=>B.value==="",g=(B,G)=>{let Z=!0;const J=B.slice();let Y=J.pop();for(;Z&&J.length;)Z=J.every(U=>Y.intersects(U,G)),Y=J.pop();return Z},w=(B,G)=>(B=B.replace(l[c.BUILD],""),s("comp",B,G),B=S(B,G),s("caret",B),B=x(B,G),s("tildes",B),B=A(B,G),s("xrange",B),B=M(B,G),s("stars",B),B),v=B=>!B||B.toLowerCase()==="x"||B==="*",x=(B,G)=>B.trim().split(/\s+/).map(Z=>b(Z,G)).join(" "),b=(B,G)=>{const Z=G.loose?l[c.TILDELOOSE]:l[c.TILDE];return B.replace(Z,(J,Y,U,se,ue)=>{s("tilde",B,J,Y,U,se,ue);let I;return v(Y)?I="":v(U)?I=`>=${Y}.0.0 <${+Y+1}.0.0-0`:v(se)?I=`>=${Y}.${U}.0 <${Y}.${+U+1}.0-0`:ue?(s("replaceTilde pr",ue),I=`>=${Y}.${U}.${se}-${ue} <${Y}.${+U+1}.0-0`):I=`>=${Y}.${U}.${se} <${Y}.${+U+1}.0-0`,s("tilde return",I),I})},S=(B,G)=>B.trim().split(/\s+/).map(Z=>T(Z,G)).join(" "),T=(B,G)=>{s("caret",B,G);const Z=G.loose?l[c.CARETLOOSE]:l[c.CARET],J=G.includePrerelease?"-0":"";return B.replace(Z,(Y,U,se,ue,I)=>{s("caret",B,Y,U,se,ue,I);let z;return v(U)?z="":v(se)?z=`>=${U}.0.0${J} <${+U+1}.0.0-0`:v(ue)?U==="0"?z=`>=${U}.${se}.0${J} <${U}.${+se+1}.0-0`:z=`>=${U}.${se}.0${J} <${+U+1}.0.0-0`:I?(s("replaceCaret pr",I),U==="0"?se==="0"?z=`>=${U}.${se}.${ue}-${I} <${U}.${se}.${+ue+1}-0`:z=`>=${U}.${se}.${ue}-${I} <${U}.${+se+1}.0-0`:z=`>=${U}.${se}.${ue}-${I} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?se==="0"?z=`>=${U}.${se}.${ue}${J} <${U}.${se}.${+ue+1}-0`:z=`>=${U}.${se}.${ue}${J} <${U}.${+se+1}.0-0`:z=`>=${U}.${se}.${ue} <${+U+1}.0.0-0`),s("caret return",z),z})},A=(B,G)=>(s("replaceXRanges",B,G),B.split(/\s+/).map(Z=>O(Z,G)).join(" ")),O=(B,G)=>{B=B.trim();const Z=G.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return B.replace(Z,(J,Y,U,se,ue,I)=>{s("xRange",B,J,Y,U,se,ue,I);const z=v(U),H=z||v(se),q=H||v(ue),F=q;return Y==="="&&F&&(Y=""),I=G.includePrerelease?"-0":"",z?Y===">"||Y==="<"?J="<0.0.0-0":J="*":Y&&F?(H&&(se=0),ue=0,Y===">"?(Y=">=",H?(U=+U+1,se=0,ue=0):(se=+se+1,ue=0)):Y==="<="&&(Y="<",H?U=+U+1:se=+se+1),Y==="<"&&(I="-0"),J=`${Y+U}.${se}.${ue}${I}`):H?J=`>=${U}.0.0${I} <${+U+1}.0.0-0`:q&&(J=`>=${U}.${se}.0${I} <${U}.${+se+1}.0-0`),s("xRange return",J),J})},M=(B,G)=>(s("replaceStars",B,G),B.trim().replace(l[c.STAR],"")),P=(B,G)=>(s("replaceGTE0",B,G),B.trim().replace(l[G.includePrerelease?c.GTE0PRE:c.GTE0],"")),N=B=>(G,Z,J,Y,U,se,ue,I,z,H,q,F)=>(v(J)?Z="":v(Y)?Z=`>=${J}.0.0${B?"-0":""}`:v(U)?Z=`>=${J}.${Y}.0${B?"-0":""}`:se?Z=`>=${Z}`:Z=`>=${Z}${B?"-0":""}`,v(z)?I="":v(H)?I=`<${+z+1}.0.0-0`:v(q)?I=`<${z}.${+H+1}.0-0`:F?I=`<=${z}.${H}.${q}-${F}`:B?I=`<${z}.${H}.${+q+1}-0`:I=`<=${I}`,`${Z} ${I}`.trim()),V=(B,G,Z)=>{for(let J=0;J<B.length;J++)if(!B[J].test(G))return!1;if(G.prerelease.length&&!Z.includePrerelease){for(let J=0;J<B.length;J++)if(s(B[J].semver),B[J].semver!==a.ANY&&B[J].semver.prerelease.length>0){const Y=B[J].semver;if(Y.major===G.major&&Y.minor===G.minor&&Y.patch===G.patch)return!0}return!1}return!0};return d4}var h4,_V;function qC(){if(_V)return h4;_V=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=r(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),s("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(u){const f=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],d=u.match(f);if(!d)throw new TypeError(`Invalid comparator: ${u}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new o(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(s("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return a(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,f).test(u.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||a(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||a(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}h4=t;const r=A$,{safeRe:n,t:i}=l2,a=LLe,s=GC,o=T$,l=Gc();return h4}Gc();Gc();Gc();Gc();Gc();Gc();const jLe=qC(),{ANY:$4t}=jLe;Gc();Gc();Gc();const k$=qC(),{ANY:F4t}=k$;new k$(">=0.0.0-0");new k$(">=0.0.0");const p4=l2,SV=HC,EV=Mae;qC();Gc();p4.re,p4.src,p4.t,SV.SEMVER_SPEC_VERSION,SV.RELEASE_TYPES,EV.compareIdentifiers,EV.rcompareIdentifiers;function Hd(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){const[i,a]=t.split("/",2);if(!i||!a)throw new Error(`Invalid identifier format: ${e}`);return[i,a,n]}else{if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,n]}}class $Le extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}class FLe extends Error{constructor(t){super(t),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithNotFoundError",this.status=404}}function AV(e){return e!=null&&typeof e=="object"&&"name"in e&&(e==null?void 0:e.name)==="LangSmithNotFoundError"}async function Lt(e,t,r){let n;if(e.ok){r&&(n=await e.text());return}if(e.status===403)try{const s=await e.json();(s==null?void 0:s.error)==="org_scoped_key_requires_workspace"&&(n="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch{const o=new Error(`${e.status} ${e.statusText}`);throw o.status=e==null?void 0:e.status,o}if(n===void 0)try{n=await e.text()}catch{n=""}const i=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Message: ${n}`;if(e.status===404)throw new FLe(i);if(e.status===409)throw new $Le(i);const a=new Error(i);throw a.status=e.status,a}const Dae="ERR_CONFLICTING_ENDPOINTS";class BLe extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:Dae}),this.name="ConflictingEndpointsError"}}function ULe(e){return typeof e=="object"&&e!==null&&e.code===Dae}var TV="[...]",zLe={result:"[Circular]"},tk=[],Xg=[];const VLe=new TextEncoder;function WLe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function fE(e){return VLe.encode(e)}function jae(e){if(e&&typeof e=="object"&&e!==null){if(e instanceof Map)return Object.fromEntries(e);if(e instanceof Set)return Array.from(e);if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Error)return{name:e.name,message:e.message}}else if(typeof e=="bigint")return e.toString();return e}function HLe(e){return function(t,r){return jae(r)}}function Co(e,t,r,n,i){var a;try{const s=JSON.stringify(e,HLe(r),n);return fE(s)}catch(s){if(!((a=s.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${t?`
Context: ${t}`:""}`),fE("[Unserializable]");ks("SUPPRESS_CIRCULAR_JSON_WARNINGS")!=="true"&&console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${t?`
Context: ${t}`:""}`),typeof i>"u"&&(i=WLe()),rL(e,"",0,[],void 0,0,i);let o;try{Xg.length===0?o=JSON.stringify(e,r,n):o=JSON.stringify(e,GLe(r),n)}catch{return fE("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;tk.length!==0;){const l=tk.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return fE(o)}}function m4(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),tk.push([n,r,t,i])):Xg.push([t,r,e]):(n[r]=e,tk.push([n,r,t]))}function rL(e,t,r,n,i,a,s){a+=1;var o;if(typeof e=="object"&&e!==null){for(o=0;o<n.length;o++)if(n[o]===e){m4(zLe,e,t,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){m4(TV,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){m4(TV,e,t,i);return}if(n.push(e),Array.isArray(e))for(o=0;o<e.length;o++)rL(e[o],o,o,n,e,a,s);else{e=jae(e);var l=Object.keys(e);for(o=0;o<l.length;o++){var c=l[o];rL(e[c],c,o,n,e,a,s)}}n.pop()}}function GLe(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(Xg.length>0)for(var n=0;n<Xg.length;n++){var i=Xg[n];if(i[1]===t&&i[0]===r){r=i[2],Xg.splice(n,1);break}}return e.call(this,t,r)}}function kV(e,t,r){if(r)return e;const n=Sae(),i=t??Eae(),a=e.extra??{},s=a.metadata;return e.extra={...a,runtime:{...n,...a==null?void 0:a.runtime},metadata:{...i,...i.revision_id||"revision_id"in e&&e.revision_id?{revision_id:("revision_id"in e?e.revision_id:void 0)??i.revision_id}:{},...s}},e}const qLe=e=>{const t=(e==null?void 0:e.toString())??ks("TRACING_SAMPLING_RATE");if(t===void 0)return;const r=parseFloat(t);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},KLe=e=>{const r=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};async function YLe(e){const t=[];for await(const r of e)t.push(r);return t}function dE(e){if(e!==void 0)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const XLe=async e=>{if((e==null?void 0:e.status)===429){const t=parseInt(e.headers.get("retry-after")??"10",10)*1e3;if(t>0)return await new Promise(r=>setTimeout(r,t)),!0}return!1};function CV(e){return typeof e=="number"?Number(e.toFixed(4)):e}const ZLe=24*1024*1024,$ae=1024*1024*1024,JLe=1e4,QLe=100,OV="https://api.smith.langchain.com";class eMe{constructor(t){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=t??$ae}peek(){return this.items[0]}push(t){let r;const n=new Promise(a=>{r=a}),i=Co(t.item,`Serializing run with id: ${t.item.id}`).length;return this.sizeBytes+i>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${t.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${i} bytes.`),r(),n):(this.items.push({action:t.action,payload:t.item,otelContext:t.otelContext,apiKey:t.apiKey,apiUrl:t.apiUrl,itemPromiseResolve:r,itemPromise:n,size:i}),this.sizeBytes+=i,n)}pop({upToSizeBytes:t,upToSize:r}){var a;if(t<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let i=0;for(;i+(((a=this.peek())==null?void 0:a.size)??0)<t&&this.items.length>0&&n.length<r;){const s=this.items.shift();s&&(n.push(s),i+=s.size,this.sizeBytes-=s.size)}if(n.length===0&&this.items.length>0){const s=this.items.shift();n.push(s),i+=s.size,this.sizeBytes-=s.size}return[n.map(s=>({action:s.action,item:s.payload,otelContext:s.otelContext,apiKey:s.apiKey,apiUrl:s.apiUrl,size:s.size})),()=>n.forEach(s=>s.itemPromiseResolve())]}}class sv{get _fetch(){return this.fetchImplementation||R3e(this.debug)}constructor(t={}){var i;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitTracedRuntimeInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:Bu("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promptCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_multipartDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_runCompressionDisabled",{enumerable:!0,configurable:!0,writable:!0,value:ks("DISABLE_RUN_COMPRESSION")==="true"}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:Bu("LANGSMITH_DEBUG")==="true"});const r=sv.getDefaultClientConfig();if(this.tracingSampleRate=qLe(t.tracingSamplingRate),this.apiUrl=dE(t.apiUrl??r.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=dE(t.apiKey??r.apiKey),this.webUrl=dE(t.webUrl??r.webUrl),(i=this.webUrl)!=null&&i.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=dE(t.workspaceId??ks("WORKSPACE_ID")),this.timeout_ms=t.timeout_ms??9e4,this.caller=new mV({...t.callerOptions??{},maxRetries:4,debug:t.debug??this.debug}),this.traceBatchConcurrency=t.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=t.debug??this.debug,this.fetchImplementation=t.fetchImplementation;const n=t.maxIngestMemoryBytes??$ae;this.batchIngestCaller=new mV({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:n,...t.callerOptions??{},onFailedResponseHook:XLe,debug:t.debug??this.debug}),this.hideInputs=t.hideInputs??t.anonymizer??r.hideInputs,this.hideOutputs=t.hideOutputs??t.anonymizer??r.hideOutputs,this.omitTracedRuntimeInfo=t.omitTracedRuntimeInfo??!1,this.autoBatchTracing=t.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new eMe(n),this.blockOnRootRunFinalization=t.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=t.batchSizeBytesLimit,this.batchSizeLimit=t.batchSizeLimit,this.fetchOptions=t.fetchOptions||{},this.manualFlushMode=t.manualFlushMode??this.manualFlushMode,Aae()&&(this.langSmithToOTELTranslator=new kRe),this.cachedLSEnvVarsForMetadata=Eae(),t.cache!==void 0&&t.disablePromptCache&&AA("Both 'cache' and 'disablePromptCache' were provided. The 'cache' parameter is deprecated and will be removed in a future version. Using 'cache' parameter value."),t.cache!==void 0?(AA("The 'cache' parameter is deprecated and will be removed in a future version. Use 'configureGlobalPromptCache()' to configure the global cache, or 'disablePromptCache: true' to disable caching for this client."),t.cache===!1?this._promptCache=void 0:t.cache===!0?this._promptCache=dV:this._promptCache=t.cache):t.disablePromptCache||(this._promptCache=dV)}static getDefaultClientConfig(){const t=ks("API_KEY"),r=ks("ENDPOINT")??OV,n=ks("HIDE_INPUTS")==="true",i=ks("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:t,webUrl:void 0,hideInputs:n,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:KLe(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const t={"User-Agent":`langsmith-js/${xae}`};return this.apiKey&&(t["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(t["x-tenant-id"]=this.workspaceId),t}_getPlatformEndpointPath(t){return this.apiUrl.slice(-3)!=="/v1"&&this.apiUrl.slice(-4)!=="/v1/"?`/v1/platform/${t}`:`/platform/${t}`}async processInputs(t){return this.hideInputs===!1?t:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(t):t}async processOutputs(t){return this.hideOutputs===!1?t:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(t):t}async prepareRunCreateOrUpdateInputs(t){const r={...t};return r.inputs!==void 0&&(r.inputs=await this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=await this.processOutputs(r.outputs)),r}async _getResponse(t,r){const n=(r==null?void 0:r.toString())??"",i=`${this.apiUrl}${t}?${n}`;return await this.caller.call(async()=>{const s=await this._fetch(i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(s,`fetch ${t}`),s})}async _get(t,r){return(await this._getResponse(t,r)).json()}async*_getPaginated(t,r=new URLSearchParams,n){let i=Number(r.get("offset"))||0;const a=Number(r.get("limit"))||100;for(;;){r.set("offset",String(i)),r.set("limit",String(a));const s=`${this.apiUrl}${t}?${r}`,o=await this.caller.call(async()=>{const c=await this._fetch(s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(c,`fetch ${t}`),c}),l=n?n(await o.json()):await o.json();if(l.length===0||(yield l,l.length<a))break;i+=l.length}}async*_getCursorPaginatedList(t,r=null,n="POST",i="runs"){const a=r?{...r}:{};for(;;){const s=JSON.stringify(a),l=await(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}${t}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(u,`fetch ${t}`),u})).json();if(!l||!l[i])break;yield l[i];const c=l.cursors;if(!c||!c.next)break;a.cursor=c.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(t,r=!1){if(this.tracingSampleRate===void 0)return t;if(r){const n=[];for(const i of t)this.filteredPostUuids.has(i.trace_id)?i.id===i.trace_id&&this.filteredPostUuids.delete(i.trace_id):n.push(i);return n}else{const n=[];for(const i of t){const a=i.trace_id??i.id;this.filteredPostUuids.has(a)||(i.id===a?this._shouldSample()?n.push(i):this.filteredPostUuids.add(a):n.push(i))}return n}}async _getBatchSizeLimitBytes(){var r;const t=await this._ensureServerInfo();return this.batchSizeBytesLimit??((r=t==null?void 0:t.batch_ingest_config)==null?void 0:r.size_limit_bytes)??ZLe}async _getBatchSizeLimit(){var r;const t=await this._ensureServerInfo();return this.batchSizeLimit??((r=t==null?void 0:t.batch_ingest_config)==null?void 0:r.size_limit)??QLe}async _getDatasetExamplesMultiPartSupport(){var r;return((r=(await this._ensureServerInfo()).instance_flags)==null?void 0:r.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:r}){const n=[];for(;this.autoBatchQueue.items.length>0;){const[i,a]=this.autoBatchQueue.pop({upToSizeBytes:t,upToSize:r});if(!i.length){a();break}const s=i.reduce((c,u)=>{const f=u.apiUrl??this.apiUrl,d=u.apiKey??this.apiKey,m=u.apiKey===this.apiKey&&u.apiUrl===this.apiUrl?"default":`${f}|${d}`;return c[m]||(c[m]=[]),c[m].push(u),c},{}),o=[];for(const[c,u]of Object.entries(s)){const f=this._processBatch(u,{apiUrl:c==="default"?void 0:c.split("|")[0],apiKey:c==="default"?void 0:c.split("|")[1]});o.push(f)}const l=Promise.all(o).finally(a);n.push(l)}return Promise.all(n)}async _processBatch(t,r){var i,a;if(!t.length)return;const n=t.reduce((s,o)=>s+(o.size??0),0);try{if(this.langSmithToOTELTranslator!==void 0)this._sendBatchToOTELTranslator(t);else{const s={runCreates:t.filter(c=>c.action==="create").map(c=>c.item),runUpdates:t.filter(c=>c.action==="update").map(c=>c.item)},o=await this._ensureServerInfo();if(!this._multipartDisabled&&(((i=o==null?void 0:o.batch_ingest_config)==null?void 0:i.use_multipart_endpoint)??!0)){const c=!this._runCompressionDisabled&&((a=o==null?void 0:o.instance_flags)==null?void 0:a.gzip_body_enabled);try{await this.multipartIngestRuns(s,{...r,useGzip:c,sizeBytes:n})}catch(u){if(AV(u))this._multipartDisabled=!0,await this.batchIngestRuns(s,{...r,sizeBytes:n});else throw u}}else await this.batchIngestRuns(s,{...r,sizeBytes:n})}}catch(s){console.error("Error exporting batch:",s)}}_sendBatchToOTELTranslator(t){if(this.langSmithToOTELTranslator!==void 0){const r=new Map,n=[];for(const i of t)i.item.id&&i.otelContext&&(r.set(i.item.id,i.otelContext),i.action==="create"?n.push({operation:"post",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}):n.push({operation:"patch",id:i.item.id,trace_id:i.item.trace_id??i.item.id,run:i.item}));this.langSmithToOTELTranslator.exportBatch(n,r)}}async processRunOperation(t){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,t.item=kV(t.item,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);const r=this.autoBatchQueue.push(t);if(this.manualFlushMode)return r;const n=await this._getBatchSizeLimitBytes(),i=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>n||this.autoBatchQueue.items.length>i)&&this.drainAutoBatchQueue({batchSizeLimitBytes:n,batchSizeLimit:i}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:n,batchSizeLimit:i})},this.autoBatchAggregationDelayMs)),r}async _getServerInfo(){const r=await(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(JLe),...this.fetchOptions});return await Lt(n,"get server info"),n})).json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(r,null,2)+`
`),r}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(t){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${t.status??"Unspecified status code"} ${t.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(t=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),t))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const t=await this._getBatchSizeLimitBytes(),r=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:t,batchSizeLimit:r})}_cloneCurrentOTELContext(){const t=Tae(),r=SRe();if(this.langSmithToOTELTranslator!==void 0){const n=t.getActiveSpan();if(n)return t.setSpan(r.active(),n)}}async createRun(t,r){if(!this._filterForSampling([t]).length)return;const n={...this.headers,"Content-Type":"application/json"},i=t.project_name;delete t.project_name;const a=await this.prepareRunCreateOrUpdateInputs({session_name:i,...t,start_time:t.start_time??Date.now()});if(this.autoBatchTracing&&a.trace_id!==void 0&&a.dotted_order!==void 0){const l=this._cloneCurrentOTELContext();this.processRunOperation({action:"create",item:a,otelContext:l,apiKey:r==null?void 0:r.apiKey,apiUrl:r==null?void 0:r.apiUrl}).catch(console.error);return}const s=kV(a,this.cachedLSEnvVarsForMetadata,this.omitTracedRuntimeInfo);(r==null?void 0:r.apiKey)!==void 0&&(n["x-api-key"]=r.apiKey),(r==null?void 0:r.workspaceId)!==void 0&&(n["x-tenant-id"]=r.workspaceId);const o=Co(s,`Creating run with id: ${s.id}`);await this.caller.call(async()=>{const l=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs`,{method:"POST",headers:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Lt(l,"create run",!0),l})}async batchIngestRuns({runCreates:t,runUpdates:r},n){if(t===void 0&&r===void 0)return;let i=await Promise.all((t==null?void 0:t.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),a=await Promise.all((r==null?void 0:r.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(i.length>0&&a.length>0){const l=i.reduce((u,f)=>(f.id&&(u[f.id]=f),u),{}),c=[];for(const u of a)u.id!==void 0&&l[u.id]?l[u.id]={...l[u.id],...u}:c.push(u);i=Object.values(l),a=c}const s={post:i,patch:a};if(!s.post.length&&!s.patch.length)return;const o={post:[],patch:[]};for(const l of["post","patch"]){const c=l,u=s[c].reverse();let f=u.pop();for(;f!==void 0;)o[c].push(f),f=u.pop()}if(o.post.length>0||o.patch.length>0){const l=o.post.map(c=>c.id).concat(o.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(Co(o,`Ingesting runs with ids: ${l}`),n)}}async _postBatchIngestRuns(t,r){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"};(r==null?void 0:r.apiKey)!==void 0&&(n["x-api-key"]=r.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:r==null?void 0:r.sizeBytes},async()=>{const i=await this._fetch(`${(r==null?void 0:r.apiUrl)??this.apiUrl}/runs/batch`,{method:"POST",headers:n,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:t});return await Lt(i,"batch create run",!0),i})}async multipartIngestRuns({runCreates:t,runUpdates:r},n){if(t===void 0&&r===void 0)return;const i={};let a=[];for(const f of t??[]){const d=await this.prepareRunCreateOrUpdateInputs(f);d.id!==void 0&&d.attachments!==void 0&&(i[d.id]=d.attachments),delete d.attachments,a.push(d)}let s=[];for(const f of r??[])s.push(await this.prepareRunCreateOrUpdateInputs(f));if(a.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&s.length>0){const f=a.reduce((h,m)=>(m.id&&(h[m.id]=m),h),{}),d=[];for(const h of s)h.id!==void 0&&f[h.id]?f[h.id]={...f[h.id],...h}:d.push(h);a=Object.values(f),s=d}if(a.length===0&&s.length===0)return;const c=[],u=[];for(const[f,d]of[["post",a],["patch",s]])for(const h of d){const{inputs:m,outputs:p,events:y,extra:g,error:w,serialized:v,attachments:x,...b}=h,S={inputs:m,outputs:p,events:y,extra:g,error:w,serialized:v},T=Co(b,`Serializing for multipart ingestion of run with id: ${b.id}`);u.push({name:`${f}.${b.id}`,payload:new Blob([T],{type:`application/json; length=${T.length}`})});for(const[A,O]of Object.entries(S)){if(O===void 0)continue;const M=Co(O,`Serializing ${A} for multipart ingestion of run with id: ${b.id}`);u.push({name:`${f}.${b.id}.${A}`,payload:new Blob([M],{type:`application/json; length=${M.length}`})})}if(b.id!==void 0){const A=i[b.id];if(A){delete i[b.id];for(const[O,M]of Object.entries(A)){let P,N;if(Array.isArray(M)?[P,N]=M:(P=M.mimeType,N=M.data),O.includes(".")){console.warn(`Skipping attachment '${O}' for run ${b.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}u.push({name:`attachment.${b.id}.${O}`,payload:new Blob([N],{type:`${P}; length=${N.byteLength}`})})}}}c.push(`trace=${b.trace_id},id=${b.id}`)}await this._sendMultipartRequest(u,c.join("; "),n)}async _createNodeFetchBody(t,r){const n=[];for(const s of t)n.push(new Blob([`--${r}\r
`])),n.push(new Blob([`Content-Disposition: form-data; name="${s.name}"\r
`,`Content-Type: ${s.payload.type}\r
\r
`])),n.push(s.payload),n.push(new Blob([`\r
`]));return n.push(new Blob([`--${r}--\r
`])),await new Blob(n).arrayBuffer()}async _createMultipartStream(t,r){const n=new TextEncoder;return new ReadableStream({async start(a){const s=async o=>{typeof o=="string"?a.enqueue(n.encode(o)):a.enqueue(o)};for(const o of t){await s(`--${r}\r
`),await s(`Content-Disposition: form-data; name="${o.name}"\r
`),await s(`Content-Type: ${o.payload.type}\r
\r
`);const c=o.payload.stream().getReader();try{let u;for(;!(u=await c.read()).done;)a.enqueue(u.value)}finally{c.releaseLock()}await s(`\r
`)}await s(`--${r}--\r
`),a.close()}})}async _sendMultipartRequest(t,r,n){const i="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),a=()=>this._createNodeFetchBody(t,i),s=()=>this._createMultipartStream(t,i),o=async l=>this.batchIngestCaller.callWithOptions({sizeBytes:n==null?void 0:n.sizeBytes},async()=>{const c=await l(),u={...this.headers,"Content-Type":`multipart/form-data; boundary=${i}`};(n==null?void 0:n.apiKey)!==void 0&&(u["x-api-key"]=n.apiKey);let f=c;n!=null&&n.useGzip&&typeof c=="object"&&"pipeThrough"in c&&(f=c.pipeThrough(new CompressionStream("gzip")),u["Content-Encoding"]="gzip");const d=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/multipart`,{method:"POST",headers:u,body:f,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(d,"Failed to send multipart request",!0),d});try{let l,c=!1;I3e()&&!this.multipartStreamingDisabled&&_ae()!=="bun"?(c=!0,l=await o(s)):l=await o(a),(!this.multipartStreamingDisabled||c)&&l.status===422&&((n==null?void 0:n.apiUrl)??this.apiUrl)!==OV&&(console.warn(`Streaming multipart upload to ${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${r}".`),this.multipartStreamingDisabled=!0,l=await o(a))}catch(l){if(AV(l))throw l;console.warn(`${l.message.trim()}

Context: ${r}`)}}async updateRun(t,r,n){fr(t),r.inputs&&(r.inputs=await this.processInputs(r.inputs)),r.outputs&&(r.outputs=await this.processOutputs(r.outputs));const i={...r,id:t};if(!this._filterForSampling([i],!0).length)return;if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){const o=this._cloneCurrentOTELContext();if(r.end_time!==void 0&&i.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}else this.processRunOperation({action:"update",item:i,otelContext:o,apiKey:n==null?void 0:n.apiKey,apiUrl:n==null?void 0:n.apiUrl}).catch(console.error);return}const a={...this.headers,"Content-Type":"application/json"};(n==null?void 0:n.apiKey)!==void 0&&(a["x-api-key"]=n.apiKey),(n==null?void 0:n.workspaceId)!==void 0&&(a["x-tenant-id"]=n.workspaceId);const s=Co(r,`Serializing payload to update run with id: ${t}`);await this.caller.call(async()=>{const o=await this._fetch(`${(n==null?void 0:n.apiUrl)??this.apiUrl}/runs/${t}`,{method:"PATCH",headers:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(o,"update run",!0),o})}async readRun(t,{loadChildRuns:r}={loadChildRuns:!1}){fr(t);let n=await this._get(`/runs/${t}`);return r&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:t,run:r,projectOpts:n}){if(r!==void 0){let i;r.session_id?i=r.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:ks("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${i}/r/${r.id}?poll=true`}else if(t!==void 0){const i=await this.readRun(t);if(!i.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(t){var a;const r=await YLe(this.listRuns({isRoot:!1,projectId:t.session_id,traceId:t.trace_id})),n={},i={};r.sort((s,o)=>((s==null?void 0:s.dotted_order)??"").localeCompare((o==null?void 0:o.dotted_order)??""));for(const s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);(a=s.dotted_order)!=null&&a.startsWith(t.dotted_order??"")&&s.id!==t.id&&(s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),i[s.id]=s)}t.child_runs=n[t.id]||[];for(const s in n)s!==t.id&&(i[s].child_runs=n[s]);return t}async*listRuns(t){const{projectId:r,projectName:n,parentRunId:i,traceId:a,referenceExampleId:s,startTime:o,executionOrder:l,isRoot:c,runType:u,error:f,id:d,query:h,filter:m,traceFilter:p,treeFilter:y,limit:g,select:w,order:v}=t;let x=[];if(r&&(x=Array.isArray(r)?r:[r]),n){const A=Array.isArray(n)?n:[n],O=await Promise.all(A.map(M=>this.readProject({projectName:M}).then(P=>P.id)));x.push(...O)}const b=["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],S={session:x.length?x:null,run_type:u,reference_example:s,query:h,filter:m,trace_filter:p,tree_filter:y,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:f,id:d,limit:g,trace:a,select:w||b,is_root:c,order:v};S.select.includes("child_run_ids")&&AA("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let T=0;for await(const A of this._getCursorPaginatedList("/runs/query",S))if(g){if(T>=g)break;if(A.length+T>g){yield*A.slice(0,g-T);break}T+=A.length,yield*A}else yield*A}async*listGroupRuns(t){const{projectId:r,projectName:n,groupBy:i,filter:a,startTime:s,endTime:o,limit:l,offset:c}=t,f={session_id:r||(await this.readProject({projectName:n})).id,group_by:i,filter:a,start_time:s?s.toISOString():null,end_time:o?o.toISOString():null,limit:Number(l)||100};let d=Number(c)||0;const h="/runs/group",m=`${this.apiUrl}${h}`;for(;;){const p={...f,offset:d},y=Object.fromEntries(Object.entries(p).filter(([S,T])=>T!==void 0)),g=JSON.stringify(y),v=await(await this.caller.call(async()=>{const S=await this._fetch(m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:g});return await Lt(S,`Failed to fetch ${h}`),S})).json(),{groups:x,total:b}=v;if(x.length===0)break;for(const S of x)yield S;if(d+=x.length,d>=b)break}}async getRunStats({id:t,trace:r,parentRun:n,runType:i,projectNames:a,projectIds:s,referenceExampleIds:o,startTime:l,endTime:c,error:u,query:f,filter:d,traceFilter:h,treeFilter:m,isRoot:p,dataSourceType:y}){let g=s||[];a&&(g=[...s||[],...await Promise.all(a.map(T=>this.readProject({projectName:T}).then(A=>A.id)))]);const v=Object.fromEntries(Object.entries({id:t,trace:r,parent_run:n,run_type:i,session:g,reference_example:o,start_time:l,end_time:c,error:u,query:f,filter:d,trace_filter:h,tree_filter:m,is_root:p,data_source_type:y}).filter(([T,A])=>A!==void 0)),x=JSON.stringify(v);return await(await this.caller.call(async()=>{const T=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:x});return await Lt(T,"get run stats"),T})).json()}async shareRun(t,{shareId:r}={}){const n={run_id:t,share_token:r||Of()};fr(t);const i=JSON.stringify(n),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Lt(o,"share run"),o})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(t){fr(t),await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(r,"unshare run",!0),r})}async readRunSharedLink(t){fr(t);const n=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/runs/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(i,"read run shared link"),i})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(t,{runIds:r}={}){const n=new URLSearchParams({share_token:t});if(r!==void 0)for(const s of r)n.append("id",s);return fr(t),await(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/public/${t}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(s,"list shared runs"),s})).json()}async readDatasetSharedSchema(t,r){if(!t&&!r)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:r})).id),fr(t);const i=await(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(a,"read dataset shared schema"),a})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(t,r){if(!t&&!r)throw new Error("Either datasetId or datasetName must be given");t||(t=(await this.readDataset({datasetName:r})).id);const n={dataset_id:t};fr(t);const i=JSON.stringify(n),s=await(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await Lt(o,"share dataset"),o})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(t){fr(t),await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/datasets/${t}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(r,"unshare dataset",!0),r})}async readSharedDataset(t){return fr(t),await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/public/${t}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(i,"read shared dataset"),i})).json()}async listSharedExamples(t,r){const n={};r!=null&&r.exampleIds&&(n.id=r.exampleIds);const i=new URLSearchParams;Object.entries(n).forEach(([o,l])=>{Array.isArray(l)?l.forEach(c=>i.append(o,c)):i.append(o,l)});const a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/public/${t}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(o,"list shared examples"),o}),s=await a.json();if(!a.ok)throw"detail"in s?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${Array.isArray(s.detail)?s.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return s.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:t,description:r=null,metadata:n=null,upsert:i=!1,projectExtra:a=null,referenceDatasetId:s=null}){const o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,c=a||{};n&&(c.metadata=n);const u={name:t,extra:c,description:r};s!==null&&(u.reference_dataset_id=s);const f=JSON.stringify(u);return await(await this.caller.call(async()=>{const m=await this._fetch(l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:f});return await Lt(m,"create project"),m})).json()}async updateProject(t,{name:r=null,description:n=null,metadata:i=null,projectExtra:a=null,endTime:s=null}){const o=`${this.apiUrl}/sessions/${t}`;let l=a;i&&(l={...l||{},metadata:i});const c=JSON.stringify({name:r,extra:l,description:n,end_time:s?new Date(s).toISOString():null});return await(await this.caller.call(async()=>{const d=await this._fetch(o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Lt(d,"update project"),d})).json()}async hasProject({projectId:t,projectName:r}){let n="/sessions";const i=new URLSearchParams;if(t!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)fr(t),n+=`/${t}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}${n}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(s,"has project"),s});try{const s=await a.json();return a.ok?Array.isArray(s)?s.length>0:!0:!1}catch{return!1}}async readProject({projectId:t,projectName:r,includeStats:n}){let i="/sessions";const a=new URLSearchParams;if(t!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(t!==void 0)fr(t),i+=`/${t}`;else if(r!==void 0)a.append("name",r);else throw new Error("Must provide projectName or projectId");n!==void 0&&a.append("include_stats",n.toString());const s=await this._get(i,a);let o;if(Array.isArray(s)){if(s.length===0)throw new Error(`Project[id=${t}, name=${r}] not found`);o=s[0]}else o=s;return o}async getProjectUrl({projectId:t,projectName:r}){if(t===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");const n=await this.readProject({projectId:t,projectName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${n.id}`}async getDatasetUrl({datasetId:t,datasetName:r}){if(t===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");const n=await this.readDataset({datasetId:t,datasetName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const t=new URLSearchParams({limit:"1"});for await(const r of this._getPaginated("/sessions",t))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:t,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:a,includeStats:s,datasetVersion:o,referenceFree:l,metadata:c}={}){const u=new URLSearchParams;if(t!==void 0)for(const f of t)u.append("id",f);if(r!==void 0&&u.append("name",r),n!==void 0&&u.append("name_contains",n),i!==void 0)u.append("reference_dataset",i);else if(a!==void 0){const f=await this.readDataset({datasetName:a});u.append("reference_dataset",f.id)}s!==void 0&&u.append("include_stats",s.toString()),o!==void 0&&u.append("dataset_version",o),l!==void 0&&u.append("reference_free",l.toString()),c!==void 0&&u.append("metadata",JSON.stringify(c));for await(const f of this._getPaginated("/sessions",u))yield*f}async deleteProject({projectId:t,projectName:r}){let n;if(t===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(t!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");t===void 0?n=(await this.readProject({projectName:r})).id:n=t,fr(n),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(i,`delete session ${n} (${r})`,!0),i})}async uploadCsv({csvFile:t,fileName:r,inputKeys:n,outputKeys:i,description:a,dataType:s,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData,u=new Blob([t],{type:"text/csv"});return c.append("file",u,r),n.forEach(h=>{c.append("input_keys",h)}),i.forEach(h=>{c.append("output_keys",h)}),a&&c.append("description",a),s&&c.append("data_type",s),o&&c.append("name",o),await(await this.caller.call(async()=>{const h=await this._fetch(l,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Lt(h,"upload CSV"),h})).json()}async createDataset(t,{description:r,dataType:n,inputsSchema:i,outputsSchema:a,metadata:s}={}){const o={name:t,description:r,extra:s?{metadata:s}:void 0};n&&(o.data_type=n),i&&(o.inputs_schema_definition=i),a&&(o.outputs_schema_definition=a);const l=JSON.stringify(o);return await(await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Lt(f,"create dataset"),f})).json()}async readDataset({datasetId:t,datasetName:r}){let n="/datasets";const i=new URLSearchParams({limit:"1"});if(t&&r)throw new Error("Must provide either datasetName or datasetId, not both");if(t)fr(t),n+=`/${t}`;else if(r)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(n,i);let s;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${t}, name=${r}] not found`);s=a[0]}else s=a;return s}async hasDataset({datasetId:t,datasetName:r}){try{return await this.readDataset({datasetId:t,datasetName:r}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:t,datasetName:r,fromVersion:n,toVersion:i}){let a=t;if(a===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:r})).id);const s=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,s)}async readDatasetOpenaiFinetuning({datasetId:t,datasetName:r}){const n="/datasets";if(t===void 0)if(r!==void 0)t=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${t}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:t=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:a,metadata:s}={}){const o="/datasets",l=new URLSearchParams({limit:t.toString(),offset:r.toString()});if(n!==void 0)for(const c of n)l.append("id",c);i!==void 0&&l.append("name",i),a!==void 0&&l.append("name_contains",a),s!==void 0&&l.append("metadata",JSON.stringify(s));for await(const c of this._getPaginated(o,l))yield*c}async updateDataset(t){const{datasetId:r,datasetName:n,...i}=t;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");const a=r??(await this.readDataset({datasetName:n})).id;fr(a);const s=JSON.stringify(i);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(l,"update dataset"),l})).json()}async updateDatasetTag(t){const{datasetId:r,datasetName:n,asOf:i,tag:a}=t;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");const s=r??(await this.readDataset({datasetName:n})).id;fr(s);const o=JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:a});await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${s}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Lt(l,"update dataset tags",!0),l})}async deleteDataset({datasetId:t,datasetName:r}){let n="/datasets",i=t;if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)fr(i),n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");await this.caller.call(async()=>{const a=await this._fetch(this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(a,`delete ${n}`,!0),a})}async indexDataset({datasetId:t,datasetName:r,tag:n}){let i=t;if(!i&&!r)throw new Error("Must provide either datasetName or datasetId");if(i&&r)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:r})).id),fr(i);const s=JSON.stringify({tag:n});await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(l,"index dataset"),l})).json()}async similarExamples(t,r,n,{filter:i}={}){const a={limit:n,inputs:t};i!==void 0&&(a.filter=i),fr(r);const s=JSON.stringify(a);return(await(await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${r}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:s});return await Lt(c,"fetch similar examples"),c})).json()).examples}async createExample(t,r,n){var u;if(PV(t)&&(r!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=r?n==null?void 0:n.datasetId:t.dataset_id;const a=r?n==null?void 0:n.datasetName:t.dataset_name;if(i===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:a})).id);const s=(r?n==null?void 0:n.createdAt:t.created_at)||new Date;let o;PV(t)?o=t:o={inputs:t,outputs:r,created_at:s==null?void 0:s.toISOString(),id:n==null?void 0:n.exampleId,metadata:n==null?void 0:n.metadata,split:n==null?void 0:n.split,source_run_id:n==null?void 0:n.sourceRunId,use_source_run_io:n==null?void 0:n.useSourceRunIO,use_source_run_attachments:n==null?void 0:n.useSourceRunAttachments,attachments:n==null?void 0:n.attachments};const l=await this._uploadExamplesMultipart(i,[o]);return await this.readExample(((u=l.example_ids)==null?void 0:u[0])??Of())}async createExamples(t){if(Array.isArray(t)){if(t.length===0)return[];const w=t;let v=w[0].dataset_id;const x=w[0].dataset_name;if(v===void 0&&x===void 0)throw new Error("Must provide either datasetName or datasetId");if(v!==void 0&&x!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");v===void 0&&(v=(await this.readDataset({datasetName:x})).id);const b=await this._uploadExamplesMultipart(v,w);return await Promise.all(b.example_ids.map(T=>this.readExample(T)))}const{inputs:r,outputs:n,metadata:i,splits:a,sourceRunIds:s,useSourceRunIOs:o,useSourceRunAttachments:l,attachments:c,exampleIds:u,datasetId:f,datasetName:d}=t;if(r===void 0)throw new Error("Must provide inputs when using legacy parameters");let h=f;const m=d;if(h===void 0&&m===void 0)throw new Error("Must provide either datasetName or datasetId");if(h!==void 0&&m!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");h===void 0&&(h=(await this.readDataset({datasetName:m})).id);const p=r.map((w,v)=>({dataset_id:h,inputs:w,outputs:n==null?void 0:n[v],metadata:i==null?void 0:i[v],split:a==null?void 0:a[v],id:u==null?void 0:u[v],attachments:c==null?void 0:c[v],source_run_id:s==null?void 0:s[v],use_source_run_io:o==null?void 0:o[v],use_source_run_attachments:l==null?void 0:l[v]})),y=await this._uploadExamplesMultipart(h,p);return await Promise.all(y.example_ids.map(w=>this.readExample(w)))}async createLLMExample(t,r,n){return this.createExample({input:t},{output:r},n)}async createChatExample(t,r,n){const i=t.map(s=>gV(s)?yV(s):s),a=gV(r)?yV(r):r;return this.createExample({input:i},{output:a},n)}async readExample(t){fr(t);const r=`/examples/${t}`,n=await this._get(r),{attachment_urls:i,...a}=n,s=a;return i&&(s.attachments=Object.entries(i).reduce((o,[l,c])=>(o[l.slice(11)]={presigned_url:c.presigned_url,mime_type:c.mime_type},o),{})),s}async*listExamples({datasetId:t,datasetName:r,exampleIds:n,asOf:i,splits:a,inlineS3Urls:s,metadata:o,limit:l,offset:c,filter:u,includeAttachments:f}={}){let d;if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0)d=t;else if(r!==void 0)d=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");const h=new URLSearchParams({dataset:d}),m=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;m&&h.append("as_of",m);const p=s??!0;if(h.append("inline_s3_urls",p.toString()),n!==void 0)for(const g of n)h.append("id",g);if(a!==void 0)for(const g of a)h.append("splits",g);if(o!==void 0){const g=JSON.stringify(o);h.append("metadata",g)}l!==void 0&&h.append("limit",l.toString()),c!==void 0&&h.append("offset",c.toString()),u!==void 0&&h.append("filter",u),f===!0&&["attachment_urls","outputs","metadata"].forEach(g=>h.append("select",g));let y=0;for await(const g of this._getPaginated("/examples",h)){for(const w of g){const{attachment_urls:v,...x}=w,b=x;v&&(b.attachments=Object.entries(v).reduce((S,[T,A])=>(S[T.slice(11)]={presigned_url:A.presigned_url,mime_type:A.mime_type||void 0},S),{})),yield b,y++}if(l!==void 0&&y>=l)break}}async deleteExample(t){fr(t);const r=`/examples/${t}`;await this.caller.call(async()=>{const n=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(n,`delete ${r}`,!0),n})}async deleteExamples(t,r){if(t.forEach(n=>fr(n)),r!=null&&r.hardDelete){const n=this._getPlatformEndpointPath("datasets/examples/delete");await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({example_ids:t,hard_delete:!0}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(i,"hard delete examples",!0),i})}else{const n=new URLSearchParams;t.forEach(i=>n.append("example_ids",i)),await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/examples?${n.toString()}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(i,"delete examples",!0),i})}}async updateExample(t,r){let n;r?n=t:n=t.id,fr(n);let i;r?i={id:n,...r}:i=t;let a;return i.dataset_id!==void 0?a=i.dataset_id:a=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(a,[i])}async updateExamples(t){let r;return t[0].dataset_id===void 0?r=(await this.readExample(t[0].id)).dataset_id:r=t[0].dataset_id,this._updateExamplesMultipart(r,t)}async readDatasetVersion({datasetId:t,datasetName:r,asOf:n,tag:i}){let a;if(t?a=t:a=(await this.readDataset({datasetName:r})).id,fr(a),n&&i||!n&&!i)throw new Error("Exactly one of asOf and tag must be specified.");const s=new URLSearchParams;return n!==void 0&&s.append("as_of",typeof n=="string"?n:n.toISOString()),i!==void 0&&s.append("tag",i),await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/datasets/${a}/version?${s.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(l,"read dataset version"),l})).json()}async listDatasetSplits({datasetId:t,datasetName:r,asOf:n}){let i;if(t===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?i=(await this.readDataset({datasetName:r})).id:i=t,fr(i);const a=new URLSearchParams,s=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;return s&&a.append("as_of",s),await this._get(`/datasets/${i}/splits`,a)}async updateDatasetSplits({datasetId:t,datasetName:r,splitName:n,exampleIds:i,remove:a=!1}){let s;if(t===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(t!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");t===void 0?s=(await this.readDataset({datasetName:r})).id:s=t,fr(s);const o={split_name:n,examples:i.map(c=>(fr(c),c)),remove:a},l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/datasets/${s}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Lt(c,"update dataset splits",!0),c})}async createFeedback(t,r,{score:n,value:i,correction:a,comment:s,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:u,feedbackConfig:f,projectId:d,comparativeExperimentId:h,sessionId:m,startTime:p}){var x;if(!t&&!d)throw new Error("One of runId or projectId must be provided");if(t&&d)throw new Error("Only one of runId or projectId can be provided");const y={type:l??"api",metadata:o??{}};c!==void 0&&(y==null?void 0:y.metadata)!==void 0&&!y.metadata.__run&&(y.metadata.__run={run_id:c}),(y==null?void 0:y.metadata)!==void 0&&((x=y.metadata.__run)==null?void 0:x.run_id)!==void 0&&fr(y.metadata.__run.run_id);const g={id:u??Of(),run_id:t,key:r,score:CV(n),value:i,correction:a,comment:s,feedback_source:y,comparative_experiment_id:h,feedbackConfig:f,session_id:m??d,start_time:p},w=JSON.stringify(g),v=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{const b=await this._fetch(v,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:w});return await Lt(b,"create feedback",!0),b}),g}async updateFeedback(t,{score:r,value:n,correction:i,comment:a}){const s={};r!=null&&(s.score=CV(r)),n!=null&&(s.value=n),i!=null&&(s.correction=i),a!=null&&(s.comment=a),fr(t);const o=JSON.stringify(s);await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/${t}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await Lt(l,"update feedback",!0),l})}async readFeedback(t){fr(t);const r=`/feedback/${t}`;return await this._get(r)}async deleteFeedback(t){fr(t);const r=`/feedback/${t}`;await this.caller.call(async()=>{const n=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(n,`delete ${r}`,!0),n})}async*listFeedback({runIds:t,feedbackKeys:r,feedbackSourceTypes:n}={}){const i=new URLSearchParams;if(t)for(const a of t)fr(a),i.append("run",a);if(r)for(const a of r)i.append("key",a);if(n)for(const a of n)i.append("source",a);for await(const a of this._getPaginated("/feedback",i))yield*a}async createPresignedFeedbackToken(t,r,{expiration:n,feedbackConfig:i}={}){const a={run_id:t,feedback_key:r,feedback_config:i};n?typeof n=="string"?a.expires_at=n:(n!=null&&n.hours||n!=null&&n.minutes||n!=null&&n.days)&&(a.expires_in=n):a.expires_in={hours:3};const s=JSON.stringify(a);return await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(l,"create presigned feedback token"),l})).json()}async createComparativeExperiment({name:t,experimentIds:r,referenceDatasetId:n,createdAt:i,description:a,metadata:s,id:o}){var f;if(r.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:r[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");const l={id:o,name:t,experiment_ids:r,reference_dataset_id:n,description:a,created_at:(f=i??new Date)==null?void 0:f.toISOString(),extra:{}};s&&(l.extra.metadata=s);const c=JSON.stringify(l);return(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Lt(d,"create comparative experiment"),d})).json()}async*listPresignedFeedbackTokens(t){fr(t);const r=new URLSearchParams({run_id:t});for await(const n of this._getPaginated("/feedback/tokens",r))yield*n}_selectEvalResults(t){let r;return"results"in t?r=t.results:Array.isArray(t)?r=t:r=[t],r}async _logEvaluationFeedback(t,r,n){const i=this._selectEvalResults(t),a=[];for(const s of i){let o=n||{};s.evaluatorInfo&&(o={...s.evaluatorInfo,...o});let l=null;s.targetRunId?l=s.targetRunId:r&&(l=r.id),a.push(await this.createFeedback(l,s.key,{score:s.score,value:s.value,comment:s.comment,correction:s.correction,sourceInfo:o,sourceRunId:s.sourceRunId,feedbackConfig:s.feedbackConfig,feedbackSourceType:"model",sessionId:r==null?void 0:r.session_id,startTime:r==null?void 0:r.start_time}))}return[i,a]}async logEvaluationFeedback(t,r,n){const[i]=await this._logEvaluationFeedback(t,r,n);return i}async createFeedbackConfig(t){const{feedbackKey:r,feedbackConfig:n,isLowerScoreBetter:i=!1}=t,a={feedback_key:r,feedback_config:n,is_lower_score_better:i};return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)});return await Lt(o,"create feedback config"),o})).json()}async*listFeedbackConfigs(t={}){const{feedbackKeys:r,nameContains:n,limit:i}=t,a=new URLSearchParams;r&&r.forEach(o=>{a.append("key",o)}),n&&a.append("name_contains",n),a.append("limit",(i!==void 0?Math.min(i,100):100).toString());let s=0;for await(const o of this._getPaginated("/feedback-configs",a))if(yield*o,s+=o.length,i!==void 0&&s>=i)break}async updateFeedbackConfig(t,r={}){const{feedbackConfig:n,isLowerScoreBetter:i}=r,a={feedback_key:t};return n!==void 0&&(a.feedback_config=n),i!==void 0&&(a.is_lower_score_better=i),(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/feedback-configs`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)});return await Lt(o,"update feedback config"),o})).json()}async deleteFeedbackConfig(t){const r=new URLSearchParams({feedback_key:t});await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/feedback-configs?${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(n,"delete feedback config",!0),n})}async*listAnnotationQueues(t={}){const{queueIds:r,name:n,nameContains:i,limit:a}=t,s=new URLSearchParams;r&&r.forEach((l,c)=>{fr(l,`queueIds[${c}]`),s.append("ids",l)}),n&&s.append("name",n),i&&s.append("name_contains",i),s.append("limit",(a!==void 0?Math.min(a,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",s))if(yield*l,o++,a!==void 0&&o>=a)break}async createAnnotationQueue(t){const{name:r,description:n,queueId:i,rubricInstructions:a,rubricItems:s}=t,o={name:r,description:n,id:i||Of(),rubric_instructions:a,rubric_items:s},l=JSON.stringify(Object.fromEntries(Object.entries(o).filter(([u,f])=>f!==void 0)));return(await this.caller.call(async()=>{const u=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Lt(u,"create annotation queue"),u})).json()}async readAnnotationQueue(t){return(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${fr(t,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(n,"read annotation queue"),n})).json()}async updateAnnotationQueue(t,r){const{name:n,description:i,rubricInstructions:a,rubricItems:s}=r,o={};n!==void 0&&(o.name=n),i!==void 0&&(o.description=i),a!==void 0&&(o.rubric_instructions=a),s!==void 0&&(o.rubric_items=s);const l=JSON.stringify(o);await this.caller.call(async()=>{const c=await this._fetch(`${this.apiUrl}/annotation-queues/${fr(t,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Lt(c,"update annotation queue",!0),c})}async deleteAnnotationQueue(t){await this.caller.call(async()=>{const r=await this._fetch(`${this.apiUrl}/annotation-queues/${fr(t,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(r,"delete annotation queue",!0),r})}async addRunsToAnnotationQueue(t,r){const n=JSON.stringify(r.map((i,a)=>fr(i,`runIds[${a}]`).toString()));await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/annotation-queues/${fr(t,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Lt(i,"add runs to annotation queue",!0),i})}async getRunFromAnnotationQueue(t,r){const n=`/annotation-queues/${fr(t,"queueId")}/run`;return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(a,"get run from annotation queue"),a})).json()}async deleteRunFromAnnotationQueue(t,r){await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${fr(t,"queueId")}/runs/${fr(r,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(n,"delete run from annotation queue",!0),n})}async getSizeFromAnnotationQueue(t){return(await this.caller.call(async()=>{const n=await this._fetch(`${this.apiUrl}/annotation-queues/${fr(t,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(n,"get size from annotation queue"),n})).json()}async _currentTenantIsOwner(t){const r=await this._getSettings();return t=="-"||r.tenant_handle===t}async _ownerConflictError(t,r){const n=await this._getSettings();return new Error(`Cannot ${t} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(t){const n=await(await this.caller.call(async()=>{const i=await this._fetch(`${this.apiUrl}/commits/${t}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(i,"get latest commit hash"),i})).json();if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(t,r){const[n,i,a]=Hd(t),s=JSON.stringify({like:r});return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/likes/${n}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(l,`${r?"like":"unlike"} prompt`),l})).json()}async _getPromptUrl(t){const[r,n,i]=Hd(t);if(await this._currentTenantIsOwner(r)){const a=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${n}/${i.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${a.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${r}/${n}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${n}`}async promptExists(t){return!!await this.getPrompt(t)}async likePrompt(t){return this._likeOrUnlikePrompt(t,!0)}async unlikePrompt(t){return this._likeOrUnlikePrompt(t,!1)}async*listCommits(t){for await(const r of this._getPaginated(`/commits/${t}/`,new URLSearchParams,n=>n.commits))yield*r}async*listPrompts(t){const r=new URLSearchParams;r.append("sort_field",(t==null?void 0:t.sortField)??"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!(t!=null&&t.isArchived)).toString()),(t==null?void 0:t.isPublic)!==void 0&&r.append("is_public",t.isPublic.toString()),t!=null&&t.query&&r.append("query",t.query);for await(const n of this._getPaginated("/repos",r,i=>i.repos))yield*n}async getPrompt(t){const[r,n,i]=Hd(t),a=await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return(o==null?void 0:o.status)===404?null:(await Lt(o,"get prompt"),o)}),s=await(a==null?void 0:a.json());return s!=null&&s.repo?s.repo:null}async createPrompt(t,r){const n=await this._getSettings();if(r!=null&&r.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle.
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,a,s]=Hd(t);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const o={repo_handle:a,...(r==null?void 0:r.description)&&{description:r.description},...(r==null?void 0:r.readme)&&{readme:r.readme},...(r==null?void 0:r.tags)&&{tags:r.tags},is_public:!!(r!=null&&r.isPublic)},l=JSON.stringify(o),c=await this.caller.call(async()=>{const f=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await Lt(f,"create prompt"),f}),{repo:u}=await c.json();return u}async createCommit(t,r,n){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[i,a,s]=Hd(t),o=(n==null?void 0:n.parentCommitHash)==="latest"||!(n!=null&&n.parentCommitHash)?await this._getLatestCommitHash(`${i}/${a}`):n==null?void 0:n.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(r)),parent_commit:o},c=JSON.stringify(l),f=await(await this.caller.call(async()=>{const d=await this._fetch(`${this.apiUrl}/commits/${i}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:c});return await Lt(d,"create commit"),d})).json();return this._getPromptUrl(`${i}/${a}${f.commit_hash?`:${f.commit_hash}`:""}`)}async updateExamplesMultipart(t,r=[]){return this._updateExamplesMultipart(t,r)}async _updateExamplesMultipart(t,r=[]){var s;if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const o of r){const l=o.id,c={...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split}},u=Co(c,`Serializing body for example with id: ${l}`),f=new Blob([u],{type:"application/json"});if(n.append(l,f),o.inputs){const d=Co(o.inputs,`Serializing inputs for example with id: ${l}`),h=new Blob([d],{type:"application/json"});n.append(`${l}.inputs`,h)}if(o.outputs){const d=Co(o.outputs,`Serializing outputs whle updating example with id: ${l}`),h=new Blob([d],{type:"application/json"});n.append(`${l}.outputs`,h)}if(o.attachments)for(const[d,h]of Object.entries(o.attachments)){let m,p;Array.isArray(h)?[m,p]=h:(m=h.mimeType,p=h.data);const y=new Blob([p],{type:`${m}; length=${p.byteLength}`});n.append(`${l}.attachment.${d}`,y)}if(o.attachments_operations){const d=Co(o.attachments_operations,`Serializing attachments while updating example with id: ${l}`),h=new Blob([d],{type:"application/json"});n.append(`${l}.attachments_operations`,h)}}const i=t??((s=r[0])==null?void 0:s.dataset_id);return(await this.caller.call(async()=>{const o=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${i}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Lt(o,"update examples"),o})).json()}async uploadExamplesMultipart(t,r=[]){return this._uploadExamplesMultipart(t,r)}async _uploadExamplesMultipart(t,r=[]){if(!await this._getDatasetExamplesMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const n=new FormData;for(const a of r){const s=(a.id??Of()).toString(),o={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},l=Co(o,`Serializing body for uploaded example with id: ${s}`),c=new Blob([l],{type:"application/json"});if(n.append(s,c),a.inputs){const u=Co(a.inputs,`Serializing inputs for uploaded example with id: ${s}`),f=new Blob([u],{type:"application/json"});n.append(`${s}.inputs`,f)}if(a.outputs){const u=Co(a.outputs,`Serializing outputs for uploaded example with id: ${s}`),f=new Blob([u],{type:"application/json"});n.append(`${s}.outputs`,f)}if(a.attachments)for(const[u,f]of Object.entries(a.attachments)){let d,h;Array.isArray(f)?[d,h]=f:(d=f.mimeType,h=f.data);const m=new Blob([h],{type:`${d}; length=${h.byteLength}`});n.append(`${s}.attachment.${u}`,m)}}return(await this.caller.call(async()=>{const a=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${t}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await Lt(a,"upload examples"),a})).json()}async updatePrompt(t,r){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[n,i]=Hd(t);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);const a={};if((r==null?void 0:r.description)!==void 0&&(a.description=r.description),(r==null?void 0:r.readme)!==void 0&&(a.readme=r.readme),(r==null?void 0:r.tags)!==void 0&&(a.tags=r.tags),(r==null?void 0:r.isPublic)!==void 0&&(a.is_public=r.isPublic),(r==null?void 0:r.isArchived)!==void 0&&(a.is_archived=r.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const s=JSON.stringify(a);return(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/repos/${n}/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await Lt(l,"update prompt"),l})).json()}async deletePrompt(t){if(!await this.promptExists(t))throw new Error("Prompt does not exist, you must create it first.");const[r,n,i]=Hd(t);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return(await this.caller.call(async()=>{const s=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(s,"delete prompt"),s})).json()}_getPromptCacheKey(t,r){return`${t}${r?":with_model":""}`}async _fetchPromptFromApi(t,r){const[n,i,a]=Hd(t),o=await(await this.caller.call(async()=>{const l=await this._fetch(`${this.apiUrl}/commits/${n}/${i}/${a}${r!=null&&r.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Lt(l,"pull prompt commit"),l})).json();return{owner:n,repo:i,commit_hash:o.commit_hash,manifest:o.manifest,examples:o.examples}}async pullPromptCommit(t,r){const n=this._fetchPromptFromApi.bind(this,t,r);if(!(r!=null&&r.skipCache)&&this._promptCache){const i=this._getPromptCacheKey(t,r==null?void 0:r.includeModel),a=this._promptCache.get(i,n);if(a)return a;const s=await n();return this._promptCache.set(i,s,n),s}return this._fetchPromptFromApi(t,r)}async _pullPrompt(t,r){const n=await this.pullPromptCommit(t,{includeModel:r==null?void 0:r.includeModel,skipCache:r==null?void 0:r.skipCache});return JSON.stringify(n.manifest)}async pushPrompt(t,r){return await this.promptExists(t)?r&&Object.keys(r).some(i=>i!=="object")&&await this.updatePrompt(t,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}):await this.createPrompt(t,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}),r!=null&&r.object?await this.createCommit(t,r==null?void 0:r.object,{parentCommitHash:r==null?void 0:r.parentCommitHash}):await this._getPromptUrl(t)}async clonePublicDataset(t,r={}){const{sourceApiUrl:n=this.apiUrl,datasetName:i}=r,[a,s]=this.parseTokenOrUrl(t,n),o=new sv({apiUrl:a,apiKey:"placeholder"}),l=await o.readSharedDataset(s),c=i||l.name;try{if(await this.hasDataset({datasetId:c})){console.log(`Dataset ${c} already exists in your tenant. Skipping.`);return}}catch{}const u=await o.listSharedExamples(s),f=await this.createDataset(c,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map(d=>d.inputs),outputs:u.flatMap(d=>d.outputs?[d.outputs]:[]),datasetId:f.id})}catch(d){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),d}}parseTokenOrUrl(t,r,n=2,i="dataset"){try{return fr(t),[r,t]}catch{}try{const s=new URL(t).pathname.split("/").filter(o=>o!=="");if(s.length>=n){const o=s[s.length-n];return[r,o]}else throw new Error(`Invalid public ${i} URL: ${t}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${t}`)}}cleanup(){this._promptCache&&this._promptCache.stop()}async awaitPendingTraceBatches(){var t,r;if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await new Promise(n=>setTimeout(n,1)),await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:n})=>n),this.batchIngestCaller.queue.onIdle()]),this.langSmithToOTELTranslator!==void 0&&await((r=(t=ERe())==null?void 0:t.DEFAULT_LANGSMITH_SPAN_PROCESSOR)==null?void 0:r.forceFlush())}}function PV(e){return"dataset_id"in e||"dataset_name"in e}const tMe=e=>!!["TRACING_V2","TRACING"].find(r=>ks(r)==="true"),Dh=Symbol.for("lc:context_variables"),g4=Symbol.for("langsmith:replica_trace_roots");function NV(e,t){if(Dh in e)return e[Dh][t]}function rMe(e,t,r){const n=Dh in e?e[Dh]:{};n[t]=r,e[Dh]=n}const nMe="6ba7b810-9dad-11d1-80b4-00c04fd430c8";function IV(e){const r=Object.keys(e).sort().map(n=>`${n}:${e[n]??""}`).join("|");return JT(r,nMe)}function iMe(e){return e.replace(/[-:.]/g,"")}function Fae(e,t=1){const r=t.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${r}Z`}function Bae(e,t,r=1){const n=Fae(e,r);return{dottedOrder:iMe(n)+t,microsecondPrecisionDatestring:n}}const aMe=new Set(["projectName","updates","reroot"]);function sMe(e){const t={};for(const r of Object.keys(e))aMe.has(r)&&(t[r]=e[r]);return t}class rk{constructor(t,r,n,i){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=t,this.tags=r,this.project_name=n,this.replicas=i}static fromHeader(t){const r=t.split(",");let n={},i=[],a,s;for(const o of r){const[l,c]=o.split("="),u=decodeURIComponent(c);l==="langsmith-metadata"?n=JSON.parse(u):l==="langsmith-tags"?i=u.split(","):l==="langsmith-project"?a=u:l==="langsmith-replicas"&&(s=JSON.parse(u).map(d=>Array.isArray(d)?d:sMe(d)))}return new rk(n,i,a,s)}toHeader(){const t=[];return this.metadata&&Object.keys(this.metadata).length>0&&t.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&t.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&t.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),t.join(",")}}class Qs{constructor(t){var o;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"distributedParentId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_awaitInputsOnPost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),oMe(t)){Object.assign(this,{...t});return}const r=Qs.getDefaultConfig(),{metadata:n,...i}=t,a=i.client??Qs.getSharedClient(),s={...n,...(o=i==null?void 0:i.extra)==null?void 0:o.metadata};if(i.extra={...i.extra,metadata:s},"id"in i&&i.id==null&&delete i.id,Object.assign(this,{...r,...i,client:a}),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),this.dotted_order||(this._serialized_start_time=Fae(this.start_time,this.execution_order)),this.id||(this.id=tRe(this._serialized_start_time??this.start_time)),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=fMe(this.replicas),!this.dotted_order){const{dottedOrder:l}=Bae(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l}}set metadata(t){var r;this.extra={...this.extra,metadata:{...(r=this.extra)==null?void 0:r.metadata,...t}}}get metadata(){var t;return(t=this.extra)==null?void 0:t.metadata}static getDefaultConfig(){const t=Date.now();return{run_type:"chain",project_name:dae(),child_runs:[],api_url:Bu("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Bu("LANGCHAIN_API_KEY"),caller_options:{},start_time:t,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Qs.sharedClient||(Qs.sharedClient=new sv),Qs.sharedClient}createChild(t){var u,f,d,h,m,p,y;const r=this.child_execution_order+1,n=(u=this.replicas)==null?void 0:u.map(g=>{const{reroot:w,...v}=g;return v}),i=t.replicas??n,a=new Qs({...t,parent_run:this,project_name:this.project_name,replicas:i,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r});Dh in this&&(a[Dh]=this[Dh]);const s=Symbol.for("lc:child_config"),o=((f=t.extra)==null?void 0:f[s])??this.extra[s];if(cMe(o)){const g={...o},w=lMe(g.callbacks)?(h=(d=g.callbacks).copy)==null?void 0:h.call(d):void 0;w&&(Object.assign(w,{_parentRunId:a.id}),(y=(p=(m=w.handlers)==null?void 0:m.find(Uae))==null?void 0:p.updateFromRunTree)==null||y.call(p,a),g.callbacks=w),a.extra[s]=g}const l=new Set;let c=this;for(;c!=null&&!l.has(c.id);)l.add(c.id),c.child_execution_order=Math.max(c.child_execution_order,r),c=c.parent_run;return this.child_runs.push(a),a}async end(t,r,n=Date.now(),i){this.outputs=this.outputs??t,this.error=this.error??r,this.end_time=this.end_time??n,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(t,r,n=!0){var o,l;const i=t.extra??{};if(((o=i==null?void 0:i.runtime)==null?void 0:o.library)===void 0&&(i.runtime||(i.runtime={}),r))for(const[c,u]of Object.entries(r))i.runtime[c]||(i.runtime[c]=u);let a,s;return n?(s=((l=t.parent_run)==null?void 0:l.id)??t.parent_run_id,a=[]):(a=t.child_runs.map(c=>this._convertToCreate(c,r,n)),s=void 0),{id:t.id,name:t.name,start_time:t._serialized_start_time??t.start_time,end_time:t.end_time,run_type:t.run_type,reference_example_id:t.reference_example_id,extra:i,serialized:t.serialized,error:t.error,inputs:t.inputs,outputs:t.outputs,session_name:t.project_name,child_runs:a,parent_run_id:s,trace_id:t.trace_id,dotted_order:t.dotted_order,tags:t.tags,attachments:t.attachments,events:t.events}}_sliceParentId(t,r){if(r.dotted_order){const n=r.dotted_order.split(".");let i=null;for(let a=0;a<n.length;a++)if(n[a].slice(-36)===t){i=a;break}if(i!==null){const a=n.slice(i+1);r.dotted_order=a.join("."),a.length>0?r.trace_id=a[0].slice(-36):r.trace_id=r.id}}r.parent_run_id===t&&(r.parent_run_id=void 0)}_setReplicaTraceRoot(t,r){const n=NV(this,g4)??{};n[t]=r,rMe(this,g4,n);for(const i of this.child_runs)i._setReplicaTraceRoot(t,r)}_remapForProject(t){const{projectName:r,runtimeEnv:n,excludeChildRuns:i=!0,reroot:a=!1,distributedParentId:s,apiUrl:o,apiKey:l,workspaceId:c}=t,u=this._convertToCreate(this,n,i);if(r===this.project_name)return{...u,session_name:r};if(a){if(s)this._sliceParentId(s,u);else if(u.parent_run_id=void 0,u.dotted_order){const w=u.dotted_order.split(".");w.length>0&&(u.dotted_order=w[w.length-1],u.trace_id=u.id)}const g=IV({projectName:r,apiUrl:o,apiKey:l,workspaceId:c});this._setReplicaTraceRoot(g,u.id)}let f;if(!a){const g=NV(this,g4)??{},w=IV({projectName:r,apiUrl:o,apiKey:l,workspaceId:c});if(f=g[w],f&&(u.trace_id=f,u.dotted_order)){const v=u.dotted_order.split(".");let x=null;for(let b=0;b<v.length;b++)if(v[b].slice(-36)===f){x=b;break}if(x!==null){const b=v.slice(x);u.dotted_order=b.join(".")}}}const d=u.id,h=iE(d,r);let m;u.trace_id?m=iE(u.trace_id,r):m=h;let p;u.parent_run_id&&(p=iE(u.parent_run_id,r));let y;return u.dotted_order&&(y=u.dotted_order.split(".").map(v=>{const x=v.slice(-36),b=iE(x,r);return v.slice(0,-36)+b}).join(".")),{...u,id:h,trace_id:m,parent_run_id:p,dotted_order:y,session_name:r}}async postRun(t=!0){this._awaitInputsOnPost&&(this.inputs=await this.inputs);try{const r=Sae();if(this.replicas&&this.replicas.length>0)for(const{projectName:n,apiKey:i,apiUrl:a,workspaceId:s,reroot:o}of this.replicas){const l=this._remapForProject({projectName:n??this.project_name,runtimeEnv:r,excludeChildRuns:!0,reroot:o,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:i,workspaceId:s});await this.client.createRun(l,{apiKey:i,apiUrl:a,workspaceId:s})}else{const n=this._convertToCreate(this,r,t);await this.client.createRun(n)}if(!t){AA("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const n of this.child_runs)await n.postRun(!1)}this.child_runs=[]}catch(r){console.error(`Error in postRun for run ${this.id}:`,r)}}async patchRun(t){var r;if(this.replicas&&this.replicas.length>0)for(const{projectName:n,apiKey:i,apiUrl:a,workspaceId:s,updates:o,reroot:l}of this.replicas){const c=this._remapForProject({projectName:n??this.project_name,runtimeEnv:void 0,excludeChildRuns:!0,reroot:l,distributedParentId:this.distributedParentId,apiUrl:a,apiKey:i,workspaceId:s}),u={id:c.id,name:c.name,run_type:c.run_type,start_time:c.start_time,outputs:c.outputs,error:c.error,parent_run_id:c.parent_run_id,session_name:c.session_name,reference_example_id:c.reference_example_id,end_time:c.end_time,dotted_order:c.dotted_order,trace_id:c.trace_id,events:c.events,tags:c.tags,extra:c.extra,attachments:this.attachments,...o};t!=null&&t.excludeInputs||(u.inputs=c.inputs),await this.client.updateRun(c.id,u,{apiKey:i,apiUrl:a,workspaceId:s})}else try{const n={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:((r=this.parent_run)==null?void 0:r.id)??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};t!=null&&t.excludeInputs||(n.inputs=this.inputs),await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}this.child_runs=[]}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(t){this.events||(this.events=[]),typeof t=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:t}):this.events.push({...t,time:t.time??new Date().toISOString()})}static fromRunnableConfig(t,r){var c,u,f,d;const n=t==null?void 0:t.callbacks;let i,a,s,o=tMe();if(n){const h=((c=n==null?void 0:n.getParentRunId)==null?void 0:c.call(n))??"",m=(u=n==null?void 0:n.handlers)==null?void 0:u.find(p=>(p==null?void 0:p.name)=="langchain_tracer");i=(f=m==null?void 0:m.getRun)==null?void 0:f.call(m,h),a=m==null?void 0:m.projectName,s=m==null?void 0:m.client,o=o||!!m}return i?new Qs({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:s,tracingEnabled:o,project_name:a,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((t==null?void 0:t.tags)??[]))],extra:{metadata:{...(d=i==null?void 0:i.extra)==null?void 0:d.metadata,...t==null?void 0:t.metadata}}}).createChild(r):new Qs({...r,client:s,tracingEnabled:o,project_name:a})}static fromDottedOrder(t){return this.fromHeaders({"langsmith-trace":t})}static fromHeaders(t,r){var u;const n="get"in t&&typeof t.get=="function"?{"langsmith-trace":t.get("langsmith-trace"),baggage:t.get("baggage")}:t,i=n["langsmith-trace"];if(!i||typeof i!="string")return;const a=i.trim(),s=a.split(".").map(f=>{const[d,h]=f.split("Z");return{strTime:d,time:Date.parse(d+"Z"),uuid:h}}),o=s[0].uuid,l={...r,name:(r==null?void 0:r.name)??"parent",run_type:(r==null?void 0:r.run_type)??"chain",start_time:(r==null?void 0:r.start_time)??Date.now(),id:(u=s.at(-1))==null?void 0:u.uuid,trace_id:o,dotted_order:a};if(n.baggage&&typeof n.baggage=="string"){const f=rk.fromHeader(n.baggage);l.metadata=f.metadata,l.tags=f.tags,l.project_name=f.project_name,l.replicas=f.replicas}const c=new Qs(l);return c.distributedParentId=c.id,c}toHeaders(t){var n;const r={"langsmith-trace":this.dotted_order,baggage:new rk((n=this.extra)==null?void 0:n.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(t)for(const[i,a]of Object.entries(r))t.set(i,a);return r}}Object.defineProperty(Qs,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function oMe(e){return e!=null&&typeof e.createChild=="function"&&typeof e.postRun=="function"}function Uae(e){return typeof e=="object"&&e!=null&&typeof e.name=="string"&&e.name==="langchain_tracer"}function RV(e){return Array.isArray(e)&&e.some(t=>Uae(t))}function lMe(e){return typeof e=="object"&&e!=null&&Array.isArray(e.handlers)}function cMe(e){const t=e==null?void 0:e.callbacks;return e!=null&&typeof t=="object"&&(RV(t==null?void 0:t.handlers)||RV(t))}function uMe(){const e=Bu("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t)){const r=[];for(const n of t){if(typeof n!="object"||n===null){console.warn(`Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got ${typeof n}`);continue}if(typeof n.api_url!="string"){console.warn(`Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof n.api_url}`);continue}if(typeof n.api_key!="string"){console.warn(`Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got ${typeof n.api_key}`);continue}r.push({apiUrl:n.api_url.replace(/\/$/,""),apiKey:n.api_key})}return r}else if(typeof t=="object"&&t!==null){dMe(t);const r=[];for(const[n,i]of Object.entries(t)){const a=n.replace(/\/$/,"");if(typeof i=="string")r.push({apiUrl:a,apiKey:i});else{console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${n}: expected string, got ${typeof i}`);continue}}return r}else return console.warn(`Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got ${typeof t}`),[]}catch(t){if(ULe(t))throw t;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}function fMe(e){return e?e.map(t=>Array.isArray(t)?{projectName:t[0],updates:t[1]}:t):uMe()}function dMe(e){if(Object.keys(e).length>0&&ks("ENDPOINT"))throw new BLe}var zae={};Gt(zae,{BaseTracer:()=>wd,isBaseTracer:()=>kg});const hMe=e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e};function nL(e,t){if(e)return new Qs({...e,start_time:e._serialized_start_time??e.start_time,parent_run:nL(t),child_runs:e.child_runs.map(r=>nL(r)).filter(r=>r!==void 0),extra:{...e.extra,runtime:oae()},tracingEnabled:!1})}function y4(e,t){return e&&!Array.isArray(e)&&typeof e=="object"?e:{[t]:e}}function kg(e){return typeof e._addRunToRunMap=="function"}var wd=class extends i1{constructor(t){super(...arguments);L(this,"runMap",new Map);L(this,"runTreeMap",new Map);L(this,"usesRunTreeMap",!1)}copy(){return this}getRunById(t){if(t!==void 0)return this.usesRunTreeMap?hMe(this.runTreeMap.get(t)):this.runMap.get(t)}stringifyError(t){return t instanceof Error?t.message+(t!=null&&t.stack?`

${t.stack}`:""):typeof t=="string"?t:`${t}`}_addChildRun(t,r){t.child_runs.push(r)}_addRunToRunMap(t){const{dottedOrder:r,microsecondPrecisionDatestring:n}=Bae(new Date(t.start_time).getTime(),t.id,t.execution_order),i={...t},a=this.getRunById(i.parent_run_id);if(i.parent_run_id!==void 0?a?(this._addChildRun(a,i),a.child_execution_order=Math.max(a.child_execution_order,i.child_execution_order),i.trace_id=a.trace_id,a.dotted_order!==void 0&&(i.dotted_order=[a.dotted_order,r].join("."),i._serialized_start_time=n)):i.parent_run_id=void 0:(i.trace_id=i.id,i.dotted_order=r,i._serialized_start_time=n),this.usesRunTreeMap){const s=nL(i,a);s!==void 0&&this.runTreeMap.set(i.id,s)}else this.runMap.set(i.id,i);return i}async _endTrace(t){var n;const r=t.parent_run_id!==void 0&&this.getRunById(t.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,t.child_execution_order):await this.persistRun(t),await((n=this.onRunUpdate)==null?void 0:n.call(this,t)),this.usesRunTreeMap?this.runTreeMap.delete(t.id):this.runMap.delete(t.id)}_getExecutionOrder(t){const r=t!==void 0&&this.getRunById(t);return r?r.child_execution_order+1:1}_createRunForLLMStart(t,r,n,i,a,s,o,l){const c=this._getExecutionOrder(i),u=Date.now(),f=o?{...a,metadata:o}:a,d={id:n,name:l??t.id[t.id.length-1],parent_run_id:i,start_time:u,serialized:t,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:r},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:f??{},tags:s||[]};return this._addRunToRunMap(d)}async handleLLMStart(t,r,n,i,a,s,o,l){var u,f;const c=this.getRunById(n)??this._createRunForLLMStart(t,r,n,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onLLMStart)==null?void 0:f.call(this,c)),c}_createRunForChatModelStart(t,r,n,i,a,s,o,l){const c=this._getExecutionOrder(i),u=Date.now(),f=o?{...a,metadata:o}:a,d={id:n,name:l??t.id[t.id.length-1],parent_run_id:i,start_time:u,serialized:t,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:r},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:f??{},tags:s||[]};return this._addRunToRunMap(d)}async handleChatModelStart(t,r,n,i,a,s,o,l){var u,f;const c=this.getRunById(n)??this._createRunForChatModelStart(t,r,n,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onLLMStart)==null?void 0:f.call(this,c)),c}async handleLLMEnd(t,r,n,i,a){var o;const s=this.getRunById(r);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.outputs=t,s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleLLMError(t,r,n,i,a){var o;const s=this.getRunById(r);if(!s||(s==null?void 0:s.run_type)!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(t),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),s.extra={...s.extra,...a},await((o=this.onLLMError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForChainStart(t,r,n,i,a,s,o,l,c){const u=this._getExecutionOrder(i),f=Date.now(),d={id:n,name:l??t.id[t.id.length-1],parent_run_id:i,start_time:f,serialized:t,events:[{name:"start",time:new Date(f).toISOString()}],inputs:r,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:s?{...c,metadata:s}:{...c},tags:a||[]};return this._addRunToRunMap(d)}async handleChainStart(t,r,n,i,a,s,o,l){var u,f;const c=this.getRunById(n)??this._createRunForChainStart(t,r,n,i,a,s,o,l);return await((u=this.onRunCreate)==null?void 0:u.call(this,c)),await((f=this.onChainStart)==null?void 0:f.call(this,c)),c}async handleChainEnd(t,r,n,i,a){var o;const s=this.getRunById(r);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=y4(t,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=y4(a.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,s)),await this._endTrace(s),s}async handleChainError(t,r,n,i,a){var o;const s=this.getRunById(r);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(t),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(s.inputs=y4(a.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,s)),await this._endTrace(s),s}_createRunForToolStart(t,r,n,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),u={id:n,name:o??t.id[t.id.length-1],parent_run_id:i,start_time:c,serialized:t,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(u)}async handleToolStart(t,r,n,i,a,s,o){var c,u;const l=this.getRunById(n)??this._createRunForToolStart(t,r,n,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((u=this.onToolStart)==null?void 0:u.call(this,l)),l}async handleToolEnd(t,r){var i;const n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:t},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(t,r){var i;const n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(t),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(t,r){var a;const n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;const i=n;i.actions=i.actions||[],i.actions.push(t),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:t}}),await((a=this.onAgentAction)==null?void 0:a.call(this,n))}async handleAgentEnd(t,r){var i;const n=this.getRunById(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:t}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}_createRunForRetrieverStart(t,r,n,i,a,s,o){const l=this._getExecutionOrder(i),c=Date.now(),u={id:n,name:o??t.id[t.id.length-1],parent_run_id:i,start_time:c,serialized:t,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:a||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(t,r,n,i,a,s,o){var c,u;const l=this.getRunById(n)??this._createRunForRetrieverStart(t,r,n,i,a,s,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((u=this.onRetrieverStart)==null?void 0:u.call(this,l)),l}async handleRetrieverEnd(t,r){var i;const n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:t},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(t,r){var i;const n=this.getRunById(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(t),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(t,r){var i;const n=this.getRunById(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:t}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(t,r,n,i,a,s){var l;const o=this.getRunById(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:t,idx:r,chunk:s==null?void 0:s.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,t,{chunk:s==null?void 0:s.chunk})),o}},C$={exports:{}};C$.exports;(function(e){const r=(a=0)=>s=>`\x1B[${38+a};5;${s}m`,n=(a=0)=>(s,o,l)=>`\x1B[${38+a};2;${s};${o};${l}m`;function i(){const a=new Map,s={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};s.color.gray=s.color.blackBright,s.bgColor.bgGray=s.bgColor.bgBlackBright,s.color.grey=s.color.blackBright,s.bgColor.bgGrey=s.bgColor.bgBlackBright;for(const[o,l]of Object.entries(s)){for(const[c,u]of Object.entries(l))s[c]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},l[c]=s[c],a.set(u[0],u[1]);Object.defineProperty(s,o,{value:l,enumerable:!1})}return Object.defineProperty(s,"codes",{value:a,enumerable:!1}),s.color.close="\x1B[39m",s.bgColor.close="\x1B[49m",s.color.ansi256=r(),s.color.ansi16m=n(),s.bgColor.ansi256=r(10),s.bgColor.ansi16m=n(10),Object.defineProperties(s,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(f=>f+f).join(""));const u=Number.parseInt(c,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:o=>s.rgbToAnsi256(...s.hexToRgb(o)),enumerable:!1}}),s}Object.defineProperty(e,"exports",{enumerable:!0,get:i})})(C$);var pMe=C$.exports;const Vae=Hr(pMe);var Wae={};Gt(Wae,{ConsoleCallbackHandler:()=>iL});function Es(e,t){return`${e.open}${t}${e.close}`}function dl(e,t){try{return JSON.stringify(e,null,2)}catch{return t}}function LV(e){return typeof e=="string"?e.trim():e==null?e:dl(e,e.toString())}function Gd(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:Js}=Vae;var iL=class extends wd{constructor(){super(...arguments);L(this,"name","console_callback_handler")}persistRun(t){return Promise.resolve()}getParents(t){const r=[];let n=t;for(;n.parent_run_id;){const i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(t){const n=[...this.getParents(t).reverse(),t].map((i,a,s)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return a===s.length-1?Es(Vae.bold,o):o}).join(" > ");return Es(Js.grey,n)}onChainStart(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.green,"[chain/start]")} [${r}] Entering Chain run with input: ${dl(t.inputs,"[inputs]")}`)}onChainEnd(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.cyan,"[chain/end]")} [${r}] [${Gd(t)}] Exiting Chain run with output: ${dl(t.outputs,"[outputs]")}`)}onChainError(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.red,"[chain/error]")} [${r}] [${Gd(t)}] Chain run errored with error: ${dl(t.error,"[error]")}`)}onLLMStart(t){const r=this.getBreadcrumbs(t),n="prompts"in t.inputs?{prompts:t.inputs.prompts.map(i=>i.trim())}:t.inputs;console.log(`${Es(Js.green,"[llm/start]")} [${r}] Entering LLM run with input: ${dl(n,"[inputs]")}`)}onLLMEnd(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.cyan,"[llm/end]")} [${r}] [${Gd(t)}] Exiting LLM run with output: ${dl(t.outputs,"[response]")}`)}onLLMError(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.red,"[llm/error]")} [${r}] [${Gd(t)}] LLM run errored with error: ${dl(t.error,"[error]")}`)}onToolStart(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.green,"[tool/start]")} [${r}] Entering Tool run with input: "${LV(t.inputs.input)}"`)}onToolEnd(t){var n;const r=this.getBreadcrumbs(t);console.log(`${Es(Js.cyan,"[tool/end]")} [${r}] [${Gd(t)}] Exiting Tool run with output: "${LV((n=t.outputs)==null?void 0:n.output)}"`)}onToolError(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.red,"[tool/error]")} [${r}] [${Gd(t)}] Tool run errored with error: ${dl(t.error,"[error]")}`)}onRetrieverStart(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${dl(t.inputs,"[inputs]")}`)}onRetrieverEnd(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.cyan,"[retriever/end]")} [${r}] [${Gd(t)}] Exiting Retriever run with output: ${dl(t.outputs,"[outputs]")}`)}onRetrieverError(t){const r=this.getBreadcrumbs(t);console.log(`${Es(Js.red,"[retriever/error]")} [${r}] [${Gd(t)}] Retriever run errored with error: ${dl(t.error,"[error]")}`)}onAgentAction(t){const r=t,n=this.getBreadcrumbs(t);console.log(`${Es(Js.blue,"[agent/action]")} [${n}] Agent selected action: ${dl(r.actions[r.actions.length-1],"[action]")}`)}};let v4;const Hae=()=>{if(v4===void 0){const e=Ru("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};v4=new sv(e)}return v4};let mMe=class{getStore(){}run(t,r){return r()}};const w4=Symbol.for("ls:tracing_async_local_storage"),gMe=new mMe;let yMe=class{getInstance(){return globalThis[w4]??gMe}initializeGlobalInstance(t){globalThis[w4]===void 0&&(globalThis[w4]=t)}};const vMe=new yMe;function wMe(e=!1){const t=vMe.getInstance().getStore();if(!e&&t===void 0)throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return t}function O$(e){return typeof e=="function"&&"langsmith:traceable"in e}var Gae={};Gt(Gae,{LangChainTracer:()=>kA});function xMe(e){let t;for(const r of e)for(const n of r)da.isInstance(n.message)&&n.message.usage_metadata!==void 0&&(t=h$(t,n.message.usage_metadata));return t}var kA=class qae extends wd{constructor(r={}){super(r);L(this,"name","langchain_tracer");L(this,"projectName");L(this,"exampleId");L(this,"client");L(this,"replicas");L(this,"usesRunTreeMap",!0);const{exampleId:n,projectName:i,client:a,replicas:s}=r;this.projectName=i??dae(),this.replicas=s,this.exampleId=n,this.client=a??Hae();const o=qae.getTraceableRunTree();o&&this.updateFromRunTree(o)}async persistRun(r){}async onRunCreate(r){var n;if(!((n=r.extra)!=null&&n.lc_defers_inputs)){const i=this.getRunTreeWithTracingConfig(r.id);await(i==null?void 0:i.postRun())}}async onRunUpdate(r){var i;const n=this.getRunTreeWithTracingConfig(r.id);(i=r.extra)!=null&&i.lc_defers_inputs?await(n==null?void 0:n.postRun()):await(n==null?void 0:n.patchRun())}onLLMEnd(r){const n=r.outputs;if(n!=null&&n.generations){const i=xMe(n.generations);if(i!==void 0){r.extra=r.extra??{};const a=r.extra.metadata??{};a.usage_metadata=i,r.extra.metadata=a}}}getRun(r){return this.runTreeMap.get(r)}updateFromRunTree(r){this.runTreeMap.set(r.id,r);let n=r;const i=new Set;for(;n.parent_run&&!(i.has(n.id)||(i.add(n.id),!n.parent_run));)n=n.parent_run;i.clear();const a=[n];for(;a.length>0;){const s=a.shift();!s||i.has(s.id)||(i.add(s.id),this.runTreeMap.set(s.id,s),s.child_runs&&a.push(...s.child_runs))}this.client=r.client??this.client,this.replicas=r.replicas??this.replicas,this.projectName=r.project_name??this.projectName,this.exampleId=r.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(r){const n=this.runTreeMap.get(r);if(n)return new Qs({...n,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return wMe(!0)}catch{return}}};let L0;function bMe(){const e="default"in zf?zf.default:zf;return new e({autoStart:!0,concurrency:1})}function _Me(){return typeof L0>"u"&&(L0=bMe()),L0}async function $i(e,t){if(t===!0){const r=kb();r!==void 0?await r.run(void 0,async()=>e()):await e()}else L0=_Me(),L0.add(async()=>{const r=kb();r!==void 0?await r.run(void 0,async()=>e()):await e()})}async function SMe(){const e=Hae();await Promise.allSettled([typeof L0<"u"?L0.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])}var Kae={};Gt(Kae,{awaitAllCallbacks:()=>SMe,consumeCallback:()=>$i});const EMe=e=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>Ru(r)==="true");function Yae(e){var n;const t=kb();if(t===void 0)return;const r=t.getStore();return(n=r==null?void 0:r[gx])==null?void 0:n[e]}const AMe=Symbol("lc:configure_hooks"),TMe=()=>Yae(AMe)||[];var Xae={};Gt(Xae,{BaseCallbackManager:()=>Zae,BaseRunManager:()=>u2,CallbackManager:()=>$s,CallbackManagerForChainRun:()=>Qae,CallbackManagerForLLMRun:()=>aL,CallbackManagerForRetrieverRun:()=>Jae,CallbackManagerForToolRun:()=>ese,ensureHandler:()=>Cb,parseCallbackConfigArg:()=>c2});function c2(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}var Zae=class{setHandler(e){return this.setHandlers([e])}},u2=class{constructor(e,t,r,n,i,a,s,o){this.runId=e,this.handlers=t,this.inheritableHandlers=r,this.tags=n,this.inheritableTags=i,this.metadata=a,this.inheritableMetadata=s,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;try{await((r=t.handleText)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,i){await Promise.all(this.handlers.map(a=>$i(async()=>{var s;try{await((s=a.handleCustomEvent)==null?void 0:s.call(a,e,t,this.runId,this.tags,this.metadata))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}},Jae=class extends u2{getChild(e){const t=new $s(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw n}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${n}`),t.raiseError)throw e}},t.awaitHandlers)))}},aL=class extends u2{async handleLLMNewToken(e,t,r,n,i,a){await Promise.all(this.handlers.map(s=>$i(async()=>{var o;if(!s.ignoreLLM)try{await((o=s.handleLLMNewToken)==null?void 0:o.call(s,e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(l){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleLLMNewToken: ${l}`),s.raiseError)throw l}},s.awaitHandlers)))}async handleLLMError(e,t,r,n,i){await Promise.all(this.handlers.map(a=>$i(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMError)==null?void 0:s.call(a,e,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleLLMEnd(e,t,r,n,i){await Promise.all(this.handlers.map(a=>$i(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMEnd)==null?void 0:s.call(a,e,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}},Qae=class extends u2{getChild(e){const t=new $s(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,i){await Promise.all(this.handlers.map(a=>$i(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainError)==null?void 0:s.call(a,e,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleChainEnd(e,t,r,n,i){await Promise.all(this.handlers.map(a=>$i(async()=>{var s;if(!a.ignoreChain)try{await((s=a.handleChainEnd)==null?void 0:s.call(a,e,this.runId,this._parentRunId,this.tags,i))}catch(o){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`),a.raiseError)throw o}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentAction)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}},ese=class extends u2{getChild(e){const t=new $s(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>$i(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${n}`),t.raiseError)throw n}},t.awaitHandlers)))}},$s=class Fw extends Zae{constructor(r,n){super();L(this,"handlers",[]);L(this,"inheritableHandlers",[]);L(this,"tags",[]);L(this,"inheritableTags",[]);L(this,"metadata",{});L(this,"inheritableMetadata",{});L(this,"name","callback_manager");L(this,"_parentRunId");this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=r}getParentRunId(){return this._parentRunId}async handleLLMStart(r,n,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(n.map(async(u,f)=>{const d=f===0&&i?i:ah();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return kg(h)&&h._createRunForLLMStart(r,[u],d,this._parentRunId,s,this.tags,this.metadata,c),$i(async()=>{var m;try{await((m=h.handleLLMStart)==null?void 0:m.call(h,r,[u],d,this._parentRunId,s,this.tags,this.metadata,c))}catch(p){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${p}`),h.raiseError)throw p}},h.awaitHandlers)})),new aL(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(r,n,i=void 0,a=void 0,s=void 0,o=void 0,l=void 0,c=void 0){return Promise.all(n.map(async(u,f)=>{const d=f===0&&i?i:ah();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return kg(h)&&h._createRunForChatModelStart(r,[u],d,this._parentRunId,s,this.tags,this.metadata,c),$i(async()=>{var m,p;try{if(h.handleChatModelStart)await((m=h.handleChatModelStart)==null?void 0:m.call(h,r,[u],d,this._parentRunId,s,this.tags,this.metadata,c));else if(h.handleLLMStart){const y=y$(u);await((p=h.handleLLMStart)==null?void 0:p.call(h,r,[y],d,this._parentRunId,s,this.tags,this.metadata,c))}}catch(y){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${y}`),h.raiseError)throw y}},h.awaitHandlers)})),new aL(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(r,n,i=ah(),a=void 0,s=void 0,o=void 0,l=void 0,c=void 0,u=void 0){return await Promise.all(this.handlers.map(f=>{if(!f.ignoreChain)return kg(f)&&f._createRunForChainStart(r,n,i,this._parentRunId,this.tags,this.metadata,a,l,u),$i(async()=>{var d;try{await((d=f.handleChainStart)==null?void 0:d.call(f,r,n,i,this._parentRunId,this.tags,this.metadata,a,l,u))}catch(h){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleChainStart: ${h}`),f.raiseError)throw h}},f.awaitHandlers)})),new Qae(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(r,n,i=ah(),a=void 0,s=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreAgent)return kg(c)&&c._createRunForToolStart(r,n,i,this._parentRunId,this.tags,this.metadata,l),$i(async()=>{var u;try{await((u=c.handleToolStart)==null?void 0:u.call(c,r,n,i,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleToolStart: ${f}`),c.raiseError)throw f}},c.awaitHandlers)})),new ese(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(r,n,i=ah(),a=void 0,s=void 0,o=void 0,l=void 0){return await Promise.all(this.handlers.map(c=>{if(!c.ignoreRetriever)return kg(c)&&c._createRunForRetrieverStart(r,n,i,this._parentRunId,this.tags,this.metadata,l),$i(async()=>{var u;try{await((u=c.handleRetrieverStart)==null?void 0:u.call(c,r,n,i,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((c.raiseError?console.error:console.warn)(`Error in handler ${c.constructor.name}, handleRetrieverStart: ${f}`),c.raiseError)throw f}},c.awaitHandlers)})),new Jae(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(r,n,i,a,s){await Promise.all(this.handlers.map(o=>$i(async()=>{var l;if(!o.ignoreCustomEvent)try{await((l=o.handleCustomEvent)==null?void 0:l.call(o,r,n,i,this.tags,this.metadata))}catch(c){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleCustomEvent: ${c}`),o.raiseError)throw c}},o.awaitHandlers)))}addHandler(r,n=!0){this.handlers.push(r),n&&this.inheritableHandlers.push(r)}removeHandler(r){this.handlers=this.handlers.filter(n=>n!==r),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==r)}setHandlers(r,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const i of r)this.addHandler(i,n)}addTags(r,n=!0){this.removeTags(r),this.tags.push(...r),n&&this.inheritableTags.push(...r)}removeTags(r){this.tags=this.tags.filter(n=>!r.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!r.includes(n))}addMetadata(r,n=!0){this.metadata={...this.metadata,...r},n&&(this.inheritableMetadata={...this.inheritableMetadata,...r})}removeMetadata(r){for(const n of Object.keys(r))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(r=[],n=!0){const i=new Fw(this._parentRunId);for(const a of this.handlers){const s=this.inheritableHandlers.includes(a);i.addHandler(a,s)}for(const a of this.tags){const s=this.inheritableTags.includes(a);i.addTags([a],s)}for(const a of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(a);i.addMetadata({[a]:this.metadata[a]},s)}for(const a of r)i.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===a.name)||i.addHandler(a,n);return i}static fromHandlers(r){class n extends i1{constructor(){super();L(this,"name",ah());Object.assign(this,r)}}const i=new this;return i.addHandler(new n),i}static configure(r,n,i,a,s,o,l){return this._configureSync(r,n,i,a,s,o,l)}static _configureSync(r,n,i,a,s,o,l){var h;let c;(r||n)&&(Array.isArray(r)||!r?(c=new Fw,c.setHandlers((r==null?void 0:r.map(Cb))??[],!0)):c=r,c=c.copy(Array.isArray(n)?n.map(Cb):n==null?void 0:n.handlers,!1));const u=Ru("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),f=((h=kA.getTraceableRunTree())==null?void 0:h.tracingEnabled)??EMe(),d=f||(Ru("LANGCHAIN_TRACING")??!1);if(u||d){if(c||(c=new Fw),u&&!c.handlers.some(m=>m.name===iL.prototype.name)){const m=new iL;c.addHandler(m,!0)}if(d&&!c.handlers.some(m=>m.name==="langchain_tracer")&&f){const m=new kA;c.addHandler(m,!0)}if(f){const m=kA.getTraceableRunTree();if(m&&c._parentRunId===void 0){c._parentRunId=m.id;const p=c.handlers.find(y=>y.name==="langchain_tracer");p==null||p.updateFromRunTree(m)}}}for(const{contextVar:m,inheritable:p=!0,handlerClass:y,envVar:g}of TMe()){const w=g&&Ru(g)==="true"&&y;let v;const x=m!==void 0?Yae(m):void 0;x&&uae(x)?v=x:w&&(v=new y({})),v!==void 0&&(c||(c=new Fw),c.handlers.some(b=>b.name===v.name)||c.addHandler(v,p))}return(i||a)&&c&&(c.addTags(i??[]),c.addTags(a??[],!1)),(s||o)&&c&&(c.addMetadata(s??{}),c.addMetadata(o??{},!1)),c}};function Cb(e){return"name"in e?e:i1.fromMethods(e)}var tse=class{getStore(){}run(e,t){return t()}enterWith(e){}};const kMe=new tse,MV=Symbol.for("lc:child_config");var CMe=class{getInstance(){return kb()??kMe}getRunnableConfig(){var t,r;return(r=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:r[MV]}runWithConfig(e,t,r){var c;const n=$s._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),i=this.getInstance(),a=i.getStore(),s=n==null?void 0:n.getParentRunId(),o=(c=n==null?void 0:n.handlers)==null?void 0:c.find(u=>(u==null?void 0:u.name)==="langchain_tracer");let l;return o&&s?l=o.getRunTreeWithTracingConfig(s):r||(l=new Qs({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[MV]:e}),a!==void 0&&a[gx]!==void 0&&(l===void 0&&(l={}),l[gx]=a[gx]),i.run(l,t)}initializeGlobalInstance(e){kb()===void 0&&FIe(e)}};const ba=new CMe;var rse={};Gt(rse,{AsyncLocalStorageProviderSingleton:()=>ba,MockAsyncLocalStorage:()=>tse,_CONTEXT_VARIABLES_KEY:()=>gx});const x4=25;async function lo(e){return $s._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata)}function Al(...e){const t={};for(const r of e.filter(n=>!!n))for(const n of Object.keys(r))if(n==="metadata")t[n]={...t[n],...r[n]};else if(n==="tags"){const i=t[n]??[];t[n]=[...new Set(i.concat(r[n]??[]))]}else if(n==="configurable")t[n]={...t[n],...r[n]};else if(n==="timeout")t.timeout===void 0?t.timeout=r.timeout:r.timeout!==void 0&&(t.timeout=Math.min(t.timeout,r.timeout));else if(n==="signal")t.signal===void 0?t.signal=r.signal:r.signal!==void 0&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if(n==="callbacks"){const i=t.callbacks,a=r.callbacks;if(Array.isArray(a))if(!i)t.callbacks=a;else if(Array.isArray(i))t.callbacks=i.concat(a);else{const s=i.copy();for(const o of a)s.addHandler(Cb(o),!0);t.callbacks=s}else if(a)if(!i)t.callbacks=a;else if(Array.isArray(i)){const s=a.copy();for(const o of i)s.addHandler(Cb(o),!0);t.callbacks=s}else t.callbacks=new $s(a._parentRunId,{handlers:i.handlers.concat(a.handlers),inheritableHandlers:i.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(a.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(a.inheritableTags))),metadata:{...i.metadata,...a.metadata}})}else{const i=n;t[i]=r[i]??t[i]}return t}const OMe=new Set(["string","number","boolean"]);function zr(e){var n;const t=ba.getRunnableConfig();let r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:i,runName:a,...s}=t;r=Object.entries(s).reduce((o,[l,c])=>(c!==void 0&&(o[l]=c),o),r)}if(e&&(r=Object.entries(e).reduce((i,[a,s])=>(s!==void 0&&(i[a]=s),i),r)),r!=null&&r.configurable)for(const i of Object.keys(r.configurable))OMe.has(typeof r.configurable[i])&&!((n=r.metadata)!=null&&n[i])&&(r.metadata||(r.metadata={}),r.metadata[i]=r.configurable[i]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");const i=r.timeout,a=AbortSignal.timeout(i);r.metadata||(r.metadata={}),r.metadata.timeoutMs===void 0&&(r.metadata.timeoutMs=i),r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,a])):r.signal=a,delete r.timeout}return r}function Qr(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:i,configurable:a,runId:s}={}){const o=zr(e);return t!==void 0&&(delete o.runName,o.callbacks=t),n!==void 0&&(o.recursionLimit=n),r!==void 0&&(o.maxConcurrency=r),i!==void 0&&(o.runName=i),a!==void 0&&(o.configurable={...o.configurable,...a}),s!==void 0&&delete o.runId,o}function id(e){if(e)return{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal,store:e.store}}async function ad(e,t){if(t===void 0)return e;let r;return Promise.race([e.catch(n=>{if(!(t!=null&&t.aborted))throw n}),new Promise((n,i)=>{r=()=>{i(Ob(t))},t.addEventListener("abort",r,{once:!0}),t.aborted&&i(Ob(t))})]).finally(()=>t.removeEventListener("abort",r))}function Ob(e){return(e==null?void 0:e.reason)instanceof Error?e.reason:typeof(e==null?void 0:e.reason)=="string"?new Error(e.reason):new Error("Aborted")}var nse={};Gt(nse,{AsyncGeneratorWithSetup:()=>km,IterableReadableStream:()=>uo,atee:()=>P$,concat:()=>ep,pipeGeneratorWithSetup:()=>ise});var uo=class sL extends ReadableStream{constructor(){super(...arguments);L(this,"reader")}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const r=await this.reader.read();return r.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:r.value}}catch(r){throw this.reader.releaseLock(),r}}async return(){if(this.ensureReader(),this.locked){const r=this.reader.cancel();this.reader.releaseLock(),await r}return{done:!0,value:void 0}}async throw(r){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw r}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(r){const n=r.getReader();return new sL({start(i){return a();function a(){return n.read().then(({done:s,value:o})=>{if(s){i.close();return}return i.enqueue(o),a()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(r){return new sL({async pull(n){const{value:i,done:a}=await r.next();a&&n.close(),n.enqueue(i)},async cancel(n){await r.return(n)}})}};function P$(e,t=2){const r=Array.from({length:t},()=>[]);return r.map(async function*(i){for(;;)if(i.length===0){const a=await e.next();for(const s of r)s.push(a)}else{if(i[0].done)return;yield i.shift().value}})}function ep(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if(typeof e=="string"&&typeof t=="string")return e+t;if(typeof e=="number"&&typeof t=="number")return e+t;if("concat"in e&&typeof e.concat=="function")return e.concat(t);if(typeof e=="object"&&typeof t=="object"){const r={...e};for(const[n,i]of Object.entries(t))n in r&&!Array.isArray(r[n])?r[n]=ep(r[n],i):r[n]=i;return r}else throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}var km=class{constructor(e){L(this,"generator");L(this,"setup");L(this,"config");L(this,"signal");L(this,"firstResult");L(this,"firstResultUsed",!1);var t;this.generator=e.generator,this.config=e.config,this.signal=e.signal??((t=this.config)==null?void 0:t.signal),this.setup=new Promise((r,n)=>{ba.runWithConfig(id(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,n):this.firstResult.then(i=>r(void 0),n)},!0)})}async next(...e){var t;return(t=this.signal)==null||t.throwIfAborted(),this.firstResultUsed?ba.runWithConfig(id(this.config),this.signal?async()=>ad(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function ise(e,t,r,n,...i){const a=new km({generator:t,startSetup:r,signal:n}),s=await a.setup;return{output:e(a,s,...i),setup:s}}/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/const PMe=Object.prototype.hasOwnProperty;function oL(e,t){return PMe.call(e,t)}function lL(e){if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)oL(e,r)&&t.push(r);return t}function Ec(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function cL(e){let t=0;const r=e.length;let n;for(;t<r;){if(n=e.charCodeAt(t),n>=48&&n<=57){t++;continue}return!1}return!0}function og(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function NMe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function uL(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(uL(e[r]))return!0}else if(typeof e=="object"){const r=lL(e),n=r.length;for(var t=0;t<n;t++)if(uL(e[r[t]]))return!0}}return!1}function DV(e,t){const r=[e];for(const n in t){const i=typeof t[n]=="object"?JSON.stringify(t[n],null,2):t[n];typeof i<"u"&&r.push(`${n}: ${i}`)}return r.join(`
`)}var IMe=class extends Error{constructor(e,t,r,n,i){super(DV(e,{name:t,index:r,operation:n,tree:i})),this.name=t,this.index=r,this.operation=n,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=DV(e,{name:t,index:r,operation:n,tree:i})}},ase={};Gt(ase,{JsonPatchError:()=>oi,_areEquals:()=>Pb,applyOperation:()=>M0,applyPatch:()=>ov,applyReducer:()=>MMe,deepClone:()=>RMe,getValueByPointer:()=>nk,validate:()=>sse,validator:()=>ik});const oi=IMe,RMe=Ec,Zg={add:function(e,t,r){if(t==="__proto__"||t==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){if(t==="__proto__"||t==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){if(t==="__proto__"||t==="constructor")throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor` prop is banned for security reasons");var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=nk(r,this.path);n&&(n=Ec(n));const i=M0(r,{op:"remove",path:this.from}).removed;return M0(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(e,t,r){const n=nk(r,this.from);return M0(r,{op:"add",path:this.path,value:Ec(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:Pb(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var LMe={add:function(e,t,r){return cL(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){var n=e.splice(t,1);return{newDocument:r,removed:n[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:Zg.move,copy:Zg.copy,test:Zg.test,_get:Zg._get};function nk(e,t){if(t=="")return e;var r={op:"_get",path:t};return M0(e,r),r.value}function M0(e,t,r=!1,n=!0,i=!0,a=0){if(r&&(typeof r=="function"?r(t,0,e,t.path):ik(t,0)),t.path===""){let s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=nk(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Pb(e,t.value),s.test===!1)throw new oi("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(r)throw new oi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{n||(e=Ec(e));const o=(t.path||"").split("/");let l=e,c=1,u=o.length,f,d,h;for(typeof r=="function"?h=r:h=ik;;){if(d=o[c],d&&d.indexOf("~")!=-1&&(d=NMe(d)),i&&(d=="__proto__"||d=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&f===void 0&&(l[d]===void 0?f=o.slice(0,c).join("/"):c==u-1&&(f=t.path),f!==void 0&&h(t,0,e,f)),c++,Array.isArray(l)){if(d==="-")d=l.length;else{if(r&&!cL(d))throw new oi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);cL(d)&&(d=~~d)}if(c>=u){if(r&&t.op==="add"&&d>l.length)throw new oi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);const m=LMe[t.op].call(t,l,d,e);if(m.test===!1)throw new oi("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return m}}else if(c>=u){const m=Zg[t.op].call(t,l,d,e);if(m.test===!1)throw new oi("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return m}if(l=l[d],r&&c<u&&(!l||typeof l!="object"))throw new oi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function ov(e,t,r,n=!0,i=!0){if(r&&!Array.isArray(t))throw new oi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=Ec(e));const a=new Array(t.length);for(let s=0,o=t.length;s<o;s++)a[s]=M0(e,t[s],r,!0,i,s),e=a[s].newDocument;return a.newDocument=e,a}function MMe(e,t,r){const n=M0(e,t);if(n.test===!1)throw new oi("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function ik(e,t,r,n){if(typeof e!="object"||e===null||Array.isArray(e))throw new oi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(Zg[e.op]){if(typeof e.path!="string")throw new oi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new oi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new oi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new oi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if((e.op==="add"||e.op==="replace"||e.op==="test")&&uL(e.value))throw new oi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r){if(e.op=="add"){var i=e.path.split("/").length,a=n.split("/").length;if(i!==a+1&&i!==a)throw new oi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==n)throw new oi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=sse([s],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new oi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}}else throw new oi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r)}function sse(e,t,r){try{if(!Array.isArray(e))throw new oi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)ov(Ec(t),Ec(e),r||!0);else{r=r||ik;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(i){if(i instanceof oi)return i;throw i}}function Pb(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),n=Array.isArray(t),i,a,s;if(r&&n){if(a=e.length,a!=t.length)return!1;for(i=a;i--!==0;)if(!Pb(e[i],t[i]))return!1;return!0}if(r!=n)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(i=a;i--!==0;)if(!t.hasOwnProperty(o[i]))return!1;for(i=a;i--!==0;)if(s=o[i],!Pb(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}function ose(e,t,r,n,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=lL(t),s=lL(e),o=!1,l=s.length-1;l>=0;l--){var c=s[l],u=e[c];if(oL(t,c)&&!(t[c]===void 0&&u!==void 0&&Array.isArray(t)===!1)){var f=t[c];typeof u=="object"&&u!=null&&typeof f=="object"&&f!=null&&Array.isArray(u)===Array.isArray(f)?ose(u,f,r,n+"/"+og(c),i):u!==f&&(i&&r.push({op:"test",path:n+"/"+og(c),value:Ec(u)}),r.push({op:"replace",path:n+"/"+og(c),value:Ec(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&r.push({op:"test",path:n+"/"+og(c),value:Ec(u)}),r.push({op:"remove",path:n+"/"+og(c)}),o=!0):(i&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var c=a[l];!oL(e,c)&&t[c]!==void 0&&r.push({op:"add",path:n+"/"+og(c),value:Ec(t[c])})}}}function KC(e,t,r=!1){var n=[];return ose(e,t,n,"",r),n}({...ase});var lse={};Gt(lse,{LogStreamCallbackHandler:()=>dL,RunLog:()=>N$,RunLogPatch:()=>Af,isLogStreamHandler:()=>cse});var Af=class{constructor(e){L(this,"ops");this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=ov({},t);return new N$({ops:t,state:r[r.length-1].newDocument})}},N$=class fL extends Af{constructor(r){super(r);L(this,"state");this.state=r.state}concat(r){const n=this.ops.concat(r.ops),i=ov(this.state,r.ops);return new fL({ops:n,state:i[i.length-1].newDocument})}static fromRunLogPatch(r){const n=ov({},r.ops);return new fL({ops:r.ops,state:n[n.length-1].newDocument})}};const cse=e=>e.name==="log_stream_tracer";async function jV(e,t){if(t==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:r}=e;if(["retriever","llm","prompt"].includes(e.run_type))return r;if(!(Object.keys(r).length===1&&(r==null?void 0:r.input)===""))return r.input}async function $V(e,t){const{outputs:r}=e;return t==="original"||["retriever","llm","prompt"].includes(e.run_type)?r:r!==void 0&&Object.keys(r).length===1&&(r==null?void 0:r.output)!==void 0?r.output:r}function DMe(e){return e!==void 0&&e.message!==void 0}var dL=class extends wd{constructor(t){super({_awaitHandler:!0,...t});L(this,"autoClose",!0);L(this,"includeNames");L(this,"includeTypes");L(this,"includeTags");L(this,"excludeNames");L(this,"excludeTypes");L(this,"excludeTags");L(this,"_schemaFormat","original");L(this,"rootId");L(this,"keyMapByRunId",{});L(this,"counterMapByRunName",{});L(this,"transformStream");L(this,"writer");L(this,"receiveStream");L(this,"name","log_stream_tracer");L(this,"lc_prefer_streaming",!0);this.autoClose=(t==null?void 0:t.autoClose)??!0,this.includeNames=t==null?void 0:t.includeNames,this.includeTypes=t==null?void 0:t.includeTypes,this.includeTags=t==null?void 0:t.includeTags,this.excludeNames=t==null?void 0:t.excludeNames,this.excludeTypes=t==null?void 0:t.excludeTypes,this.excludeTags=t==null?void 0:t.excludeTags,this._schemaFormat=(t==null?void 0:t._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=uo.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(t){}_includeRun(t){if(t.id===this.rootId)return!1;const r=t.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(t.run_type)),this.includeTags!==void 0&&(n=n||r.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(t.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),n}async*tapOutputIterable(t,r){for await(const n of r){if(t!==this.rootId){const i=this.keyMapByRunId[t];i&&await this.writer.write(new Af({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(t){var i;if(this.rootId===void 0&&(this.rootId=t.id,await this.writer.write(new Af({ops:[{op:"replace",path:"",value:{id:t.id,name:t.name,type:t.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(t))return;this.counterMapByRunName[t.name]===void 0&&(this.counterMapByRunName[t.name]=0),this.counterMapByRunName[t.name]+=1;const r=this.counterMapByRunName[t.name];this.keyMapByRunId[t.id]=r===1?t.name:`${t.name}:${r}`;const n={id:t.id,name:t.name,type:t.run_type,tags:t.tags??[],metadata:((i=t.extra)==null?void 0:i.metadata)??{},start_time:new Date(t.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await jV(t,this._schemaFormat)),await this.writer.write(new Af({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[t.id]}`,value:n}]}))}async onRunUpdate(t){try{const r=this.keyMapByRunId[t.id];if(r===void 0)return;const n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${r}/inputs`,value:await jV(t,this._schemaFormat)}),n.push({op:"add",path:`/logs/${r}/final_output`,value:await $V(t,this._schemaFormat)}),t.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(t.end_time).toISOString()});const i=new Af({ops:n});await this.writer.write(i)}finally{if(t.id===this.rootId){const r=new Af({ops:[{op:"replace",path:"/final_output",value:await $V(t,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(t,r,n){const i=this.keyMapByRunId[t.id];if(i===void 0)return;const a=t.inputs.messages!==void 0;let s;a?DMe(n==null?void 0:n.chunk)?s=n==null?void 0:n.chunk:s=new Dl({id:`run-${t.id}`,content:r}):s=r;const o=new Af({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${i}/streamed_output/-`,value:s}]});await this.writer.write(o)}},use={};Gt(use,{ChatGenerationChunk:()=>rm,GenerationChunk:()=>lv,RUN_KEY:()=>Nb});const Nb="__run";var lv=class fse{constructor(t){L(this,"text");L(this,"generationInfo");this.text=t.text,this.generationInfo=t.generationInfo}concat(t){return new fse({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}},rm=class dse extends lv{constructor(r){super(r);L(this,"message");this.message=r.message}concat(r){return new dse({text:this.text+r.text,generationInfo:{...this.generationInfo,...r.generationInfo},message:this.message.concat(r.message)})}};function hE({name:e,serialized:t}){return e!==void 0?e:(t==null?void 0:t.name)!==void 0?t.name:(t==null?void 0:t.id)!==void 0&&Array.isArray(t==null?void 0:t.id)?t.id[t.id.length-1]:"Unnamed"}const jMe=e=>e.name==="event_stream_tracer";var $Me=class extends wd{constructor(t){super({_awaitHandler:!0,...t});L(this,"autoClose",!0);L(this,"includeNames");L(this,"includeTypes");L(this,"includeTags");L(this,"excludeNames");L(this,"excludeTypes");L(this,"excludeTags");L(this,"runInfoMap",new Map);L(this,"tappedPromises",new Map);L(this,"transformStream");L(this,"writer");L(this,"receiveStream");L(this,"readableStreamClosed",!1);L(this,"name","event_stream_tracer");L(this,"lc_prefer_streaming",!0);this.autoClose=(t==null?void 0:t.autoClose)??!0,this.includeNames=t==null?void 0:t.includeNames,this.includeTypes=t==null?void 0:t.includeTypes,this.includeTags=t==null?void 0:t.includeTags,this.excludeNames=t==null?void 0:t.excludeNames,this.excludeTypes=t==null?void 0:t.excludeTypes,this.excludeTags=t==null?void 0:t.excludeTags,this.transformStream=new TransformStream({flush:()=>{this.readableStreamClosed=!0}}),this.writer=this.transformStream.writable.getWriter(),this.receiveStream=uo.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(t){}_includeRun(t){const r=t.tags??[];let n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(t.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(t.runType)),this.includeTags!==void 0&&(n=n||r.find(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(t.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(t.runType)),this.excludeTags!==void 0&&(n=n&&r.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),n}async*tapOutputIterable(t,r){const n=await r.next();if(n.done)return;const i=this.runInfoMap.get(t);if(i===void 0){yield n.value;return}function a(o,l){return o==="llm"&&typeof l=="string"?new lv({text:l}):l}let s=this.tappedPromises.get(t);if(s===void 0){let o;s=new Promise(l=>{o=l}),this.tappedPromises.set(t,s);try{const l={event:`on_${i.runType}_stream`,run_id:t,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:a(i.runType,n.value)}},i),yield n.value;for await(const c of r)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:a(i.runType,c)}},i),yield c}finally{o==null||o()}}else{yield n.value;for await(const o of r)yield o}}async send(t,r){this.readableStreamClosed||this._includeRun(r)&&await this.writer.write(t)}async sendEndEvent(t,r){const n=this.tappedPromises.get(t.run_id);n!==void 0?n.then(()=>{this.send(t,r)}):await this.send(t,r)}async onLLMStart(t){var s,o;const r=hE(t),n=t.inputs.messages!==void 0?"chat_model":"llm",i={tags:t.tags??[],metadata:((s=t.extra)==null?void 0:s.metadata)??{},name:r,runType:n,inputs:t.inputs};this.runInfoMap.set(t.id,i);const a=`on_${n}_start`;await this.send({event:a,data:{input:t.inputs},name:r,tags:t.tags??[],run_id:t.id,metadata:((o=t.extra)==null?void 0:o.metadata)??{}},i)}async onLLMNewToken(t,r,n){const i=this.runInfoMap.get(t.id);let a,s;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${t.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")s="on_chat_model_stream",(n==null?void 0:n.chunk)===void 0?a=new Dl({content:r,id:`run-${t.id}`}):a=n.chunk.message;else if(i.runType==="llm")s="on_llm_stream",(n==null?void 0:n.chunk)===void 0?a=new lv({text:r}):a=n.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:s,data:{chunk:a},run_id:t.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(t){var s,o,l;const r=this.runInfoMap.get(t.id);this.runInfoMap.delete(t.id);let n;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${t.id} not found in run map.`);const i=(s=t.outputs)==null?void 0:s.generations;let a;if(r.runType==="chat_model"){for(const c of i??[]){if(a!==void 0)break;a=(o=c[0])==null?void 0:o.message}n="on_chat_model_end"}else if(r.runType==="llm")a={generations:i==null?void 0:i.map(c=>c.map(u=>({text:u.text,generationInfo:u.generationInfo}))),llmOutput:((l=t.outputs)==null?void 0:l.llmOutput)??{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:n,data:{output:a,input:r.inputs},run_id:t.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(t){var s,o;const r=hE(t),n=t.run_type??"chain",i={tags:t.tags??[],metadata:((s=t.extra)==null?void 0:s.metadata)??{},name:r,runType:t.run_type};let a={};t.inputs.input===""&&Object.keys(t.inputs).length===1?(a={},i.inputs={}):t.inputs.input!==void 0?(a.input=t.inputs.input,i.inputs=t.inputs.input):(a.input=t.inputs,i.inputs=t.inputs),this.runInfoMap.set(t.id,i),await this.send({event:`on_${n}_start`,data:a,name:r,tags:t.tags??[],run_id:t.id,metadata:((o=t.extra)==null?void 0:o.metadata)??{}},i)}async onChainEnd(t){var o;const r=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),r===void 0)throw new Error(`onChainEnd: Run ID ${t.id} not found in run map.`);const n=`on_${t.run_type}_end`,i=t.inputs??r.inputs??{},s={output:((o=t.outputs)==null?void 0:o.output)??t.outputs,input:i};i.input&&Object.keys(i).length===1&&(s.input=i.input,r.inputs=i.input),await this.sendEndEvent({event:n,data:s,run_id:t.id,name:r.name,tags:r.tags,metadata:r.metadata??{}},r)}async onToolStart(t){var i,a;const r=hE(t),n={tags:t.tags??[],metadata:((i=t.extra)==null?void 0:i.metadata)??{},name:r,runType:"tool",inputs:t.inputs??{}};this.runInfoMap.set(t.id,n),await this.send({event:"on_tool_start",data:{input:t.inputs??{}},name:r,run_id:t.id,tags:t.tags??[],metadata:((a=t.extra)==null?void 0:a.metadata)??{}},n)}async onToolEnd(t){var i;const r=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),r===void 0)throw new Error(`onToolEnd: Run ID ${t.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${t.id} is a tool call, and is expected to have traced inputs.`);const n=((i=t.outputs)==null?void 0:i.output)===void 0?t.outputs:t.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:r.inputs},run_id:t.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onToolError(t){const r=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),r===void 0)throw new Error(`onToolEnd: Run ID ${t.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${t.id} is a tool call, and is expected to have traced inputs.`);await this.sendEndEvent({event:"on_tool_error",data:{input:r.inputs,error:t.error},run_id:t.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(t){var a,s;const r=hE(t),i={tags:t.tags??[],metadata:((a=t.extra)==null?void 0:a.metadata)??{},name:r,runType:"retriever",inputs:{query:t.inputs.query}};this.runInfoMap.set(t.id,i),await this.send({event:"on_retriever_start",data:{input:{query:t.inputs.query}},name:r,tags:t.tags??[],run_id:t.id,metadata:((s=t.extra)==null?void 0:s.metadata)??{}},i)}async onRetrieverEnd(t){var n;const r=this.runInfoMap.get(t.id);if(this.runInfoMap.delete(t.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${t.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((n=t.outputs)==null?void 0:n.documents)??t.outputs,input:r.inputs},run_id:t.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(t,r,n){const i=this.runInfoMap.get(n);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:t,tags:i.tags,metadata:i.metadata,data:r},i)}async finish(){const t=[...this.tappedPromises.values()];Promise.all(t).finally(()=>{this.writer.close()})}};const FMe=Object.prototype.toString,BMe=e=>FMe.call(e)==="[object Error]",UMe=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function zMe(e){if(!(e&&BMe(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;const{message:r,stack:n}=e;return r==="Load failed"?n===void 0||"__sentry_captured__"in e:r.startsWith("error sending request for url")?!0:UMe.has(r)}function VMe(e){if(typeof e=="number"){if(e<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function pE(e,t,{min:r=0,allowInfinity:n=!1}={}){if(t!==void 0){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected \`${e}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(t))throw new TypeError(`Expected \`${e}\` to be a finite number.`);if(t<r)throw new TypeError(`Expected \`${e}\` to be  ${r}.`)}}var WMe=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function HMe(e,t){const r=Math.max(1,e+1),n=t.randomize?Math.random()+1:1;let i=Math.round(n*t.minTimeout*t.factor**(r-1));return i=Math.min(i,t.maxTimeout),i}function FV(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function GMe({error:e,attemptNumber:t,retriesConsumed:r,startTime:n,options:i}){var h,m,p;const a=e instanceof Error?e:new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof WMe)throw a.originalError;const s=Number.isFinite(i.retries)?Math.max(0,i.retries-r):i.retries,o=i.maxRetryTime??Number.POSITIVE_INFINITY,l=Object.freeze({error:a,attemptNumber:t,retriesLeft:s,retriesConsumed:r});if(await i.onFailedAttempt(l),FV(n,o)<=0)throw a;const c=await i.shouldConsumeRetry(l),u=FV(n,o);if(u<=0||s<=0)throw a;if(a instanceof TypeError&&!zMe(a)){if(c)throw a;return(h=i.signal)==null||h.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!c)return(m=i.signal)==null||m.throwIfAborted(),!1;const f=HMe(r,i),d=Math.min(f,u);return d>0&&await new Promise((y,g)=>{var x,b;const w=()=>{var S;clearTimeout(v),(S=i.signal)==null||S.removeEventListener("abort",w),g(i.signal.reason)},v=setTimeout(()=>{var S;(S=i.signal)==null||S.removeEventListener("abort",w),y()},d);i.unref&&((x=v.unref)==null||x.call(v)),(b=i.signal)==null||b.addEventListener("abort",w,{once:!0})}),(p=i.signal)==null||p.throwIfAborted(),!0}async function hL(e,t={}){var a,s,o;if(t={...t},VMe(t.retries),Object.hasOwn(t,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??(t.retries=10),t.factor??(t.factor=2),t.minTimeout??(t.minTimeout=1e3),t.maxTimeout??(t.maxTimeout=Number.POSITIVE_INFINITY),t.maxRetryTime??(t.maxRetryTime=Number.POSITIVE_INFINITY),t.randomize??(t.randomize=!1),t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.shouldConsumeRetry??(t.shouldConsumeRetry=()=>!0),pE("factor",t.factor,{min:0,allowInfinity:!1}),pE("minTimeout",t.minTimeout,{min:0,allowInfinity:!1}),pE("maxTimeout",t.maxTimeout,{min:0,allowInfinity:!0}),pE("maxRetryTime",t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),(a=t.signal)==null||a.throwIfAborted();let r=0,n=0;const i=performance.now();for(;!Number.isFinite(t.retries)||n<=t.retries;){r++;try{(s=t.signal)==null||s.throwIfAborted();const l=await e(r);return(o=t.signal)==null||o.throwIfAborted(),l}catch(l){await GMe({error:l,attemptNumber:r,retriesConsumed:n,startTime:i,options:t})&&n++}}throw new Error("Retry attempts exhausted without throwing an error.")}var hse={};Gt(hse,{AsyncCaller:()=>f2});const qMe=[400,401,402,403,404,405,406,407,409],KMe=e=>{if(typeof e!="object"||e===null)return;if("message"in e&&typeof e.message=="string"&&(e.message.startsWith("Cancel")||e.message.startsWith("AbortError"))||"name"in e&&typeof e.name=="string"&&e.name==="AbortError"||"code"in e&&typeof e.code=="string"&&e.code==="ECONNABORTED")throw e;const t="response"in e&&typeof e.response=="object"&&e.response!==null&&"status"in e.response&&typeof e.response.status=="number"?e.response.status:void 0,r="status"in e&&typeof e.status=="number"?e.status:void 0,n=t??r;if(n&&qMe.includes(+n))throw e;if(("error"in e&&typeof e.error=="object"&&e.error!==null&&"code"in e.error&&typeof e.error.code=="string"?e.error.code:void 0)==="insufficient_quota"){const a=new Error("message"in e&&typeof e.message=="string"?e.message:"Insufficient quota");throw a.name="InsufficientQuotaError",a}};var f2=class{constructor(e){L(this,"maxConcurrency");L(this,"maxRetries");L(this,"onFailedAttempt");L(this,"queue");this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??KMe;const t="default"in zf?zf.default:zf;this.queue=new t({concurrency:this.maxConcurrency})}async call(e,...t){return this.queue.add(()=>hL(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:({error:r})=>{var n;return(n=this.onFailedAttempt)==null?void 0:n.call(this,r)},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){if(e.signal){let n;return Promise.race([this.call(t,...r),new Promise((i,a)=>{var s;n=()=>{a(Ob(e.signal))},(s=e.signal)==null||s.addEventListener("abort",n,{once:!0})})]).finally(()=>{e.signal&&n&&e.signal.removeEventListener("abort",n)})}return this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}},pse=class extends wd{constructor({config:t,onStart:r,onEnd:n,onError:i}){super({_awaitHandler:!0});L(this,"name","RootListenersTracer");L(this,"rootId");L(this,"config");L(this,"argOnStart");L(this,"argOnEnd");L(this,"argOnError");this.config=t,this.argOnStart=r,this.argOnEnd=n,this.argOnError=i}persistRun(t){return Promise.resolve()}async onRunCreate(t){this.rootId||(this.rootId=t.id,this.argOnStart&&await this.argOnStart(t,this.config))}async onRunUpdate(t){t.id===this.rootId&&(t.error?this.argOnError&&await this.argOnError(t,this.config):this.argOnEnd&&await this.argOnEnd(t,this.config))}};function I$(e){return e?e.lc_runnable:!1}var YMe=class{constructor(e){L(this,"includeNames");L(this,"includeTypes");L(this,"includeTags");L(this,"excludeNames");L(this,"excludeTypes");L(this,"excludeTags");this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const n=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t)),this.includeTags!==void 0&&(r=r||n.some(i=>{var a;return(a=this.includeTags)==null?void 0:a.includes(i)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var a;return!((a=this.excludeTags)!=null&&a.includes(i))})),r}};const XMe=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");function b4(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}const ZMe=["*","_","`"];function JMe(e){let t="";for(const[r,n]of Object.entries(e))t+=`	classDef ${r} ${n};
`;return t}function QMe(e,t,r){const{firstNode:n,lastNode:i,nodeColors:a,withStyles:s=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=r??{};let c=s?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(s){const m="default",p={[m]:"{0}({1})"};n!==void 0&&(p[n]="{0}([{1}]):::first"),i!==void 0&&(p[i]="{0}([{1}]):::last");for(const[y,g]of Object.entries(e)){const w=g.name.split(":").pop()??"";let x=ZMe.some(S=>w.startsWith(S)&&w.endsWith(S))?`<p>${w}</p>`:w;Object.keys(g.metadata??{}).length&&(x+=`<hr/><small><em>${Object.entries(g.metadata??{}).map(([S,T])=>`${S} = ${T}`).join(`
`)}</em></small>`);const b=(p[y]??p[m]).replace("{0}",b4(y)).replace("{1}",x);c+=`	${b}
`}}const u={};for(const m of t){const p=m.source.split(":"),y=m.target.split(":"),g=p.filter((w,v)=>w===y[v]).join(":");u[g]||(u[g]=[]),u[g].push(m)}const f=new Set;function d(m){return[...m].sort((p,y)=>p.split(":").length-y.split(":").length)}function h(m,p){const y=m.length===1&&m[0].source===m[0].target;if(p&&!y){const w=p.split(":").pop();if(f.has(p))throw new Error(`Found duplicate subgraph '${w}' at '${p} -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);f.add(p),c+=`	subgraph ${w}
`}const g=d(Object.keys(u).filter(w=>w.startsWith(`${p}:`)&&w!==p&&w.split(":").length===p.split(":").length+1));for(const w of g)h(u[w],w);for(const w of m){const{source:v,target:x,data:b,conditional:S}=w;let T="";if(b!==void 0){let A=b;const O=A.split(" ");O.length>l&&(A=Array.from({length:Math.ceil(O.length/l)},(M,P)=>O.slice(P*l,(P+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),T=S?` -. &nbsp;${A}&nbsp; .-> `:` -- &nbsp;${A}&nbsp; --> `}else T=S?" -.-> ":" --> ";c+=`	${b4(v)}${T}${b4(x)};
`}p&&!y&&(c+=`	end
`)}h(u[""]??[],"");for(const m in u)!m.includes(":")&&m!==""&&h(u[m],m);return s&&(c+=JMe(a??{})),c}async function eDe(e,t){let r=(t==null?void 0:t.backgroundColor)??"white";const n=(t==null?void 0:t.imageType)??"png",i=XMe(e);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));const a=`https://mermaid.ink/img/${i}?bgColor=${r}&type=${n}`,s=await fetch(a);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}var mse={};Gt(mse,{Graph:()=>Ib});function tDe(e,t){if(e!==void 0&&!R0(e))return e;if(I$(t))try{let r=t.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r}catch{return t.getName()}else return t.name??"UnknownSchema"}function rDe(e){return I$(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...Ps(e.data.schema),title:e.data.name}}}var Ib=class gse{constructor(t){L(this,"nodes",{});L(this,"edges",[]);this.nodes=(t==null?void 0:t.nodes)??this.nodes,this.edges=(t==null?void 0:t.edges)??this.edges}toJSON(){const t={};return Object.values(this.nodes).forEach((r,n)=>{t[r.id]=R0(r.id)?n:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:t[r.id],...rDe(r)})),edges:this.edges.map(r=>{const n={source:t[r.source],target:t[r.target]};return typeof r.data<"u"&&(n.data=r.data),typeof r.conditional<"u"&&(n.conditional=r.conditional),n})}}addNode(t,r,n){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);const i=r??Of(),a={id:i,data:t,name:tDe(r,t),metadata:n};return this.nodes[i]=a,a}removeNode(t){delete this.nodes[t.id],this.edges=this.edges.filter(r=>r.source!==t.id&&r.target!==t.id)}addEdge(t,r,n,i){if(this.nodes[t.id]===void 0)throw new Error(`Source node ${t.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);const a={source:t.id,target:r.id,data:n,conditional:i};return this.edges.push(a),a}firstNode(){return BV(this)}lastNode(){return UV(this)}extend(t,r=""){let n=r;Object.values(t.nodes).map(c=>c.id).every(R0)&&(n="");const a=c=>n?`${n}:${c}`:c;Object.entries(t.nodes).forEach(([c,u])=>{this.nodes[a(c)]={...u,id:a(c)}});const s=t.edges.map(c=>({...c,source:a(c.source),target:a(c.target)}));this.edges=[...this.edges,...s];const o=t.firstNode(),l=t.lastNode();return[o?{id:a(o.id),data:o.data}:void 0,l?{id:a(l.id),data:l.data}:void 0]}trimFirstNode(){const t=this.firstNode();t&&BV(this,[t.id])&&this.removeNode(t)}trimLastNode(){const t=this.lastNode();t&&UV(this,[t.id])&&this.removeNode(t)}reid(){const t=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),r=new Map;Object.values(t).forEach(i=>{r.set(i,(r.get(i)||0)+1)});const n=i=>{const a=t[i];return R0(i)&&r.get(a)===1?a:i};return new gse({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,a])=>[n(i),{...a,id:n(i)}])),edges:this.edges.map(i=>({...i,source:n(i.source),target:n(i.target)}))})}drawMermaid(t){const{withStyles:r,curveStyle:n,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=t??{},s=this.reid(),o=s.firstNode(),l=s.lastNode();return QMe(s.nodes,s.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:r,curveStyle:n,nodeColors:i,wrapLabelNWords:a})}async drawMermaidPng(t){const r=this.drawMermaid(t);return eDe(r,{backgroundColor:t==null?void 0:t.backgroundColor})}};function BV(e,t=[]){const r=new Set(e.edges.filter(i=>!t.includes(i.source)).map(i=>i.target)),n=[];for(const i of Object.values(e.nodes))!t.includes(i.id)&&!r.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function UV(e,t=[]){const r=new Set(e.edges.filter(i=>!t.includes(i.target)).map(i=>i.source)),n=[];for(const i of Object.values(e.nodes))!t.includes(i.id)&&!r.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function nDe(e){const t=new TextEncoder,r=new ReadableStream({async start(n){for await(const i of e)n.enqueue(t.encode(`event: data
data: ${JSON.stringify(i)}

`));n.enqueue(t.encode(`event: end

`)),n.close()}});return uo.fromReadableStream(r)}function zV(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.iterator]=="function"&&typeof e.next=="function"}const iDe=e=>e!=null&&typeof e=="object"&&"next"in e&&typeof e.next=="function";function pL(e){return typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function"}function*VV(e,t){for(;;){const{value:r,done:n}=ba.runWithConfig(id(e),t.next.bind(t),!0);if(n)break;yield r}}async function*mL(e,t){const r=t[Symbol.asyncIterator]();for(;;){const{value:n,done:i}=await ba.runWithConfig(id(e),r.next.bind(t),!0);if(i)break;yield n}}function aa(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}var Lr=class extends Ml{constructor(){super(...arguments);L(this,"lc_runnable",!0);L(this,"name")}getName(t){const r=this.name??this.constructor.lc_name()??this.constructor.name;return t?`${r}${t}`:r}withRetry(t){return new R$({bound:this,kwargs:{},config:{},maxAttemptNumber:t==null?void 0:t.stopAfterAttempt,...t})}withConfig(t){return new tp({bound:this,config:t,kwargs:{}})}withFallbacks(t){const r=Array.isArray(t)?t:t.fallbacks;return new _se({runnable:this,fallbacks:r})}_getOptionsList(t,r=0){if(Array.isArray(t)&&t.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${t.length} options for ${r} inputs`);if(Array.isArray(t))return t.map(zr);if(r>1&&!Array.isArray(t)&&t.runId){console.warn("Provided runId will be used only for the first element of the batch.");const n=Object.fromEntries(Object.entries(t).filter(([i])=>i!=="runId"));return Array.from({length:r},(i,a)=>zr(a===0?t:n))}return Array.from({length:r},()=>zr(t))}async batch(t,r,n){var l;const i=this._getOptionsList(r??{},t.length),a=((l=i[0])==null?void 0:l.maxConcurrency)??(n==null?void 0:n.maxConcurrency),s=new f2({maxConcurrency:a,onFailedAttempt:c=>{throw c}}),o=t.map((c,u)=>s.call(async()=>{try{return await this.invoke(c,i[u])}catch(f){if(n!=null&&n.returnExceptions)return f;throw f}}));return Promise.all(o)}async*_streamIterator(t,r){yield this.invoke(t,r)}async stream(t,r){const n=zr(r),i=new km({generator:this._streamIterator(t,n),config:n});return await i.setup,uo.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(t){let r;t===void 0?r=zr(t):r=zr({callbacks:t.callbacks,tags:t.tags,metadata:t.metadata,runName:t.runName,configurable:t.configurable,recursionLimit:t.recursionLimit,maxConcurrency:t.maxConcurrency,runId:t.runId,timeout:t.timeout,signal:t.signal});const n={...t};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[r,n]}async _callWithConfig(t,r,n){const i=zr(n),a=await lo(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),aa(r,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let o;try{const l=t.call(this,r,i,s);o=await ad(l,n==null?void 0:n.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(aa(o,"output"))),o}async _batchWithConfig(t,r,n,i){var c;const a=this._getOptionsList(n??{},r.length),s=await Promise.all(a.map(lo)),o=await Promise.all(s.map(async(u,f)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),aa(r[f],"input"),a[f].runId,a[f].runType,void 0,void 0,a[f].runName??this.getName()));return delete a[f].runId,d}));let l;try{const u=t.call(this,r,a,o,i);l=await ad(u,(c=a==null?void 0:a[0])==null?void 0:c.signal)}catch(u){throw await Promise.all(o.map(f=>f==null?void 0:f.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(aa(l,"output")))),l}_concatOutputChunks(t,r){return ep(t,r)}async*_transformStreamWithConfig(t,r,n){let i,a=!0,s,o=!0;const l=zr(n),c=await lo(l),u=this;async function*f(){for await(const h of t){if(a)if(i===void 0)i=h;else try{i=u._concatOutputChunks(i,h)}catch{i=void 0,a=!1}yield h}}let d;try{const h=await ise(r.bind(this),f(),async()=>c==null?void 0:c.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName(),void 0,{lc_defers_inputs:!0}),n==null?void 0:n.signal,l);delete l.runId,d=h.setup;const m=d==null?void 0:d.handlers.find(jMe);let p=h.output;m!==void 0&&d!==void 0&&(p=m.tapOutputIterable(d.runId,p));const y=d==null?void 0:d.handlers.find(cse);y!==void 0&&d!==void 0&&(p=y.tapOutputIterable(d.runId,p));for await(const g of p)if(yield g,o)if(s===void 0)s=g;else try{s=this._concatOutputChunks(s,g)}catch{s=void 0,o=!1}}catch(h){throw await(d==null?void 0:d.handleChainError(h,void 0,void 0,void 0,{inputs:aa(i,"input")})),h}await(d==null?void 0:d.handleChainEnd(s??{},void 0,void 0,void 0,{inputs:aa(i,"input")}))}getGraph(t){const r=new Ib,n=r.addNode({name:`${this.getName()}Input`,schema:Lz()}),i=r.addNode(this),a=r.addNode({name:`${this.getName()}Output`,schema:Lz()});return r.addEdge(n,i),r.addEdge(i,a),r}pipe(t){return new sd({first:this,last:$a(t)})}pick(t){return this.pipe(new Sse(t))}assign(t){return this.pipe(new L$(new s1({steps:t})))}async*transform(t,r){let n;for await(const i of t)n===void 0?n=i:n=this._concatOutputChunks(n,i);yield*this._streamIterator(n,zr(r))}async*streamLog(t,r,n){const i=new dL({...n,autoClose:!1,_schemaFormat:"original"}),a=zr(r);yield*this._streamLog(t,i,a)}async*_streamLog(t,r,n){const{callbacks:i}=n;if(i===void 0)n.callbacks=[r];else if(Array.isArray(i))n.callbacks=i.concat([r]);else{const l=i.copy();l.addHandler(r,!0),n.callbacks=l}const a=this.stream(t,n);async function s(){try{const l=await a;for await(const c of l){const u=new Af({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await r.writer.write(u)}}finally{await r.writer.close()}}const o=s();try{for await(const l of r)yield l}finally{await o}}streamEvents(t,r,n){let i;if(r.version==="v1")i=this._streamEventsV1(t,r,n);else if(r.version==="v2")i=this._streamEventsV2(t,r,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?nDe(i):uo.fromAsyncGenerator(i)}async*_streamEventsV2(t,r,n){var m;const i=new $Me({...n,autoClose:!1}),a=zr(r),s=a.runId??Of();a.runId=s;const o=a.callbacks;if(o===void 0)a.callbacks=[i];else if(Array.isArray(o))a.callbacks=o.concat(i);else{const p=o.copy();p.addHandler(i,!0),a.callbacks=p}const l=new AbortController,c=this;async function u(){let p,y=null;try{r!=null&&r.signal?"any"in AbortSignal?p=AbortSignal.any([l.signal,r.signal]):(p=r.signal,y=()=>{l.abort()},r.signal.addEventListener("abort",y,{once:!0})):p=l.signal;const g=await c.stream(t,{...a,signal:p}),w=i.tapOutputIterable(s,g);for await(const v of w)if(l.signal.aborted)break}finally{await i.finish(),p&&y&&p.removeEventListener("abort",y)}}const f=u();let d=!1,h;try{for await(const p of i){if(!d){p.data.input=t,d=!0,h=p.run_id,yield p;continue}p.run_id===h&&p.event.endsWith("_end")&&(m=p.data)!=null&&m.input&&delete p.data.input,yield p}}finally{l.abort(),await f}}async*_streamEventsV1(t,r,n){let i,a=!1;const s=zr(r),o=s.tags??[],l=s.metadata??{},c=s.runName??this.getName(),u=new dL({...n,autoClose:!1,_schemaFormat:"streaming_events"}),f=new YMe({...n}),d=this._streamLog(t,u,s);for await(const m of d){if(i?i=i.concat(m):i=N$.fromRunLogPatch(m),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const w={...i.state},v={run_id:w.id,event:`on_${w.type}_start`,name:c,tags:o,metadata:l,data:{input:t}};f.includeEvent(v,w.type)&&(yield v)}const p=m.ops.filter(w=>w.path.startsWith("/logs/")).map(w=>w.path.split("/")[2]),y=[...new Set(p)];for(const w of y){let v,x={};const b=i.state.logs[w];if(b.end_time===void 0?b.streamed_output.length>0?v="stream":v="start":v="end",v==="start")b.inputs!==void 0&&(x.input=b.inputs);else if(v==="end")b.inputs!==void 0&&(x.input=b.inputs),x.output=b.final_output;else if(v==="stream"){const S=b.streamed_output.length;if(S!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${S} instead. Encountered in: "${b.name}"`);x={chunk:b.streamed_output[0]},b.streamed_output=[]}yield{event:`on_${b.type}_${v}`,name:b.name,run_id:b.id,tags:b.tags,metadata:b.metadata,data:x}}const{state:g}=i;if(g.streamed_output.length>0){const w=g.streamed_output.length;if(w!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${w} instead. Encountered in: "${g.name}"`);const v={chunk:g.streamed_output[0]};g.streamed_output=[];const x={event:`on_${g.type}_stream`,run_id:g.id,tags:o,metadata:l,name:c,data:v};f.includeEvent(x,g.type)&&(yield x)}}const h=i==null?void 0:i.state;if(h!==void 0){const m={event:`on_${h.type}_end`,name:c,run_id:h.id,tags:o,metadata:l,data:{output:h.final_output}};f.includeEvent(m,h.type)&&(yield m)}}static isRunnable(t){return I$(t)}withListeners({onStart:t,onEnd:r,onError:n}){return new tp({bound:this,config:{},configFactories:[i=>({callbacks:[new pse({config:i,onStart:t,onEnd:r,onError:n})]})]})}asTool(t){return cDe(this,t)}},tp=class yse extends Lr{constructor(r){super(r);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"bound");L(this,"config");L(this,"kwargs");L(this,"configFactories");this.bound=r.bound,this.kwargs=r.kwargs,this.config=r.config,this.configFactories=r.configFactories}static lc_name(){return"RunnableBinding"}getName(r){return this.bound.getName(r)}async _mergeConfig(...r){const n=Al(this.config,...r);return Al(n,...this.configFactories?await Promise.all(this.configFactories.map(async i=>await i(n))):[])}withConfig(r){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...r}})}withRetry(r){return new R$({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:r==null?void 0:r.stopAfterAttempt,...r})}async invoke(r,n){return this.bound.invoke(r,await this._mergeConfig(n,this.kwargs))}async batch(r,n,i){const a=Array.isArray(n)?await Promise.all(n.map(async s=>this._mergeConfig(zr(s),this.kwargs))):await this._mergeConfig(zr(n),this.kwargs);return this.bound.batch(r,a,i)}_concatOutputChunks(r,n){return this.bound._concatOutputChunks(r,n)}async*_streamIterator(r,n){yield*this.bound._streamIterator(r,await this._mergeConfig(zr(n),this.kwargs))}async stream(r,n){return this.bound.stream(r,await this._mergeConfig(zr(n),this.kwargs))}async*transform(r,n){yield*this.bound.transform(r,await this._mergeConfig(zr(n),this.kwargs))}streamEvents(r,n,i){const a=this,s=async function*(){yield*a.bound.streamEvents(r,{...await a._mergeConfig(zr(n),a.kwargs),version:n.version},i)};return uo.fromAsyncGenerator(s())}static isRunnableBinding(r){return r.bound&&Lr.isRunnable(r.bound)}withListeners({onStart:r,onEnd:n,onError:i}){return new yse({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[a=>({callbacks:[new pse({config:a,onStart:r,onEnd:n,onError:i})]})]})}},aDe=class vse extends Lr{constructor(r){super(r);L(this,"lc_serializable",!0);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"bound");this.bound=r.bound}static lc_name(){return"RunnableEach"}async invoke(r,n){return this._callWithConfig(this._invoke.bind(this),r,n)}async _invoke(r,n,i){return this.bound.batch(r,Qr(n,{callbacks:i==null?void 0:i.getChild()}))}withListeners({onStart:r,onEnd:n,onError:i}){return new vse({bound:this.bound.withListeners({onStart:r,onEnd:n,onError:i})})}},R$=class extends tp{constructor(t){super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"maxAttemptNumber",3);L(this,"onFailedAttempt",()=>{});this.maxAttemptNumber=t.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=t.onFailedAttempt??this.onFailedAttempt}static lc_name(){return"RunnableRetry"}_patchConfigForRetry(t,r,n){const i=t>1?`retry:attempt:${t}`:void 0;return Qr(r,{callbacks:n==null?void 0:n.getChild(i)})}async _invoke(t,r,n){return hL(i=>super.invoke(t,this._patchConfigForRetry(i,r,n)),{onFailedAttempt:({error:i})=>this.onFailedAttempt(i,t),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(t,r){return this._callWithConfig(this._invoke.bind(this),t,r)}async _batch(t,r,n,i){const a={};try{await hL(async s=>{const o=t.map((d,h)=>h).filter(d=>a[d.toString()]===void 0||a[d.toString()]instanceof Error),l=o.map(d=>t[d]),c=o.map(d=>this._patchConfigForRetry(s,r==null?void 0:r[d],n==null?void 0:n[d])),u=await super.batch(l,c,{...i,returnExceptions:!0});let f;for(let d=0;d<u.length;d+=1){const h=u[d],m=o[d];h instanceof Error&&f===void 0&&(f=h,f.input=l[d]),a[m.toString()]=h}if(f)throw f;return u},{onFailedAttempt:({error:s})=>this.onFailedAttempt(s,s.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(s){if((i==null?void 0:i.returnExceptions)!==!0)throw s}return Object.keys(a).sort((s,o)=>parseInt(s,10)-parseInt(o,10)).map(s=>a[parseInt(s,10)])}async batch(t,r,n){return this._batchWithConfig(this._batch.bind(this),t,r,n)}},sd=class Bw extends Lr{constructor(r){super(r);L(this,"first");L(this,"middle",[]);L(this,"last");L(this,"omitSequenceTags",!1);L(this,"lc_serializable",!0);L(this,"lc_namespace",["langchain_core","runnables"]);this.first=r.first,this.middle=r.middle??this.middle,this.last=r.last,this.name=r.name,this.omitSequenceTags=r.omitSequenceTags??this.omitSequenceTags}static lc_name(){return"RunnableSequence"}get steps(){return[this.first,...this.middle,this.last]}async invoke(r,n){var c;const i=zr(n),a=await lo(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),aa(r,"input"),i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;let o=r,l;try{const u=[this.first,...this.middle];for(let f=0;f<u.length;f+=1){const h=u[f].invoke(o,Qr(i,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));o=await ad(h,n==null?void 0:n.signal)}if((c=n==null?void 0:n.signal)!=null&&c.aborted)throw Ob(n.signal);l=await this.last.invoke(o,Qr(i,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(u){throw await(s==null?void 0:s.handleChainError(u)),u}return await(s==null?void 0:s.handleChainEnd(aa(l,"output"))),l}async batch(r,n,i){var c;const a=this._getOptionsList(n??{},r.length),s=await Promise.all(a.map(lo)),o=await Promise.all(s.map(async(u,f)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),aa(r[f],"input"),a[f].runId,void 0,void 0,void 0,a[f].runName));return delete a[f].runId,d}));let l=r;try{for(let u=0;u<this.steps.length;u+=1){const d=this.steps[u].batch(l,o.map((h,m)=>{const p=h==null?void 0:h.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`);return Qr(a[m],{callbacks:p})}),i);l=await ad(d,(c=a[0])==null?void 0:c.signal)}}catch(u){throw await Promise.all(o.map(f=>f==null?void 0:f.handleChainError(u))),u}return await Promise.all(o.map(u=>u==null?void 0:u.handleChainEnd(aa(l,"output")))),l}_concatOutputChunks(r,n){return this.last._concatOutputChunks(r,n)}async*_streamIterator(r,n){var d;const i=await lo(n),{runId:a,...s}=n??{},o=await(i==null?void 0:i.handleChainStart(this.toJSON(),aa(r,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=[this.first,...this.middle,this.last];let c=!0,u;async function*f(){yield r}try{let h=l[0].transform(f(),Qr(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let m=1;m<l.length;m+=1)h=await l[m].transform(h,Qr(s,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`)}));for await(const m of h)if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),yield m,c)if(u===void 0)u=m;else try{u=this._concatOutputChunks(u,m)}catch{u=void 0,c=!1}}catch(h){throw await(o==null?void 0:o.handleChainError(h)),h}await(o==null?void 0:o.handleChainEnd(aa(u,"output")))}getGraph(r){const n=new Ib;let i=null;return this.steps.forEach((a,s)=>{const o=a.getGraph(r);s!==0&&o.trimFirstNode(),s!==this.steps.length-1&&o.trimLastNode(),n.extend(o);const l=o.firstNode();if(!l)throw new Error(`Runnable ${a} has no first node`);i&&n.addEdge(i,l),i=o.lastNode()}),n}pipe(r){return Bw.isRunnableSequence(r)?new Bw({first:this.first,middle:this.middle.concat([this.last,r.first,...r.middle]),last:r.last,name:this.name??r.name}):new Bw({first:this.first,middle:[...this.middle,this.last],last:$a(r),name:this.name})}static isRunnableSequence(r){return Array.isArray(r.middle)&&Lr.isRunnable(r)}static from([r,...n],i){let a={};return typeof i=="string"?a.name=i:i!==void 0&&(a=i),new Bw({...a,first:$a(r),middle:n.slice(0,-1).map($a),last:$a(n[n.length-1])})}},s1=class wse extends Lr{constructor(r){super(r);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"steps");this.steps={};for(const[n,i]of Object.entries(r.steps))this.steps[n]=$a(i)}static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}static from(r){return new wse({steps:r})}async invoke(r,n){const i=zr(n),a=await lo(i),s=await(a==null?void 0:a.handleChainStart(this.toJSON(),{input:r},i.runId,void 0,void 0,void 0,i==null?void 0:i.runName));delete i.runId;const o={};try{const l=Object.entries(this.steps).map(async([c,u])=>{o[c]=await u.invoke(r,Qr(i,{callbacks:s==null?void 0:s.getChild(`map:key:${c}`)}))});await ad(Promise.all(l),n==null?void 0:n.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(o)),o}async*_transform(r,n,i){const a={...this.steps},s=P$(r,Object.keys(a).length),o=new Map(Object.entries(a).map(([l,c],u)=>{const f=c.transform(s[u],Qr(i,{callbacks:n==null?void 0:n.getChild(`map:key:${l}`)}));return[l,f.next().then(d=>({key:l,gen:f,result:d}))]}));for(;o.size;){const l=Promise.race(o.values()),{key:c,result:u,gen:f}=await ad(l,i==null?void 0:i.signal);o.delete(c),u.done||(yield{[c]:u.value},o.set(c,f.next().then(d=>({key:c,gen:f,result:d}))))}}transform(r,n){return this._transformStreamWithConfig(r,this._transform.bind(this),n)}async stream(r,n){async function*i(){yield r}const a=zr(n),s=new km({generator:this.transform(i(),a),config:a});return await s.setup,uo.fromAsyncGenerator(s)}},sDe=class xse extends Lr{constructor(r){super(r);L(this,"lc_serializable",!1);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"func");if(!O$(r.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=r.func}async invoke(r,n){const[i]=this._getOptionsList(n??{},1),a=await lo(i),s=this.func(Qr(i,{callbacks:a}),r);return ad(s,i==null?void 0:i.signal)}async*_streamIterator(r,n){var s,o;const[i]=this._getOptionsList(n??{},1),a=await this.invoke(r,n);if(pL(a)){for await(const l of a)(s=i==null?void 0:i.signal)==null||s.throwIfAborted(),yield l;return}if(iDe(a)){for(;;){(o=i==null?void 0:i.signal)==null||o.throwIfAborted();const l=a.next();if(l.done)break;yield l.value}return}yield a}static from(r){return new xse({func:r})}};function oDe(e){if(O$(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var xd=class bse extends Lr{constructor(r){if(O$(r.func))return sDe.from(r.func);super(r);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"func");oDe(r.func),this.func=r.func}static lc_name(){return"RunnableLambda"}static from(r){return new bse({func:r})}async _invoke(r,n,i){return new Promise((a,s)=>{const o=Qr(n,{callbacks:i==null?void 0:i.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??x4)-1});ba.runWithConfig(id(o),async()=>{var l,c;try{let u=await this.func(r,{...o});if(u&&Lr.isRunnable(u)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");u=await u.invoke(r,{...o,recursionLimit:(o.recursionLimit??x4)-1})}else if(pL(u)){let f;for await(const d of mL(o,u))if((l=n==null?void 0:n.signal)==null||l.throwIfAborted(),f===void 0)f=d;else try{f=this._concatOutputChunks(f,d)}catch{f=d}u=f}else if(zV(u)){let f;for(const d of VV(o,u))if((c=n==null?void 0:n.signal)==null||c.throwIfAborted(),f===void 0)f=d;else try{f=this._concatOutputChunks(f,d)}catch{f=d}u=f}a(u)}catch(u){s(u)}})})}async invoke(r,n){return this._callWithConfig(this._invoke.bind(this),r,n)}async*_transform(r,n,i){var l,c;let a;for await(const u of r)if(a===void 0)a=u;else try{a=this._concatOutputChunks(a,u)}catch{a=u}const s=Qr(i,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((i==null?void 0:i.recursionLimit)??x4)-1}),o=await new Promise((u,f)=>{ba.runWithConfig(id(s),async()=>{try{const d=await this.func(a,{...s,config:s});u(d)}catch(d){f(d)}})});if(o&&Lr.isRunnable(o)){if((i==null?void 0:i.recursionLimit)===0)throw new Error("Recursion limit reached.");const u=await o.stream(a,s);for await(const f of u)yield f}else if(pL(o))for await(const u of mL(s,o))(l=i==null?void 0:i.signal)==null||l.throwIfAborted(),yield u;else if(zV(o))for(const u of VV(s,o))(c=i==null?void 0:i.signal)==null||c.throwIfAborted(),yield u;else yield o}transform(r,n){return this._transformStreamWithConfig(r,this._transform.bind(this),n)}async stream(r,n){async function*i(){yield r}const a=zr(n),s=new km({generator:this.transform(i(),a),config:a});return await s.setup,uo.fromAsyncGenerator(s)}},lDe=class extends s1{},_se=class extends Lr{constructor(t){super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"runnable");L(this,"fallbacks");this.runnable=t.runnable,this.fallbacks=t.fallbacks}static lc_name(){return"RunnableWithFallbacks"}*runnables(){yield this.runnable;for(const t of this.fallbacks)yield t}async invoke(t,r){const n=zr(r),i=await lo(n),{runId:a,...s}=n,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),aa(t,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName)),l=Qr(s,{callbacks:o==null?void 0:o.getChild()});return await ba.runWithConfig(l,async()=>{var f;let u;for(const d of this.runnables()){(f=n==null?void 0:n.signal)==null||f.throwIfAborted();try{const h=await d.invoke(t,l);return await(o==null?void 0:o.handleChainEnd(aa(h,"output"))),h}catch(h){u===void 0&&(u=h)}}throw u===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(u)),u)})}async*_streamIterator(t,r){var f;const n=zr(r),i=await lo(n),{runId:a,...s}=n,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),aa(t,"input"),a,void 0,void 0,void 0,s==null?void 0:s.runName));let l,c;for(const d of this.runnables()){(f=n==null?void 0:n.signal)==null||f.throwIfAborted();const h=Qr(s,{callbacks:o==null?void 0:o.getChild()});try{const m=await d.stream(t,h);c=mL(h,m);break}catch(m){l===void 0&&(l=m)}}if(c===void 0){const d=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(d)),d}let u;try{for await(const d of c){yield d;try{u=u===void 0?u:this._concatOutputChunks(u,d)}catch{u=void 0}}}catch(d){throw await(o==null?void 0:o.handleChainError(d)),d}await(o==null?void 0:o.handleChainEnd(aa(u,"output")))}async batch(t,r,n){var l;if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(r??{},t.length),a=await Promise.all(i.map(c=>lo(c))),s=await Promise.all(a.map(async(c,u)=>{const f=await(c==null?void 0:c.handleChainStart(this.toJSON(),aa(t[u],"input"),i[u].runId,void 0,void 0,void 0,i[u].runName));return delete i[u].runId,f}));let o;for(const c of this.runnables()){(l=i[0].signal)==null||l.throwIfAborted();try{const u=await c.batch(t,s.map((f,d)=>Qr(i[d],{callbacks:f==null?void 0:f.getChild()})),n);return await Promise.all(s.map((f,d)=>f==null?void 0:f.handleChainEnd(aa(u[d],"output")))),u}catch(u){o===void 0&&(o=u)}}throw o?(await Promise.all(s.map(c=>c==null?void 0:c.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};function $a(e){if(typeof e=="function")return new xd({func:e});if(Lr.isRunnable(e))return e;if(!Array.isArray(e)&&typeof e=="object"){const t={};for(const[r,n]of Object.entries(e))t[r]=$a(n);return new s1({steps:t})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var L$=class extends Lr{constructor(t){t instanceof s1&&(t={mapper:t});super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"mapper");this.mapper=t.mapper}static lc_name(){return"RunnableAssign"}async invoke(t,r){const n=await this.mapper.invoke(t,r);return{...t,...n}}async*_transform(t,r,n){const i=this.mapper.getStepsKeys(),[a,s]=P$(t),o=this.mapper.transform(s,Qr(n,{callbacks:r==null?void 0:r.getChild()})),l=o.next();for await(const c of a){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const u=Object.fromEntries(Object.entries(c).filter(([f])=>!i.includes(f)));Object.keys(u).length>0&&(yield u)}yield(await l).value;for await(const c of o)yield c}transform(t,r){return this._transformStreamWithConfig(t,this._transform.bind(this),r)}async stream(t,r){async function*n(){yield t}const i=zr(r),a=new km({generator:this.transform(n(),i),config:i});return await a.setup,uo.fromAsyncGenerator(a)}},Sse=class extends Lr{constructor(t){(typeof t=="string"||Array.isArray(t))&&(t={keys:t});super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"keys");this.keys=t.keys}static lc_name(){return"RunnablePick"}async _pick(t){if(typeof this.keys=="string")return t[this.keys];{const r=this.keys.map(n=>[n,t[n]]).filter(n=>n[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(t,r){return this._callWithConfig(this._pick.bind(this),t,r)}async*_transform(t){for await(const r of t){const n=await this._pick(r);n!==void 0&&(yield n)}}transform(t,r){return this._transformStreamWithConfig(t,this._transform.bind(this),r)}async stream(t,r){async function*n(){yield t}const i=zr(r),a=new km({generator:this.transform(n(),i),config:i});return await a.setup,uo.fromAsyncGenerator(a)}},gL=class extends tp{constructor(t){const r=sd.from([xd.from(async n=>{let i;if(mx(n))try{i=await RC(this.schema,n.args)}catch{throw new XT("Received tool input did not match expected schema",JSON.stringify(n.args))}else i=n;return i}).withConfig({runName:`${t.name}:parse_input`}),t.bound]).withConfig({runName:t.name});super({bound:r,config:t.config??{}});L(this,"name");L(this,"description");L(this,"schema");this.name=t.name,this.description=t.description,this.schema=t.schema}static lc_name(){return"RunnableToolLike"}};function cDe(e,t){const r=t.name??e.getName(),n=t.description??bb(t.schema);return i$(t.schema)?new gL({name:r,description:n,schema:hp({input:Tm()}).transform(i=>i.input),bound:e}):new gL({name:r,description:n,schema:t.schema,bound:e})}const ak=(e,t)=>{const r=[...new Set(t==null?void 0:t.map(i=>{if(typeof i=="string")return i;const a=new i({});if(!("getType"in a)||typeof a.getType!="function")throw new Error("Invalid type provided.");return a.getType()}))],n=e.getType();return r.some(i=>i===n)};function uDe(e,t){return Array.isArray(e)?WV(e,t):xd.from(r=>WV(r,e))}function WV(e,t={}){const{includeNames:r,excludeNames:n,includeTypes:i,excludeTypes:a,includeIds:s,excludeIds:o}=t,l=[];for(const c of e)if(!(n&&c.name&&n.includes(c.name))){{if(a&&ak(c,a))continue;if(o&&c.id&&o.includes(c.id))continue}i||s||r?(r&&c.name&&r.some(u=>u===c.name)||i&&ak(c,i)||s&&c.id&&s.some(u=>u===c.id))&&l.push(c):l.push(c)}return l}function fDe(e){return Array.isArray(e)?HV(e):xd.from(HV)}function HV(e){if(!e.length)return[];const t=[];for(const r of e){const n=r,i=t.pop();if(!i)t.push(n);else if(n.getType()==="tool"||n.getType()!==i.getType())t.push(i,n);else{const a=ZT(i),s=ZT(n),o=a.concat(s);typeof a.content=="string"&&typeof s.content=="string"&&(o.content=`${a.content}
${s.content}`),t.push(pDe(o))}}return t}function dDe(e,t){if(Array.isArray(e)){const r=e;if(!t)throw new Error("Options parameter is required when providing messages.");return GV(r,t)}else{const r=e;return xd.from(n=>GV(n,r)).withConfig({runName:"trim_messages"})}}async function GV(e,t){const{maxTokens:r,tokenCounter:n,strategy:i="last",allowPartial:a=!1,endOn:s,startOn:o,includeSystem:l=!1,textSplitter:c}=t;if(o&&i==="first")throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(l&&i==="first")throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let u;"getNumTokens"in n?u=async d=>(await Promise.all(d.map(m=>n.getNumTokens(m.content)))).reduce((m,p)=>m+p,0):u=async d=>n(d);let f=Ase;if(c&&("splitText"in c?f=c.splitText:f=async d=>c(d)),i==="first")return Ese(e,{maxTokens:r,tokenCounter:u,textSplitter:f,partialStrategy:a?"first":void 0,endOn:s});if(i==="last")return hDe(e,{maxTokens:r,tokenCounter:u,textSplitter:f,allowPartial:a,includeSystem:l,startOn:o,endOn:s});throw new Error(`Unrecognized strategy: '${i}'. Must be one of 'first' or 'last'.`)}async function Ese(e,t){const{maxTokens:r,tokenCounter:n,textSplitter:i,partialStrategy:a,endOn:s}=t;let o=[...e],l=0;for(let c=0;c<o.length;c+=1){const u=c>0?o.slice(0,-c):o;if(await n(u)<=r){l=o.length-c;break}}if(l<o.length&&a){let c=!1;if(Array.isArray(o[l].content)){const u=o[l];if(typeof u.content=="string")throw new Error("Expected content to be an array.");const f=u.content.length,d=a==="last"?[...u.content].reverse():u.content;for(let h=1;h<=f;h+=1){const m=a==="first"?d.slice(0,h):d.slice(-h),p=Object.fromEntries(Object.entries(u).filter(([w])=>w!=="type"&&!w.startsWith("lc_"))),y=M$(u.getType(),{...p,content:m}),g=[...o.slice(0,l),y];if(await n(g)<=r)o=g,l+=1,c=!0;else break}c&&a==="last"&&(u.content=[...d].reverse())}if(!c){const u=o[l];let f;if(Array.isArray(u.content)&&u.content.some(d=>typeof d=="string"||d.type==="text")){const d=u.content.find(h=>h.type==="text"&&h.text);f=d==null?void 0:d.text}else typeof u.content=="string"&&(f=u.content);if(f){const d=await i(f),h=d.length;a==="last"&&d.reverse();for(let m=0;m<h-1;m+=1)if(d.pop(),u.content=d.join(""),await n([...o.slice(0,l),u])<=r){a==="last"&&(u.content=[...d].reverse().join("")),o=[...o.slice(0,l),u],l+=1;break}}}}if(s){const c=Array.isArray(s)?s:[s];for(;l>0&&!ak(o[l-1],c);)l-=1}return o.slice(0,l)}async function hDe(e,t){var u;const{allowPartial:r=!1,includeSystem:n=!1,endOn:i,startOn:a,...s}=t;let o=e.map(f=>{const d=Object.fromEntries(Object.entries(f).filter(([h])=>h!=="type"&&!h.startsWith("lc_")));return M$(f.getType(),d,Tb(f))});if(i){const f=Array.isArray(i)?i:[i];for(;o.length>0&&!ak(o[o.length-1],f);)o=o.slice(0,-1)}const l=n&&((u=o[0])==null?void 0:u.getType())==="system";let c=l?o.slice(0,1).concat(o.slice(1).reverse()):o.reverse();return c=await Ese(c,{...s,partialStrategy:r?"last":void 0,endOn:a}),l?[c[0],...c.slice(1).reverse()]:c.reverse()}const qV={human:{message:ms,messageChunk:zC},ai:{message:da,messageChunk:Dl},system:{message:Bc,messageChunk:nv},developer:{message:Bc,messageChunk:nv},tool:{message:Fu,messageChunk:jC},function:{message:BC,messageChunk:UC},generic:{message:mp,messageChunk:FC},remove:{message:I0,messageChunk:I0}};function M$(e,t,r){var a;let n,i;switch(e){case"human":r?n=new zC(t):i=new ms(t);break;case"ai":if(r){let s={...t};"tool_calls"in s&&(s={...s,tool_call_chunks:(a=s.tool_calls)==null?void 0:a.map(o=>({...o,type:"tool_call_chunk",index:void 0,args:JSON.stringify(o.args)}))}),n=new Dl(s)}else i=new da(t);break;case"system":r?n=new nv(t):i=new Bc(t);break;case"developer":r?n=new nv({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}}):i=new Bc({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if("tool_call_id"in t)r?n=new jC(t):i=new Fu(t);else throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");break;case"function":if(r)n=new UC(t);else{if(!t.name)throw new Error("FunctionMessage must have a 'name' field");i=new BC(t)}break;case"generic":if("role"in t)r?n=new FC(t):i=new mp(t);else throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");break;default:throw new Error(`Unrecognized message type ${e}`)}if(r&&n)return n;if(i)return i;throw new Error(`Unrecognized message type ${e}`)}function pDe(e){const t=e.getType();let r;const n=Object.fromEntries(Object.entries(e).filter(([i])=>!["type","tool_call_chunks"].includes(i)&&!i.startsWith("lc_")));if(t in qV&&(r=M$(t,n)),!r)throw new Error(`Unrecognized message chunk class ${t}. Supported classes are ${Object.keys(qV)}`);return r}function Ase(e){const t=e.split(`
`);return Promise.resolve([...t.slice(0,-1).map(r=>`${r}
`),t[t.length-1]])}const mDe=["tool_call","tool_call_chunk","invalid_tool_call","server_tool_call","server_tool_call_chunk","server_tool_call_result"],gDe=["image","video","audio","text-plain","file"],yDe=["text","reasoning",...mDe,...gDe];var Tse={};Gt(Tse,{AIMessage:()=>da,AIMessageChunk:()=>Dl,BaseMessage:()=>Pl,BaseMessageChunk:()=>pp,ChatMessage:()=>mp,ChatMessageChunk:()=>FC,DEFAULT_MERGE_IGNORE_KEYS:()=>Uie,FunctionMessage:()=>BC,FunctionMessageChunk:()=>UC,HumanMessage:()=>ms,HumanMessageChunk:()=>zC,KNOWN_BLOCK_TYPES:()=>yDe,RemoveMessage:()=>I0,SystemMessage:()=>Bc,SystemMessageChunk:()=>nv,ToolMessage:()=>Fu,ToolMessageChunk:()=>jC,_isMessageFieldWithRole:()=>Wie,_mergeDicts:()=>ps,_mergeLists:()=>s2,_mergeObj:()=>zie,_mergeStatus:()=>Bie,coerceMessageLikeToMessage:()=>Iu,collapseToolCallChunks:()=>Qie,convertToChunk:()=>ZT,convertToOpenAIImageBlock:()=>Cie,convertToProviderContentBlock:()=>Oie,defaultTextSplitter:()=>Ase,defaultToolCallParser:()=>m$,filterMessages:()=>uDe,getBufferString:()=>y$,iife:()=>RIe,isAIMessage:()=>em,isAIMessageChunk:()=>JR,isBase64ContentBlock:()=>c$,isBaseMessage:()=>ji,isBaseMessageChunk:()=>Tb,isChatMessage:()=>dIe,isChatMessageChunk:()=>hIe,isDataContentBlock:()=>rd,isDirectToolOutput:()=>p$,isFunctionMessage:()=>pIe,isFunctionMessageChunk:()=>mIe,isHumanMessage:()=>gIe,isHumanMessageChunk:()=>yIe,isIDContentBlock:()=>kie,isMessage:()=>Pie,isOpenAIToolCallArray:()=>cIe,isPlainTextContentBlock:()=>C4e,isSystemMessage:()=>vIe,isSystemMessageChunk:()=>wIe,isToolMessage:()=>$C,isToolMessageChunk:()=>Kie,isURLContentBlock:()=>l$,mapChatMessagesToStoredMessages:()=>$Ie,mapStoredMessageToChatMessage:()=>v$,mapStoredMessagesToChatMessages:()=>jIe,mergeContent:()=>nd,mergeMessageRuns:()=>fDe,mergeResponseMetadata:()=>Hie,mergeUsageMetadata:()=>h$,parseBase64DataUrl:()=>Ay,parseMimeType:()=>O4e,trimMessages:()=>dDe});function D$(e){return e!==void 0&&Array.isArray(e.lc_namespace)}function j$(e){return e!==void 0&&Lr.isRunnable(e)&&"lc_name"in e.constructor&&typeof e.constructor.lc_name=="function"&&e.constructor.lc_name()==="RunnableToolLike"}function $$(e){return!!e&&typeof e=="object"&&"name"in e&&"schema"in e&&(dp(e.schema)||e.schema!=null&&typeof e.schema=="object"&&"type"in e.schema&&typeof e.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function d2(e){return $$(e)||j$(e)||D$(e)}var kse={};Gt(kse,{convertToOpenAIFunction:()=>Cse,convertToOpenAITool:()=>vDe,isLangChainTool:()=>d2,isRunnableToolLike:()=>j$,isStructuredTool:()=>D$,isStructuredToolParams:()=>$$});function Cse(e,t){const r=typeof t=="number"?void 0:t;return{name:e.name,description:e.description,parameters:Ps(e.schema),...(r==null?void 0:r.strict)!==void 0?{strict:r.strict}:{}}}function vDe(e,t){const r=typeof t=="number"?void 0:t;let n;return d2(e)?n={type:"function",function:Cse(e)}:n=e,(r==null?void 0:r.strict)!==void 0&&(n.function.strict=r.strict),n}var Ose={};Gt(Ose,{BasePromptValue:()=>YC,ChatPromptValue:()=>B$,ImagePromptValue:()=>Pse,StringPromptValue:()=>F$});var YC=class extends Ml{},F$=class extends YC{constructor(t){super({value:t});L(this,"lc_namespace",["langchain_core","prompt_values"]);L(this,"lc_serializable",!0);L(this,"value");this.value=t}static lc_name(){return"StringPromptValue"}toString(){return this.value}toChatMessages(){return[new ms(this.value)]}},B$=class extends YC{constructor(t){Array.isArray(t)&&(t={messages:t});super(t);L(this,"lc_namespace",["langchain_core","prompt_values"]);L(this,"lc_serializable",!0);L(this,"messages");this.messages=t.messages}static lc_name(){return"ChatPromptValue"}toString(){return y$(this.messages)}toChatMessages(){return this.messages}},Pse=class extends YC{constructor(t){"imageUrl"in t||(t={imageUrl:t});super(t);L(this,"lc_namespace",["langchain_core","prompt_values"]);L(this,"lc_serializable",!0);L(this,"imageUrl");L(this,"value");this.imageUrl=t.imageUrl}static lc_name(){return"ImagePromptValue"}toString(){return this.imageUrl.url}toChatMessages(){return[new ms({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}},Tt="0123456789abcdef".split(""),wDe=[-2147483648,8388608,32768,128],tc=[24,16,8,0],mE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],pa=[];function Uc(e,t){t?(pa[0]=pa[16]=pa[1]=pa[2]=pa[3]=pa[4]=pa[5]=pa[6]=pa[7]=pa[8]=pa[9]=pa[10]=pa[11]=pa[12]=pa[13]=pa[14]=pa[15]=0,this.blocks=pa):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}Uc.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if(r!=="string"){if(r==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var n,i=0,a,s=e.length,o=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,this.block=o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),t)for(a=this.start;i<s&&a<64;++i)o[a>>>2]|=e[i]<<tc[a++&3];else for(a=this.start;i<s&&a<64;++i)n=e.charCodeAt(i),n<128?o[a>>>2]|=n<<tc[a++&3]:n<2048?(o[a>>>2]|=(192|n>>>6)<<tc[a++&3],o[a>>>2]|=(128|n&63)<<tc[a++&3]):n<55296||n>=57344?(o[a>>>2]|=(224|n>>>12)<<tc[a++&3],o[a>>>2]|=(128|n>>>6&63)<<tc[a++&3],o[a>>>2]|=(128|n&63)<<tc[a++&3]):(n=65536+((n&1023)<<10|e.charCodeAt(++i)&1023),o[a>>>2]|=(240|n>>>18)<<tc[a++&3],o[a>>>2]|=(128|n>>>12&63)<<tc[a++&3],o[a>>>2]|=(128|n>>>6&63)<<tc[a++&3],o[a>>>2]|=(128|n&63)<<tc[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=o[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Uc.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=wDe[t&3],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}};Uc.prototype.hash=function(){var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=this.blocks,c,u,f,d,h,m,p,y,g,w,v;for(c=16;c<64;++c)h=l[c-15],u=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=l[c-2],f=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,l[c]=l[c-16]+u+l[c-7]+f<<0;for(v=t&r,c=0;c<64;c+=4)this.first?(this.is224?(y=300032,h=l[0]-1413257819,o=h-150054599<<0,n=h+24177077<<0):(y=704751109,h=l[0]-210244248,o=h-1521486534<<0,n=h+143694565<<0),this.first=!1):(u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),y=e&t,d=y^e&r^v,p=i&a^~i&s,h=o+f+p+mE[c]+l[c],m=u+d,o=n+h<<0,n=h+m<<0),u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),g=n&e,d=g^n&t^y,p=s&o^~s&i,h=a+f+p+mE[c+1]+l[c+1],m=u+d,s=r+h<<0,r=h+m<<0,u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),w=r&n,d=w^r&e^g,p=a&s^~a&o,h=i+f+p+mE[c+2]+l[c+2],m=u+d,a=t+h<<0,t=h+m<<0,u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),v=t&r,d=v^t&n^w,p=a&s^~a&o,h=i+f+p+mE[c+3]+l[c+3],m=u+d,i=e+h<<0,e=h+m<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+a<<0,this.h6=this.h6+s<<0,this.h7=this.h7+o<<0};Uc.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=Tt[e>>>28&15]+Tt[e>>>24&15]+Tt[e>>>20&15]+Tt[e>>>16&15]+Tt[e>>>12&15]+Tt[e>>>8&15]+Tt[e>>>4&15]+Tt[e&15]+Tt[t>>>28&15]+Tt[t>>>24&15]+Tt[t>>>20&15]+Tt[t>>>16&15]+Tt[t>>>12&15]+Tt[t>>>8&15]+Tt[t>>>4&15]+Tt[t&15]+Tt[r>>>28&15]+Tt[r>>>24&15]+Tt[r>>>20&15]+Tt[r>>>16&15]+Tt[r>>>12&15]+Tt[r>>>8&15]+Tt[r>>>4&15]+Tt[r&15]+Tt[n>>>28&15]+Tt[n>>>24&15]+Tt[n>>>20&15]+Tt[n>>>16&15]+Tt[n>>>12&15]+Tt[n>>>8&15]+Tt[n>>>4&15]+Tt[n&15]+Tt[i>>>28&15]+Tt[i>>>24&15]+Tt[i>>>20&15]+Tt[i>>>16&15]+Tt[i>>>12&15]+Tt[i>>>8&15]+Tt[i>>>4&15]+Tt[i&15]+Tt[a>>>28&15]+Tt[a>>>24&15]+Tt[a>>>20&15]+Tt[a>>>16&15]+Tt[a>>>12&15]+Tt[a>>>8&15]+Tt[a>>>4&15]+Tt[a&15]+Tt[s>>>28&15]+Tt[s>>>24&15]+Tt[s>>>20&15]+Tt[s>>>16&15]+Tt[s>>>12&15]+Tt[s>>>8&15]+Tt[s>>>4&15]+Tt[s&15];return this.is224||(l+=Tt[o>>>28&15]+Tt[o>>>24&15]+Tt[o>>>20&15]+Tt[o>>>16&15]+Tt[o>>>12&15]+Tt[o>>>8&15]+Tt[o>>>4&15]+Tt[o&15]),l};Uc.prototype.toString=Uc.prototype.hex;Uc.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4,a=this.h5,s=this.h6,o=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,a>>>24&255,a>>>16&255,a>>>8&255,a&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,o&255),l};Uc.prototype.array=Uc.prototype.digest;Uc.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};const U$=(...e)=>new Uc(!1,!0).update(e.join("")).hex();var Nse={};Gt(Nse,{sha256:()=>U$});var Ise={};Gt(Ise,{BaseCache:()=>Lse,InMemoryCache:()=>Mse,defaultHashKeyEncoder:()=>Rse,deserializeStoredGeneration:()=>xDe,serializeGeneration:()=>bDe});const Rse=(...e)=>U$(e.join("_"));function xDe(e){return e.message!==void 0?{text:e.text,message:v$(e.message)}:{text:e.text}}function bDe(e){const t={text:e.text};return e.message!==void 0&&(t.message=e.message.toDict()),t}var Lse=class{constructor(){L(this,"keyEncoder",Rse)}makeDefaultKeyEncoder(t){this.keyEncoder=t}};const _De=new Map;var Mse=class Dse extends Lse{constructor(r){super();L(this,"cache");this.cache=r??new Map}lookup(r,n){return Promise.resolve(this.cache.get(this.keyEncoder(r,n))??null)}async update(r,n,i){this.cache.set(this.keyEncoder(r,n),i)}static global(){return new Dse(_De)}},XC={};XC.byteLength=ADe;XC.toByteArray=kDe;XC.fromByteArray=PDe;var xu=[],pl=[],SDe=typeof Uint8Array<"u"?Uint8Array:Array,_4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var lg=0,EDe=_4.length;lg<EDe;++lg)xu[lg]=_4[lg],pl[_4.charCodeAt(lg)]=lg;pl[45]=62;pl[95]=63;function jse(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function ADe(e){var t=jse(e),r=t[0],n=t[1];return(r+n)*3/4-n}function TDe(e,t,r){return(t+r)*3/4-r}function kDe(e){var t,r=jse(e),n=r[0],i=r[1],a=new SDe(TDe(e,n,i)),s=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)t=pl[e.charCodeAt(l)]<<18|pl[e.charCodeAt(l+1)]<<12|pl[e.charCodeAt(l+2)]<<6|pl[e.charCodeAt(l+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=t&255;return i===2&&(t=pl[e.charCodeAt(l)]<<2|pl[e.charCodeAt(l+1)]>>4,a[s++]=t&255),i===1&&(t=pl[e.charCodeAt(l)]<<10|pl[e.charCodeAt(l+1)]<<4|pl[e.charCodeAt(l+2)]>>2,a[s++]=t>>8&255,a[s++]=t&255),a}function CDe(e){return xu[e>>18&63]+xu[e>>12&63]+xu[e>>6&63]+xu[e&63]}function ODe(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(CDe(n));return i.join("")}function PDe(e){for(var t,r=e.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(ODe(e,s,s+a>o?o:s+a));return n===1?(t=e[r-1],i.push(xu[t>>2]+xu[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(xu[t>>10]+xu[t>>4&63]+xu[t<<2&63]+"=")),i.join("")}var NDe=Object.defineProperty,IDe=(e,t,r)=>t in e?NDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,RDe=(e,t,r)=>(IDe(e,t+"",r),r);function LDe(e,t){let r=Array.from({length:e.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){const a=e.slice(r[i].start,r[i+1].end),s=t.get(a.join(","));s!=null&&(n==null||s<n[0])&&(n=[s,i])}if(n!=null){const i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function MDe(e,t){return e.length===1?[t.get(e.join(","))]:LDe(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function DDe(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var yL=class{constructor(e,t){L(this,"specialTokens");L(this,"inverseSpecialTokens");L(this,"patStr");L(this,"textEncoder",new TextEncoder);L(this,"textDecoder",new TextDecoder("utf-8"));L(this,"rankMap",new Map);L(this,"textMap",new Map);this.patStr=e.pat_str;const r=e.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{const[a,s,...o]=i.split(" "),l=Number.parseInt(s,10);return o.forEach((c,u)=>n[c]=l+u),n},{});for(const[n,i]of Object.entries(r)){const a=XC.toByteArray(n);this.rankMap.set(a.join(","),i),this.textMap.set(i,a)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,a])=>(n[a]=this.textEncoder.encode(i),n),{})}encode(e,t=[],r="all"){const n=new RegExp(this.patStr,"ug"),i=yL.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set(t==="all"?Object.keys(this.specialTokens):t),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(c=>!s.has(c)):r);if(o.size>0){const c=yL.specialTokenRegex([...o]),u=e.match(c);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let l=0;for(;;){let c=null,u=l;for(;i.lastIndex=u,c=i.exec(e),!(c==null||s.has(c[0]));)u=c.index+1;const f=(c==null?void 0:c.index)??e.length;for(const h of e.substring(l,f).matchAll(n)){const m=this.textEncoder.encode(h[0]),p=this.rankMap.get(m.join(","));if(p!=null){a.push(p);continue}a.push(...MDe(m,this.rankMap))}if(c==null)break;let d=this.specialTokens[c[0]];a.push(d),l=c.index+c[0].length}return a}decode(e){const t=[];let r=0;for(let a=0;a<e.length;++a){const s=e[a],o=this.textMap.get(s)??this.inverseSpecialTokens[s];o!=null&&(t.push(o),r+=o.length)}const n=new Uint8Array(r);let i=0;for(const a of t)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},$se=yL;RDe($se,"specialTokenRegex",e=>new RegExp(e.map(t=>DDe(t)).join("|"),"g"));function jDe(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw new Error("Unknown model")}}var Fse={};Gt(Fse,{encodingForModel:()=>z$,getEncoding:()=>Bse});const gE={},$De=new f2({});async function Bse(e){return e in gE||(gE[e]=$De.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(t=>t.json()).then(t=>new $se(t)).catch(t=>{throw delete gE[e],t})),await gE[e]}async function z$(e){return Bse(jDe(e))}var Use={};Gt(Use,{BaseLangChain:()=>W$,BaseLanguageModel:()=>H$,calculateMaxTokens:()=>BDe,getEmbeddingContextSize:()=>FDe,getModelContextSize:()=>zse,getModelNameForTiktoken:()=>ZC,isOpenAITool:()=>V$});const ZC=e=>e.startsWith("gpt-5")?"gpt-5":e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,FDe=e=>{switch(e){case"text-embedding-ada-002":return 8191;default:return 2046}},zse=e=>{switch(ZC(e)){case"gpt-5":case"gpt-5-turbo":case"gpt-5-turbo-preview":return 4e5;case"gpt-4o":case"gpt-4o-mini":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":return 128e3;case"gpt-4-turbo":case"gpt-4-turbo-preview":case"gpt-4-turbo-2024-04-09":case"gpt-4-0125-preview":case"gpt-4-1106-preview":return 128e3;case"gpt-4-32k":case"gpt-4-32k-0314":case"gpt-4-32k-0613":return 32768;case"gpt-4":case"gpt-4-0314":case"gpt-4-0613":return 8192;case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-16k-0613":return 16384;case"gpt-3.5-turbo":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-1106":case"gpt-3.5-turbo-0125":return 4096;case"text-davinci-003":case"text-davinci-002":return 4097;case"text-davinci-001":return 2049;case"text-curie-001":case"text-babbage-001":case"text-ada-001":return 2048;case"code-davinci-002":case"code-davinci-001":return 8e3;case"code-cushman-001":return 2048;case"claude-3-5-sonnet-20241022":case"claude-3-5-sonnet-20240620":case"claude-3-opus-20240229":case"claude-3-sonnet-20240229":case"claude-3-haiku-20240307":case"claude-2.1":return 2e5;case"claude-2.0":case"claude-instant-1.2":return 1e5;case"gemini-1.5-pro":case"gemini-1.5-pro-latest":case"gemini-1.5-flash":case"gemini-1.5-flash-latest":return 1e6;case"gemini-pro":case"gemini-pro-vision":return 32768;default:return 4097}};function V$(e){return typeof e!="object"||!e?!1:!!("type"in e&&e.type==="function"&&"function"in e&&typeof e.function=="object"&&e.function&&"name"in e.function&&"parameters"in e.function)}const BDe=async({prompt:e,modelName:t})=>{let r;try{r=(await z$(ZC(t))).encode(e).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(e.length/4)}return zse(t)-r},UDe=()=>!1;var W$=class extends Lr{constructor(t){super(t);L(this,"verbose");L(this,"callbacks");L(this,"tags");L(this,"metadata");this.verbose=t.verbose??UDe(),this.callbacks=t.callbacks,this.tags=t.tags??[],this.metadata=t.metadata??{}}get lc_attributes(){return{callbacks:void 0,verbose:void 0}}},H$=class extends W${constructor({callbacks:t,callbackManager:r,...n}){const{cache:i,...a}=n;super({callbacks:t??r,...a});L(this,"caller");L(this,"cache");L(this,"_encoding");typeof i=="object"?this.cache=i:i?this.cache=Mse.global():this.cache=void 0,this.caller=new f2(n??{})}get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}async getNumTokens(t){let r;typeof t=="string"?r=t:r=t.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let n=Math.ceil(r.length/4);if(!this._encoding)try{this._encoding=await z$("modelName"in this?ZC(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{n=this._encoding.encode(r).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return n}static _convertInputToPromptValue(t){return typeof t=="string"?new F$(t):Array.isArray(t)?new B$(t.map(Iu)):t}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:t,...r}){const n={...this._identifyingParams(),...r,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([s,o])=>o!==void 0).map(([s,o])=>`${s}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(t){throw new Error("Use .toJSON() instead")}get profile(){return{}}};const Ia=[];for(let e=0;e<256;++e)Ia.push((e+256).toString(16).slice(1));function zDe(e,t=0){return(Ia[e[t+0]]+Ia[e[t+1]]+Ia[e[t+2]]+Ia[e[t+3]]+"-"+Ia[e[t+4]]+Ia[e[t+5]]+"-"+Ia[e[t+6]]+Ia[e[t+7]]+"-"+Ia[e[t+8]]+Ia[e[t+9]]+"-"+Ia[e[t+10]]+Ia[e[t+11]]+Ia[e[t+12]]+Ia[e[t+13]]+Ia[e[t+14]]+Ia[e[t+15]]).toLowerCase()}let S4;const VDe=new Uint8Array(16);function WDe(){if(!S4){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");S4=crypto.getRandomValues.bind(crypto)}return S4(VDe)}const HDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),KV={randomUUID:HDe};function Vse(e,t,r){var i;if(KV.randomUUID&&!e)return KV.randomUUID();e=e||{};const n=e.random??((i=e.rng)==null?void 0:i.call(e))??WDe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,zDe(n)}const G$="__gemini_function_call_thought_signatures__",GDe="ErYCCrMCAdHtim9kOoOkrPiCNVsmlpMIKd7ZMxgiFbVQOkgp7nlLcDMzVsZwIzvuT7nQROivoXA72ccC2lSDvR0Gh7dkWaGuj7ctv6t7ZceHnecx0QYa+ix8tYpRfjhyWozQ49lWiws6+YGjCt10KRTyWsZ2h6O7iHTYJwKIRwGUHRKy/qK/6kFxJm5ML00gLq4D8s5Z6DBpp2ZlR+uF4G8jJgeWQgyHWVdx2wGYElaceVAc66tZdPQRdOHpWtgYSI1YdaXgVI8KHY3/EfNc2YqqMIulvkDBAnuMhkAjV9xmBa54Tq+ih3Im4+r3DzqhGqYdsSkhS0kZMwte4Hjs65dZzCw9lANxIqYi1DJ639WNPYihp/DCJCos7o+/EeSPJaio5sgWDyUnMGkY1atsJZ+m7pj7DD5tvQ==",qDe=e=>e();function KDe(e){return mp.isInstance(e)?e.role:e.type}function YDe(e){switch(e){case"supervisor":case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${e}`)}}function XDe(e){if("mimeType"in e&&"data"in e)return{inlineData:{mimeType:e.mimeType,data:e.data}};if("mimeType"in e&&"fileUri"in e)return{fileData:{mimeType:e.mimeType,fileUri:e.fileUri}};throw new Error("Invalid media content")}function ZDe(e,t){var r;return(r=t.map(n=>em(n)?n.tool_calls??[]:[]).flat().find(n=>n.id===e.tool_call_id))==null?void 0:r.name}function JDe(e){return{providerName:"Google Gemini",fromStandardTextBlock(r){return{text:r.text}},fromStandardImageBlock(r){if(!e)throw new Error("This model does not support images");if(r.source_type==="url"){const n=Ay({dataUrl:r.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:r.mime_type??"",fileUri:r.url}}}if(r.source_type==="base64")return{inlineData:{mimeType:r.mime_type??"",data:r.data}};throw new Error(`Unsupported source type: ${r.source_type}`)},fromStandardAudioBlock(r){if(!e)throw new Error("This model does not support audio");if(r.source_type==="url"){const n=Ay({dataUrl:r.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:r.mime_type??"",fileUri:r.url}}}if(r.source_type==="base64")return{inlineData:{mimeType:r.mime_type??"",data:r.data}};throw new Error(`Unsupported source type: ${r.source_type}`)},fromStandardFileBlock(r){if(!e)throw new Error("This model does not support files");if(r.source_type==="text")return{text:r.text};if(r.source_type==="url"){const n=Ay({dataUrl:r.url});return n?{inlineData:{mimeType:n.mime_type,data:n.data}}:{fileData:{mimeType:r.mime_type??"",fileUri:r.url}}}if(r.source_type==="base64")return{inlineData:{mimeType:r.mime_type??"",data:r.data}};throw new Error(`Unsupported source type: ${r.source_type}`)}}}function YV(e,t){var r;if(rd(e))return Oie(e,JDe(t));if(e.type==="text")return{text:e.text};if(e.type==="executableCode")return{executableCode:e.executableCode};if(e.type==="codeExecutionResult")return{codeExecutionResult:e.codeExecutionResult};if(e.type==="image_url"){if(!t)throw new Error("This model does not support images");let n;if(typeof e.image_url=="string")n=e.image_url;else if(typeof e.image_url=="object"&&"url"in e.image_url)n=e.image_url.url;else throw new Error("Please provide image as base64 encoded data URL");const[i,a]=n.split(",");if(!i.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[s,o]=i.replace(/^data:/,"").split(";");if(o!=="base64")throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:a,mimeType:s}}}else{if(e.type==="media")return XDe(e);if(e.type==="tool_use")return{functionCall:{name:e.name,args:e.input}};if(e.type==="tool_call")return{functionCall:{name:e.name,args:e.args}};if((r=e.type)!=null&&r.includes("/")&&e.type.split("/").length===2&&"data"in e&&typeof e.data=="string")return{inlineData:{mimeType:e.type,data:e.data}};if("functionCall"in e)return;throw"type"in e?new Error(`Unknown content type ${e.type}`):new Error(`Unknown content ${JSON.stringify(e)}`)}}function QDe(e,t,r,n){var o,l;if($C(e)){const c=e.name??ZDe(e,r);if(c===void 0)throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage "${e.id}" from your passed messages. Please populate a "name" field on that ToolMessage explicitly.`);const u=Array.isArray(e.content)?e.content.map(f=>YV(f,t)).filter(f=>f!==void 0):e.content;return e.status==="error"?[{functionResponse:{name:c,response:{error:{details:u}}}}]:[{functionResponse:{name:c,response:{result:u}}}]}let i=[];const a=[];typeof e.content=="string"&&e.content&&a.push({text:e.content}),Array.isArray(e.content)&&a.push(...e.content.map(c=>YV(c,t)).filter(c=>c!==void 0));const s=(o=e.additional_kwargs)==null?void 0:o[G$];return em(e)&&((l=e.tool_calls)!=null&&l.length)&&(i=e.tool_calls.map(c=>{const u=qDe(()=>{if(c.id){const f=s==null?void 0:s[c.id];if(f)return f}return n!=null&&n.includes("gemini-3")?GDe:""});return{functionCall:{name:c.name,args:c.args},...u?{thoughtSignature:u}:{}}})),[...a,...i]}function XV(e,t,r=!1,n){return e.reduce((i,a,s)=>{if(!ji(a))throw new Error("Unsupported message input");const o=KDe(a);if(o==="system"&&s!==0)throw new Error("System message should be the first one");const l=YDe(o),c=i.content[i.content.length];if(!i.mergeWithPreviousContent&&c&&c.role===l)throw new Error("Google Generative AI requires alternate messages between authors");const u=QDe(a,t,e.slice(0,s),n);if(i.mergeWithPreviousContent){const h=i.content[i.content.length-1];if(!h)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return h.parts.push(...u),{mergeWithPreviousContent:!1,content:i.content}}let f=l;(f==="function"||f==="system"&&!r)&&(f="user");const d={role:f,parts:u};return{mergeWithPreviousContent:o==="system"&&!r,content:[...i.content,d]}},{content:[],mergeWithPreviousContent:!1}).content}function eje(e,t){var f,d,h,m;if(!e.candidates||e.candidates.length===0||!e.candidates[0])return{generations:[],llmOutput:{filters:e.promptFeedback}};const[r]=e.candidates,{content:n,...i}=r,a=(f=n.parts)==null?void 0:f.reduce((p,y)=>("functionCall"in y&&y.functionCall&&p.push({...y,id:"id"in y.functionCall&&typeof y.functionCall.id=="string"?y.functionCall.id:Vse()}),p),[]);let s;const o=n==null?void 0:n.parts;Array.isArray(o)&&o.length===1&&"text"in o[0]&&o[0].text&&!o[0].thought?s=o[0].text:Array.isArray(o)&&o.length>0?s=o.map(p=>p.thought&&"text"in p&&p.text?{type:"thinking",thinking:p.text,...p.thoughtSignature?{signature:p.thoughtSignature}:{}}:"text"in p?{type:"text",text:p.text}:"inlineData"in p?{type:"inlineData",inlineData:p.inlineData}:"functionCall"in p?{type:"functionCall",functionCall:p.functionCall}:"functionResponse"in p?{type:"functionResponse",functionResponse:p.functionResponse}:"fileData"in p?{type:"fileData",fileData:p.fileData}:"executableCode"in p?{type:"executableCode",executableCode:p.executableCode}:"codeExecutionResult"in p?{type:"codeExecutionResult",codeExecutionResult:p.codeExecutionResult}:p):s=[];const l=a==null?void 0:a.reduce((p,y)=>("thoughtSignature"in y&&typeof y.thoughtSignature=="string"&&(p[y.id]=y.thoughtSignature),p),{});let c="";if(typeof s=="string")c=s;else if(Array.isArray(s)&&s.length>0){const p=s.find(y=>"text"in y);c=(p==null?void 0:p.text)??c}return{generations:[{text:c,message:new da({content:s??"",tool_calls:a==null?void 0:a.map(p=>({type:"tool_call",id:p.id,name:p.functionCall.name,args:p.functionCall.args})),additional_kwargs:{...i,[G$]:l},usage_metadata:t==null?void 0:t.usageMetadata}),generationInfo:i}],llmOutput:{tokenUsage:{promptTokens:(d=t==null?void 0:t.usageMetadata)==null?void 0:d.input_tokens,completionTokens:(h=t==null?void 0:t.usageMetadata)==null?void 0:h.output_tokens,totalTokens:(m=t==null?void 0:t.usageMetadata)==null?void 0:m.total_tokens}}}}function tje(e,t){var f;if(!e.candidates||e.candidates.length===0)return null;const[r]=e.candidates,{content:n,...i}=r,a=(f=n.parts)==null?void 0:f.reduce((d,h)=>("functionCall"in h&&h.functionCall&&d.push({...h,id:"id"in h.functionCall&&typeof h.functionCall.id=="string"?h.functionCall.id:Vse()}),d),[]);let s;const o=n==null?void 0:n.parts;Array.isArray(o)&&o.every(d=>"text"in d&&!d.thought)?s=o.map(d=>d.text).join(""):Array.isArray(o)?s=o.map(d=>d.thought&&"text"in d&&d.text?{type:"thinking",thinking:d.text,...d.thoughtSignature?{signature:d.thoughtSignature}:{}}:"text"in d?{type:"text",text:d.text}:"inlineData"in d?{type:"inlineData",inlineData:d.inlineData}:"functionCall"in d?{type:"functionCall",functionCall:d.functionCall}:"functionResponse"in d?{type:"functionResponse",functionResponse:d.functionResponse}:"fileData"in d?{type:"fileData",fileData:d.fileData}:"executableCode"in d?{type:"executableCode",executableCode:d.executableCode}:"codeExecutionResult"in d?{type:"codeExecutionResult",codeExecutionResult:d.codeExecutionResult}:d):s=[];let l="";if(s&&typeof s=="string")l=s;else if(Array.isArray(s)){const d=s.find(h=>"text"in h);l=(d==null?void 0:d.text)??""}const c=[];a&&c.push(...a.map(d=>({type:"tool_call_chunk",id:d.id,name:d.functionCall.name,args:JSON.stringify(d.functionCall.args)})));const u=a==null?void 0:a.reduce((d,h)=>("thoughtSignature"in h&&typeof h.thoughtSignature=="string"&&(d[h.id]=h.thoughtSignature),d),{});return new rm({text:l,message:new Dl({content:s||"",name:n?n.role:void 0,tool_call_chunks:c,additional_kwargs:{[G$]:u},response_metadata:{model_provider:"google-genai"},usage_metadata:t.usageMetadata}),generationInfo:i})}function rje(e){return e.every(t=>"functionDeclarations"in t&&Array.isArray(t.functionDeclarations))?e:[{functionDeclarations:e.map(t=>{if(d2(t)){const r=qR(t.schema);return r.type==="object"&&"properties"in r&&Object.keys(r.properties).length===0?{name:t.name,description:t.description}:(Kg(r,t.name),{name:t.name,description:t.description,parameters:r})}if(V$(t)){const r=k4e(t.function.parameters);return Kg(r,t.function.name),{name:t.function.name,description:t.function.description??"A function available to call.",parameters:r}}return t})}]}function ZV(e,t){const r={input_tokens:(e==null?void 0:e.promptTokenCount)??0,output_tokens:(e==null?void 0:e.candidatesTokenCount)??0,total_tokens:(e==null?void 0:e.totalTokenCount)??0};if(e!=null&&e.cachedContentTokenCount&&(r.input_token_details??(r.input_token_details={}),r.input_token_details.cache_read=e.cachedContentTokenCount),t==="gemini-3-pro-preview"){const n=Math.max(0,(e==null?void 0:e.promptTokenCount)??-2e5),i=Math.max(0,(e==null?void 0:e.cachedContentTokenCount)??-2e5);n&&(r.input_token_details={...r.input_token_details,over_200k:n}),i&&(r.input_token_details={...r.input_token_details,cache_read_over_200k:i})}return r}var nm=class extends Lr{constructor(t){super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"func");t&&(this.func=t.func)}static lc_name(){return"RunnablePassthrough"}async invoke(t,r){const n=zr(r);return this.func&&await this.func(t,n),this._callWithConfig(i=>Promise.resolve(i),t,n)}async*transform(t,r){const n=zr(r);let i,a=!0;for await(const s of this._transformStreamWithConfig(t,o=>o,n))if(yield s,a)if(i===void 0)i=s;else try{i=ep(i,s)}catch{i=void 0,a=!1}this.func&&i!==void 0&&await this.func(i,n)}static assign(t){return new L$(new s1({steps:t}))}},nje=class extends Lr{constructor(t){super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"runnables");this.runnables=t.runnables}static lc_name(){return"RouterRunnable"}async invoke(t,r){const{key:n,input:i}=t,a=this.runnables[n];if(a===void 0)throw new Error(`No runnable associated with key "${n}".`);return a.invoke(i,zr(r))}async batch(t,r,n){var d;const i=t.map(h=>h.key),a=t.map(h=>h.input);if(i.find(h=>this.runnables[h]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");const o=i.map(h=>this.runnables[h]),l=this._getOptionsList(r??{},t.length),c=((d=l[0])==null?void 0:d.maxConcurrency)??(n==null?void 0:n.maxConcurrency),u=c&&c>0?c:t.length,f=[];for(let h=0;h<a.length;h+=u){const m=a.slice(h,h+u).map((y,g)=>o[g].invoke(y,l[g])),p=await Promise.all(m);f.push(p)}return f.flat()}async stream(t,r){const{key:n,input:i}=t,a=this.runnables[n];if(a===void 0)throw new Error(`No runnable associated with key "${n}".`);return a.stream(i,r)}},ije=class extends Lr{constructor(t){super(t);L(this,"lc_namespace",["langchain_core","runnables"]);L(this,"lc_serializable",!0);L(this,"default");L(this,"branches");this.branches=t.branches,this.default=t.default}static lc_name(){return"RunnableBranch"}static from(t){if(t.length<1)throw new Error("RunnableBranch requires at least one branch");const n=t.slice(0,-1).map(([a,s])=>[$a(a),$a(s)]),i=$a(t[t.length-1]);return new this({branches:n,default:i})}async _invoke(t,r,n){let i;for(let a=0;a<this.branches.length;a+=1){const[s,o]=this.branches[a];if(await s.invoke(t,Qr(r,{callbacks:n==null?void 0:n.getChild(`condition:${a+1}`)}))){i=await o.invoke(t,Qr(r,{callbacks:n==null?void 0:n.getChild(`branch:${a+1}`)}));break}}return i||(i=await this.default.invoke(t,Qr(r,{callbacks:n==null?void 0:n.getChild("branch:default")}))),i}async invoke(t,r={}){return this._callWithConfig(this._invoke,t,r)}async*_streamIterator(t,r){const n=await lo(r),i=await(n==null?void 0:n.handleChainStart(this.toJSON(),aa(t,"input"),r==null?void 0:r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));let a,s=!0,o;try{for(let l=0;l<this.branches.length;l+=1){const[c,u]=this.branches[l];if(await c.invoke(t,Qr(r,{callbacks:i==null?void 0:i.getChild(`condition:${l+1}`)}))){o=await u.stream(t,Qr(r,{callbacks:i==null?void 0:i.getChild(`branch:${l+1}`)}));for await(const d of o)if(yield d,s)if(a===void 0)a=d;else try{a=ep(a,d)}catch{a=void 0,s=!1}break}}if(o===void 0){o=await this.default.stream(t,Qr(r,{callbacks:i==null?void 0:i.getChild("branch:default")}));for await(const l of o)if(yield l,s)if(a===void 0)a=l;else try{a=ep(a,l)}catch{a=void 0,s=!1}}}catch(l){throw await(i==null?void 0:i.handleChainError(l)),l}await(i==null?void 0:i.handleChainEnd(a??{}))}},aje=class extends tp{constructor(t){let r=xd.from((s,o)=>this._enterHistory(s,o??{})).withConfig({runName:"loadHistory"});const n=t.historyMessagesKey??t.inputMessagesKey;n&&(r=nm.assign({[n]:r}).withConfig({runName:"insertHistory"}));const i=r.pipe(t.runnable.withListeners({onEnd:(s,o)=>this._exitHistory(s,o??{})})).withConfig({runName:"RunnableWithMessageHistory"}),a=t.config??{};super({...t,config:a,bound:i});L(this,"runnable");L(this,"inputMessagesKey");L(this,"outputMessagesKey");L(this,"historyMessagesKey");L(this,"getMessageHistory");this.runnable=t.runnable,this.getMessageHistory=t.getMessageHistory,this.inputMessagesKey=t.inputMessagesKey,this.outputMessagesKey=t.outputMessagesKey,this.historyMessagesKey=t.historyMessagesKey}_getInputMessages(t){let r;if(typeof t=="object"&&!Array.isArray(t)&&!ji(t)){let n;this.inputMessagesKey?n=this.inputMessagesKey:Object.keys(t).length===1?n=Object.keys(t)[0]:n="input",Array.isArray(t[n])&&Array.isArray(t[n][0])?r=t[n][0]:r=t[n]}else r=t;if(typeof r=="string")return[new ms(r)];if(Array.isArray(r))return r;if(ji(r))return[r];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(r,null,2)}`)}_getOutputMessages(t){let r;if(!Array.isArray(t)&&!ji(t)&&typeof t!="string"){let n;this.outputMessagesKey!==void 0?n=this.outputMessagesKey:Object.keys(t).length===1?n=Object.keys(t)[0]:n="output",t.generations!==void 0?r=t.generations[0][0].message:r=t[n]}else r=t;if(typeof r=="string")return[new da(r)];if(Array.isArray(r))return r;if(ji(r))return[r];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(r,null,2)}`)}async _enterHistory(t,r){var a;const i=await((a=r==null?void 0:r.configurable)==null?void 0:a.messageHistory).getMessages();return this.historyMessagesKey===void 0?i.concat(this._getInputMessages(t)):i}async _exitHistory(t,r){var l;const n=(l=r.configurable)==null?void 0:l.messageHistory;let i;Array.isArray(t.inputs)&&Array.isArray(t.inputs[0])?i=t.inputs[0]:i=t.inputs;let a=this._getInputMessages(i);if(this.historyMessagesKey===void 0){const c=await n.getMessages();a=a.slice(c.length)}const s=t.outputs;if(!s)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(t,null,2)}`);const o=this._getOutputMessages(s);await n.addMessages([...a,...o])}async _mergeConfig(...t){const r=await super._mergeConfig(...t);if(!r.configurable||!r.configurable.sessionId){const i={[this.inputMessagesKey??"input"]:"foo"},a={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(i)}, ${JSON.stringify(a)})`)}const{sessionId:n}=r.configurable;return r.configurable.messageHistory=await this.getMessageHistory(n),r}},Wse={};Gt(Wse,{RouterRunnable:()=>nje,Runnable:()=>Lr,RunnableAssign:()=>L$,RunnableBinding:()=>tp,RunnableBranch:()=>ije,RunnableEach:()=>aDe,RunnableLambda:()=>xd,RunnableMap:()=>s1,RunnableParallel:()=>lDe,RunnablePassthrough:()=>nm,RunnablePick:()=>Sse,RunnableRetry:()=>R$,RunnableSequence:()=>sd,RunnableToolLike:()=>gL,RunnableWithFallbacks:()=>_se,RunnableWithMessageHistory:()=>aje,_coerceToRunnable:()=>$a,ensureConfig:()=>zr,getCallbackManagerForConfig:()=>lo,mergeConfigs:()=>Al,patchConfig:()=>Qr,pickRunnableConfigKeys:()=>id,raceWithSignal:()=>ad});var h2=class extends Lr{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(r,n)=>this.parseResult([{text:r}],n==null?void 0:n.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(r,n)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],n==null?void 0:n.callbacks),e,{...t,runType:"parser"})}},p2=class extends h2{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}},Lu=class extends Error{constructor(t,r,n,i=!1){super(t);L(this,"llmOutput");L(this,"observation");L(this,"sendToLLM");if(this.llmOutput=r,this.observation=n,this.sendToLLM=i,i&&(n===void 0||r===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");o2(this,"OUTPUT_PARSING_FAILURE")}},m2=class extends p2{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}},g2=class extends m2{constructor(t){super(t);L(this,"diff",!1);this.diff=(t==null?void 0:t.diff)??this.diff}async*_transform(t){let r,n;for await(const i of t){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let a;if(Tb(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new rm({message:i,text:i.content})}else if(ji(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");a=new rm({message:ZT(i),text:i.content})}else a=new lv({text:i});n===void 0?n=a:n=n.concat(a);const s=await this.parsePartialResult([n]);s!=null&&!N0(s,r)&&(this.diff?yield this._diff(r,s):yield s,r=s)}}getFormatInstructions(){return""}},sje=class extends m2{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers","bytes"]);L(this,"lc_serializable",!0);L(this,"textEncoder",new TextEncoder)}static lc_name(){return"BytesOutputParser"}parse(t){return Promise.resolve(this.textEncoder.encode(t))}getFormatInstructions(){return""}},y2=class extends m2{constructor(){super(...arguments);L(this,"re")}async*_transform(t){let r="";for await(const n of t)if(typeof n=="string"?r+=n:r+=n.content,this.re){const i=[...r.matchAll(this.re)];if(i.length>1){let a=0;for(const s of i.slice(0,-1))yield[s[1]],a+=(s.index??0)+s[0].length;r=r.slice(a)}}else{const i=await this.parse(r);if(i.length>1){for(const a of i.slice(0,-1))yield[a];r=i[i.length-1]}}for(const n of await this.parse(r))yield[n]}},oje=class extends y2{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers","list"]);L(this,"lc_serializable",!0)}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(t){try{return t.trim().split(",").map(r=>r.trim())}catch{throw new Lu(`Could not parse output: ${t}`,t)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},lje=class extends y2{constructor({length:t,separator:r}){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers","list"]);L(this,"length");L(this,"separator");this.length=t,this.separator=r||","}async parse(t){try{const r=t.trim().split(this.separator).map(n=>n.trim());if(this.length!==void 0&&r.length!==this.length)throw new Lu(`Incorrect number of items. Expected ${this.length}, got ${r.length}.`);return r}catch(r){throw Object.getPrototypeOf(r)===Lu.prototype?r:new Lu(`Could not parse output: ${t}`)}}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},cje=class extends y2{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers","list"]);L(this,"lc_serializable",!0);L(this,"re",/\d+\.\s([^\n]+)/g)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(t){return[...t.matchAll(this.re)??[]].map(r=>r[1])}},uje=class extends y2{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers","list"]);L(this,"lc_serializable",!0);L(this,"re",/^\s*[-*]\s([^\n]+)$/gm)}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}async parse(t){return[...t.matchAll(this.re)??[]].map(r=>r[1])}},fje=class extends m2{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers","string"]);L(this,"lc_serializable",!0)}static lc_name(){return"StrOutputParser"}parse(t){return Promise.resolve(t)}getFormatInstructions(){return""}_textContentToString(t){return t.text}_imageUrlContentToString(t){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentToString(t){switch(t.type){case"text":case"text_delta":if("text"in t)return this._textContentToString(t);break;case"image_url":if("image_url"in t)return this._imageUrlContentToString(t);break;default:throw new Error(`Cannot coerce "${t.type}" message part into a string.`)}throw new Error(`Invalid content type: ${t.type}`)}_baseMessageContentToString(t){return t.reduce((r,n)=>r+this._messageContentToString(n),"")}},Hse=class extends p2{constructor(t){super(t);L(this,"lc_namespace",["langchain","output_parsers","structured"]);this.schema=t}static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}static fromZodSchema(t){return new this(t)}static fromNamesAndDescriptions(t){const r=hp(Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Tm().describe(i)])));return new this(r)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Ps(this.schema))}
\`\`\`
`}async parse(t){var r,n;try{const i=t.trim(),s=(((r=i.match(/^```(?:json)?\s*([\s\S]*?)```/))==null?void 0:r[1])||((n=i.match(/```json\s*([\s\S]*?)```/))==null?void 0:n[1])||i).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(o,l)=>`"${l.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await RC(this.schema,JSON.parse(s))}catch(i){throw new Lu(`Failed to parse. Text: "${t}". Error: ${i}`,t)}}},Gse=class extends Hse{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){const t=(e==null?void 0:e.interpolationDepth)??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(Ps(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){const r=e;if("type"in r){let n=!1,i;if(Array.isArray(r.type)){const o=r.type.findIndex(l=>l==="null");o!==-1&&(n=!0,r.type.splice(o,1)),i=r.type.join(" | ")}else i=r.type;if(r.type==="object"&&r.properties){const o=r.description?` // ${r.description}`:"";return`{
${Object.entries(r.properties).map(([c,u])=>{var d;const f=(d=r.required)!=null&&d.includes(c)?"":" (optional)";return`${" ".repeat(t)}"${c}": ${this._schemaToInstruction(u,t+2)}${f}`}).join(`
`)}
${" ".repeat(t-2)}}${o}`}if(r.type==="array"&&r.items){const o=r.description?` // ${r.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(r.items,t+2)}
${" ".repeat(t-2)}] ${o}`}const a=n?" (nullable)":"",s=r.description?` // ${r.description}`:"";return`${i}${s}${a}`}if("anyOf"in r)return r.anyOf.map(n=>this._schemaToInstruction(n,t)).join(`
${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=hp(Object.fromEntries(Object.entries(e).map(([r,n])=>[r,Tm().describe(n)])));return new this(t)}},dje=class extends p2{constructor({inputSchema:t}){super(...arguments);L(this,"structuredInputParser");this.structuredInputParser=new Gse(t)}async parse(t){let r;try{r=await this.structuredInputParser.parse(t)}catch(n){throw new Lu(`Failed to parse. Text: "${t}". Error: ${n}`,t)}return this.outputProcessor(r)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}},qse={};Gt(qse,{applyPatch:()=>ov,compare:()=>KC});var Kse=class extends g2{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","output_parsers"]);L(this,"lc_serializable",!0)}static lc_name(){return"JsonOutputParser"}_concatOutputChunks(t,r){return this.diff?super._concatOutputChunks(t,r):r}_diff(t,r){if(r)return t?KC(t,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(t){return ZR(t[0].text)}async parse(t){return ZR(t,JSON.parse)}getFormatInstructions(){return""}_baseMessageToString(t){return t.text}};const hje=function(){const e={};e.parser=function(F,D){return new r(F,D)},e.SAXParser=r,e.SAXStream=c,e.createStream=l,e.MAX_BUFFER_LENGTH=64*1024;const t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(F,D){if(!(this instanceof r))return new r(F,D);var re=this;i(re),re.q=re.c="",re.bufferCheckPosition=e.MAX_BUFFER_LENGTH,re.opt=D||{},re.opt.lowercase=re.opt.lowercase||re.opt.lowercasetags,re.looseCase=re.opt.lowercase?"toLowerCase":"toUpperCase",re.tags=[],re.closed=re.closedRoot=re.sawRoot=!1,re.tag=re.error=null,re.strict=!!F,re.noscript=!!(F||re.opt.noscript),re.state=A.BEGIN,re.strictEntities=re.opt.strictEntities,re.ENTITIES=re.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),re.attribList=[],re.opt.xmlns&&(re.ns=Object.create(m)),re.trackPosition=re.opt.position!==!1,re.trackPosition&&(re.position=re.line=re.column=0),M(re,"onready")}Object.create||(Object.create=function(F){function D(){}D.prototype=F;var re=new D;return re}),Object.keys||(Object.keys=function(F){var D=[];for(var re in F)F.hasOwnProperty(re)&&D.push(re);return D});function n(F){for(var D=Math.max(e.MAX_BUFFER_LENGTH,10),re=0,K=0,le=t.length;K<le;K++){var xe=F[t[K]].length;if(xe>D)switch(t[K]){case"textNode":N(F);break;case"cdata":P(F,"oncdata",F.cdata),F.cdata="";break;case"script":P(F,"onscript",F.script),F.script="";break;default:B(F,"Max buffer length exceeded: "+t[K])}re=Math.max(re,xe)}var X=e.MAX_BUFFER_LENGTH-re;F.bufferCheckPosition=X+F.position}function i(F){for(var D=0,re=t.length;D<re;D++)F[t[D]]=""}function a(F){N(F),F.cdata!==""&&(P(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(P(F,"onscript",F.script),F.script="")}r.prototype={end:function(){G(this)},write:q,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var s=ReadableStream;s||(s=function(){});var o=e.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function l(F,D){return new c(F,D)}function c(F,D){if(!(this instanceof c))return new c(F,D);s.apply(this),this._parser=new r(F,D),this.writable=!0,this.readable=!0;var re=this;this._parser.onend=function(){re.emit("end")},this._parser.onerror=function(K){re.emit("error",K),re._parser.error=null},this._decoder=null,o.forEach(function(K){Object.defineProperty(re,"on"+K,{get:function(){return re._parser["on"+K]},set:function(le){if(!le)return re.removeAllListeners(K),re._parser["on"+K]=le,le;re.on(K,le)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(F){return this._parser.write(F.toString()),this.emit("data",F),!0},c.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},c.prototype.on=function(F,D){var re=this;return!re._parser["on"+F]&&o.indexOf(F)!==-1&&(re._parser["on"+F]=function(){var K=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,F),re.emit.apply(re,K)}),s.prototype.on.call(re,F,D)};var u="[CDATA[",f="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",m={xml:d,xmlns:h},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(F){return F===" "||F===`
`||F==="\r"||F==="	"}function x(F){return F==='"'||F==="'"}function b(F){return F===">"||v(F)}function S(F,D){return F.test(D)}function T(F,D){return!S(F,D)}var A=0;e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(F){var D=e.ENTITIES[F],re=typeof D=="number"?String.fromCharCode(D):D;e.ENTITIES[F]=re});for(var O in e.STATE)e.STATE[e.STATE[O]]=O;A=e.STATE;function M(F,D,re){F[D]&&F[D](re)}function P(F,D,re){F.textNode&&N(F),M(F,D,re)}function N(F){F.textNode=V(F.opt,F.textNode),F.textNode&&M(F,"ontext",F.textNode),F.textNode=""}function V(F,D){return F.trim&&(D=D.trim()),F.normalize&&(D=D.replace(/\s+/g," ")),D}function B(F,D){return N(F),F.trackPosition&&(D+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),D=new Error(D),F.error=D,M(F,"onerror",D),F}function G(F){return F.sawRoot&&!F.closedRoot&&Z(F,"Unclosed root tag"),F.state!==A.BEGIN&&F.state!==A.BEGIN_WHITESPACE&&F.state!==A.TEXT&&B(F,"Unexpected end"),N(F),F.c="",F.closed=!0,M(F,"onend"),r.call(F,F.strict,F.opt),F}function Z(F,D){if(typeof F!="object"||!(F instanceof r))throw new Error("bad call to strictFail");F.strict&&B(F,D)}function J(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var D=F.tags[F.tags.length-1]||F,re=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(re.ns=D.ns),F.attribList.length=0,P(F,"onopentagstart",re)}function Y(F,D){var re=F.indexOf(":"),K=re<0?["",F]:F.split(":"),le=K[0],xe=K[1];return D&&F==="xmlns"&&(le="xmlns",xe=""),{prefix:le,local:xe}}function U(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var D=Y(F.attribName,!0),re=D.prefix,K=D.local;if(re==="xmlns")if(K==="xml"&&F.attribValue!==d)Z(F,"xml: prefix must be bound to "+d+`
Actual: `+F.attribValue);else if(K==="xmlns"&&F.attribValue!==h)Z(F,"xmlns: prefix must be bound to "+h+`
Actual: `+F.attribValue);else{var le=F.tag,xe=F.tags[F.tags.length-1]||F;le.ns===xe.ns&&(le.ns=Object.create(xe.ns)),le.ns[K]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,P(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function se(F,D){if(F.opt.xmlns){var re=F.tag,K=Y(F.tagName);re.prefix=K.prefix,re.local=K.local,re.uri=re.ns[K.prefix]||"",re.prefix&&!re.uri&&(Z(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),re.uri=K.prefix);var le=F.tags[F.tags.length-1]||F;re.ns&&le.ns!==re.ns&&Object.keys(re.ns).forEach(function(nt){P(F,"onopennamespace",{prefix:nt,uri:re.ns[nt]})});for(var xe=0,X=F.attribList.length;xe<X;xe++){var Ie=F.attribList[xe],Re=Ie[0],ie=Ie[1],Te=Y(Re,!0),Me=Te.prefix,tt=Te.local,$e=Me===""?"":re.ns[Me]||"",De={name:Re,value:ie,prefix:Me,local:tt,uri:$e};Me&&Me!=="xmlns"&&!$e&&(Z(F,"Unbound namespace prefix: "+JSON.stringify(Me)),De.uri=Me),F.tag.attributes[Re]=De,P(F,"onattribute",De)}F.attribList.length=0}F.tag.isSelfClosing=!!D,F.sawRoot=!0,F.tags.push(F.tag),P(F,"onopentag",F.tag),D||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=A.SCRIPT:F.state=A.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function ue(F){if(!F.tagName){Z(F,"Weird empty close tag."),F.textNode+="</>",F.state=A.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=A.SCRIPT;return}P(F,"onscript",F.script),F.script=""}var D=F.tags.length,re=F.tagName;F.strict||(re=re[F.looseCase]());for(var K=re;D--;){var le=F.tags[D];if(le.name!==K)Z(F,"Unexpected close tag");else break}if(D<0){Z(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=A.TEXT;return}F.tagName=re;for(var xe=F.tags.length;xe-- >D;){var X=F.tag=F.tags.pop();F.tagName=F.tag.name,P(F,"onclosetag",F.tagName);var Ie={};for(var Re in X.ns)Ie[Re]=X.ns[Re];var ie=F.tags[F.tags.length-1]||F;F.opt.xmlns&&X.ns!==ie.ns&&Object.keys(X.ns).forEach(function(Te){var Me=X.ns[Te];P(F,"onclosenamespace",{prefix:Te,uri:Me})})}D===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=A.TEXT}function I(F){var D=F.entity,re=D.toLowerCase(),K,le="";return F.ENTITIES[D]?F.ENTITIES[D]:F.ENTITIES[re]?F.ENTITIES[re]:(D=re,D.charAt(0)==="#"&&(D.charAt(1)==="x"?(D=D.slice(2),K=parseInt(D,16),le=K.toString(16)):(D=D.slice(1),K=parseInt(D,10),le=K.toString(10))),D=D.replace(/^0+/,""),isNaN(K)||le.toLowerCase()!==D?(Z(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(K))}function z(F,D){D==="<"?(F.state=A.OPEN_WAKA,F.startTagPosition=F.position):v(D)||(Z(F,"Non-whitespace before first tag."),F.textNode=D,F.state=A.TEXT)}function H(F,D){var re="";return D<F.length&&(re=F.charAt(D)),re}function q(F){var D=this;if(this.error)throw this.error;if(D.closed)return B(D,"Cannot write after close. Assign an onready handler.");if(F===null)return G(D);typeof F=="object"&&(F=F.toString());for(var re=0,K="";K=H(F,re++),D.c=K,!!K;)switch(D.trackPosition&&(D.position++,K===`
`?(D.line++,D.column=0):D.column++),D.state){case A.BEGIN:if(D.state=A.BEGIN_WHITESPACE,K==="\uFEFF")continue;z(D,K);continue;case A.BEGIN_WHITESPACE:z(D,K);continue;case A.TEXT:if(D.sawRoot&&!D.closedRoot){for(var le=re-1;K&&K!=="<"&&K!=="&";)K=H(F,re++),K&&D.trackPosition&&(D.position++,K===`
`?(D.line++,D.column=0):D.column++);D.textNode+=F.substring(le,re-1)}K==="<"&&!(D.sawRoot&&D.closedRoot&&!D.strict)?(D.state=A.OPEN_WAKA,D.startTagPosition=D.position):(!v(K)&&(!D.sawRoot||D.closedRoot)&&Z(D,"Text data outside of root node."),K==="&"?D.state=A.TEXT_ENTITY:D.textNode+=K);continue;case A.SCRIPT:K==="<"?D.state=A.SCRIPT_ENDING:D.script+=K;continue;case A.SCRIPT_ENDING:K==="/"?D.state=A.CLOSE_TAG:(D.script+="<"+K,D.state=A.SCRIPT);continue;case A.OPEN_WAKA:if(K==="!")D.state=A.SGML_DECL,D.sgmlDecl="";else if(!v(K))if(S(p,K))D.state=A.OPEN_TAG,D.tagName=K;else if(K==="/")D.state=A.CLOSE_TAG,D.tagName="";else if(K==="?")D.state=A.PROC_INST,D.procInstName=D.procInstBody="";else{if(Z(D,"Unencoded <"),D.startTagPosition+1<D.position){var xe=D.position-D.startTagPosition;K=new Array(xe).join(" ")+K}D.textNode+="<"+K,D.state=A.TEXT}continue;case A.SGML_DECL:(D.sgmlDecl+K).toUpperCase()===u?(P(D,"onopencdata"),D.state=A.CDATA,D.sgmlDecl="",D.cdata=""):D.sgmlDecl+K==="--"?(D.state=A.COMMENT,D.comment="",D.sgmlDecl=""):(D.sgmlDecl+K).toUpperCase()===f?(D.state=A.DOCTYPE,(D.doctype||D.sawRoot)&&Z(D,"Inappropriately located doctype declaration"),D.doctype="",D.sgmlDecl=""):K===">"?(P(D,"onsgmldeclaration",D.sgmlDecl),D.sgmlDecl="",D.state=A.TEXT):(x(K)&&(D.state=A.SGML_DECL_QUOTED),D.sgmlDecl+=K);continue;case A.SGML_DECL_QUOTED:K===D.q&&(D.state=A.SGML_DECL,D.q=""),D.sgmlDecl+=K;continue;case A.DOCTYPE:K===">"?(D.state=A.TEXT,P(D,"ondoctype",D.doctype),D.doctype=!0):(D.doctype+=K,K==="["?D.state=A.DOCTYPE_DTD:x(K)&&(D.state=A.DOCTYPE_QUOTED,D.q=K));continue;case A.DOCTYPE_QUOTED:D.doctype+=K,K===D.q&&(D.q="",D.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:D.doctype+=K,K==="]"?D.state=A.DOCTYPE:x(K)&&(D.state=A.DOCTYPE_DTD_QUOTED,D.q=K);continue;case A.DOCTYPE_DTD_QUOTED:D.doctype+=K,K===D.q&&(D.state=A.DOCTYPE_DTD,D.q="");continue;case A.COMMENT:K==="-"?D.state=A.COMMENT_ENDING:D.comment+=K;continue;case A.COMMENT_ENDING:K==="-"?(D.state=A.COMMENT_ENDED,D.comment=V(D.opt,D.comment),D.comment&&P(D,"oncomment",D.comment),D.comment=""):(D.comment+="-"+K,D.state=A.COMMENT);continue;case A.COMMENT_ENDED:K!==">"?(Z(D,"Malformed comment"),D.comment+="--"+K,D.state=A.COMMENT):D.state=A.TEXT;continue;case A.CDATA:K==="]"?D.state=A.CDATA_ENDING:D.cdata+=K;continue;case A.CDATA_ENDING:K==="]"?D.state=A.CDATA_ENDING_2:(D.cdata+="]"+K,D.state=A.CDATA);continue;case A.CDATA_ENDING_2:K===">"?(D.cdata&&P(D,"oncdata",D.cdata),P(D,"onclosecdata"),D.cdata="",D.state=A.TEXT):K==="]"?D.cdata+="]":(D.cdata+="]]"+K,D.state=A.CDATA);continue;case A.PROC_INST:K==="?"?D.state=A.PROC_INST_ENDING:v(K)?D.state=A.PROC_INST_BODY:D.procInstName+=K;continue;case A.PROC_INST_BODY:if(!D.procInstBody&&v(K))continue;K==="?"?D.state=A.PROC_INST_ENDING:D.procInstBody+=K;continue;case A.PROC_INST_ENDING:K===">"?(P(D,"onprocessinginstruction",{name:D.procInstName,body:D.procInstBody}),D.procInstName=D.procInstBody="",D.state=A.TEXT):(D.procInstBody+="?"+K,D.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:S(y,K)?D.tagName+=K:(J(D),K===">"?se(D):K==="/"?D.state=A.OPEN_TAG_SLASH:(v(K)||Z(D,"Invalid character in tag name"),D.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:K===">"?(se(D,!0),ue(D)):(Z(D,"Forward-slash in opening tag not followed by >"),D.state=A.ATTRIB);continue;case A.ATTRIB:if(v(K))continue;K===">"?se(D):K==="/"?D.state=A.OPEN_TAG_SLASH:S(p,K)?(D.attribName=K,D.attribValue="",D.state=A.ATTRIB_NAME):Z(D,"Invalid attribute name");continue;case A.ATTRIB_NAME:K==="="?D.state=A.ATTRIB_VALUE:K===">"?(Z(D,"Attribute without value"),D.attribValue=D.attribName,U(D),se(D)):v(K)?D.state=A.ATTRIB_NAME_SAW_WHITE:S(y,K)?D.attribName+=K:Z(D,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if(K==="=")D.state=A.ATTRIB_VALUE;else{if(v(K))continue;Z(D,"Attribute without value"),D.tag.attributes[D.attribName]="",D.attribValue="",P(D,"onattribute",{name:D.attribName,value:""}),D.attribName="",K===">"?se(D):S(p,K)?(D.attribName=K,D.state=A.ATTRIB_NAME):(Z(D,"Invalid attribute name"),D.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(v(K))continue;x(K)?(D.q=K,D.state=A.ATTRIB_VALUE_QUOTED):(Z(D,"Unquoted attribute value"),D.state=A.ATTRIB_VALUE_UNQUOTED,D.attribValue=K);continue;case A.ATTRIB_VALUE_QUOTED:if(K!==D.q){K==="&"?D.state=A.ATTRIB_VALUE_ENTITY_Q:D.attribValue+=K;continue}U(D),D.q="",D.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:v(K)?D.state=A.ATTRIB:K===">"?se(D):K==="/"?D.state=A.OPEN_TAG_SLASH:S(p,K)?(Z(D,"No whitespace between attributes"),D.attribName=K,D.attribValue="",D.state=A.ATTRIB_NAME):Z(D,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(!b(K)){K==="&"?D.state=A.ATTRIB_VALUE_ENTITY_U:D.attribValue+=K;continue}U(D),K===">"?se(D):D.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(D.tagName)K===">"?ue(D):S(y,K)?D.tagName+=K:D.script?(D.script+="</"+D.tagName,D.tagName="",D.state=A.SCRIPT):(v(K)||Z(D,"Invalid tagname in closing tag"),D.state=A.CLOSE_TAG_SAW_WHITE);else{if(v(K))continue;T(p,K)?D.script?(D.script+="</"+K,D.state=A.SCRIPT):Z(D,"Invalid tagname in closing tag."):D.tagName=K}continue;case A.CLOSE_TAG_SAW_WHITE:if(v(K))continue;K===">"?ue(D):Z(D,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var X,Ie;switch(D.state){case A.TEXT_ENTITY:X=A.TEXT,Ie="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:X=A.ATTRIB_VALUE_QUOTED,Ie="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:X=A.ATTRIB_VALUE_UNQUOTED,Ie="attribValue";break}if(K===";")if(D.opt.unparsedEntities){var Re=I(D);D.entity="",D.state=X,D.write(Re)}else D[Ie]+=I(D),D.entity="",D.state=X;else S(D.entity.length?w:g,K)?D.entity+=K:(Z(D,"Invalid character in entity name"),D[Ie]+="&"+D.entity+K,D.entity="",D.state=X);continue;default:throw new Error(D,"Unknown state: "+D.state)}return D.position>=D.bufferCheckPosition&&n(D),D}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */return String.fromCodePoint||function(){var F=String.fromCharCode,D=Math.floor,re=function(){var K=16384,le=[],xe,X,Ie=-1,Re=arguments.length;if(!Re)return"";for(var ie="";++Ie<Re;){var Te=Number(arguments[Ie]);if(!isFinite(Te)||Te<0||Te>1114111||D(Te)!==Te)throw RangeError("Invalid code point: "+Te);Te<=65535?le.push(Te):(Te-=65536,xe=(Te>>10)+55296,X=Te%1024+56320,le.push(xe,X)),(Ie+1===Re||le.length>K)&&(ie+=F.apply(null,le),le.length=0)}return ie};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:re,configurable:!0,writable:!0}):String.fromCodePoint=re}(),e},pje=hje(),vL=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``;var mje=class extends g2{constructor(t){super(t);L(this,"tags");L(this,"lc_namespace",["langchain_core","output_parsers"]);L(this,"lc_serializable",!0);this.tags=t==null?void 0:t.tags}static lc_name(){return"XMLOutputParser"}_diff(t,r){if(r)return t?KC(t,r):[{op:"replace",path:"",value:r}]}async parsePartialResult(t){return wL(t[0].text)}async parse(t){return wL(t)}getFormatInstructions(){var r;return!!(this.tags&&this.tags.length>0)?vL.replace("{tags}",((r=this.tags)==null?void 0:r.join(", "))??""):vL}};const gje=e=>e.split(`
`).map(t=>t.replace(/^\s+/,"")).join(`
`).trim(),Yse=e=>{if(Object.keys(e).length===0)return{};const t={};return e.children.length>0?(t[e.name]=e.children.map(Yse),t):(t[e.name]=e.text??void 0,t)};function wL(e){const t=gje(e),r=pje.parser(!0);let n={};const i=[];r.onopentag=o=>{const l={name:o.name,attributes:o.attributes,children:[],text:"",isSelfClosing:o.isSelfClosing};i.length>0?i[i.length-1].children.push(l):n=l,o.isSelfClosing||i.push(l)},r.onclosetag=()=>{if(i.length>0){const o=i.pop();i.length===0&&o&&(n=o)}},r.ontext=o=>{if(i.length>0){const l=i[i.length-1];l.text+=o}},r.onattribute=o=>{if(i.length>0){const l=i[i.length-1];l.attributes[o.name]=o.value}};const a=/```(xml)?(.*)```/s.exec(t),s=a?a[2]:t;return r.write(s).close(),n&&n.name==="?xml"&&(n=n.children[0]),Yse(n)}var Xse={};Gt(Xse,{AsymmetricStructuredOutputParser:()=>dje,BaseCumulativeTransformOutputParser:()=>g2,BaseLLMOutputParser:()=>h2,BaseOutputParser:()=>p2,BaseTransformOutputParser:()=>m2,BytesOutputParser:()=>sje,CommaSeparatedListOutputParser:()=>oje,CustomListOutputParser:()=>lje,JsonMarkdownStructuredOutputParser:()=>Gse,JsonOutputParser:()=>Kse,ListOutputParser:()=>y2,MarkdownListOutputParser:()=>uje,NumberedListOutputParser:()=>cje,OutputParserException:()=>Lu,StringOutputParser:()=>fje,StructuredOutputParser:()=>Hse,XMLOutputParser:()=>mje,XML_FORMAT_INSTRUCTIONS:()=>vL,parseJsonMarkdown:()=>ZR,parsePartialJson:()=>iv,parseXMLMarkdown:()=>wL});var JV=class extends h2{constructor(t){super(t);L(this,"lc_namespace",["langchain","google_genai","output_parsers"]);L(this,"returnId",!1);L(this,"keyName");L(this,"returnSingle",!1);L(this,"zodSchema");this.keyName=t.keyName,this.returnSingle=t.returnSingle??this.returnSingle,this.zodSchema=t.zodSchema}static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}async _validateResult(t){if(this.zodSchema===void 0)return t;const r=await n$(this.zodSchema,t);if(r.success)return r.data;throw new Lu(`Failed to parse. Text: "${JSON.stringify(t,null,2)}". Error: ${JSON.stringify(r.error.issues)}`,JSON.stringify(t,null,2))}async parseResult(t){const r=t.flatMap(a=>{const{message:s}=a;return!("tool_calls"in s)||!Array.isArray(s.tool_calls)?[]:s.tool_calls});if(r[0]===void 0)throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[n]=r;return await this._validateResult(n.args)}},QV;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(QV||(QV={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eW;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(eW||(eW={}));var tW;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(tW||(tW={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=["user","model","function","system"];var nW;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(nW||(nW={}));var iW;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(iW||(iW={}));var aW;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(aW||(aW={}));var sW;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(sW||(sW={}));var vx;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(vx||(vx={}));var oW;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(oW||(oW={}));var Jg;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Jg||(Jg={}));var lW;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(lW||(lW={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class cg extends ss{constructor(t,r){super(t),this.response=r}}class Zse extends ss{constructor(t,r,n,i){super(t),this.status=r,this.statusText=n,this.errorDetails=i}}class jh extends ss{}class Jse extends ss{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yje="https://generativelanguage.googleapis.com",vje="v1beta",wje="0.24.1",xje="genai-js";var im;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(im||(im={}));class bje{constructor(t,r,n,i,a){this.model=t,this.task=r,this.apiKey=n,this.stream=i,this.requestOptions=a}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||vje;let a=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||yje}/${n}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function _je(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${xje}/${wje}`),t.join(" ")}async function Sje(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",_je(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new jh(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,a]of n.entries()){if(i==="x-goog-api-key")throw new jh(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new jh(`Header name ${i} can only be set using the apiClient field`);r.append(i,a)}}return r}async function Eje(e,t,r,n,i,a){const s=new bje(e,t,r,n,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},Cje(a)),{method:"POST",headers:await Sje(s),body:i})}}async function v2(e,t,r,n,i,a={},s=fetch){const{url:o,fetchOptions:l}=await Eje(e,t,r,n,i,a);return Aje(o,l,s)}async function Aje(e,t,r=fetch){let n;try{n=await r(e,t)}catch(i){Tje(i,e)}return n.ok||await kje(n,e),n}function Tje(e,t){let r=e;throw r.name==="AbortError"?(r=new Jse(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof Zse||e instanceof jh||(r=new ss(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function kje(e,t){let r="",n;try{const i=await e.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new Zse(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function Cje(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),CA(e.candidates[0]))throw new cg(`${sh(e)}`,e);return Oje(e)}else if(e.promptFeedback)throw new cg(`Text not available. ${sh(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),CA(e.candidates[0]))throw new cg(`${sh(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),cW(e)[0]}else if(e.promptFeedback)throw new cg(`Function call not available. ${sh(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),CA(e.candidates[0]))throw new cg(`${sh(e)}`,e);return cW(e)}else if(e.promptFeedback)throw new cg(`Function call not available. ${sh(e)}`,e)},e}function Oje(e){var t,r,n,i;const a=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const s of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function cW(e){var t,r,n,i;const a=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const s of(i=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}const Pje=[vx.RECITATION,vx.SAFETY,vx.LANGUAGE];function CA(e){return!!e.finishReason&&Pje.includes(e.finishReason)}function sh(e){var t,r,n;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const a=e.candidates[0];CA(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function Rb(e){return this instanceof Rb?(this.v=e,this):new Rb(e)}function Nje(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){n[d]&&(i[d]=function(h){return new Promise(function(m,p){a.push([d,h,m,p])>1||o(d,h)})})}function o(d,h){try{l(n[d](h))}catch(m){f(a[0][3],m)}}function l(d){d.value instanceof Rb?Promise.resolve(d.value.v).then(c,u):f(a[0][2],d)}function c(d){o("next",d)}function u(d){o("throw",d)}function f(d,h){d(h),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ije(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Mje(t),[n,i]=r.tee();return{stream:Lje(n),response:Rje(i)}}async function Rje(e){const t=[],r=e.getReader();for(;;){const{done:n,value:i}=await r.read();if(n)return q$(Dje(t));t.push(i)}}function Lje(e){return Nje(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:i}=yield Rb(r.read());if(i)break;yield yield Rb(q$(n))}})}function Mje(e){const t=e.getReader();return new ReadableStream({start(n){let i="";return a();function a(){return t.read().then(({value:s,done:o})=>{if(o){if(i.trim()){n.error(new ss("Failed to parse stream"));return}n.close();return}i+=s;let l=i.match(uW),c;for(;l;){try{c=JSON.parse(l[1])}catch{n.error(new ss(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(c),i=i.substring(l[0].length),l=i.match(uW)}return a()}).catch(s=>{let o=s;throw o.stack=s.stack,o.name==="AbortError"?o=new Jse("Request aborted when reading from the stream"):o=new ss("Error reading from the stream"),o})}}})}function Dje(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let i=0;for(const a of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[i]||(r.candidates[i]={index:i}),r.candidates[i].citationMetadata=a.citationMetadata,r.candidates[i].groundingMetadata=a.groundingMetadata,r.candidates[i].finishReason=a.finishReason,r.candidates[i].finishMessage=a.finishMessage,r.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){r.candidates[i].content||(r.candidates[i].content={role:a.content.role||"user",parts:[]});const s={};for(const o of a.content.parts)o.text&&(s.text=o.text),o.functionCall&&(s.functionCall=o.functionCall),o.executableCode&&(s.executableCode=o.executableCode),o.codeExecutionResult&&(s.codeExecutionResult=o.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),r.candidates[i].content.parts.push(s)}i++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qse(e,t,r,n){const i=await v2(t,im.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return Ije(i)}async function eoe(e,t,r,n){const a=await(await v2(t,im.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:q$(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Lb(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return jje(t)}function jje(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,i=!1;for(const a of e)"functionResponse"in a?(r.parts.push(a),i=!0):(t.parts.push(a),n=!0);if(n&&i)throw new ss("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new ss("No content is provided for sending chat message.");return n?t:r}function $je(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new jh("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(i)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const a=Lb(e);n.contents=[a]}return{generateContentRequest:n}}function fW(e){let t;return e.contents?t=e:t={contents:[Lb(e)]},e.systemInstruction&&(t.systemInstruction=toe(e.systemInstruction)),t}function Fje(e){return typeof e=="string"||Array.isArray(e)?{content:Lb(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Bje={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Uje(e){let t=!1;for(const r of e){const{role:n,parts:i}=r;if(!t&&n!=="user")throw new ss(`First content should be with role 'user', got ${n}`);if(!rW.includes(n))throw new ss(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(rW)}`);if(!Array.isArray(i))throw new ss("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new ss("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of i)for(const l of dW)l in o&&(a[l]+=1);const s=Bje[n];for(const o of dW)if(!s.includes(o)&&a[o]>0)throw new ss(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function hW(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW="SILENT_ERROR";class zje{constructor(t,r,n,i={}){this.model=r,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(Uje(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,i,a,s,o,l;await this._sendPromise;const c=Lb(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),r);let d;return this._sendPromise=this._sendPromise.then(()=>eoe(this._apiKey,this.model,u,f)).then(h=>{var m;if(hW(h.response)){this._history.push(c);const p=Object.assign({parts:[],role:"model"},(m=h.response.candidates)===null||m===void 0?void 0:m[0].content);this._history.push(p)}else{const p=sh(h.response);p&&console.warn(`sendMessage() was unsuccessful. ${p}. Inspect response object for details.`)}d=h}).catch(h=>{throw this._sendPromise=Promise.resolve(),h}),await this._sendPromise,d}async sendMessageStream(t,r={}){var n,i,a,s,o,l;await this._sendPromise;const c=Lb(t),u={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),r),d=Qse(this._apiKey,this.model,u,f);return this._sendPromise=this._sendPromise.then(()=>d).catch(h=>{throw new Error(pW)}).then(h=>h.response).then(h=>{if(hW(h)){this._history.push(c);const m=Object.assign({},h.candidates[0].content);m.role||(m.role="model"),this._history.push(m)}else{const m=sh(h);m&&console.warn(`sendMessageStream() was unsuccessful. ${m}. Inspect response object for details.`)}}).catch(h=>{h.message!==pW&&console.error(h)}),d}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vje(e,t,r,n){return(await v2(t,im.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wje(e,t,r,n){return(await v2(t,im.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function Hje(e,t,r,n){const i=r.requests.map(s=>Object.assign(Object.assign({},s),{model:t}));return(await v2(t,im.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=toe(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const i=fW(t),a=Object.assign(Object.assign({},this._requestOptions),r);return eoe(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),a)}async generateContentStream(t,r={}){var n;const i=fW(t),a=Object.assign(Object.assign({},this._requestOptions),r);return Qse(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),a)}startChat(t){var r;return new zje(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=$je(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),r);return Vje(this.apiKey,this.model,n,i)}async embedContent(t,r={}){const n=Fje(t),i=Object.assign(Object.assign({},this._requestOptions),r);return Wje(this.apiKey,this.model,n,i)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return Hje(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new ss("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new mW(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new jh("Cached content must contain a `name` field.");if(!t.model)throw new jh("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const s of i)if(r!=null&&r[s]&&t[s]&&(r==null?void 0:r[s])!==t[s]){if(s==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new jh(`Different value for "${s}" specified in modelParams (${r[s]}) and cachedContent (${t[s]})`)}const a=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new mW(this.apiKey,a,n)}}function yW(e,t){const r=Gje(e),n=Kje(r,t);return{tools:r,toolConfig:n}}function Gje(e){let t=[];const r=[];return e.forEach(i=>{if(d2(i)){const[a]=rje([i]);a.functionDeclarations&&t.push(...a.functionDeclarations)}else if(V$(i)){const{functionDeclarations:a}=qje(i);if(a)t.push(...a);else throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool")}else r.push(i)}),r.find(i=>"functionDeclarations"in i)?r.map(i=>{if((t==null?void 0:t.length)>0&&"functionDeclarations"in i){const a={functionDeclarations:[...i.functionDeclarations||[],...t]};return t=[],a}return i}):[...r,...t.length>0?[{functionDeclarations:t}]:[]]}function qje(e){return{functionDeclarations:[{name:e.function.name,description:e.function.description,parameters:Q0(e.function.parameters)}]}}function Kje(e,t){if(!e.length||!t)return;const{toolChoice:r,allowedFunctionNames:n}=t,i={any:Jg.ANY,auto:Jg.AUTO,none:Jg.NONE};if(r&&["any","auto","none"].includes(r))return{functionCallingConfig:{mode:i[r]??"MODE_UNSPECIFIED",allowedFunctionNames:n}};if(typeof r=="string"||n)return{functionCallingConfig:{mode:Jg.ANY,allowedFunctionNames:[...n??[],...r&&typeof r=="string"?[r]:[]]}}}const Yje={"gemini-embedding-001":{maxInputTokens:2048,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:3072,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-image":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-preview-05-20":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-flash-lite-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-flash-latest":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-05-06":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.0-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash-preview-native-audio":{maxInputTokens:131072,imageInputs:!1,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.0-flash":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-lite":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-pro-preview-06-05":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-live-2.5-flash":{maxInputTokens:128e3,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8e3,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite-preview-06-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-image-preview":{maxInputTokens:32768,imageInputs:!0,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:32768,reasoningOutput:!0,imageOutputs:!0,audioOutputs:!1,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-flash-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-2.5-flash-preview-04-17":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-pro-preview-tts":{maxInputTokens:8e3,imageInputs:!1,audioInputs:!1,pdfInputs:!1,videoInputs:!1,maxOutputTokens:16e3,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!0,videoOutputs:!1,toolCalling:!1,structuredOutput:!1},"gemini-2.5-pro":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-flash":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-1.5-flash-8b":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1},"gemini-2.5-flash-lite-preview-09-2025":{maxInputTokens:1048576,imageInputs:!0,audioInputs:!0,pdfInputs:!0,videoInputs:!0,maxOutputTokens:65536,reasoningOutput:!0,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!0},"gemini-1.5-pro":{maxInputTokens:1e6,imageInputs:!0,audioInputs:!0,pdfInputs:!1,videoInputs:!0,maxOutputTokens:8192,reasoningOutput:!1,imageOutputs:!1,audioOutputs:!1,videoOutputs:!1,toolCalling:!0,structuredOutput:!1}};var Xje=Yje;const Zje=e=>e();function E4(e){const t=e.constructor;return new t({...e,content:e.contentBlocks,response_metadata:{...e.response_metadata,output_version:"v1"}})}var roe={};Gt(roe,{BaseChatModel:()=>o1,SimpleChatModel:()=>Jje});function A4(e){const t=[];for(const r of e){let n=r;if(Array.isArray(r.content))for(let i=0;i<r.content.length;i++){const a=r.content[i];(l$(a)||c$(a))&&n===r&&(n=new r.constructor({...n,content:[...r.content.slice(0,i),Cie(a),...r.content.slice(i+1)]}))}t.push(n)}return t}var o1=class Qp extends H${constructor(r){super(r);L(this,"lc_namespace",["langchain","chat_models",this._llmType()]);L(this,"disableStreaming",!1);L(this,"outputVersion");this.outputVersion=Zje(()=>{const n=r.outputVersion??Ru("LC_OUTPUT_VERSION");return n&&["v0","v1"].includes(n)?n:"v0"})}get callKeys(){return[...super.callKeys,"outputVersion"]}_separateRunnableConfigFromCallOptionsCompat(r){const[n,i]=super._separateRunnableConfigFromCallOptions(r);return i.signal=n.signal,[n,i]}async invoke(r,n){const i=Qp._convertInputToPromptValue(r);return(await this.generatePrompt([i],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(r,n,i){throw new Error("Not implemented.")}async*_streamIterator(r,n){var i,a,s;if(this._streamResponseChunks===Qp.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(r,n);else{const l=Qp._convertInputToPromptValue(r).toChatMessages(),[c,u]=this._separateRunnableConfigFromCallOptionsCompat(n),f={...c.metadata,...this.getLsParams(u)},d=await $s.configure(c.callbacks,this.callbacks,c.tags,this.tags,f,this.metadata,{verbose:this.verbose}),h={options:u,invocation_params:this==null?void 0:this.invocationParams(u),batch_size:1},m=u.outputVersion??this.outputVersion,p=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),[A4(l)],c.runId,void 0,h,void 0,void 0,c.runName));let y,g;try{for await(const w of this._streamResponseChunks(l,u,p==null?void 0:p[0])){if((i=u.signal)==null||i.throwIfAborted(),w.message.id==null){const v=(a=p==null?void 0:p.at(0))==null?void 0:a.runId;v!=null&&w.message._updateId(`run-${v}`)}w.message.response_metadata={...w.generationInfo,...w.message.response_metadata},m==="v1"?yield E4(w.message):yield w.message,y?y=y.concat(w):y=w,JR(w.message)&&w.message.usage_metadata!==void 0&&(g={tokenUsage:{promptTokens:w.message.usage_metadata.input_tokens,completionTokens:w.message.usage_metadata.output_tokens,totalTokens:w.message.usage_metadata.total_tokens}})}(s=u.signal)==null||s.throwIfAborted()}catch(w){throw await Promise.all((p??[]).map(v=>v==null?void 0:v.handleLLMError(w))),w}await Promise.all((p??[]).map(w=>w==null?void 0:w.handleLLMEnd({generations:[[y]],llmOutput:g})))}}getLsParams(r){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:r.stop,ls_provider:n}}async _generateUncached(r,n,i,a){var h,m,p,y;const s=r.map(g=>g.map(Iu));let o;if(a!==void 0&&a.length===s.length)o=a;else{const g={...i.metadata,...this.getLsParams(n)},w=await $s.configure(i.callbacks,this.callbacks,i.tags,this.tags,g,this.metadata,{verbose:this.verbose}),v={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1};o=await(w==null?void 0:w.handleChatModelStart(this.toJSON(),s.map(A4),i.runId,void 0,v,void 0,void 0,i.runName))}const l=n.outputVersion??this.outputVersion,c=[],u=[];if(!!(o!=null&&o[0].handlers.find(x$))&&!this.disableStreaming&&s.length===1&&this._streamResponseChunks!==Qp.prototype._streamResponseChunks)try{const g=await this._streamResponseChunks(s[0],n,o==null?void 0:o[0]);let w,v;for await(const x of g){if((h=n.signal)!=null&&h.aborted){const b=w==null?void 0:w.message;throw new XR("Model invocation was aborted.",b)}if(x.message.id==null){const b=(m=o==null?void 0:o.at(0))==null?void 0:m.runId;b!=null&&x.message._updateId(`run-${b}`)}w===void 0?w=x:w=ep(w,x),JR(x.message)&&x.message.usage_metadata!==void 0&&(v={tokenUsage:{promptTokens:x.message.usage_metadata.input_tokens,completionTokens:x.message.usage_metadata.output_tokens,totalTokens:x.message.usage_metadata.total_tokens}})}if((p=n.signal)!=null&&p.aborted){const x=w==null?void 0:w.message;throw new XR("Model invocation was aborted.",x)}if(w===void 0)throw new Error("Received empty response from chat model call.");c.push([w]),await(o==null?void 0:o[0].handleLLMEnd({generations:c,llmOutput:v}))}catch(g){throw await(o==null?void 0:o[0].handleLLMError(g)),g}else{const g=await Promise.allSettled(s.map(async(w,v)=>{const x=await this._generate(w,{...n,promptIndex:v},o==null?void 0:o[v]);if(l==="v1")for(const b of x.generations)b.message=E4(b.message);return x}));await Promise.all(g.map(async(w,v)=>{var x,b,S;if(w.status==="fulfilled"){const T=w.value;for(const A of T.generations){if(A.message.id==null){const O=(x=o==null?void 0:o.at(0))==null?void 0:x.runId;O!=null&&A.message._updateId(`run-${O}`)}A.message.response_metadata={...A.generationInfo,...A.message.response_metadata}}return T.generations.length===1&&(T.generations[0].message.response_metadata={...T.llmOutput,...T.generations[0].message.response_metadata}),c[v]=T.generations,u[v]=T.llmOutput,(b=o==null?void 0:o[v])==null?void 0:b.handleLLMEnd({generations:[T.generations],llmOutput:T.llmOutput})}else return await((S=o==null?void 0:o[v])==null?void 0:S.handleLLMError(w.reason)),Promise.reject(w.reason)}))}const d={generations:c,llmOutput:u.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...u):void 0};return Object.defineProperty(d,Nb,{value:o?{runIds:o==null?void 0:o.map(g=>g.runId)}:void 0,configurable:!0}),d}async _generateCached({messages:r,cache:n,llmStringKey:i,parsedOptions:a,handledOptions:s}){const o=r.map(w=>w.map(Iu)),l={...s.metadata,...this.getLsParams(a)},c=await $s.configure(s.callbacks,this.callbacks,s.tags,this.tags,l,this.metadata,{verbose:this.verbose}),u={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},f=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),o.map(A4),s.runId,void 0,u,void 0,void 0,s.runName)),d=[],m=(await Promise.allSettled(o.map(async(w,v)=>{const x=Qp._convertInputToPromptValue(w).toString(),b=await n.lookup(x,i);return b==null&&d.push(v),b}))).map((w,v)=>({result:w,runManager:f==null?void 0:f[v]})).filter(({result:w})=>w.status==="fulfilled"&&w.value!=null||w.status==="rejected"),p=a.outputVersion??this.outputVersion,y=[];await Promise.all(m.map(async({result:w,runManager:v},x)=>{if(w.status==="fulfilled"){const b=w.value;return y[x]=b.map(S=>("message"in S&&ji(S.message)&&em(S.message)&&(S.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0},p==="v1"&&(S.message=E4(S.message))),S.generationInfo={...S.generationInfo,tokenUsage:{}},S)),b.length&&await(v==null?void 0:v.handleLLMNewToken(b[0].text)),v==null?void 0:v.handleLLMEnd({generations:[b]},void 0,void 0,void 0,{cached:!0})}else return await(v==null?void 0:v.handleLLMError(w.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(w.reason)}));const g={generations:y,missingPromptIndices:d,startedRunManagers:f};return Object.defineProperty(g,Nb,{value:f?{runIds:f==null?void 0:f.map(w=>w.runId)}:void 0,configurable:!0}),g}async generate(r,n,i){let a;Array.isArray(n)?a={stop:n}:a=n;const s=r.map(p=>p.map(Iu)),[o,l]=this._separateRunnableConfigFromCallOptionsCompat(a);if(o.callbacks=o.callbacks??i,!this.cache)return this._generateUncached(s,l,o);const{cache:c}=this,u=this._getSerializedCacheKeyParametersForCall(l),{generations:f,missingPromptIndices:d,startedRunManagers:h}=await this._generateCached({messages:s,cache:c,llmStringKey:u,parsedOptions:l,handledOptions:o});let m={};if(d.length>0){const p=await this._generateUncached(d.map(y=>s[y]),l,o,h!==void 0?d.map(y=>h==null?void 0:h[y]):void 0);await Promise.all(p.generations.map(async(y,g)=>{const w=d[g];f[w]=y;const v=Qp._convertInputToPromptValue(s[w]).toString();return c.update(v,u,y)})),m=p.llmOutput??{}}return{generations:f,llmOutput:m}}invocationParams(r){return{}}_modelType(){return"base_chat_model"}async generatePrompt(r,n,i){const a=r.map(s=>s.toChatMessages());return this.generate(a,n,i)}withStructuredOutput(r,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');const i=r,a=n==null?void 0:n.name,s=bb(i)??"A function available to call.",o=n==null?void 0:n.method,l=n==null?void 0:n.includeRaw;if(o==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c=a??"extract",u;dp(i)?u=[{type:"function",function:{name:c,description:s,parameters:Ps(i)}}]:("name"in i&&(c=i.name),u=[{type:"function",function:{name:c,description:s,parameters:i}}]);const f=this.bindTools(u),d=xd.from(y=>{if(!Dl.isInstance(y))throw new Error("Input is not an AIMessageChunk.");if(!y.tool_calls||y.tool_calls.length===0)throw new Error("No tool calls found in the response.");const g=y.tool_calls.find(w=>w.name===c);if(!g)throw new Error(`No tool call found with name ${c}.`);return g.args});if(!l)return f.pipe(d).withConfig({runName:"StructuredOutput"});const h=nm.assign({parsed:(y,g)=>d.invoke(y.raw,g)}),m=nm.assign({parsed:()=>null}),p=h.withFallbacks({fallbacks:[m]});return sd.from([{raw:f},p]).withConfig({runName:"StructuredOutputRunnable"})}},Jje=class extends o1{async _generate(e,t,r){const n=await this._call(e,t,r),i=new da(n);if(typeof i.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}}},Qje=class extends o1{constructor(t){super(t);L(this,"lc_serializable",!0);L(this,"lc_namespace",["langchain","chat_models","google_genai"]);L(this,"model");L(this,"temperature");L(this,"maxOutputTokens");L(this,"topP");L(this,"topK");L(this,"stopSequences",[]);L(this,"safetySettings");L(this,"apiKey");L(this,"streaming",!1);L(this,"json");L(this,"streamUsage",!0);L(this,"convertSystemMessageToHumanContent");L(this,"thinkingConfig");L(this,"client");if(this.model=t.model.replace(/^models\//,""),this.maxOutputTokens=t.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=t.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=t.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=t.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=t.stopSequences??this.stopSequences,this.apiKey=t.apiKey??Ru("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=t.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(n=>n.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=t.streaming??this.streaming,this.json=t.json,this.thinkingConfig=t.thinkingConfig??this.thinkingConfig,this.client=new gW(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...this.json?{responseMimeType:"application/json"}:{},...this.thinkingConfig?{thinkingConfig:this.thinkingConfig}:{}}},{apiVersion:t.apiVersion,baseUrl:t.baseUrl,customHeaders:t.customHeaders}),this.streamUsage=t.streamUsage??this.streamUsage}static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")||this.model.startsWith("gemma-3-")&&!this.model.startsWith("gemma-3-1b")||this.model.startsWith("gemini-3")}useCachedContent(t,r,n){this.apiKey&&(this.client=new gW(this.apiKey).getGenerativeModelFromCachedContent(t,r,n))}get useSystemInstruction(){return typeof this.convertSystemMessageToHumanContent=="boolean"?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return this.model==="gemini-1.0-pro-001"||this.model.startsWith("gemini-pro-vision")||this.model.startsWith("gemini-1.0-pro-vision")?!1:this.model!=="gemini-pro"}getLsParams(t){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:t.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(t,r){var n;return this.withConfig({tools:(n=yW(t))==null?void 0:n.tools,...r})}invocationParams(t){var n;const r=(n=t==null?void 0:t.tools)!=null&&n.length?yW(t.tools,{toolChoice:t.tool_choice,allowedFunctionNames:t.allowedFunctionNames}):void 0;return t!=null&&t.responseSchema?(this.client.generationConfig.responseSchema=t.responseSchema,this.client.generationConfig.responseMimeType="application/json"):(this.client.generationConfig.responseSchema=void 0,this.client.generationConfig.responseMimeType=this.json?"application/json":void 0),{...r!=null&&r.tools?{tools:r.tools}:{},...r!=null&&r.toolConfig?{toolConfig:r.toolConfig}:{}}}async _generate(t,r,n){var u,f,d,h;(u=r.signal)==null||u.throwIfAborted();const i=XV(t,this._isMultimodalModel,this.useSystemInstruction,this.model);let a=i;if(i[0].role==="system"){const[m]=i;this.client.systemInstruction=m,a=i.slice(1)}const s=this.invocationParams(r);if(this.streaming){const m={},p=this._streamResponseChunks(t,r,n),y=[];for await(const w of p){const v=((f=w.generationInfo)==null?void 0:f.completion)??0;y[v]===void 0?y[v]=w:y[v]=y[v].concat(w)}return{generations:y.filter(w=>w!==void 0),llmOutput:{estimatedTokenUsage:m}}}const o=await this.completionWithRetry({...s,contents:a});let l;"usageMetadata"in o.response&&(l=ZV(o.response.usageMetadata,this.model));const c=eje(o.response,{usageMetadata:l});return((d=c.generations)==null?void 0:d.length)>0&&await(n==null?void 0:n.handleLLMNewToken(((h=c.generations[0])==null?void 0:h.text)??"")),c}async*_streamResponseChunks(t,r,n){var h;const i=XV(t,this._isMultimodalModel,this.useSystemInstruction,this.model);let a=i;if(i[0].role==="system"){const[m]=i;this.client.systemInstruction=m,a=i.slice(1)}const o={...this.invocationParams(r),contents:a},l=await this.caller.callWithOptions({signal:r==null?void 0:r.signal},async()=>{const{stream:m}=await this.client.generateContentStream(o,{signal:r==null?void 0:r.signal});return m});let c,u=0,f=0,d=0;for await(const m of l){if((h=r.signal)!=null&&h.aborted)return;if("usageMetadata"in m&&m.usageMetadata!==void 0&&this.streamUsage!==!1&&r.streamUsage!==!1){c=ZV(m.usageMetadata,this.model);const y=m.usageMetadata.promptTokenCount??0;c.input_tokens=Math.max(0,y-u),u=y;const g=m.usageMetadata.candidatesTokenCount??0;c.output_tokens=Math.max(0,g-f),f=g;const w=m.usageMetadata.totalTokenCount??0;c.total_tokens=Math.max(0,w-d),d=w}const p=tje(m,{usageMetadata:c});p&&(yield p,await(n==null?void 0:n.handleLLMNewToken(p.text??"")))}}async completionWithRetry(t,r){return this.caller.callWithOptions({signal:r==null?void 0:r.signal},async()=>{var n;try{return await this.client.generateContent(t,{signal:r==null?void 0:r.signal})}catch(i){throw(n=i.message)!=null&&n.includes("400 Bad Request")&&(i.status=400),i}})}get profile(){return Xje[this.model]??{}}withStructuredOutput(t,r){const n=t,i=r==null?void 0:r.name,a=r==null?void 0:r.method,s=r==null?void 0:r.includeRaw;if(a==="jsonMode")throw new Error('ChatGoogleGenerativeAI only supports "jsonSchema" or "functionCalling" as a method.');let o,l;if(a==="functionCalling"){let d=i??"extract",h;if(dp(n)){const m=qR(n);h=[{functionDeclarations:[{name:d,description:m.description??"A function available to call.",parameters:m}]}],l=new JV({returnSingle:!0,keyName:d,zodSchema:n})}else{let m;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(m=n,m.parameters=Q0(n.parameters),d=n.name):m={name:d,description:n.description??"",parameters:Q0(n)},h=[{functionDeclarations:[m]}],l=new JV({returnSingle:!0,keyName:d})}o=this.bindTools(h).withConfig({allowedFunctionNames:[d]})}else{const d=qR(n);o=this.withConfig({responseSchema:d}),l=new Kse}if(!s)return o.pipe(l).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const c=nm.assign({parsed:(d,h)=>l.invoke(d.raw,h)}),u=nm.assign({parsed:()=>null}),f=c.withFallbacks({fallbacks:[u]});return sd.from([{raw:o},f]).withConfig({runName:"StructuredOutputRunnable"})}},noe={};Gt(noe,{Embeddings:()=>K$});var K$=class{constructor(e){L(this,"caller");this.caller=new f2(e??{})}},ioe={};Gt(ioe,{chunkArray:()=>e6e});const e6e=(e,t)=>e.reduce((r,n,i)=>{const a=Math.floor(i/t),s=r[a]||[];return r[a]=s.concat([n]),r},[]),t6e=()=>{const e="AIzaSyBh3s61fNcNiV620kICjm-zZd1BLvqu4VI";return e==null?void 0:e.trim()},Y$=async(e=[])=>{const t=t6e();if(!t)throw console.error("PennyWise: Missing API Key! (VITE_GEMINI_API_KEY or GOOGLE_API_KEY)"),new Error("PennyWise is missing its Gemini API Key. Please check your .env file!");console.log("PennyWise: Initializing Gemini Model...");try{const r=new Qje({apiKey:t,model:"gemini-3-flash-preview",maxOutputTokens:2048,temperature:0});return e.length>0?r.bindTools(e):r}catch(r){throw console.error("PennyWise: Failed to create model:",r),r}};class r6e{disable(){}getStore(){}run(t,r,...n){return r(...n)}exit(t,...r){return t(...r)}enterWith(t){}}function n6e(){ba.initializeGlobalInstance(new r6e)}var gp=class extends Error{constructor(t,r){let n=t??"";r!=null&&r.lc_error_code&&(n=`${n}

Troubleshooting URL: https://docs.langchain.com/oss/javascript/langgraph/${r.lc_error_code}/
`);super(n);L(this,"lc_error_code");this.lc_error_code=r==null?void 0:r.lc_error_code}},aoe=class extends gp{get is_bubble_up(){return!0}},i6e=class extends gp{constructor(e,t){super(e,t),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},OA=class extends gp{constructor(e,t){super(e,t),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},ky=class extends aoe{constructor(t,r){super(JSON.stringify(t,null,2),r);L(this,"interrupts");this.name="GraphInterrupt",this.interrupts=t??[]}static get unminifiable_name(){return"GraphInterrupt"}},soe=class extends ky{constructor(e,t){super([{value:e}],t),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},ooe=class extends aoe{constructor(t){super();L(this,"command");this.name="ParentCommand",this.command=t}static get unminifiable_name(){return"ParentCommand"}};function a6e(e){return e!==void 0&&e.name===ooe.unminifiable_name}function PA(e){return e!==void 0&&e.is_bubble_up===!0}function y0(e){return e!==void 0&&[ky.unminifiable_name,soe.unminifiable_name].includes(e.name)}var vW=class extends gp{constructor(e,t){super(e,t),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},_a=class extends gp{constructor(e,t){super(e,t),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},Mn=class extends gp{constructor(e,t){super(e,t),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}},s6e=class extends gp{constructor(e,t){super(e,t),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}},T4=class extends gp{constructor(e,t){super(e,t),this.name="StateGraphInputError",this.message="Invalid StateGraph input. Make sure to pass a valid StateDefinition, Annotation.Root, or Zod schema."}static get unminifiable_name(){return"StateGraphInputError"}};function loe(e){return t3e({clockseq:e})}function Qg(e,t){const r=t.replace(/-/g,"").match(/.{2}/g).map(n=>parseInt(n,16));return JT(e,new Uint8Array(r))}const o6e="__error__",NA="__scheduled__",l6e="__interrupt__",c6e="__resume__";var wW="[...]",u6e="[Circular]",sk=[],ey=[];function f6e(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function d6e(e,t,r,n){typeof n>"u"&&(n=f6e()),xL(e,"",0,[],void 0,0,n);var i;try{ey.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,h6e(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sk.length!==0;){var a=sk.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function k4(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),sk.push([n,r,t,i])):ey.push([t,r,e]):(n[r]=e,sk.push([n,r,t]))}function xL(e,t,r,n,i,a,s){a+=1;var o;if(typeof e=="object"&&e!==null){for(o=0;o<n.length;o++)if(n[o]===e){k4(u6e,e,t,i);return}if(typeof s.depthLimit<"u"&&a>s.depthLimit){k4(wW,e,t,i);return}if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit){k4(wW,e,t,i);return}if(n.push(e),Array.isArray(e))for(o=0;o<e.length;o++)xL(e[o],o,o,n,e,a,s);else{var l=Object.keys(e);for(o=0;o<l.length;o++){var c=l[o];xL(e[c],c,o,n,e,a,s)}}n.pop()}}function h6e(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(ey.length>0)for(var n=0;n<ey.length;n++){var i=ey[n];if(i[1]===t&&i[0]===r){r=i[2],ey.splice(n,1);break}}return e.call(this,t,r)}}const p6e=[];var m6e={},coe={};Gt(coe,{BaseChatMessageHistory:()=>uoe,BaseListChatMessageHistory:()=>X$,InMemoryChatMessageHistory:()=>g6e});var uoe=class extends Ml{async addMessages(e){for(const t of e)await this.addMessage(t)}},X$=class extends Ml{addUserMessage(e){return this.addMessage(new ms(e))}addAIMessage(e){return this.addMessage(new da(e))}async addMessages(e){for(const t of e)await this.addMessage(t)}clear(){throw new Error("Not implemented.")}},g6e=class extends X${constructor(t){super(...arguments);L(this,"lc_namespace",["langchain","stores","message","in_memory"]);L(this,"messages",[]);this.messages=t??[]}async getMessages(){return this.messages}async addMessage(t){this.messages.push(t)}async clear(){this.messages=[]}},y6e={},foe={};Gt(foe,{BaseMemory:()=>v6e,getInputValue:()=>w6e,getOutputValue:()=>x6e,getPromptInputKey:()=>b6e});var v6e=class{};const doe=(e,t)=>{if(t!==void 0)return e[t];const r=Object.keys(e);if(r.length===1)return e[r[0]]},w6e=(e,t)=>{const r=doe(e,t);if(!r){const n=Object.keys(e);throw new Error(`input values have ${n.length} keys, you must specify an input key or pass only 1 key as input`)}return r},x6e=(e,t)=>{const r=doe(e,t);if(!r&&r!==""){const n=Object.keys(e);throw new Error(`output values have ${n.length} keys, you must specify an output key or pass only 1 key as output`)}return r};function b6e(e,t){const r=Object.keys(e).filter(n=>!t.includes(n)&&n!=="stop");if(r.length!==1)throw new Error(`One input key expected, but got ${r.length}`);return r[0]}var hoe={};Gt(hoe,{BaseStore:()=>poe,InMemoryStore:()=>_6e});var poe=class extends Ml{},_6e=class extends poe{constructor(){super(...arguments);L(this,"lc_namespace",["langchain","storage"]);L(this,"store",{})}async mget(t){return t.map(r=>this.store[r])}async mset(t){for(const[r,n]of t)this.store[r]=n}async mdelete(t){for(const r of t)delete this.store[r]}async*yieldKeys(t){const r=Object.keys(this.store);for(const n of r)(t===void 0||n.startsWith(t))&&(yield n)}},moe={};Gt(moe,{BaseRetriever:()=>Z$});var Z$=class extends Lr{constructor(t){super(t);L(this,"callbacks");L(this,"tags");L(this,"metadata");L(this,"verbose");this.callbacks=t==null?void 0:t.callbacks,this.tags=(t==null?void 0:t.tags)??[],this.metadata=(t==null?void 0:t.metadata)??{},this.verbose=(t==null?void 0:t.verbose)??!1}_getRelevantDocuments(t,r){throw new Error("Not implemented!")}async invoke(t,r){const n=zr(c2(r)),i=await $s.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a=await(i==null?void 0:i.handleRetrieverStart(this.toJSON(),t,n.runId,void 0,void 0,void 0,n.runName));try{const s=await this._getRelevantDocuments(t,a);return await(a==null?void 0:a.handleRetrieverEnd(s)),s}catch(s){throw await(a==null?void 0:a.handleRetrieverError(s)),s}}},goe={};Gt(goe,{SaveableVectorStore:()=>S6e,VectorStore:()=>J$,VectorStoreRetriever:()=>IA});var IA=class extends Z${constructor(t){super(t);L(this,"vectorStore");L(this,"k",4);L(this,"searchType","similarity");L(this,"searchKwargs");L(this,"filter");this.vectorStore=t.vectorStore,this.k=t.k??this.k,this.searchType=t.searchType??this.searchType,this.filter=t.filter,t.searchType==="mmr"&&(this.searchKwargs=t.searchKwargs)}static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}async _getRelevantDocuments(t,r){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(t,{k:this.k,filter:this.filter,...this.searchKwargs},r==null?void 0:r.getChild("vectorstore"))}return this.vectorStore.similaritySearch(t,this.k,this.filter,r==null?void 0:r.getChild("vectorstore"))}async addDocuments(t,r){return this.vectorStore.addDocuments(t,r)}},J$=class extends Ml{constructor(t,r){super(r);L(this,"lc_namespace",["langchain","vectorstores",this._vectorstoreType()]);L(this,"embeddings");this.embeddings=t}async delete(t){throw new Error("Not implemented.")}async similaritySearch(t,r=4,n=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(t),r,n)).map(s=>s[0])}async similaritySearchWithScore(t,r=4,n=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(t),r,n)}static fromTexts(t,r,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(t,r,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(t,r,n,i,a,s){if(typeof t=="number")return new IA({vectorStore:this,k:t,filter:r,tags:[...i??[],this._vectorstoreType()],metadata:a,verbose:s,callbacks:n});{const o={vectorStore:this,k:t==null?void 0:t.k,filter:t==null?void 0:t.filter,tags:[...(t==null?void 0:t.tags)??[],this._vectorstoreType()],metadata:t==null?void 0:t.metadata,verbose:t==null?void 0:t.verbose,callbacks:t==null?void 0:t.callbacks,searchType:t==null?void 0:t.searchType};return(t==null?void 0:t.searchType)==="mmr"?new IA({...o,searchKwargs:t.searchKwargs}):new IA({...o})}}},S6e=class extends J${static load(e,t){throw new Error("Not implemented")}},yoe={};Gt(yoe,{BaseDocumentLoader:()=>voe});var voe=class{},woe={};Gt(woe,{LangSmithLoader:()=>E6e});var E6e=class extends voe{constructor(t){super();L(this,"datasetId");L(this,"datasetName");L(this,"exampleIds");L(this,"asOf");L(this,"splits");L(this,"inlineS3Urls");L(this,"offset");L(this,"limit");L(this,"metadata");L(this,"filter");L(this,"contentKey");L(this,"formatContent");L(this,"client");if(t.client&&t.clientConfig)throw new Error("client and clientConfig cannot both be provided.");this.client=t.client??new sv(t==null?void 0:t.clientConfig),this.contentKey=t.contentKey?t.contentKey.split("."):[],this.formatContent=t.formatContent??A6e,this.datasetId=t.datasetId,this.datasetName=t.datasetName,this.exampleIds=t.exampleIds,this.asOf=t.asOf,this.splits=t.splits,this.inlineS3Urls=t.inlineS3Urls,this.offset=t.offset,this.limit=t.limit,this.metadata=t.metadata,this.filter=t.filter}async load(){const t=[];for await(const r of this.client.listExamples({datasetId:this.datasetId,datasetName:this.datasetName,exampleIds:this.exampleIds,asOf:this.asOf,splits:this.splits,inlineS3Urls:this.inlineS3Urls,offset:this.offset,limit:this.limit,metadata:this.metadata,filter:this.filter})){let n=r.inputs;for(const s of this.contentKey)n=n[s];const i=this.formatContent(n),a=r;["created_at","modified_at"].forEach(s=>{s in a&&typeof a[s]=="object"&&(a[s]=a[s].toString())}),t.push({pageContent:i,metadata:a})}return t}};function A6e(e){if(typeof e=="string")return e;try{return JSON.stringify(e,null,2)}catch{return String(e)}}var $h=class{constructor(e){L(this,"pageContent");L(this,"metadata");L(this,"id");this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}},xoe=class extends Lr{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","documents","transformers"])}invoke(t,r){return this.transformDocuments(t)}},T6e=class extends xoe{async transformDocuments(e){const t=[];for(const r of e){const n=await this._transformDocument(r);t.push(n)}return t}},boe={};Gt(boe,{BaseDocumentTransformer:()=>xoe,Document:()=>$h,MappingDocumentTransformer:()=>T6e});var Q$=class extends Ml{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","example_selectors","base"])}},_oe=class{async getPromptAsync(e,t){return this.getPrompt(e).partial((t==null?void 0:t.partialVariables)??{})}},k6e=class extends _oe{constructor(t,r=[]){super();L(this,"defaultPrompt");L(this,"conditionals");this.defaultPrompt=t,this.conditionals=r}getPrompt(t){for(const[r,n]of this.conditionals)if(r(t))return n;return this.defaultPrompt}};function C6e(e){return e._modelType()==="base_llm"}function O6e(e){return e._modelType()==="base_chat_model"}function xW(e){return e.split(/\n| /).length}var P6e=class Soe extends Q${constructor(r){super(r);L(this,"examples",[]);L(this,"examplePrompt");L(this,"getTextLength",xW);L(this,"maxLength",2048);L(this,"exampleTextLengths",[]);this.examplePrompt=r.examplePrompt,this.maxLength=r.maxLength??2048,this.getTextLength=r.getTextLength??xW}async addExample(r){this.examples.push(r);const n=await this.examplePrompt.format(r);this.exampleTextLengths.push(this.getTextLength(n))}async calculateExampleTextLengths(r,n){if(r.length>0)return r;const{examples:i,examplePrompt:a}=n;return(await Promise.all(i.map(o=>a.format(o)))).map(o=>this.getTextLength(o))}async selectExamples(r){const n=Object.values(r).join(" ");let i=this.maxLength-this.getTextLength(n),a=0;const s=[];for(;i>0&&a<this.examples.length;){const o=i-this.exampleTextLengths[a];if(o<0)break;s.push(this.examples[a]),i=o,a+=1}return s}static async fromExamples(r,n){const i=new Soe(n);return await Promise.all(r.map(a=>i.addExample(a))),i}};function C4(e){return Object.keys(e).sort().map(t=>e[t])}var N6e=class Eoe extends Q${constructor(r){super(r);L(this,"vectorStoreRetriever");L(this,"exampleKeys");L(this,"inputKeys");if(this.exampleKeys=r.exampleKeys,this.inputKeys=r.inputKeys,r.vectorStore!==void 0)this.vectorStoreRetriever=r.vectorStore.asRetriever({k:r.k??4,filter:r.filter});else if(r.vectorStoreRetriever)this.vectorStoreRetriever=r.vectorStoreRetriever;else throw new Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}async addExample(r){const n=this.inputKeys??Object.keys(r),i=C4(n.reduce((a,s)=>({...a,[s]:r[s]}),{})).join(" ");await this.vectorStoreRetriever.addDocuments([new $h({pageContent:i,metadata:r})])}async selectExamples(r){const n=this.inputKeys??Object.keys(r),i=C4(n.reduce((o,l)=>({...o,[l]:r[l]}),{})).join(" "),s=(await this.vectorStoreRetriever.invoke(i)).map(o=>o.metadata);return this.exampleKeys?s.map(o=>this.exampleKeys.reduce((l,c)=>({...l,[c]:o[c]}),{})):s}static async fromExamples(r,n,i,a={}){const s=a.inputKeys??null,o=r.map(c=>C4(s?s.reduce((u,f)=>({...u,[f]:c[f]}),{}):c).join(" ")),l=await i.fromTexts(o,r,n,a);return new Eoe({vectorStore:l,k:a.k??4,exampleKeys:a.exampleKeys,inputKeys:a.inputKeys})}},Aoe={};Gt(Aoe,{BaseExampleSelector:()=>Q$,BasePromptSelector:()=>_oe,ConditionalPromptSelector:()=>k6e,LengthBasedExampleSelector:()=>P6e,SemanticSimilarityExampleSelector:()=>N6e,isChatModel:()=>O6e,isLLM:()=>C6e});const bL="10f90ea3-90a4-4962-bf75-83a0f3c1c62a";var I6e=class extends Ml{constructor(){super(...arguments);L(this,"lc_namespace",["langchain","recordmanagers"])}},Toe=class{constructor(e){L(this,"uid");L(this,"hash_");L(this,"contentHash");L(this,"metadataHash");L(this,"pageContent");L(this,"metadata");L(this,"keyEncoder",U$);this.uid=e.uid,this.pageContent=e.pageContent,this.metadata=e.metadata}makeDefaultKeyEncoder(e){this.keyEncoder=e}calculateHashes(){const e=["hash_","content_hash","metadata_hash"];for(const r of e)if(r in this.metadata)throw new Error(`Metadata cannot contain key ${r} as it is reserved for internal use. Restricted keys: [${e.join(", ")}]`);const t=this._hashStringToUUID(this.pageContent);try{const r=this._hashNestedDictToUUID(this.metadata);this.contentHash=t,this.metadataHash=r}catch(r){throw new Error(`Failed to hash metadata: ${r}. Please use a dict that can be serialized using json.`)}this.hash_=this._hashStringToUUID(this.contentHash+this.metadataHash),this.uid||(this.uid=this.hash_)}toDocument(){return new $h({pageContent:this.pageContent,metadata:this.metadata})}static fromDocument(e,t){const r=new this({pageContent:e.pageContent,metadata:e.metadata,uid:t||e.uid});return r.calculateHashes(),r}_hashStringToUUID(e){const t=this.keyEncoder(e);return JT(t,bL)}_hashNestedDictToUUID(e){const t=JSON.stringify(e,Object.keys(e).sort()),r=this.keyEncoder(t);return JT(r,bL)}};function koe(e,t){const r=[];let n=[];return t.forEach(i=>{n.push(i),n.length>=e&&(r.push(n),n=[])}),n.length>0&&r.push(n),r}function Coe(e){const t=new Set,r=[];for(const n of e){if(!n.hash_)throw new Error("Hashed document does not have a hash");t.has(n.hash_)||(t.add(n.hash_),r.push(n))}return r}function Ooe(e){if(e===null)return t=>null;if(typeof e=="string")return t=>t.metadata[e];if(typeof e=="function")return e;throw new Error(`sourceIdKey should be null, a string or a function, got ${typeof e}`)}const Poe=e=>"load"in e&&typeof e.load=="function"&&"loadAndSplit"in e&&typeof e.loadAndSplit=="function";async function R6e(e){const{docsSource:t,recordManager:r,vectorStore:n,options:i}=e,{batchSize:a=100,cleanup:s,sourceIdKey:o,cleanupBatchSize:l=1e3,forceUpdate:c=!1}=i??{};if(s==="incremental"&&!o)throw new Error("sourceIdKey is required when cleanup mode is incremental. Please provide through 'options.sourceIdKey'.");const u=Poe(t)?await t.load():t,f=Ooe(o??null),d=await r.getTime();let h=0,m=0,p=0,y=0;const g=koe(a??100,u);for(const w of g){const v=Coe(w.map(M=>Toe.fromDocument(M))),x=v.map(M=>f(M));s==="incremental"&&v.forEach((M,P)=>{if(x[P]===null)throw new Error("sourceIdKey must be provided when cleanup is incremental")});const b=await r.exists(v.map(M=>M.uid)),S=[],T=[],A=[],O=new Set;if(v.forEach((M,P)=>{if(b[P])if(c)O.add(M.uid);else{A.push(M.uid);return}S.push(M.uid),T.push(M.toDocument())}),A.length>0&&(await r.update(A,{timeAtLeast:d}),y+=A.length),T.length>0&&(await n.addDocuments(T,{ids:S}),h+=T.length-O.size,p+=O.size),await r.update(v.map(M=>M.uid),{timeAtLeast:d,groupIds:x}),s==="incremental"){x.forEach(P=>{if(!P)throw new Error("Source id cannot be null")});const M=await r.listKeys({before:d,groupIds:x});M.length>0&&(await n.delete({ids:M}),await r.deleteKeys(M),m+=M.length)}}if(s==="full"){let w=await r.listKeys({before:d,limit:l});for(;w.length>0;)await n.delete({ids:w}),await r.deleteKeys(w),m+=w.length,w=await r.listKeys({before:d,limit:l})}return{numAdded:h,numDeleted:m,numUpdated:p,numSkipped:y}}var Noe={};Gt(Noe,{RecordManager:()=>I6e,UUIDV5_NAMESPACE:()=>bL,_HashedDocument:()=>Toe,_batch:()=>koe,_deduplicateInOrder:()=>Coe,_getSourceIdAssigner:()=>Ooe,_isBaseDocumentLoader:()=>Poe,index:()=>R6e});var Ioe={};Gt(Ioe,{BaseLLM:()=>Roe,LLM:()=>e8});var Roe=class Uw extends H${constructor(){super(...arguments);L(this,"lc_namespace",["langchain","llms",this._llmType()])}async invoke(r,n){const i=Uw._convertInputToPromptValue(r);return(await this.generatePrompt([i],n,n==null?void 0:n.callbacks)).generations[0][0].text}async*_streamResponseChunks(r,n,i){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(r){const[n,i]=super._separateRunnableConfigFromCallOptions(r);return i.signal=n.signal,[n,i]}async*_streamIterator(r,n){if(this._streamResponseChunks===Uw.prototype._streamResponseChunks)yield this.invoke(r,n);else{const i=Uw._convertInputToPromptValue(r),[a,s]=this._separateRunnableConfigFromCallOptionsCompat(n),o=await $s.configure(a.callbacks,this.callbacks,a.tags,this.tags,a.metadata,this.metadata,{verbose:this.verbose}),l={options:s,invocation_params:this==null?void 0:this.invocationParams(s),batch_size:1},c=await(o==null?void 0:o.handleLLMStart(this.toJSON(),[i.toString()],a.runId,void 0,l,void 0,void 0,a.runName));let u=new lv({text:""});try{for await(const f of this._streamResponseChunks(i.toString(),s,c==null?void 0:c[0]))u?u=u.concat(f):u=f,typeof f.text=="string"&&(yield f.text)}catch(f){throw await Promise.all((c??[]).map(d=>d==null?void 0:d.handleLLMError(f))),f}await Promise.all((c??[]).map(f=>f==null?void 0:f.handleLLMEnd({generations:[[u]]})))}}async generatePrompt(r,n,i){const a=r.map(s=>s.toString());return this.generate(a,n,i)}invocationParams(r){return{}}_flattenLLMResult(r){const n=[];for(let i=0;i<r.generations.length;i+=1){const a=r.generations[i];if(i===0)n.push({generations:[a],llmOutput:r.llmOutput});else{const s=r.llmOutput?{...r.llmOutput,tokenUsage:{}}:void 0;n.push({generations:[a],llmOutput:s})}}return n}async _generateUncached(r,n,i,a){let s;if(a!==void 0&&a.length===r.length)s=a;else{const u=await $s.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),f={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:r.length};s=await(u==null?void 0:u.handleLLMStart(this.toJSON(),r,i.runId,void 0,f,void 0,void 0,i==null?void 0:i.runName))}const o=!!(s!=null&&s[0].handlers.find(x$));let l;if(o&&r.length===1&&this._streamResponseChunks!==Uw.prototype._streamResponseChunks)try{const u=await this._streamResponseChunks(r[0],n,s==null?void 0:s[0]);let f;for await(const d of u)f===void 0?f=d:f=ep(f,d);if(f===void 0)throw new Error("Received empty response from chat model call.");l={generations:[[f]],llmOutput:{}},await(s==null?void 0:s[0].handleLLMEnd(l))}catch(u){throw await(s==null?void 0:s[0].handleLLMError(u)),u}else{try{l=await this._generate(r,n,s==null?void 0:s[0])}catch(f){throw await Promise.all((s??[]).map(d=>d==null?void 0:d.handleLLMError(f))),f}const u=this._flattenLLMResult(l);await Promise.all((s??[]).map((f,d)=>f==null?void 0:f.handleLLMEnd(u[d])))}const c=(s==null?void 0:s.map(u=>u.runId))||void 0;return Object.defineProperty(l,Nb,{value:c?{runIds:c}:void 0,configurable:!0}),l}async _generateCached({prompts:r,cache:n,llmStringKey:i,parsedOptions:a,handledOptions:s,runId:o}){const l=await $s.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),c={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:r.length},u=await(l==null?void 0:l.handleLLMStart(this.toJSON(),r,o,void 0,c,void 0,void 0,s==null?void 0:s.runName)),f=[],h=(await Promise.allSettled(r.map(async(y,g)=>{const w=await n.lookup(y,i);return w==null&&f.push(g),w}))).map((y,g)=>({result:y,runManager:u==null?void 0:u[g]})).filter(({result:y})=>y.status==="fulfilled"&&y.value!=null||y.status==="rejected"),m=[];await Promise.all(h.map(async({result:y,runManager:g},w)=>{if(y.status==="fulfilled"){const v=y.value;return m[w]=v.map(x=>(x.generationInfo={...x.generationInfo,tokenUsage:{}},x)),v.length&&await(g==null?void 0:g.handleLLMNewToken(v[0].text)),g==null?void 0:g.handleLLMEnd({generations:[v]},void 0,void 0,void 0,{cached:!0})}else return await(g==null?void 0:g.handleLLMError(y.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(y.reason)}));const p={generations:m,missingPromptIndices:f,startedRunManagers:u};return Object.defineProperty(p,Nb,{value:u?{runIds:u==null?void 0:u.map(y=>y.runId)}:void 0,configurable:!0}),p}async generate(r,n,i){if(!Array.isArray(r))throw new Error("Argument 'prompts' is expected to be a string[]");let a;Array.isArray(n)?a={stop:n}:a=n;const[s,o]=this._separateRunnableConfigFromCallOptionsCompat(a);if(s.callbacks=s.callbacks??i,!this.cache)return this._generateUncached(r,o,s);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:u,missingPromptIndices:f,startedRunManagers:d}=await this._generateCached({prompts:r,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:s,runId:s.runId});let h={};if(f.length>0){const m=await this._generateUncached(f.map(p=>r[p]),o,s,d!==void 0?f.map(p=>d==null?void 0:d[p]):void 0);await Promise.all(m.generations.map(async(p,y)=>{const g=f[y];return u[g]=p,l.update(r[g],c,p)})),h=m.llmOutput??{}}return{generations:u,llmOutput:h}}_identifyingParams(){return{}}_modelType(){return"base_llm"}},e8=class extends Roe{async _generate(e,t,r){return{generations:await Promise.all(e.map((i,a)=>this._call(i,{...t,promptIndex:a},r).then(s=>[{text:s}])))}}},L6e={},Loe=class extends h2{constructor(t){super();L(this,"lc_namespace",["langchain","output_parsers","openai_functions"]);L(this,"lc_serializable",!0);L(this,"argsOnly",!0);this.argsOnly=(t==null?void 0:t.argsOnly)??this.argsOnly}static lc_name(){return"OutputFunctionsParser"}async parseResult(t){if("message"in t[0]){const n=t[0].message.additional_kwargs.function_call;if(!n)throw new Error(`No function_call in message ${JSON.stringify(t)}`);if(!n.arguments)throw new Error(`No arguments in function_call ${JSON.stringify(t)}`);return this.argsOnly?n.arguments:JSON.stringify(n)}else throw new Error(`No message in generations ${JSON.stringify(t)}`)}},Moe=class extends g2{constructor(t){super(t);L(this,"lc_namespace",["langchain","output_parsers","openai_functions"]);L(this,"lc_serializable",!0);L(this,"outputParser");L(this,"argsOnly",!0);this.argsOnly=(t==null?void 0:t.argsOnly)??this.argsOnly,this.outputParser=new Loe(t)}static lc_name(){return"JsonOutputFunctionsParser"}_diff(t,r){return r?KC(t??{},r):void 0}async parsePartialResult(t){const r=t[0];if(!r.message)return;const{message:n}=r,i=n.additional_kwargs.function_call;if(i)return this.argsOnly?iv(i.arguments):{...i,arguments:iv(i.arguments)}}async parseResult(t){const r=await this.outputParser.parseResult(t);if(!r)throw new Error(`No result from "OutputFunctionsParser" ${JSON.stringify(t)}`);return this.parse(r)}async parse(t){const r=JSON.parse(t);return this.argsOnly||(r.arguments=JSON.parse(r.arguments)),r}getFormatInstructions(){return""}},M6e=class extends h2{constructor(t){super(t);L(this,"lc_namespace",["langchain","output_parsers","openai_functions"]);L(this,"lc_serializable",!0);L(this,"outputParser",new Moe);L(this,"attrName");this.attrName=t.attrName}static lc_name(){return"JsonKeyOutputFunctionsParser"}get lc_aliases(){return{attrName:"key_name"}}async parseResult(t){return(await this.outputParser.parseResult(t))[this.attrName]}},Doe={};Gt(Doe,{JsonKeyOutputFunctionsParser:()=>M6e,JsonOutputFunctionsParser:()=>Moe,OutputFunctionsParser:()=>Loe});function joe(e,t){if(e.function===void 0)return;let r;if(t!=null&&t.partial)try{r=iv(e.function.arguments??"{}")}catch{return}else try{r=JSON.parse(e.function.arguments)}catch(i){throw new Lu([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const n={name:e.function.name,args:r,type:"tool_call"};return t!=null&&t.returnId&&(n.id=e.id),n}function D6e(e){if(e.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function j6e(e,t){var r,n;return{name:(r=e.function)==null?void 0:r.name,args:(n=e.function)==null?void 0:n.arguments,id:e.id,error:t,type:"invalid_tool_call"}}var $oe=class extends g2{constructor(t){super(t);L(this,"returnId",!1);L(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);L(this,"lc_serializable",!0);this.returnId=(t==null?void 0:t.returnId)??this.returnId}static lc_name(){return"JsonOutputToolsParser"}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(t){return await this.parsePartialResult(t,!1)}async parsePartialResult(t,r=!0){var s;const n=t[0].message;let i;if(em(n)&&((s=n.tool_calls)!=null&&s.length)?i=n.tool_calls.map(o=>{const{id:l,...c}=o;return this.returnId?{id:l,...c}:c}):n.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(l=>joe(l,{returnId:this.returnId,partial:r}))),!i)return[];const a=[];for(const o of i)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};a.push(l)}return a}},$6e=class extends $oe{constructor(t){super(t);L(this,"lc_namespace",["langchain","output_parsers","openai_tools"]);L(this,"lc_serializable",!0);L(this,"returnId",!1);L(this,"keyName");L(this,"returnSingle",!1);L(this,"zodSchema");this.keyName=t.keyName,this.returnSingle=t.returnSingle??this.returnSingle,this.zodSchema=t.zodSchema}static lc_name(){return"JsonOutputKeyToolsParser"}async _validateResult(t){var n;if(this.zodSchema===void 0)return t;const r=await n$(this.zodSchema,t);if(r.success)return r.data;throw new Lu(`Failed to parse. Text: "${JSON.stringify(t,null,2)}". Error: ${JSON.stringify((n=r.error)==null?void 0:n.issues)}`,JSON.stringify(t,null,2))}async parsePartialResult(t){const n=(await super.parsePartialResult(t)).filter(a=>a.type===this.keyName);let i=n;if(n.length)return this.returnId||(i=n.map(a=>a.args)),this.returnSingle?i[0]:i}async parseResult(t){const n=(await super.parsePartialResult(t,!1)).filter(s=>s.type===this.keyName);let i=n;return n.length?(this.returnId||(i=n.map(s=>s.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(s=>this._validateResult(s)))):void 0}},Foe={};Gt(Foe,{JsonOutputKeyToolsParser:()=>$6e,JsonOutputToolsParser:()=>$oe,convertLangChainToolCallToOpenAI:()=>D6e,makeInvalidToolCall:()=>j6e,parseToolCall:()=>joe});var w2=class extends Lr{constructor(t){super(t);L(this,"lc_serializable",!0);L(this,"lc_namespace",["langchain_core","prompts",this._getPromptType()]);L(this,"inputVariables");L(this,"outputParser");L(this,"partialVariables");L(this,"metadata");L(this,"tags");const{inputVariables:r}=t;if(r.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}get lc_attributes(){return{partialVariables:void 0}}async mergePartialAndUserVariables(t){const r=this.partialVariables??{},n={};for(const[a,s]of Object.entries(r))typeof s=="string"?n[a]=s:n[a]=await s();return{...n,...t}}async invoke(t,r){const n={...this.metadata,...r==null?void 0:r.metadata},i=[...this.tags??[],...(r==null?void 0:r.tags)??[]];return this._callWithConfig(a=>this.formatPromptValue(a),t,{...r,tags:i,metadata:n,runType:"prompt"})}},Mb=class extends w2{async formatPromptValue(e){const t=await this.format(e);return new F$(t)}};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var F6e=Object.prototype.toString,l1=Array.isArray||function(t){return F6e.call(t)==="[object Array]"};function t8(e){return typeof e=="function"}function B6e(e){return l1(e)?"array":typeof e}function O4(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function bW(e,t){return e!=null&&typeof e=="object"&&t in e}function U6e(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var z6e=RegExp.prototype.test;function V6e(e,t){return z6e.call(e,t)}var W6e=/\S/;function H6e(e){return!V6e(W6e,e)}var G6e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function q6e(e){return String(e).replace(/[&<>"'`=\/]/g,function(r){return G6e[r]})}var K6e=/\s*/,Y6e=/\s+/,_W=/\s*=/,X6e=/\s*\}/,Z6e=/#|\^|\/|>|\{|&|=|!/;function J6e(e,t){if(!e)return[];var r=!1,n=[],i=[],a=[],s=!1,o=!1,l="",c=0;function u(){if(s&&!o)for(;a.length;)delete i[a.pop()];else a=[];s=!1,o=!1}var f,d,h;function m(A){if(typeof A=="string"&&(A=A.split(Y6e,2)),!l1(A)||A.length!==2)throw new Error("Invalid tags: "+A);f=new RegExp(O4(A[0])+"\\s*"),d=new RegExp("\\s*"+O4(A[1])),h=new RegExp("\\s*"+O4("}"+A[1]))}m(t||fo.tags);for(var p=new x2(e),y,g,w,v,x,b;!p.eos();){if(y=p.pos,w=p.scanUntil(f),w)for(var S=0,T=w.length;S<T;++S)v=w.charAt(S),H6e(v)?(a.push(i.length),l+=v):(o=!0,r=!0,l+=" "),i.push(["text",v,y,y+1]),y+=1,v===`
`&&(u(),l="",c=0,r=!1);if(!p.scan(f))break;if(s=!0,g=p.scan(Z6e)||"name",p.scan(K6e),g==="="?(w=p.scanUntil(_W),p.scan(_W),p.scanUntil(d)):g==="{"?(w=p.scanUntil(h),p.scan(X6e),p.scanUntil(d),g="&"):w=p.scanUntil(d),!p.scan(d))throw new Error("Unclosed tag at "+p.pos);if(g==">"?x=[g,w,y,p.pos,l,c,r]:x=[g,w,y,p.pos],c++,i.push(x),g==="#"||g==="^")n.push(x);else if(g==="/"){if(b=n.pop(),!b)throw new Error('Unopened section "'+w+'" at '+y);if(b[1]!==w)throw new Error('Unclosed section "'+b[1]+'" at '+y)}else g==="name"||g==="{"||g==="&"?o=!0:g==="="&&m(w)}if(u(),b=n.pop(),b)throw new Error('Unclosed section "'+b[1]+'" at '+p.pos);return e$e(Q6e(i))}function Q6e(e){for(var t=[],r,n,i=0,a=e.length;i<a;++i)r=e[i],r&&(r[0]==="text"&&n&&n[0]==="text"?(n[1]+=r[1],n[3]=r[3]):(t.push(r),n=r));return t}function e$e(e){for(var t=[],r=t,n=[],i,a,s=0,o=e.length;s<o;++s)switch(i=e[s],i[0]){case"#":case"^":r.push(i),n.push(i),r=i[4]=[];break;case"/":a=n.pop(),a[5]=i[2],r=n.length>0?n[n.length-1][4]:t;break;default:r.push(i)}return t}function x2(e){this.string=e,this.tail=e,this.pos=0}x2.prototype.eos=function(){return this.tail===""};x2.prototype.scan=function(t){var r=this.tail.match(t);if(!r||r.index!==0)return"";var n=r[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};x2.prototype.scanUntil=function(t){var r=this.tail.search(t),n;switch(r){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=n.length,n};function cv(e,t){this.view=e,this.cache={".":this.view},this.parent=t}cv.prototype.push=function(t){return new cv(t,this)};cv.prototype.lookup=function(t){var r=this.cache,n;if(r.hasOwnProperty(t))n=r[t];else{for(var i=this,a,s,o,l=!1;i;){if(t.indexOf(".")>0)for(a=i.view,s=t.split("."),o=0;a!=null&&o<s.length;)o===s.length-1&&(l=bW(a,s[o])||U6e(a,s[o])),a=a[s[o++]];else a=i.view[t],l=bW(i.view,t);if(l){n=a;break}i=i.parent}r[t]=n}return t8(n)&&(n=n.call(this.view)),n};function qs(){this.templateCache={_cache:{},set:function(t,r){this._cache[t]=r},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}qs.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};qs.prototype.parse=function(t,r){var n=this.templateCache,i=t+":"+(r||fo.tags).join(":"),a=typeof n<"u",s=a?n.get(i):void 0;return s==null&&(s=J6e(t,r),a&&n.set(i,s)),s};qs.prototype.render=function(t,r,n,i){var a=this.getConfigTags(i),s=this.parse(t,a),o=r instanceof cv?r:new cv(r,void 0);return this.renderTokens(s,o,n,t,i)};qs.prototype.renderTokens=function(t,r,n,i,a){for(var s="",o,l,c,u=0,f=t.length;u<f;++u)c=void 0,o=t[u],l=o[0],l==="#"?c=this.renderSection(o,r,n,i,a):l==="^"?c=this.renderInverted(o,r,n,i,a):l===">"?c=this.renderPartial(o,r,n,a):l==="&"?c=this.unescapedValue(o,r):l==="name"?c=this.escapedValue(o,r,a):l==="text"&&(c=this.rawValue(o)),c!==void 0&&(s+=c);return s};qs.prototype.renderSection=function(t,r,n,i,a){var s=this,o="",l=r.lookup(t[1]);function c(d){return s.render(d,r,n,a)}if(l){if(l1(l))for(var u=0,f=l.length;u<f;++u)o+=this.renderTokens(t[4],r.push(l[u]),n,i,a);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(t[4],r.push(l),n,i,a);else if(t8(l)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(r.view,i.slice(t[3],t[5]),c),l!=null&&(o+=l)}else o+=this.renderTokens(t[4],r,n,i,a);return o}};qs.prototype.renderInverted=function(t,r,n,i,a){var s=r.lookup(t[1]);if(!s||l1(s)&&s.length===0)return this.renderTokens(t[4],r,n,i,a)};qs.prototype.indentPartial=function(t,r,n){for(var i=r.replace(/[^ \t]/g,""),a=t.split(`
`),s=0;s<a.length;s++)a[s].length&&(s>0||!n)&&(a[s]=i+a[s]);return a.join(`
`)};qs.prototype.renderPartial=function(t,r,n,i){if(n){var a=this.getConfigTags(i),s=t8(n)?n(t[1]):n[t[1]];if(s!=null){var o=t[6],l=t[5],c=t[4],u=s;l==0&&c&&(u=this.indentPartial(s,c,o));var f=this.parse(u,a);return this.renderTokens(f,r,n,u,i)}}};qs.prototype.unescapedValue=function(t,r){var n=r.lookup(t[1]);if(n!=null)return n};qs.prototype.escapedValue=function(t,r,n){var i=this.getConfigEscape(n)||fo.escape,a=r.lookup(t[1]);if(a!=null)return typeof a=="number"&&i===fo.escape?String(a):i(a)};qs.prototype.rawValue=function(t){return t[1]};qs.prototype.getConfigTags=function(t){return l1(t)?t:t&&typeof t=="object"?t.tags:void 0};qs.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!l1(t))return t.escape};var fo={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Db.templateCache=e},get templateCache(){return Db.templateCache}},Db=new qs;fo.clearCache=function(){return Db.clearCache()};fo.parse=function(t,r){return Db.parse(t,r)};fo.render=function(t,r,n,i){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+B6e(t)+'" was given as the first argument for mustache#render(template, view, partials)');return Db.render(t,r,n,i)};fo.escape=q6e;fo.Scanner=x2;fo.Context=cv;fo.Writer=qs;function Boe(){fo.escape=e=>e}const jb=e=>{const t=e.split(""),r=[],n=(a,s)=>{for(let o=s;o<t.length;o+=1)if(a.includes(t[o]))return o;return-1};let i=0;for(;i<t.length;)if(t[i]==="{"&&i+1<t.length&&t[i+1]==="{")r.push({type:"literal",text:"{"}),i+=2;else if(t[i]==="}"&&i+1<t.length&&t[i+1]==="}")r.push({type:"literal",text:"}"}),i+=2;else if(t[i]==="{"){const a=n("}",i);if(a<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:t.slice(i+1,a).join("")}),i=a+1}else{if(t[i]==="}")throw new Error("Single '}' in template.");{const a=n("{}",i),s=(a<0?t.slice(i):t.slice(i,a)).join("");r.push({type:"literal",text:s}),i=a<0?t.length:a}}return r},Uoe=(e,t=[])=>{const r=[];for(const n of e)if(n[0]==="name"){const i=n[1].includes(".")?n[1].split(".")[0]:n[1];r.push({type:"variable",name:i})}else if(["#","&","^",">"].includes(n[0])){if(r.push({type:"variable",name:n[1]}),n[0]==="#"&&n.length>4&&Array.isArray(n[4])){const i=[...t,n[1]],a=Uoe(n[4],i);r.push(...a)}}else r.push({type:"literal",text:n[1]});return r},ok=e=>{Boe();const t=fo.parse(e);return Uoe(t)},zoe=(e,t)=>jb(e).reduce((r,n)=>{if(n.type==="variable"){if(n.name in t){const i=typeof t[n.name]=="string"?t[n.name]:JSON.stringify(t[n.name]);return r+i}throw new Error(`(f-string) Missing value for input ${n.name}`)}return r+n.text},""),Voe=(e,t)=>(Boe(),fo.render(e,t)),lk={"f-string":zoe,mustache:Voe},Woe={"f-string":jb,mustache:ok},Ac=(e,t,r)=>{try{return lk[t](e,r)}catch(n){throw o2(n,"INVALID_PROMPT_INPUT")}},ck=(e,t)=>Woe[t](e),b2=(e,t,r)=>{if(!(t in lk)){const n=Object.keys(lk);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${n}`)}try{const n=Object.fromEntries(r.map(i=>[i,"foo"]));Array.isArray(e)?e.forEach(i=>{if(i.type==="text"&&"text"in i&&typeof i.text=="string")Ac(i.text,t,n);else if(i.type==="image_url"){if(typeof i.image_url=="string")Ac(i.image_url,t,n);else if(typeof i.image_url=="object"&&i.image_url!==null&&"url"in i.image_url&&typeof i.image_url.url=="string"){const a=i.image_url.url;Ac(a,t,n)}}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):Ac(e,t,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};var Fh=class zw extends Mb{constructor(r){super(r);L(this,"template");L(this,"templateFormat","f-string");L(this,"validateTemplate",!0);L(this,"additionalContentFields");if(r.templateFormat==="mustache"&&r.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,r),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),b2(this.template,this.templateFormat,n)}}static lc_name(){return"PromptTemplate"}_getPromptType(){return"prompt"}async format(r){const n=await this.mergePartialAndUserVariables(r);return Ac(this.template,this.templateFormat,n)}static fromExamples(r,n,i,a=`

`,s=""){const o=[s,...r,n].join(a);return new zw({inputVariables:i,template:o})}static fromTemplate(r,n){const{templateFormat:i="f-string",...a}=n??{},s=new Set;return ck(r,i).forEach(o=>{o.type==="variable"&&s.add(o.name)}),new zw({inputVariables:[...s],templateFormat:i,template:r,...a})}async partial(r){const n=this.inputVariables.filter(s=>!(s in r)),i={...this.partialVariables??{},...r},a={...this,inputVariables:n,partialVariables:i};return new zw(a)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(r){if(!r.template)throw new Error("Prompt template must have a template");return new zw({inputVariables:r.input_variables,template:r.template,templateFormat:r.template_format})}},RA=class Hoe extends w2{constructor(r){super(r);L(this,"lc_namespace",["langchain_core","prompts","image"]);L(this,"template");L(this,"templateFormat","f-string");L(this,"validateTemplate",!0);L(this,"additionalContentFields");if(this.template=r.template,this.templateFormat=r.templateFormat??this.templateFormat,this.validateTemplate=r.validateTemplate??this.validateTemplate,this.additionalContentFields=r.additionalContentFields,this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),b2([{type:"image_url",image_url:this.template}],this.templateFormat,n)}}static lc_name(){return"ImagePromptTemplate"}_getPromptType(){return"prompt"}async partial(r){const n=this.inputVariables.filter(s=>!(s in r)),i={...this.partialVariables??{},...r},a={...this,inputVariables:n,partialVariables:i};return new Hoe(a)}async format(r){const n={};for(const[o,l]of Object.entries(this.template))typeof l=="string"?n[o]=Ac(l,this.templateFormat,r):n[o]=l;const i=r.url||n.url,a=r.detail||n.detail;if(!i)throw new Error("Must provide either an image URL.");if(typeof i!="string")throw new Error("url must be a string.");const s={url:i};return a&&(s.detail=a),s}async formatPromptValue(r){const n=await this.format(r);return new Pse(n)}},_L=class extends Lr{constructor(t){const r=t.templateFormat??"f-string",n=SL(t.template,r);super({inputVariables:n,...t});L(this,"lc_namespace",["langchain_core","prompts","dict"]);L(this,"lc_serializable",!0);L(this,"template");L(this,"templateFormat");L(this,"inputVariables");this.template=t.template,this.templateFormat=r,this.inputVariables=n}static lc_name(){return"DictPromptTemplate"}async format(t){return EL(this.template,t,this.templateFormat)}async invoke(t){return await this._callWithConfig(this.format.bind(this),t,{runType:"prompt"})}};function SL(e,t){const r=[];for(const n of Object.values(e))if(typeof n=="string")ck(n,t).forEach(i=>{i.type==="variable"&&r.push(i.name)});else if(Array.isArray(n))for(const i of n)typeof i=="string"?ck(i,t).forEach(a=>{a.type==="variable"&&r.push(a.name)}):typeof i=="object"&&r.push(...SL(i,t));else typeof n=="object"&&n!==null&&r.push(...SL(n,t));return Array.from(new Set(r))}function EL(e,t,r){const n={};for(const[i,a]of Object.entries(e))if(typeof a=="string")n[i]=Ac(a,r,t);else if(Array.isArray(a)){const s=[];for(const o of a)typeof o=="string"?s.push(Ac(o,r,t)):typeof o=="object"&&s.push(EL(o,t,r));n[i]=s}else typeof a=="object"&&a!==null?n[i]=EL(a,t,r):n[i]=a;return n}var JC=class extends Lr{constructor(){super(...arguments);L(this,"lc_namespace",["langchain_core","prompts","chat"]);L(this,"lc_serializable",!0)}async invoke(t,r){return this._callWithConfig(n=>this.formatMessages(n),t,{...r,runType:"prompt"})}},AL=class extends JC{constructor(t){typeof t=="string"&&(t={variableName:t});super(t);L(this,"variableName");L(this,"optional");this.variableName=t.variableName,this.optional=t.optional??!1}static lc_name(){return"MessagesPlaceholder"}get inputVariables(){return[this.variableName]}async formatMessages(t){const r=t[this.variableName];if(this.optional&&!r)return[];if(!r){const i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let n;try{Array.isArray(r)?n=r.map(Iu):n=[Iu(r)]}catch(i){const a=typeof r=="string"?r:JSON.stringify(r,null,2),s=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${a}`,`Additional message: ${i.message}`].join(`

`));throw s.name="InputFormatError",s.lc_error_code=i.lc_error_code,s}return n}},Goe=class extends JC{constructor(t){"prompt"in t||(t={prompt:t});super(t);L(this,"prompt");this.prompt=t.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(t){return[await this.format(t)]}},r8=class extends w2{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new B$(t)}},qoe=class extends Goe{constructor(t,r){"prompt"in t||(t={prompt:t,role:r});super(t);L(this,"role");this.role=t.role}static lc_name(){return"ChatMessagePromptTemplate"}async format(t){return new mp(await this.prompt.format(t),this.role)}static fromTemplate(t,r,n){return new this(Fh.fromTemplate(t,{templateFormat:n==null?void 0:n.templateFormat}),r)}};function t$e(e){return e===null||typeof e!="object"||Array.isArray(e)?!1:Object.keys(e).length===1&&"text"in e&&typeof e.text=="string"}function r$e(e){return e===null||typeof e!="object"||Array.isArray(e)?!1:"image_url"in e&&(typeof e.image_url=="string"||typeof e.image_url=="object"&&e.image_url!==null&&"url"in e.image_url&&typeof e.image_url.url=="string")}var n8=class extends JC{constructor(t,r){"prompt"in t||(t={prompt:t});super(t);L(this,"lc_namespace",["langchain_core","prompts","chat"]);L(this,"lc_serializable",!0);L(this,"inputVariables",[]);L(this,"additionalOptions",{});L(this,"prompt");L(this,"messageClass");L(this,"chatMessageClass");if(this.prompt=t.prompt,Array.isArray(this.prompt)){let n=[];this.prompt.forEach(i=>{"inputVariables"in i&&(n=n.concat(i.inputVariables))}),this.inputVariables=n}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=r??this.additionalOptions}static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}createMessage(t){const r=this.constructor;if(r._messageClass()){const n=r._messageClass();return new n({content:t})}else if(r.chatMessageClass){const n=r.chatMessageClass();return new n({content:t,role:this.getRoleFromMessageClass(n.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(t){switch(t){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(t,r){if(typeof t=="string")return new this(Fh.fromTemplate(t,r));const n=[];for(const i of t)if(typeof i=="string")n.push(Fh.fromTemplate(i,r));else if(i!==null)if(t$e(i)){let a="";typeof i.text=="string"&&(a=i.text??"");const s={...r,additionalContentFields:i};n.push(Fh.fromTemplate(a,s))}else if(r$e(i)){let a=i.image_url??"",s,o=[];if(typeof a=="string"){let l;(r==null?void 0:r.templateFormat)==="mustache"?l=ok(a):l=jb(a);const c=l.flatMap(u=>u.type==="variable"?[u.name]:[]);if(((c==null?void 0:c.length)??0)>0){if(c.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${c}
From: ${a}`);o=[c[0]]}else o=[];a={url:a},s=new RA({template:a,inputVariables:o,templateFormat:r==null?void 0:r.templateFormat,additionalContentFields:i})}else if(typeof a=="object"){if("url"in a){let l;(r==null?void 0:r.templateFormat)==="mustache"?l=ok(a.url):l=jb(a.url),o=l.flatMap(c=>c.type==="variable"?[c.name]:[])}else o=[];s=new RA({template:a,inputVariables:o,templateFormat:r==null?void 0:r.templateFormat,additionalContentFields:i})}else throw new Error("Invalid image template");n.push(s)}else typeof i=="object"&&n.push(new _L({template:i,templateFormat:r==null?void 0:r.templateFormat}));return new this({prompt:n,additionalOptions:r})}async format(t){if(this.prompt instanceof Mb){const r=await this.prompt.format(t);return this.createMessage(r)}else{const r=[];for(const n of this.prompt){let i={};if(!("inputVariables"in n))throw new Error(`Prompt ${n} does not have inputVariables defined.`);for(const a of n.inputVariables)i||(i={[a]:t[a]}),i={...i,[a]:t[a]};if(n instanceof Mb){const a=await n.format(i);let s;"additionalContentFields"in n&&(s=n.additionalContentFields),a!==""&&r.push({...s,type:"text",text:a})}else if(n instanceof RA){const a=await n.format(i);let s;"additionalContentFields"in n&&(s=n.additionalContentFields),r.push({...s,type:"image_url",image_url:a})}else if(n instanceof _L){const a=await n.format(i);let s;"additionalContentFields"in n&&(s=n.additionalContentFields),r.push({...s,...a})}}return this.createMessage(r)}}async formatMessages(t){return[await this.format(t)]}},i8=class extends n8{static _messageClass(){return ms}static lc_name(){return"HumanMessagePromptTemplate"}},Koe=class extends n8{static _messageClass(){return da}static lc_name(){return"AIMessagePromptTemplate"}},Yoe=class extends n8{static _messageClass(){return Bc}static lc_name(){return"SystemMessagePromptTemplate"}};function n$e(e){return typeof e.formatMessages=="function"}function i$e(e,t){if(n$e(e)||ji(e))return e;if(Array.isArray(e)&&e[0]==="placeholder"){const i=e[1];if((t==null?void 0:t.templateFormat)==="mustache"&&typeof i=="string"&&i.slice(0,2)==="{{"&&i.slice(-2)==="}}"){const a=i.slice(2,-2);return new AL({variableName:a,optional:!0})}else if(typeof i=="string"&&i[0]==="{"&&i[i.length-1]==="}"){const a=i.slice(1,-1);return new AL({variableName:a,optional:!0})}throw new Error(`Invalid placeholder template for format ${(t==null?void 0:t.templateFormat)??'"f-string"'}: "${e[1]}". Expected a variable name surrounded by ${(t==null?void 0:t.templateFormat)==="mustache"?"double":"single"} curly braces.`)}const r=Iu(e);let n;if(typeof r.content=="string"?n=r.content:n=r.content.map(i=>"text"in i?{...i,text:i.text}:"image_url"in i?{...i,image_url:i.image_url}:i),r._getType()==="human")return i8.fromTemplate(n,t);if(r._getType()==="ai")return Koe.fromTemplate(n,t);if(r._getType()==="system")return Yoe.fromTemplate(n,t);if(mp.isInstance(r))return qoe.fromTemplate(r.content,r.role,t);throw new Error(`Could not coerce message prompt template from input. Received message type: "${r._getType()}".`)}function a$e(e){return e.constructor.lc_name()==="MessagesPlaceholder"}var a8=class LA extends r8{constructor(r){super(r);L(this,"promptMessages");L(this,"validateTemplate",!0);L(this,"templateFormat","f-string");if(r.templateFormat==="mustache"&&r.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,r),this.validateTemplate){const n=new Set;for(const l of this.promptMessages)if(!(l instanceof Pl))for(const c of l.inputVariables)n.add(c);const i=this.inputVariables,a=new Set(this.partialVariables?i.concat(Object.keys(this.partialVariables)):i),s=new Set([...a].filter(l=>!n.has(l)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const o=new Set([...n].filter(l=>!a.has(l)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are used in prompt messages but not in the prompt template.`)}}static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}_getPromptType(){return"chat"}async _parseImagePrompts(r,n){if(typeof r.content=="string")return r;const i=await Promise.all(r.content.map(async a=>{if(a.type!=="image_url")return a;let s="";typeof a.image_url=="string"?s=a.image_url:typeof a.image_url=="object"&&a.image_url!==null&&"url"in a.image_url&&typeof a.image_url.url=="string"&&(s=a.image_url.url);const l=await Fh.fromTemplate(s,{templateFormat:this.templateFormat}).format(n);return typeof a.image_url=="object"&&a.image_url!==null&&"url"in a.image_url?a.image_url.url=l:a.image_url=l,a}));return r.content=i,r}async formatMessages(r){const n=await this.mergePartialAndUserVariables(r);let i=[];for(const a of this.promptMessages)if(a instanceof Pl)i.push(await this._parseImagePrompts(a,n));else{let s;this.templateFormat==="mustache"?s={...n}:s=a.inputVariables.reduce((l,c)=>{if(!(c in n)&&!(a$e(a)&&a.optional))throw o2(new Error(`Missing value for input variable \`${c.toString()}\``),"INVALID_PROMPT_INPUT");return l[c]=n[c],l},{});const o=await a.formatMessages(s);i=i.concat(o)}return i}async partial(r){const n=this.inputVariables.filter(s=>!(s in r)),i={...this.partialVariables??{},...r},a={...this,inputVariables:n,partialVariables:i};return new LA(a)}static fromTemplate(r,n){const i=Fh.fromTemplate(r,n),a=new i8({prompt:i});return this.fromMessages([a])}static fromMessages(r,n){const i=r.reduce((o,l)=>o.concat(l instanceof LA?l.promptMessages:[i$e(l,n)]),[]),a=r.reduce((o,l)=>l instanceof LA?Object.assign(o,l.partialVariables):o,Object.create(null)),s=new Set;for(const o of i)if(!(o instanceof Pl))for(const l of o.inputVariables)l in a||s.add(l);return new this({...n,inputVariables:[...s],promptMessages:i,partialVariables:a,templateFormat:n==null?void 0:n.templateFormat})}},s$e=class TL extends Mb{constructor(r){super(r);L(this,"lc_serializable",!1);L(this,"examples");L(this,"exampleSelector");L(this,"examplePrompt");L(this,"suffix","");L(this,"exampleSeparator",`

`);L(this,"prefix","");L(this,"templateFormat","f-string");L(this,"validateTemplate",!0);if(Object.assign(this,r),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),b2(this.prefix+this.suffix,this.templateFormat,n)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(r){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(r);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(r){const n=this.inputVariables.filter(s=>!(s in r)),i={...this.partialVariables??{},...r},a={...this,inputVariables:n,partialVariables:i};return new TL(a)}async format(r){const n=await this.mergePartialAndUserVariables(r),i=await this.getExamples(n),a=await Promise.all(i.map(o=>this.examplePrompt.format(o))),s=[this.prefix,...a,this.suffix].join(this.exampleSeparator);return Ac(s,this.templateFormat,n)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(r){const{example_prompt:n}=r;if(!n)throw new Error("Missing example prompt");const i=await Fh.deserialize(n);let a;if(Array.isArray(r.examples))a=r.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new TL({inputVariables:r.input_variables,examplePrompt:i,examples:a,exampleSeparator:r.example_separator,prefix:r.prefix,suffix:r.suffix,templateFormat:r.template_format})}},o$e=class Xoe extends r8{constructor(r){super(r);L(this,"lc_serializable",!0);L(this,"examples");L(this,"exampleSelector");L(this,"examplePrompt");L(this,"suffix","");L(this,"exampleSeparator",`

`);L(this,"prefix","");L(this,"templateFormat","f-string");L(this,"validateTemplate",!0);if(this.examples=r.examples,this.examplePrompt=r.examplePrompt,this.exampleSeparator=r.exampleSeparator??`

`,this.exampleSelector=r.exampleSelector,this.prefix=r.prefix??"",this.suffix=r.suffix??"",this.templateFormat=r.templateFormat??"f-string",this.validateTemplate=r.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),b2(this.prefix+this.suffix,this.templateFormat,n)}}_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}async getExamples(r){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(r);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(r){const n=await this.mergePartialAndUserVariables(r);let i=await this.getExamples(n);i=i.map(s=>{const o={};return this.examplePrompt.inputVariables.forEach(l=>{o[l]=s[l]}),o});const a=[];for(const s of i){const o=await this.examplePrompt.formatMessages(s);a.push(...o)}return a}async format(r){const n=await this.mergePartialAndUserVariables(r),i=await this.getExamples(n),s=(await Promise.all(i.map(l=>this.examplePrompt.formatMessages(l)))).flat().map(l=>l.content),o=[this.prefix,...s,this.suffix].join(this.exampleSeparator);return Ac(o,this.templateFormat,n)}async partial(r){const n=this.inputVariables.filter(s=>!(s in r)),i={...this.partialVariables??{},...r},a={...this,inputVariables:n,partialVariables:i};return new Xoe(a)}},l$e=class MA extends w2{constructor(r){super({...r,inputVariables:[]});L(this,"pipelinePrompts");L(this,"finalPrompt");this.pipelinePrompts=r.pipelinePrompts,this.finalPrompt=r.finalPrompt,this.inputVariables=this.computeInputValues()}static lc_name(){return"PipelinePromptTemplate"}computeInputValues(){const r=this.pipelinePrompts.map(i=>i.name),n=this.pipelinePrompts.map(i=>i.prompt.inputVariables.filter(a=>!r.includes(a))).flat();return[...new Set(n)]}static extractRequiredInputValues(r,n){return n.reduce((i,a)=>(i[a]=r[a],i),{})}async formatPipelinePrompts(r){const n=await this.mergePartialAndUserVariables(r);for(const{name:i,prompt:a}of this.pipelinePrompts){const s=MA.extractRequiredInputValues(n,a.inputVariables);a instanceof a8?n[i]=await a.formatMessages(s):n[i]=await a.format(s)}return MA.extractRequiredInputValues(n,this.finalPrompt.inputVariables)}async formatPromptValue(r){return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(r))}async format(r){return this.finalPrompt.format(await this.formatPipelinePrompts(r))}async partial(r){const n={...this};return n.inputVariables=this.inputVariables.filter(i=>!(i in r)),n.partialVariables={...this.partialVariables??{},...r},new MA(n)}serialize(){throw new Error("Not implemented.")}_getPromptType(){return"pipeline"}};function SW(e){return typeof e=="object"&&e!=null&&"withStructuredOutput"in e&&typeof e.withStructuredOutput=="function"}function c$e(e){return typeof e=="object"&&e!=null&&"lc_id"in e&&Array.isArray(e.lc_id)&&e.lc_id.join("/")==="langchain_core/runnables/RunnableBinding"}var u$e=class Zoe extends a8{constructor(r){super(r);L(this,"schema");L(this,"method");L(this,"lc_namespace",["langchain_core","prompts","structured"]);this.schema=r.schema,this.method=r.method}get lc_aliases(){return{...super.lc_aliases,schema:"schema_"}}pipe(r){if(SW(r))return super.pipe(r.withStructuredOutput(this.schema));if(c$e(r)&&SW(r.bound))return super.pipe(new tp({bound:r.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:r.kwargs??{},config:r.config,configFactories:r.configFactories}));throw new Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(r,n,i){return Zoe.fromMessages(r,{schema:n,method:i})}},Joe={};Gt(Joe,{AIMessagePromptTemplate:()=>Koe,BaseChatPromptTemplate:()=>r8,BaseMessagePromptTemplate:()=>JC,BaseMessageStringPromptTemplate:()=>Goe,BasePromptTemplate:()=>w2,BaseStringPromptTemplate:()=>Mb,ChatMessagePromptTemplate:()=>qoe,ChatPromptTemplate:()=>a8,DEFAULT_FORMATTER_MAPPING:()=>lk,DEFAULT_PARSER_MAPPING:()=>Woe,DictPromptTemplate:()=>_L,FewShotChatMessagePromptTemplate:()=>o$e,FewShotPromptTemplate:()=>s$e,HumanMessagePromptTemplate:()=>i8,ImagePromptTemplate:()=>RA,MessagesPlaceholder:()=>AL,PipelinePromptTemplate:()=>l$e,PromptTemplate:()=>Fh,StructuredPrompt:()=>u$e,SystemMessagePromptTemplate:()=>Yoe,checkValidTemplate:()=>b2,interpolateFString:()=>zoe,interpolateMustache:()=>Voe,parseFString:()=>jb,parseMustache:()=>ok,parseTemplate:()=>ck,renderTemplate:()=>Ac});var Qoe={};Gt(Qoe,{BaseDocumentCompressor:()=>f$e});var f$e=class{static isBaseDocumentCompressor(e){return(e==null?void 0:e.compressDocuments)!==void 0}};const xh={and:"and",or:"or",not:"not"},Ir={eq:"eq",ne:"ne",lt:"lt",gt:"gt",lte:"lte",gte:"gte"};var ele=class{},s8=class{accept(e){if(this.exprName==="Operation")return e.visitOperation(this);if(this.exprName==="Comparison")return e.visitComparison(this);if(this.exprName==="StructuredQuery")return e.visitStructuredQuery(this);throw new Error("Unknown Expression type")}},o8=class extends s8{},d$e=class extends o8{constructor(t,r,n){super();L(this,"exprName","Comparison");this.comparator=t,this.attribute=r,this.value=n}},h$e=class extends o8{constructor(t,r){super();L(this,"exprName","Operation");this.operator=t,this.args=r}},p$e=class extends s8{constructor(t,r){super();L(this,"exprName","StructuredQuery");this.query=t,this.filter=r}};function tle(e){return e&&typeof e=="object"&&!Array.isArray(e)}function bc(e){return e?typeof e=="string"&&e.length>0||typeof e=="function"?!1:tle(e)&&Object.keys(e).length===0:!0}function rle(e){if(typeof e=="number")return e%1===0;if(typeof e=="string"){const t=parseInt(e,10);return!Number.isNaN(t)&&t%1===0&&t.toString()===e}return!1}function nle(e){if(typeof e=="number")return e%1!==0;if(typeof e=="string"){const t=parseFloat(e);return!Number.isNaN(t)&&t%1!==0&&t.toString()===e}return!1}function ile(e){return typeof e=="string"&&(Number.isNaN(parseFloat(e))||parseFloat(e).toString()!==e)}function ale(e){return typeof e=="boolean"}function l8(e){let t;if(ile(e))t=e;else if(rle(e))t=parseInt(e,10);else if(nle(e))t=parseFloat(e);else if(ale(e))t=!!e;else throw new Error("Unsupported value type");return t}var c8=class extends ele{},m$e=class extends c8{constructor(t){super();L(this,"allowedOperators");L(this,"allowedComparators");this.allowedOperators=(t==null?void 0:t.allowedOperators)??[xh.and,xh.or],this.allowedComparators=(t==null?void 0:t.allowedComparators)??[Ir.eq,Ir.ne,Ir.gt,Ir.gte,Ir.lt,Ir.lte]}formatFunction(t){if(t in Ir){if(this.allowedComparators.length>0&&this.allowedComparators.indexOf(t)===-1)throw new Error(`Comparator ${t} not allowed. Allowed comparators: ${this.allowedComparators.join(", ")}`)}else if(t in xh){if(this.allowedOperators.length>0&&this.allowedOperators.indexOf(t)===-1)throw new Error(`Operator ${t} not allowed. Allowed operators: ${this.allowedOperators.join(", ")}`)}else throw new Error("Unknown comparator or operator");return`$${t}`}visitOperation(t){var n;const r=(n=t.args)==null?void 0:n.map(i=>i.accept(this));return{[this.formatFunction(t.operator)]:r}}visitComparison(t){return{[t.attribute]:{[this.formatFunction(t.comparator)]:l8(t.value)}}}visitStructuredQuery(t){let r={};return t.filter&&(r={filter:t.filter.accept(this)}),r}mergeFilters(t,r,n="and",i=!1){if(!(bc(t)&&bc(r))){if(bc(t)||n==="replace")return bc(r)?void 0:r;if(bc(r))return i?t:n==="and"?void 0:t;if(n==="and")return{$and:[t,r]};if(n==="or")return{$or:[t,r]};throw new Error("Unknown merge type")}}},g$e=class extends c8{constructor(){super(...arguments);L(this,"allowedOperators",[xh.and,xh.or]);L(this,"allowedComparators",[Ir.eq,Ir.ne,Ir.gt,Ir.gte,Ir.lt,Ir.lte])}formatFunction(){throw new Error("Not implemented")}getAllowedComparatorsForType(t){switch(t){case"string":return[Ir.eq,Ir.ne,Ir.gt,Ir.gte,Ir.lt,Ir.lte];case"number":return[Ir.eq,Ir.ne,Ir.gt,Ir.gte,Ir.lt,Ir.lte];case"boolean":return[Ir.eq,Ir.ne];default:throw new Error(`Unsupported data type: ${t}`)}}getComparatorFunction(t){switch(t){case Ir.eq:return(r,n)=>r===n;case Ir.ne:return(r,n)=>r!==n;case Ir.gt:return(r,n)=>r>n;case Ir.gte:return(r,n)=>r>=n;case Ir.lt:return(r,n)=>r<n;case Ir.lte:return(r,n)=>r<=n;default:throw new Error("Unknown comparator")}}getOperatorFunction(t){switch(t){case xh.and:return(r,n)=>r&&n;case xh.or:return(r,n)=>r||n;default:throw new Error("Unknown operator")}}visitOperation(t){const{operator:r,args:n}=t;if(this.allowedOperators.includes(r)){const i=this.getOperatorFunction(r);return a=>n?n.reduce((s,o)=>{const l=o.accept(this);if(typeof l=="function")return i(s,l(a));throw new Error("Filter is not a function")},!0):!0}else throw new Error("Operator not allowed")}visitComparison(t){const{comparator:r,attribute:n,value:i}=t,a=[Ir.ne];if(this.allowedComparators.includes(r)){if(!this.getAllowedComparatorsForType(typeof i).includes(r))throw new Error(`'${r}' comparator not allowed to be used with ${typeof i}`);const s=this.getComparatorFunction(r);return o=>{const l=o.metadata[n];return l===void 0?!!a.includes(r):s(l,l8(i))}}else throw new Error("Comparator not allowed")}visitStructuredQuery(t){var n;if(!t.filter)return{};const r=(n=t.filter)==null?void 0:n.accept(this);if(typeof r!="function")throw new Error("Structured query filter is not a function");return{filter:r}}mergeFilters(t,r,n="and"){if(!(bc(t)&&bc(r))){if(bc(t)||n==="replace")return bc(r)?void 0:r;if(bc(r))return n==="and"?void 0:t;if(n==="and")return i=>t(i)&&r(i);if(n==="or")return i=>t(i)||r(i);throw new Error("Unknown merge type")}}},sle={};Gt(sle,{BaseTranslator:()=>c8,BasicTranslator:()=>m$e,Comparators:()=>Ir,Comparison:()=>d$e,Expression:()=>s8,FilterDirective:()=>o8,FunctionalTranslator:()=>g$e,Operation:()=>h$e,Operators:()=>xh,StructuredQuery:()=>p$e,Visitor:()=>ele,castValue:()=>l8,isBoolean:()=>ale,isFilterEmpty:()=>bc,isFloat:()=>nle,isInt:()=>rle,isObject:()=>tle,isString:()=>ile});const y$e=(e,t)=>{Qne.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>ZOe(e,r)},flatten:{value:r=>XOe(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},QC=Ar("ZodError",y$e,{Parent:Error}),v$e=eie(QC),w$e=tie(QC),x$e=nie(QC),b$e=iie(QC),ho=Ar("ZodType",(e,t)=>(Wa.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>El(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>v$e(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>x$e(e,r,n),e.parseAsync=async(r,n)=>w$e(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>b$e(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(H$e(r,n)),e.superRefine=r=>e.check(G$e(r)),e.overwrite=r=>e.check(CPe(r)),e.optional=()=>EW(e),e.nullable=()=>AW(e),e.nullish=()=>EW(AW(e)),e.nonoptional=r=>$$e(e,r),e.array=()=>E$e(e),e.or=r=>T$e([e,r]),e.and=r=>C$e(e,r),e.transform=r=>TW(e,P$e(r)),e.default=r=>L$e(e,r),e.prefault=r=>D$e(e,r),e.catch=r=>B$e(e,r),e.pipe=r=>TW(e,r),e.readonly=()=>V$e(e),e.describe=r=>{const n=e.clone();return wa.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=wa.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return wa.get(e);const n=e.clone();return wa.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),_$e=Ar("ZodAny",(e,t)=>{oPe.init(e,t),ho.init(e,t)});function yE(){return SPe(_$e)}const S$e=Ar("ZodArray",(e,t)=>{uPe.init(e,t),ho.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(gz(r,n)),e.nonempty=r=>e.check(gz(1,r)),e.max=(r,n)=>e.check(TPe(r,n)),e.length=(r,n)=>e.check(kPe(r,n)),e.unwrap=()=>e.element});function E$e(e,t){return OPe(S$e,e,t)}const A$e=Ar("ZodUnion",(e,t)=>{fPe.init(e,t),ho.init(e,t),e.options=t.options});function T$e(e,t){return new A$e({type:"union",options:e,...vd(t)})}const k$e=Ar("ZodIntersection",(e,t)=>{dPe.init(e,t),ho.init(e,t)});function C$e(e,t){return new k$e({type:"intersection",left:e,right:t})}const O$e=Ar("ZodTransform",(e,t)=>{hPe.init(e,t),ho.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=a=>{if(typeof a=="string")r.issues.push(xb(a,r.value,t));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!0),r.issues.push(xb(s))}};const i=t.transform(r.value,r);return i instanceof Promise?i.then(a=>(r.value=a,r)):(r.value=i,r)}});function P$e(e){return new O$e({type:"transform",transform:e})}const N$e=Ar("ZodOptional",(e,t)=>{r$.init(e,t),ho.init(e,t),e.unwrap=()=>e._zod.def.innerType});function EW(e){return new N$e({type:"optional",innerType:e})}const I$e=Ar("ZodNullable",(e,t)=>{pPe.init(e,t),ho.init(e,t),e.unwrap=()=>e._zod.def.innerType});function AW(e){return new I$e({type:"nullable",innerType:e})}const R$e=Ar("ZodDefault",(e,t)=>{mPe.init(e,t),ho.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function L$e(e,t){return new R$e({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const M$e=Ar("ZodPrefault",(e,t)=>{gPe.init(e,t),ho.init(e,t),e.unwrap=()=>e._zod.def.innerType});function D$e(e,t){return new M$e({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const j$e=Ar("ZodNonOptional",(e,t)=>{yPe.init(e,t),ho.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $$e(e,t){return new j$e({type:"nonoptional",innerType:e,...vd(t)})}const F$e=Ar("ZodCatch",(e,t)=>{vPe.init(e,t),ho.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function B$e(e,t){return new F$e({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const U$e=Ar("ZodPipe",(e,t)=>{wPe.init(e,t),ho.init(e,t),e.in=t.in,e.out=t.out});function TW(e,t){return new U$e({type:"pipe",in:e,out:t})}const z$e=Ar("ZodReadonly",(e,t)=>{xPe.init(e,t),ho.init(e,t)});function V$e(e){return new z$e({type:"readonly",innerType:e})}const ole=Ar("ZodCustom",(e,t)=>{bPe.init(e,t),ho.init(e,t)});function W$e(e){const t=new r1({check:"custom"});return t._zod.check=e,t}function lle(e,t){return PPe(ole,()=>!0,t)}function H$e(e,t={}){return NPe(ole,e,t)}function G$e(e){const t=W$e(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(xb(n,r.value,t._zod.def));else{const i=n;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),r.issues.push(xb(i))}},e(r.value,r)));return t}var cle={};Gt(cle,{BaseToolkit:()=>q$e,DynamicStructuredTool:()=>dle,DynamicTool:()=>fle,StructuredTool:()=>eO,Tool:()=>ule,ToolInputParsingException:()=>XT,isLangChainTool:()=>d2,isRunnableToolLike:()=>j$,isStructuredTool:()=>D$,isStructuredToolParams:()=>$$,tool:()=>tO});var eO=class extends W${constructor(t){super(t??{});L(this,"extras");L(this,"returnDirect",!1);L(this,"verboseParsingErrors",!1);L(this,"responseFormat","content");L(this,"defaultConfig");this.verboseParsingErrors=(t==null?void 0:t.verboseParsingErrors)??this.verboseParsingErrors,this.responseFormat=(t==null?void 0:t.responseFormat)??this.responseFormat,this.defaultConfig=(t==null?void 0:t.defaultConfig)??this.defaultConfig,this.metadata=(t==null?void 0:t.metadata)??this.metadata,this.extras=(t==null?void 0:t.extras)??this.extras}get lc_namespace(){return["langchain","tools"]}async invoke(t,r){let n,i=zr(Al(this.defaultConfig,r));return mx(t)?(n=t.args,i={...i,toolCall:t}):n=t,this.call(n,i)}async call(t,r,n){const i=mx(t)?t.args:t;let a;if(dp(this.schema))try{a=await RC(this.schema,i)}catch(m){let p="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(p=`${p}
Details: ${m.message}`),hie(m)&&(p=`${p}

${QOe(m)}`),new XT(p,JSON.stringify(t))}else{const m=Vn(i,this.schema);if(!m.valid){let p="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(p=`${p}
Details: ${m.errors.map(y=>`${y.keywordLocation}: ${y.error}`).join(`
`)}`),new XT(p,JSON.stringify(t))}a=i}const s=c2(r),o=$s.configure(s.callbacks,this.callbacks,s.tags||n,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),l=await(o==null?void 0:o.handleToolStart(this.toJSON(),typeof t=="string"?t:JSON.stringify(t),s.runId,void 0,void 0,void 0,s.runName));delete s.runId;let c;try{c=await this._call(a,l,s)}catch(m){throw await(l==null?void 0:l.handleToolError(m)),m}let u,f;if(this.responseFormat==="content_and_artifact")if(Array.isArray(c)&&c.length===2)[u,f]=c;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(c)}`);else u=c;let d;mx(t)&&(d=t.id),!d&&xIe(s)&&(d=s.toolCall.id);const h=K$e({content:u,artifact:f,toolCallId:d,name:this.name,metadata:this.metadata});return await(l==null?void 0:l.handleToolEnd(h)),h}},ule=class extends eO{constructor(t){super(t);L(this,"schema",hp({input:Tm().optional()}).transform(t=>t.input))}call(t,r){const n=typeof t=="string"||t==null?{input:t}:t;return super.call(n,r)}},fle=class extends ule{constructor(t){super(t);L(this,"name");L(this,"description");L(this,"func");this.name=t.name,this.description=t.description,this.func=t.func,this.returnDirect=t.returnDirect??this.returnDirect}static lc_name(){return"DynamicTool"}async call(t,r){const n=c2(r);return n.runName===void 0&&(n.runName=this.name),super.call(t,n)}async _call(t,r,n){return this.func(t,r,n)}},dle=class extends eO{constructor(t){super(t);L(this,"description");L(this,"func");L(this,"schema");this.name=t.name,this.description=t.description,this.func=t.func,this.returnDirect=t.returnDirect??this.returnDirect,this.schema=t.schema}static lc_name(){return"DynamicStructuredTool"}async call(t,r,n){const i=c2(r);return i.runName===void 0&&(i.runName=this.name),super.call(t,i,n)}_call(t,r,n){return this.func(t,r,n)}},q$e=class{getTools(){return this.tools}};function tO(e,t){var s;const r=i$(t.schema),n=px(t.schema);if(!t.schema||r||n)return new fle({...t,description:t.description??((s=t.schema)==null?void 0:s.description)??`${t.name} tool`,func:async(o,l,c)=>new Promise((u,f)=>{const d=Qr(c,{callbacks:l==null?void 0:l.getChild()});ba.runWithConfig(id(d),async()=>{try{u(e(o,d))}catch(h){f(h)}})})});const i=t.schema,a=t.description??t.schema.description??`${t.name} tool`;return new dle({...t,description:a,schema:i,func:async(o,l,c)=>new Promise((u,f)=>{let d;const h=()=>{c!=null&&c.signal&&d&&c.signal.removeEventListener("abort",d)};c!=null&&c.signal&&(d=()=>{h(),f(Ob(c.signal))},c.signal.addEventListener("abort",d,{once:!0}));const m=Qr(c,{callbacks:l==null?void 0:l.getChild()});ba.runWithConfig(id(m),async()=>{var p;try{const y=await e(o,m);if((p=c==null?void 0:c.signal)!=null&&p.aborted){h();return}h(),u(y)}catch(y){h(),f(y)}})})})}function K$e(e){const{content:t,artifact:r,toolCallId:n,metadata:i}=e;return n&&!p$(t)?typeof t=="string"||Array.isArray(t)&&t.every(a=>typeof a=="object")?new Fu({status:"success",content:t,artifact:r,tool_call_id:n,name:e.name,metadata:i}):new Fu({status:"success",content:Y$e(t),artifact:r,tool_call_id:n,name:e.name,metadata:i}):t}function Y$e(e){try{return JSON.stringify(e)??""}catch{return`${e}`}}var hle={};Gt(hle,{RunCollectorCallbackHandler:()=>X$e});var X$e=class extends wd{constructor({exampleId:t}={}){super({_awaitHandler:!0});L(this,"name","run_collector");L(this,"exampleId");L(this,"tracedRuns");this.exampleId=t,this.tracedRuns=[]}async persistRun(t){const r={...t};r.reference_example_id=this.exampleId,this.tracedRuns.push(r)}},Z$e={},ple={};Gt(ple,{context:()=>J$e});function J$e(e,...t){const r=e.raw;let n="";for(let i=0;i<r.length;i++){const a=r[i].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{");if(n+=a,i<t.length){const s=Q$e(t[i],n);n+=typeof s=="string"?s:JSON.stringify(s)}}return n=e8e(n),n=n.trim(),n=n.replace(/\\n/g,`
`),n}function Q$e(e,t){if(typeof e!="string"||!e.includes(`
`))return e;const n=t.slice(t.lastIndexOf(`
`)+1).match(/^(\s+)/);if(n){const i=n[1];return e.replace(/\n/g,`
${i}`)}return e}function e8e(e){const t=e.split(`
`);let r=null;for(const n of t){const i=n.match(/^(\s+)\S+/);if(i){const a=i[1].length;r===null?r=a:r=Math.min(r,a)}}return r===null?e:t.map(n=>n[0]===" "||n[0]==="	"?n.slice(r):n).join(`
`)}var mle={};Gt(mle,{EventStreamContentType:()=>t8e,convertEventStreamToIterableReadableDataStream:()=>n8e,getBytes:()=>gle,getLines:()=>yle,getMessages:()=>vle});const t8e="text/event-stream";async function gle(e,t){if(e instanceof ReadableStream){const r=e.getReader();for(;;){const n=await r.read();if(n.done){t(new Uint8Array,!0);break}t(n.value)}}else try{for await(const r of e)t(new Uint8Array(r));t(new Uint8Array,!0)}catch(r){throw new Error(["Parsing event source stream failed.","Ensure your implementation of fetch returns a web or Node readable stream.",`Error: ${r.message}`].join(`
`))}}var ty=function(e){return e[e.NewLine=10]="NewLine",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.Colon=58]="Colon",e}(ty||{});function yle(e){let t,r,n,i=!1;return function(s,o){if(o){e(s,0,!0);return}t===void 0?(t=s,r=0,n=-1):t=r8e(t,s);const l=t.length;let c=0;for(;r<l;){i&&(t[r]===ty.NewLine&&(c=++r),i=!1);let u=-1;for(;r<l&&u===-1;++r)switch(t[r]){case ty.Colon:n===-1&&(n=r-c);break;case ty.CarriageReturn:i=!0;case ty.NewLine:u=r;break}if(u===-1)break;e(t.subarray(c,u),n),c=r,n=-1}c===l?t=void 0:c!==0&&(t=t.subarray(c),r-=c)}}function vle(e,t,r){let n=P4();const i=new TextDecoder;return function(s,o,l){if(l){i8e(n)||(e==null||e(n),n=P4());return}if(s.length===0)e==null||e(n),n=P4();else if(o>0){const c=i.decode(s.subarray(0,o)),u=o+(s[o+1]===ty.Space?2:1),f=i.decode(s.subarray(u));switch(c){case"data":n.data=n.data?n.data+`
`+f:f;break;case"event":n.event=f;break;case"id":t==null||t(n.id=f);break;case"retry":{const d=parseInt(f,10);Number.isNaN(d)||r==null||r(n.retry=d);break}}}}}function r8e(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function P4(){return{data:"",event:"",id:"",retry:void 0}}function n8e(e,t){const r=new ReadableStream({async start(n){const i=vle(s=>{if(s.event==="error")throw new Error(s.data??"Unspecified event streaming error.");s.event==="metadata"?t==null||t(s):s.data&&n.enqueue(s.data)});await gle(e,yle((s,o,l)=>{i(s,o,l),l&&n.close()}))}});return uo.fromReadableStream(r)}function i8e(e){return e.data===""&&e.event===""&&e.id===""&&e.retry===void 0}var a8e={};function wle(e,t){let r=0,n=0,i=0;for(let a=0;a<e.length;a++)r+=e[a]*t[a],n+=e[a]*e[a],i+=t[a]*t[a];return r/(Math.sqrt(n)*Math.sqrt(i))}function s8e(e,t){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*t[n];return r}function o8e(e,t){let r=0;for(let n=0;n<e.length;n++)r+=(e[n]-t[n])*(e[n]-t[n]);return r}function l8e(e,t){return Math.sqrt(o8e(e,t))}var xle={};Gt(xle,{cosineSimilarity:()=>kL,euclideanDistance:()=>f8e,innerProduct:()=>u8e,matrixFunc:()=>rO,maximalMarginalRelevance:()=>d8e,normalize:()=>c8e});function rO(e,t,r){if(e.length===0||e[0].length===0||t.length===0||t[0].length===0)return[[]];if(e[0].length!==t[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[e.length,e[0].length]} and Y has shape ${[t.length,t[0].length]}.`);return e.map(n=>t.map(i=>r(n,i)).map(i=>Number.isNaN(i)?0:i))}function c8e(e,t=!1){const r=h8e(e);return e.map(n=>n.map(i=>t?1-i/r:i/r))}function kL(e,t){return rO(e,t,wle)}function u8e(e,t){return rO(e,t,s8e)}function f8e(e,t){return rO(e,t,l8e)}function d8e(e,t,r=.5,n=4){if(Math.min(n,t.length)<=0)return[];const i=Array.isArray(e[0])?e:[e],a=kL(i,t)[0],s=ble(a).maxIndex,o=[t[s]],l=[s];for(;l.length<Math.min(n,t.length);){let c=-1/0,u=-1;const f=kL(t,o);a.forEach((d,h)=>{if(l.includes(h))return;const m=Math.max(...f[h]),p=r*d-(1-r)*m;p>c&&(c=p,u=h)}),o.push(t[u]),l.push(u)}return l}function ble(e){if(e.length===0)return{maxIndex:-1,maxValue:NaN};let t=e[0],r=0;for(let n=1;n<e.length;n+=1)e[n]>t&&(r=n,t=e[n]);return{maxIndex:r,maxValue:t}}function h8e(e){return e.reduce((t,r)=>Math.max(t,ble(r).maxValue),0)}var _le={};Gt(_le,{isCloudMetadata:()=>CL,isLocalhost:()=>OL,isPrivateIp:()=>kle,isSafeUrl:()=>b8e,isSameOrigin:()=>_8e,validateSafeUrl:()=>Cle});const p8e=["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","127.0.0.0/8","169.254.0.0/16","0.0.0.0/8","::1/128","fc00::/7","fe80::/10","ff00::/8"],m8e=["169.254.169.254","169.254.170.2","100.100.100.200"],g8e=["metadata.google.internal","metadata","instance-data"],y8e=["localhost","localhost.localdomain"],v8e=/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/;function Sle(e){return v8e.test(e)}function nO(e){return Tle(e)!==null}function Ele(e){return Sle(e)||nO(e)}function Ale(e){if(Sle(e))return e.split(".").map(t=>parseInt(t,10));if(nO(e)){const t=Tle(e);if(!t)return null;const r=t.split(":"),n=[];for(const i of r)n.push(parseInt(i,16));return n}return null}function Tle(e){if(!e||typeof e!="string"||!e.includes(":")||!/^[0-9a-fA-F:]+$/.test(e))return null;let t=e;if(t.includes("::")){const n=t.split("::");if(n.length>2)return null;const[i,a]=n,s=i?i.split(":"):[],o=a?a.split(":"):[],l=8-(s.length+o.length);if(l<0)return null;const c=Array(l).fill("0");t=[...s,...c,...o].filter(u=>u!=="").join(":")}const r=t.split(":");if(r.length!==8)return null;for(const n of r)if(n.length===0||n.length>4||!/^[0-9a-fA-F]+$/.test(n))return null;return r.map(n=>n.padStart(4,"0").toLowerCase()).join(":")}function w8e(e){const[t,r]=e.split("/");if(!t||!r)return null;const n=Ale(t);if(!n)return null;const i=parseInt(r,10);if(isNaN(i))return null;const a=nO(t);return a&&i>128||!a&&i>32?null:{addr:n,prefixLen:i,isIpv6:a}}function x8e(e,t){const r=Ale(e);if(!r)return!1;const n=w8e(t);if(!n)return!1;const i=nO(e);if(i!==n.isIpv6)return!1;const{addr:a,prefixLen:s}=n;if(i)for(let o=0;o<Math.ceil(s/16);o++){const c=65535<<16-Math.min(16,s-o*16)&65535;if((r[o]&c)!==(a[o]&c))return!1}else for(let o=0;o<Math.ceil(s/8);o++){const c=255<<8-Math.min(8,s-o*8)&255;if((r[o]&c)!==(a[o]&c))return!1}return!0}function kle(e){if(!Ele(e))return!1;for(const t of p8e)if(x8e(e,t))return!0;return!1}function CL(e,t){if(m8e.includes(t||""))return!0;const r=e.toLowerCase();return!!g8e.includes(r)}function OL(e,t){if(t&&(t==="127.0.0.1"||t==="::1"||t==="0.0.0.0"||t.startsWith("127.")))return!0;const r=e.toLowerCase();return!!y8e.includes(r)}function Cle(e,t){const r=(t==null?void 0:t.allowPrivate)??!1,n=(t==null?void 0:t.allowHttp)??!1;try{let i;try{i=new URL(e)}catch{throw new Error(`Invalid URL: ${e}`)}const a=i.hostname;if(!a)throw new Error("URL missing hostname.");if(CL(a))throw new Error(`URL points to cloud metadata endpoint: ${a}`);if(OL(a)){if(!r)throw new Error(`URL points to localhost: ${a}`);return e}const s=i.protocol;if(s!=="http:"&&s!=="https:")throw new Error(`Invalid URL scheme: ${s}. Only http and https are allowed.`);if(s==="http:"&&!n)throw new Error("HTTP scheme not allowed. Use HTTPS or set allowHttp: true.");if(Ele(a)){const o=a;if(OL(a,o)){if(!r)throw new Error(`URL points to localhost: ${a}`);return e}if(CL(a,o))throw new Error(`URL resolves to cloud metadata IP: ${o} (${a})`);if(kle(o)&&!r)throw new Error(`URL resolves to private IP: ${o} (${a}). Set allowPrivate: true to allow.`);return e}return e}catch(i){throw i&&typeof i=="object"&&"message"in i?i:new Error(`URL validation failed: ${i}`)}}function b8e(e,t){try{return Cle(e,t),!0}catch{return!1}}function _8e(e,t){try{return new URL(e).origin===new URL(t).origin}catch{return!1}}var S8e=class extends o1{_combineLLMOutput(){return[]}_llmType(){return"fake"}async _generate(e,t,r){var i;if((i=t==null?void 0:t.stop)!=null&&i.length)return{generations:[{message:new da(t.stop[0]),text:t.stop[0]}]};const n=e.map(a=>typeof a.content=="string"?a.content:JSON.stringify(a.content,null,2)).join(`
`);return await(r==null?void 0:r.handleLLMNewToken(n)),{generations:[{message:new da(n),text:n}],llmOutput:{}}}},E8e=class Ole extends o1{constructor({sleep:r=50,responses:n=[],chunks:i=[],toolStyle:a="openai",thrownErrorString:s,...o}){super(o);L(this,"sleep",50);L(this,"responses",[]);L(this,"chunks",[]);L(this,"toolStyle","openai");L(this,"thrownErrorString");L(this,"tools",[]);this.sleep=r,this.responses=n,this.chunks=i,this.toolStyle=a,this.thrownErrorString=s}_llmType(){return"fake"}bindTools(r){const n=[...this.tools,...r],i=n.map(o=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:o.name,description:o.description,parameters:Ps(o.schema)}};case"anthropic":return{name:o.name,description:o.description,input_schema:Ps(o.schema)};case"bedrock":return{toolSpec:{name:o.name,description:o.description,inputSchema:Ps(o.schema)}};case"google":return{name:o.name,description:o.description,parameters:Ps(o.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),a=this.toolStyle==="google"?[{functionDeclarations:i}]:i,s=new Ole({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return s.tools=n,s.withConfig({tools:a})}async _generate(r,n,i){var o,l,c,u;if(this.thrownErrorString)throw new Error(this.thrownErrorString);const a=((l=(o=this.responses)==null?void 0:o[0])==null?void 0:l.content)??r[0].content??"";return{generations:[{text:"",message:new da({content:a,tool_calls:(u=(c=this.chunks)==null?void 0:c[0])==null?void 0:u.tool_calls})}]}}async*_streamResponseChunks(r,n,i){var o,l,c,u,f;if(this.thrownErrorString)throw new Error(this.thrownErrorString);if((o=this.chunks)!=null&&o.length){for(const d of this.chunks){const h=new rm({message:new Dl({content:d.content,tool_calls:d.tool_calls,additional_kwargs:d.additional_kwargs??{}}),text:((l=d.content)==null?void 0:l.toString())??""});if((c=n.signal)!=null&&c.aborted)break;yield h,await(i==null?void 0:i.handleLLMNewToken(d.content,void 0,void 0,void 0,void 0,{chunk:h}))}return}const a=((u=this.responses)==null?void 0:u[0])??new da(typeof r[0].content=="string"?r[0].content:""),s=typeof a.content=="string"?a.content:"";for(const d of s){await new Promise(m=>setTimeout(m,this.sleep));const h=new rm({message:new Dl({content:d}),text:d});if((f=n.signal)!=null&&f.aborted)break;yield h,await(i==null?void 0:i.handleLLMNewToken(d,void 0,void 0,void 0,void 0,{chunk:h}))}}},A8e=class Ple extends o1{constructor(r){super(r);L(this,"lc_serializable",!0);L(this,"responses");L(this,"i",0);L(this,"sleep");L(this,"emitCustomEvent",!1);L(this,"generationInfo");L(this,"tools",[]);L(this,"toolStyle","openai");const{responses:n,sleep:i,emitCustomEvent:a,generationInfo:s}=r;this.responses=n,this.sleep=i,this.emitCustomEvent=a??this.emitCustomEvent,this.generationInfo=s}static lc_name(){return"FakeListChatModel"}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}async _generate(r,n,i){var a;if(await this._sleepIfRequested(),n!=null&&n.thrownErrorString)throw new Error(n.thrownErrorString);if(this.emitCustomEvent&&await(i==null?void 0:i.handleCustomEvent("some_test_event",{someval:!0})),(a=n==null?void 0:n.stop)!=null&&a.length)return{generations:[this._formatGeneration(n.stop[0])]};{const s=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(s)],llmOutput:{}}}}_formatGeneration(r){return{message:new da(r),text:r}}async*_streamResponseChunks(r,n,i){var o;const a=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&await(i==null?void 0:i.handleCustomEvent("some_test_event",{someval:!0}));const s=[...a];for(let l=0;l<s.length;l++){const c=s[l],u=l===s.length-1;if(await this._sleepIfRequested(),n!=null&&n.thrownErrorString)throw new Error(n.thrownErrorString);const f=this._createResponseChunk(c,u?this.generationInfo:void 0);if((o=n.signal)!=null&&o.aborted)break;yield f,i==null||i.handleLLMNewToken(c)}}async _sleepIfRequested(){this.sleep!==void 0&&await this._sleep()}async _sleep(){return new Promise(r=>{setTimeout(()=>r(),this.sleep)})}_createResponseChunk(r,n){return new rm({message:new Dl({content:r}),text:r,generationInfo:n})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}bindTools(r){const n=[...this.tools,...r],i=n.map(o=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:o.name,description:o.description,parameters:Ps(o.schema)}};case"anthropic":return{name:o.name,description:o.description,input_schema:Ps(o.schema)};case"bedrock":return{toolSpec:{name:o.name,description:o.description,inputSchema:Ps(o.schema)}};case"google":return{name:o.name,description:o.description,parameters:Ps(o.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),a=this.toolStyle==="google"?[{functionDeclarations:i}]:i,s=new Ple({responses:this.responses,sleep:this.sleep,emitCustomEvent:this.emitCustomEvent,generationInfo:this.generationInfo});return s.tools=n,s.toolStyle=this.toolStyle,s.i=this.i,s.withConfig({tools:a})}withStructuredOutput(r,n){return xd.from(async i=>{var s,o;const a=await this.invoke(i);if((o=(s=a.tool_calls)==null?void 0:s[0])!=null&&o.args)return a.tool_calls[0].args;if(typeof a.content=="string")return JSON.parse(a.content);throw new Error("No structured output found")})}},T8e=class extends K${constructor(t){super(t??{});L(this,"vectorSize");this.vectorSize=(t==null?void 0:t.vectorSize)??4}async embedDocuments(t){return Promise.all(t.map(r=>this.embedQuery(r)))}async embedQuery(t){let r=t;r=r.toLowerCase().replaceAll(/[^a-z ]/g,"");const n=r.length%this.vectorSize,i=n===0?0:this.vectorSize-n,a=r.length+i;r=r.padEnd(a," ");const s=r.length/this.vectorSize,o=[];for(let c=0;c<r.length;c+=s)o.push(r.slice(c,c+s));return o.map(c=>{let u=0;for(let d=0;d<c.length;d+=1)u+=c===" "?0:c.charCodeAt(d);return u%26/26})}},k8e=class extends K${constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}},C8e=class extends e8{constructor(t){super(t);L(this,"response");L(this,"thrownErrorString");this.response=t.response,this.thrownErrorString=t.thrownErrorString}_llmType(){return"fake"}async _call(t,r,n){if(this.thrownErrorString)throw new Error(this.thrownErrorString);const i=this.response??t;return await(n==null?void 0:n.handleLLMNewToken(i)),i}},O8e=class extends e8{constructor(t){super(t);L(this,"sleep",50);L(this,"responses");L(this,"thrownErrorString");this.sleep=t.sleep??this.sleep,this.responses=t.responses,this.thrownErrorString=t.thrownErrorString}_llmType(){return"fake"}async _call(t){var n,i;if(this.thrownErrorString)throw new Error(this.thrownErrorString);const r=(n=this.responses)==null?void 0:n[0];return this.responses=(i=this.responses)==null?void 0:i.slice(1),r??t}async*_streamResponseChunks(t,r,n){var a,s;if(this.thrownErrorString)throw new Error(this.thrownErrorString);const i=(a=this.responses)==null?void 0:a[0];this.responses=(s=this.responses)==null?void 0:s.slice(1);for(const o of i??t)await new Promise(l=>setTimeout(l,this.sleep)),yield{text:o,generationInfo:{}},await(n==null?void 0:n.handleLLMNewToken(o))}},P8e=class extends uoe{constructor(){super();L(this,"lc_namespace",["langchain_core","message","fake"]);L(this,"messages",[])}async getMessages(){return this.messages}async addMessage(t){this.messages.push(t)}async addUserMessage(t){this.messages.push(new ms(t))}async addAIMessage(t){this.messages.push(new da(t))}async clear(){this.messages=[]}},N8e=class extends X${constructor(){super();L(this,"lc_namespace",["langchain_core","message","fake"]);L(this,"messages",[])}async addMessage(t){this.messages.push(t)}async getMessages(){return this.messages}},I8e=class extends wd{constructor(){super();L(this,"name","fake_tracer");L(this,"runs",[])}persistRun(t){return this.runs.push(t),Promise.resolve()}},R8e=class extends p2{constructor(){super(...arguments);L(this,"lc_namespace",["tests","fake"])}getFormatInstructions(){return""}async parse(t){return t.split(",").map(r=>r.trim())}},L8e=class extends Z${constructor(t){super();L(this,"lc_namespace",["test","fake"]);L(this,"output",[new $h({pageContent:"foo"}),new $h({pageContent:"bar"})]);this.output=(t==null?void 0:t.output)??this.output}async _getRelevantDocuments(t){return this.output}},M8e=class extends Lr{constructor(t){super(t);L(this,"lc_namespace",["tests","fake"]);L(this,"returnOptions");this.returnOptions=t.returnOptions}async invoke(t,r){return this.returnOptions?r??{}:{input:t}}},D8e=class extends eO{constructor(t){super(t);L(this,"name");L(this,"description");L(this,"schema");this.name=t.name,this.description=t.description,this.schema=t.schema}async _call(t,r){return JSON.stringify(t)}},j8e=class extends wd{constructor(){super();L(this,"runPromiseResolver");L(this,"runPromise");L(this,"name","single_run_extractor");this.runPromise=new Promise(t=>{this.runPromiseResolver=t})}async persistRun(t){this.runPromiseResolver(t)}async extract(){return this.runPromise}},$8e=class Nle extends J${constructor(r,{similarity:n,...i}={}){super(r,i);L(this,"memoryVectors",[]);L(this,"similarity");this.similarity=n??wle}_vectorstoreType(){return"memory"}async addDocuments(r){const n=r.map(({pageContent:i})=>i);return this.addVectors(await this.embeddings.embedDocuments(n),r)}async addVectors(r,n){const i=r.map((a,s)=>({content:n[s].pageContent,embedding:a,metadata:n[s].metadata}));this.memoryVectors=this.memoryVectors.concat(i)}async similaritySearchVectorWithScore(r,n,i){const a=c=>{if(!i)return!0;const u=new $h({metadata:c.metadata,pageContent:c.content});return i(u)},s=this.memoryVectors.filter(a);return s.map((c,u)=>({similarity:this.similarity(r,c.embedding),index:u})).sort((c,u)=>c.similarity>u.similarity?-1:0).slice(0,n).map(c=>[new $h({metadata:s[c.index].metadata,pageContent:s[c.index].content}),c.similarity])}static async fromTexts(r,n,i,a){const s=[];for(let o=0;o<r.length;o+=1){const l=Array.isArray(n)?n[o]:n,c=new $h({pageContent:r[o],metadata:l});s.push(c)}return Nle.fromDocuments(s,i,a)}static async fromDocuments(r,n,i){const a=new this(n,i);return await a.addDocuments(r),a}static async fromExistingIndex(r,n){return new this(r,n)}},Ile={};Gt(Ile,{FakeChatMessageHistory:()=>P8e,FakeChatModel:()=>S8e,FakeEmbeddings:()=>k8e,FakeLLM:()=>C8e,FakeListChatMessageHistory:()=>N8e,FakeListChatModel:()=>A8e,FakeRetriever:()=>L8e,FakeRunnable:()=>M8e,FakeSplitIntoListParser:()=>R8e,FakeStreamingChatModel:()=>E8e,FakeStreamingLLM:()=>O8e,FakeTool:()=>D8e,FakeTracer:()=>I8e,FakeVectorStore:()=>$8e,SingleRunExtractor:()=>j8e,SyntheticEmbeddings:()=>T8e});var Rle={};Gt(Rle,{agents:()=>m6e,caches:()=>Ise,callbacks__base:()=>cae,callbacks__manager:()=>Xae,callbacks__promises:()=>Kae,chat_history:()=>coe,document_loaders__base:()=>yoe,document_loaders__langsmith:()=>woe,documents:()=>boe,embeddings:()=>noe,errors:()=>Xie,example_selectors:()=>Aoe,index:()=>y6e,indexing:()=>Noe,language_models__base:()=>Use,language_models__chat_models:()=>roe,language_models__llms:()=>Ioe,language_models__profile:()=>L6e,load__serializable:()=>Die,memory:()=>foe,messages:()=>Tse,messages__tool:()=>qie,output_parsers:()=>Xse,output_parsers__openai_functions:()=>Doe,output_parsers__openai_tools:()=>Foe,outputs:()=>use,prompt_values:()=>Ose,prompts:()=>Joe,retrievers:()=>moe,retrievers__document_compressors:()=>Qoe,runnables:()=>Wse,runnables__graph:()=>mse,singletons:()=>rse,stores:()=>hoe,structured_query:()=>sle,tools:()=>cle,tracers__base:()=>zae,tracers__console:()=>Wae,tracers__log_stream:()=>lse,tracers__run_collector:()=>hle,tracers__tracer_langchain:()=>Gae,types__stream:()=>Z$e,utils__async_caller:()=>hse,utils__chunk_array:()=>ioe,utils__context:()=>ple,utils__env:()=>tae,utils__event_source_parse:()=>mle,utils__format:()=>a8e,utils__function_calling:()=>kse,utils__hash:()=>Nse,utils__json_patch:()=>qse,utils__json_schema:()=>Tie,utils__math:()=>xle,utils__ssrf:()=>_le,utils__stream:()=>nse,utils__testing:()=>Ile,utils__tiktoken:()=>Fse,utils__types:()=>pie,vectorstores:()=>goe});const F8e=50;function B8e(e){const t={};for(let r=e;r&&r.prototype;r=Object.getPrototypeOf(r))Object.assign(t,Reflect.get(r.prototype,"lc_aliases"));return Object.entries(t).reduce((r,[n,i])=>(r[i]=n,r),{})}async function DA(e){const{optionalImportsMap:t,optionalImportEntrypoints:r,importMap:n,secretsMap:i,secretsFromEnv:a,path:s,depth:o,maxDepth:l}=this,c=s.join(".");if(o>l)throw new Error(`Maximum recursion depth (${l}) exceeded during deserialization. This may indicate a malicious payload or you may need to increase maxDepth.`);if(typeof e!="object"||e==null)return e;if(Array.isArray(e))return Promise.all(e.map((d,h)=>DA.call({...this,path:[...s,`${h}`],depth:o+1},d)));const u=e;if(Mie(u))return YR(u);if("lc"in u&&"type"in u&&"id"in u&&u.lc===1&&u.type==="secret"){const d=u,[h]=d.id;if(h in i)return i[h];if(a){const m=Ru(h);if(m)return m}throw new Error(`Missing secret "${h}" at ${c}`)}if("lc"in u&&"type"in u&&"id"in u&&u.lc===1&&u.type==="not_implemented"){const h=JSON.stringify(u);throw new Error(`Trying to load an object that doesn't implement serialization: ${c} -> ${h}`)}if("lc"in u&&"type"in u&&"id"in u&&"kwargs"in u&&u.lc===1&&u.type==="constructor"){const d=u,h=JSON.stringify(d),[m,...p]=d.id.slice().reverse(),y=p.reverse(),g={langchain_core:Rle,langchain:n};let w=null;const v=[y.join("/")];y[0]==="langchain_community"&&v.push(["langchain",...y.slice(1)].join("/"));const x=v.find(A=>A in t);if(p6e.concat(r).includes(y.join("/"))||x)if(x!==void 0)w=await t[x];else throw new Error(`Missing key "${y.join("/")}" for ${c} in load(optionalImportsMap={})`);else{let A;if(y[0]==="langchain"||y[0]==="langchain_core")A=g[y[0]],y.shift();else throw new Error(`Invalid namespace: ${c} -> ${h}`);if(y.length===0)throw new Error(`Invalid namespace: ${c} -> ${h}`);let O;do{if(O=y.join("__"),O in A)break;y.pop()}while(y.length>0);O in A&&(w=A[O])}if(typeof w!="object"||w===null)throw new Error(`Invalid namespace: ${c} -> ${h}`);const b=w[m]??Object.values(w).find(A=>typeof A=="function"&&DC(A)===m);if(typeof b!="function")throw new Error(`Invalid identifer: ${c} -> ${h}`);const S=await DA.call({...this,path:[...s,"kwargs"],depth:o+1},d.kwargs),T=new b(Lie(S,U4e,B8e(b)));return Object.defineProperty(T.constructor,"name",{value:m}),T}const f={};for(const[d,h]of Object.entries(u))f[d]=await DA.call({...this,path:[...s,d],depth:o+1},h);return f}async function U8e(e,t){const r=JSON.parse(e),n={optionalImportsMap:{},optionalImportEntrypoints:[],secretsMap:{},secretsFromEnv:!1,importMap:{},path:["$"],depth:0,maxDepth:F8e};return DA.call(n,r)}function z8e(e){return e!==null&&e.lc===1&&e.type==="constructor"&&Array.isArray(e.id)}async function PL(e){if(e&&typeof e=="object"){if(Array.isArray(e))return await Promise.all(e.map(r=>PL(r)));{const t={};for(const[r,n]of Object.entries(e))t[r]=await PL(n);if(t.lc===2&&t.type==="undefined")return;if(t.lc===2&&t.type==="constructor"&&Array.isArray(t.id))try{const r=t.id[t.id.length-1];let n;switch(r){case"Set":n=Set;break;case"Map":n=Map;break;case"RegExp":n=RegExp;break;case"Error":n=Error;break;default:return t}return t.method?n[t.method](...t.args||[]):new n(...t.args||[])}catch{return t}else if(z8e(t))return U8e(JSON.stringify(t));return t}}return e}function N4(e,t,r,n){return{lc:2,type:"constructor",id:[e.name],method:t??null,args:r??[],kwargs:n??{}}}function V8e(e){return e===void 0?{lc:2,type:"undefined"}:e instanceof Set||e instanceof Map?N4(e.constructor,void 0,[Array.from(e)]):e instanceof RegExp?N4(RegExp,void 0,[e.source,e.flags]):e instanceof Error?N4(e.constructor,void 0,[e.message]):(e==null?void 0:e.lg_name)==="Send"?{node:e.node,args:e.args}:e}var W8e=class{_dumps(e){return new TextEncoder().encode(d6e(e,(r,n)=>V8e(n)))}async dumpsTyped(e){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]}async _loads(e){const t=JSON.parse(e);return PL(t)}async loadsTyped(e,t){if(e==="bytes")return typeof t=="string"?new TextEncoder().encode(t):t;if(e==="json")return this._loads(typeof t=="string"?t:new TextDecoder().decode(t));throw new Error(`Unknown serialization type: ${e}`)}};function Lle(e){if(typeof e!="object"||e===null)return e;const t=Array.isArray(e)?[]:{};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Lle(e[r]));return t}function Mle(){return{v:4,id:loe(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{}}}function uk(e){return{v:e.v,id:e.id,ts:e.ts,channel_values:{...e.channel_values},channel_versions:{...e.channel_versions},versions_seen:Lle(e.versions_seen)}}function Dle(e,t){return typeof e=="number"&&typeof t=="number"?Math.sign(e-t):String(e).localeCompare(String(t))}function H8e(...e){return e.reduce((t,r,n)=>n===0?r:Dle(t,r)>=0?t:r)}const G8e={[o6e]:-1,[NA]:-2,[l6e]:-3,[c6e]:-4};var mw=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};function q8e(e){if(e.length===0)throw new mw("Namespace cannot be empty.");for(const t of e){if(typeof t!="string")throw new mw(`Invalid namespace label '${t}' found in ${e}. Namespace labels must be strings, but got ${typeof t}.`);if(t.includes("."))throw new mw(`Invalid namespace label '${t}' found in ${e}. Namespace labels cannot contain periods ('.').`);if(t==="")throw new mw(`Namespace labels cannot be empty strings. Got ${t} in ${e}`)}if(e[0]==="langgraph")throw new mw(`Root label for namespace cannot be "langgraph". Got: ${e}`)}var K8e=class{async get(e,t){return(await this.batch([{namespace:e,key:t}]))[0]}async search(e,t={}){const{filter:r,limit:n=10,offset:i=0,query:a}=t;return(await this.batch([{namespacePrefix:e,filter:r,limit:n,offset:i,query:a}]))[0]}async put(e,t,r,n){q8e(e),await this.batch([{namespace:e,key:t,value:r,index:n}])}async delete(e,t){await this.batch([{namespace:e,key:t,value:null}])}async listNamespaces(e={}){const{prefix:t,suffix:r,maxDepth:n,limit:i=100,offset:a=0}=e,s=[];return t&&s.push({matchType:"prefix",path:t}),r&&s.push({matchType:"suffix",path:r}),(await this.batch([{matchConditions:s.length?s:void 0,maxDepth:n,limit:i,offset:a}]))[0]}start(){}stop(){}};const Y8e=e=>"lg_name"in e&&e.lg_name==="AsyncBatchedStore"?e.store:e;var X8e=class extends K8e{constructor(t){super();L(this,"lg_name","AsyncBatchedStore");L(this,"store");L(this,"queue",new Map);L(this,"nextKey",0);L(this,"running",!1);L(this,"processingTask",null);this.store=Y8e(t)}get isRunning(){return this.running}async batch(t){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")}async get(t,r){return this.enqueueOperation({namespace:t,key:r})}async search(t,r){const{filter:n,limit:i=10,offset:a=0,query:s}=r||{};return this.enqueueOperation({namespacePrefix:t,filter:n,limit:i,offset:a,query:s})}async put(t,r,n){return this.enqueueOperation({namespace:t,key:r,value:n})}async delete(t,r){return this.enqueueOperation({namespace:t,key:r,value:null})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}async stop(){this.running=!1,this.processingTask&&await this.processingTask}enqueueOperation(t){return new Promise((r,n)=>{const i=this.nextKey;this.nextKey+=1,this.queue.set(i,{operation:t,resolve:r,reject:n})})}async processBatchQueue(){for(;this.running;){if(await new Promise(r=>{setTimeout(r,0)}),this.queue.size===0)continue;const t=new Map(this.queue);this.queue.clear();try{const r=Array.from(t.values()).map(({operation:i})=>i),n=await this.store.batch(r);t.forEach(({resolve:i},a)=>{const s=Array.from(t.keys()).indexOf(a);i(n[s])})}catch(r){t.forEach(({reject:n})=>{n(r)})}}}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}},Z8e=class{constructor(e){L(this,"serde",new W8e);this.serde=e||this.serde}};function jle(e){return e!=null&&e.lg_is_channel===!0}var yp=class{constructor(){L(this,"ValueType");L(this,"UpdateType");L(this,"lg_is_channel",!0)}consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(e){if(e.name===_a.unminifiable_name)return!1;throw e}}equals(e){return this===e}};const NL=Symbol.for("LG_IS_ONLY_BASE_CHANNEL");function u8(e){if(e[NL]===!0)return e;const t={};for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=e[r];jle(n)&&(t[r]=n)}return Object.assign(t,{[NL]:!0}),t}function fk(e,t){const r=u8(e),n={};for(const i in r){if(!Object.prototype.hasOwnProperty.call(r,i))continue;const a=t.channel_values[i];n[i]=r[i].fromCheckpoint(a)}return Object.assign(n,{[NL]:!0}),n}function c0(e,t,r,n){let i;if(t===void 0)i=e.channel_values;else{i={};for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a))try{i[a]=t[a].checkpoint()}catch(s){if(s.name!==_a.unminifiable_name)throw s}}return{v:4,id:(n==null?void 0:n.id)??loe(r),ts:new Date().toISOString(),channel_values:i,channel_versions:e.channel_versions,versions_seen:e.versions_seen}}const J8e=e=>e!=null&&e.lc_graph_name==="BinaryOperatorAggregate";var dk=class $le extends yp{constructor(r,n){super();L(this,"lc_graph_name","BinaryOperatorAggregate");L(this,"value");L(this,"operator");L(this,"initialValueFactory");this.operator=r,this.initialValueFactory=n,this.value=n==null?void 0:n()}fromCheckpoint(r){const n=new $le(this.operator,this.initialValueFactory);return typeof r<"u"&&(n.value=r),n}update(r){let n=r;if(!n.length)return!1;this.value===void 0&&([this.value]=n,n=n.slice(1));for(const i of n)this.value!==void 0&&(this.value=this.operator(this.value,i));return!0}get(){if(this.value===void 0)throw new _a;return this.value}checkpoint(){if(this.value===void 0)throw new _a;return this.value}isAvailable(){return this.value!==void 0}equals(r){return this===r?!0:J8e(r)?this.operator===r.operator:!1}},iO=class Fle extends yp{constructor(r){super();L(this,"lc_graph_name","LastValue");L(this,"value",[]);this.initialValueFactory=r,r&&(this.value=[r()])}fromCheckpoint(r){const n=new Fle(this.initialValueFactory);return typeof r<"u"&&(n.value=[r]),n}update(r){if(r.length===0)return!1;if(r.length!==1)throw new Mn("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[r[r.length-1]],!0}get(){if(this.value.length===0)throw new _a;return this.value[0]}checkpoint(){if(this.value.length===0)throw new _a;return this.value[0]}isAvailable(){return this.value.length!==0}},Q8e=class Ble extends yp{constructor(){super(...arguments);L(this,"lc_graph_name","LastValueAfterFinish");L(this,"value",[]);L(this,"finished",!1)}fromCheckpoint(r){const n=new Ble;if(typeof r<"u"){const[i,a]=r;n.value=[i],n.finished=a}return n}update(r){return r.length===0?!1:(this.finished=!1,this.value=[r[r.length-1]],!0)}get(){if(this.value.length===0||!this.finished)throw new _a;return this.value[0]}checkpoint(){if(this.value.length!==0)return[this.value[0],this.finished]}consume(){return this.finished?(this.finished=!1,this.value=[],!0):!1}finish(){return!this.finished&&this.value.length>0?(this.finished=!0,!0):!1}isAvailable(){return this.value.length!==0&&this.finished}},IL=class{constructor(e){L(this,"lc_graph_name","AnnotationRoot");L(this,"spec");this.spec=e}static isInstance(e){return typeof e=="object"&&e!==null&&"lc_graph_name"in e&&e.lc_graph_name==="AnnotationRoot"}};const Bh=function(e){return e?RL(e):new iO};Bh.Root=e=>new IL(e);function RL(e){return typeof e=="object"&&e&&"reducer"in e&&e.reducer?new dk(e.reducer,e.default):typeof e=="object"&&e&&"value"in e&&e.value?new dk(e.value,e.default):new iO}const hn="__start__",Ur="__end__",Tf="__input__",eFe="__copy__",no="__error__",I4="__pregel_ns_writes",Uh="__pregel_send",f8="__pregel_call",D0="__pregel_read",Li="__pregel_checkpointer",oh="__pregel_resuming",wx="__pregel_task_id",hk="__pregel_stream",tFe="__pregel_resume_value",jA="__pregel_resume_map",zh="__pregel_scratchpad",$A="__pregel_previous",Ule="__pregel_durability",LL="checkpoint_id",bu="checkpoint_ns",rFe="__pregel_node_finished",xl="checkpoint_map",kW="__pregel_abort_signals",qr="__interrupt__",co="__resume__",d8="__no_writes__",uv="__return__",R4="__previous__",Fi="langsmith:hidden",nFe="langsmith:nostream",CW="__self__",Fo="__pregel_tasks",Mo="__pregel_push",FA="__pregel_pull",bl="00000000-0000-0000-0000-000000000000",iFe=[Fi,Tf,qr,co,no,d8,Uh,D0,Li,Ule,hk,oh,wx,f8,tFe,zh,$A,xl,bu,LL],sa="|",Vf=":",OW=Symbol.for("langgraph.command");var FJ,aFe=(FJ=OW,class{constructor(e){L(this,FJ);this[OW]=e}});function ML(e){const t=e;return t!=null&&typeof t.node=="string"&&t.args!==void 0}var $b=class{constructor(e,t){L(this,"lg_name","Send");L(this,"node");L(this,"args");this.node=e,this.args=Fb(t)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function zs(e){return e instanceof $b}function zle(e){return!e||typeof e!="object"||!(qr in e)?!1:Array.isArray(e[qr])}var A3,Vo=(A3=class extends aFe{constructor(t){super(t);L(this,"lg_name","Command");L(this,"lc_direct_tool_output",!0);L(this,"graph");L(this,"update");L(this,"resume");L(this,"goto",[]);this.resume=t.resume,this.graph=t.graph,this.update=t.update,t.goto&&(this.goto=Array.isArray(t.goto)?Fb(t.goto):[Fb(t.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){var r;let t;return typeof this.goto=="string"?t=this.goto:zs(this.goto)?t=this.goto.toJSON():t=(r=this.goto)==null?void 0:r.map(n=>typeof n=="string"?n:n.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:t}}},L(A3,"PARENT","__parent__"),A3);function ra(e){return typeof e!="object"||e==null?!1:"lg_name"in e&&e.lg_name==="Command"}function Fb(e,t=new Map){if(e!=null&&typeof e=="object"){if(t.has(e))return t.get(e);let r;if(Array.isArray(e))r=[],t.set(e,r),e.forEach((n,i)=>{r[i]=Fb(n,t)});else if(ra(e)&&!(e instanceof Vo))r=new Vo(e),t.set(e,r);else if(ML(e)&&!(e instanceof $b))r=new $b(e.node,e.args),t.set(e,r);else if(ra(e)||zs(e))r=e,t.set(e,r);else if("lc_serializable"in e&&e.lc_serializable)r=e,t.set(e,r);else{r={},t.set(e,r);for(const[n,i]of Object.entries(e))r[n]=Fb(i,t)}return r}return e}const sFe=["tags","metadata","callbacks","configurable"],oFe=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interrupt","context","interruptBefore","interruptAfter","checkpointDuring","durability","signal"],lFe=25;function Vle(...e){const t={tags:[],metadata:{},callbacks:void 0,recursionLimit:lFe,configurable:{}},r=ba.getRunnableConfig();if(r!==void 0){for(const[n,i]of Object.entries(r))if(i!==void 0)if(sFe.includes(n)){let a;Array.isArray(i)?a=[...i]:typeof i=="object"?n==="callbacks"&&"copy"in i&&typeof i.copy=="function"?a=i.copy():a={...i}:a=i,t[n]=a}else t[n]=i}for(const n of e)if(n!==void 0)for(const[i,a]of Object.entries(n))a!==void 0&&oFe.includes(i)&&(t[i]=a);for(const[n,i]of Object.entries(t.configurable))t.metadata=t.metadata??{},!n.startsWith("__")&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&!(n in t.metadata)&&(t.metadata[n]=i);return t}function cFe(){return ba.getRunnableConfig()}function L4(e){return e.split(sa).filter(t=>!t.match(/^\d+$/)).map(t=>t.split(Vf)[0]).join(sa)}function uFe(e){const t=e.split(sa);for(;t.length>1&&t[t.length-1].match(/^\d+$/);)t.pop();return t.slice(0,-1).join(sa)}const lt=e=>BigInt(e),pn=(e,t=0)=>new DataView(e.buffer,e.byteOffset+t,e.byteLength-t),Wle=lt("0x9E3779B1"),Hle=lt("0x85EBCA77"),fFe=lt("0xC2B2AE3D"),rp=lt("0x9E3779B185EBCA87"),am=lt("0xC2B2AE3D27D4EB4F"),Gle=lt("0x165667B19E3779F9"),h8=lt("0x85EBCA77C2B2AE63"),dFe=lt("0x27D4EB2F165667C5"),hFe=lt("0x165667919E3779F9"),pFe=lt("0x9FB21C651E98DF25"),mFe=e=>{const t=e.length;if(t%2!==0)throw new Error("String should have an even number of characters");const r=t/2,n=new Uint8Array(r);let i=0,a=0;for(;a<r;){const s=e.slice(i,i+=2);n[a]=Number.parseInt(s,16),a+=1}return pn(n)},gu=mFe("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),Cy=(lt(1)<<lt(128))-lt(1),Sr=(lt(1)<<lt(64))-lt(1),pk=(lt(1)<<lt(32))-lt(1),kf=64,qle=kf/8,gFe=8,vE=4;function fv(e){if(!e)throw new Error("Assert failed")}function yFe(e){const t=new DataView(new ArrayBuffer(8));return t.setBigUint64(0,e,!0),t.getBigUint64(0,!1)}function vFe(e){let t=e;return t=(t&lt(65535))<<lt(16)|(t&lt(4294901760))>>lt(16),t=(t&lt(16711935))<<lt(8)|(t&lt(4278255360))>>lt(8),t}function wFe(e,t){return(e&pk)*(t&pk)&Sr}function xFe(e,t){return(e<<t|e>>lt(32)-t)&pk}function Kle(e,t,r){for(let n=0;n<qle;n+=1){const i=t.getBigUint64(n*8,!0),a=i^r.getBigUint64(n*8,!0);e[n^1]+=i,e[n]+=wFe(a,a>>lt(32))}return e}function PW(e,t,r,n){for(let i=0;i<n;i+=1)Kle(e,pn(t,i*kf),pn(r,i*8));return e}function bFe(e,t){for(let r=0;r<qle;r+=1){const n=t.getBigUint64(r*8,!0);let i=e[r];i=DL(i,lt(47)),i^=n,i*=Wle,e[r]=i&Sr}return e}function wE(e,t){return Yle(e[0]^t.getBigUint64(0,!0),e[1]^t.getBigUint64(gFe,!0))}function NW(e,t,r){let n=r;return n+=wE(e.slice(0),pn(t,0*vE)),n+=wE(e.slice(2),pn(t,4*vE)),n+=wE(e.slice(4),pn(t,8*vE)),n+=wE(e.slice(6),pn(t,12*vE)),Eu(n&Sr)}function _Fe(e,t,r,n,i){let a=e;const s=Math.floor((r.byteLength-kf)/8),o=kf*s,l=Math.floor((t.byteLength-1)/o);for(let c=0;c<l;c+=1)a=PW(a,pn(t,c*o),r,s),a=i(a,pn(r,r.byteLength-kf));{const c=Math.floor((t.byteLength-1-o*l)/kf);a=PW(a,pn(t,l*o),r,c),a=n(a,pn(t,t.byteLength-kf),pn(r,r.byteLength-kf-7))}return a}function SFe(e,t){let r=new BigUint64Array([fFe,rp,am,Gle,h8,Hle,dFe,Wle]);fv(e.byteLength>128),r=_Fe(r,e,t,Kle,bFe),fv(r.length*8===64);{const n=NW(r,pn(t,11),lt(e.byteLength)*rp&Sr);return NW(r,pn(t,t.byteLength-kf-11),~(lt(e.byteLength)*am)&Sr)<<lt(64)|n}}function Yle(e,t){const r=e*t&Cy;return r&Sr^r>>lt(64)}function IW(e,t,r){return Yle((e.getBigUint64(0,!0)^t.getBigUint64(0,!0)+r)&Sr,(e.getBigUint64(8,!0)^t.getBigUint64(8,!0)-r)&Sr)}function BA(e,t,r,n,i){let a=e&Sr,s=e>>lt(64)&Sr;return a+=IW(t,n,i),a^=r.getBigUint64(0,!0)+r.getBigUint64(8,!0),a&=Sr,s+=IW(r,pn(n,16),i),s^=t.getBigUint64(0,!0)+t.getBigUint64(8,!0),s&=Sr,s<<lt(64)|a}function Eu(e){let t=e;return t^=t>>lt(37),t*=hFe,t&=Sr,t^=t>>lt(32),t}function mk(e){let t=e;return t^=t>>lt(33),t*=am,t&=Sr,t^=t>>lt(29),t*=Gle,t&=Sr,t^=t>>lt(32),t}function EFe(e,t,r){const n=e.byteLength;fv(n>0&&n<=3);const i=lt(e.getUint8(n-1))|lt(n<<8)|lt(e.getUint8(0)<<16)|lt(e.getUint8(n>>1)<<24),a=(i^(lt(t.getUint32(0,!0))^lt(t.getUint32(4,!0)))+r)&Sr,s=(lt(t.getUint32(8,!0))^lt(t.getUint32(12,!0)))-r;return(mk((xFe(vFe(i),lt(13))^s)&Sr)&Sr)<<lt(64)|mk(a)}function DL(e,t){return e^e>>t}function AFe(e,t,r){const n=e.byteLength;fv(n>=4&&n<=8);{const i=e.getUint32(0,!0),a=e.getUint32(n-4,!0);let s=((lt(i)|lt(a)<<lt(32))^(t.getBigUint64(16,!0)^t.getBigUint64(24,!0))+r&Sr)*(rp+(lt(n)<<lt(2)))&Cy;return s+=(s&Sr)<<lt(65),s&=Cy,s^=s>>lt(67),DL(DL(s&Sr,lt(35))*pFe&Sr,lt(28))|Eu(s>>lt(64))<<lt(64)}}function TFe(e,t,r){const n=e.byteLength;fv(n>=9&&n<=16);{const i=(t.getBigUint64(32,!0)^t.getBigUint64(40,!0))+r&Sr,a=(t.getBigUint64(48,!0)^t.getBigUint64(56,!0))-r&Sr,s=e.getBigUint64(0,!0);let o=e.getBigUint64(n-8,!0),l=(s^o^i)*rp;const c=(l&Sr)+(lt(n-1)<<lt(54));l=l&(Cy^Sr)|c,o^=a,l+=o+(o&pk)*(Hle-lt(1))<<lt(64),l&=Cy,l^=yFe(l>>lt(64));let u=(l&Sr)*am;return u+=(l>>lt(64))*am<<lt(64),u&=Cy,Eu(u&Sr)|Eu(u>>lt(64))<<lt(64)}}function kFe(e,t){const r=e.byteLength;return fv(r<=16),r>8?TFe(e,gu,t):r>=4?AFe(e,gu,t):r>0?EFe(e,gu,t):mk(t^gu.getBigUint64(64,!0)^gu.getBigUint64(72,!0))|mk(t^gu.getBigUint64(80,!0)^gu.getBigUint64(88,!0))<<lt(64)}function jL(e){return~e+lt(1)&Sr}function CFe(e,t,r){let n=lt(e.byteLength)*rp&Sr,i=lt(e.byteLength-1)/lt(32);for(;i>=0;){const o=Number(i);n=BA(n,pn(e,16*o),pn(e,e.byteLength-16*(o+1)),pn(t,32*o),r),i-=lt(1)}let a=n+(n>>lt(64))&Sr;a=Eu(a);let s=(n&Sr)*rp+(n>>lt(64))*h8+(lt(e.byteLength)-r&Sr)*am;return s&=Sr,s=jL(Eu(s)),a|s<<lt(64)}function OFe(e,t,r){let n=lt(e.byteLength)*rp&Sr;for(let s=32;s<160;s+=32)n=BA(n,pn(e,s-32),pn(e,s-16),pn(t,s-32),r);n=Eu(n&Sr)|Eu(n>>lt(64))<<lt(64);for(let s=160;s<=e.byteLength;s+=32)n=BA(n,pn(e,s-32),pn(e,s-16),pn(t,3+s-160),r);n=BA(n,pn(e,e.byteLength-16),pn(e,e.byteLength-32),pn(t,103),jL(r));let i=n+(n>>lt(64))&Sr;i=Eu(i);let a=(n&Sr)*rp+(n>>lt(64))*h8+(lt(e.byteLength)-r&Sr)*am;return a&=Sr,a=jL(Eu(a)),i|a<<lt(64)}function e0(e,t=lt(0)){const r=new TextEncoder,n=pn(typeof e=="string"?r.encode(e):e),i=n.byteLength,a=s=>s.toString(16).padStart(32,"0");return i<=16?a(kFe(n,t)):i<=128?a(CFe(n,gu,t)):i<=240?a(OFe(n,gu,t)):a(SFe(n,gu))}function Xle(e){return/^[0-9a-f]{32}$/.test(e)}function PFe(e){var s,o,l;const t=ba.getRunnableConfig();if(!t)throw new Error("Called interrupt() outside the context of a graph.");const r=t.configurable;if(!r)throw new Error("No configurable found in config");if(!r[Li])throw new OA("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});const n=r[zh];n.interruptCounter+=1;const i=n.interruptCounter;if(n.resume.length>0&&i<n.resume.length)return(s=r[Uh])==null||s.call(r,[[co,n.resume]]),n.resume[i];if(n.nullResume!==void 0){if(n.resume.length!==i)throw new Error(`Resume length mismatch: ${n.resume.length} !== ${i}`);const c=n.consumeNullResume();return n.resume.push(c),(o=r[Uh])==null||o.call(r,[[co,n.resume]]),c}const a=(l=r[bu])==null?void 0:l.split(sa);throw new ky([{id:a?e0(a.join(sa)):void 0,value:e}])}var vp=class extends Lr{constructor(t){super();L(this,"lc_namespace",["langgraph"]);L(this,"func");L(this,"tags");L(this,"config");L(this,"trace",!0);L(this,"recurse",!0);this.name=t.name??t.func.name,this.func=t.func,this.config=t.tags?{tags:t.tags}:void 0,this.trace=t.trace??this.trace,this.recurse=t.recurse??this.recurse}async _tracedInvoke(t,r,n){return new Promise((i,a)=>{const s=Qr(r,{callbacks:n==null?void 0:n.getChild()});ba.runWithConfig(s,async()=>{try{i(await this.func(t,s))}catch(o){a(o)}})})}async invoke(t,r){let n;const i=Vle(r),a=Al(this.config,i);return this.trace?n=await this._callWithConfig(this._tracedInvoke,t,a):n=await ba.runWithConfig(a,async()=>this.func(t,a)),Lr.isRunnable(n)&&this.recurse?await ba.runWithConfig(a,async()=>n.invoke(t,a)):n}};function*qd(e,t){if(t===void 0)yield*e;else for(const r of e)yield[t,r]}async function hh(e){const t=[];for await(const r of await e)t.push(r);return t}function Vw(e){const t=[];for(const r of e)t.push(r);return t}function ug(e,t){return e?"configurable"in e?{...e,configurable:{...e.configurable,...t}}:{...e,configurable:t}:{configurable:t}}function NFe(e){return typeof e=="object"&&(e==null?void 0:e[Symbol.for("LG_SKIP_WRITE")])!==void 0}const j0={[Symbol.for("LG_PASSTHROUGH")]:!0};function xE(e){return typeof e=="object"&&(e==null?void 0:e[Symbol.for("LG_PASSTHROUGH")])!==void 0}const M4=Symbol("IS_WRITER");var Os=class $L extends vp{constructor(r,n){const i=`ChannelWrite<${r.map(a=>zs(a)?a.node:"channel"in a?a.channel:"...").join(",")}>`;super({writes:r,name:i,tags:n,func:async(a,s)=>this._write(a,s??{})});L(this,"writes");this.writes=r}async _write(r,n){const i=this.writes.map(a=>D4(a)&&xE(a.value)?{mapper:a.mapper,value:r}:UA(a)&&xE(a.value)?{channel:a.channel,value:r,skipNone:a.skipNone,mapper:a.mapper}:a);return await $L.doWrite(n,i),r}static async doWrite(r,n){var s;for(const o of n){if(UA(o)){if(o.channel===Fo)throw new Mn("Cannot write to the reserved channel TASKS");if(xE(o.value))throw new Mn("PASSTHROUGH value must be replaced")}if(D4(o)&&xE(o.value))throw new Mn("PASSTHROUGH value must be replaced")}const i=[];for(const o of n)if(zs(o))i.push([Fo,o]);else if(D4(o)){const l=await o.mapper.invoke(o.value,r);l!=null&&l.length>0&&i.push(...l)}else if(UA(o)){const l=o.mapper!==void 0?await o.mapper.invoke(o.value,r):o.value;if(NFe(l)||o.skipNone&&l===void 0)continue;i.push([o.channel,l])}else throw new Error(`Invalid write entry: ${JSON.stringify(o)}`);((s=r.configurable)==null?void 0:s[Uh])(i)}static isWriter(r){return r instanceof $L||M4 in r&&!!r[M4]}static registerWriter(r){return Object.defineProperty(r,M4,{value:!0})}};function UA(e){return e!==void 0&&typeof e.channel=="string"}function D4(e){return e!==void 0&&!UA(e)&&Lr.isRunnable(e.mapper)}var IFe=class Zle extends vp{constructor(r,n,i=!1){super({func:(a,s)=>Zle.doRead(s,this.channel,this.fresh,this.mapper)});L(this,"lc_graph_name","ChannelRead");L(this,"channel");L(this,"fresh",!1);L(this,"mapper");this.fresh=i,this.mapper=n,this.channel=r,this.name=Array.isArray(r)?`ChannelRead<${r.join(",")}>`:`ChannelRead<${r}>`}static doRead(r,n,i,a){var o;const s=(o=r.configurable)==null?void 0:o[D0];if(!s)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return a?a(s(n,i)):s(n,i)}};const fg=new nm;var Bb=class Ww extends tp{constructor(r){var y;const{channels:n,triggers:i,mapper:a,writers:s,bound:o,kwargs:l,metadata:c,retryPolicy:u,cachePolicy:f,tags:d,subgraphs:h,ends:m}=r,p=[...(y=r.config)!=null&&y.tags?r.config.tags:[],...d??[]];super({...r,bound:r.bound??fg,config:{...r.config?r.config:{},tags:p}});L(this,"lc_graph_name","PregelNode");L(this,"channels");L(this,"triggers",[]);L(this,"mapper");L(this,"writers",[]);L(this,"bound",fg);L(this,"kwargs",{});L(this,"metadata",{});L(this,"tags",[]);L(this,"retryPolicy");L(this,"cachePolicy");L(this,"subgraphs");L(this,"ends");this.channels=n,this.triggers=i,this.mapper=a,this.writers=s??this.writers,this.bound=o??this.bound,this.kwargs=l??this.kwargs,this.metadata=c??this.metadata,this.tags=p,this.retryPolicy=u,this.cachePolicy=f,this.subgraphs=h,this.ends=m}getWriters(){var n;const r=[...this.writers];for(;r.length>1&&r[r.length-1]instanceof Os&&r[r.length-2]instanceof Os;){const i=r.slice(-2),a=i[0].writes.concat(i[1].writes);r[r.length-2]=new Os(a,(n=i[0].config)==null?void 0:n.tags),r.pop()}return r}getNode(){const r=this.getWriters();if(!(this.bound===fg&&r.length===0))return this.bound===fg&&r.length===1?r[0]:this.bound===fg?new sd({first:r[0],middle:r.slice(1,r.length-1),last:r[r.length-1],omitSequenceTags:!0}):r.length>0?new sd({first:this.bound,middle:r.slice(0,r.length-1),last:r[r.length-1],omitSequenceTags:!0}):this.bound}join(r){if(!Array.isArray(r))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new Ww({channels:{...this.channels,...Object.fromEntries(r.map(n=>[n,n]))},triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(r){return Os.isWriter(r)?new Ww({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,r],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):this.bound===fg?new Ww({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:$a(r),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):new Ww({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(r),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};function RFe(e){return"steps"in e&&Array.isArray(e.steps)}function p8(e){return"lg_is_pregel"in e&&e.lg_is_pregel===!0}function Jle(e){const t=[e];for(const r of t){if(p8(r))return r;RFe(r)&&t.push(...r.steps)}}function Oy(e,t,r=!0,n=!1){try{return e[t].get()}catch(i){if(i.name===_a.unminifiable_name){if(n)return i;if(r)return null}throw i}}function sm(e,t,r=!0){if(Array.isArray(t)){const n={};for(const i of t)try{n[i]=Oy(e,i,!r)}catch(a){if(a.name===_a.unminifiable_name)continue}return n}else return Oy(e,t)}function*LFe(e,t){if(e.graph===Vo.PARENT)throw new Mn("There is no parent graph.");if(e.goto){let r;Array.isArray(e.goto)?r=e.goto:r=[e.goto];for(const n of r)if(zs(n))yield[bl,Fo,n];else if(typeof n=="string")yield[bl,`branch:to:${n}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof n}`)}if(e.resume)if(typeof e.resume=="object"&&Object.keys(e.resume).length&&Object.keys(e.resume).every(Xle))for(const[r,n]of Object.entries(e.resume)){const i=t.filter(a=>a[0]===r&&a[1]===co).map(a=>a[2]).slice(0,1)??[];i.push(n),yield[r,co,i]}else yield[bl,co,e.resume];if(e.update){if(typeof e.update!="object"||!e.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(e.update))for(const[r,n]of e.update)yield[bl,r,n];else for(const[r,n]of Object.entries(e.update))yield[bl,r,n]}}function*Qle(e,t){if(t!=null)if(Array.isArray(e)&&typeof t=="object"&&!Array.isArray(t))for(const r in t)e.includes(r)&&(yield[r,t[r]]);else{if(Array.isArray(e))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[e,t]}}function*j4(e,t,r){Array.isArray(e)?(t===!0||t.find(([n,i])=>e.includes(n)))&&(yield sm(r,e)):(t===!0||t.some(([n,i])=>n===e))&&(yield Oy(r,e))}function*MFe(e,t,r){const n=t.filter(([o,l])=>{var c;return(o.config===void 0||!((c=o.config.tags)!=null&&c.includes(Fi)))&&l[0][0]!==no&&l[0][0]!==qr});if(!n.length)return;let i;n.some(([o])=>o.writes.some(([l,c])=>l===uv))?i=n.flatMap(([o])=>o.writes.filter(([l,c])=>l===uv).map(([l,c])=>[o.name,c])):Array.isArray(e)?i=n.flatMap(([o])=>{const{writes:l}=o,c={};for(const[u]of l)e.includes(u)&&(c[u]=(c[u]||0)+1);return Object.values(c).some(u=>u>1)?l.filter(([u])=>e.includes(u)).map(([u,f])=>[o.name,{[u]:f}]):[[o.name,Object.fromEntries(l.filter(([u])=>e.includes(u)))]]}):i=n.flatMap(([o])=>o.writes.filter(([l,c])=>l===e).map(([l,c])=>[o.name,c]));const a={};for(const[o,l]of i)o in a||(a[o]=[]),a[o].push(l);const s={};for(const o in a)if(a[o].length===1){const[l]=a[o];s[o]=l}else s[o]=a[o];r&&(s.__metadata__={cached:r}),yield s}function m8(e){const t=typeof e[hn];if(t==="number")return 0;if(t==="string")return"";for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const n=typeof e[r];if(n==="number")return 0;if(n==="string")return"";break}}function zA(e,t){if(Object.keys(e).length>0){const r=m8(t);return Object.fromEntries(Object.entries(t).filter(([n,i])=>i>(e[n]??r)))}else return t}function DFe(e,t){return e&&!Array.isArray(e)&&!(e instanceof Date)&&typeof e=="object"?e:{[t]:e}}function yc(e,t){return e===null?{configurable:t}:(e==null?void 0:e.configurable)===void 0?{...e,configurable:t}:{...e,configurable:{...e.configurable,...t}}}function Wp(e,t){var n,i;const r=(t==null?void 0:t.parents)??{};return Object.keys(r).length>0?yc(e,{[xl]:{...r,[((n=e.configurable)==null?void 0:n.checkpoint_ns)??""]:(i=e.configurable)==null?void 0:i.checkpoint_id}}):e}function gk(...e){const t=[...new Set(e.filter(Boolean))];if(t.length===0)return{signal:void 0,dispose:void 0};if(t.length===1)return{signal:t[0],dispose:void 0};const r=new AbortController,n=()=>{var s;const a=(s=t.find(o=>o.aborted))==null?void 0:s.reason;r.abort(a),t.forEach(o=>o.removeEventListener("abort",n))};t.forEach(a=>a.addEventListener("abort",n,{once:!0}));const i=t.find(a=>a.aborted);return i&&r.abort(i.reason),{signal:r.signal,dispose:()=>{t.forEach(a=>a.removeEventListener("abort",n))}}}const jFe=(e,t)=>{if(!(!e&&!t))return e?t?Array.isArray(e)&&Array.isArray(t)?[...e,...t]:Array.isArray(e)?[...e,t]:Array.isArray(t)?[e,...t]:[e,t]:e:t};var $Fe=class{constructor({func:e,name:t,input:r,retry:n,cache:i,callbacks:a}){L(this,"func");L(this,"name");L(this,"input");L(this,"retry");L(this,"cache");L(this,"callbacks");L(this,"__lg_type","call");this.func=e,this.name=t,this.input=r,this.retry=n,this.cache=i,this.callbacks=a}};function FFe(e){return typeof e=="object"&&e!==null&&"__lg_type"in e&&e.__lg_type==="call"}function BFe(e,t){return new sd({name:e,first:new vp({func:r=>t(...r),name:e,trace:!1,recurse:!1}),last:new Os([{channel:uv,value:j0}],[Fi])})}const UFe=e=>e!==void 0?e+1:1;function zFe(e,t){if(t==null)return!1;for(const r of e)if(t[r])return!0;return!1}function VFe(e){let t;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t==null?t=e[r]:t=H8e(t,e[r]));return t}function bE(e,t,r){const n=m8(e.channel_versions),i=e.versions_seen[qr]??{};let a=!1;if((e.channel_versions[hn]??n)>(i[hn]??n))a=!0;else for(const o in e.channel_versions)if(Object.prototype.hasOwnProperty.call(e.channel_versions,o)&&e.channel_versions[o]>(i[o]??n)){a=!0;break}const s=r.some(o=>{var l,c;return t==="*"?!((c=(l=o.config)==null?void 0:l.tags)!=null&&c.includes(Fi)):t.includes(o.name)});return a&&s}function VA(e,t,r,n,i=!1){let a=new Set;if(Array.isArray(n))a=new Set(n.filter(o=>r.writes.some(([l,c])=>l===o)));else{for(const[o]of r.writes)if(o===n){a=new Set([o]);break}a=a||new Set}let s;if(i&&a.size>0){const o=Object.fromEntries(Object.entries(t).filter(([u,f])=>a.has(u))),l=c0(e,o,-1),c=fk(o,l);No(uk(l),c,[r],void 0,void 0),s=sm({...t,...c},n)}else s=sm(t,n);return s}function $4(e,t,r){for(const[n,i]of r)if([Mo,Fo].includes(n)&&i!=null){if(!zs(i))throw new Mn(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(i)}`);if(!(i.node in t))throw new Mn(`Invalid node name "${i.node}" in Send packet`)}e(r)}const WFe=new Set([d8,Mo,co,qr,uv,no]);function No(e,t,r,n,i){var d,h;r.sort((m,p)=>{var w,v;const y=((w=m.path)==null?void 0:w.slice(0,3))||[],g=((v=p.path)==null?void 0:v.slice(0,3))||[];for(let x=0;x<Math.min(y.length,g.length);x+=1){if(y[x]<g[x])return-1;if(y[x]>g[x])return 1}return y.length-g.length});const a=r.some(m=>m.triggers.length>0),s=u8(t);for(const m of r){(d=e.versions_seen)[h=m.name]??(d[h]={});for(const p of m.triggers)p in e.channel_versions&&(e.versions_seen[m.name][p]=e.channel_versions[p])}let o=VFe(e.channel_versions);const l=new Set(r.flatMap(m=>m.triggers).filter(m=>!iFe.includes(m)));let c=!1;for(const m of l)m in s&&s[m].consume()&&n!==void 0&&(e.channel_versions[m]=n(o),c=!0);const u={};for(const m of r)for(const[p,y]of m.writes)WFe.has(p)||p in s&&(u[p]??(u[p]=[]),u[p].push(y));o!=null&&n!=null&&(o=c?n(o):o);const f=new Set;for(const[m,p]of Object.entries(u))if(m in s){const y=s[m];let g;try{g=y.update(p)}catch(w){if(w.name===Mn.unminifiable_name){const v=new Mn(`Invalid update for channel "${m}" with values ${JSON.stringify(p)}: ${w.message}`);throw v.lc_error_code=w.lc_error_code,v}else throw w}g&&n!==void 0&&(e.channel_versions[m]=n(o),y.isAvailable()&&f.add(m))}if(a)for(const m in s){if(!Object.prototype.hasOwnProperty.call(s,m))continue;const p=s[m];p.isAvailable()&&!f.has(m)&&p.update([])&&n!==void 0&&(e.channel_versions[m]=n(o),p.isAvailable()&&f.add(m))}if(a&&!zFe(f,i))for(const m in s){if(!Object.prototype.hasOwnProperty.call(s,m))continue;const p=s[m];p.finish()&&n!==void 0&&(e.channel_versions[m]=n(o),p.isAvailable()&&f.add(m))}return f}function*HFe(e,t,r){if(r.updatedChannels!=null&&r.triggerToNodes!=null){const n=new Set;for(const i of r.updatedChannels){const a=r.triggerToNodes[i];for(const s of a??[])n.add(s)}yield*[...n].sort();return}if(!(()=>{for(const n in e.channel_versions)if(e.channel_versions[n]!==null)return!1;return!0})())for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(yield n)}function ry(e,t,r,n,i,a,s){const o={},l=n[Fo];if(l!=null&&l.isAvailable()){const c=l.get().length;for(let u=0;u<c;u+=1){const f=FL([Mo,u],e,t,r,n,i,a,s);f!==void 0&&(o[f.id]=f)}}for(const c of HFe(e,r,s)){const u=FL([FA,c],e,t,r,n,i,a,s);u!==void 0&&(o[u.id]=u)}return o}function FL(e,t,r,n,i,a,s,o){var h,m,p,y;const{step:l,checkpointer:c,manager:u}=o,f=a.configurable??{},d=f.checkpoint_ns??"";if(e[0]===Mo&&FFe(e[e.length-1])){const g=e[e.length-1],w=BFe(g.name,g.func),v=[Mo],x=d===""?g.name:`${d}${sa}${g.name}`,b=Qg(JSON.stringify([x,l.toString(),g.name,Mo,e[1],e[2]]),t.id),S=`${x}${Vf}${b}`,T=[...e.slice(0,3),!0],A={langgraph_step:l,langgraph_node:g.name,langgraph_triggers:v,langgraph_path:T,langgraph_checkpoint_ns:S};if(s){const O=[];return{name:g.name,input:g.input,proc:w,writes:O,config:Qr(Al(a,{metadata:A,store:o.store??a.store}),{runName:g.name,callbacks:u==null?void 0:u.getChild(`graph:step:${l}`),configurable:{[wx]:b,[Uh]:M=>$4(P=>O.push(...P),n,M),[D0]:(M,P=!1)=>VA(t,i,{name:g.name,writes:O,triggers:v,path:T},M,P),[Li]:c??f[Li],[xl]:{...f[xl],[d]:t.id},[zh]:F4({pendingWrites:r??[],taskId:b,currentTaskInput:g.input,resumeMap:(h=a.configurable)==null?void 0:h[jA],namespaceHash:e0(S)}),[$A]:t.channel_values[R4],checkpoint_id:void 0,checkpoint_ns:S}}),triggers:v,retry_policy:g.retry,cache_key:g.cache?{key:e0((g.cache.keyFunc??JSON.stringify)([g.input])),ns:[I4,g.name??"__dynamic__"],ttl:g.cache.ttl}:void 0,id:b,path:T,writers:[]}}else return{id:b,name:g.name,interrupts:[],path:T}}else if(e[0]===Mo){const g=typeof e[1]=="number"?e[1]:parseInt(e[1],10);if(!((m=i[Fo])!=null&&m.isAvailable()))return;const w=i[Fo].get();if(g<0||g>=w.length)return;const v=ML(w[g])&&!zs(w[g])?new $b(w[g].node,w[g].args):w[g];if(!ML(v)){console.warn(`Ignoring invalid packet ${JSON.stringify(v)} in pending sends.`);return}if(!(v.node in n)){console.warn(`Ignoring unknown node name ${v.node} in pending sends.`);return}const x=[Mo],b=d===""?v.node:`${d}${sa}${v.node}`,S=Qg(JSON.stringify([b,l.toString(),v.node,Mo,g.toString()]),t.id),T=`${b}${Vf}${S}`;let A={langgraph_step:l,langgraph_node:v.node,langgraph_triggers:x,langgraph_path:e.slice(0,3),langgraph_checkpoint_ns:T};if(s){const O=n[v.node],M=O.getNode();if(M!==void 0){O.metadata!==void 0&&(A={...A,...O.metadata});const P=[];return{name:v.node,input:v.args,proc:M,subgraphs:O.subgraphs,writes:P,config:Qr(Al(a,{metadata:A,tags:O.tags,store:o.store??a.store}),{runName:v.node,callbacks:u==null?void 0:u.getChild(`graph:step:${l}`),configurable:{[wx]:S,[Uh]:N=>$4(V=>P.push(...V),n,N),[D0]:(N,V=!1)=>VA(t,i,{name:v.node,writes:P,triggers:x,path:e},N,V),[Li]:c??f[Li],[xl]:{...f[xl],[d]:t.id},[zh]:F4({pendingWrites:r??[],taskId:S,currentTaskInput:v.args,resumeMap:(p=a.configurable)==null?void 0:p[jA],namespaceHash:e0(T)}),[$A]:t.channel_values[R4],checkpoint_id:void 0,checkpoint_ns:T}}),triggers:x,retry_policy:O.retryPolicy,cache_key:O.cachePolicy?{key:e0((O.cachePolicy.keyFunc??JSON.stringify)([v.args])),ns:[I4,O.name??"__dynamic__",v.node],ttl:O.cachePolicy.ttl}:void 0,id:S,path:e,writers:O.getWriters()}}}else return{id:S,name:v.node,interrupts:[],path:e}}else if(e[0]===FA){const g=e[1].toString(),w=n[g];if(w===void 0)return;if(r!=null&&r.length){const S=d===""?g:`${d}${sa}${g}`,T=Qg(JSON.stringify([S,l.toString(),g,FA,g]),t.id);if(r.some(A=>A[0]===T&&A[1]!==no))return}const v=m8(t.channel_versions);if(v===void 0)return;const x=t.versions_seen[g]??{},b=w.triggers.find(S=>i[S].isAvailable()?(t.channel_versions[S]??v)>(x[S]??v):!1);if(b!==void 0){const S=GFe(w,i,s);if(S===void 0)return;const T=d===""?g:`${d}${sa}${g}`,A=Qg(JSON.stringify([T,l.toString(),g,FA,[b]]),t.id),O=`${T}${Vf}${A}`;let M={langgraph_step:l,langgraph_node:g,langgraph_triggers:[b],langgraph_path:e,langgraph_checkpoint_ns:O};if(s){const P=w.getNode();if(P!==void 0){w.metadata!==void 0&&(M={...M,...w.metadata});const N=[];return{name:g,input:S,proc:P,subgraphs:w.subgraphs,writes:N,config:Qr(Al(a,{metadata:M,tags:w.tags,store:o.store??a.store}),{runName:g,callbacks:u==null?void 0:u.getChild(`graph:step:${l}`),configurable:{[wx]:A,[Uh]:V=>$4(B=>{N.push(...B)},n,V),[D0]:(V,B=!1)=>VA(t,i,{name:g,writes:N,triggers:[b],path:e},V,B),[Li]:c??f[Li],[xl]:{...f[xl],[d]:t.id},[zh]:F4({pendingWrites:r??[],taskId:A,currentTaskInput:S,resumeMap:(y=a.configurable)==null?void 0:y[jA],namespaceHash:e0(O)}),[$A]:t.channel_values[R4],checkpoint_id:void 0,checkpoint_ns:O}}),triggers:[b],retry_policy:w.retryPolicy,cache_key:w.cachePolicy?{key:e0((w.cachePolicy.keyFunc??JSON.stringify)([S])),ns:[I4,w.name??"__dynamic__",g],ttl:w.cachePolicy.ttl}:void 0,id:A,path:e,writers:w.getWriters()}}}else return{id:A,name:g,interrupts:[],path:e}}}}function GFe(e,t,r){let n;if(typeof e.channels=="object"&&!Array.isArray(e.channels)){n={};for(const[i,a]of Object.entries(e.channels))if(e.triggers.includes(a))try{n[i]=Oy(t,a,!1)}catch(s){if(s.name===_a.unminifiable_name)return;throw s}else if(a in t)try{n[i]=Oy(t,a,!1)}catch(s){if(s.name===_a.unminifiable_name)continue;throw s}}else if(Array.isArray(e.channels)){let i=!1;for(const a of e.channels)try{n=Oy(t,a,!1),i=!0;break}catch(s){if(s.name===_a.unminifiable_name)continue;throw s}if(!i)return}else throw new Error(`Invalid channels type, expected list or dict, got ${e.channels}`);return r&&e.mapper!==void 0&&(n=e.mapper(n)),n}function qFe(e,t){if(typeof e.args!="object"||e.args===null)return e;const r={};for(const[n,i]of Object.entries(e.args)){const a=t[n];(!a||a.lc_graph_name!=="UntrackedValue")&&(r[n]=i)}return new $b(e.node,r)}function F4({pendingWrites:e,taskId:t,currentTaskInput:r,resumeMap:n,namespaceHash:i}){var o;const a=(o=e.find(([l,c])=>l===bl&&c===co))==null?void 0:o[2],s={callCounter:0,interruptCounter:-1,resume:(()=>{const l=e.filter(([c,u])=>c===t&&u===co).flatMap(([c,u,f])=>f);if(n!=null&&i in n){const c=n[i];l.push(c)}return l})(),nullResume:a,subgraphCounter:0,currentTaskInput:r,consumeNullResume:()=>{if(s.nullResume)return delete s.nullResume,e.splice(e.findIndex(([l,c])=>l===bl&&c===co),1),a}};return s}const Ub={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},zb=(e,t)=>`${e.start}${t}${e.end}`;function*RW(e){var t;for(const{id:r,name:n,input:i,config:a,triggers:s,writes:o}of e)(t=a==null?void 0:a.tags)!=null&&t.includes(Fi)||(yield{id:r,name:n,input:i,triggers:s,interrupts:o.filter(([l,c])=>l===r&&c===qr).map(([,l])=>l)})}function KFe(e){return typeof e!="object"||e===null?!1:"$writes"in e&&Array.isArray(e.$writes)}function ece(e){const t={};for(const[r,n]of e){const i=String(r);if(i in t){const a=KFe(t[i])?t[i].$writes:[t[i]];a.push(n),t[i]={$writes:a}}else t[i]=n}return t}function*YFe(e,t){var r;for(const[{id:n,name:i,config:a},s]of e)(r=a==null?void 0:a.tags)!=null&&r.includes(Fi)||(yield{id:n,name:i,result:ece(s.filter(([o])=>Array.isArray(t)?t.includes(o):o===t)),interrupts:s.filter(o=>o[0]===qr).map(o=>o[1])})}function*XFe(e,t,r,n,i,a,s,o){var f,d,h;function l(m){const p={};return m.callbacks!=null&&(p.callbacks=m.callbacks),m.configurable!=null&&(p.configurable=m.configurable),m.maxConcurrency!=null&&(p.max_concurrency=m.maxConcurrency),m.metadata!=null&&(p.metadata=m.metadata),m.recursionLimit!=null&&(p.recursion_limit=m.recursionLimit),m.runId!=null&&(p.run_id=m.runId),m.runName!=null&&(p.run_name=m.runName),m.tags!=null&&(p.tags=m.tags),p}const c=(f=e.configurable)==null?void 0:f.checkpoint_ns,u={};for(const m of i){if(!((d=m.subgraphs)!=null&&d.length?m.subgraphs:[m.proc]).find(Jle))continue;let p=`${m.name}:${m.id}`;c&&(p=`${c}|${p}`),u[m.id]={configurable:{thread_id:(h=e.configurable)==null?void 0:h.thread_id,checkpoint_ns:p}}}yield{config:l(e),values:sm(t,r),metadata:n,next:i.map(m=>m.name),tasks:tce(i,a,u,o),parentConfig:s?l(s):void 0}}function tce(e,t,r,n){return e.map(i=>{var c;const a=(c=t.find(([u,f])=>u===i.id&&f===no))==null?void 0:c[2],s=t.filter(([u,f])=>u===i.id&&f===qr).map(([,,u])=>u),o=(()=>{var f;if(a||s.length||!t.length)return;const u=t.findIndex(([d,h])=>d===i.id&&h===uv);if(u>=0)return t[u][2];if(typeof n=="string")return(f=t.find(([d,h])=>d===i.id&&h===n))==null?void 0:f[2];if(Array.isArray(n)){const d=t.filter(([h,m])=>h===i.id&&n.includes(m)).map(([,h,m])=>[h,m]);return d.length?ece(d):void 0}})();if(a)return{id:i.id,name:i.name,path:i.path,error:a,interrupts:s,result:o};const l=r==null?void 0:r[i.id];return{id:i.id,name:i.name,path:i.path,interrupts:s,...l!==void 0?{state:l}:{},result:o}})}function ZFe(e,t,r){console.log([`${zb(Ub.blue,`[${e}:checkpoint]`)}`,`\x1B[1m State at the end of step ${e}:\x1B[0m
`,JSON.stringify(sm(t,r),null,2)].join(""))}function rce(e,t){const r=t.length;console.log([`${zb(Ub.blue,`[${e}:tasks]`)}`,`\x1B[1m Starting step ${e} with ${r} task${r===1?"":"s"}:\x1B[0m
`,t.map(n=>`- ${zb(Ub.green,String(n.name))} -> ${JSON.stringify(n.input,null,2)}`).join(`
`)].join(""))}function JFe(e,t,r){const n={};for(const[i,a]of t)r.includes(i)&&(n[i]||(n[i]=[]),n[i].push(a));console.log([`${zb(Ub.blue,`[${e}:writes]`)}`,`\x1B[1m Finished step ${e} with writes to ${Object.keys(n).length} channel${Object.keys(n).length!==1?"s":""}:\x1B[0m
`,Object.entries(n).map(([i,a])=>`- ${zb(Ub.yellow,i)} -> ${a.map(s=>JSON.stringify(s)).join(", ")}`).join(`
`)].join(""))}var LW=class extends uo{constructor(t,r){const n=t.getReader(),i=r??new AbortController;super({start(a){return s();function s(){return n.read().then(({done:o,value:l})=>{if(o){a.close();return}return a.enqueue(l),s()})}}});L(this,"_abortController");L(this,"_innerReader");this._abortController=i,this._innerReader=n}async cancel(t){this._abortController.abort(t),this._innerReader.releaseLock()}get signal(){return this._abortController.signal}},nce=class extends uo{constructor(t){let r;const n=new Promise(i=>{r=i});super({start:i=>{r(i)}});L(this,"modes");L(this,"controller");L(this,"passthroughFn");L(this,"_closed",!1);n.then(i=>{this.controller=i}),this.passthroughFn=t.passthroughFn,this.modes=t.modes}get closed(){return this._closed}push(t){var r;(r=this.passthroughFn)==null||r.call(this,t),this.controller.enqueue(t)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(t){this.controller.error(t)}};function QFe(e){return JSON.stringify(e,function(t,r){const n=this[t];if(n!=null&&typeof n=="object"&&"toDict"in n&&typeof n.toDict=="function"){const{type:i,data:a}=n.toDict();return{...a,type:i}}return r})}function eBe(e){return e instanceof Error?{error:e.name,message:e.message}:{error:"Error",message:JSON.stringify(e)}}function g8(e){return typeof e!="object"||e==null?!1:"configurable"in e&&typeof e.configurable=="object"&&e.configurable!=null}function B4(e){return!g8(e)||!e.configurable.thread_id?null:{thread_id:e.configurable.thread_id,checkpoint_ns:e.configurable.checkpoint_ns||"",checkpoint_id:e.configurable.checkpoint_id||null,checkpoint_map:e.configurable.checkpoint_map||null}}function MW(e){if(g8(e)){const t=Object.fromEntries(Object.entries(e.configurable).filter(([n])=>!n.startsWith("__"))),r={...e,configurable:t};return delete r.callbacks,r}return e}function DW(e){const t={...e,checkpoint:B4(e.config),parent_checkpoint:B4(e.parentConfig),config:MW(e.config),parent_config:MW(e.parentConfig),tasks:e.tasks.map(r=>{if(g8(r.state)){const n=B4(r.state);if(n!=null){const i={...r,checkpoint:n};return delete i.state,i}}return r})};return delete t.parentConfig,t}function tBe(e){const t=new TextEncoder;return new ReadableStream({async start(r){const n=i=>{r.enqueue(t.encode(`event: ${i.event}
data: ${QFe(i.data)}

`))};try{for await(const i of e){const[a,s,o]=i;let l=o;if(s==="debug"){const c=o;c.type==="checkpoint"&&(l={...c,payload:DW(c.payload)})}s==="checkpoints"&&(l=DW(o)),n({event:a!=null&&a.length?`${s}|${a.join("|")}`:s,data:l})}}catch(i){n({event:"error",data:eBe(i)})}r.close()}})}const _E=Symbol.for("INPUT_DONE"),U4=Symbol.for("INPUT_RESUMING"),rBe=25;function nBe(...e){return new nce({passthroughFn:t=>{for(const r of e)r.modes.has(t[1])&&r.push(t)},modes:new Set(e.flatMap(t=>Array.from(t.modes)))})}var iBe=class extends Z8e{constructor(t){super();L(this,"cache");L(this,"queue",Promise.resolve());this.cache=t}async get(t){return this.enqueueOperation("get",t)}async set(t){return this.enqueueOperation("set",t)}async clear(t){return this.enqueueOperation("clear",t)}async stop(){await this.queue}enqueueOperation(t,...r){const n=this.queue.then(()=>this.cache[t](...r));return this.queue=n.then(()=>{},()=>{}),n}},aBe=class ice{constructor(t){L(this,"input");L(this,"output");L(this,"config");L(this,"checkpointer");L(this,"checkpointerGetNextVersion");L(this,"channels");L(this,"checkpoint");L(this,"checkpointIdSaved");L(this,"checkpointConfig");L(this,"checkpointMetadata");L(this,"checkpointNamespace");L(this,"checkpointPendingWrites",[]);L(this,"checkpointPreviousVersions");L(this,"step");L(this,"stop");L(this,"durability");L(this,"outputKeys");L(this,"streamKeys");L(this,"nodes");L(this,"skipDoneTasks");L(this,"prevCheckpointConfig");L(this,"updatedChannels");L(this,"status","pending");L(this,"tasks",{});L(this,"stream");L(this,"checkpointerPromises",[]);L(this,"isNested");L(this,"_checkpointerChainedPromise",Promise.resolve());L(this,"store");L(this,"cache");L(this,"manager");L(this,"interruptAfter");L(this,"interruptBefore");L(this,"toInterrupt",[]);L(this,"debug",!1);L(this,"triggerToNodes");this.input=t.input,this.checkpointer=t.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=UFe,this.checkpoint=t.checkpoint,this.checkpointMetadata=t.checkpointMetadata,this.checkpointPreviousVersions=t.checkpointPreviousVersions,this.channels=t.channels,this.checkpointPendingWrites=t.checkpointPendingWrites,this.step=t.step,this.stop=t.stop,this.config=t.config,this.checkpointConfig=t.checkpointConfig,this.isNested=t.isNested,this.manager=t.manager,this.outputKeys=t.outputKeys,this.streamKeys=t.streamKeys,this.nodes=t.nodes,this.skipDoneTasks=t.skipDoneTasks,this.store=t.store,this.cache=t.cache?new iBe(t.cache):void 0,this.stream=t.stream,this.checkpointNamespace=t.checkpointNamespace,this.prevCheckpointConfig=t.prevCheckpointConfig,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.durability=t.durability,this.debug=t.debug,this.triggerToNodes=t.triggerToNodes}get isResuming(){var o,l,c,u,f;let t=!1;if(hn in this.checkpoint.channel_versions)t=!0;else for(const d in this.checkpoint.channel_versions)if(Object.prototype.hasOwnProperty.call(this.checkpoint.channel_versions,d)){t=!0;break}const r=((o=this.config.configurable)==null?void 0:o[oh])!==void 0&&((l=this.config.configurable)==null?void 0:l[oh]),n=this.input===null||this.input===void 0,i=ra(this.input)&&this.input.resume!=null,a=this.input===U4,s=!this.isNested&&((c=this.config.metadata)==null?void 0:c.run_id)!==void 0&&((u=this.checkpointMetadata)==null?void 0:u.run_id)!==void 0&&this.config.metadata.run_id===((f=this.checkpointMetadata)==null?void 0:f.run_id);return t&&(r||n||i||a||s)}static async initialize(t){var v,x,b,S,T,A,O,M,P,N,V,B;let{config:r,stream:n}=t;n!==void 0&&((v=r.configurable)==null?void 0:v[hk])!==void 0&&(n=nBe(n,r.configurable[hk]));const i=r.configurable?!("checkpoint_id"in r.configurable):!0,a=(x=r.configurable)==null?void 0:x[zh];r.configurable&&a&&(a.subgraphCounter>0&&(r=yc(r,{[bu]:[r.configurable[bu],a.subgraphCounter.toString()].join(sa)})),a.subgraphCounter+=1);const s=D0 in(r.configurable??{});!s&&((b=r.configurable)==null?void 0:b.checkpoint_ns)!==void 0&&((S=r.configurable)==null?void 0:S.checkpoint_ns)!==""&&(r=yc(r,{checkpoint_ns:"",checkpoint_id:void 0}));let o=r;((T=r.configurable)==null?void 0:T[xl])!==void 0&&((M=(A=r.configurable)==null?void 0:A[xl])!=null&&M[(O=r.configurable)==null?void 0:O.checkpoint_ns])&&(o=yc(r,{checkpoint_id:r.configurable[xl][(P=r.configurable)==null?void 0:P.checkpoint_ns]}));const l=((V=(N=r.configurable)==null?void 0:N.checkpoint_ns)==null?void 0:V.split(sa))??[],c=await((B=t.checkpointer)==null?void 0:B.getTuple(o))??{config:r,checkpoint:Mle(),metadata:{source:"input",step:-2,parents:{}},pendingWrites:[]};o={...r,...c.config,configurable:{checkpoint_ns:"",...r.configurable,...c.config.configurable}};const u=c.parentConfig,f=uk(c.checkpoint),d={...c.metadata},h=c.pendingWrites??[],m=fk(t.channelSpecs,f),p=(d.step??0)+1,y=p+(r.recursionLimit??rBe)+1,g={...f.channel_versions},w=t.store?new X8e(t.store):void 0;return w&&await w.start(),new ice({input:t.input,config:r,checkpointer:t.checkpointer,checkpoint:f,checkpointMetadata:d,checkpointConfig:o,prevCheckpointConfig:u,checkpointNamespace:l,channels:m,isNested:s,manager:t.manager,skipDoneTasks:i,step:p,stop:y,checkpointPreviousVersions:g,checkpointPendingWrites:h,outputKeys:t.outputKeys??[],streamKeys:t.streamKeys??[],nodes:t.nodes,stream:n,store:w,cache:t.cache,interruptAfter:t.interruptAfter,interruptBefore:t.interruptBefore,durability:t.durability,debug:t.debug,triggerToNodes:t.triggerToNodes})}_checkpointerPutAfterPrevious(t){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>{var r;return(r=this.checkpointer)==null?void 0:r.put(t.config,t.checkpoint,t.metadata,t.newVersions)}),this.checkpointerPromises.push(this._checkpointerChainedPromise)}putWrites(t,r){var l;let n=r;if(n.length===0)return;n.every(([c])=>c in G8e)&&(n=Array.from(new Map(n.map(c=>[c[0],c])).values()));let i=!1;for(const c in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,c)&&this.channels[c].lc_graph_name==="UntrackedValue"){i=!0;break}let a=n;i&&(a=n.filter(([c])=>{const u=this.channels[c];return!u||u.lc_graph_name!=="UntrackedValue"}).map(([c,u])=>c===Fo&&zs(u)?[c,qFe(u,this.channels)]:[c,u])),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(c=>c[0]!==t);for(const[c,u]of a)this.checkpointPendingWrites.push([t,c,u]);const s=yc(this.checkpointConfig,{[bu]:((l=this.config.configurable)==null?void 0:l.checkpoint_ns)??"",[LL]:this.checkpoint.id});if(this.durability!=="exit"&&this.checkpointer!=null&&this.checkpointerPromises.push(this.checkpointer.putWrites(s,a,t)),this.tasks&&this._outputWrites(t,n),!r.length||!this.cache||!this.tasks)return;const o=this.tasks[t];o==null||o.cache_key==null||r[0][0]===no||r[0][0]===qr||this.cache.set([{key:[o.cache_key.ns,o.cache_key.key],value:o.writes,ttl:o.cache_key.ttl}])}_outputWrites(t,r,n=!1){var a,s;const i=this.tasks[t];if(i!==void 0){if(i.config!==void 0&&(i.config.tags??[]).includes(Fi))return;if(r.length>0)if(r[0][0]===qr){if(((a=i.path)==null?void 0:a[0])===Mo&&((s=i.path)==null?void 0:s[i.path.length-1])===!0)return;const o=r.filter(l=>l[0]===qr).flatMap(l=>l[1]);this._emit([["updates",{[qr]:o}],["values",{[qr]:o}]])}else r[0][0]!==no&&this._emit(Vw(qd(MFe(this.outputKeys,[[i,r]],n),"updates")));n||this._emit(Vw(qd(YFe([[i,r]],this.streamKeys),"tasks")))}}async _matchCachedWrites(){if(!this.cache)return[];const t=[],r=([s,o])=>`ns:${s.join(",")}|key:${o}`,n=[],i={};for(const s of Object.values(this.tasks))s.cache_key!=null&&!s.writes.length&&(n.push([s.cache_key.ns,s.cache_key.key]),i[r([s.cache_key.ns,s.cache_key.key])]=s);if(n.length===0)return[];const a=await this.cache.get(n);for(const{key:s,value:o}of a){const l=i[r(s)];l!=null&&(l.writes.push(...o),t.push({task:l,result:o}))}return t}async tick(t){var i,a,s;this.store&&!this.store.isRunning&&await((i=this.store)==null?void 0:i.start());const{inputKeys:r=[]}=t;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![_E,U4].includes(this.input))await this._first(r);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new ky;if(Object.values(this.tasks).every(o=>o.writes.length>0)){const o=Object.values(this.tasks).flatMap(c=>c.writes);this.updatedChannels=No(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);const l=await hh(qd(j4(this.outputKeys,o,this.channels),"values"));if(this._emit(l),this.checkpointPendingWrites=[],await this._putCheckpoint({source:"loop"}),bE(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new ky;((a=this.config.configurable)==null?void 0:a[oh])!==void 0&&((s=this.config.configurable)==null||delete s[oh])}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;if(this.tasks=ry(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream,triggerToNodes:this.triggerToNodes,updatedChannels:this.updatedChannels}),this.checkpointer&&this._emit(await hh(qd(XFe(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(const[o,l,c]of this.checkpointPendingWrites){if(l===no||l===qr||l===co)continue;const u=Object.values(this.tasks).find(f=>f.id===o);u&&u.writes.push([l,c])}for(const o of Object.values(this.tasks))o.writes.length>0&&this._outputWrites(o.id,o.writes,!0)}if(Object.values(this.tasks).every(o=>o.writes.length>0))return this.tick({inputKeys:r});if(bE(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new ky;const n=await hh(qd(RW(Object.values(this.tasks)),"tasks"));return this._emit(n),!0}async finishAndHandleError(t){this.durability==="exit"&&(!this.isNested||typeof t<"u"||this.checkpointNamespace.every(n=>!n.includes(Vf)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());const r=this._suppressInterrupt(t);return(r||t===void 0)&&(this.output=sm(this.channels,this.outputKeys)),r&&(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(n=>n.writes.length>0)&&(this.updatedChannels=No(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes),this._emit(Vw(qd(j4(this.outputKeys,Object.values(this.tasks).flatMap(n=>n.writes),this.channels),"values")))),y0(t)&&!t.interrupts.length&&this._emit([["updates",{[qr]:[]}],["values",{[qr]:[]}]])),r}async acceptPush(t,r,n){var s,o;if(((s=this.interruptAfter)==null?void 0:s.length)>0&&bE(this.checkpoint,this.interruptAfter,[t])){this.toInterrupt.push(t);return}const i=FL([Mo,t.path??[],r,t.id,n],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,t.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(!i)return;if(((o=this.interruptBefore)==null?void 0:o.length)>0&&bE(this.checkpoint,this.interruptBefore,[i])){this.toInterrupt.push(i);return}this._emit(Vw(qd(RW([i]),"tasks"))),this.debug&&rce(this.step,[i]),this.tasks[i.id]=i,this.skipDoneTasks&&this._matchWrites({[i.id]:i});const a=await this._matchCachedWrites();for(const{task:l}of a)this._outputWrites(l.id,l.writes,!0);return i}_suppressInterrupt(t){return y0(t)&&!this.isNested}async _first(t){var s;const{configurable:r}=this.config,n=r==null?void 0:r[zh];if(n&&n.nullResume!==void 0&&this.putWrites(bl,[[co,n.nullResume]]),ra(this.input)){const o=this.input.resume!=null;if(this.input.resume!=null&&typeof this.input.resume=="object"&&Object.keys(this.input.resume).every(Xle)&&((s=this.config).configurable??(s.configurable={}),this.config.configurable[jA]=this.input.resume),o&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");const l={};for(const[c,u,f]of LFe(this.input,this.checkpointPendingWrites))l[c]??(l[c]=[]),l[c].push([u,f]);if(Object.keys(l).length===0)throw new vW("Received empty Command input");for(const[c,u]of Object.entries(l))this.putWrites(c,u)}const i=(this.checkpointPendingWrites??[]).filter(o=>o[0]===bl).map(o=>o.slice(1));i.length>0&&No(this.checkpoint,this.channels,[{name:Tf,writes:i,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);const a=ra(this.input)&&i.length>0;if(this.isResuming||a){for(const l in this.channels)if(Object.prototype.hasOwnProperty.call(this.channels,l)&&this.checkpoint.channel_versions[l]!==void 0){const c=this.checkpoint.channel_versions[l];this.checkpoint.versions_seen[qr]={...this.checkpoint.versions_seen[qr],[l]:c}}const o=await hh(qd(j4(this.outputKeys,!0,this.channels),"values"));this._emit(o)}if(this.isResuming)this.input=U4;else if(a)await this._putCheckpoint({source:"input"}),this.input=_E;else{const o=await hh(Qle(t,this.input));if(o.length>0){const l=ry(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.config,!0,{step:this.step});this.updatedChannels=No(this.checkpoint,this.channels,Object.values(l).concat([{name:Tf,writes:o,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),await this._putCheckpoint({source:"input"}),this.input=_E}else if(oh in(this.config.configurable??{}))this.input=_E;else throw new vW(`Received no input writes for ${JSON.stringify(t,null,2)}`)}this.isNested||(this.config=yc(this.config,{[oh]:this.isResuming}))}_emit(t){for(const[r,n]of t)if(this.stream.modes.has(r)&&this.stream.push([this.checkpointNamespace,r,n]),(r==="checkpoints"||r==="tasks")&&this.stream.modes.has("debug")){const i=r==="checkpoints"?this.step-1:this.step,a=new Date().toISOString(),s=r==="checkpoints"?"checkpoint":typeof n=="object"&&n!=null&&"result"in n?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:i,type:s,timestamp:a,payload:n}])}}_putCheckpoint(t){var a;const r=this.checkpointMetadata===t,n=this.checkpointer!=null&&(this.durability!=="exit"||r),i=s=>{var c,u,f;this.prevCheckpointConfig=(u=(c=this.checkpointConfig)==null?void 0:c.configurable)!=null&&u.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=yc(this.checkpointConfig,{[bu]:((f=this.config.configurable)==null?void 0:f.checkpoint_ns)??""});const o={...this.checkpoint.channel_versions},l=zA(this.checkpointPreviousVersions,o);this.checkpointPreviousVersions=o,this._checkpointerPutAfterPrevious({config:{...this.checkpointConfig},checkpoint:uk(s),metadata:{...this.checkpointMetadata},newVersions:l}),this.checkpointConfig={...this.checkpointConfig,configurable:{...this.checkpointConfig.configurable,checkpoint_id:this.checkpoint.id}}};r||(this.checkpointMetadata={...t,step:this.step,parents:((a=this.config.configurable)==null?void 0:a[xl])??{}}),this.checkpoint=c0(this.checkpoint,n?this.channels:void 0,this.step,r?{id:this.checkpoint.id}:void 0),n&&i(this.checkpoint),r||(this.step+=1)}_flushPendingWrites(){var n;if(this.checkpointer==null||this.checkpointPendingWrites.length===0)return;const t=yc(this.checkpointConfig,{[bu]:((n=this.config.configurable)==null?void 0:n.checkpoint_ns)??"",[LL]:this.checkpoint.id}),r={};for(const[i,a,s]of this.checkpointPendingWrites)r[i]??(r[i]=[]),r[i].push([a,s]);for(const[i,a]of Object.entries(r))this.checkpointerPromises.push(this.checkpointer.putWrites(t,a,i))}_matchWrites(t){for(const[r,n,i]of this.checkpointPendingWrites){if(n===no||n===qr||n===co)continue;const a=Object.values(t).find(s=>s.id===r);a&&a.writes.push([n,i])}for(const r of Object.values(t))r.writes.length>0&&this._outputWrites(r.id,r.writes,!0)}};function sBe(e){return ji(e==null?void 0:e.message)}var oBe=class extends i1{constructor(t){super();L(this,"name","StreamMessagesHandler");L(this,"streamFn");L(this,"metadatas",{});L(this,"seen",{});L(this,"emittedChatModelRunIds",{});L(this,"stableMessageIdMap",{});L(this,"lc_prefer_streaming",!0);this.streamFn=t}_emit(t,r,n,i=!1){var s;if(i&&r.id!==void 0&&this.seen[r.id]!==void 0)return;let a=r.id;n!=null&&($C(r)?a??(a=`run-${n}-tool-${r.tool_call_id}`):((a==null||a===`run-${n}`)&&(a=this.stableMessageIdMap[n]??a??`run-${n}`),(s=this.stableMessageIdMap)[n]??(s[n]=a))),a!==r.id&&(r.id=a,r.lc_kwargs.id=a),r.id!=null&&(this.seen[r.id]=r),this.streamFn([t[0],"messages",[r,t[1]]])}handleChatModelStart(t,r,n,i,a,s,o,l){o&&(!s||!s.includes(nFe)&&!s.includes("nostream"))&&(this.metadatas[n]=[o.langgraph_checkpoint_ns.split("|"),{tags:s,name:l,...o}])}handleLLMNewToken(t,r,n,i,a,s){const o=s==null?void 0:s.chunk;this.emittedChatModelRunIds[n]=!0,this.metadatas[n]!==void 0&&(sBe(o)?this._emit(this.metadatas[n],o.message,n):this._emit(this.metadatas[n],new Dl({content:t}),n))}handleLLMEnd(t,r){var n,i;if(this.metadatas[r]!==void 0){if(!this.emittedChatModelRunIds[r]){const a=(i=(n=t.generations)==null?void 0:n[0])==null?void 0:i[0];ji(a==null?void 0:a.message)&&this._emit(this.metadatas[r],a==null?void 0:a.message,r,!0),delete this.emittedChatModelRunIds[r]}delete this.metadatas[r],delete this.stableMessageIdMap[r]}}handleLLMError(t,r){delete this.metadatas[r]}handleChainStart(t,r,n,i,a,s,o,l){if(s!==void 0&&l===s.langgraph_node&&(a===void 0||!a.includes(Fi))&&(this.metadatas[n]=[s.langgraph_checkpoint_ns.split("|"),{tags:a,name:l,...s}],typeof r=="object")){for(const c of Object.values(r))if((ji(c)||Tb(c))&&c.id!==void 0)this.seen[c.id]=c;else if(Array.isArray(c))for(const u of c)(ji(u)||Tb(u))&&u.id!==void 0&&(this.seen[u.id]=u)}}handleChainEnd(t,r){const n=this.metadatas[r];if(delete this.metadatas[r],n!==void 0){if(ji(t))this._emit(n,t,r,!0);else if(Array.isArray(t))for(const i of t)ji(i)&&this._emit(n,i,r,!0);else if(t!=null&&typeof t=="object"){for(const i of Object.values(t))if(ji(i))this._emit(n,i,r,!0);else if(Array.isArray(i))for(const a of i)ji(a)&&this._emit(n,a,r,!0)}}}handleChainError(t,r){delete this.metadatas[r]}};const lBe=500,cBe=2,uBe=128e3,fBe=3,dBe=[400,401,402,403,404,405,406,407,409],hBe=e=>{var r,n;if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||e.name==="AbortError"||e.name==="GraphValueError"||(e==null?void 0:e.code)==="ECONNABORTED")return!1;const t=((r=e==null?void 0:e.response)==null?void 0:r.status)??(e==null?void 0:e.status);return!(t&&dBe.includes(+t)||((n=e==null?void 0:e.error)==null?void 0:n.code)==="insufficient_quota")};async function ace(e,t,r,n){var u;const i=e.retry_policy??t;let a=i!==void 0?i.initialInterval??lBe:0,s=0,o,l,{config:c}=e;for(r&&(c=yc(c,r)),c={...c,signal:n};!(n!=null&&n.aborted);){e.writes.splice(0,e.writes.length),o=void 0;try{l=await e.proc.invoke(e.input,c);break}catch(f){if(o=f,o.pregelTaskId=e.id,a6e(o)){const m=(u=c==null?void 0:c.configurable)==null?void 0:u.checkpoint_ns,p=o.command;if(p.graph===m){for(const y of e.writers)await y.invoke(p,c);o=void 0;break}else if(p.graph===Vo.PARENT){const y=uFe(m);o.command=new Vo({...o.command,graph:y})}}if(PA(o)||i===void 0||(s+=1,s>=(i.maxAttempts??fBe))||!(i.retryOn??hBe)(o))break;a=Math.min(i.maxInterval??uBe,a*(i.backoffFactor??cBe));const d=i.jitter?Math.floor(a+Math.random()*1e3):a;await new Promise(m=>setTimeout(m,d));const h=o.name??o.constructor.unminifiable_name??o.constructor.name;((i==null?void 0:i.logWarning)??!0)&&console.log(`Retrying task "${String(e.name)}" after ${a.toFixed(2)}ms (attempt ${s}) after ${h}: ${o}`),c=yc(c,{[oh]:!0})}}return{task:e,result:l,error:o,signalAborted:n==null?void 0:n.aborted}}const BL=Symbol.for("promiseAdded");function pBe(){const e={next:()=>{},wait:Promise.resolve(BL)};function t(r){e.next=()=>{e.wait=new Promise(t),r(BL)}}return e.wait=new Promise(t),e}var mBe=class{constructor({loop:e,nodeFinished:t}){L(this,"nodeFinished");L(this,"loop");this.loop=e,this.nodeFinished=t}async tick(e={}){const{timeout:t,retryPolicy:r,onStepWrite:n,maxConcurrency:i}=e,a=new Set;let s;const o=new AbortController,l=o.signal,c=t?AbortSignal.timeout(t):void 0,u=Object.values(this.loop.tasks).filter(m=>m.writes.length===0),{signals:f,disposeCombinedSignal:d}=this._initializeAbortSignals({exceptionSignal:l,stepTimeoutSignal:c,signal:e.signal}),h=this._executeTasksWithRetry(u,{signals:f,retryPolicy:r,maxConcurrency:i});for await(const{task:m,error:p,signalAborted:y}of h)this._commit(m,p),y0(p)||PA(p)&&!y0(s)?s=p:p&&(a.size===0||!y)&&(o.abort(),a.add(p));if(d==null||d(),n==null||n(this.loop.step,Object.values(this.loop.tasks).map(m=>m.writes).flat()),a.size===1)throw Array.from(a)[0];if(a.size>1)throw new AggregateError(Array.from(a),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(y0(s)||PA(s)&&this.loop.isNested)throw s}_initializeAbortSignals({exceptionSignal:e,stepTimeoutSignal:t,signal:r}){var c;const n=((c=this.loop.config.configurable)==null?void 0:c[kW])??{},i=n.externalAbortSignal??r,a=t??n.timeoutAbortSignal,{signal:s,dispose:o}=gk(i,a,e),l={externalAbortSignal:i,timeoutAbortSignal:a,composedAbortSignal:s};return this.loop.config=yc(this.loop.config,{[kW]:l}),{signals:l,disposeCombinedSignal:o}}async*_executeTasksWithRetry(e,t){var d,h,m;const{retryPolicy:r,maxConcurrency:n,signals:i}=t??{},a=pBe(),s={},o={executingTasksMap:s,barrier:a,retryPolicy:r,scheduleTask:async(p,y,g)=>this.loop.acceptPush(p,y,g)};if((d=i==null?void 0:i.composedAbortSignal)!=null&&d.aborted)throw new Error("Abort");let l=0,c;const u=gk(i==null?void 0:i.externalAbortSignal,i==null?void 0:i.timeoutAbortSignal),f=u.signal?new Promise((p,y)=>{var g;c=()=>y(new Error("Abort")),(g=u.signal)==null||g.addEventListener("abort",c,{once:!0})}):void 0;for(;(l===0||Object.keys(s).length>0)&&e.length;){for(;Object.values(s).length<(n??e.length)&&l<e.length;l+=1){const y=e[l];s[y.id]=ace(y,r,{[f8]:WA==null?void 0:WA.bind(o,this,y)},i==null?void 0:i.composedAbortSignal).catch(g=>{var w;return{task:y,error:g,signalAborted:(w=i==null?void 0:i.composedAbortSignal)==null?void 0:w.aborted}})}const p=await Promise.race([...Object.values(s),...f?[f]:[],a.wait]);p!==BL&&(yield p,c!=null&&((h=u.signal)==null||h.removeEventListener("abort",c),(m=u.dispose)==null||m.call(u)),delete s[p.task.id])}}_commit(e,t){var r;if(t!==void 0)if(y0(t)){if(t.interrupts.length){const n=t.interrupts.map(a=>[qr,a]),i=e.writes.filter(a=>a[0]===co);i.length&&n.push(...i),this.loop.putWrites(e.id,n)}}else PA(t)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[no,{message:t.message,name:t.name}]]);else this.nodeFinished&&(((r=e.config)==null?void 0:r.tags)==null||!e.config.tags.includes(Fi))&&this.nodeFinished(String(e.name)),e.writes.length===0&&e.writes.push([d8,null]),this.loop.putWrites(e.id,e.writes)}};async function WA(e,t,r,n,i,a={}){var f,d;const s=(d=(f=t.config)==null?void 0:f.configurable)==null?void 0:d[zh];if(!s)throw new Error(`BUG: No scratchpad found on task ${t.name}__${t.id}`);const o=s.callCounter;s.callCounter+=1;const l=new $Fe({func:r,name:n,input:i,cache:a.cache,retry:a.retry,callbacks:a.callbacks}),c=await this.scheduleTask(t,o,l);if(!c)return;const u=this.executingTasksMap[c.id];if(u!==void 0)return u;if(c.writes.length>0){const h=c.writes.filter(([p])=>p===uv),m=c.writes.filter(([p])=>p===no);if(h.length>0){if(h.length===1)return Promise.resolve(h[0][1]);throw new Error(`BUG: multiple returns found for task ${c.name}__${c.id}`)}if(m.length>0){if(m.length===1){const p=m[0][1],y=p instanceof Error?p:new Error(String(p));return Promise.reject(y)}throw new Error(`BUG: multiple errors found for task ${c.name}__${c.id}`)}return}else{const h=ace(c,a.retry,{[f8]:WA.bind(this,e,c)});return this.executingTasksMap[c.id]=h,this.barrier.next(),h.then(({result:m,error:p})=>p?Promise.reject(p):m)}}var gf=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};function gBe({nodes:e,channels:t,inputChannels:r,outputChannels:n,streamChannels:i,interruptAfterNodes:a,interruptBeforeNodes:s}){if(!t)throw new gf("Channels not provided");const o=new Set,l=new Set;for(const[c,u]of Object.entries(e)){if(c===qr)throw new gf(`"Node name ${qr} is reserved"`);if(u.constructor===Bb)u.triggers.forEach(f=>o.add(f));else throw new gf(`Invalid node type ${typeof u}, expected PregelNode`)}for(const c of o)if(!(c in t))throw new gf(`Subscribed channel '${String(c)}' not in channels`);if(Array.isArray(r)){if(r.every(c=>!o.has(c)))throw new gf(`None of the input channels ${r} are subscribed to by any node`)}else if(!o.has(r))throw new gf(`Input channel ${String(r)} is not subscribed to by any node`);Array.isArray(n)?n.forEach(c=>l.add(c)):l.add(n),i&&!Array.isArray(i)?l.add(i):Array.isArray(i)&&i.forEach(c=>l.add(c));for(const c of l)if(!(c in t))throw new gf(`Output channel '${String(c)}' not in channels`);if(a&&a!=="*"){for(const c of a)if(!(c in e))throw new gf(`Node ${String(c)} not in nodes`)}if(s&&s!=="*"){for(const c of s)if(!(c in e))throw new gf(`Node ${String(c)} not in nodes`)}}function jW(e,t){if(Array.isArray(e)){for(const r of e)if(!(r in t))throw new Error(`Key ${String(r)} not found in channels`)}else if(!(e in t))throw new Error(`Key ${String(e)} not found in channels`)}var yBe=class sce extends yp{constructor(r){super();L(this,"lc_graph_name","Topic");L(this,"unique",!1);L(this,"accumulate",!1);L(this,"seen");L(this,"values");this.unique=(r==null?void 0:r.unique)??this.unique,this.accumulate=(r==null?void 0:r.accumulate)??this.accumulate,this.seen=new Set,this.values=[]}fromCheckpoint(r){const n=new sce({unique:this.unique,accumulate:this.accumulate});return typeof r<"u"&&(n.seen=new Set(r[0]),n.values=r[1]),n}update(r){let n=!1;this.accumulate||(n=this.values.length>0,this.values=[]);const i=r.flat();if(i.length>0)if(this.unique)for(const a of i)this.seen.has(a)||(n=!0,this.seen.add(a),this.values.push(a));else n=!0,this.values.push(...i);return n}get(){if(this.values.length===0)throw new _a;return this.values}checkpoint(){return[[...this.seen],this.values]}isAvailable(){return this.values.length!==0}},vBe=class{static subscribeTo(e,t){const{key:r,tags:n}={key:void 0,tags:void 0,...t??{}};if(Array.isArray(e)&&r!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let i;return typeof e=="string"?r?i={[r]:e}:i=[e]:i=Object.fromEntries(e.map(a=>[a,a])),new Bb({channels:i,triggers:Array.isArray(e)?e:[e],tags:n})}static writeTo(e,t){const r=[];for(const n of e)r.push({channel:n,value:j0,skipNone:!1});for(const[n,i]of Object.entries(t??{}))Lr.isRunnable(i)||typeof i=="function"?r.push({channel:n,value:j0,skipNone:!0,mapper:$a(i)}):r.push({channel:n,value:i,skipNone:!1});return new Os(r)}},wBe=class extends Lr{constructor(){super(...arguments);L(this,"lc_namespace",["langgraph","pregel"])}invoke(t,r){throw new Error("Not implemented")}withConfig(t){return super.withConfig(t)}stream(t,r){return super.stream(t,r)}},xBe=class extends wBe{constructor(t){super(t);L(this,"lc_namespace",["langgraph","pregel"]);L(this,"lg_is_pregel",!0);L(this,"nodes");L(this,"channels");L(this,"inputChannels");L(this,"outputChannels");L(this,"autoValidate",!0);L(this,"streamMode",["values"]);L(this,"streamChannels");L(this,"interruptAfter");L(this,"interruptBefore");L(this,"stepTimeout");L(this,"debug",!1);L(this,"checkpointer");L(this,"retryPolicy");L(this,"config");L(this,"store");L(this,"cache");L(this,"userInterrupt");L(this,"triggerToNodes",{});let{streamMode:r}=t;if(r!=null&&!Array.isArray(r)&&(r=[r]),this.nodes=t.nodes,this.channels=t.channels,Fo in this.channels&&"lc_graph_name"in this.channels[Fo]&&this.channels[Fo].lc_graph_name!=="Topic")throw new Error(`Channel '${Fo}' is reserved and cannot be used in the graph.`);this.channels[Fo]=new yBe({accumulate:!1}),this.autoValidate=t.autoValidate??this.autoValidate,this.streamMode=r??this.streamMode,this.inputChannels=t.inputChannels,this.outputChannels=t.outputChannels,this.streamChannels=t.streamChannels??this.streamChannels,this.interruptAfter=t.interruptAfter,this.interruptBefore=t.interruptBefore,this.stepTimeout=t.stepTimeout??this.stepTimeout,this.debug=t.debug??this.debug,this.checkpointer=t.checkpointer,this.retryPolicy=t.retryPolicy,this.config=t.config,this.store=t.store,this.cache=t.cache,this.name=t.name,this.triggerToNodes=t.triggerToNodes??this.triggerToNodes,this.userInterrupt=t.userInterrupt,this.autoValidate&&this.validate()}static lc_name(){return"LangGraph"}withConfig(t){const r=Al(this.config,t);return new this.constructor({...this,config:r})}validate(){var t;gBe({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore});for(const[r,n]of Object.entries(this.nodes))for(const i of n.triggers)(t=this.triggerToNodes)[i]??(t[i]=[]),this.triggerToNodes[i].push(r);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}async getGraphAsync(t){return this.getGraph(t)}*getSubgraphs(t,r){var n;for(const[i,a]of Object.entries(this.nodes)){if(t!==void 0&&!t.startsWith(i))continue;const s=(n=a.subgraphs)!=null&&n.length?a.subgraphs:[a.bound];for(const o of s){const l=Jle(o);if(l!==void 0){if(i===t){yield[i,l];return}if(t===void 0&&(yield[i,l]),r){let c=t;t!==void 0&&(c=t.slice(i.length+1));for(const[u,f]of l.getSubgraphs(c,r))yield[`${i}${sa}${u}`,f]}}}}}async*getSubgraphsAsync(t,r){yield*this.getSubgraphs(t,r)}async _prepareStateSnapshot({config:t,saved:r,subgraphCheckpointer:n,applyPendingWrites:i=!1}){var d,h,m,p,y,g,w,v;if(r===void 0)return{values:{},next:[],config:t,tasks:[]};const a=fk(this.channels,r.checkpoint);if((d=r.pendingWrites)!=null&&d.length){const x=r.pendingWrites.filter(([b,S])=>b===bl).map(([b,S,T])=>[String(S),T]);x.length>0&&No(r.checkpoint,a,[{name:Tf,writes:x,triggers:[]}],void 0,this.triggerToNodes)}const s=Object.values(ry(r.checkpoint,r.pendingWrites,this.nodes,a,r.config,!0,{step:(((h=r.metadata)==null?void 0:h.step)??-1)+1,store:this.store})),o=await hh(this.getSubgraphsAsync()),l=((m=r.config.configurable)==null?void 0:m.checkpoint_ns)??"",c={};for(const x of s){const b=o.find(([T])=>T===x.name);if(!b)continue;let S=`${String(x.name)}${Vf}${x.id}`;if(l&&(S=`${l}${sa}${S}`),n===void 0){const T={configurable:{thread_id:(p=r.config.configurable)==null?void 0:p.thread_id,checkpoint_ns:S}};c[x.id]=T}else{const T={configurable:{[Li]:n,thread_id:(y=r.config.configurable)==null?void 0:y.thread_id,checkpoint_ns:S}},A=b[1];c[x.id]=await A.getState(T,{subgraphs:!0})}}if(i&&((g=r.pendingWrites)!=null&&g.length)){const x=Object.fromEntries(s.map(S=>[S.id,S]));for(const[S,T,A]of r.pendingWrites)[no,qr,NA].includes(T)||S in x&&x[S].writes.push([String(T),A]);const b=s.filter(S=>S.writes.length>0);b.length>0&&No(r.checkpoint,a,b,void 0,this.triggerToNodes)}let u=r==null?void 0:r.metadata;u&&((v=(w=r==null?void 0:r.config)==null?void 0:w.configurable)!=null&&v.thread_id)&&(u={...u,thread_id:r.config.configurable.thread_id});const f=s.filter(x=>x.writes.length===0).map(x=>x.name);return{values:sm(a,this.streamChannelsAsIs),next:f,tasks:tce(s,(r==null?void 0:r.pendingWrites)??[],c,this.streamChannelsAsIs),metadata:u,config:Wp(r.config,r.metadata),createdAt:r.checkpoint.ts,parentConfig:r.parentConfig}}async getState(t,r){var o,l,c,u;const n=((o=t.configurable)==null?void 0:o[Li])??this.checkpointer;if(!n)throw new OA("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});const i=((l=t.configurable)==null?void 0:l.checkpoint_ns)??"";if(i!==""&&((c=t.configurable)==null?void 0:c[Li])===void 0){const f=L4(i);for await(const[d,h]of this.getSubgraphsAsync(f,!0))if(d===f)return await h.getState(ug(t,{[Li]:n}),{subgraphs:r==null?void 0:r.subgraphs});throw new Error(`Subgraph with namespace "${f}" not found.`)}const a=Al(this.config,t),s=await n.getTuple(t);return await this._prepareStateSnapshot({config:a,saved:s,subgraphCheckpointer:r!=null&&r.subgraphs?n:void 0,applyPendingWrites:!((u=t.configurable)!=null&&u.checkpoint_id)})}async*getStateHistory(t,r){var s,o,l;const n=((s=t.configurable)==null?void 0:s[Li])??this.checkpointer;if(!n)throw new OA("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});const i=((o=t.configurable)==null?void 0:o.checkpoint_ns)??"";if(i!==""&&((l=t.configurable)==null?void 0:l[Li])===void 0){const c=L4(i);for await(const[u,f]of this.getSubgraphsAsync(c,!0))if(u===c){yield*f.getStateHistory(ug(t,{[Li]:n}),r);return}throw new Error(`Subgraph with namespace "${c}" not found.`)}const a=Al(this.config,t,{configurable:{checkpoint_ns:i}});for await(const c of n.list(a,r))yield this._prepareStateSnapshot({config:c.config,saved:c})}async bulkUpdateState(t,r){var o,l,c;const n=((o=t.configurable)==null?void 0:o[Li])??this.checkpointer;if(!n)throw new OA("No checkpointer set",{lc_error_code:"MISSING_CHECKPOINTER"});if(r.length===0)throw new Error("No supersteps provided");if(r.some(u=>u.updates.length===0))throw new Error("No updates provided");const i=((l=t.configurable)==null?void 0:l.checkpoint_ns)??"";if(i!==""&&((c=t.configurable)==null?void 0:c[Li])===void 0){const u=L4(i);for await(const[,f]of this.getSubgraphsAsync(u,!0))return await f.bulkUpdateState(ug(t,{[Li]:n}),r);throw new Error(`Subgraph "${u}" not found`)}const a=async(u,f)=>{var P,N,V,B,G,Z,J,Y,U,se,ue;const d=this.config?Al(this.config,u):u,h=await n.getTuple(d),m=h!==void 0?uk(h.checkpoint):Mle(),p={...h==null?void 0:h.checkpoint.channel_versions},y=((P=h==null?void 0:h.metadata)==null?void 0:P.step)??-1;let g=ug(d,{checkpoint_ns:((N=d.configurable)==null?void 0:N.checkpoint_ns)??""}),w=d.metadata??{};h!=null&&h.config.configurable&&(g=ug(d,h.config.configurable),w={...h.metadata,...w});const{values:v,asNode:x}=f[0];if(v==null&&x===void 0){if(f.length>1)throw new Mn("Cannot create empty checkpoint with multiple updates");return Wp(await n.put(g,c0(m,void 0,y),{source:"update",step:y+1,parents:((V=h==null?void 0:h.metadata)==null?void 0:V.parents)??{}},{}),h?h.metadata:void 0)}const b=fk(this.channels,m);if(v===null&&x===Ur){if(f.length>1)throw new Mn("Cannot apply multiple updates when clearing state");if(h){const I=ry(m,h.pendingWrites||[],this.nodes,b,h.config,!0,{step:(((B=h.metadata)==null?void 0:B.step)??-1)+1,checkpointer:n,store:this.store}),z=(h.pendingWrites||[]).filter(H=>H[0]===bl).map(H=>H.slice(1));z.length>0&&No(m,b,[{name:Tf,writes:z,triggers:[]}],n.getNextVersion.bind(n),this.triggerToNodes);for(const[H,q,F]of h.pendingWrites||[])[no,qr,NA].includes(q)||H in I&&I[H].writes.push([q,F]);No(m,b,Object.values(I),n.getNextVersion.bind(n),this.triggerToNodes)}return Wp(await n.put(g,c0(m,b,y),{...w,source:"update",step:y+1,parents:((G=h==null?void 0:h.metadata)==null?void 0:G.parents)??{}},zA(p,m.channel_versions)),h?h.metadata:void 0)}if(x===eFe){if(f.length>1)throw new Mn("Cannot copy checkpoint with multiple updates");if(h==null)throw new Mn("Cannot copy a non-existent checkpoint");const I=q=>!Array.isArray(q)||q.length===0?!1:q.every(F=>Array.isArray(F)&&F.length===2),z=c0(m,void 0,y),H=await n.put(h.parentConfig??ug(h.config,{checkpoint_id:void 0}),z,{source:"fork",step:y+1,parents:((Z=h.metadata)==null?void 0:Z.parents)??{}},{});if(I(v)){const q=ry(z,h.pendingWrites,this.nodes,b,H,!1,{step:y+2}),F=Object.values(q).reduce((re,{name:K,id:le})=>(re[K]??(re[K]=[]),re[K].push({id:le}),re),{}),D=v.reduce((re,K)=>{var Re,ie;const[le,xe]=K;re[xe]??(re[xe]=[]);const X=re[xe].length,Ie=(ie=(Re=F[xe])==null?void 0:Re[X])==null?void 0:ie.id;return re[xe].push({values:le,asNode:xe,taskId:Ie}),re},{});return a(Wp(H,h.metadata),Object.values(D).flat())}return Wp(H,h.metadata)}if(x===Tf){if(f.length>1)throw new Mn("Cannot apply multiple updates when updating as input");const I=await hh(Qle(this.inputChannels,v));if(I.length===0)throw new Mn(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);No(m,b,[{name:Tf,writes:I,triggers:[]}],n.getNextVersion.bind(this.checkpointer),this.triggerToNodes);const z=((J=h==null?void 0:h.metadata)==null?void 0:J.step)!=null?h.metadata.step+1:-1,H=await n.put(g,c0(m,b,z),{source:"input",step:z,parents:((Y=h==null?void 0:h.metadata)==null?void 0:Y.parents)??{}},zA(p,m.channel_versions));return await n.putWrites(H,I,Qg(Tf,m.id)),Wp(H,h?h.metadata:void 0)}if(((U=d.configurable)==null?void 0:U.checkpoint_id)===void 0&&(h==null?void 0:h.pendingWrites)!==void 0&&h.pendingWrites.length>0){const I=ry(m,h.pendingWrites,this.nodes,b,h.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(((se=h.metadata)==null?void 0:se.step)??-1)+1}),z=(h.pendingWrites??[]).filter(q=>q[0]===bl).map(q=>q.slice(1));z.length>0&&No(h.checkpoint,b,[{name:Tf,writes:z,triggers:[]}],void 0,this.triggerToNodes);for(const[q,F,D]of h.pendingWrites)[no,qr,NA].includes(F)||I[q]===void 0||I[q].writes.push([F,D]);const H=Object.values(I).filter(q=>q.writes.length>0);H.length>0&&No(m,b,H,void 0,this.triggerToNodes)}const S=Object.values(m.versions_seen).map(I=>Object.values(I)).flat().find(I=>!!I),T=[];if(f.length===1){let{values:I,asNode:z,taskId:H}=f[0];if(z===void 0&&Object.keys(this.nodes).length===1)[z]=Object.keys(this.nodes);else if(z===void 0&&S===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(z=this.inputChannels);else if(z===void 0){const q=Object.entries(m.versions_seen).map(([F,D])=>Object.values(D).map(re=>[re,F])).flat().filter(([F,D])=>D!==qr).sort(([F],[D])=>Dle(F,D));q&&(q.length===1?z=q[0][1]:q[q.length-1][0]!==q[q.length-2][0]&&(z=q[q.length-1][1]))}if(z===void 0)throw new Mn('Ambiguous update, specify "asNode"');T.push({values:I,asNode:z,taskId:H})}else for(const{asNode:I,values:z,taskId:H}of f){if(I==null)throw new Mn('"asNode" is required when applying multiple updates');T.push({values:z,asNode:I,taskId:H})}const A=[];for(const{asNode:I,values:z,taskId:H}of T){if(this.nodes[I]===void 0)throw new Mn(`Node "${I.toString()}" does not exist`);const q=this.nodes[I].getWriters();if(!q.length)throw new Mn(`No writers found for node "${I.toString()}"`);A.push({name:I,input:z,proc:q.length>1?sd.from(q,{omitSequenceTags:!0}):q[0],writes:[],triggers:[qr],id:H??Qg(qr,m.id),writers:[]})}for(const I of A)await I.proc.invoke(I.input,Qr({...d,store:(d==null?void 0:d.store)??this.store},{runName:d.runName??`${this.getName()}UpdateState`,configurable:{[Uh]:z=>I.writes.push(...z),[D0]:(z,H=!1)=>VA(m,b,I,z,H)}}));for(const I of A){const z=I.writes.filter(H=>H[0]!==Mo);h!==void 0&&z.length>0&&await n.putWrites(g,z,I.id)}No(m,b,A,n.getNextVersion.bind(this.checkpointer),this.triggerToNodes);const O=zA(p,m.channel_versions),M=await n.put(g,c0(m,b,y+1),{source:"update",step:y+1,parents:((ue=h==null?void 0:h.metadata)==null?void 0:ue.parents)??{}},O);for(const I of A){const z=I.writes.filter(H=>H[0]===Mo);z.length>0&&await n.putWrites(M,z,I.id)}return Wp(M,h?h.metadata:void 0)};let s=t;for(const{updates:u}of r)s=await a(s,u);return s}async updateState(t,r,n){return this.bulkUpdateState(t,[{updates:[{values:r,asNode:n}]}])}_defaults(t){var b,S,T;const{debug:r,streamMode:n,inputKeys:i,outputKeys:a,interruptAfter:s,interruptBefore:o,...l}=t;let c=!0;const u=r!==void 0?r:this.debug;let f=a;f===void 0?f=this.streamChannelsAsIs:jW(f,this.channels);let d=i;d===void 0?d=this.inputChannels:jW(d,this.channels);const h=o??this.interruptBefore??[],m=s??this.interruptAfter??[];let p;n!==void 0?(p=Array.isArray(n)?n:[n],c=typeof n=="string"):(((b=t.configurable)==null?void 0:b[wx])!==void 0?p=["values"]:p=this.streamMode,c=!0);let y;if(this.checkpointer===!1)y=void 0;else if(t!==void 0&&((S=t.configurable)==null?void 0:S[Li])!==void 0)y=t.configurable[Li];else{if(this.checkpointer===!0)throw new Error("checkpointer: true cannot be used for root graphs.");y=this.checkpointer}const g=t.store??this.store,w=t.cache??this.cache;if(t.durability!=null&&t.checkpointDuring!=null)throw new Error("Cannot use both `durability` and `checkpointDuring` at the same time.");const v=(()=>{if(t.checkpointDuring!=null)return t.checkpointDuring===!1?"exit":"async"})(),x=t.durability??v??((T=t==null?void 0:t.configurable)==null?void 0:T[Ule])??"async";return[u,p,d,f,l,h,m,y,g,c,w,x]}async stream(t,r){var s;const n=new AbortController,i={recursionLimit:(s=this.config)==null?void 0:s.recursionLimit,...r,signal:gk(r==null?void 0:r.signal,n.signal).signal},a=await super.stream(t,i);return new LW((r==null?void 0:r.encoding)==="text/event-stream"?tBe(a):a,n)}streamEvents(t,r,n){var s,o;const i=new AbortController,a={recursionLimit:(s=this.config)==null?void 0:s.recursionLimit,...r,callbacks:jFe((o=this.config)==null?void 0:o.callbacks,r==null?void 0:r.callbacks),signal:gk(r==null?void 0:r.signal,i.signal).signal};return new LW(super.streamEvents(t,a,n),i)}async _validateInput(t){return t}async _validateContext(t){return t}async*_streamIterator(t,r){var P;const n="version"in(r??{})?void 0:(r==null?void 0:r.encoding)??void 0,i=r==null?void 0:r.subgraphs,a=Vle(this.config,r);if(a.recursionLimit===void 0||a.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&a.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');const s=await this._validateInput(t),{runId:o,...l}=a,[c,u,,f,d,h,m,p,y,g,w,v]=this._defaults(l);typeof d.context<"u"?d.context=await this._validateContext(d.context):d.configurable=await this._validateContext(d.configurable);const x=new nce({modes:new Set(u)});if(this.checkpointer===!0){d.configurable??(d.configurable={});const N=d.configurable[bu]??"";d.configurable[bu]=N.split(sa).map(V=>V.split(Vf)[0]).join(sa)}if(u.includes("messages")){const N=new oBe(B=>x.push(B)),{callbacks:V}=d;if(V===void 0)d.callbacks=[N];else if(Array.isArray(V))d.callbacks=V.concat(N);else{const B=V.copy();B.addHandler(N,!0),d.callbacks=B}}d.writer??(d.writer=N=>{var B,G,Z;if(!u.includes("custom"))return;const V=(Z=(G=(B=cFe())==null?void 0:B.configurable)==null?void 0:G[bu])==null?void 0:Z.split(sa).slice(0,-1);x.push([V??[],"custom",N])}),d.interrupt??(d.interrupt=this.userInterrupt??PFe);const b=await((P=await lo(d))==null?void 0:P.handleChainStart(this.toJSON(),DFe(t,"input"),o,void 0,void 0,void 0,(d==null?void 0:d.runName)??this.getName())),S=u8(this.channels);let T,A;const M=(async()=>{var N,V,B;try{T=await aBe.initialize({input:s,config:d,checkpointer:p,nodes:this.nodes,channelSpecs:S,outputKeys:f,streamKeys:this.streamChannelsAsIs,store:y,cache:w,stream:x,interruptAfter:m,interruptBefore:h,manager:b,debug:this.debug,triggerToNodes:this.triggerToNodes,durability:v});const G=new mBe({loop:T,nodeFinished:(N=d.configurable)==null?void 0:N[rFe]});r!=null&&r.subgraphs&&(T.config.configurable={...T.config.configurable,[hk]:T.stream}),await this._runLoop({loop:T,runner:G,debug:c,config:d}),v==="sync"&&await Promise.all((T==null?void 0:T.checkpointerPromises)??[])}catch(G){A=G}finally{try{T&&(await((V=T.store)==null?void 0:V.stop()),await((B=T.cache)==null?void 0:B.stop())),await Promise.all((T==null?void 0:T.checkpointerPromises)??[])}catch(G){A=A??G}A?x.error(A):x.close()}})();try{for await(const N of x){if(N===void 0)throw new Error("Data structure error.");const[V,B,G]=N;if(u.includes(B)){if(n==="text/event-stream"){i?yield[V,B,G]:yield[null,B,G];continue}i&&!g?yield[V,B,G]:g?i?yield[V,G]:yield G:yield[B,G]}}}catch(N){throw await(b==null?void 0:b.handleChainError(A)),N}finally{await M}await(b==null?void 0:b.handleChainEnd((T==null?void 0:T.output)??{},o,void 0,void 0,void 0))}async invoke(t,r){const n=(r==null?void 0:r.streamMode)??"values",i={...r,outputKeys:(r==null?void 0:r.outputKeys)??this.outputChannels,streamMode:n,encoding:void 0},a=[],s=await this.stream(t,i),o=[];let l;for await(const c of s)n==="values"?zle(c)?o.push(c[qr]):l=c:a.push(c);if(n==="values"){if(o.length>0){const c=o.flat(1);if(l==null)return{[qr]:c};if(typeof l=="object")return{...l,[qr]:c}}return l}return a}async _runLoop(t){const{loop:r,runner:n,debug:i,config:a}=t;let s;try{for(;await r.tick({inputKeys:this.inputChannels});){for(const{task:o}of await r._matchCachedWrites())r._outputWrites(o.id,o.writes,!0);i&&ZFe(r.checkpointMetadata.step,r.channels,this.streamChannelsList),i&&rce(r.step,Object.values(r.tasks)),await n.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(o,l)=>{i&&JFe(o,l,this.streamChannelsList)},maxConcurrency:a.maxConcurrency,signal:a.signal})}if(r.status==="out_of_steps")throw new i6e([`Recursion limit of ${a.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(o){if(s=o,!await r.finishAndHandleError(s))throw o}finally{s===void 0&&await r.finishAndHandleError()}}async clearCache(){var t;await((t=this.cache)==null?void 0:t.clear([]))}},dv=class oce extends yp{constructor(r=!0){super();L(this,"lc_graph_name","EphemeralValue");L(this,"guard");L(this,"value",[]);this.guard=r}fromCheckpoint(r){const n=new oce(this.guard);return typeof r<"u"&&(n.value=[r]),n}update(r){if(r.length===0){const n=this.value.length>0;return this.value=[],n}if(r.length!==1&&this.guard)throw new Mn("EphemeralValue can only receive one value per step.");return this.value=[r[r.length-1]],!0}get(){if(this.value.length===0)throw new _a;return this.value[0]}checkpoint(){if(this.value.length===0)throw new _a;return this.value[0]}isAvailable(){return this.value.length!==0}},lce=class{constructor(e){L(this,"path");L(this,"ends");Lr.isRunnable(e.path)?this.path=e.path:this.path=$a(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((t,r)=>(t[r]=r,t),{}):e.pathMap}run(e,t){return Os.registerWriter(new vp({name:"<branch_run>",trace:!1,func:async(r,n)=>{try{return await this._route(r,n,e,t)}catch(i){throw i.name===soe.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),i}}}))}async _route(e,t,r,n){let i=await this.path.invoke(n?n(t):e,t);Array.isArray(i)||(i=[i]);let a;if(this.ends?a=i.map(s=>zs(s)?s:this.ends[s]):a=i,a.some(s=>!s))throw new Error("Branch condition returned unknown or null destination");if(a.filter(zs).some(s=>s.node===Ur))throw new Mn("Cannot send a packet to the END node");return await r(a,t)??e}},bBe=class{constructor(){L(this,"nodes");L(this,"edges");L(this,"branches");L(this,"entryPoint");L(this,"compiled",!1);this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){function t(n){return n.length>=1&&typeof n[0]!="string"}const r=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(r.length===0)throw new Error("No nodes provided in `addNode`");for(const[n,i,a]of r){for(const o of[sa,Vf])if(n.includes(o))throw new Error(`"${o}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),n in this.nodes)throw new Error(`Node \`${n}\` already present.`);if(n===Ur)throw new Error(`Node \`${n}\` is reserved.`);const s=$a(i);this.nodes[n]={runnable:s,metadata:a==null?void 0:a.metadata,subgraphs:p8(s)?[s]:a==null?void 0:a.subgraphs,ends:a==null?void 0:a.ends}}return this}addEdge(e,t){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===Ur)throw new Error("END cannot be a start node");if(t===hn)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([r])=>r===e)&&!("channels"in this))throw new Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,t]),this}addConditionalEdges(e,t,r){var a,s;const n=typeof e=="object"?e:{source:e,path:t,pathMap:r};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!Lr.isRunnable(n.path)){const o=Array.isArray(n.pathMap)?n.pathMap.join(","):Object.keys(n.pathMap??{}).join(",");n.path=$a(n.path).withConfig({runName:`Branch<${n.source}${o!==""?`,${o}`:""}>`.slice(0,63)})}const i=n.path.getName()==="RunnableLambda"?"condition":n.path.getName();if(this.branches[n.source]&&this.branches[n.source][i])throw new Error(`Condition \`${i}\` already present for node \`${e}\``);return(a=this.branches)[s=n.source]??(a[s]={}),this.branches[n.source][i]=new lce(n),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(hn,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,Ur)}compile({checkpointer:e,interruptBefore:t,interruptAfter:r,name:n}={}){this.validate([...Array.isArray(t)?t:[],...Array.isArray(r)?r:[]]);const i=new cce({builder:this,checkpointer:e,interruptAfter:r,interruptBefore:t,autoValidate:!1,nodes:{},channels:{[hn]:new dv,[Ur]:new dv},inputChannels:hn,outputChannels:Ur,streamChannels:[],streamMode:"values",name:n});for(const[a,s]of Object.entries(this.nodes))i.attachNode(a,s);for(const[a,s]of this.edges)i.attachEdge(a,s);for(const[a,s]of Object.entries(this.branches))for(const[o,l]of Object.entries(s))i.attachBranch(a,o,l);return i.validate()}validate(e){const t=new Set([...this.allEdges].map(([n,i])=>n));for(const[n]of Object.entries(this.branches))t.add(n);for(const n of t)if(n!==hn&&!(n in this.nodes))throw new Error(`Found edge starting at unknown node \`${n}\``);const r=new Set([...this.allEdges].map(([n,i])=>i));for(const[n,i]of Object.entries(this.branches))for(const a of Object.values(i))if(a.ends!=null)for(const s of Object.values(a.ends))r.add(s);else{r.add(Ur);for(const s of Object.keys(this.nodes))s!==n&&r.add(s)}for(const n of Object.values(this.nodes))for(const i of n.ends??[])r.add(i);for(const n of Object.keys(this.nodes))if(!r.has(n))throw new s6e([`Node \`${n}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(const n of r)if(n!==Ur&&!(n in this.nodes))throw new Error(`Found edge ending at unknown node \`${n}\``);if(e){for(const n of e)if(!(n in this.nodes))throw new Error(`Interrupt node \`${n}\` is not present`)}this.compiled=!0}},cce=class extends xBe{constructor({builder:t,...r}){super(r);L(this,"builder");this.builder=t}attachNode(t,r){this.channels[t]=new dv,this.nodes[t]=new Bb({channels:[],triggers:[],metadata:r.metadata,subgraphs:r.subgraphs,ends:r.ends}).pipe(r.runnable).pipe(new Os([{channel:t,value:j0}],[Fi])),this.streamChannels.push(t)}attachEdge(t,r){if(r===Ur){if(t===hn)throw new Error("Cannot have an edge from START to END");this.nodes[t].writers.push(new Os([{channel:Ur,value:j0}],[Fi]))}else this.nodes[r].triggers.push(t),this.nodes[r].channels.push(t)}attachBranch(t,r,n){t===hn&&!this.nodes[hn]&&(this.nodes[hn]=vBe.subscribeTo(hn,{tags:[Fi]})),this.nodes[t].pipe(n.run(a=>new Os(a.map(s=>zs(s)?s:{channel:s===Ur?Ur:`branch:${t}:${r}:${s}`,value:j0}),[Fi])));const i=n.ends?Object.values(n.ends):Object.keys(this.nodes);for(const a of i)if(a!==Ur){const s=`branch:${t}:${r}:${a}`;this.channels[s]=new dv,this.nodes[a].triggers.push(s),this.nodes[a].channels.push(s)}}async getGraphAsync(t){var c,u,f,d;const r=t==null?void 0:t.xray,n=new Ib,i={[hn]:n.addNode({schema:yE()},hn)},a={};let s={};r&&(s=Object.fromEntries((await hh(this.getSubgraphsAsync())).filter(h=>$W(h[1]))));function o(h,m,p,y=!1){if(m===Ur&&a[Ur]===void 0&&(a[Ur]=n.addNode({schema:yE()},Ur)),i[h]!==void 0){if(a[m]===void 0)throw new Error(`End node ${m} not found!`);return n.addEdge(i[h],a[m],p!==m?p:void 0,y)}}for(const[h,m]of Object.entries(this.builder.nodes)){const p=Ya(h),y=m.runnable,g=m.metadata??{};if((c=this.interruptBefore)!=null&&c.includes(h)&&((u=this.interruptAfter)!=null&&u.includes(h))?g.__interrupt="before,after":(f=this.interruptBefore)!=null&&f.includes(h)?g.__interrupt="before":(d=this.interruptAfter)!=null&&d.includes(h)&&(g.__interrupt="after"),r){const w=typeof r=="number"?r-1:r,v=s[h]!==void 0?await s[h].getGraphAsync({...t,xray:w}):y.getGraph(t);if(v.trimFirstNode(),v.trimLastNode(),Object.keys(v.nodes).length>1){let S=function(A){return A?A.lc_runnable:!1},T=function(A,O){if(A!==void 0&&!R0(A))return A;if(S(O))try{let M=O.getName();return M=M.startsWith("Runnable")?M.slice(8):M,M}catch{return O.getName()}else return O.name??"UnknownSchema"};const[x,b]=n.extend(v,p);if(x===void 0)throw new Error(`Could not extend subgraph "${h}" due to missing entrypoint.`);b!==void 0&&(i[p]={name:T(b.id,b.data),...b}),a[p]={name:T(x.id,x.data),...x}}else{const x=n.addNode(y,p,g);i[p]=x,a[p]=x}}else{const w=n.addNode(y,p,g);i[p]=w,a[p]=w}}const l=[...this.builder.allEdges].sort(([h],[m])=>h<m?-1:m>h?1:0);for(const[h,m]of l)o(Ya(h),Ya(m));for(const[h,m]of Object.entries(this.builder.branches)){const p={...Object.fromEntries(Object.keys(this.builder.nodes).filter(y=>y!==h).map(y=>[Ya(y),Ya(y)])),[Ur]:Ur};for(const y of Object.values(m)){let g;y.ends!==void 0?g=y.ends:g=p;for(const[w,v]of Object.entries(g))o(Ya(h),Ya(v),w,!0)}}for(const[h,m]of Object.entries(this.builder.nodes))if(m.ends!==void 0)for(const p of m.ends)o(Ya(h),Ya(p),void 0,!0);return n}getGraph(t){var c,u,f,d;const r=t==null?void 0:t.xray,n=new Ib,i={[hn]:n.addNode({schema:yE()},hn)},a={};let s={};r&&(s=Object.fromEntries(Vw(this.getSubgraphs()).filter(h=>$W(h[1]))));function o(h,m,p,y=!1){return m===Ur&&a[Ur]===void 0&&(a[Ur]=n.addNode({schema:yE()},Ur)),n.addEdge(i[h],a[m],p!==m?p:void 0,y)}for(const[h,m]of Object.entries(this.builder.nodes)){const p=Ya(h),y=m.runnable,g=m.metadata??{};if((c=this.interruptBefore)!=null&&c.includes(h)&&((u=this.interruptAfter)!=null&&u.includes(h))?g.__interrupt="before,after":(f=this.interruptBefore)!=null&&f.includes(h)?g.__interrupt="before":(d=this.interruptAfter)!=null&&d.includes(h)&&(g.__interrupt="after"),r){const w=typeof r=="number"?r-1:r,v=s[h]!==void 0?s[h].getGraph({...t,xray:w}):y.getGraph(t);if(v.trimFirstNode(),v.trimLastNode(),Object.keys(v.nodes).length>1){let S=function(A){return A?A.lc_runnable:!1},T=function(A,O){if(A!==void 0&&!R0(A))return A;if(S(O))try{let M=O.getName();return M=M.startsWith("Runnable")?M.slice(8):M,M}catch{return O.getName()}else return O.name??"UnknownSchema"};const[x,b]=n.extend(v,p);if(x===void 0)throw new Error(`Could not extend subgraph "${h}" due to missing entrypoint.`);b!==void 0&&(i[p]={name:T(b.id,b.data),...b}),a[p]={name:T(x.id,x.data),...x}}else{const x=n.addNode(y,p,g);i[p]=x,a[p]=x}}else{const w=n.addNode(y,p,g);i[p]=w,a[p]=w}}const l=[...this.builder.allEdges].sort(([h],[m])=>h<m?-1:m>h?1:0);for(const[h,m]of l)o(Ya(h),Ya(m));for(const[h,m]of Object.entries(this.builder.branches)){const p={...Object.fromEntries(Object.keys(this.builder.nodes).filter(y=>y!==h).map(y=>[Ya(y),Ya(y)])),[Ur]:Ur};for(const y of Object.values(m)){let g;y.ends!==void 0?g=y.ends:g=p;for(const[w,v]of Object.entries(g))o(Ya(h),Ya(v),w,!0)}}return n}};function $W(e){return typeof e.attachNode=="function"&&typeof e.attachEdge=="function"}function Ya(e){return e==="subgraph"?`"${e}"`:e}function Hw(e){return typeof e=="object"&&e!==null&&"~standard"in e&&typeof e["~standard"]=="object"&&e["~standard"]!==null&&"validate"in e["~standard"]}function _Be(e){return typeof e=="object"&&e!==null&&"~standard"in e&&typeof e["~standard"]=="object"&&e["~standard"]!==null&&"jsonSchema"in e["~standard"]}function dg(e){if(_Be(e))try{return e["~standard"].jsonSchema.input({target:"draft-07"})}catch{return}}function hg(e){if(e!=null&&Hw(e))try{const t=e["~standard"].validate(void 0);if(t&&typeof t=="object"&&!("then"in t&&typeof t.then=="function")){const r=t;if(!r.issues){const n=r.value;return()=>n}}}catch{}}const z4=Symbol.for("langgraph.channel.missing");var SBe=class uce extends yp{constructor(r){super();L(this,"lc_graph_name","UntrackedValue");L(this,"guard");L(this,"_value",z4);L(this,"initialValueFactory");this.guard=(r==null?void 0:r.guard)??!0,this.initialValueFactory=r==null?void 0:r.initialValueFactory,this.initialValueFactory&&(this._value=this.initialValueFactory())}fromCheckpoint(r){return new uce({guard:this.guard,initialValueFactory:this.initialValueFactory})}update(r){if(r.length===0)return!1;if(r.length!==1&&this.guard)throw new Mn("UntrackedValue(guard=true) can receive only one value per step. Use guard=false if you want to store any one of multiple values.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this._value=r[r.length-1],!0}get(){if(this._value===z4)throw new _a;return this._value}checkpoint(){}isAvailable(){return this._value!==z4}};const V4=Symbol.for("langgraph.state.reduced_value");var BJ,Cg=(BJ=V4,class{constructor(e,t){L(this,BJ,!0);L(this,"valueSchema");L(this,"inputSchema");L(this,"reducer");L(this,"jsonSchemaExtra");this.reducer=t.reducer,this.jsonSchemaExtra=t.jsonSchemaExtra,this.valueSchema=e,this.inputSchema="inputSchema"in t?t.inputSchema:e,this.jsonSchemaExtra=t.jsonSchemaExtra}static isInstance(e){return typeof e=="object"&&e!==null&&V4 in e&&e[V4]===!0}});const FW=Symbol.for("langgraph.state.untracked_value");var UJ,gw=(UJ=FW,class{constructor(e,t){L(this,UJ,!0);L(this,"schema");L(this,"guard");this.schema=e,this.guard=(t==null?void 0:t.guard)??!0}static isInstance(e){return typeof e=="object"&&e!==null&&FW in e}});const v0=(e,t)=>e.size===t.size&&[...e].every(r=>t.has(r));var EBe=class fce extends yp{constructor(r){super();L(this,"lc_graph_name","NamedBarrierValue");L(this,"names");L(this,"seen");this.names=r,this.seen=new Set}fromCheckpoint(r){const n=new fce(this.names);return typeof r<"u"&&(n.seen=new Set(r)),n}update(r){let n=!1;for(const i of r)if(this.names.has(i))this.seen.has(i)||(this.seen.add(i),n=!0);else throw new Mn(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!v0(this.names,this.seen))throw new _a}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&v0(this.seen,this.names)?(this.seen=new Set,!0):!1}isAvailable(){return!!this.names&&v0(this.names,this.seen)}},ABe=class dce extends yp{constructor(r){super();L(this,"lc_graph_name","NamedBarrierValueAfterFinish");L(this,"names");L(this,"seen");L(this,"finished");this.names=r,this.seen=new Set,this.finished=!1}fromCheckpoint(r){const n=new dce(this.names);if(typeof r<"u"){const[i,a]=r;n.seen=new Set(i),n.finished=a}return n}update(r){let n=!1;for(const i of r)if(this.names.has(i)&&!this.seen.has(i))this.seen.add(i),n=!0;else if(!this.names.has(i))throw new Mn(`Value ${JSON.stringify(i)} not in names ${JSON.stringify(this.names)}`);return n}get(){if(!this.finished||!v0(this.names,this.seen))throw new _a}checkpoint(){return[[...this.seen],this.finished]}consume(){return this.finished&&this.seen&&this.names&&v0(this.seen,this.names)?(this.seen=new Set,this.finished=!1,!0):!1}finish(){return!this.finished&&this.names&&v0(this.names,this.seen)?(this.finished=!0,!0):!1}isAvailable(){return this.finished&&!!this.names&&v0(this.names,this.seen)}};const W4=Symbol.for("langgraph.state.state_schema");var zJ,w0=(zJ=W4,class{constructor(e){L(this,zJ,!0);this.fields=e}getChannels(){const e={};for(const[t,r]of Object.entries(this.fields))if(Cg.isInstance(r)){const n=hg(r.valueSchema);e[t]=new dk(r.reducer,n)}else if(gw.isInstance(r)){const n=r.schema?hg(r.schema):void 0;e[t]=new SBe({guard:r.guard,initialValueFactory:n})}else if(Hw(r))e[t]=new iO(hg(r));else throw new Error(`Invalid state field "${t}": must be a schema, ReducedValue, UntrackedValue, or ManagedValue`);return e}getJsonSchema(){const e={},t=[];for(const[r,n]of Object.entries(this.fields)){let i;if(Cg.isInstance(n)?(i=dg(n.valueSchema),n.jsonSchemaExtra&&(i={...i??{},...n.jsonSchemaExtra})):gw.isInstance(n)?i=n.schema?dg(n.schema):void 0:Hw(n)&&(i=dg(n)),i){e[r]=i;let a=!1;Cg.isInstance(n)?a=hg(n.valueSchema)!==void 0:gw.isInstance(n)?a=n.schema?hg(n.schema)!==void 0:!1:a=hg(n)!==void 0,a||t.push(r)}}return{type:"object",properties:e,required:t.length>0?t:void 0}}getInputJsonSchema(){const e={};for(const[t,r]of Object.entries(this.fields)){let n;Cg.isInstance(r)?n=dg(r.inputSchema):gw.isInstance(r)?n=r.schema?dg(r.schema):void 0:Hw(r)&&(n=dg(r)),n&&(e[t]=n)}return{type:"object",properties:e}}getChannelKeys(){return Object.entries(this.fields).map(([e])=>e)}getAllKeys(){return Object.keys(this.fields)}async validateInput(e){if(e==null||typeof e!="object")return e;const t={};for(const[r,n]of Object.entries(e)){const i=this.fields[r];if(i===void 0){t[r]=n;continue}let a;if(Cg.isInstance(i)?a=i.inputSchema:gw.isInstance(i)?a=i.schema:Hw(i)&&(a=i),a){const s=await a["~standard"].validate(n);if(s.issues)throw new Error(`Validation failed for field "${r}": ${JSON.stringify(s.issues)}`);t[r]=s.value}else t[r]=n}return t}static isInstance(e){return typeof e=="object"&&e!==null&&W4 in e&&e[W4]===!0}});const TBe="__remove_all__";function aO(e,t){const r=Array.isArray(e)?e:[e],n=Array.isArray(t)?t:[t],i=r.map(Iu),a=n.map(Iu);for(const u of i)(u.id===null||u.id===void 0)&&(u.id=Of(),u.lc_kwargs.id=u.id);let s;for(let u=0;u<a.length;u+=1){const f=a[u];(f.id===null||f.id===void 0)&&(f.id=Of(),f.lc_kwargs.id=f.id),I0.isInstance(f)&&f.id===TBe&&(s=u)}if(s!=null)return a.slice(s+1);const o=[...i],l=new Map(o.map((u,f)=>[u.id,f])),c=new Set;for(const u of a){const f=l.get(u.id);if(f!==void 0)I0.isInstance(u)?c.add(u.id):(c.delete(u.id),o[f]=u);else{if(I0.isInstance(u))throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${u.id}')`);l.set(u.id,o.length),o.push(u)}}return o.filter(u=>!c.has(u.id))}const kBe=lle().default(()=>[]),CBe=lle();new Cg(kBe,{inputSchema:CBe,reducer:aO,jsonSchemaExtra:{langgraph_type:"messages",description:"A list of chat messages"}});const OBe="lg:";var PBe=class{constructor(){L(this,"_map",new Map);L(this,"_extensionCache",new Map)}get(e){return this._map.get(e)}extend(e,t){const r=this.get(e);this._map.set(e,t(r))}remove(e){return this._map.delete(e),this}has(e){return this._map.has(e)}getChannelsForSchema(e){const t={},r=_b(e);for(const[n,i]of Object.entries(r)){const a=this.get(i);a!=null&&a.reducer?t[n]=new dk(a.reducer.fn,a.default):t[n]=new iO(a==null?void 0:a.default)}return t}getExtendedChannelSchemas(e,t){if(Object.keys(t).length===0)return e;const r=Object.entries(t).filter(([,a])=>a===!0).sort(([a],[s])=>a.localeCompare(s)).map(([a,s])=>`${a}:${s}`).join("|"),n=this._extensionCache.get(r)??new Map;if(n.has(e))return n.get(e);let i=e;if(t.withReducerSchema||t.withJsonSchemaExtrasAsDescription){const a=Object.entries(_b(e)).map(([s,o])=>{var u;const l=this.get(o);let c=t.withReducerSchema?((u=l==null?void 0:l.reducer)==null?void 0:u.schema)??o:o;if(t.withJsonSchemaExtrasAsDescription&&(l!=null&&l.jsonSchemaExtra)){const f=bb(c)??bb(o),d=JSON.stringify({...l.jsonSchemaExtra,description:f});c=c.describe(`${OBe}${d}`)}return[s,c]});i=uie(e,Object.fromEntries(a)),Wi(i)&&(i._def.unknownKeys="strip")}return t.asPartial&&(i=s$(i)),n.set(e,i),this._extensionCache.set(r,n),i}};const yk=new PBe;function NBe(e,t){var r;if(t.reducer&&!t.default){const n=fie(e);n!=null&&(t.default=n)}if(t.reducer){const n=Object.assign(e,{lg_reducer_schema:((r=t.reducer)==null?void 0:r.schema)??e});return yk.extend(n,()=>t),n}else return yk.extend(e,()=>t),e}function Og(e){return e==null?!1:!!(w0.isInstance(e)||yl(e)||typeof e=="object"&&"lc_graph_name"in e&&e.lc_graph_name==="AnnotationRoot"||typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length>0&&Object.values(e).every(t=>typeof t=="function"||jle(t)))}function IBe(e){if(typeof e!="object"||e==null)return!1;const t=e,r="state"in t&&Og(t.state),n="stateSchema"in t&&Og(t.stateSchema),i="input"in t&&Og(t.input);return!(!r&&!n&&!i||"input"in t&&t.input!=null&&!Og(t.input)||"output"in t&&t.output!=null&&!Og(t.output))}const If="__root__",vk=Symbol.for("langgraph.state.partial");var RBe=class extends bBe{constructor(t,r){super();L(this,"channels",{});L(this,"waitingEdges",new Set);L(this,"_schemaDefinition");L(this,"_schemaRuntimeDefinition");L(this,"_inputDefinition");L(this,"_inputRuntimeDefinition");L(this,"_outputDefinition");L(this,"_outputRuntimeDefinition");L(this,"_schemaDefinitions",new Map);L(this,"_metaRegistry",yk);L(this,"_configSchema");L(this,"_configRuntimeSchema");L(this,"_interrupt");L(this,"_writer");const n=this._normalizeToStateGraphInit(t,r),i=n.state??n.stateSchema??n.input;if(!i)throw new T4;const a=this._getChannelsFromSchema(i);this._schemaDefinition=a,w0.isInstance(i)?this._schemaRuntimeDefinition=i:yl(i)&&(this._schemaRuntimeDefinition=i),n.input?w0.isInstance(n.input)?this._inputRuntimeDefinition=n.input:yl(n.input)?this._inputRuntimeDefinition=n.input:this._inputRuntimeDefinition=vk:this._inputRuntimeDefinition=vk,n.output?w0.isInstance(n.output)?this._outputRuntimeDefinition=n.output:yl(n.output)?this._outputRuntimeDefinition=n.output:this._outputRuntimeDefinition=this._schemaRuntimeDefinition:this._outputRuntimeDefinition=this._schemaRuntimeDefinition;const s=n.input?this._getChannelsFromSchema(n.input):a,o=n.output?this._getChannelsFromSchema(n.output):a;this._inputDefinition=s,this._outputDefinition=o,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),n.context&&yl(n.context)&&(this._configRuntimeSchema=n.context),this._interrupt=n.interrupt,this._writer=n.writer}_normalizeToStateGraphInit(t,r){if(IBe(t)){if(yl(r)||IL.isInstance(r))return{...t,context:r};const n=r;return{...t,input:t.input??(n==null?void 0:n.input),output:t.output??(n==null?void 0:n.output),context:t.context??(n==null?void 0:n.context),interrupt:t.interrupt??(n==null?void 0:n.interrupt),writer:t.writer??(n==null?void 0:n.writer),nodes:t.nodes??(n==null?void 0:n.nodes)}}if(Og(t)){if(yl(r)||IL.isInstance(r))return{state:t,context:r};const n=r;return{state:t,input:n==null?void 0:n.input,output:n==null?void 0:n.output,context:n==null?void 0:n.context,interrupt:n==null?void 0:n.interrupt,writer:n==null?void 0:n.writer,nodes:n==null?void 0:n.nodes}}if(DBe(t))return{state:LBe(t.channels)};throw new T4}_getChannelsFromSchema(t){if(w0.isInstance(t))return t.getChannels();if(yl(t))return this._metaRegistry.getChannelsForSchema(t);if(typeof t=="object"&&"lc_graph_name"in t&&t.lc_graph_name==="AnnotationRoot")return t.spec;if(typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length>0)return t;throw new T4("Invalid schema type. Expected StateSchema, Zod object, AnnotationRoot, or StateDefinition.")}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([t,r])=>t.map(n=>[n,r]))])}_addSchema(t){if(!this._schemaDefinitions.has(t)){this._schemaDefinitions.set(t,t);for(const[r,n]of Object.entries(t)){let i;if(typeof n=="function"?i=n():i=n,this.channels[r]!==void 0){if(!this.channels[r].equals(i)&&i.lc_graph_name!=="LastValue")throw new Error(`Channel "${r}" already exists with a different type.`)}else this.channels[r]=i}}}addNode(...t){function r(i){return i.length>=1&&typeof i[0]!="string"}const n=r(t)?Array.isArray(t[0])?t[0]:Object.entries(t[0]).map(([i,a])=>[i,a]):[[t[0],t[1],t[2]]];if(n.length===0)throw new Error("No nodes provided in `addNode`");for(const[i,a,s]of n){if(i in this.channels)throw new Error(`${i} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(const f of[sa,Vf])if(i.includes(f))throw new Error(`"${f}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===Ur||i===hn)throw new Error(`Node \`${i}\` is reserved.`);let o=this._schemaDefinition;(s==null?void 0:s.input)!==void 0&&(o=this._getChannelsFromSchema(s.input)),this._addSchema(o);let l;Lr.isRunnable(a)?l=a:typeof a=="function"?l=new vp({func:a,name:i,trace:!1}):l=$a(a);let c=s==null?void 0:s.cachePolicy;typeof c=="boolean"&&(c=c?{}:void 0);const u={runnable:l,retryPolicy:s==null?void 0:s.retryPolicy,cachePolicy:c,metadata:s==null?void 0:s.metadata,input:o??this._schemaDefinition,subgraphs:p8(l)?[l]:s==null?void 0:s.subgraphs,ends:s==null?void 0:s.ends,defer:s==null?void 0:s.defer};this.nodes[i]=u}return this}addEdge(t,r){if(typeof t=="string")return super.addEdge(t,r);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(const n of t){if(n===Ur)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(i=>i===n))throw new Error(`Need to add a node named "${n}" first`)}if(r===Ur)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(n=>n===r))throw new Error(`Need to add a node named "${r}" first`);return this.waitingEdges.add([t,r]),this}addSequence(t){const r=Array.isArray(t)?t:Object.entries(t);if(r.length===0)throw new Error("Sequence requires at least one node.");let n;for(const[i,a,s]of r){if(i in this.nodes)throw new Error(`Node names must be unique: node with the name "${i}" already exists.`);const o=i;this.addNode(o,a,s),n!=null&&this.addEdge(n,o),n=o}return this}compile({checkpointer:t,store:r,cache:n,interruptBefore:i,interruptAfter:a,name:s,description:o}={}){this.validate([...Array.isArray(i)?i:[],...Array.isArray(a)?a:[]]);const l=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),c=l.length===1&&l[0]===If?If:l,u=Object.keys(this.channels),f=u.length===1&&u[0]===If?If:u,d=this._interrupt,h=new MBe({builder:this,checkpointer:t,interruptAfter:a,interruptBefore:i,autoValidate:!1,nodes:{},channels:{...this.channels,[hn]:new dv},inputChannels:hn,outputChannels:c,streamChannels:f,streamMode:"updates",store:r,cache:n,name:s,description:o,userInterrupt:d});h.attachNode(hn);for(const[m,p]of Object.entries(this.nodes))h.attachNode(m,p);h.attachBranch(hn,CW,BW(),{withReader:!1});for(const[m]of Object.entries(this.nodes))h.attachBranch(m,CW,BW(),{withReader:!1});for(const[m,p]of this.edges)h.attachEdge(m,p);for(const[m,p]of this.waitingEdges)h.attachEdge(m,p);for(const[m,p]of Object.entries(this.branches))for(const[y,g]of Object.entries(p))h.attachBranch(m,y,g);return h.validate()}};function LBe(e){const t={};for(const[r,n]of Object.entries(e))t[r]=RL(n);return t}var MBe=class extends cce{constructor({description:t,...r}){super(r);L(this,"description");L(this,"_metaRegistry",yk);this.description=t}attachNode(t,r){let n;t===hn?n=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).map(([l])=>l):n=Object.keys(this.builder.channels);function i(l){if(ra(l))return l.graph===Vo.PARENT?null:l._updateAsTuples();if(Array.isArray(l)&&l.length>0&&l.some(c=>ra(c))){const c=[];for(const u of l)if(ra(u)){if(u.graph===Vo.PARENT)continue;c.push(...u._updateAsTuples())}else c.push([If,u]);return c}else if(l!=null)return[[If,l]];return null}const a=t;function s(l){if(l){if(ra(l))return l.graph===Vo.PARENT?null:l._updateAsTuples().filter(([c])=>n.includes(c));if(Array.isArray(l)&&l.length>0&&l.some(ra)){const c=[];for(const u of l)if(ra(u)){if(u.graph===Vo.PARENT)continue;c.push(...u._updateAsTuples().filter(([f])=>n.includes(f)))}else{const f=s(u);f&&c.push(...f??[])}return c}else{if(typeof l=="object"&&!Array.isArray(l))return Object.entries(l).filter(([c])=>n.includes(c));{const c=Array.isArray(l)?"array":typeof l;throw new Mn(`Expected node "${a.toString()}" to return an object or an array containing at least one Command object, received ${c}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}const o=[{value:j0,mapper:new vp({func:n.length&&n[0]===If?i:s,trace:!1,recurse:!1})}];if(t===hn)this.nodes[t]=new Bb({tags:[Fi],triggers:[hn],channels:[hn],writers:[new Os(o,[Fi])]});else{const l=(r==null?void 0:r.input)??this.builder._schemaDefinition,c=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(l)).map(d=>[d,d])),u=Object.keys(c).length===1&&If in c,f=`branch:to:${t}`;this.channels[f]=r!=null&&r.defer?new Q8e:new dv(!1),this.nodes[t]=new Bb({triggers:[f],channels:u?Object.keys(c):c,writers:[new Os(o,[Fi])],mapper:u?void 0:d=>Object.fromEntries(Object.entries(d).filter(([h])=>h in c)),bound:r==null?void 0:r.runnable,metadata:r==null?void 0:r.metadata,retryPolicy:r==null?void 0:r.retryPolicy,cachePolicy:r==null?void 0:r.cachePolicy,subgraphs:r==null?void 0:r.subgraphs,ends:r==null?void 0:r.ends})}}attachEdge(t,r){if(r!==Ur){if(typeof t=="string")this.nodes[t].writers.push(new Os([{channel:`branch:to:${r}`,value:null}],[Fi]));else if(Array.isArray(t)){const n=`join:${t.join("+")}:${r}`;this.channels[n]=this.builder.nodes[r].defer?new ABe(new Set(t)):new EBe(new Set(t)),this.nodes[r].triggers.push(n);for(const i of t)this.nodes[i].writers.push(new Os([{channel:n,value:i}],[Fi]))}}}attachBranch(t,r,n,i={withReader:!0}){const a=async(s,o)=>{const l=s.filter(u=>u!==Ur);if(!l.length)return;const c=l.map(u=>zs(u)?u:{channel:u===Ur?u:`branch:to:${u}`,value:t});await Os.doWrite({...o,tags:(o.tags??[]).concat([Fi])},c)};this.nodes[t].writers.push(n.run(a,i.withReader?s=>IFe.doRead(s,this.streamChannels??this.outputChannels,!0):void 0))}async _validateInput(t){if(t==null)return t;const r=this.builder._inputRuntimeDefinition,n=this.builder._schemaRuntimeDefinition;if(w0.isInstance(r)){if(ra(t)){const a=t;return t.update&&(a.update=await r.validateInput(Array.isArray(t.update)?Object.fromEntries(t.update):t.update)),a}return await r.validateInput(t)}if(r===vk&&w0.isInstance(n)){if(ra(t)){const a=t;return t.update&&(a.update=await n.validateInput(Array.isArray(t.update)?Object.fromEntries(t.update):t.update)),a}return await n.validateInput(t)}const i=(()=>{const a=s=>{if(s!=null)return this._metaRegistry.getExtendedChannelSchemas(s,{withReducerSchema:!0})};if(yl(r))return a(r);if(r===vk)return yl(n)?s$(a(n)):void 0})();if(ra(t)){const a=t;return t.update&&i!=null&&(a.update=_A(i,t.update)),a}return i!=null?_A(i,t):t}isInterrupted(t){return zle(t)}async _validateContext(t){const r=this.builder._configRuntimeSchema;return yl(r)&&_A(r,t),t}};function DBe(e){return typeof e=="object"&&e!==null&&e.channels!==void 0}function jBe(e){if(zs(e))return[e];const t=[];ra(e)?t.push(e):Array.isArray(e)&&t.push(...e.filter(ra));const r=[];for(const n of t){if(n.graph===Vo.PARENT)throw new ooe(n);zs(n.goto)||typeof n.goto=="string"?r.push(n.goto):Array.isArray(n.goto)&&r.push(...n.goto)}return r}function BW(){return new lce({path:new vp({func:jBe,tags:[Fi],trace:!1,recurse:!1,name:"<control_branch>"})})}Bh.Root({messages:Bh({reducer:aO,default:()=>[]})});const $Be={reducer:{fn:aO},jsonSchemaExtra:{langgraph_type:"messages"},default:()=>[]};hp({messages:NBe(mNe(),$Be)});n6e();const hce=e=>Array.isArray(e)&&e.every(ji),FBe=e=>typeof e=="object"&&e!=null&&"messages"in e&&hce(e.messages),BBe=e=>typeof e=="object"&&e!=null&&"lg_tool_call"in e;var UBe=class extends vp{constructor(t,r){const{name:n,tags:i,handleToolErrors:a}=r??{};super({name:n,tags:i,func:(s,o)=>this.run(s,o)});L(this,"tools");L(this,"handleToolErrors",!0);L(this,"trace",!1);this.tools=t,this.handleToolErrors=a??this.handleToolErrors}async runTool(t,r){const n=this.tools.find(i=>i.name===t.name);try{if(n===void 0)throw new Error(`Tool "${t.name}" not found.`);const i=await n.invoke({...t,type:"tool_call"},r);return ji(i)&&i.getType()==="tool"||ra(i)?i:new Fu({status:"success",name:n.name,content:typeof i=="string"?i:JSON.stringify(i),tool_call_id:t.id})}catch(i){if(!this.handleToolErrors||y0(i))throw i;return new Fu({status:"error",content:`Error: ${i.message}
 Please fix your mistakes.`,name:t.name,tool_call_id:t.id??""})}}async run(t,r){var s;let n;if(BBe(t))n=[await this.runTool(t.lg_tool_call,r)];else{let o;if(hce(t))o=t;else if(FBe(t))o=t.messages;else throw new Error("ToolNode only accepts BaseMessage[] or { messages: BaseMessage[] } as input.");const l=new Set(o.filter(u=>u.getType()==="tool").map(u=>u.tool_call_id));let c;for(let u=o.length-1;u>=0;u-=1){const f=o[u];if(em(f)){c=f;break}}if(c==null||!em(c))throw new Error("ToolNode only accepts AIMessages as input.");n=await Promise.all(((s=c.tool_calls)==null?void 0:s.filter(u=>u.id==null||!l.has(u.id)).map(u=>this.runTool(u,r)))??[])}if(!n.some(ra))return Array.isArray(t)?n:{messages:n};const i=[];let a=null;for(const o of n)ra(o)?o.graph===Vo.PARENT&&Array.isArray(o.goto)&&o.goto.every(l=>zs(l))?a?a.goto.push(...o.goto):a=new Vo({graph:Vo.PARENT,goto:o.goto}):i.push(o):i.push(Array.isArray(t)?[o]:{messages:[o]});return a&&i.push(a),i}};Bh.Root({llmInputMessages:Bh({reducer:(e,t)=>aO([],t),default:()=>[]})});const zBe=tO(async({userId:e})=>{try{const{data:t,error:r}=await Yn.from("expenses").select("*").eq("user_id",e);if(r)throw r;const n=t.reduce((i,a)=>(i[a.category_name]=(i[a.category_name]||0)+a.amount,i),{});return JSON.stringify(n)}catch(t){return`Error fetching expenses: ${t.message}`}},{name:"get_expense_summary",description:"Fetches a summary of the user's expenses grouped by category.",schema:hp({userId:Tm().describe("The unique ID of the user.")})}),VBe=tO(async({userId:e})=>{try{const{data:t,error:r}=await Yn.from("goals").select("*").eq("user_id",e);if(r)throw r;return JSON.stringify(t)}catch(t){return`Error fetching goals: ${t.message}`}},{name:"get_financial_goals",description:"Fetches the list of financial goals set by the user.",schema:hp({userId:Tm().describe("The unique ID of the user.")})}),WBe=tO(async({userId:e})=>{try{const{data:t,error:r}=await Yn.from("settings").select("*, currencies(*)").eq("user_id",e).single();if(r)throw r;return JSON.stringify(t)}catch(t){return`Error fetching settings: ${t.message}`}},{name:"get_user_settings",description:"Fetches the user's personal settings, including currency preference.",schema:hp({userId:Tm().describe("The unique ID of the user.")})}),HBe=Bh.Root({messages:Bh({reducer:(e,t)=>e.concat(t),default:()=>[]}),userId:Bh({reducer:(e,t)=>t??e,default:()=>null})}),pce=[zBe,VBe,WBe],GBe=new UBe(pce);async function qBe(e){const{messages:t,userId:r}=e,n=await Y$(pce),i=`You are PennyWise, a friendly and intelligent AI financial advisor. 
  Your goal is to help users manage their money, track expenses, and reach financial goals.
  
  You have access to the following tools:
  - get_expense_summary: Use this to see how much the user is spending.
  - get_financial_goals: Use this to see what the user is saving for.
  - get_user_settings: Use this to check currency and other preferences.
  
  When the user asks about their finances, ALWAYS use the tools to get accurate data.
  Be encouraging, catchy, and use emojis! Current User ID: ${r}`;return{messages:[await n.invoke([new Bc(i),...t])]}}function KBe(e){var n;const{messages:t}=e;return((n=t[t.length-1].tool_calls)==null?void 0:n.length)>0?"tools":Ur}const YBe=new RBe(HBe).addNode("agent",qBe).addNode("tools",GBe).addEdge(hn,"agent").addConditionalEdges("agent",KBe).addEdge("tools","agent"),XBe=YBe.compile(),mce=C.createContext(),ZBe=({children:e})=>{const{user:t}=gd(),[r,n]=C.useState([{id:"welcome",role:"assistant",content:"Hi! I'm PennyWise, your AI financial companion. How can I help you save more today? ",timestamp:new Date().toISOString()}]),[i,a]=C.useState(!1),[s,o]=C.useState(!1),l=C.useCallback(async u=>{if(!t)return;const f={id:crypto.randomUUID(),role:"user",content:u,timestamp:new Date().toISOString()};n(d=>[...d,f]),o(!0);try{const d=r.filter(y=>y.id!=="welcome").map(y=>y.role==="user"?new ms(y.content):new da(y.content));d.push(new ms(u));const h=await XBe.invoke({messages:d,userId:t.id}),m=h.messages[h.messages.length-1],p={id:crypto.randomUUID(),role:"assistant",content:m.content,timestamp:new Date().toISOString()};n(y=>[...y,p])}catch(d){console.error("PennyWise Error:",d);const h={id:crypto.randomUUID(),role:"assistant",content:`Oops! I'm having trouble connecting to my brain. ${d.message.includes("400")||d.message.includes("404")?"**Tip: Please try a hard refresh (Ctrl+F5) or restart your dev server.**":""} Error: ${d.message} `,timestamp:new Date().toISOString()};n(m=>[...m,h])}finally{o(!1)}},[r,t]),c=()=>{n([{id:"welcome",role:"assistant",content:"Hi! I'm PennyWise, your AI financial companion. How can I help you save more today? ",timestamp:new Date().toISOString()}])};return E.jsx(mce.Provider,{value:{messages:r,isOpen:i,setIsOpen:a,isTyping:s,sendMessage:l,clearChat:c},children:e})},JBe=()=>{const e=C.useContext(mce);if(!e)throw new Error("useChat must be used within a ChatProvider");return e},wn=C.forwardRef(({className:e,...t},r)=>E.jsx("div",{ref:r,className:Ft("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));wn.displayName="Card";const fs=C.forwardRef(({className:e,...t},r)=>E.jsx("div",{ref:r,className:Ft("flex flex-col space-y-1.5 p-6",e),...t}));fs.displayName="CardHeader";const Fs=C.forwardRef(({className:e,...t},r)=>E.jsx("h3",{ref:r,className:Ft("text-2xl font-semibold leading-none tracking-tight",e),...t}));Fs.displayName="CardTitle";const zc=C.forwardRef(({className:e,...t},r)=>E.jsx("p",{ref:r,className:Ft("text-sm text-muted-foreground",e),...t}));zc.displayName="CardDescription";const $n=C.forwardRef(({className:e,...t},r)=>E.jsx("div",{ref:r,className:Ft("p-6 pt-0",e),...t}));$n.displayName="CardContent";const hv=C.forwardRef(({className:e,...t},r)=>E.jsx("div",{ref:r,className:Ft("flex items-center p-6 pt-0",e),...t}));hv.displayName="CardFooter";const Bs=C.forwardRef(({className:e,type:t,...r},n)=>E.jsx("input",{type:t,className:Ft("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));Bs.displayName="Input";const y8=C.createContext({});function v8(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}const gce=typeof window<"u",yce=gce?C.useLayoutEffect:C.useEffect,sO=C.createContext(null);function w8(e,t){e.indexOf(t)===-1&&e.push(t)}function wk(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Uu=(e,t,r)=>r>t?t:r<e?e:r;let x8=()=>{};const od={},vce=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function wce(e){return typeof e=="object"&&e!==null}const xce=e=>/^0[^.\s]+$/u.test(e);function b8(e){let t;return()=>(t===void 0&&(t=e()),t)}const Nl=e=>e,QBe=(e,t)=>r=>t(e(r)),_2=(...e)=>e.reduce(QBe),Vb=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class _8{constructor(){this.subscriptions=[]}add(t){return w8(this.subscriptions,t),()=>wk(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ic=e=>e*1e3,Tl=e=>e/1e3;function bce(e,t){return t?e*(1e3/t):0}const _ce=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,e7e=1e-7,t7e=12;function r7e(e,t,r,n,i){let a,s,o=0;do s=t+(r-t)/2,a=_ce(s,n,i)-e,a>0?r=s:t=s;while(Math.abs(a)>e7e&&++o<t7e);return s}function S2(e,t,r,n){if(e===t&&r===n)return Nl;const i=a=>r7e(a,0,1,e,r);return a=>a===0||a===1?a:_ce(i(a),t,n)}const Sce=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ece=e=>t=>1-e(1-t),Ace=S2(.33,1.53,.69,.99),S8=Ece(Ace),Tce=Sce(S8),kce=e=>(e*=2)<1?.5*S8(e):.5*(2-Math.pow(2,-10*(e-1))),E8=e=>1-Math.sin(Math.acos(e)),Cce=Ece(E8),Oce=Sce(E8),n7e=S2(.42,0,1,1),i7e=S2(0,0,.58,1),Pce=S2(.42,0,.58,1),a7e=e=>Array.isArray(e)&&typeof e[0]!="number",Nce=e=>Array.isArray(e)&&typeof e[0]=="number",s7e={linear:Nl,easeIn:n7e,easeInOut:Pce,easeOut:i7e,circIn:E8,circInOut:Oce,circOut:Cce,backIn:S8,backInOut:Tce,backOut:Ace,anticipate:kce},o7e=e=>typeof e=="string",UW=e=>{if(Nce(e)){x8(e.length===4);const[t,r,n,i]=e;return S2(t,r,n,i)}else if(o7e(e))return s7e[e];return e},SE=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function l7e(e,t){let r=new Set,n=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){s.has(u)&&(c.schedule(u),e()),u(o)}const c={schedule:(u,f=!1,d=!1)=>{const m=d&&i?r:n;return f&&s.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,i){a=!0;return}i=!0,[r,n]=[n,r],r.forEach(l),r.clear(),i=!1,a&&(a=!1,c.process(u))}};return c}const c7e=40;function Ice(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,s=SE.reduce((v,x)=>(v[x]=l7e(a),v),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:f,preRender:d,render:h,postRender:m}=s,p=()=>{const v=od.useManualTiming?i.timestamp:performance.now();r=!1,od.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(v-i.timestamp,c7e),1)),i.timestamp=v,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),f.process(i),d.process(i),h.process(i),m.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(p))},y=()=>{r=!0,n=!0,i.isProcessing||e(p)};return{schedule:SE.reduce((v,x)=>{const b=s[x];return v[x]=(S,T=!1,A=!1)=>(r||y(),b.schedule(S,T,A)),v},{}),cancel:v=>{for(let x=0;x<SE.length;x++)s[SE[x]].cancel(v)},state:i,steps:s}}const{schedule:Cn,cancel:np,state:Da,steps:H4}=Ice(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nl,!0);let HA;function u7e(){HA=void 0}const Ns={now:()=>(HA===void 0&&Ns.set(Da.isProcessing||od.useManualTiming?Da.timestamp:performance.now()),HA),set:e=>{HA=e,queueMicrotask(u7e)}},Rce=e=>t=>typeof t=="string"&&t.startsWith(e),Lce=Rce("--"),f7e=Rce("var(--"),A8=e=>f7e(e)?d7e.test(e.split("/*")[0].trim()):!1,d7e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function zW(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const c1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Wb={...c1,transform:e=>Uu(0,1,e)},EE={...c1,default:1},xx=e=>Math.round(e*1e5)/1e5,T8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function h7e(e){return e==null}const p7e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,k8=(e,t)=>r=>!!(typeof r=="string"&&p7e.test(r)&&r.startsWith(e)||t&&!h7e(r)&&Object.prototype.hasOwnProperty.call(r,t)),Mce=(e,t,r)=>n=>{if(typeof n!="string")return n;const[i,a,s,o]=n.match(T8);return{[e]:parseFloat(i),[t]:parseFloat(a),[r]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},m7e=e=>Uu(0,255,e),G4={...c1,transform:e=>Math.round(m7e(e))},x0={test:k8("rgb","red"),parse:Mce("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+G4.transform(e)+", "+G4.transform(t)+", "+G4.transform(r)+", "+xx(Wb.transform(n))+")"};function g7e(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const UL={test:k8("#"),parse:g7e,transform:x0.transform},E2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Qd=E2("deg"),Mu=E2("%"),kt=E2("px"),y7e=E2("vh"),v7e=E2("vw"),VW={...Mu,parse:e=>Mu.parse(e)/100,transform:e=>Mu.transform(e*100)},ny={test:k8("hsl","hue"),parse:Mce("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Mu.transform(xx(t))+", "+Mu.transform(xx(r))+", "+xx(Wb.transform(n))+")"},Di={test:e=>x0.test(e)||UL.test(e)||ny.test(e),parse:e=>x0.test(e)?x0.parse(e):ny.test(e)?ny.parse(e):UL.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?x0.transform(e):ny.transform(e),getAnimatableNone:e=>{const t=Di.parse(e);return t.alpha=0,Di.transform(t)}},w7e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function x7e(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(T8))==null?void 0:t.length)||0)+(((r=e.match(w7e))==null?void 0:r.length)||0)>0}const Dce="number",jce="color",b7e="var",_7e="var(",WW="${}",S7e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hb(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let a=0;const o=t.replace(S7e,l=>(Di.test(l)?(n.color.push(a),i.push(jce),r.push(Di.parse(l))):l.startsWith(_7e)?(n.var.push(a),i.push(b7e),r.push(l)):(n.number.push(a),i.push(Dce),r.push(parseFloat(l))),++a,WW)).split(WW);return{values:r,split:o,indexes:n,types:i}}function $ce(e){return Hb(e).values}function Fce(e){const{split:t,types:r}=Hb(e),n=t.length;return i=>{let a="";for(let s=0;s<n;s++)if(a+=t[s],i[s]!==void 0){const o=r[s];o===Dce?a+=xx(i[s]):o===jce?a+=Di.transform(i[s]):a+=i[s]}return a}}const E7e=e=>typeof e=="number"?0:Di.test(e)?Di.getAnimatableNone(e):e;function A7e(e){const t=$ce(e);return Fce(e)(t.map(E7e))}const ip={test:x7e,parse:$ce,createTransformer:Fce,getAnimatableNone:A7e};function q4(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function T7e({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,a=0,s=0;if(!t)i=a=s=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;i=q4(l,o,e+1/3),a=q4(l,o,e),s=q4(l,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:n}}function xk(e,t){return r=>r>0?t:e}const Jn=(e,t,r)=>e+(t-e)*r,K4=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},k7e=[UL,x0,ny],C7e=e=>k7e.find(t=>t.test(e));function HW(e){const t=C7e(e);if(!t)return!1;let r=t.parse(e);return t===ny&&(r=T7e(r)),r}const GW=(e,t)=>{const r=HW(e),n=HW(t);if(!r||!n)return xk(e,t);const i={...r};return a=>(i.red=K4(r.red,n.red,a),i.green=K4(r.green,n.green,a),i.blue=K4(r.blue,n.blue,a),i.alpha=Jn(r.alpha,n.alpha,a),x0.transform(i))},zL=new Set(["none","hidden"]);function O7e(e,t){return zL.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function P7e(e,t){return r=>Jn(e,t,r)}function C8(e){return typeof e=="number"?P7e:typeof e=="string"?A8(e)?xk:Di.test(e)?GW:R7e:Array.isArray(e)?Bce:typeof e=="object"?Di.test(e)?GW:N7e:xk}function Bce(e,t){const r=[...e],n=r.length,i=e.map((a,s)=>C8(a)(a,t[s]));return a=>{for(let s=0;s<n;s++)r[s]=i[s](a);return r}}function N7e(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=C8(e[i])(e[i],t[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}}function I7e(e,t){const r=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],s=e.indexes[a][n[a]],o=e.values[s]??0;r[i]=o,n[a]++}return r}const R7e=(e,t)=>{const r=ip.createTransformer(t),n=Hb(e),i=Hb(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?zL.has(e)&&!i.values.length||zL.has(t)&&!n.values.length?O7e(e,t):_2(Bce(I7e(n,i),i.values),r):xk(e,t)};function Uce(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Jn(e,t,r):C8(e)(e,t)}const L7e=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Cn.update(t,r),stop:()=>np(t),now:()=>Da.isProcessing?Da.timestamp:Ns.now()}},zce=(e,t,r=10)=>{let n="";const i=Math.max(Math.round(t/r),2);for(let a=0;a<i;a++)n+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},bk=2e4;function O8(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<bk;)t+=r,n=e.next(t);return t>=bk?1/0:t}function M7e(e,t=100,r){const n=r({...e,keyframes:[0,t]}),i=Math.min(O8(n),bk);return{type:"keyframes",ease:a=>n.next(i*a).value/t,duration:Tl(i)}}const D7e=5;function Vce(e,t,r){const n=Math.max(t-D7e,0);return bce(r-e(n),t-n)}const li={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Y4=.001;function j7e({duration:e=li.duration,bounce:t=li.bounce,velocity:r=li.velocity,mass:n=li.mass}){let i,a,s=1-t;s=Uu(li.minDamping,li.maxDamping,s),e=Uu(li.minDuration,li.maxDuration,Tl(e)),s<1?(i=c=>{const u=c*s,f=u*e,d=u-r,h=VL(c,s),m=Math.exp(-f);return Y4-d/h*m},a=c=>{const f=c*s*e,d=f*r+r,h=Math.pow(s,2)*Math.pow(c,2)*e,m=Math.exp(-f),p=VL(Math.pow(c,2),s);return(-i(c)+Y4>0?-1:1)*((d-h)*m)/p}):(i=c=>{const u=Math.exp(-c*e),f=(c-r)*e+1;return-Y4+u*f},a=c=>{const u=Math.exp(-c*e),f=(r-c)*(e*e);return u*f});const o=5/e,l=F7e(i,a,o);if(e=Ic(e),isNaN(l))return{stiffness:li.stiffness,damping:li.damping,duration:e};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:s*2*Math.sqrt(n*c),duration:e}}}const $7e=12;function F7e(e,t,r){let n=r;for(let i=1;i<$7e;i++)n=n-e(n)/t(n);return n}function VL(e,t){return e*Math.sqrt(1-t*t)}const B7e=["duration","bounce"],U7e=["stiffness","damping","mass"];function qW(e,t){return t.some(r=>e[r]!==void 0)}function z7e(e){let t={velocity:li.velocity,stiffness:li.stiffness,damping:li.damping,mass:li.mass,isResolvedFromDuration:!1,...e};if(!qW(e,U7e)&&qW(e,B7e))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,a=2*Uu(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:li.mass,stiffness:i,damping:a}}else{const r=j7e(e);t={...t,...r,mass:li.mass},t.isResolvedFromDuration=!0}return t}function _k(e=li.visualDuration,t=li.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:i}=r;const a=r.keyframes[0],s=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:h}=z7e({...r,velocity:-Tl(r.velocity||0)}),m=d||0,p=c/(2*Math.sqrt(l*u)),y=s-a,g=Tl(Math.sqrt(l/u)),w=Math.abs(y)<5;n||(n=w?li.restSpeed.granular:li.restSpeed.default),i||(i=w?li.restDelta.granular:li.restDelta.default);let v;if(p<1){const b=VL(g,p);v=S=>{const T=Math.exp(-p*g*S);return s-T*((m+p*g*y)/b*Math.sin(b*S)+y*Math.cos(b*S))}}else if(p===1)v=b=>s-Math.exp(-g*b)*(y+(m+g*y)*b);else{const b=g*Math.sqrt(p*p-1);v=S=>{const T=Math.exp(-p*g*S),A=Math.min(b*S,300);return s-T*((m+p*g*y)*Math.sinh(A)+b*y*Math.cosh(A))/b}}const x={calculatedDuration:h&&f||null,next:b=>{const S=v(b);if(h)o.done=b>=f;else{let T=b===0?m:0;p<1&&(T=b===0?Ic(m):Vce(v,b,S));const A=Math.abs(T)<=n,O=Math.abs(s-S)<=i;o.done=A&&O}return o.value=o.done?s:S,o},toString:()=>{const b=Math.min(O8(x),bk),S=zce(T=>x.next(b*T).value,b,30);return b+"ms "+S},toTransition:()=>{}};return x}_k.applyToOptions=e=>{const t=M7e(e,100,_k);return e.ease=t.ease,e.duration=Ic(t.duration),e.type="keyframes",e};function WL({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:c=.5,restSpeed:u}){const f=e[0],d={done:!1,value:f},h=A=>o!==void 0&&A<o||l!==void 0&&A>l,m=A=>o===void 0?l:l===void 0||Math.abs(o-A)<Math.abs(l-A)?o:l;let p=r*t;const y=f+p,g=s===void 0?y:s(y);g!==y&&(p=g-f);const w=A=>-p*Math.exp(-A/n),v=A=>g+w(A),x=A=>{const O=w(A),M=v(A);d.done=Math.abs(O)<=c,d.value=d.done?g:M};let b,S;const T=A=>{h(d.value)&&(b=A,S=_k({keyframes:[d.value,m(d.value)],velocity:Vce(v,A,d.value),damping:i,stiffness:a,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:A=>{let O=!1;return!S&&b===void 0&&(O=!0,x(A),T(A)),b!==void 0&&A>=b?S.next(A-b):(!O&&x(A),d)}}}function V7e(e,t,r){const n=[],i=r||od.mix||Uce,a=e.length-1;for(let s=0;s<a;s++){let o=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Nl:t;o=_2(l,o)}n.push(o)}return n}function W7e(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const a=e.length;if(x8(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=V7e(t,n,i),l=o.length,c=u=>{if(s&&u<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const d=Vb(e[f],e[f+1],u);return o[f](d)};return r?u=>c(Uu(e[0],e[a-1],u)):c}function H7e(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=Vb(0,t,n);e.push(Jn(r,1,i))}}function G7e(e){const t=[0];return H7e(t,e.length-1),t}function q7e(e,t){return e.map(r=>r*t)}function K7e(e,t){return e.map(()=>t||Pce).splice(0,e.length-1)}function bx({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=a7e(n)?n.map(UW):UW(n),a={done:!1,value:t[0]},s=q7e(r&&r.length===t.length?r:G7e(t),e),o=W7e(s,t,{ease:Array.isArray(i)?i:K7e(t,i)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const Y7e=e=>e!==null;function P8(e,{repeat:t,repeatType:r="loop"},n,i=1){const a=e.filter(Y7e),o=i<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const X7e={decay:WL,inertia:WL,tween:bx,keyframes:bx,spring:_k};function Wce(e){typeof e.type=="string"&&(e.type=X7e[e.type])}class N8{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const Z7e=e=>e/100;class I8 extends N8{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:r}=this.options;r&&r.updatedAt!==Ns.now()&&this.tick(Ns.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Wce(t);const{type:r=bx,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=t;let{keyframes:o}=t;const l=r||bx;l!==bx&&typeof o[0]!="number"&&(this.mixKeyframes=_2(Z7e,Uce(o[0],o[1])),o=[0,100]);const c=l({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=O8(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=c}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:c=0,keyframes:u,repeat:f,repeatType:d,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,x=n;if(f){const A=Math.min(this.currentTime,i)/o;let O=Math.floor(A),M=A%1;!M&&A>=1&&(M=1),M===1&&O--,O=Math.min(O,f+1),!!(O%2)&&(d==="reverse"?(M=1-M,h&&(M-=h/o)):d==="mirror"&&(x=s)),v=Uu(0,1,M)*o}const b=w?{done:!1,value:u[0]}:x.next(v);a&&(b.value=a(b.value));let{done:S}=b;!w&&l!==null&&(S=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&m!==WL&&(b.value=P8(u,this.options,y,this.speed)),p&&p(b.value),T&&this.finish(),b}then(t,r){return this.finished.then(t,r)}get duration(){return Tl(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Tl(t)}get time(){return Tl(this.currentTime)}set time(t){var r;t=Ic(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ns.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Tl(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:t=L7e,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ns.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function J7e(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const b0=e=>e*180/Math.PI,HL=e=>{const t=b0(Math.atan2(e[1],e[0]));return GL(t)},Q7e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:HL,rotateZ:HL,skewX:e=>b0(Math.atan(e[1])),skewY:e=>b0(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},GL=e=>(e=e%360,e<0&&(e+=360),e),KW=HL,YW=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),XW=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),e9e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YW,scaleY:XW,scale:e=>(YW(e)+XW(e))/2,rotateX:e=>GL(b0(Math.atan2(e[6],e[5]))),rotateY:e=>GL(b0(Math.atan2(-e[2],e[0]))),rotateZ:KW,rotate:KW,skewX:e=>b0(Math.atan(e[4])),skewY:e=>b0(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function qL(e){return e.includes("scale")?1:0}function KL(e,t){if(!e||e==="none")return qL(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(r)n=e9e,i=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Q7e,i=o}if(!i)return qL(t);const a=n[t],s=i[1].split(",").map(r9e);return typeof a=="function"?a(s):s[a]}const t9e=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return KL(r,t)};function r9e(e){return parseFloat(e.trim())}const u1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],f1=new Set(u1),ZW=e=>e===c1||e===kt,n9e=new Set(["x","y","z"]),i9e=u1.filter(e=>!n9e.has(e));function a9e(e){const t=[];return i9e.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const bh={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>KL(t,"x"),y:(e,{transform:t})=>KL(t,"y")};bh.translateX=bh.x;bh.translateY=bh.y;const $0=new Set;let YL=!1,XL=!1,ZL=!1;function Hce(){if(XL){const e=Array.from($0).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=a9e(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([a,s])=>{var o;(o=n.getValue(a))==null||o.set(s)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}XL=!1,YL=!1,$0.forEach(e=>e.complete(ZL)),$0.clear()}function Gce(){$0.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(XL=!0)})}function s9e(){ZL=!0,Gce(),Hce(),ZL=!1}class R8{constructor(t,r,n,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?($0.add(this),YL||(YL=!0,Cn.read(Gce),Cn.resolveKeyframes(Hce))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;if(t[0]===null){const a=i==null?void 0:i.get(),s=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,s);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=s),i&&a===void 0&&i.set(t[0])}J7e(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),$0.delete(this)}cancel(){this.state==="scheduled"&&($0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const o9e=e=>e.startsWith("--");function l9e(e,t,r){o9e(t)?e.style.setProperty(t,r):e.style[t]=r}const c9e=b8(()=>window.ScrollTimeline!==void 0),u9e={};function f9e(e,t){const r=b8(e);return()=>u9e[t]??r()}const qce=f9e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gw=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,JW={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gw([0,.65,.55,1]),circOut:Gw([.55,0,1,.45]),backIn:Gw([.31,.01,.66,-.59]),backOut:Gw([.33,1.53,.69,.99])};function Kce(e,t){if(e)return typeof e=="function"?qce()?zce(e,t):"ease-out":Nce(e)?Gw(e):Array.isArray(e)?e.map(r=>Kce(r,t)||JW.easeOut):JW[e]}function d9e(e,t,r,{delay:n=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:r};l&&(u.offset=l);const f=Kce(o,i);Array.isArray(f)&&(u.easing=f);const d={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return c&&(d.pseudoElement=c),e.animate(u,d)}function Yce(e){return typeof e=="function"&&"applyToOptions"in e}function h9e({type:e,...t}){return Yce(e)&&qce()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Xce extends N8{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:r,name:n,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=t,x8(typeof t.type!="string");const c=h9e(t);this.animation=d9e(r,n,i,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const u=P8(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):l9e(r,n,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var r,n,i;const t=(r=this.options)==null?void 0:r.element;!this.isPseudoElement&&(t!=null&&t.isConnected)&&((i=(n=this.animation).commitStyles)==null||i.call(n))}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return Tl(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Tl(t)}get time(){return Tl(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ic(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&c9e()?(this.animation.timeline=t,Nl):r(this)}}const Zce={anticipate:kce,backInOut:Tce,circInOut:Oce};function p9e(e){return e in Zce}function m9e(e){typeof e.ease=="string"&&p9e(e.ease)&&(e.ease=Zce[e.ease])}const X4=10;class g9e extends Xce{constructor(t){m9e(t),Wce(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:i,element:a,...s}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new I8({...s,autoplay:!1}),l=Math.max(X4,Ns.now()-this.startTime),c=Uu(0,X4,l-X4);r.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const QW=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ip.test(e)||e==="0")&&!e.startsWith("url("));function y9e(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function v9e(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],s=QW(i,t),o=QW(a,t);return!s||!o?!1:y9e(e)||(r==="spring"||Yce(r))&&n}function JL(e){e.duration=0,e.type="keyframes"}const w9e=new Set(["opacity","clipPath","filter","transform"]),x9e=b8(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function b9e(e){var u;const{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:a,type:s}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return x9e()&&r&&w9e.has(r)&&(r!=="transform"||!c)&&!l&&!n&&i!=="mirror"&&a!==0&&s!=="inertia"}const _9e=40;class S9e extends N8{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:l,motionValue:c,element:u,...f}){var m;super(),this.stop=()=>{var p,y;this._animation&&(this._animation.stop(),(p=this.stopTimeline)==null||p.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Ns.now();const d={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:a,repeatType:s,name:l,motionValue:c,element:u,...f},h=(u==null?void 0:u.KeyframeResolver)||R8;this.keyframeResolver=new h(o,(p,y,g)=>this.onKeyframesResolved(p,y,d,!g),l,c,u),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,r,n,i){var y,g;this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:l,isHandoff:c,onUpdate:u}=n;this.resolvedAt=Ns.now(),v9e(t,a,s,o)||((od.instantAnimations||!l)&&(u==null||u(P8(t,n,r))),t[0]=t[t.length-1],JL(n),n.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>_9e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},h=!c&&b9e(d),m=(g=(y=d.motionValue)==null?void 0:y.owner)==null?void 0:g.current,p=h?new g9e({...d,element:m}):new I8(d);p.finished.then(()=>{this.notifyFinished()}).catch(Nl),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),s9e()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function Jce(e,t,r,n=0,i=1){const a=Array.from(e).sort((c,u)=>c.sortNodePosition(u)).indexOf(t),s=e.size,o=(s-1)*n;return typeof r=="function"?r(a,s):i===1?a*n:o-a*n}const E9e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function A9e(e){const t=E9e.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function Qce(e,t,r=1){const[n,i]=A9e(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const s=a.trim();return vce(s)?parseFloat(s):s}return A8(i)?Qce(i,t,r+1):i}const T9e={type:"spring",stiffness:500,damping:25,restSpeed:10},k9e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),C9e={type:"keyframes",duration:.8},O9e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},P9e=(e,{keyframes:t})=>t.length>2?C9e:f1.has(e)?e.startsWith("scale")?k9e(t[1]):T9e:O9e,N9e=e=>e!==null;function I9e(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(N9e),a=t&&r!=="loop"&&t%2===1?0:i.length-1;return i[a]}function eue(e,t){if(e!=null&&e.inherit&&t){const{inherit:r,...n}=e;return{...t,...n}}return e}function L8(e,t){const r=(e==null?void 0:e[t])??(e==null?void 0:e.default)??e;return r!==e?eue(r,e):r}function R9e({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const M8=(e,t,r,n={},i,a)=>s=>{const o=L8(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Ic(l);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:d=>{t.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};R9e(o)||Object.assign(u,P9e(e,u)),u.duration&&(u.duration=Ic(u.duration)),u.repeatDelay&&(u.repeatDelay=Ic(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(JL(u),u.delay===0&&(f=!0)),(od.instantAnimations||od.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(f=!0,JL(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const d=I9e(u.keyframes,o);if(d!==void 0){Cn.update(()=>{u.onUpdate(d),u.onComplete()});return}}return o.isSync?new I8(u):new S9e(u)};function eH(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function D8(e,t,r,n){if(typeof t=="function"){const[i,a]=eH(n);t=t(r!==void 0?r:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=eH(n);t=t(r!==void 0?r:e.custom,i,a)}return t}function Py(e,t,r){const n=e.getProps();return D8(n,t,r!==void 0?r:n.custom,e)}const tue=new Set(["width","height","top","left","right","bottom",...u1]),tH=30,L9e=e=>!isNaN(parseFloat(e));class M9e{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var a;const i=Ns.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Ns.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=L9e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new _8);const n=this.events[t].add(r);return t==="change"?()=>{n(),Cn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ns.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>tH)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,tH);return bce(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pv(e,t){return new M9e(e,t)}const QL=e=>Array.isArray(e);function D9e(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,pv(r))}function j9e(e){return QL(e)?e[e.length-1]||0:e}function $9e(e,t){const r=Py(e,t);let{transitionEnd:n={},transition:i={},...a}=r||{};a={...a,...n};for(const s in a){const o=j9e(a[s]);D9e(e,s,o)}}const cs=e=>!!(e&&e.getVelocity);function F9e(e){return!!(cs(e)&&e.add)}function eM(e,t){const r=e.getValue("willChange");if(F9e(r))return r.add(t);if(!r&&od.WillChange){const n=new od.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function j8(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const B9e="framerAppearId",rue="data-"+j8(B9e);function nue(e){return e.props[rue]}function U9e({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function iue(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:a,transitionEnd:s,...o}=t;const l=e.getDefaultTransition();a=a?eue(a,l):l;const c=a==null?void 0:a.reduceMotion;n&&(a=n);const u=[],f=i&&e.animationState&&e.animationState.getState()[i];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),m=o[d];if(m===void 0||f&&U9e(f,d))continue;const p={delay:r,...L8(a||{},d)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===y&&!p.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const x=nue(e);if(x){const b=window.MotionHandoffAnimation(x,d,Cn);b!==null&&(p.startTime=b,g=!0)}}eM(e,d);const w=c??e.shouldReduceMotion;h.start(M8(d,h,m,w&&tue.has(d)?{type:!1}:p,e,g));const v=h.animation;v&&u.push(v)}if(s){const d=()=>Cn.update(()=>{s&&$9e(e,s)});u.length?Promise.all(u).then(d):d()}return u}function tM(e,t,r={}){var l;const n=Py(e,t,r.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);const a=n?()=>Promise.all(iue(e,n,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=i;return z9e(e,t,c,u,f,d,r)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[a,s]:[s,a];return c().then(()=>u())}else return Promise.all([a(),s(r.delay)])}function z9e(e,t,r=0,n=0,i=0,a=1,s){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(tM(l,t,{...s,delay:r+(typeof n=="function"?0:n)+Jce(e.variantChildren,l,n,i,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function V9e(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(a=>tM(e,a,r));n=Promise.all(i)}else if(typeof t=="string")n=tM(e,t,r);else{const i=typeof t=="function"?Py(e,t,r.custom):t;n=Promise.all(iue(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const W9e={test:e=>e==="auto",parse:e=>e},aue=e=>t=>t.test(e),sue=[c1,kt,Mu,Qd,v7e,y7e,W9e],rH=e=>sue.find(aue(e));function H9e(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||xce(e):!0}const G9e=new Set(["brightness","contrast","saturate","opacity"]);function q9e(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(T8)||[];if(!n)return e;const i=r.replace(n,"");let a=G9e.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+i+")"}const K9e=/\b([a-z-]*)\(.*?\)/gu,rM={...ip,getAnimatableNone:e=>{const t=e.match(K9e);return t?t.map(q9e).join(" "):e}},nH={...c1,transform:Math.round},Y9e={rotate:Qd,rotateX:Qd,rotateY:Qd,rotateZ:Qd,scale:EE,scaleX:EE,scaleY:EE,scaleZ:EE,skew:Qd,skewX:Qd,skewY:Qd,distance:kt,translateX:kt,translateY:kt,translateZ:kt,x:kt,y:kt,z:kt,perspective:kt,transformPerspective:kt,opacity:Wb,originX:VW,originY:VW,originZ:kt},$8={borderWidth:kt,borderTopWidth:kt,borderRightWidth:kt,borderBottomWidth:kt,borderLeftWidth:kt,borderRadius:kt,borderTopLeftRadius:kt,borderTopRightRadius:kt,borderBottomRightRadius:kt,borderBottomLeftRadius:kt,width:kt,maxWidth:kt,height:kt,maxHeight:kt,top:kt,right:kt,bottom:kt,left:kt,inset:kt,insetBlock:kt,insetBlockStart:kt,insetBlockEnd:kt,insetInline:kt,insetInlineStart:kt,insetInlineEnd:kt,padding:kt,paddingTop:kt,paddingRight:kt,paddingBottom:kt,paddingLeft:kt,paddingBlock:kt,paddingBlockStart:kt,paddingBlockEnd:kt,paddingInline:kt,paddingInlineStart:kt,paddingInlineEnd:kt,margin:kt,marginTop:kt,marginRight:kt,marginBottom:kt,marginLeft:kt,marginBlock:kt,marginBlockStart:kt,marginBlockEnd:kt,marginInline:kt,marginInlineStart:kt,marginInlineEnd:kt,fontSize:kt,backgroundPositionX:kt,backgroundPositionY:kt,...Y9e,zIndex:nH,fillOpacity:Wb,strokeOpacity:Wb,numOctaves:nH},X9e={...$8,color:Di,backgroundColor:Di,outlineColor:Di,fill:Di,stroke:Di,borderColor:Di,borderTopColor:Di,borderRightColor:Di,borderBottomColor:Di,borderLeftColor:Di,filter:rM,WebkitFilter:rM},oue=e=>X9e[e];function lue(e,t){let r=oue(e);return r!==rM&&(r=ip),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Z9e=new Set(["auto","none","0"]);function J9e(e,t,r){let n=0,i;for(;n<e.length&&!i;){const a=e[n];typeof a=="string"&&!Z9e.has(a)&&Hb(a).values.length&&(i=e[n]),n++}if(i&&r)for(const a of t)e[a]=lue(r,i)}class Q9e extends R8{constructor(t,r,n,i,a){super(t,r,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let f=t[u];if(typeof f=="string"&&(f=f.trim(),A8(f))){const d=Qce(f,r.current);d!==void 0&&(t[u]=d),u===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!tue.has(n)||t.length!==2)return;const[i,a]=t,s=rH(i),o=rH(a),l=zW(i),c=zW(a);if(l!==c&&bh[n]){this.needsMeasurement=!0;return}if(s!==o)if(ZW(s)&&ZW(o))for(let u=0;u<t.length;u++){const f=t[u];typeof f=="string"&&(t[u]=parseFloat(f))}else bh[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||H9e(t[i]))&&n.push(i);n.length&&J9e(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bh[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,s=n[a];n[a]=bh[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const eUe=new Set(["opacity","clipPath","filter","transform"]);function cue(e,t,r){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const i=(r==null?void 0:r[e])??n.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e).filter(n=>n!=null)}const uue=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function nM(e){return wce(e)&&"offsetHeight"in e}const{schedule:F8}=Ice(queueMicrotask,!1),uc={x:!1,y:!1};function fue(){return uc.x||uc.y}function tUe(e){return e==="x"||e==="y"?uc[e]?null:(uc[e]=!0,()=>{uc[e]=!1}):uc.x||uc.y?null:(uc.x=uc.y=!0,()=>{uc.x=uc.y=!1})}function due(e,t){const r=cue(e),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[r,i,()=>n.abort()]}function rUe(e){return!(e.pointerType==="touch"||fue())}function nUe(e,t,r={}){const[n,i,a]=due(e,r);return n.forEach(s=>{let o=!1,l=!1,c;const u=()=>{s.removeEventListener("pointerleave",m)},f=y=>{c&&(c(y),c=void 0),u()},d=y=>{o=!1,window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d),l&&(l=!1,f(y))},h=()=>{o=!0,window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",d,i)},m=y=>{if(y.pointerType!=="touch"){if(o){l=!0;return}f(y)}},p=y=>{if(!rUe(y))return;l=!1;const g=t(s,y);typeof g=="function"&&(c=g,s.addEventListener("pointerleave",m,i))};s.addEventListener("pointerenter",p,i),s.addEventListener("pointerdown",h,i)}),a}const hue=(e,t)=>t?e===t?!0:hue(e,t.parentElement):!1,B8=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,iUe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aUe(e){return iUe.has(e.tagName)||e.isContentEditable===!0}const sUe=new Set(["INPUT","SELECT","TEXTAREA"]);function oUe(e){return sUe.has(e.tagName)||e.isContentEditable===!0}const GA=new WeakSet;function iH(e){return t=>{t.key==="Enter"&&e(t)}}function Z4(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const lUe=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=iH(()=>{if(GA.has(r))return;Z4(r,"down");const i=iH(()=>{Z4(r,"up")}),a=()=>Z4(r,"cancel");r.addEventListener("keyup",i,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function aH(e){return B8(e)&&!fue()}const sH=new WeakSet;function cUe(e,t,r={}){const[n,i,a]=due(e,r),s=o=>{const l=o.currentTarget;if(!aH(o)||sH.has(o))return;GA.add(l),r.stopPropagation&&sH.add(o);const c=t(l,o),u=(h,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),GA.has(l)&&GA.delete(l),aH(h)&&typeof c=="function"&&c(h,{success:m})},f=h=>{u(h,l===window||l===document||r.useGlobalTarget||hue(l,h.target))},d=h=>{u(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",d,i)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),nM(o)&&(o.addEventListener("focus",c=>lUe(c,i)),!aUe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function U8(e){return wce(e)&&"ownerSVGElement"in e}const qA=new WeakMap;let eh;const pue=(e,t,r)=>(n,i)=>i&&i[0]?i[0][e+"Size"]:U8(n)&&"getBBox"in n?n.getBBox()[t]:n[r],uUe=pue("inline","width","offsetWidth"),fUe=pue("block","height","offsetHeight");function dUe({target:e,borderBoxSize:t}){var r;(r=qA.get(e))==null||r.forEach(n=>{n(e,{get width(){return uUe(e,t)},get height(){return fUe(e,t)}})})}function hUe(e){e.forEach(dUe)}function pUe(){typeof ResizeObserver>"u"||(eh=new ResizeObserver(hUe))}function mUe(e,t){eh||pUe();const r=cue(e);return r.forEach(n=>{let i=qA.get(n);i||(i=new Set,qA.set(n,i)),i.add(t),eh==null||eh.observe(n)}),()=>{r.forEach(n=>{const i=qA.get(n);i==null||i.delete(t),i!=null&&i.size||eh==null||eh.unobserve(n)})}}const KA=new Set;let iy;function gUe(){iy=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};KA.forEach(t=>t(e))},window.addEventListener("resize",iy)}function yUe(e){return KA.add(e),iy||gUe(),()=>{KA.delete(e),!KA.size&&typeof iy=="function"&&(window.removeEventListener("resize",iy),iy=void 0)}}function oH(e,t){return typeof e=="function"?yUe(e):mUe(e,t)}function vUe(e){return U8(e)&&e.tagName==="svg"}const wUe=[...sue,Di,ip],xUe=e=>wUe.find(aue(e)),lH=()=>({translate:0,scale:1,origin:0,originPoint:0}),ay=()=>({x:lH(),y:lH()}),cH=()=>({min:0,max:0}),ta=()=>({x:cH(),y:cH()}),bUe=new WeakMap;function oO(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Gb(e){return typeof e=="string"||Array.isArray(e)}const z8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],V8=["initial",...z8];function lO(e){return oO(e.animate)||V8.some(t=>Gb(e[t]))}function mue(e){return!!(lO(e)||e.variants)}function _Ue(e,t,r){for(const n in t){const i=t[n],a=r[n];if(cs(i))e.addValue(n,i);else if(cs(a))e.addValue(n,pv(i,{owner:e}));else if(a!==i)if(e.hasValue(n)){const s=e.getValue(n);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=e.getStaticValue(n);e.addValue(n,pv(s!==void 0?s:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const iM={current:null},gue={current:!1},SUe=typeof window<"u";function EUe(){if(gue.current=!0,!!SUe)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>iM.current=e.matches;e.addEventListener("change",t),t()}else iM.current=!1}const uH=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Sk={};function yue(e){Sk=e}function AUe(){return Sk}class TUe{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=R8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Ns.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Cn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=lO(r),this.isVariantNode=mue(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in d){const m=d[h];c[h]!==void 0&&cs(m)&&m.set(c[h])}}mount(t){var r,n;if(this.hasBeenMounted)for(const i in this.initialValues)(r=this.values.get(i))==null||r.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=t,bUe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(gue.current||EUe(),this.shouldReduceMotion=iM.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var t;this.projection&&this.projection.unmount(),np(this.notifyUpdate),np(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),r.accelerate&&eUe.has(t)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:l,ease:c,duration:u}=r.accelerate,f=new Xce({element:this.current,name:t,keyframes:o,times:l,ease:c,duration:Ic(u)}),d=s(f);this.valueSubscriptions.set(t,()=>{d(),f.cancel()});return}const n=f1.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=r.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&Cn.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Sk){const r=Sk[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ta()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<uH.length;n++){const i=uH[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=t[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=_Ue(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=pv(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(vce(n)||xce(n))?n=parseFloat(n):!xUe(n)&&ip.test(r)&&(n=lue(t,r)),this.setBaseTarget(t,cs(n)?n.get():n)),cs(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var a;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const s=D8(this.props,r,(a=this.presenceContext)==null?void 0:a.custom);s&&(n=s[t])}if(r&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!cs(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new _8),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){F8.render(this.render)}}class vue extends TUe{constructor(){super(...arguments),this.KeyframeResolver=Q9e}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){const n=t.style;return n?n[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;cs(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class wp{constructor(t){this.isMounted=!1,this.node=t}update(){}}function wue({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function kUe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function CUe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function J4(e){return e===void 0||e===1}function aM({scale:e,scaleX:t,scaleY:r}){return!J4(e)||!J4(t)||!J4(r)}function t0(e){return aM(e)||xue(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xue(e){return fH(e.x)||fH(e.y)}function fH(e){return e&&e!=="0%"}function Ek(e,t,r){const n=e-r,i=t*n;return r+i}function dH(e,t,r,n,i){return i!==void 0&&(e=Ek(e,i,n)),Ek(e,r,n)+t}function sM(e,t=0,r=1,n,i){e.min=dH(e.min,t,r,n,i),e.max=dH(e.max,t,r,n,i)}function bue(e,{x:t,y:r}){sM(e.x,t.translate,t.scale,t.originPoint),sM(e.y,r.translate,r.scale,r.originPoint)}const hH=.999999999999,pH=1.0000000000001;function OUe(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let a,s;for(let o=0;o<i;o++){a=r[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&oy(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,bue(e,s)),n&&t0(a.latestValues)&&oy(e,a.latestValues))}t.x<pH&&t.x>hH&&(t.x=1),t.y<pH&&t.y>hH&&(t.y=1)}function sy(e,t){e.min=e.min+t,e.max=e.max+t}function mH(e,t,r,n,i=.5){const a=Jn(e.min,e.max,i);sM(e,t,r,a,n)}function oy(e,t){mH(e.x,t.x,t.scaleX,t.scale,t.originX),mH(e.y,t.y,t.scaleY,t.scale,t.originY)}function _ue(e,t){return wue(CUe(e.getBoundingClientRect(),t))}function PUe(e,t,r){const n=_ue(e,r),{scroll:i}=t;return i&&(sy(n.x,i.offset.x),sy(n.y,i.offset.y)),n}const NUe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},IUe=u1.length;function RUe(e,t,r){let n="",i=!0;for(let a=0;a<IUe;a++){const s=u1[a],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(s.startsWith("scale")?1:0);else{const c=parseFloat(o);l=s.startsWith("scale")?c===1:c===0}if(!l||r){const c=uue(o,$8[s]);if(!l){i=!1;const u=NUe[s]||s;n+=`${u}(${c}) `}r&&(t[s]=c)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function W8(e,t,r){const{style:n,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const c=t[l];if(f1.has(l)){s=!0;continue}else if(Lce(l)){i[l]=c;continue}else{const u=uue(c,$8[l]);l.startsWith("origin")?(o=!0,a[l]=u):n[l]=u}}if(t.transform||(s||r?n.transform=RUe(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=a;n.transformOrigin=`${l} ${c} ${u}`}}function Sue(e,{style:t,vars:r},n,i){const a=e.style;let s;for(s in t)a[s]=t[s];i==null||i.applyProjectionStyles(a,n);for(s in r)a.setProperty(s,r[s])}function gH(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const yw={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(kt.test(e))e=parseFloat(e);else return e;const r=gH(e,t.target.x),n=gH(e,t.target.y);return`${r}% ${n}%`}},LUe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=ip.parse(e);if(i.length>5)return n;const a=ip.createTransformer(e),s=typeof i[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const c=Jn(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),a(i)}},oM={borderRadius:{...yw,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yw,borderTopRightRadius:yw,borderBottomLeftRadius:yw,borderBottomRightRadius:yw,boxShadow:LUe};function Eue(e,{layout:t,layoutId:r}){return f1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!oM[e]||e==="opacity")}function H8(e,t,r){var s;const n=e.style,i=t==null?void 0:t.style,a={};if(!n)return a;for(const o in n)(cs(n[o])||i&&cs(i[o])||Eue(o,e)||((s=r==null?void 0:r.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(a[o]=n[o]);return a}function MUe(e){return window.getComputedStyle(e)}class DUe extends vue{constructor(){super(...arguments),this.type="html",this.renderInstance=Sue}readValueFromInstance(t,r){var n;if(f1.has(r))return(n=this.projection)!=null&&n.isProjecting?qL(r):t9e(t,r);{const i=MUe(t),a=(Lce(r)?i.getPropertyValue(r):i[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return _ue(t,r)}build(t,r,n){W8(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return H8(t,r,n)}}const jUe={offset:"stroke-dashoffset",array:"stroke-dasharray"},$Ue={offset:"strokeDashoffset",array:"strokeDasharray"};function FUe(e,t,r=1,n=0,i=!0){e.pathLength=1;const a=i?jUe:$Ue;e[a.offset]=`${-n}`,e[a.array]=`${t} ${r}`}const BUe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Aue(e,{attrX:t,attrY:r,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,c,u){if(W8(e,o,c),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:d}=e;f.transform&&(d.transform=f.transform,delete f.transform),(d.transform||f.transformOrigin)&&(d.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),d.transform&&(d.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete f.transformBox);for(const h of BUe)f[h]!==void 0&&(d[h]=f[h],delete f[h]);t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),i!==void 0&&FUe(f,i,a,s,!1)}const Tue=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),kue=e=>typeof e=="string"&&e.toLowerCase()==="svg";function UUe(e,t,r,n){Sue(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(Tue.has(i)?i:j8(i),t.attrs[i])}function Cue(e,t,r){const n=H8(e,t,r);for(const i in e)if(cs(e[i])||cs(t[i])){const a=u1.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=e[i]}return n}class zUe extends vue{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ta}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(f1.has(r)){const n=oue(r);return n&&n.default||0}return r=Tue.has(r)?r:j8(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Cue(t,r,n)}build(t,r,n){Aue(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,i){UUe(t,r,n,i)}mount(t){this.isSVGTag=kue(t.tagName),super.mount(t)}}const VUe=V8.length;function Oue(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?Oue(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<VUe;r++){const n=V8[r],i=e.props[n];(Gb(i)||i===!1)&&(t[n]=i)}return t}function Pue(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const WUe=[...z8].reverse(),HUe=z8.length;function GUe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>V9e(e,r,n)))}function qUe(e){let t=GUe(e),r=yH(),n=!0;const i=l=>(c,u)=>{var d;const f=Py(e,u,l==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:m,...p}=f;c={...c,...p,...m}}return c};function a(l){t=l(e)}function s(l){const{props:c}=e,u=Oue(e.parent)||{},f=[],d=new Set;let h={},m=1/0;for(let y=0;y<HUe;y++){const g=WUe[y],w=r[g],v=c[g]!==void 0?c[g]:u[g],x=Gb(v),b=g===l?w.isActive:null;b===!1&&(m=y);let S=v===u[g]&&v!==c[g]&&x;if(S&&n&&e.manuallyAnimateOnMount&&(S=!1),w.protectedKeys={...h},!w.isActive&&b===null||!v&&!w.prevProp||oO(v)||typeof v=="boolean")continue;if(g==="exit"&&w.isActive&&b!==!0){w.prevResolvedValues&&(h={...h,...w.prevResolvedValues});continue}const T=KUe(w.prevProp,v);let A=T||g===l&&w.isActive&&!S&&x||y>m&&x,O=!1;const M=Array.isArray(v)?v:[v];let P=M.reduce(i(g),{});b===!1&&(P={});const{prevResolvedValues:N={}}=w,V={...N,...P},B=J=>{A=!0,d.has(J)&&(O=!0,d.delete(J)),w.needsAnimating[J]=!0;const Y=e.getValue(J);Y&&(Y.liveStyle=!1)};for(const J in V){const Y=P[J],U=N[J];if(h.hasOwnProperty(J))continue;let se=!1;QL(Y)&&QL(U)?se=!Pue(Y,U):se=Y!==U,se?Y!=null?B(J):d.add(J):Y!==void 0&&d.has(J)?B(J):w.protectedKeys[J]=!0}w.prevProp=v,w.prevResolvedValues=P,w.isActive&&(h={...h,...P}),n&&e.blockInitialAnimation&&(A=!1);const G=S&&T;A&&(!G||O)&&f.push(...M.map(J=>{const Y={type:g};if(typeof J=="string"&&n&&!G&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,se=Py(U,J);if(U.enteringChildren&&se){const{delayChildren:ue}=se.transition||{};Y.delay=Jce(U.enteringChildren,e,ue)}}return{animation:J,options:Y}}))}if(d.size){const y={};if(typeof c.initial!="boolean"){const g=Py(e,Array.isArray(c.initial)?c.initial[0]:c.initial);g&&g.transition&&(y.transition=g.transition)}d.forEach(g=>{const w=e.getBaseTarget(g),v=e.getValue(g);v&&(v.liveStyle=!0),y[g]=w??null}),f.push({animation:y})}let p=!!f.length;return n&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(p=!1),n=!1,p?t(f):Promise.resolve()}function o(l,c){var f;if(r[l].isActive===c)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(d=>{var h;return(h=d.animationState)==null?void 0:h.setActive(l,c)}),r[l].isActive=c;const u=s(l);for(const d in r)r[d].protectedKeys={};return u}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=yH()}}}function KUe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Pue(t,e):!1}function Hp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yH(){return{animate:Hp(!0),whileInView:Hp(),whileHover:Hp(),whileTap:Hp(),whileDrag:Hp(),whileFocus:Hp(),exit:Hp()}}function vH(e,t){e.min=t.min,e.max=t.max}function rc(e,t){vH(e.x,t.x),vH(e.y,t.y)}function wH(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const Nue=1e-4,YUe=1-Nue,XUe=1+Nue,Iue=.01,ZUe=0-Iue,JUe=0+Iue;function Is(e){return e.max-e.min}function QUe(e,t,r){return Math.abs(e-t)<=r}function xH(e,t,r,n=.5){e.origin=n,e.originPoint=Jn(t.min,t.max,e.origin),e.scale=Is(r)/Is(t),e.translate=Jn(r.min,r.max,e.origin)-e.originPoint,(e.scale>=YUe&&e.scale<=XUe||isNaN(e.scale))&&(e.scale=1),(e.translate>=ZUe&&e.translate<=JUe||isNaN(e.translate))&&(e.translate=0)}function _x(e,t,r,n){xH(e.x,t.x,r.x,n?n.originX:void 0),xH(e.y,t.y,r.y,n?n.originY:void 0)}function bH(e,t,r){e.min=r.min+t.min,e.max=e.min+Is(t)}function eze(e,t,r){bH(e.x,t.x,r.x),bH(e.y,t.y,r.y)}function _H(e,t,r){e.min=t.min-r.min,e.max=e.min+Is(t)}function Ak(e,t,r){_H(e.x,t.x,r.x),_H(e.y,t.y,r.y)}function SH(e,t,r,n,i){return e-=t,e=Ek(e,1/r,n),i!==void 0&&(e=Ek(e,1/i,n)),e}function tze(e,t=0,r=1,n=.5,i,a=e,s=e){if(Mu.test(t)&&(t=parseFloat(t),t=Jn(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Jn(a.min,a.max,n);e===a&&(o-=t),e.min=SH(e.min,t,r,o,i),e.max=SH(e.max,t,r,o,i)}function EH(e,t,[r,n,i],a,s){tze(e,t[r],t[n],t[i],t.scale,a,s)}const rze=["x","scaleX","originX"],nze=["y","scaleY","originY"];function AH(e,t,r,n){EH(e.x,t,rze,r?r.x:void 0,n?n.x:void 0),EH(e.y,t,nze,r?r.y:void 0,n?n.y:void 0)}function TH(e){return e.translate===0&&e.scale===1}function Rue(e){return TH(e.x)&&TH(e.y)}function kH(e,t){return e.min===t.min&&e.max===t.max}function ize(e,t){return kH(e.x,t.x)&&kH(e.y,t.y)}function CH(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Lue(e,t){return CH(e.x,t.x)&&CH(e.y,t.y)}function OH(e){return Is(e.x)/Is(e.y)}function PH(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function hu(e){return[e("x"),e("y")]}function aze(e,t,r){let n="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(r==null?void 0:r.z)||0;if((i||a||s)&&(n=`translate3d(${i}px, ${a}px, ${s}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:d,skewX:h,skewY:m}=r;c&&(n=`perspective(${c}px) ${n}`),u&&(n+=`rotate(${u}deg) `),f&&(n+=`rotateX(${f}deg) `),d&&(n+=`rotateY(${d}deg) `),h&&(n+=`skewX(${h}deg) `),m&&(n+=`skewY(${m}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Mue=["TopLeft","TopRight","BottomLeft","BottomRight"],sze=Mue.length,NH=e=>typeof e=="string"?parseFloat(e):e,IH=e=>typeof e=="number"||kt.test(e);function oze(e,t,r,n,i,a){i?(e.opacity=Jn(0,r.opacity??1,lze(n)),e.opacityExit=Jn(t.opacity??1,0,cze(n))):a&&(e.opacity=Jn(t.opacity??1,r.opacity??1,n));for(let s=0;s<sze;s++){const o=`border${Mue[s]}Radius`;let l=RH(t,o),c=RH(r,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||IH(l)===IH(c)?(e[o]=Math.max(Jn(NH(l),NH(c),n),0),(Mu.test(c)||Mu.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||r.rotate)&&(e.rotate=Jn(t.rotate||0,r.rotate||0,n))}function RH(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const lze=Due(0,.5,Cce),cze=Due(.5,.95,Nl);function Due(e,t,r){return n=>n<e?0:n>t?1:r(Vb(e,t,n))}function uze(e,t,r){const n=cs(e)?e:pv(e);return n.start(M8("",n,t,r)),n.animation}function qb(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const fze=(e,t)=>e.depth-t.depth;class dze{constructor(){this.children=[],this.isDirty=!1}add(t){w8(this.children,t),this.isDirty=!0}remove(t){wk(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(fze),this.isDirty=!1,this.children.forEach(t)}}function hze(e,t){const r=Ns.now(),n=({timestamp:i})=>{const a=i-r;a>=t&&(np(n),e(a-t))};return Cn.setup(n,!0),()=>np(n)}function YA(e){return cs(e)?e.get():e}class pze{constructor(){this.members=[]}add(t){w8(this.members,t);for(let r=this.members.length-1;r>=0;r--){const n=this.members[r];if(n===t||n===this.lead||n===this.prevLead)continue;const i=n.instance;i&&i.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&wk(this.members,n)}t.scheduleRender()}remove(t){if(wk(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const i=n.options.layoutDependency,a=t.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const l=n.instance;l&&l.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:o}=t.options;o===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const XA={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Q4=["","X","Y","Z"],mze=1e3;let gze=0;function eI(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function jue(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=nue(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Cn,!(i||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&jue(n)}function $ue({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(s={},o=t==null?void 0:t()){this.id=gze++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wze),this.nodes.forEach(Sze),this.nodes.forEach(Eze),this.nodes.forEach(xze)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dze)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new _8),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=U8(s)&&!vUe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let u,f=0;const d=()=>this.root.updateBlockedByResize=!1;Cn.read(()=>{f=window.innerWidth}),e(s,()=>{const h=window.innerWidth;h!==f&&(f=h,this.root.updateBlockedByResize=!0,u&&u(),u=hze(d,250),XA.hasAnimatedSinceResize&&(XA.hasAnimatedSinceResize=!1,this.nodes.forEach(DH)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:d,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||Oze,{onLayoutAnimationStart:p,onLayoutAnimationComplete:y}=c.getProps(),g=!this.targetLayout||!Lue(this.targetLayout,h),w=!f&&d;if(this.options.layoutRoot||this.resumeFrom||w||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...L8(m,"layout"),onPlay:p,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(u,w)}else f||DH(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),np(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Aze),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jue(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LH);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(MH);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(_ze),this.nodes.forEach(yze),this.nodes.forEach(vze)):this.nodes.forEach(MH),this.clearAllSnapshots();const o=Ns.now();Da.delta=Uu(0,1e3/60,o-Da.timestamp),Da.timestamp=o,Da.isProcessing=!0,H4.update.process(Da),H4.preRender.process(Da),H4.render.process(Da),Da.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,F8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bze),this.sharedNodes.forEach(Tze)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Is(this.snapshot.measuredBox.x)&&!Is(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ta(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Rue(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;s&&this.instance&&(o||t0(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),Pze(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:s}=this.options;if(!s)return ta();const o=s.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Nze))){const{scroll:u}=this.root;u&&(sy(o.x,u.offset.x),sy(o.y,u.offset.y))}return o}removeElementScroll(s){var l;const o=ta();if(rc(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;u!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&rc(o,s),sy(o.x,f.offset.x),sy(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const l=ta();rc(l,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&oy(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),t0(u.latestValues)&&oy(l,u.latestValues)}return t0(this.latestValues)&&oy(l,this.latestValues),l}removeTransform(s){const o=ta();rc(o,s);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!t0(c.latestValues))continue;aM(c.latestValues)&&c.updateSnapshot();const u=ta(),f=c.measurePageBox();rc(u,f),AH(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return t0(this.latestValues)&&AH(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Da.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var h;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!this.layout||!(u||f))return;this.resolvedRelativeTargetAt=Da.timestamp;const d=this.getClosestProjectingParent();d&&this.linkedParentVersion!==d.layoutVersion&&!d.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(d&&d.layout?this.createRelativeTarget(d,this.layout.layoutBox,d.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ta(),this.targetWithTransforms=ta()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eze(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rc(this.target,this.layout.layoutBox),bue(this.target,this.targetDelta)):rc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?this.createRelativeTarget(d,this.target,d.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||aM(this.parent.latestValues)||xue(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,l){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ta(),this.relativeTargetOrigin=ta(),Ak(this.relativeTargetOrigin,o,l),rc(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var m;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Da.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;rc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,d=this.treeScale.y;OUe(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=ta());const{target:h}=s;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wH(this.prevProjectionDelta.x,this.projectionDelta.x),wH(this.prevProjectionDelta.y,this.projectionDelta.y)),_x(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==d||!PH(this.projectionDelta.x,this.prevProjectionDelta.x)||!PH(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ay(),this.projectionDelta=ay(),this.projectionDeltaWithTransform=ay()}setAnimationOrigin(s,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=ay();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=ta(),h=l?l.source:void 0,m=this.layout?this.layout.source:void 0,p=h!==m,y=this.getStack(),g=!y||y.members.length<=1,w=!!(p&&!g&&this.options.crossfade===!0&&!this.path.some(Cze));this.animationProgress=0;let v;this.mixTargetDelta=x=>{const b=x/1e3;jH(f.x,s.x,b),jH(f.y,s.y,b),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ak(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kze(this.relativeTarget,this.relativeTargetOrigin,d,b),v&&ize(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=ta()),rc(v,this.relativeTarget)),p&&(this.animationValues=u,oze(u,c,this.latestValues,b,w,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(np(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cn.update(()=>{XA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pv(0)),this.currentAnimation=uze(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),s.onUpdate&&s.onUpdate(u)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mze),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=s;if(!(!o||!l||!c)){if(this!==s&&this.layout&&c&&Fue(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ta();const f=Is(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=Is(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}rc(o,l),oy(o,u),_x(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new pze),this.sharedNodes.get(s).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&eI("z",s,c,this.animationValues);for(let u=0;u<Q4.length;u++)eI(`rotate${Q4[u]}`,s,c,this.animationValues),eI(`skew${Q4[u]}`,s,c,this.animationValues);s.render();for(const u in c)s.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=YA(o==null?void 0:o.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=YA(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!t0(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=aze(this.projectionDeltaWithTransform,this.treeScale,u);l&&(f=l(u,f)),s.transform=f;const{x:d,y:h}=this.projectionDelta;s.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,c.animationValues?s.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:s.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in oM){if(u[m]===void 0)continue;const{correct:p,applyTo:y,isCSSVariable:g}=oM[m],w=f==="none"?u[m]:p(u[m],c);if(y){const v=y.length;for(let x=0;x<v;x++)s[y[x]]=w}else g?this.options.visualElement.renderState.vars[m]=w:s[m]=w}this.options.layoutId&&(s.pointerEvents=c===this?YA(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(LH),this.root.sharedNodes.clear()}}}function yze(e){e.updateLayout()}function vze(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:a}=e.options,s=t.source!==e.layout.source;a==="size"?hu(f=>{const d=s?t.measuredBox[f]:t.layoutBox[f],h=Is(d);d.min=n[f].min,d.max=d.min+h}):Fue(a,t.layoutBox,n)&&hu(f=>{const d=s?t.measuredBox[f]:t.layoutBox[f],h=Is(n[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const o=ay();_x(o,n,t.layoutBox);const l=ay();s?_x(l,e.applyTransform(i,!0),t.measuredBox):_x(l,n,t.layoutBox);const c=!Rue(o);let u=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const m=ta();Ak(m,t.layoutBox,d.layoutBox);const p=ta();Ak(p,n,h.layoutBox),Lue(m,p)||(u=!0),f.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=m,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function wze(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function xze(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function bze(e){e.clearSnapshot()}function LH(e){e.clearMeasurements()}function MH(e){e.isLayoutDirty=!1}function _ze(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function DH(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Sze(e){e.resolveTargetDelta()}function Eze(e){e.calcProjection()}function Aze(e){e.resetSkewAndRotation()}function Tze(e){e.removeLeadSnapshot()}function jH(e,t,r){e.translate=Jn(t.translate,0,r),e.scale=Jn(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function $H(e,t,r,n){e.min=Jn(t.min,r.min,n),e.max=Jn(t.max,r.max,n)}function kze(e,t,r,n){$H(e.x,t.x,r.x,n),$H(e.y,t.y,r.y,n)}function Cze(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Oze={duration:.45,ease:[.4,0,.1,1]},FH=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),BH=FH("applewebkit/")&&!FH("chrome/")?Math.round:Nl;function UH(e){e.min=BH(e.min),e.max=BH(e.max)}function Pze(e){UH(e.x),UH(e.y)}function Fue(e,t,r){return e==="position"||e==="preserve-aspect"&&!QUe(OH(t),OH(r),.2)}function Nze(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Ize=$ue({attachResizeListener:(e,t)=>qb(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),tI={current:void 0},Bue=$ue({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tI.current){const e=new Ize({});e.mount(window),e.setOptions({layoutScroll:!0}),tI.current=e}return tI.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),G8=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function zH(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Rze(...e){return t=>{let r=!1;const n=e.map(i=>{const a=zH(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():zH(e[i],null)}}}}function Lze(...e){return C.useCallback(Rze(...e),e)}class Mze extends C.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=r.offsetParent,i=nM(n)&&n.offsetWidth||0,a=nM(n)&&n.offsetHeight||0,s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Dze({children:e,isPresent:t,anchorX:r,anchorY:n,root:i,pop:a}){var d;const s=C.useId(),o=C.useRef(null),l=C.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=C.useContext(G8),u=((d=e.props)==null?void 0:d.ref)??(e==null?void 0:e.ref),f=Lze(o,u);return C.useInsertionEffect(()=>{const{width:h,height:m,top:p,left:y,right:g,bottom:w}=l.current;if(t||a===!1||!o.current||!h||!m)return;const v=r==="left"?`left: ${y}`:`right: ${g}`,x=n==="bottom"?`bottom: ${w}`:`top: ${p}`;o.current.dataset.motionPopId=s;const b=document.createElement("style");c&&(b.nonce=c);const S=i??document.head;return S.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            ${v}px !important;
            ${x}px !important;
          }
        `),()=>{S.contains(b)&&S.removeChild(b)}},[t]),E.jsx(Mze,{isPresent:t,childRef:o,sizeRef:l,pop:a,children:a===!1?e:C.cloneElement(e,{ref:f})})}const jze=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:l,root:c})=>{const u=v8($ze),f=C.useId();let d=!0,h=C.useMemo(()=>(d=!1,{id:f,initial:t,isPresent:r,custom:i,onExitComplete:m=>{u.set(m,!0);for(const p of u.values())if(!p)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,n]);return a&&d&&(h={...h}),C.useMemo(()=>{u.forEach((m,p)=>u.set(p,!1))},[r]),C.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),e=E.jsx(Dze,{pop:s==="popLayout",isPresent:r,anchorX:o,anchorY:l,root:c,children:e}),E.jsx(sO.Provider,{value:h,children:e})};function $ze(){return new Map}function Uue(e=!0){const t=C.useContext(sO);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=t,a=C.useId();C.useEffect(()=>{if(e)return i(a)},[e]);const s=C.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,s]:[!0]}const AE=e=>e.key||"";function VH(e){const t=[];return C.Children.forEach(e,r=>{C.isValidElement(r)&&t.push(r)}),t}const zue=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:l="top",root:c})=>{const[u,f]=Uue(s),d=C.useMemo(()=>VH(e),[e]),h=s&&!u?[]:d.map(AE),m=C.useRef(!0),p=C.useRef(d),y=v8(()=>new Map),g=C.useRef(new Set),[w,v]=C.useState(d),[x,b]=C.useState(d);yce(()=>{m.current=!1,p.current=d;for(let A=0;A<x.length;A++){const O=AE(x[A]);h.includes(O)?(y.delete(O),g.current.delete(O)):y.get(O)!==!0&&y.set(O,!1)}},[x,h.length,h.join("-")]);const S=[];if(d!==w){let A=[...d];for(let O=0;O<x.length;O++){const M=x[O],P=AE(M);h.includes(P)||(A.splice(O,0,M),S.push(M))}return a==="wait"&&S.length&&(A=S),b(VH(A)),v(d),null}const{forceRender:T}=C.useContext(y8);return E.jsx(E.Fragment,{children:x.map(A=>{const O=AE(A),M=s&&!u?!1:d===x||h.includes(O),P=()=>{if(g.current.has(O))return;if(g.current.add(O),y.has(O))y.set(O,!0);else return;let N=!0;y.forEach(V=>{V||(N=!1)}),N&&(T==null||T(),b(p.current),s&&(f==null||f()),n&&n())};return E.jsx(jze,{isPresent:M,initial:!m.current||r?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:M?void 0:P,anchorX:o,anchorY:l,children:A},O)})})},Vue=C.createContext({strict:!1}),WH={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let HH=!1;function Fze(){if(HH)return;const e={};for(const t in WH)e[t]={isEnabled:r=>WH[t].some(n=>!!r[n])};yue(e),HH=!0}function Wue(){return Fze(),AUe()}function Bze(e){const t=Wue();for(const r in e)t[r]={...t[r],...e[r]};yue(t)}const Uze=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Tk(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Uze.has(e)}let Hue=e=>!Tk(e);function zze(e){typeof e=="function"&&(Hue=t=>t.startsWith("on")?!Tk(t):e(t))}try{zze(require("@emotion/is-prop-valid").default)}catch{}function Vze(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(Hue(i)||r===!0&&Tk(i)||!t&&!Tk(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}const cO=C.createContext({});function Wze(e,t){if(lO(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Gb(r)?r:void 0,animate:Gb(n)?n:void 0}}return e.inherit!==!1?t:{}}function Hze(e){const{initial:t,animate:r}=Wze(e,C.useContext(cO));return C.useMemo(()=>({initial:t,animate:r}),[GH(t),GH(r)])}function GH(e){return Array.isArray(e)?e.join(" "):e}const q8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gue(e,t,r){for(const n in t)!cs(t[n])&&!Eue(n,r)&&(e[n]=t[n])}function Gze({transformTemplate:e},t){return C.useMemo(()=>{const r=q8();return W8(r,t,e),Object.assign({},r.vars,r.style)},[t])}function qze(e,t){const r=e.style||{},n={};return Gue(n,r,e),Object.assign(n,Gze(e,t)),n}function Kze(e,t){const r={},n=qze(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const que=()=>({...q8(),attrs:{}});function Yze(e,t,r,n){const i=C.useMemo(()=>{const a=que();return Aue(a,t,kue(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Gue(a,e.style,e),i.style={...a,...i.style}}return i}const Xze=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function K8(e){return typeof e!="string"||e.includes("-")?!1:!!(Xze.indexOf(e)>-1||/[A-Z]/u.test(e))}function Zze(e,t,r,{latestValues:n},i,a=!1,s){const l=(s??K8(e)?Yze:Kze)(t,n,i,e),c=Vze(t,typeof e=="string",a),u=e!==C.Fragment?{...c,...l,ref:r}:{},{children:f}=t,d=C.useMemo(()=>cs(f)?f.get():f,[f]);return C.createElement(e,{...u,children:d})}function Jze({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,i){return{latestValues:Qze(r,n,i,e),renderState:t()}}function Qze(e,t,r,n){const i={},a=n(e,{});for(const d in a)i[d]=YA(a[d]);let{initial:s,animate:o}=e;const l=lO(e),c=mue(e);t&&c&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let u=r?r.initial===!1:!1;u=u||s===!1;const f=u?o:s;if(f&&typeof f!="boolean"&&!oO(f)){const d=Array.isArray(f)?f:[f];for(let h=0;h<d.length;h++){const m=D8(e,d[h]);if(m){const{transitionEnd:p,transition:y,...g}=m;for(const w in g){let v=g[w];if(Array.isArray(v)){const x=u?v.length-1:0;v=v[x]}v!==null&&(i[w]=v)}for(const w in p)i[w]=p[w]}}}return i}const Kue=e=>(t,r)=>{const n=C.useContext(cO),i=C.useContext(sO),a=()=>Jze(e,t,n,i);return r?a():v8(a)},eVe=Kue({scrapeMotionValuesFromProps:H8,createRenderState:q8}),tVe=Kue({scrapeMotionValuesFromProps:Cue,createRenderState:que}),rVe=Symbol.for("motionComponentSymbol");function nVe(e,t,r){const n=C.useRef(r);C.useInsertionEffect(()=>{n.current=r});const i=C.useRef(null);return C.useCallback(a=>{var o;a&&((o=e.onMount)==null||o.call(e,a)),t&&(a?t.mount(a):t.unmount());const s=n.current;if(typeof s=="function")if(a){const l=s(a);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[t])}const Yue=C.createContext({});function Pg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function iVe(e,t,r,n,i,a){var v,x;const{visualElement:s}=C.useContext(cO),o=C.useContext(Vue),l=C.useContext(sO),c=C.useContext(G8),u=c.reducedMotion,f=c.skipAnimations,d=C.useRef(null),h=C.useRef(!1);n=n||o.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:s,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u,skipAnimations:f,isSVG:a}),h.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const m=d.current,p=C.useContext(Yue);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&aVe(d.current,r,i,p);const y=C.useRef(!1);C.useInsertionEffect(()=>{m&&y.current&&m.update(r,l)});const g=r[rue],w=C.useRef(!!g&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,g))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,g)));return yce(()=>{h.current=!0,m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),C.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,g)}),w.current=!1),m.enteringChildren=void 0)}),m}function aVe(e,t,r,n){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Xue(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Pg(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:l,layoutRoot:c})}function Xue(e){if(e)return e.options.allowProjection!==!1?e.projection:Xue(e.parent)}function rI(e,{forwardMotionProps:t=!1,type:r}={},n,i){n&&Bze(n);const a=r?r==="svg":K8(e),s=a?tVe:eVe;function o(c,u){let f;const d={...C.useContext(G8),...c,layoutId:sVe(c)},{isStatic:h}=d,m=Hze(c),p=s(c,h);if(!h&&gce){oVe();const y=lVe(d);f=y.MeasureLayout,m.visualElement=iVe(e,p,d,i,y.ProjectionNode,a)}return E.jsxs(cO.Provider,{value:m,children:[f&&m.visualElement?E.jsx(f,{visualElement:m.visualElement,...d}):null,Zze(e,c,nVe(p,m.visualElement,u),p,h,t,a)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const l=C.forwardRef(o);return l[rVe]=e,l}function sVe({layoutId:e}){const t=C.useContext(y8).id;return t&&e!==void 0?t+"-"+e:e}function oVe(e,t){C.useContext(Vue).strict}function lVe(e){const t=Wue(),{drag:r,layout:n}=t;if(!r&&!n)return{};const i={...r,...n};return{MeasureLayout:r!=null&&r.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function cVe(e,t){if(typeof Proxy>"u")return rI;const r=new Map,n=(a,s)=>rI(a,s,e,t),i=(a,s)=>n(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?n:(r.has(s)||r.set(s,rI(s,void 0,e,t)),r.get(s))})}const uVe=(e,t)=>t.isSVG??K8(e)?new zUe(t):new DUe(t,{allowProjection:e!==C.Fragment});class fVe extends wp{constructor(t){super(t),t.animationState||(t.animationState=qUe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();oO(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let dVe=0;class hVe extends wp{constructor(){super(...arguments),this.id=dVe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const pVe={animation:{Feature:fVe},exit:{Feature:hVe}};function A2(e){return{point:{x:e.pageX,y:e.pageY}}}const mVe=e=>t=>B8(t)&&e(t,A2(t));function Sx(e,t,r,n){return qb(e,t,mVe(r),n)}const Zue=({current:e})=>e?e.ownerDocument.defaultView:null,qH=(e,t)=>Math.abs(e-t);function gVe(e,t){const r=qH(e.x,t.x),n=qH(e.y,t.y);return Math.sqrt(r**2+n**2)}const KH=new Set(["auto","scroll"]);class Jue{constructor(t,r,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=h=>{this.handleScroll(h.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=iI(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=gVe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!p)return;const{point:y}=h,{timestamp:g}=Da;this.history.push({...y,timestamp:g});const{onStart:w,onMove:v}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=nI(m,this.transformPagePoint),Cn.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=iI(h.type==="pointercancel"?this.lastMoveEventInfo:nI(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),y&&y(h,w)},!B8(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=s,this.contextWindow=i||window;const l=A2(t),c=nI(l,this.transformPagePoint),{point:u}=c,{timestamp:f}=Da;this.history=[{...u,timestamp:f}];const{onSessionStart:d}=r;d&&d(t,iI(c,this.history)),this.removeListeners=_2(Sx(this.contextWindow,"pointermove",this.handlePointerMove),Sx(this.contextWindow,"pointerup",this.handlePointerUp),Sx(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(t){let r=t.parentElement;for(;r;){const n=getComputedStyle(r);(KH.has(n.overflowX)||KH.has(n.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const r=this.scrollPositions.get(t);if(!r)return;const n=t===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:i.x-r.x,y:i.y-r.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,i),Cn.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),np(this.updatePoint)}}function nI(e,t){return t?{point:t(e.point)}:e}function YH(e,t){return{x:e.x-t.x,y:e.y-t.y}}function iI({point:e},t){return{point:e,delta:YH(e,Que(t)),offset:YH(e,yVe(t)),velocity:vVe(t,.1)}}function yVe(e){return e[0]}function Que(e){return e[e.length-1]}function vVe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=Que(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>Ic(t)));)r--;if(!n)return{x:0,y:0};n===e[0]&&e.length>2&&i.timestamp-n.timestamp>Ic(t)*2&&(n=e[1]);const a=Tl(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function wVe(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Jn(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Jn(r,e,n.max):Math.min(e,r)),e}function XH(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function xVe(e,{top:t,left:r,bottom:n,right:i}){return{x:XH(e.x,r,i),y:XH(e.y,t,n)}}function ZH(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function bVe(e,t){return{x:ZH(e.x,t.x),y:ZH(e.y,t.y)}}function _Ve(e,t){let r=.5;const n=Is(e),i=Is(t);return i>n?r=Vb(t.min,t.max-n,e.min):n>i&&(r=Vb(e.min,e.max-i,t.min)),Uu(0,1,r)}function SVe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const lM=.35;function EVe(e=lM){return e===!1?e=0:e===!0&&(e=lM),{x:JH(e,"left","right"),y:JH(e,"top","bottom")}}function JH(e,t,r){return{min:QH(e,t),max:QH(e,r)}}function QH(e,t){return typeof e=="number"?e:e[t]||0}const AVe=new WeakMap;class TVe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ta(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{r&&this.snapToCursor(A2(f).point),this.stopAnimation()},s=(f,d)=>{const{drag:h,dragPropagation:m,onDragStart:p}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tUe(h),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hu(g=>{let w=this.getAxisMotionValue(g).get()||0;if(Mu.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[g];x&&(w=Is(x)*(parseFloat(w)/100))}}this.originPoint[g]=w}),p&&Cn.update(()=>p(f,d),!1,!0),eM(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d;const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:p,onDrag:y}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:g}=d;if(m&&this.currentDirection===null){this.currentDirection=CVe(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),y&&Cn.update(()=>y(f,d),!1,!0)},l=(f,d)=>{this.latestPointerEvent=f,this.latestPanInfo=d,this.stop(f,d),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:f}=this.getProps();(f||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:u}=this.getProps();this.panSession=new Jue(t,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:Zue(this.visualElement),element:this.visualElement.current})}stop(t,r){const n=t||this.latestPointerEvent,i=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Cn.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!TE(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let s=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(s=wVe(s,this.constraints[t],this.elastic[t])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;t&&Pg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=xVe(n.layoutBox,t):this.constraints=!1,this.elastic=EVe(r),i!==this.constraints&&!Pg(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&hu(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=SVe(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Pg(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=PUe(n,i.root,this.visualElement.getTransformPagePoint());let s=bVe(i.layout.layoutBox,a);if(r){const o=r(kUe(s));this.hasMutatedConstraints=!!o,o&&(s=wue(o))}return s}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=hu(u=>{if(!TE(u,r,this.currentDirection))return;let f=l&&l[u]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,m={type:"inertia",velocity:n?t[u]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return eM(this.visualElement,t),n.start(M8(t,n,0,r,this.visualElement,!1))}stopAnimation(){hu(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){hu(r=>{const{drag:n}=this.getProps();if(!TE(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[r],l=a.get()||0;a.set(t[r]-Jn(s,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Pg(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hu(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=_Ve({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),hu(s=>{if(!TE(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:c}=this.constraints[s];o.set(Jn(l,c,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;AVe.set(this.visualElement,this);const t=this.visualElement.current,r=Sx(t,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps(),d=c.target,h=d!==t&&oUe(d);u&&f&&!h&&this.start(c)});let n;const i=()=>{const{dragConstraints:c}=this.getProps();Pg(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),n||(n=kVe(t,c.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Cn.read(i);const o=qb(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(hu(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),l&&l(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=lM,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function eG(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function kVe(e,t,r){const n=oH(e,eG(r)),i=oH(t,eG(r));return()=>{n(),i()}}function TE(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function CVe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class OVe extends wp{constructor(t){super(t),this.removeGroupControls=Nl,this.removeListeners=Nl,this.controls=new TVe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nl}update(){const{dragControls:t}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};t!==r&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const aI=e=>(t,r)=>{e&&Cn.update(()=>e(t,r),!1,!0)};class PVe extends wp{constructor(){super(...arguments),this.removePointerDownListener=Nl}onPointerDown(t){this.session=new Jue(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zue(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:aI(t),onStart:aI(r),onMove:aI(n),onEnd:(a,s)=>{delete this.session,i&&Cn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Sx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let sI=!1;class NVe extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=t;a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),sI&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),XA.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,{projection:s}=n;return s&&(s.isPresent=a,t.layoutDependency!==r&&s.setOptions({...s.options,layoutDependency:r}),sI=!0,i||t.layoutDependency!==r||r===void 0||t.isPresent!==a?s.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?s.promote():s.relegate()||Cn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),F8.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;sI=!0,i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function efe(e){const[t,r]=Uue(),n=C.useContext(y8);return E.jsx(NVe,{...e,layoutGroup:n,switchLayoutGroup:C.useContext(Yue),isPresent:t,safeToRemove:r})}const IVe={pan:{Feature:PVe},drag:{Feature:OVe,ProjectionNode:Bue,MeasureLayout:efe}};function tG(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,a=n[i];a&&Cn.postRender(()=>a(t,A2(t)))}class RVe extends wp{mount(){const{current:t}=this.node;t&&(this.unmount=nUe(t,(r,n)=>(tG(this.node,n,"Start"),i=>tG(this.node,i,"End"))))}unmount(){}}class LVe extends wp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_2(qb(this.node.current,"focus",()=>this.onFocus()),qb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rG(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),a=n[i];a&&Cn.postRender(()=>a(t,A2(t)))}class MVe extends wp{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:r,propagate:n}=this.node.props;this.unmount=cUe(t,(i,a)=>(rG(this.node,a,"Start"),(s,{success:o})=>rG(this.node,s,o?"End":"Cancel")),{useGlobalTarget:r,stopPropagation:(n==null?void 0:n.tap)===!1})}unmount(){}}const cM=new WeakMap,oI=new WeakMap,DVe=e=>{const t=cM.get(e.target);t&&t(e)},jVe=e=>{e.forEach(DVe)};function $Ve({root:e,...t}){const r=e||document;oI.has(r)||oI.set(r,{});const n=oI.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(jVe,{root:e,...t})),n[i]}function FVe(e,t,r){const n=$Ve(t);return cM.set(e,r),n.observe(e),()=>{cM.delete(e),n.unobserve(e)}}const BVe={some:0,all:1};class UVe extends wp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=t,s={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:BVe[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),d=c?u:f;d&&d(l)};return FVe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(zVe(t,r))&&this.startObserver()}unmount(){}}function zVe({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const VVe={inView:{Feature:UVe},tap:{Feature:MVe},focus:{Feature:LVe},hover:{Feature:RVe}},WVe={layout:{ProjectionNode:Bue,MeasureLayout:efe}},HVe={...pVe,...VVe,...IVe,...WVe},yu=cVe(HVe,uVe),GVe=()=>{const{messages:e,isOpen:t,setIsOpen:r,isTyping:n,sendMessage:i,clearChat:a}=JBe(),[s,o]=C.useState(""),[l,c]=C.useState(!1),u=C.useRef(null);C.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[e,n]);const f=d=>{d.preventDefault(),!(!s.trim()||n)&&(i(s),o(""))};return E.jsxs("div",{className:"fixed bottom-6 right-6 z-[100] flex flex-col items-end gap-4",children:[E.jsx(zue,{children:t&&E.jsx(yu.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,height:l?"auto":"500px"},exit:{opacity:0,scale:.9,y:20},className:Ft("w-[350px] shadow-2xl overflow-hidden flex flex-col",l?"h-auto":"h-[500px]"),children:E.jsxs(wn,{className:"h-full border-primary/20 flex flex-col",children:[E.jsxs(fs,{className:"p-4 border-b bg-primary text-primary-foreground flex flex-row items-center justify-between space-y-0",children:[E.jsxs(Fs,{className:"text-sm font-bold flex items-center gap-2",children:[E.jsx(Gte,{className:"h-4 w-4"}),"PennyWise AI"]}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx(Er,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary-foreground hover:bg-primary-foreground/10",onClick:()=>c(!l),children:l?E.jsx(QEe,{className:"h-4 w-4"}):E.jsx(rAe,{className:"h-4 w-4"})}),E.jsx(Er,{variant:"ghost",size:"icon",className:"h-7 w-7 text-primary-foreground hover:bg-primary-foreground/10",onClick:()=>r(!1),children:E.jsx(mb,{className:"h-4 w-4"})})]})]}),!l&&E.jsxs(E.Fragment,{children:[E.jsxs($n,{ref:u,className:"flex-1 overflow-y-auto p-4 space-y-4 bg-muted/30 scrollbar-thin scrollbar-thumb-primary/10",children:[e.map(d=>E.jsxs("div",{className:Ft("flex flex-col max-w-[85%] gap-1",d.role==="user"?"ml-auto items-end":"mr-auto items-start"),children:[E.jsx("div",{className:Ft("p-3 rounded-2xl text-sm shadow-sm",d.role==="user"?"bg-primary text-primary-foreground rounded-tr-none":"bg-card text-card-foreground border rounded-tl-none"),children:d.content}),E.jsx("span",{className:"text-[10px] text-muted-foreground px-1",children:new Date(d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},d.id)),n&&E.jsxs("div",{className:"flex items-center gap-2 bg-card border p-3 rounded-2xl rounded-tl-none w-fit",children:[E.jsx(Sm,{className:"h-4 w-4 animate-spin text-primary"}),E.jsx("span",{className:"text-xs text-muted-foreground italic",children:"PennyWise is thinking..."})]})]}),E.jsxs(hv,{className:"p-3 border-t bg-card mt-auto flex-col gap-2",children:[E.jsxs("form",{onSubmit:f,className:"flex gap-2 w-full",children:[E.jsx(Bs,{placeholder:"Ask me anything...",value:s,onChange:d=>o(d.target.value),className:"flex-1",disabled:n}),E.jsx(Er,{type:"submit",size:"icon",disabled:!s.trim()||n,children:E.jsx(uAe,{className:"h-4 w-4"})})]}),E.jsxs("div",{className:"flex justify-between w-full px-1",children:[E.jsxs(Er,{variant:"ghost",size:"sm",className:"h-6 text-[10px] text-muted-foreground hover:text-destructive flex items-center gap-1",onClick:a,children:[E.jsx(A6,{className:"h-3 w-3"}),"Clear History"]}),E.jsx("span",{className:"text-[9px] text-muted-foreground/50 self-center",children:"Powered by LangGraph"})]})]})]})]})})}),E.jsx(yu.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:E.jsx(Er,{onClick:()=>r(!t),className:Ft("h-14 w-14 rounded-full shadow-lg flex items-center justify-center p-0 transition-all",t?"bg-destructive hover:bg-destructive/90 rounded-2xl rotate-90":"bg-primary hover:bg-primary/90"),children:t?E.jsx(mb,{className:"h-6 w-6"}):E.jsx(tAe,{className:"h-6 w-6"})})})]})};function qVe(){const{user:e,loading:t}=gd(),[r,n]=C.useState(!1);return t?E.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background",children:E.jsx(Sm,{className:"h-8 w-8 animate-spin text-primary"})}):e?E.jsx(ZBe,{children:E.jsx(UOe,{children:E.jsxs("div",{className:"min-h-screen bg-background flex",children:[r&&E.jsx("div",{className:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm md:hidden",onClick:()=>n(!1),children:E.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-64 border-r bg-background shadow-lg",onClick:i=>i.stopPropagation(),children:E.jsx(sz,{onNavigate:()=>n(!1),className:"border-none"})})}),E.jsx("div",{className:"hidden md:flex w-64 flex-col fixed inset-y-0 z-50",children:E.jsx(sz,{})}),E.jsxs("div",{className:"flex-1 md:pl-64 flex flex-col",children:[E.jsx(BOe,{onMenuClick:()=>n(!0)}),E.jsx("main",{className:"flex-1 p-4 md:p-6 overflow-y-auto w-full",children:E.jsx("div",{className:"max-w-7xl mx-auto space-y-6",children:E.jsx(pte,{})})})]}),E.jsx(GVe,{})]})})}):E.jsx(v6,{to:"/auth/login",replace:!0})}function KVe(){const{user:e,loading:t}=gd();return t?E.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-background",children:E.jsx(Sm,{className:"h-8 w-8 animate-spin text-primary"})}):e?E.jsx(v6,{to:"/",replace:!0}):E.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-900 relative overflow-hidden",children:[E.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[E.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),E.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),E.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"})]}),E.jsxs("div",{className:"relative z-10 w-full max-w-md p-4",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-tight",children:"SpendMind"}),E.jsx("p",{className:"text-gray-300",children:"AI-powered financial insights"})]}),E.jsx(pte,{})]})]})}var YVe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],XVe=YVe.reduce((e,t)=>{const r=vC(`Primitive.${t}`),n=C.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(l,{...o,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),ZVe="Label",tfe=C.forwardRef((e,t)=>E.jsx(XVe.label,{...e,ref:t,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));tfe.displayName=ZVe;var rfe=tfe;const JVe=T6("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Fa=C.forwardRef(({className:e,...t},r)=>E.jsx(rfe,{ref:r,className:Ft(JVe(),e),...t}));Fa.displayName=rfe.displayName;const QVe=T6("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Y8=C.forwardRef(({className:e,variant:t,...r},n)=>E.jsx("div",{ref:n,role:"alert",className:Ft(QVe({variant:t}),e),...r}));Y8.displayName="Alert";const X8=C.forwardRef(({className:e,...t},r)=>E.jsx("div",{ref:r,className:Ft("text-sm [&_p]:leading-relaxed",e),...t}));X8.displayName="AlertDescription";const eWe=C.forwardRef(({className:e,...t},r)=>E.jsx("h5",{ref:r,className:Ft("mb-1 font-medium leading-none tracking-tight",e),...t}));eWe.displayName="AlertTitle";function tWe(){const{signIn:e}=gd(),t=K_(),[r,n]=C.useState(""),[i,a]=C.useState(""),[s,o]=C.useState(!1),[l,c]=C.useState(!1),[u,f]=C.useState(null),d=async h=>{h.preventDefault(),c(!0),f(null);try{const{error:m}=await e({email:r,password:i});if(m)throw m;t("/")}catch(m){f(m.message)}finally{c(!1)}};return E.jsxs(wn,{className:"w-full bg-white/10 backdrop-blur-md border-white/20 shadow-xl",children:[E.jsxs(fs,{children:[E.jsx(Fs,{className:"text-white text-2xl",children:"Welcome Back"}),E.jsx(zc,{className:"text-gray-300",children:"Enter your email below to login into your account"})]}),E.jsx($n,{children:E.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u&&E.jsx(Y8,{variant:"destructive",children:E.jsx(X8,{children:u})}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"email",className:"text-gray-200",children:"Email"}),E.jsx(Bs,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:r,onChange:h=>n(h.target.value),className:"bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"password",className:"text-gray-200",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Bs,{id:"password",type:s?"text":"password",required:!0,value:i,onChange:h=>a(h.target.value),className:"pr-10 bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"}),E.jsxs(Er,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>o(!s),children:[s?E.jsx(Ute,{className:"h-4 w-4"}):E.jsx(zte,{className:"h-4 w-4"}),E.jsx("span",{className:"sr-only",children:s?"Hide password":"Show password"})]})]})]}),E.jsxs(Er,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white border-none",disabled:l,children:[l&&E.jsx(Sm,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]})}),E.jsx(hv,{children:E.jsxs("div",{className:"text-sm text-gray-300 text-center w-full",children:["Don't have an account?"," ",E.jsx(hC,{to:"/auth/signup",className:"text-purple-300 hover:text-purple-200 hover:underline transition-colors",children:"Sign up"})]})})]})}function rWe(){const{signUp:e}=gd(),t=K_(),[r,n]=C.useState(""),[i,a]=C.useState(""),[s,o]=C.useState(!1),[l,c]=C.useState(""),[u,f]=C.useState(!1),[d,h]=C.useState(null),m=async p=>{p.preventDefault(),f(!0),h(null);try{const{error:y}=await e({email:r,password:i,options:{data:{full_name:l}}});if(y)throw y;t("/")}catch(y){h(y.message)}finally{f(!1)}};return E.jsxs(wn,{className:"w-full bg-white/10 backdrop-blur-md border-white/20 shadow-xl",children:[E.jsxs(fs,{children:[E.jsx(Fs,{className:"text-white text-2xl",children:"Create Account"}),E.jsx(zc,{className:"text-gray-300",children:"Create an account to track your finances"})]}),E.jsx($n,{children:E.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d&&E.jsx(Y8,{variant:"destructive",children:E.jsx(X8,{children:d})}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"fullname",className:"text-gray-200",children:"Full Name"}),E.jsx(Bs,{id:"fullname",placeholder:"John Doe",required:!0,value:l,onChange:p=>c(p.target.value),className:"bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"email",className:"text-gray-200",children:"Email"}),E.jsx(Bs,{id:"email",type:"email",placeholder:"m@example.com",required:!0,value:r,onChange:p=>n(p.target.value),className:"bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"password",className:"text-gray-200",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Bs,{id:"password",type:s?"text":"password",required:!0,value:i,onChange:p=>a(p.target.value),className:"pr-10 bg-black/20 border-white/10 text-white placeholder:text-gray-400 focus-visible:ring-offset-0 focus-visible:ring-white/50"}),E.jsxs(Er,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-gray-400 hover:text-white",onClick:()=>o(!s),children:[s?E.jsx(Ute,{className:"h-4 w-4"}):E.jsx(zte,{className:"h-4 w-4"}),E.jsx("span",{className:"sr-only",children:s?"Hide password":"Show password"})]})]})]}),E.jsxs(Er,{type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 text-white border-none",disabled:u,children:[u&&E.jsx(Sm,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign Up"]})]})}),E.jsx(hv,{children:E.jsxs("div",{className:"text-sm text-gray-300 text-center w-full",children:["Already have an account?"," ",E.jsx(hC,{to:"/auth/login",className:"text-purple-300 hover:text-purple-200 hover:underline transition-colors",children:"Sign In"})]})})]})}var nWe=Array.isArray,po=nWe,iWe=typeof bS=="object"&&bS&&bS.Object===Object&&bS,nfe=iWe,aWe=nfe,sWe=typeof self=="object"&&self&&self.Object===Object&&self,oWe=aWe||sWe||Function("return this")(),qu=oWe,lWe=qu,cWe=lWe.Symbol,T2=cWe,nG=T2,ife=Object.prototype,uWe=ife.hasOwnProperty,fWe=ife.toString,vw=nG?nG.toStringTag:void 0;function dWe(e){var t=uWe.call(e,vw),r=e[vw];try{e[vw]=void 0;var n=!0}catch{}var i=fWe.call(e);return n&&(t?e[vw]=r:delete e[vw]),i}var hWe=dWe,pWe=Object.prototype,mWe=pWe.toString;function gWe(e){return mWe.call(e)}var yWe=gWe,iG=T2,vWe=hWe,wWe=yWe,xWe="[object Null]",bWe="[object Undefined]",aG=iG?iG.toStringTag:void 0;function _We(e){return e==null?e===void 0?bWe:xWe:aG&&aG in Object(e)?vWe(e):wWe(e)}var bd=_We;function SWe(e){return e!=null&&typeof e=="object"}var _d=SWe,EWe=bd,AWe=_d,TWe="[object Symbol]";function kWe(e){return typeof e=="symbol"||AWe(e)&&EWe(e)==TWe}var d1=kWe,CWe=po,OWe=d1,PWe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NWe=/^\w*$/;function IWe(e,t){if(CWe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||OWe(e)?!0:NWe.test(e)||!PWe.test(e)||t!=null&&e in Object(t)}var Z8=IWe;function RWe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var xp=RWe;const h1=Hr(xp);var LWe=bd,MWe=xp,DWe="[object AsyncFunction]",jWe="[object Function]",$We="[object GeneratorFunction]",FWe="[object Proxy]";function BWe(e){if(!MWe(e))return!1;var t=LWe(e);return t==jWe||t==$We||t==DWe||t==FWe}var J8=BWe;const sr=Hr(J8);var UWe=qu,zWe=UWe["__core-js_shared__"],VWe=zWe,lI=VWe,sG=function(){var e=/[^.]+$/.exec(lI&&lI.keys&&lI.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function WWe(e){return!!sG&&sG in e}var HWe=WWe,GWe=Function.prototype,qWe=GWe.toString;function KWe(e){if(e!=null){try{return qWe.call(e)}catch{}try{return e+""}catch{}}return""}var afe=KWe,YWe=J8,XWe=HWe,ZWe=xp,JWe=afe,QWe=/[\\^$.*+?()[\]{}|]/g,eHe=/^\[object .+?Constructor\]$/,tHe=Function.prototype,rHe=Object.prototype,nHe=tHe.toString,iHe=rHe.hasOwnProperty,aHe=RegExp("^"+nHe.call(iHe).replace(QWe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sHe(e){if(!ZWe(e)||XWe(e))return!1;var t=YWe(e)?aHe:eHe;return t.test(JWe(e))}var oHe=sHe;function lHe(e,t){return e==null?void 0:e[t]}var cHe=lHe,uHe=oHe,fHe=cHe;function dHe(e,t){var r=fHe(e,t);return uHe(r)?r:void 0}var Cm=dHe,hHe=Cm,pHe=hHe(Object,"create"),uO=pHe,oG=uO;function mHe(){this.__data__=oG?oG(null):{},this.size=0}var gHe=mHe;function yHe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vHe=yHe,wHe=uO,xHe="__lodash_hash_undefined__",bHe=Object.prototype,_He=bHe.hasOwnProperty;function SHe(e){var t=this.__data__;if(wHe){var r=t[e];return r===xHe?void 0:r}return _He.call(t,e)?t[e]:void 0}var EHe=SHe,AHe=uO,THe=Object.prototype,kHe=THe.hasOwnProperty;function CHe(e){var t=this.__data__;return AHe?t[e]!==void 0:kHe.call(t,e)}var OHe=CHe,PHe=uO,NHe="__lodash_hash_undefined__";function IHe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=PHe&&t===void 0?NHe:t,this}var RHe=IHe,LHe=gHe,MHe=vHe,DHe=EHe,jHe=OHe,$He=RHe;function p1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}p1.prototype.clear=LHe;p1.prototype.delete=MHe;p1.prototype.get=DHe;p1.prototype.has=jHe;p1.prototype.set=$He;var FHe=p1;function BHe(){this.__data__=[],this.size=0}var UHe=BHe;function zHe(e,t){return e===t||e!==e&&t!==t}var Q8=zHe,VHe=Q8;function WHe(e,t){for(var r=e.length;r--;)if(VHe(e[r][0],t))return r;return-1}var fO=WHe,HHe=fO,GHe=Array.prototype,qHe=GHe.splice;function KHe(e){var t=this.__data__,r=HHe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():qHe.call(t,r,1),--this.size,!0}var YHe=KHe,XHe=fO;function ZHe(e){var t=this.__data__,r=XHe(t,e);return r<0?void 0:t[r][1]}var JHe=ZHe,QHe=fO;function eGe(e){return QHe(this.__data__,e)>-1}var tGe=eGe,rGe=fO;function nGe(e,t){var r=this.__data__,n=rGe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var iGe=nGe,aGe=UHe,sGe=YHe,oGe=JHe,lGe=tGe,cGe=iGe;function m1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}m1.prototype.clear=aGe;m1.prototype.delete=sGe;m1.prototype.get=oGe;m1.prototype.has=lGe;m1.prototype.set=cGe;var dO=m1,uGe=Cm,fGe=qu,dGe=uGe(fGe,"Map"),eF=dGe,lG=FHe,hGe=dO,pGe=eF;function mGe(){this.size=0,this.__data__={hash:new lG,map:new(pGe||hGe),string:new lG}}var gGe=mGe;function yGe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var vGe=yGe,wGe=vGe;function xGe(e,t){var r=e.__data__;return wGe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var hO=xGe,bGe=hO;function _Ge(e){var t=bGe(this,e).delete(e);return this.size-=t?1:0,t}var SGe=_Ge,EGe=hO;function AGe(e){return EGe(this,e).get(e)}var TGe=AGe,kGe=hO;function CGe(e){return kGe(this,e).has(e)}var OGe=CGe,PGe=hO;function NGe(e,t){var r=PGe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var IGe=NGe,RGe=gGe,LGe=SGe,MGe=TGe,DGe=OGe,jGe=IGe;function g1(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}g1.prototype.clear=RGe;g1.prototype.delete=LGe;g1.prototype.get=MGe;g1.prototype.has=DGe;g1.prototype.set=jGe;var tF=g1,sfe=tF,$Ge="Expected a function";function rF(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError($Ge);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(rF.Cache||sfe),r}rF.Cache=sfe;var ofe=rF;const FGe=Hr(ofe);var BGe=ofe,UGe=500;function zGe(e){var t=BGe(e,function(n){return r.size===UGe&&r.clear(),n}),r=t.cache;return t}var VGe=zGe,WGe=VGe,HGe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,GGe=/\\(\\)?/g,qGe=WGe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(HGe,function(r,n,i,a){t.push(i?a.replace(GGe,"$1"):n||r)}),t}),KGe=qGe;function YGe(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var nF=YGe,cG=T2,XGe=nF,ZGe=po,JGe=d1,uG=cG?cG.prototype:void 0,fG=uG?uG.toString:void 0;function lfe(e){if(typeof e=="string")return e;if(ZGe(e))return XGe(e,lfe)+"";if(JGe(e))return fG?fG.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var QGe=lfe,eqe=QGe;function tqe(e){return e==null?"":eqe(e)}var cfe=tqe,rqe=po,nqe=Z8,iqe=KGe,aqe=cfe;function sqe(e,t){return rqe(e)?e:nqe(e,t)?[e]:iqe(aqe(e))}var ufe=sqe,oqe=d1;function lqe(e){if(typeof e=="string"||oqe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var pO=lqe,cqe=ufe,uqe=pO;function fqe(e,t){t=cqe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[uqe(t[r++])];return r&&r==n?e:void 0}var iF=fqe,dqe=iF;function hqe(e,t,r){var n=e==null?void 0:dqe(e,t);return n===void 0?r:n}var ffe=hqe;const qo=Hr(ffe);function pqe(e){return e==null}var mqe=pqe;const kr=Hr(mqe);var gqe=bd,yqe=po,vqe=_d,wqe="[object String]";function xqe(e){return typeof e=="string"||!yqe(e)&&vqe(e)&&gqe(e)==wqe}var bqe=xqe;const om=Hr(bqe);var dfe={exports:{}},cn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aF=Symbol.for("react.element"),sF=Symbol.for("react.portal"),mO=Symbol.for("react.fragment"),gO=Symbol.for("react.strict_mode"),yO=Symbol.for("react.profiler"),vO=Symbol.for("react.provider"),wO=Symbol.for("react.context"),_qe=Symbol.for("react.server_context"),xO=Symbol.for("react.forward_ref"),bO=Symbol.for("react.suspense"),_O=Symbol.for("react.suspense_list"),SO=Symbol.for("react.memo"),EO=Symbol.for("react.lazy"),Sqe=Symbol.for("react.offscreen"),hfe;hfe=Symbol.for("react.module.reference");function Ul(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aF:switch(e=e.type,e){case mO:case yO:case gO:case bO:case _O:return e;default:switch(e=e&&e.$$typeof,e){case _qe:case wO:case xO:case EO:case SO:case vO:return e;default:return t}}case sF:return t}}}cn.ContextConsumer=wO;cn.ContextProvider=vO;cn.Element=aF;cn.ForwardRef=xO;cn.Fragment=mO;cn.Lazy=EO;cn.Memo=SO;cn.Portal=sF;cn.Profiler=yO;cn.StrictMode=gO;cn.Suspense=bO;cn.SuspenseList=_O;cn.isAsyncMode=function(){return!1};cn.isConcurrentMode=function(){return!1};cn.isContextConsumer=function(e){return Ul(e)===wO};cn.isContextProvider=function(e){return Ul(e)===vO};cn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aF};cn.isForwardRef=function(e){return Ul(e)===xO};cn.isFragment=function(e){return Ul(e)===mO};cn.isLazy=function(e){return Ul(e)===EO};cn.isMemo=function(e){return Ul(e)===SO};cn.isPortal=function(e){return Ul(e)===sF};cn.isProfiler=function(e){return Ul(e)===yO};cn.isStrictMode=function(e){return Ul(e)===gO};cn.isSuspense=function(e){return Ul(e)===bO};cn.isSuspenseList=function(e){return Ul(e)===_O};cn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mO||e===yO||e===gO||e===bO||e===_O||e===Sqe||typeof e=="object"&&e!==null&&(e.$$typeof===EO||e.$$typeof===SO||e.$$typeof===vO||e.$$typeof===wO||e.$$typeof===xO||e.$$typeof===hfe||e.getModuleId!==void 0)};cn.typeOf=Ul;dfe.exports=cn;var Eqe=dfe.exports,Aqe=bd,Tqe=_d,kqe="[object Number]";function Cqe(e){return typeof e=="number"||Tqe(e)&&Aqe(e)==kqe}var pfe=Cqe;const Oqe=Hr(pfe);var Pqe=pfe;function Nqe(e){return Pqe(e)&&e!=+e}var Iqe=Nqe;const k2=Hr(Iqe);var Rs=function(t){return t===0?0:t>0?1:-1},_0=function(t){return om(t)&&t.indexOf("%")===t.length-1},ht=function(t){return Oqe(t)&&!k2(t)},Rqe=function(t){return kr(t)},la=function(t){return ht(t)||om(t)},Lqe=0,C2=function(t){var r=++Lqe;return"".concat(t||"").concat(r)},Ls=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ht(t)&&!om(t))return n;var a;if(_0(t)){var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return k2(a)&&(a=n),i&&a>r&&(a=r),a},ph=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Mqe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},lh=function(t,r){return ht(t)&&ht(r)?function(n){return t+n*(r-t)}:function(){return r}};function uM(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):qo(n,t))===r})}var Dqe=function(t,r){return ht(t)&&ht(r)?t-r:om(t)&&om(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Ny(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function fM(e){"@babel/helpers - typeof";return fM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fM(e)}var jqe=["viewBox","children"],$qe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dG=["points","pathLength"],cI={svg:jqe,polygon:dG,polyline:dG},oF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],kk=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),!h1(n))return null;var i={};return Object.keys(n).forEach(function(a){oF.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},Fqe=function(t,r,n){return function(i){return t(r,n,i),null}},lm=function(t,r,n){if(!h1(t)||fM(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var s=t[a];oF.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Fqe(s,r,n))}),i},Bqe=["children"],Uqe=["children"];function hG(e,t){if(e==null)return{};var r=zqe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zqe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var pG={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Wf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},mG=null,uI=null,lF=function e(t){if(t===mG&&Array.isArray(uI))return uI;var r=[];return C.Children.forEach(t,function(n){kr(n)||(Eqe.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),uI=r,mG=t,r};function Il(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Wf(i)}):n=[Wf(t)],lF(e).forEach(function(i){var a=qo(i,"type.displayName")||qo(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function Io(e,t){var r=Il(e,t);return r&&r[0]}var gG=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!ht(n)||n<=0||!ht(i)||i<=0)},Vqe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Wqe=function(t){return t&&t.type&&om(t.type)&&Vqe.indexOf(t.type)>=0},Hqe=function(t,r,n,i){var a,s=(a=cI==null?void 0:cI[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!sr(t)&&(i&&s.includes(r)||$qe.includes(r))||n&&oF.includes(r)},rr=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(C.isValidElement(t)&&(i=t.props),!h1(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;Hqe((o=i)===null||o===void 0?void 0:o[s],s,r,n)&&(a[s]=i[s])}),a},dM=function e(t,r){if(t===r)return!0;var n=C.Children.count(t);if(n!==C.Children.count(r))return!1;if(n===0)return!0;if(n===1)return yG(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=t[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!yG(a,s))return!1}return!0},yG=function(t,r){if(kr(t)&&kr(r))return!0;if(!kr(t)&&!kr(r)){var n=t.props||{},i=n.children,a=hG(n,Bqe),s=r.props||{},o=s.children,l=hG(s,Uqe);return i&&o?Ny(a,l)&&dM(i,o):!i&&!o?Ny(a,l):!1}return!1},vG=function(t,r){var n=[],i={};return lF(t).forEach(function(a,s){if(Wqe(a))n.push(a);else if(a){var o=Wf(a.type),l=r[o]||{},c=l.handler,u=l.once;if(c&&(!u||!i[o])){var f=c(a,o,s);n.push(f),i[o]=!0}}}),n},Gqe=function(t){var r=t&&t.type;return r&&pG[r]?pG[r]:null},qqe=function(t,r){return lF(r).indexOf(t)},Kqe=["children","width","height","viewBox","className","style","title","desc"];function hM(){return hM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hM.apply(this,arguments)}function Yqe(e,t){if(e==null)return{};var r=Xqe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xqe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pM(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,a=e.className,s=e.style,o=e.title,l=e.desc,c=Yqe(e,Kqe),u=i||{width:r,height:n,x:0,y:0},f=_r("recharts-surface",a);return he.createElement("svg",hM({},rr(c,!0,"svg"),{className:f,width:r,height:n,style:s,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),he.createElement("title",null,o),he.createElement("desc",null,l),t)}var Zqe=["children","className"];function mM(){return mM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mM.apply(this,arguments)}function Jqe(e,t){if(e==null)return{};var r=Qqe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qqe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var on=he.forwardRef(function(e,t){var r=e.children,n=e.className,i=Jqe(e,Zqe),a=_r("recharts-layer",n);return he.createElement("g",mM({className:a},rr(i,!0),{ref:t}),r)}),Rc=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function eKe(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}var tKe=eKe,rKe=tKe;function nKe(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:rKe(e,t,r)}var iKe=nKe,aKe="\\ud800-\\udfff",sKe="\\u0300-\\u036f",oKe="\\ufe20-\\ufe2f",lKe="\\u20d0-\\u20ff",cKe=sKe+oKe+lKe,uKe="\\ufe0e\\ufe0f",fKe="\\u200d",dKe=RegExp("["+fKe+aKe+cKe+uKe+"]");function hKe(e){return dKe.test(e)}var mfe=hKe;function pKe(e){return e.split("")}var mKe=pKe,gfe="\\ud800-\\udfff",gKe="\\u0300-\\u036f",yKe="\\ufe20-\\ufe2f",vKe="\\u20d0-\\u20ff",wKe=gKe+yKe+vKe,xKe="\\ufe0e\\ufe0f",bKe="["+gfe+"]",gM="["+wKe+"]",yM="\\ud83c[\\udffb-\\udfff]",_Ke="(?:"+gM+"|"+yM+")",yfe="[^"+gfe+"]",vfe="(?:\\ud83c[\\udde6-\\uddff]){2}",wfe="[\\ud800-\\udbff][\\udc00-\\udfff]",SKe="\\u200d",xfe=_Ke+"?",bfe="["+xKe+"]?",EKe="(?:"+SKe+"(?:"+[yfe,vfe,wfe].join("|")+")"+bfe+xfe+")*",AKe=bfe+xfe+EKe,TKe="(?:"+[yfe+gM+"?",gM,vfe,wfe,bKe].join("|")+")",kKe=RegExp(yM+"(?="+yM+")|"+TKe+AKe,"g");function CKe(e){return e.match(kKe)||[]}var OKe=CKe,PKe=mKe,NKe=mfe,IKe=OKe;function RKe(e){return NKe(e)?IKe(e):PKe(e)}var LKe=RKe,MKe=iKe,DKe=mfe,jKe=LKe,$Ke=cfe;function FKe(e){return function(t){t=$Ke(t);var r=DKe(t)?jKe(t):void 0,n=r?r[0]:t.charAt(0),i=r?MKe(r,1).join(""):t.slice(1);return n[e]()+i}}var BKe=FKe,UKe=BKe,zKe=UKe("toUpperCase"),VKe=zKe;const AO=Hr(VKe);function An(e){return function(){return e}}const _fe=Math.cos,Ck=Math.sin,qc=Math.sqrt,Ok=Math.PI,TO=2*Ok,vM=Math.PI,wM=2*vM,r0=1e-6,WKe=wM-r0;function Sfe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function HKe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Sfe;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class GKe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Sfe:HKe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=n-t,c=i-r,u=s-t,f=o-r,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(d>r0)if(!(Math.abs(f*l-c*u)>r0)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-s,m=i-o,p=l*l+c*c,y=h*h+m*m,g=Math.sqrt(p),w=Math.sqrt(d),v=a*Math.tan((vM-Math.acos((p+d-y)/(2*g*w)))/2),x=v/w,b=v/g;Math.abs(x-1)>r0&&this._append`L${t+x*u},${r+x*f}`,this._append`A${a},${a},0,0,${+(f*h>u*m)},${this._x1=t+b*l},${this._y1=r+b*c}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),l=n*Math.sin(i),c=t+o,u=r+l,f=1^s,d=s?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>r0||Math.abs(this._y1-u)>r0)&&this._append`L${c},${u}`,n&&(d<0&&(d=d%wM+wM),d>WKe?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=c},${this._y1=u}`:d>r0&&this._append`A${n},${n},0,${+(d>=vM)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function cF(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new GKe(t)}function uF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Efe(e){this._context=e}Efe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function kO(e){return new Efe(e)}function Afe(e){return e[0]}function Tfe(e){return e[1]}function kfe(e,t){var r=An(!0),n=null,i=kO,a=null,s=cF(o);e=typeof e=="function"?e:e===void 0?Afe:An(e),t=typeof t=="function"?t:t===void 0?Tfe:An(t);function o(l){var c,u=(l=uF(l)).length,f,d=!1,h;for(n==null&&(a=i(h=s())),c=0;c<=u;++c)!(c<u&&r(f=l[c],c,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+e(f,c,l),+t(f,c,l));if(h)return a=null,h+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:An(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:An(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:An(!!l),o):r},o.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),o):i},o.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),o):n},o}function kE(e,t,r){var n=null,i=An(!0),a=null,s=kO,o=null,l=cF(c);e=typeof e=="function"?e:e===void 0?Afe:An(+e),t=typeof t=="function"?t:An(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Tfe:An(+r);function c(f){var d,h,m,p=(f=uF(f)).length,y,g=!1,w,v=new Array(p),x=new Array(p);for(a==null&&(o=s(w=l())),d=0;d<=p;++d){if(!(d<p&&i(y=f[d],d,f))===g)if(g=!g)h=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=d-1;m>=h;--m)o.point(v[m],x[m]);o.lineEnd(),o.areaEnd()}g&&(v[d]=+e(y,d,f),x[d]=+t(y,d,f),o.point(n?+n(y,d,f):v[d],r?+r(y,d,f):x[d]))}if(w)return o=null,w+""||null}function u(){return kfe().defined(i).curve(s).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:An(+f),n=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:An(+f),c):e},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:An(+f),c):n},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:An(+f),r=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:An(+f),c):t},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:An(+f),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:An(!!f),c):i},c.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),c):s},c.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),c):a},c}class Cfe{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function qKe(e){return new Cfe(e,!0)}function KKe(e){return new Cfe(e,!1)}const fF={draw(e,t){const r=qc(t/Ok);e.moveTo(r,0),e.arc(0,0,r,0,TO)}},YKe={draw(e,t){const r=qc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Ofe=qc(1/3),XKe=Ofe*2,ZKe={draw(e,t){const r=qc(t/XKe),n=r*Ofe;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},JKe={draw(e,t){const r=qc(t),n=-r/2;e.rect(n,n,r,r)}},QKe=.8908130915292852,Pfe=Ck(Ok/10)/Ck(7*Ok/10),eYe=Ck(TO/10)*Pfe,tYe=-_fe(TO/10)*Pfe,rYe={draw(e,t){const r=qc(t*QKe),n=eYe*r,i=tYe*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=TO*a/5,o=_fe(s),l=Ck(s);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*i,l*n+o*i)}e.closePath()}},fI=qc(3),nYe={draw(e,t){const r=-qc(t/(fI*3));e.moveTo(0,r*2),e.lineTo(-fI*r,-r),e.lineTo(fI*r,-r),e.closePath()}},ll=-.5,cl=qc(3)/2,xM=1/qc(12),iYe=(xM/2+1)*3,aYe={draw(e,t){const r=qc(t/iYe),n=r/2,i=r*xM,a=n,s=r*xM+r,o=-a,l=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(ll*n-cl*i,cl*n+ll*i),e.lineTo(ll*a-cl*s,cl*a+ll*s),e.lineTo(ll*o-cl*l,cl*o+ll*l),e.lineTo(ll*n+cl*i,ll*i-cl*n),e.lineTo(ll*a+cl*s,ll*s-cl*a),e.lineTo(ll*o+cl*l,ll*l-cl*o),e.closePath()}};function sYe(e,t){let r=null,n=cF(i);e=typeof e=="function"?e:An(e||fF),t=typeof t=="function"?t:An(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:An(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:An(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Pk(){}function Nk(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Nfe(e){this._context=e}Nfe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Nk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Nk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oYe(e){return new Nfe(e)}function Ife(e){this._context=e}Ife.prototype={areaStart:Pk,areaEnd:Pk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Nk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lYe(e){return new Ife(e)}function Rfe(e){this._context=e}Rfe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Nk(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cYe(e){return new Rfe(e)}function Lfe(e){this._context=e}Lfe.prototype={areaStart:Pk,areaEnd:Pk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uYe(e){return new Lfe(e)}function wG(e){return e<0?-1:1}function xG(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(wG(a)+wG(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function bG(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dI(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function Ik(e){this._context=e}Ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dI(this,this._t0,bG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dI(this,bG(this,r=xG(this,e,t)),r);break;default:dI(this,this._t0,r=xG(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Mfe(e){this._context=new Dfe(e)}(Mfe.prototype=Object.create(Ik.prototype)).point=function(e,t){Ik.prototype.point.call(this,t,e)};function Dfe(e){this._context=e}Dfe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function fYe(e){return new Ik(e)}function dYe(e){return new Mfe(e)}function jfe(e){this._context=e}jfe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=_G(e),i=_G(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _G(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function hYe(e){return new jfe(e)}function CO(e,t){this._context=e,this._t=t}CO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function pYe(e){return new CO(e,.5)}function mYe(e){return new CO(e,0)}function gYe(e){return new CO(e,1)}function mv(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function bM(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function yYe(e,t){return e[t]}function vYe(e){const t=[];return t.key=e,t}function wYe(){var e=An([]),t=bM,r=mv,n=yYe;function i(a){var s=Array.from(e.apply(this,arguments),vYe),o,l=s.length,c=-1,u;for(const f of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+n(f,s[o].key,c,a)]).data=f;for(o=0,u=uF(t(s));o<l;++o)s[u[o]].index=o;return r(s,u),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:An(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:An(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?bM:typeof a=="function"?a:An(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??mv,i):r},i}function xYe(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}mv(e,t)}}function bYe(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}mv(e,t)}}function _Ye(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,l=0,c=0;o<s;++o){for(var u=e[t[o]],f=u[n][1]||0,d=u[n-1][1]||0,h=(f-d)/2,m=0;m<o;++m){var p=e[t[m]],y=p[n][1]||0,g=p[n-1][1]||0;h+=y-g}l+=f,c+=h*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=c/l)}i[n-1][1]+=i[n-1][0]=r,mv(e,t)}}function Kb(e){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kb(e)}var SYe=["type","size","sizeType"];function _M(){return _M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_M.apply(this,arguments)}function SG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function EG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SG(Object(r),!0).forEach(function(n){EYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EYe(e,t,r){return t=AYe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AYe(e){var t=TYe(e,"string");return Kb(t)=="symbol"?t:t+""}function TYe(e,t){if(Kb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kYe(e,t){if(e==null)return{};var r=CYe(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CYe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $fe={symbolCircle:fF,symbolCross:YKe,symbolDiamond:ZKe,symbolSquare:JKe,symbolStar:rYe,symbolTriangle:nYe,symbolWye:aYe},OYe=Math.PI/180,PYe=function(t){var r="symbol".concat(AO(t));return $fe[r]||fF},NYe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*OYe;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},IYe=function(t,r){$fe["symbol".concat(AO(t))]=r},dF=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,a=i===void 0?64:i,s=t.sizeType,o=s===void 0?"area":s,l=kYe(t,SYe),c=EG(EG({},l),{},{type:n,size:a,sizeType:o}),u=function(){var y=PYe(n),g=sYe().type(y).size(NYe(a,o,n));return g()},f=c.className,d=c.cx,h=c.cy,m=rr(c,!0);return d===+d&&h===+h&&a===+a?he.createElement("path",_M({},m,{className:_r("recharts-symbols",f),transform:"translate(".concat(d,", ").concat(h,")"),d:u()})):null};dF.registerSymbol=IYe;function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function SM(){return SM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SM.apply(this,arguments)}function AG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RYe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AG(Object(r),!0).forEach(function(n){Yb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LYe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MYe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bfe(n.key),n)}}function DYe(e,t,r){return t&&MYe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jYe(e,t,r){return t=Rk(t),$Ye(e,Ffe()?Reflect.construct(t,r||[],Rk(e).constructor):t.apply(e,r))}function $Ye(e,t){if(t&&(gv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FYe(e)}function FYe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ffe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ffe=function(){return!!e})()}function Rk(e){return Rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rk(e)}function BYe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EM(e,t)}function EM(e,t){return EM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},EM(e,t)}function Yb(e,t,r){return t=Bfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bfe(e){var t=UYe(e,"string");return gv(t)=="symbol"?t:t+""}function UYe(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ul=32,hF=function(e){function t(){return LYe(this,t),jYe(this,t,arguments)}return BYe(t,e),DYe(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=ul/2,s=ul/6,o=ul/3,l=n.inactive?i:n.color;if(n.type==="plainline")return he.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:ul,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return he.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(ul,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return he.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ul/8,"h").concat(ul,"v").concat(ul*3/4,"h").concat(-ul,"z"),className:"recharts-legend-icon"});if(he.isValidElement(n.legendIcon)){var c=RYe({},n);return delete c.legendIcon,he.cloneElement(n.legendIcon,c)}return he.createElement(dF,{fill:l,cx:a,cy:a,size:ul,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:ul,height:ul},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,m){var p=h.formatter||l,y=_r(Yb(Yb({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var g=sr(h.value)?null:h.value;Rc(!sr(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=h.inactive?c:h.color;return he.createElement("li",SM({className:y,style:f,key:"legend-item-".concat(m)},lm(n.props,h,m)),he.createElement(pM,{width:s,height:s,viewBox:u,style:d},n.renderIcon(h)),he.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},p?p(g,h,m):g))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return he.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(C.PureComponent);Yb(hF,"displayName","Legend");Yb(hF,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var zYe=dO;function VYe(){this.__data__=new zYe,this.size=0}var WYe=VYe;function HYe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var GYe=HYe;function qYe(e){return this.__data__.get(e)}var KYe=qYe;function YYe(e){return this.__data__.has(e)}var XYe=YYe,ZYe=dO,JYe=eF,QYe=tF,eXe=200;function tXe(e,t){var r=this.__data__;if(r instanceof ZYe){var n=r.__data__;if(!JYe||n.length<eXe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new QYe(n)}return r.set(e,t),this.size=r.size,this}var rXe=tXe,nXe=dO,iXe=WYe,aXe=GYe,sXe=KYe,oXe=XYe,lXe=rXe;function y1(e){var t=this.__data__=new nXe(e);this.size=t.size}y1.prototype.clear=iXe;y1.prototype.delete=aXe;y1.prototype.get=sXe;y1.prototype.has=oXe;y1.prototype.set=lXe;var Ufe=y1,cXe="__lodash_hash_undefined__";function uXe(e){return this.__data__.set(e,cXe),this}var fXe=uXe;function dXe(e){return this.__data__.has(e)}var hXe=dXe,pXe=tF,mXe=fXe,gXe=hXe;function Lk(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new pXe;++t<r;)this.add(e[t])}Lk.prototype.add=Lk.prototype.push=mXe;Lk.prototype.has=gXe;var zfe=Lk;function yXe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Vfe=yXe;function vXe(e,t){return e.has(t)}var Wfe=vXe,wXe=zfe,xXe=Vfe,bXe=Wfe,_Xe=1,SXe=2;function EXe(e,t,r,n,i,a){var s=r&_Xe,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var f=-1,d=!0,h=r&SXe?new wXe:void 0;for(a.set(e,t),a.set(t,e);++f<o;){var m=e[f],p=t[f];if(n)var y=s?n(p,m,f,t,e,a):n(m,p,f,e,t,a);if(y!==void 0){if(y)continue;d=!1;break}if(h){if(!xXe(t,function(g,w){if(!bXe(h,w)&&(m===g||i(m,g,r,n,a)))return h.push(w)})){d=!1;break}}else if(!(m===p||i(m,p,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var Hfe=EXe,AXe=qu,TXe=AXe.Uint8Array,kXe=TXe;function CXe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var OXe=CXe;function PXe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var pF=PXe,TG=T2,kG=kXe,NXe=Q8,IXe=Hfe,RXe=OXe,LXe=pF,MXe=1,DXe=2,jXe="[object Boolean]",$Xe="[object Date]",FXe="[object Error]",BXe="[object Map]",UXe="[object Number]",zXe="[object RegExp]",VXe="[object Set]",WXe="[object String]",HXe="[object Symbol]",GXe="[object ArrayBuffer]",qXe="[object DataView]",CG=TG?TG.prototype:void 0,hI=CG?CG.valueOf:void 0;function KXe(e,t,r,n,i,a,s){switch(r){case qXe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case GXe:return!(e.byteLength!=t.byteLength||!a(new kG(e),new kG(t)));case jXe:case $Xe:case UXe:return NXe(+e,+t);case FXe:return e.name==t.name&&e.message==t.message;case zXe:case WXe:return e==t+"";case BXe:var o=RXe;case VXe:var l=n&MXe;if(o||(o=LXe),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=DXe,s.set(e,t);var u=IXe(o(e),o(t),n,i,a,s);return s.delete(e),u;case HXe:if(hI)return hI.call(e)==hI.call(t)}return!1}var YXe=KXe;function XXe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Gfe=XXe,ZXe=Gfe,JXe=po;function QXe(e,t,r){var n=t(e);return JXe(e)?n:ZXe(n,r(e))}var eZe=QXe;function tZe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}var rZe=tZe;function nZe(){return[]}var iZe=nZe,aZe=rZe,sZe=iZe,oZe=Object.prototype,lZe=oZe.propertyIsEnumerable,OG=Object.getOwnPropertySymbols,cZe=OG?function(e){return e==null?[]:(e=Object(e),aZe(OG(e),function(t){return lZe.call(e,t)}))}:sZe,uZe=cZe;function fZe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var dZe=fZe,hZe=bd,pZe=_d,mZe="[object Arguments]";function gZe(e){return pZe(e)&&hZe(e)==mZe}var yZe=gZe,PG=yZe,vZe=_d,qfe=Object.prototype,wZe=qfe.hasOwnProperty,xZe=qfe.propertyIsEnumerable,bZe=PG(function(){return arguments}())?PG:function(e){return vZe(e)&&wZe.call(e,"callee")&&!xZe.call(e,"callee")},mF=bZe,Mk={exports:{}};function _Ze(){return!1}var SZe=_Ze;Mk.exports;(function(e,t){var r=qu,n=SZe,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?r.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;e.exports=c})(Mk,Mk.exports);var Kfe=Mk.exports,EZe=9007199254740991,AZe=/^(?:0|[1-9]\d*)$/;function TZe(e,t){var r=typeof e;return t=t??EZe,!!t&&(r=="number"||r!="symbol"&&AZe.test(e))&&e>-1&&e%1==0&&e<t}var gF=TZe,kZe=9007199254740991;function CZe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kZe}var yF=CZe,OZe=bd,PZe=yF,NZe=_d,IZe="[object Arguments]",RZe="[object Array]",LZe="[object Boolean]",MZe="[object Date]",DZe="[object Error]",jZe="[object Function]",$Ze="[object Map]",FZe="[object Number]",BZe="[object Object]",UZe="[object RegExp]",zZe="[object Set]",VZe="[object String]",WZe="[object WeakMap]",HZe="[object ArrayBuffer]",GZe="[object DataView]",qZe="[object Float32Array]",KZe="[object Float64Array]",YZe="[object Int8Array]",XZe="[object Int16Array]",ZZe="[object Int32Array]",JZe="[object Uint8Array]",QZe="[object Uint8ClampedArray]",eJe="[object Uint16Array]",tJe="[object Uint32Array]",Ln={};Ln[qZe]=Ln[KZe]=Ln[YZe]=Ln[XZe]=Ln[ZZe]=Ln[JZe]=Ln[QZe]=Ln[eJe]=Ln[tJe]=!0;Ln[IZe]=Ln[RZe]=Ln[HZe]=Ln[LZe]=Ln[GZe]=Ln[MZe]=Ln[DZe]=Ln[jZe]=Ln[$Ze]=Ln[FZe]=Ln[BZe]=Ln[UZe]=Ln[zZe]=Ln[VZe]=Ln[WZe]=!1;function rJe(e){return NZe(e)&&PZe(e.length)&&!!Ln[OZe(e)]}var nJe=rJe;function iJe(e){return function(t){return e(t)}}var Yfe=iJe,Dk={exports:{}};Dk.exports;(function(e,t){var r=nfe,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a&&r.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(Dk,Dk.exports);var aJe=Dk.exports,sJe=nJe,oJe=Yfe,NG=aJe,IG=NG&&NG.isTypedArray,lJe=IG?oJe(IG):sJe,Xfe=lJe,cJe=dZe,uJe=mF,fJe=po,dJe=Kfe,hJe=gF,pJe=Xfe,mJe=Object.prototype,gJe=mJe.hasOwnProperty;function yJe(e,t){var r=fJe(e),n=!r&&uJe(e),i=!r&&!n&&dJe(e),a=!r&&!n&&!i&&pJe(e),s=r||n||i||a,o=s?cJe(e.length,String):[],l=o.length;for(var c in e)(t||gJe.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||hJe(c,l)))&&o.push(c);return o}var vJe=yJe,wJe=Object.prototype;function xJe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||wJe;return e===r}var bJe=xJe;function _Je(e,t){return function(r){return e(t(r))}}var Zfe=_Je,SJe=Zfe,EJe=SJe(Object.keys,Object),AJe=EJe,TJe=bJe,kJe=AJe,CJe=Object.prototype,OJe=CJe.hasOwnProperty;function PJe(e){if(!TJe(e))return kJe(e);var t=[];for(var r in Object(e))OJe.call(e,r)&&r!="constructor"&&t.push(r);return t}var NJe=PJe,IJe=J8,RJe=yF;function LJe(e){return e!=null&&RJe(e.length)&&!IJe(e)}var O2=LJe,MJe=vJe,DJe=NJe,jJe=O2;function $Je(e){return jJe(e)?MJe(e):DJe(e)}var OO=$Je,FJe=eZe,BJe=uZe,UJe=OO;function zJe(e){return FJe(e,UJe,BJe)}var VJe=zJe,RG=VJe,WJe=1,HJe=Object.prototype,GJe=HJe.hasOwnProperty;function qJe(e,t,r,n,i,a){var s=r&WJe,o=RG(e),l=o.length,c=RG(t),u=c.length;if(l!=u&&!s)return!1;for(var f=l;f--;){var d=o[f];if(!(s?d in t:GJe.call(t,d)))return!1}var h=a.get(e),m=a.get(t);if(h&&m)return h==t&&m==e;var p=!0;a.set(e,t),a.set(t,e);for(var y=s;++f<l;){d=o[f];var g=e[d],w=t[d];if(n)var v=s?n(w,g,d,t,e,a):n(g,w,d,e,t,a);if(!(v===void 0?g===w||i(g,w,r,n,a):v)){p=!1;break}y||(y=d=="constructor")}if(p&&!y){var x=e.constructor,b=t.constructor;x!=b&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof b=="function"&&b instanceof b)&&(p=!1)}return a.delete(e),a.delete(t),p}var KJe=qJe,YJe=Cm,XJe=qu,ZJe=YJe(XJe,"DataView"),JJe=ZJe,QJe=Cm,eQe=qu,tQe=QJe(eQe,"Promise"),rQe=tQe,nQe=Cm,iQe=qu,aQe=nQe(iQe,"Set"),Jfe=aQe,sQe=Cm,oQe=qu,lQe=sQe(oQe,"WeakMap"),cQe=lQe,AM=JJe,TM=eF,kM=rQe,CM=Jfe,OM=cQe,Qfe=bd,v1=afe,LG="[object Map]",uQe="[object Object]",MG="[object Promise]",DG="[object Set]",jG="[object WeakMap]",$G="[object DataView]",fQe=v1(AM),dQe=v1(TM),hQe=v1(kM),pQe=v1(CM),mQe=v1(OM),n0=Qfe;(AM&&n0(new AM(new ArrayBuffer(1)))!=$G||TM&&n0(new TM)!=LG||kM&&n0(kM.resolve())!=MG||CM&&n0(new CM)!=DG||OM&&n0(new OM)!=jG)&&(n0=function(e){var t=Qfe(e),r=t==uQe?e.constructor:void 0,n=r?v1(r):"";if(n)switch(n){case fQe:return $G;case dQe:return LG;case hQe:return MG;case pQe:return DG;case mQe:return jG}return t});var gQe=n0,pI=Ufe,yQe=Hfe,vQe=YXe,wQe=KJe,FG=gQe,BG=po,UG=Kfe,xQe=Xfe,bQe=1,zG="[object Arguments]",VG="[object Array]",CE="[object Object]",_Qe=Object.prototype,WG=_Qe.hasOwnProperty;function SQe(e,t,r,n,i,a){var s=BG(e),o=BG(t),l=s?VG:FG(e),c=o?VG:FG(t);l=l==zG?CE:l,c=c==zG?CE:c;var u=l==CE,f=c==CE,d=l==c;if(d&&UG(e)){if(!UG(t))return!1;s=!0,u=!1}if(d&&!u)return a||(a=new pI),s||xQe(e)?yQe(e,t,r,n,i,a):vQe(e,t,l,r,n,i,a);if(!(r&bQe)){var h=u&&WG.call(e,"__wrapped__"),m=f&&WG.call(t,"__wrapped__");if(h||m){var p=h?e.value():e,y=m?t.value():t;return a||(a=new pI),i(p,y,r,n,a)}}return d?(a||(a=new pI),wQe(e,t,r,n,i,a)):!1}var EQe=SQe,AQe=EQe,HG=_d;function ede(e,t,r,n,i){return e===t?!0:e==null||t==null||!HG(e)&&!HG(t)?e!==e&&t!==t:AQe(e,t,r,n,ede,i)}var vF=ede,TQe=Ufe,kQe=vF,CQe=1,OQe=2;function PQe(e,t,r,n){var i=r.length,a=i,s=!n;if(e==null)return!a;for(e=Object(e);i--;){var o=r[i];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){o=r[i];var l=o[0],c=e[l],u=o[1];if(s&&o[2]){if(c===void 0&&!(l in e))return!1}else{var f=new TQe;if(n)var d=n(c,u,l,e,t,f);if(!(d===void 0?kQe(u,c,CQe|OQe,n,f):d))return!1}}return!0}var NQe=PQe,IQe=xp;function RQe(e){return e===e&&!IQe(e)}var tde=RQe,LQe=tde,MQe=OO;function DQe(e){for(var t=MQe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,LQe(i)]}return t}var jQe=DQe;function $Qe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var rde=$Qe,FQe=NQe,BQe=jQe,UQe=rde;function zQe(e){var t=BQe(e);return t.length==1&&t[0][2]?UQe(t[0][0],t[0][1]):function(r){return r===e||FQe(r,e,t)}}var VQe=zQe;function WQe(e,t){return e!=null&&t in Object(e)}var HQe=WQe,GQe=ufe,qQe=mF,KQe=po,YQe=gF,XQe=yF,ZQe=pO;function JQe(e,t,r){t=GQe(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var s=ZQe(t[n]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&XQe(i)&&YQe(s,i)&&(KQe(e)||qQe(e)))}var QQe=JQe,eet=HQe,tet=QQe;function ret(e,t){return e!=null&&tet(e,t,eet)}var net=ret,iet=vF,aet=ffe,set=net,oet=Z8,cet=tde,uet=rde,fet=pO,det=1,het=2;function pet(e,t){return oet(e)&&cet(t)?uet(fet(e),t):function(r){var n=aet(r,e);return n===void 0&&n===t?set(r,e):iet(t,n,det|het)}}var met=pet;function get(e){return e}var w1=get;function yet(e){return function(t){return t==null?void 0:t[e]}}var vet=yet,wet=iF;function xet(e){return function(t){return wet(t,e)}}var bet=xet,_et=vet,Eet=bet,Aet=Z8,Tet=pO;function ket(e){return Aet(e)?_et(Tet(e)):Eet(e)}var Cet=ket,Oet=VQe,Pet=met,Net=w1,Iet=po,Ret=Cet;function Let(e){return typeof e=="function"?e:e==null?Net:typeof e=="object"?Iet(e)?Pet(e[0],e[1]):Oet(e):Ret(e)}var Ku=Let;function Met(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var nde=Met;function Det(e){return e!==e}var jet=Det;function $et(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var Fet=$et,Bet=nde,Uet=jet,zet=Fet;function Vet(e,t,r){return t===t?zet(e,t,r):Bet(e,Uet,r)}var Wet=Vet,Het=Wet;function Get(e,t){var r=e==null?0:e.length;return!!r&&Het(e,t,0)>-1}var qet=Get;function Ket(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Yet=Ket;function Xet(){}var Zet=Xet,mI=Jfe,Jet=Zet,Qet=pF,ett=1/0,ttt=mI&&1/Qet(new mI([,-0]))[1]==ett?function(e){return new mI(e)}:Jet,rtt=ttt,ntt=zfe,itt=qet,att=Yet,stt=Wfe,ott=rtt,ltt=pF,ctt=200;function utt(e,t,r){var n=-1,i=itt,a=e.length,s=!0,o=[],l=o;if(r)s=!1,i=att;else if(a>=ctt){var c=t?null:ott(e);if(c)return ltt(c);s=!1,i=stt,l=new ntt}else l=t?[]:o;e:for(;++n<a;){var u=e[n],f=t?t(u):u;if(u=r||u!==0?u:0,s&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),o.push(u)}else i(l,f,r)||(l!==o&&l.push(f),o.push(u))}return o}var ftt=utt,dtt=Ku,htt=ftt;function ptt(e,t){return e&&e.length?htt(e,dtt(t)):[]}var mtt=ptt;const GG=Hr(mtt);function ide(e,t,r){return t===!0?GG(e,r):sr(t)?GG(e,t):e}function yv(e){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(e)}var gtt=["ref"];function qG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qG(Object(r),!0).forEach(function(n){PO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ytt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sde(n.key),n)}}function vtt(e,t,r){return t&&KG(e.prototype,t),r&&KG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wtt(e,t,r){return t=jk(t),xtt(e,ade()?Reflect.construct(t,r||[],jk(e).constructor):t.apply(e,r))}function xtt(e,t){if(t&&(yv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return btt(e)}function btt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ade(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ade=function(){return!!e})()}function jk(e){return jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jk(e)}function _tt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PM(e,t)}function PM(e,t){return PM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PM(e,t)}function PO(e,t,r){return t=sde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sde(e){var t=Stt(e,"string");return yv(t)=="symbol"?t:t+""}function Stt(e,t){if(yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ett(e,t){if(e==null)return{};var r=Att(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Att(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ttt(e){return e.value}function ktt(e,t){if(he.isValidElement(e))return he.cloneElement(e,t);if(typeof e=="function")return he.createElement(e,t);t.ref;var r=Ett(t,gtt);return he.createElement(hF,r)}var YG=1,Iy=function(e){function t(){var r;ytt(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=wtt(this,t,[].concat(i)),PO(r,"lastBoundingBox",{width:-1,height:-1}),r}return _tt(t,e),vtt(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>YG||Math.abs(i.height-this.lastBoundingBox.height)>YG)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,f,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();f={left:((c||0)-h.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();d={top:((u||0)-m.height)/2}}else d=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return yf(yf({},f),d)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,f=yf(yf({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return he.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},ktt(a,yf(yf({},this.props),{},{payload:ide(u,c,Ttt)})))}}],[{key:"getWithHeight",value:function(n,i){var a=yf(yf({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&ht(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])}(C.PureComponent);PO(Iy,"displayName","Legend");PO(Iy,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var XG=T2,Ctt=mF,Ott=po,ZG=XG?XG.isConcatSpreadable:void 0;function Ptt(e){return Ott(e)||Ctt(e)||!!(ZG&&e&&e[ZG])}var Ntt=Ptt,Itt=Gfe,Rtt=Ntt;function ode(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=Rtt),i||(i=[]);++a<s;){var o=e[a];t>0&&r(o)?t>1?ode(o,t-1,r,n,i):Itt(i,o):n||(i[i.length]=o)}return i}var lde=ode;function Ltt(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),o=s.length;o--;){var l=s[e?o:++i];if(r(a[l],l,a)===!1)break}return t}}var Mtt=Ltt,Dtt=Mtt,jtt=Dtt(),$tt=jtt,Ftt=$tt,Btt=OO;function Utt(e,t){return e&&Ftt(e,t,Btt)}var cde=Utt,ztt=O2;function Vtt(e,t){return function(r,n){if(r==null)return r;if(!ztt(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Object(r);(t?a--:++a<i)&&n(s[a],a,s)!==!1;);return r}}var Wtt=Vtt,Htt=cde,Gtt=Wtt,qtt=Gtt(Htt),wF=qtt,Ktt=wF,Ytt=O2;function Xtt(e,t){var r=-1,n=Ytt(e)?Array(e.length):[];return Ktt(e,function(i,a,s){n[++r]=t(i,a,s)}),n}var ude=Xtt;function Ztt(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Jtt=Ztt,JG=d1;function Qtt(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,a=JG(e),s=t!==void 0,o=t===null,l=t===t,c=JG(t);if(!o&&!c&&!a&&e>t||a&&s&&l&&!o&&!c||n&&s&&l||!r&&l||!i)return 1;if(!n&&!a&&!c&&e<t||c&&r&&i&&!n&&!a||o&&r&&i||!s&&i||!l)return-1}return 0}var ert=Qtt,trt=ert;function rrt(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,o=r.length;++n<s;){var l=trt(i[n],a[n]);if(l){if(n>=o)return l;var c=r[n];return l*(c=="desc"?-1:1)}}return e.index-t.index}var nrt=rrt,gI=nF,irt=iF,art=Ku,srt=ude,ort=Jtt,lrt=Yfe,crt=nrt,urt=w1,frt=po;function drt(e,t,r){t.length?t=gI(t,function(a){return frt(a)?function(s){return irt(s,a.length===1?a[0]:a)}:a}):t=[urt];var n=-1;t=gI(t,lrt(art));var i=srt(e,function(a,s,o){var l=gI(t,function(c){return c(a)});return{criteria:l,index:++n,value:a}});return ort(i,function(a,s){return crt(a,s,r)})}var hrt=drt;function prt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var mrt=prt,grt=mrt,QG=Math.max;function yrt(e,t,r){return t=QG(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=QG(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=r(s),grt(e,this,o)}}var vrt=yrt;function wrt(e){return function(){return e}}var xrt=wrt,brt=Cm,_rt=function(){try{var e=brt(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fde=_rt,Srt=xrt,eq=fde,Ert=w1,Art=eq?function(e,t){return eq(e,"toString",{configurable:!0,enumerable:!1,value:Srt(t),writable:!0})}:Ert,Trt=Art,krt=800,Crt=16,Ort=Date.now;function Prt(e){var t=0,r=0;return function(){var n=Ort(),i=Crt-(n-r);if(r=n,i>0){if(++t>=krt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Nrt=Prt,Irt=Trt,Rrt=Nrt,Lrt=Rrt(Irt),Mrt=Lrt,Drt=w1,jrt=vrt,$rt=Mrt;function Frt(e,t){return $rt(jrt(e,t,Drt),e+"")}var Brt=Frt,Urt=Q8,zrt=O2,Vrt=gF,Wrt=xp;function Hrt(e,t,r){if(!Wrt(r))return!1;var n=typeof t;return(n=="number"?zrt(r)&&Vrt(t,r.length):n=="string"&&t in r)?Urt(r[t],e):!1}var NO=Hrt,Grt=lde,qrt=hrt,Krt=Brt,tq=NO,Yrt=Krt(function(e,t){if(e==null)return[];var r=t.length;return r>1&&tq(e,t[0],t[1])?t=[]:r>2&&tq(t[0],t[1],t[2])&&(t=[t[0]]),qrt(e,Grt(t,1),[])}),Xrt=Yrt;const xF=Hr(Xrt);function Xb(e){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xb(e)}function NM(){return NM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NM.apply(this,arguments)}function Zrt(e,t){return tnt(e)||ent(e,t)||Qrt(e,t)||Jrt()}function Jrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qrt(e,t){if(e){if(typeof e=="string")return rq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rq(e,t)}}function rq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ent(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function tnt(e){if(Array.isArray(e))return e}function nq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nq(Object(r),!0).forEach(function(n){rnt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rnt(e,t,r){return t=nnt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nnt(e){var t=int(e,"string");return Xb(t)=="symbol"?t:t+""}function int(e,t){if(Xb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ant(e){return Array.isArray(e)&&la(e[0])&&la(e[1])?e.join(" ~ "):e}var snt=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,a=i===void 0?{}:i,s=t.itemStyle,o=s===void 0?{}:s,l=t.labelStyle,c=l===void 0?{}:l,u=t.payload,f=t.formatter,d=t.itemSorter,h=t.wrapperClassName,m=t.labelClassName,p=t.label,y=t.labelFormatter,g=t.accessibilityLayer,w=g===void 0?!1:g,v=function(){if(u&&u.length){var N={padding:0,margin:0},V=(d?xF(u,d):u).map(function(B,G){if(B.type==="none")return null;var Z=yI({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},o),J=B.formatter||f||ant,Y=B.value,U=B.name,se=Y,ue=U;if(J&&se!=null&&ue!=null){var I=J(Y,U,B,G,u);if(Array.isArray(I)){var z=Zrt(I,2);se=z[0],ue=z[1]}else se=I}return he.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:Z},la(ue)?he.createElement("span",{className:"recharts-tooltip-item-name"},ue):null,la(ue)?he.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,he.createElement("span",{className:"recharts-tooltip-item-value"},se),he.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return he.createElement("ul",{className:"recharts-tooltip-item-list",style:N},V)}return null},x=yI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),b=yI({margin:0},c),S=!kr(p),T=S?p:"",A=_r("recharts-default-tooltip",h),O=_r("recharts-tooltip-label",m);S&&y&&u!==void 0&&u!==null&&(T=y(p,u));var M=w?{role:"status","aria-live":"assertive"}:{};return he.createElement("div",NM({className:A,style:x},M),he.createElement("p",{className:O,style:b},he.isValidElement(T)?T:"".concat(T)),v())};function Zb(e){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zb(e)}function OE(e,t,r){return t=ont(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ont(e){var t=lnt(e,"string");return Zb(t)=="symbol"?t:t+""}function lnt(e,t){if(Zb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ww="recharts-tooltip-wrapper",cnt={visibility:"hidden"};function unt(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return _r(ww,OE(OE(OE(OE({},"".concat(ww,"-right"),ht(r)&&t&&ht(t.x)&&r>=t.x),"".concat(ww,"-left"),ht(r)&&t&&ht(t.x)&&r<t.x),"".concat(ww,"-bottom"),ht(n)&&t&&ht(t.y)&&n>=t.y),"".concat(ww,"-top"),ht(n)&&t&&ht(t.y)&&n<t.y))}function iq(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&ht(a[n]))return a[n];var u=r[n]-o-i,f=r[n]+i;if(t[n])return s[n]?u:f;if(s[n]){var d=u,h=l[n];return d<h?Math.max(f,l[n]):Math.max(u,l[n])}var m=f+o,p=l[n]+c;return m>p?Math.max(u,l[n]):Math.max(f,l[n])}function fnt(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function dnt(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipBox,o=e.useTranslate3d,l=e.viewBox,c,u,f;return s.height>0&&s.width>0&&r?(u=iq({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=iq({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),c=fnt({translateX:u,translateY:f,useTranslate3d:o})):c=cnt,{cssProperties:c,cssClasses:unt({translateX:u,translateY:f,coordinate:r})}}function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}function aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aq(Object(r),!0).forEach(function(n){RM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hnt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pnt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hde(n.key),n)}}function mnt(e,t,r){return t&&pnt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gnt(e,t,r){return t=$k(t),ynt(e,dde()?Reflect.construct(t,r||[],$k(e).constructor):t.apply(e,r))}function ynt(e,t){if(t&&(vv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vnt(e)}function vnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dde=function(){return!!e})()}function $k(e){return $k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$k(e)}function wnt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IM(e,t)}function IM(e,t){return IM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},IM(e,t)}function RM(e,t,r){return t=hde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hde(e){var t=xnt(e,"string");return vv(t)=="symbol"?t:t+""}function xnt(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var oq=1,bnt=function(e){function t(){var r;hnt(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=gnt(this,t,[].concat(i)),RM(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),RM(r,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,c,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),r}return wnt(t,e),mnt(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>oq||Math.abs(n.height-this.state.lastBoundingBox.height)>oq)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,f=i.hasPayload,d=i.isAnimationActive,h=i.offset,m=i.position,p=i.reverseDirection,y=i.useTranslate3d,g=i.viewBox,w=i.wrapperStyle,v=dnt({allowEscapeViewBox:s,coordinate:u,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:g}),x=v.cssClasses,b=v.cssProperties,S=sq(sq({transition:d&&a?"transform ".concat(o,"ms ").concat(l):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return he.createElement("div",{tabIndex:-1,className:x,style:S,ref:function(A){n.wrapperNode=A}},c)}}])}(C.PureComponent),_nt=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},x1={isSsr:_nt()};function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(r),!0).forEach(function(n){bF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Snt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ent(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mde(n.key),n)}}function Ant(e,t,r){return t&&Ent(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tnt(e,t,r){return t=Fk(t),knt(e,pde()?Reflect.construct(t,r||[],Fk(e).constructor):t.apply(e,r))}function knt(e,t){if(t&&(wv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cnt(e)}function Cnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pde=function(){return!!e})()}function Fk(e){return Fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fk(e)}function Ont(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LM(e,t)}function LM(e,t){return LM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},LM(e,t)}function bF(e,t,r){return t=mde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mde(e){var t=Pnt(e,"string");return wv(t)=="symbol"?t:t+""}function Pnt(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Nnt(e){return e.dataKey}function Int(e,t){return he.isValidElement(e)?he.cloneElement(e,t):typeof e=="function"?he.createElement(e,t):he.createElement(snt,t)}var vc=function(e){function t(){return Snt(this,t),Tnt(this,t,arguments)}return Ont(t,e),Ant(t,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,f=i.filterNull,d=i.isAnimationActive,h=i.offset,m=i.payload,p=i.payloadUniqBy,y=i.position,g=i.reverseDirection,w=i.useTranslate3d,v=i.viewBox,x=i.wrapperStyle,b=m??[];f&&b.length&&(b=ide(m.filter(function(T){return T.value!=null&&(T.hide!==!0||n.props.includeHidden)}),p,Nnt));var S=b.length>0;return he.createElement(bnt,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:a,coordinate:u,hasPayload:S,offset:h,position:y,reverseDirection:g,useTranslate3d:w,viewBox:v,wrapperStyle:x},Int(c,cq(cq({},this.props),{},{payload:b})))}}])}(C.PureComponent);bF(vc,"displayName","Tooltip");bF(vc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!x1.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Rnt=qu,Lnt=function(){return Rnt.Date.now()},Mnt=Lnt,Dnt=/\s/;function jnt(e){for(var t=e.length;t--&&Dnt.test(e.charAt(t)););return t}var $nt=jnt,Fnt=$nt,Bnt=/^\s+/;function Unt(e){return e&&e.slice(0,Fnt(e)+1).replace(Bnt,"")}var znt=Unt,Vnt=znt,uq=xp,Wnt=d1,fq=NaN,Hnt=/^[-+]0x[0-9a-f]+$/i,Gnt=/^0b[01]+$/i,qnt=/^0o[0-7]+$/i,Knt=parseInt;function Ynt(e){if(typeof e=="number")return e;if(Wnt(e))return fq;if(uq(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uq(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Vnt(e);var r=Gnt.test(e);return r||qnt.test(e)?Knt(e.slice(2),r?2:8):Hnt.test(e)?fq:+e}var gde=Ynt,Xnt=xp,vI=Mnt,dq=gde,Znt="Expected a function",Jnt=Math.max,Qnt=Math.min;function eit(e,t,r){var n,i,a,s,o,l,c=0,u=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Znt);t=dq(t)||0,Xnt(r)&&(u=!!r.leading,f="maxWait"in r,a=f?Jnt(dq(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function h(S){var T=n,A=i;return n=i=void 0,c=S,s=e.apply(A,T),s}function m(S){return c=S,o=setTimeout(g,t),u?h(S):s}function p(S){var T=S-l,A=S-c,O=t-T;return f?Qnt(O,a-A):O}function y(S){var T=S-l,A=S-c;return l===void 0||T>=t||T<0||f&&A>=a}function g(){var S=vI();if(y(S))return w(S);o=setTimeout(g,p(S))}function w(S){return o=void 0,d&&n?h(S):(n=i=void 0,s)}function v(){o!==void 0&&clearTimeout(o),c=0,n=l=i=o=void 0}function x(){return o===void 0?s:w(vI())}function b(){var S=vI(),T=y(S);if(n=arguments,i=this,l=S,T){if(o===void 0)return m(l);if(f)return clearTimeout(o),o=setTimeout(g,t),h(l)}return o===void 0&&(o=setTimeout(g,t)),s}return b.cancel=v,b.flush=x,b}var tit=eit,rit=tit,nit=xp,iit="Expected a function";function ait(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(iit);return nit(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),rit(e,t,{leading:n,maxWait:t,trailing:i})}var sit=ait;const yde=Hr(sit);function Jb(e){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jb(e)}function hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function PE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hq(Object(r),!0).forEach(function(n){oit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oit(e,t,r){return t=lit(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lit(e){var t=cit(e,"string");return Jb(t)=="symbol"?t:t+""}function cit(e,t){if(Jb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uit(e,t){return pit(e)||hit(e,t)||dit(e,t)||fit()}function fit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dit(e,t){if(e){if(typeof e=="string")return pq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pq(e,t)}}function pq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hit(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function pit(e){if(Array.isArray(e))return e}var vde=C.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=e.width,s=a===void 0?"100%":a,o=e.height,l=o===void 0?"100%":o,c=e.minWidth,u=c===void 0?0:c,f=e.minHeight,d=e.maxHeight,h=e.children,m=e.debounce,p=m===void 0?0:m,y=e.id,g=e.className,w=e.onResize,v=e.style,x=v===void 0?{}:v,b=C.useRef(null),S=C.useRef();S.current=w,C.useImperativeHandle(t,function(){return Object.defineProperty(b.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),b.current},configurable:!0})});var T=C.useState({containerWidth:i.width,containerHeight:i.height}),A=uit(T,2),O=A[0],M=A[1],P=C.useCallback(function(V,B){M(function(G){var Z=Math.round(V),J=Math.round(B);return G.containerWidth===Z&&G.containerHeight===J?G:{containerWidth:Z,containerHeight:J}})},[]);C.useEffect(function(){var V=function(U){var se,ue=U[0].contentRect,I=ue.width,z=ue.height;P(I,z),(se=S.current)===null||se===void 0||se.call(S,I,z)};p>0&&(V=yde(V,p,{trailing:!0,leading:!1}));var B=new ResizeObserver(V),G=b.current.getBoundingClientRect(),Z=G.width,J=G.height;return P(Z,J),B.observe(b.current),function(){B.disconnect()}},[P,p]);var N=C.useMemo(function(){var V=O.containerWidth,B=O.containerHeight;if(V<0||B<0)return null;Rc(_0(s)||_0(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Rc(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=_0(s)?V:s,Z=_0(l)?B:l;r&&r>0&&(G?Z=G/r:Z&&(G=Z*r),d&&Z>d&&(Z=d)),Rc(G>0||Z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,Z,s,l,u,f,r);var J=!Array.isArray(h)&&Wf(h.type).endsWith("Chart");return he.Children.map(h,function(Y){return he.isValidElement(Y)?C.cloneElement(Y,PE({width:G,height:Z},J?{style:PE({height:"100%",width:"100%",maxHeight:Z,maxWidth:G},Y.props.style)}:{})):Y})},[r,h,l,d,f,u,O,s]);return he.createElement("div",{id:y?"".concat(y):void 0,className:_r("recharts-responsive-container",g),style:PE(PE({},x),{},{width:s,height:l,minWidth:u,minHeight:f,maxHeight:d}),ref:b},N)}),IO=function(t){return null};IO.displayName="Cell";function Qb(e){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qb(e)}function mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mq(Object(r),!0).forEach(function(n){mit(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mit(e,t,r){return t=git(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function git(e){var t=yit(e,"string");return Qb(t)=="symbol"?t:t+""}function yit(e,t){if(Qb(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qb(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pg={widthCache:{},cacheCount:0},vit=2e3,wit={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gq="recharts_measurement_span";function xit(e){var t=MM({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Ex=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||x1.isSsr)return{width:0,height:0};var n=xit(r),i=JSON.stringify({text:t,copyStyle:n});if(pg.widthCache[i])return pg.widthCache[i];try{var a=document.getElementById(gq);a||(a=document.createElement("span"),a.setAttribute("id",gq),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=MM(MM({},wit),n);Object.assign(a.style,s),a.textContent="".concat(t);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return pg.widthCache[i]=l,++pg.cacheCount>vit&&(pg.cacheCount=0,pg.widthCache={}),l}catch{return{width:0,height:0}}},bit=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function e_(e){"@babel/helpers - typeof";return e_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e_(e)}function Bk(e,t){return Ait(e)||Eit(e,t)||Sit(e,t)||_it()}function _it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sit(e,t){if(e){if(typeof e=="string")return yq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yq(e,t)}}function yq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Eit(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Ait(e){if(Array.isArray(e))return e}function Tit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cit(n.key),n)}}function kit(e,t,r){return t&&vq(e.prototype,t),r&&vq(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cit(e){var t=Oit(e,"string");return e_(t)=="symbol"?t:t+""}function Oit(e,t){if(e_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(e_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Pit=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nit=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wde={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Iit=Object.keys(wde),ly="NaN";function Rit(e,t){return e*wde[t]}var NE=function(){function e(t,r){Tit(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Pit.test(r)&&(this.num=NaN,this.unit=""),Iit.includes(r)&&(this.num=Rit(t,r),this.unit="px")}return kit(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=Nit.exec(r))!==null&&n!==void 0?n:[],a=Bk(i,3),s=a[1],o=a[2];return new e(parseFloat(s),o??"")}}])}();function xde(e){if(e.includes(ly))return ly;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=wq.exec(t))!==null&&r!==void 0?r:[],i=Bk(n,4),a=i[1],s=i[2],o=i[3],l=NE.parse(a??""),c=NE.parse(o??""),u=s==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return ly;t=t.replace(wq,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,d=(f=xq.exec(t))!==null&&f!==void 0?f:[],h=Bk(d,4),m=h[1],p=h[2],y=h[3],g=NE.parse(m??""),w=NE.parse(y??""),v=p==="+"?g.add(w):g.subtract(w);if(v.isNaN())return ly;t=t.replace(xq,v.toString())}return t}var bq=/\(([^()]*)\)/;function Lit(e){for(var t=e;t.includes("(");){var r=bq.exec(t),n=Bk(r,2),i=n[1];t=t.replace(bq,xde(i))}return t}function Mit(e){var t=e.replace(/\s+/g,"");return t=Lit(t),t=xde(t),t}function Dit(e){try{return Mit(e)}catch{return ly}}function wI(e){var t=Dit(e.slice(5,-1));return t===ly?"":t}var jit=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$it=["dx","dy","angle","className","breakAll"];function DM(){return DM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DM.apply(this,arguments)}function _q(e,t){if(e==null)return{};var r=Fit(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fit(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Sq(e,t){return Vit(e)||zit(e,t)||Uit(e,t)||Bit()}function Bit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uit(e,t){if(e){if(typeof e=="string")return Eq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Eq(e,t)}}function Eq(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zit(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Vit(e){if(Array.isArray(e))return e}var bde=/[ \f\n\r\t\v\u2028\u2029]+/,_de=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var a=[];kr(r)||(n?a=r.toString().split(""):a=r.toString().split(bde));var s=a.map(function(l){return{word:l,width:Ex(l,i).width}}),o=n?0:Ex("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},Wit=function(t,r,n,i,a){var s=t.maxLines,o=t.children,l=t.style,c=t.breakAll,u=ht(s),f=o,d=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(Z,J){var Y=J.word,U=J.width,se=Z[Z.length-1];if(se&&(i==null||a||se.width+U+n<Number(i)))se.words.push(Y),se.width+=U+n;else{var ue={words:[Y],width:U};Z.push(ue)}return Z},[])},h=d(r),m=function(G){return G.reduce(function(Z,J){return Z.width>J.width?Z:J})};if(!u)return h;for(var p="",y=function(G){var Z=f.slice(0,G),J=_de({breakAll:c,style:l,children:Z+p}).wordsWithComputedWidth,Y=d(J),U=Y.length>s||m(Y).width>Number(i);return[U,Y]},g=0,w=f.length-1,v=0,x;g<=w&&v<=f.length-1;){var b=Math.floor((g+w)/2),S=b-1,T=y(S),A=Sq(T,2),O=A[0],M=A[1],P=y(b),N=Sq(P,1),V=N[0];if(!O&&!V&&(g=b+1),O&&V&&(w=b-1),!O&&V){x=M;break}v++}return x||h},Aq=function(t){var r=kr(t)?[]:t.toString().split(bde);return[{words:r}]},Hit=function(t){var r=t.width,n=t.scaleToFit,i=t.children,a=t.style,s=t.breakAll,o=t.maxLines;if((r||n)&&!x1.isSsr){var l,c,u=_de({breakAll:s,children:i,style:a});if(u){var f=u.wordsWithComputedWidth,d=u.spaceWidth;l=f,c=d}else return Aq(i);return Wit({breakAll:s,children:i,maxLines:o,style:a},l,c,r,n)}return Aq(i)},Tq="#808080",cm=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,a=i===void 0?0:i,s=t.lineHeight,o=s===void 0?"1em":s,l=t.capHeight,c=l===void 0?"0.71em":l,u=t.scaleToFit,f=u===void 0?!1:u,d=t.textAnchor,h=d===void 0?"start":d,m=t.verticalAnchor,p=m===void 0?"end":m,y=t.fill,g=y===void 0?Tq:y,w=_q(t,jit),v=C.useMemo(function(){return Hit({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),x=w.dx,b=w.dy,S=w.angle,T=w.className,A=w.breakAll,O=_q(w,$it);if(!la(n)||!la(a))return null;var M=n+(ht(x)?x:0),P=a+(ht(b)?b:0),N;switch(p){case"start":N=wI("calc(".concat(c,")"));break;case"middle":N=wI("calc(".concat((v.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:N=wI("calc(".concat(v.length-1," * -").concat(o,")"));break}var V=[];if(f){var B=v[0].width,G=w.width;V.push("scale(".concat((ht(G)?G/B:1)/B,")"))}return S&&V.push("rotate(".concat(S,", ").concat(M,", ").concat(P,")")),V.length&&(O.transform=V.join(" ")),he.createElement("text",DM({},rr(O,!0),{x:M,y:P,className:_r("recharts-text",T),textAnchor:h,fill:g.includes("url")?Tq:g}),v.map(function(Z,J){var Y=Z.words.join(A?"":" ");return he.createElement("tspan",{x:M,dy:J===0?N:o,key:"".concat(Y,"-").concat(J)},Y)}))};function Vh(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Git(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _F(e){let t,r,n;e.length!==2?(t=Vh,r=(o,l)=>Vh(e(o),l),n=(o,l)=>e(o)-l):(t=e===Vh||e===Git?e:qit,r=e,n=e);function i(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;r(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;r(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function qit(){return 0}function Sde(e){return e===null?NaN:+e}function*Kit(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Yit=_F(Vh),P2=Yit.right;_F(Sde).center;class kq extends Map{constructor(t,r=Jit){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(Cq(this,t))}has(t){return super.has(Cq(this,t))}set(t,r){return super.set(Xit(this,t),r)}delete(t){return super.delete(Zit(this,t))}}function Cq({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Xit({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Zit({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Jit(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Qit(e=Vh){if(e===Vh)return Ede;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Ede(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eat=Math.sqrt(50),tat=Math.sqrt(10),rat=Math.sqrt(2);function Uk(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=eat?10:a>=tat?5:a>=rat?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=r&&r<2?Uk(e,t,r*2):[o,l,c]}function jM(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?Uk(t,e,r):Uk(e,t,r);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(n)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function $M(e,t,r){return t=+t,e=+e,r=+r,Uk(e,t,r)[2]}function FM(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?$M(t,e,r):$M(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Oq(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Pq(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Ade(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?Ede:Qit(i);n>r;){if(n-r>600){const l=n-r+1,c=t-r+1,u=Math.log(l),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),h=Math.max(r,Math.floor(t-c*f/l+d)),m=Math.min(n,Math.floor(t+(l-c)*f/l+d));Ade(e,t,h,m,i)}const a=e[t];let s=r,o=n;for(xw(e,r,t),i(e[n],a)>0&&xw(e,r,n);s<o;){for(xw(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?xw(e,r,o):(++o,xw(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function xw(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function nat(e,t,r){if(e=Float64Array.from(Kit(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Pq(e);if(t>=1)return Oq(e);var n,i=(n-1)*t,a=Math.floor(i),s=Oq(Ade(e,a).subarray(0,a+1)),o=Pq(e.subarray(a+1));return s+(o-s)*(i-a)}}function iat(e,t,r=Sde){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function aat(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function zl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const BM=Symbol("implicit");function SF(){var e=new kq,t=[],r=[],n=BM;function i(a){let s=e.get(a);if(s===void 0){if(n!==BM)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new kq;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return SF(t,r).unknown(n)},zl.apply(i,arguments),i}function t_(){var e=SF().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,h=i<n,m=h?i:n,p=h?n:i;a=(p-m)/Math.max(1,d-l+c*2),o&&(a=Math.floor(a)),m+=(p-m-a*(d-l))*u,s=a*(1-l),o&&(m=Math.round(m),s=Math.round(s));var y=aat(d).map(function(g){return m+a*g});return r(h?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([n,i]=d,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(d){return[n,i]=d,n=+n,i=+i,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(d){return arguments.length?(o=!!d,f()):o},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return t_(t(),[n,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},zl.apply(f(),arguments)}function Tde(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Tde(t())},e}function Ax(){return Tde(t_.apply(null,arguments).paddingInner(1))}function EF(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kde(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function N2(){}var r_=.7,zk=1/r_,Ry="\\s*([+-]?\\d+)\\s*",n_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sat=/^#([0-9a-f]{3,8})$/,oat=new RegExp(`^rgb\\(${Ry},${Ry},${Ry}\\)$`),lat=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),cat=new RegExp(`^rgba\\(${Ry},${Ry},${Ry},${n_}\\)$`),uat=new RegExp(`^rgba\\(${Du},${Du},${Du},${n_}\\)$`),fat=new RegExp(`^hsl\\(${n_},${Du},${Du}\\)$`),dat=new RegExp(`^hsla\\(${n_},${Du},${Du},${n_}\\)$`),Nq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};EF(N2,i_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Iq,formatHex:Iq,formatHex8:hat,formatHsl:pat,formatRgb:Rq,toString:Rq});function Iq(){return this.rgb().formatHex()}function hat(){return this.rgb().formatHex8()}function pat(){return Cde(this).formatHsl()}function Rq(){return this.rgb().formatRgb()}function i_(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sat.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Lq(t):r===3?new io(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?IE(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?IE(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oat.exec(e))?new io(t[1],t[2],t[3],1):(t=lat.exec(e))?new io(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cat.exec(e))?IE(t[1],t[2],t[3],t[4]):(t=uat.exec(e))?IE(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fat.exec(e))?jq(t[1],t[2]/100,t[3]/100,1):(t=dat.exec(e))?jq(t[1],t[2]/100,t[3]/100,t[4]):Nq.hasOwnProperty(e)?Lq(Nq[e]):e==="transparent"?new io(NaN,NaN,NaN,0):null}function Lq(e){return new io(e>>16&255,e>>8&255,e&255,1)}function IE(e,t,r,n){return n<=0&&(e=t=r=NaN),new io(e,t,r,n)}function mat(e){return e instanceof N2||(e=i_(e)),e?(e=e.rgb(),new io(e.r,e.g,e.b,e.opacity)):new io}function UM(e,t,r,n){return arguments.length===1?mat(e):new io(e,t,r,n??1)}function io(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}EF(io,UM,kde(N2,{brighter(e){return e=e==null?zk:Math.pow(zk,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?r_:Math.pow(r_,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new io(F0(this.r),F0(this.g),F0(this.b),Vk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mq,formatHex:Mq,formatHex8:gat,formatRgb:Dq,toString:Dq}));function Mq(){return`#${S0(this.r)}${S0(this.g)}${S0(this.b)}`}function gat(){return`#${S0(this.r)}${S0(this.g)}${S0(this.b)}${S0((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dq(){const e=Vk(this.opacity);return`${e===1?"rgb(":"rgba("}${F0(this.r)}, ${F0(this.g)}, ${F0(this.b)}${e===1?")":`, ${e})`}`}function Vk(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function F0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function S0(e){return e=F0(e),(e<16?"0":"")+e.toString(16)}function jq(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _c(e,t,r,n)}function Cde(e){if(e instanceof _c)return new _c(e.h,e.s,e.l,e.opacity);if(e instanceof N2||(e=i_(e)),!e)return new _c;if(e instanceof _c)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,l=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new _c(s,o,l,e.opacity)}function yat(e,t,r,n){return arguments.length===1?Cde(e):new _c(e,t,r,n??1)}function _c(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}EF(_c,yat,kde(N2,{brighter(e){return e=e==null?zk:Math.pow(zk,e),new _c(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?r_:Math.pow(r_,e),new _c(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new io(xI(e>=240?e-240:e+120,i,n),xI(e,i,n),xI(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new _c($q(this.h),RE(this.s),RE(this.l),Vk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vk(this.opacity);return`${e===1?"hsl(":"hsla("}${$q(this.h)}, ${RE(this.s)*100}%, ${RE(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $q(e){return e=(e||0)%360,e<0?e+360:e}function RE(e){return Math.max(0,Math.min(1,e||0))}function xI(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const AF=e=>()=>e;function vat(e,t){return function(r){return e+r*t}}function wat(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function xat(e){return(e=+e)==1?Ode:function(t,r){return r-t?wat(t,r,e):AF(isNaN(t)?r:t)}}function Ode(e,t){var r=t-e;return r?vat(e,r):AF(isNaN(e)?t:e)}const Fq=function e(t){var r=xat(t);function n(i,a){var s=r((i=UM(i)).r,(a=UM(a)).r),o=r(i.g,a.g),l=r(i.b,a.b),c=Ode(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return n.gamma=e,n}(1);function bat(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function _at(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Sat(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=b1(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function Eat(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Wk(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Aat(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=b1(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var zM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bI=new RegExp(zM.source,"g");function Tat(e){return function(){return e}}function kat(e){return function(t){return e(t)+""}}function Cat(e,t){var r=zM.lastIndex=bI.lastIndex=0,n,i,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(n=zM.exec(e))&&(i=bI.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Wk(n,i)})),r=bI.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?kat(l[0].x):Tat(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function b1(e,t){var r=typeof t,n;return t==null||r==="boolean"?AF(t):(r==="number"?Wk:r==="string"?(n=i_(t))?(t=n,Fq):Cat:t instanceof i_?Fq:t instanceof Date?Eat:_at(t)?bat:Array.isArray(t)?Sat:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Aat:Wk)(e,t)}function TF(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Oat(e,t){t===void 0&&(t=e,e=b1);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function Pat(e){return function(){return e}}function Hk(e){return+e}var Bq=[0,1];function Ms(e){return e}function VM(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Pat(isNaN(t)?NaN:.5)}function Nat(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Iat(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=VM(i,n),a=r(s,a)):(n=VM(n,i),a=r(a,s)),function(o){return a(n(o))}}function Rat(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=VM(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var l=P2(e,o,1,n)-1;return a[l](i[l](o))}}function I2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function RO(){var e=Bq,t=Bq,r=b1,n,i,a,s=Ms,o,l,c;function u(){var d=Math.min(e.length,t.length);return s!==Ms&&(s=Nat(e[0],e[d-1])),o=d>2?Rat:Iat,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?a:(l||(l=o(e.map(n),t,r)))(n(s(d)))}return f.invert=function(d){return s(i((c||(c=o(t,e.map(n),Wk)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Hk),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),r=TF,u()},f.clamp=function(d){return arguments.length?(s=d?!0:Ms,u()):s!==Ms},f.interpolate=function(d){return arguments.length?(r=d,u()):r},f.unknown=function(d){return arguments.length?(a=d,f):a},function(d,h){return n=d,i=h,u()}}function kF(){return RO()(Ms,Ms)}function Lat(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Gk(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function xv(e){return e=Gk(Math.abs(e)),e?e[1]:NaN}function Mat(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function Dat(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var jat=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a_(e){if(!(t=jat.exec(e)))throw new Error("invalid format: "+e);var t;return new CF({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}a_.prototype=CF.prototype;function CF(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $at(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var qk;function Fat(e,t){var r=Gk(e,t);if(!r)return qk=void 0,e.toPrecision(t);var n=r[0],i=r[1],a=i-(qk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Gk(e,Math.max(0,t+a-1))[0]}function Uq(e,t){var r=Gk(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const zq={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Lat,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Uq(e*100,t),r:Uq,s:Fat,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Vq(e){return e}var Wq=Array.prototype.map,Hq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Bat(e){var t=e.grouping===void 0||e.thousands===void 0?Vq:Mat(Wq.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Vq:Dat(Wq.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f,d){f=a_(f);var h=f.fill,m=f.align,p=f.sign,y=f.symbol,g=f.zero,w=f.width,v=f.comma,x=f.precision,b=f.trim,S=f.type;S==="n"?(v=!0,S="g"):zq[S]||(x===void 0&&(x=12),b=!0,S="g"),(g||h==="0"&&m==="=")&&(g=!0,h="0",m="=");var T=(d&&d.prefix!==void 0?d.prefix:"")+(y==="$"?r:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),A=(y==="$"?n:/[%p]/.test(S)?s:"")+(d&&d.suffix!==void 0?d.suffix:""),O=zq[S],M=/[defgprs%]/.test(S);x=x===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function P(N){var V=T,B=A,G,Z,J;if(S==="c")B=O(N)+B,N="";else{N=+N;var Y=N<0||1/N<0;if(N=isNaN(N)?l:O(Math.abs(N),x),b&&(N=$at(N)),Y&&+N==0&&p!=="+"&&(Y=!1),V=(Y?p==="("?p:o:p==="-"||p==="("?"":p)+V,B=(S==="s"&&!isNaN(N)&&qk!==void 0?Hq[8+qk/3]:"")+B+(Y&&p==="("?")":""),M){for(G=-1,Z=N.length;++G<Z;)if(J=N.charCodeAt(G),48>J||J>57){B=(J===46?i+N.slice(G+1):N.slice(G))+B,N=N.slice(0,G);break}}}v&&!g&&(N=t(N,1/0));var U=V.length+N.length+B.length,se=U<w?new Array(w-U+1).join(h):"";switch(v&&g&&(N=t(se+N,se.length?w-B.length:1/0),se=""),m){case"<":N=V+N+B+se;break;case"=":N=V+se+N+B;break;case"^":N=se.slice(0,U=se.length>>1)+V+N+B+se.slice(U);break;default:N=se+V+N+B;break}return a(N)}return P.toString=function(){return f+""},P}function u(f,d){var h=Math.max(-8,Math.min(8,Math.floor(xv(d)/3)))*3,m=Math.pow(10,-h),p=c((f=a_(f),f.type="f",f),{suffix:Hq[8+h/3]});return function(y){return p(m*y)}}return{format:c,formatPrefix:u}}var LE,OF,Pde;Uat({thousands:",",grouping:[3],currency:["$",""]});function Uat(e){return LE=Bat(e),OF=LE.format,Pde=LE.formatPrefix,LE}function zat(e){return Math.max(0,-xv(Math.abs(e)))}function Vat(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xv(t)/3)))*3-xv(Math.abs(e)))}function Wat(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xv(t)-xv(e))+1}function Nde(e,t,r,n){var i=FM(e,t,r),a;switch(n=a_(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=Vat(i,s))&&(n.precision=a),Pde(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Wat(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=zat(i))&&(n.precision=a-(n.type==="%")*2);break}}return OF(n)}function bp(e){var t=e.domain;return e.ticks=function(r){var n=t();return jM(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return Nde(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],l,c,u=10;for(o<s&&(c=s,s=o,o=c,c=i,i=a,a=c);u-- >0;){if(c=$M(s,o,r),c===l)return n[i]=s,n[a]=o,t(n);if(c>0)s=Math.floor(s/c)*c,o=Math.ceil(o/c)*c;else if(c<0)s=Math.ceil(s*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function Kk(){var e=kF();return e.copy=function(){return I2(e,Kk())},zl.apply(e,arguments),bp(e)}function Ide(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Hk),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Ide(e).unknown(t)},e=arguments.length?Array.from(e,Hk):[0,1],bp(r)}function Rde(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function Gq(e){return Math.log(e)}function qq(e){return Math.exp(e)}function Hat(e){return-Math.log(-e)}function Gat(e){return-Math.exp(-e)}function qat(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Kat(e){return e===10?qat:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Yat(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Kq(e){return(t,r)=>-e(-t,r)}function PF(e){const t=e(Gq,qq),r=t.domain;let n=10,i,a;function s(){return i=Yat(n),a=Kat(n),r()[0]<0?(i=Kq(i),a=Kq(a),e(Hat,Gat)):e(Gq,qq),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const l=r();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let d=i(c),h=i(u),m,p;const y=o==null?10:+o;let g=[];if(!(n%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),c>0){for(;d<=h;++d)for(m=1;m<n;++m)if(p=d<0?m/a(-d):m*a(d),!(p<c)){if(p>u)break;g.push(p)}}else for(;d<=h;++d)for(m=n-1;m>=1;--m)if(p=d>0?m/a(-d):m*a(d),!(p<c)){if(p>u)break;g.push(p)}g.length*2<y&&(g=jM(c,u,y))}else g=jM(d,h,Math.min(h-d,y)).map(a);return f?g.reverse():g},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=a_(l)).precision==null&&(l.trim=!0),l=OF(l)),o===1/0)return l;const c=Math.max(1,n*o/t.ticks().length);return u=>{let f=u/a(Math.round(i(u)));return f*n<n-.5&&(f*=n),f<=c?l(u):""}},t.nice=()=>r(Rde(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function Lde(){const e=PF(RO()).domain([1,10]);return e.copy=()=>I2(e,Lde()).base(e.base()),zl.apply(e,arguments),e}function Yq(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Xq(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function NF(e){var t=1,r=e(Yq(t),Xq(t));return r.constant=function(n){return arguments.length?e(Yq(t=+n),Xq(t)):t},bp(r)}function Mde(){var e=NF(RO());return e.copy=function(){return I2(e,Mde()).constant(e.constant())},zl.apply(e,arguments)}function Zq(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Xat(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Zat(e){return e<0?-e*e:e*e}function IF(e){var t=e(Ms,Ms),r=1;function n(){return r===1?e(Ms,Ms):r===.5?e(Xat,Zat):e(Zq(r),Zq(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},bp(t)}function RF(){var e=IF(RO());return e.copy=function(){return I2(e,RF()).exponent(e.exponent())},zl.apply(e,arguments),e}function Jat(){return RF.apply(null,arguments).exponent(.5)}function Jq(e){return Math.sign(e)*e*e}function Qat(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Dde(){var e=kF(),t=[0,1],r=!1,n;function i(a){var s=Qat(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(Jq(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Hk)).map(Jq)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Dde(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},zl.apply(i,arguments),bp(i)}function jde(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=iat(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[P2(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Vh),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return jde().domain(e).range(t).unknown(n)},zl.apply(a,arguments)}function $de(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[P2(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return n.slice()},s.copy=function(){return $de().domain([e,t]).range(i).unknown(a)},zl.apply(bp(s),arguments)}function Fde(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[P2(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Fde().domain(e).range(t).unknown(r)},zl.apply(i,arguments)}const _I=new Date,SI=new Date;function ha(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let c;do l.push(c=new Date(+a)),t(a,o),e(a);while(c<a&&a<s);return l},i.filter=a=>ha(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(_I.setTime(+a),SI.setTime(+s),e(_I),e(SI),Math.floor(r(_I,SI))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Yk=ha(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Yk.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ha(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Yk);Yk.range;const Rf=1e3,kl=Rf*60,Lf=kl*60,ld=Lf*24,LF=ld*7,Qq=ld*30,EI=ld*365,E0=ha(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Rf)},(e,t)=>(t-e)/Rf,e=>e.getUTCSeconds());E0.range;const MF=ha(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rf)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getMinutes());MF.range;const DF=ha(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getUTCMinutes());DF.range;const jF=ha(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rf-e.getMinutes()*kl)},(e,t)=>{e.setTime(+e+t*Lf)},(e,t)=>(t-e)/Lf,e=>e.getHours());jF.range;const $F=ha(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Lf)},(e,t)=>(t-e)/Lf,e=>e.getUTCHours());$F.range;const R2=ha(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kl)/ld,e=>e.getDate()-1);R2.range;const LO=ha(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ld,e=>e.getUTCDate()-1);LO.range;const Bde=ha(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ld,e=>Math.floor(e/ld));Bde.range;function Om(e){return ha(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*kl)/LF)}const MO=Om(0),Xk=Om(1),est=Om(2),tst=Om(3),bv=Om(4),rst=Om(5),nst=Om(6);MO.range;Xk.range;est.range;tst.range;bv.range;rst.range;nst.range;function Pm(e){return ha(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/LF)}const DO=Pm(0),Zk=Pm(1),ist=Pm(2),ast=Pm(3),_v=Pm(4),sst=Pm(5),ost=Pm(6);DO.range;Zk.range;ist.range;ast.range;_v.range;sst.range;ost.range;const FF=ha(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());FF.range;const BF=ha(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());BF.range;const cd=ha(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ha(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});cd.range;const ud=ha(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ud.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ha(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ud.range;function Ude(e,t,r,n,i,a){const s=[[E0,1,Rf],[E0,5,5*Rf],[E0,15,15*Rf],[E0,30,30*Rf],[a,1,kl],[a,5,5*kl],[a,15,15*kl],[a,30,30*kl],[i,1,Lf],[i,3,3*Lf],[i,6,6*Lf],[i,12,12*Lf],[n,1,ld],[n,2,2*ld],[r,1,LF],[t,1,Qq],[t,3,3*Qq],[e,1,EI]];function o(c,u,f){const d=u<c;d&&([c,u]=[u,c]);const h=f&&typeof f.range=="function"?f:l(c,u,f),m=h?h.range(c,+u+1):[];return d?m.reverse():m}function l(c,u,f){const d=Math.abs(u-c)/f,h=_F(([,,y])=>y).right(s,d);if(h===s.length)return e.every(FM(c/EI,u/EI,f));if(h===0)return Yk.every(Math.max(FM(c,u,f),1));const[m,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return m.every(p)}return[o,l]}const[lst,cst]=Ude(ud,BF,DO,Bde,$F,DF),[ust,fst]=Ude(cd,FF,MO,R2,jF,MF);function AI(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function TI(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function bw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function dst(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=_w(i),u=Sw(i),f=_w(a),d=Sw(a),h=_w(s),m=Sw(s),p=_w(o),y=Sw(o),g=_w(l),w=Sw(l),v={a:J,A:Y,b:U,B:se,c:null,d:aK,e:aK,f:Mst,g:Hst,G:qst,H:Ist,I:Rst,j:Lst,L:zde,m:Dst,M:jst,p:ue,q:I,Q:lK,s:cK,S:$st,u:Fst,U:Bst,V:Ust,w:zst,W:Vst,x:null,X:null,y:Wst,Y:Gst,Z:Kst,"%":oK},x={a:z,A:H,b:q,B:F,c:null,d:sK,e:sK,f:Jst,g:lot,G:uot,H:Yst,I:Xst,j:Zst,L:Wde,m:Qst,M:eot,p:D,q:re,Q:lK,s:cK,S:tot,u:rot,U:not,V:iot,w:aot,W:sot,x:null,X:null,y:oot,Y:cot,Z:fot,"%":oK},b={a:M,A:P,b:N,B:V,c:B,d:nK,e:nK,f:Cst,g:rK,G:tK,H:iK,I:iK,j:Est,L:kst,m:Sst,M:Ast,p:O,q:_st,Q:Pst,s:Nst,S:Tst,u:yst,U:vst,V:wst,w:gst,W:xst,x:G,X:Z,y:rK,Y:tK,Z:bst,"%":Ost};v.x=S(r,v),v.X=S(n,v),v.c=S(t,v),x.x=S(r,x),x.X=S(n,x),x.c=S(t,x);function S(K,le){return function(xe){var X=[],Ie=-1,Re=0,ie=K.length,Te,Me,tt;for(xe instanceof Date||(xe=new Date(+xe));++Ie<ie;)K.charCodeAt(Ie)===37&&(X.push(K.slice(Re,Ie)),(Me=eK[Te=K.charAt(++Ie)])!=null?Te=K.charAt(++Ie):Me=Te==="e"?" ":"0",(tt=le[Te])&&(Te=tt(xe,Me)),X.push(Te),Re=Ie+1);return X.push(K.slice(Re,Ie)),X.join("")}}function T(K,le){return function(xe){var X=bw(1900,void 0,1),Ie=A(X,K,xe+="",0),Re,ie;if(Ie!=xe.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(le&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Re=TI(bw(X.y,0,1)),ie=Re.getUTCDay(),Re=ie>4||ie===0?Zk.ceil(Re):Zk(Re),Re=LO.offset(Re,(X.V-1)*7),X.y=Re.getUTCFullYear(),X.m=Re.getUTCMonth(),X.d=Re.getUTCDate()+(X.w+6)%7):(Re=AI(bw(X.y,0,1)),ie=Re.getDay(),Re=ie>4||ie===0?Xk.ceil(Re):Xk(Re),Re=R2.offset(Re,(X.V-1)*7),X.y=Re.getFullYear(),X.m=Re.getMonth(),X.d=Re.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),ie="Z"in X?TI(bw(X.y,0,1)).getUTCDay():AI(bw(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(ie+5)%7:X.w+X.U*7-(ie+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,TI(X)):AI(X)}}function A(K,le,xe,X){for(var Ie=0,Re=le.length,ie=xe.length,Te,Me;Ie<Re;){if(X>=ie)return-1;if(Te=le.charCodeAt(Ie++),Te===37){if(Te=le.charAt(Ie++),Me=b[Te in eK?le.charAt(Ie++):Te],!Me||(X=Me(K,xe,X))<0)return-1}else if(Te!=xe.charCodeAt(X++))return-1}return X}function O(K,le,xe){var X=c.exec(le.slice(xe));return X?(K.p=u.get(X[0].toLowerCase()),xe+X[0].length):-1}function M(K,le,xe){var X=h.exec(le.slice(xe));return X?(K.w=m.get(X[0].toLowerCase()),xe+X[0].length):-1}function P(K,le,xe){var X=f.exec(le.slice(xe));return X?(K.w=d.get(X[0].toLowerCase()),xe+X[0].length):-1}function N(K,le,xe){var X=g.exec(le.slice(xe));return X?(K.m=w.get(X[0].toLowerCase()),xe+X[0].length):-1}function V(K,le,xe){var X=p.exec(le.slice(xe));return X?(K.m=y.get(X[0].toLowerCase()),xe+X[0].length):-1}function B(K,le,xe){return A(K,t,le,xe)}function G(K,le,xe){return A(K,r,le,xe)}function Z(K,le,xe){return A(K,n,le,xe)}function J(K){return s[K.getDay()]}function Y(K){return a[K.getDay()]}function U(K){return l[K.getMonth()]}function se(K){return o[K.getMonth()]}function ue(K){return i[+(K.getHours()>=12)]}function I(K){return 1+~~(K.getMonth()/3)}function z(K){return s[K.getUTCDay()]}function H(K){return a[K.getUTCDay()]}function q(K){return l[K.getUTCMonth()]}function F(K){return o[K.getUTCMonth()]}function D(K){return i[+(K.getUTCHours()>=12)]}function re(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var le=S(K+="",v);return le.toString=function(){return K},le},parse:function(K){var le=T(K+="",!1);return le.toString=function(){return K},le},utcFormat:function(K){var le=S(K+="",x);return le.toString=function(){return K},le},utcParse:function(K){var le=T(K+="",!0);return le.toString=function(){return K},le}}}var eK={"-":"",_:" ",0:"0"},Ea=/^\s*\d+/,hst=/^%/,pst=/[\\^$*+?|[\]().{}]/g;function Yr(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function mst(e){return e.replace(pst,"\\$&")}function _w(e){return new RegExp("^(?:"+e.map(mst).join("|")+")","i")}function Sw(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function gst(e,t,r){var n=Ea.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function yst(e,t,r){var n=Ea.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function vst(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function wst(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function xst(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function tK(e,t,r){var n=Ea.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function rK(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function bst(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function _st(e,t,r){var n=Ea.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Sst(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function nK(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Est(e,t,r){var n=Ea.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function iK(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Ast(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Tst(e,t,r){var n=Ea.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function kst(e,t,r){var n=Ea.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Cst(e,t,r){var n=Ea.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Ost(e,t,r){var n=hst.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Pst(e,t,r){var n=Ea.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Nst(e,t,r){var n=Ea.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function aK(e,t){return Yr(e.getDate(),t,2)}function Ist(e,t){return Yr(e.getHours(),t,2)}function Rst(e,t){return Yr(e.getHours()%12||12,t,2)}function Lst(e,t){return Yr(1+R2.count(cd(e),e),t,3)}function zde(e,t){return Yr(e.getMilliseconds(),t,3)}function Mst(e,t){return zde(e,t)+"000"}function Dst(e,t){return Yr(e.getMonth()+1,t,2)}function jst(e,t){return Yr(e.getMinutes(),t,2)}function $st(e,t){return Yr(e.getSeconds(),t,2)}function Fst(e){var t=e.getDay();return t===0?7:t}function Bst(e,t){return Yr(MO.count(cd(e)-1,e),t,2)}function Vde(e){var t=e.getDay();return t>=4||t===0?bv(e):bv.ceil(e)}function Ust(e,t){return e=Vde(e),Yr(bv.count(cd(e),e)+(cd(e).getDay()===4),t,2)}function zst(e){return e.getDay()}function Vst(e,t){return Yr(Xk.count(cd(e)-1,e),t,2)}function Wst(e,t){return Yr(e.getFullYear()%100,t,2)}function Hst(e,t){return e=Vde(e),Yr(e.getFullYear()%100,t,2)}function Gst(e,t){return Yr(e.getFullYear()%1e4,t,4)}function qst(e,t){var r=e.getDay();return e=r>=4||r===0?bv(e):bv.ceil(e),Yr(e.getFullYear()%1e4,t,4)}function Kst(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yr(t/60|0,"0",2)+Yr(t%60,"0",2)}function sK(e,t){return Yr(e.getUTCDate(),t,2)}function Yst(e,t){return Yr(e.getUTCHours(),t,2)}function Xst(e,t){return Yr(e.getUTCHours()%12||12,t,2)}function Zst(e,t){return Yr(1+LO.count(ud(e),e),t,3)}function Wde(e,t){return Yr(e.getUTCMilliseconds(),t,3)}function Jst(e,t){return Wde(e,t)+"000"}function Qst(e,t){return Yr(e.getUTCMonth()+1,t,2)}function eot(e,t){return Yr(e.getUTCMinutes(),t,2)}function tot(e,t){return Yr(e.getUTCSeconds(),t,2)}function rot(e){var t=e.getUTCDay();return t===0?7:t}function not(e,t){return Yr(DO.count(ud(e)-1,e),t,2)}function Hde(e){var t=e.getUTCDay();return t>=4||t===0?_v(e):_v.ceil(e)}function iot(e,t){return e=Hde(e),Yr(_v.count(ud(e),e)+(ud(e).getUTCDay()===4),t,2)}function aot(e){return e.getUTCDay()}function sot(e,t){return Yr(Zk.count(ud(e)-1,e),t,2)}function oot(e,t){return Yr(e.getUTCFullYear()%100,t,2)}function lot(e,t){return e=Hde(e),Yr(e.getUTCFullYear()%100,t,2)}function cot(e,t){return Yr(e.getUTCFullYear()%1e4,t,4)}function uot(e,t){var r=e.getUTCDay();return e=r>=4||r===0?_v(e):_v.ceil(e),Yr(e.getUTCFullYear()%1e4,t,4)}function fot(){return"+0000"}function oK(){return"%"}function lK(e){return+e}function cK(e){return Math.floor(+e/1e3)}var mg,Gde,qde;dot({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dot(e){return mg=dst(e),Gde=mg.format,mg.parse,qde=mg.utcFormat,mg.utcParse,mg}function hot(e){return new Date(e)}function pot(e){return e instanceof Date?+e:+new Date(+e)}function UF(e,t,r,n,i,a,s,o,l,c){var u=kF(),f=u.invert,d=u.domain,h=c(".%L"),m=c(":%S"),p=c("%I:%M"),y=c("%I %p"),g=c("%a %d"),w=c("%b %d"),v=c("%B"),x=c("%Y");function b(S){return(l(S)<S?h:o(S)<S?m:s(S)<S?p:a(S)<S?y:n(S)<S?i(S)<S?g:w:r(S)<S?v:x)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?d(Array.from(S,pot)):d().map(hot)},u.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},u.tickFormat=function(S,T){return T==null?b:c(T)},u.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(Rde(T,S)):u},u.copy=function(){return I2(u,UF(e,t,r,n,i,a,s,o,l,c))},u}function mot(){return zl.apply(UF(ust,fst,cd,FF,MO,R2,jF,MF,E0,Gde).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function got(){return zl.apply(UF(lst,cst,ud,BF,DO,LO,$F,DF,E0,qde).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jO(){var e=0,t=1,r,n,i,a,s=Ms,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-r)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(s=f,c):s};function u(f){return function(d){var h,m;return arguments.length?([h,m]=d,s=f(h,m),c):[s(0),s(1)]}}return c.range=u(b1),c.rangeRound=u(TF),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return a=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),c}}function _p(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Kde(){var e=bp(jO()(Ms));return e.copy=function(){return _p(e,Kde())},Sd.apply(e,arguments)}function Yde(){var e=PF(jO()).domain([1,10]);return e.copy=function(){return _p(e,Yde()).base(e.base())},Sd.apply(e,arguments)}function Xde(){var e=NF(jO());return e.copy=function(){return _p(e,Xde()).constant(e.constant())},Sd.apply(e,arguments)}function zF(){var e=IF(jO());return e.copy=function(){return _p(e,zF()).exponent(e.exponent())},Sd.apply(e,arguments)}function yot(){return zF.apply(null,arguments).exponent(.5)}function Zde(){var e=[],t=Ms;function r(n){if(n!=null&&!isNaN(n=+n))return t((P2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Vh),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>nat(e,a/n))},r.copy=function(){return Zde(t).domain(e)},Sd.apply(r,arguments)}function $O(){var e=0,t=.5,r=1,n=1,i,a,s,o,l,c=Ms,u,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+u(p))-a)*(n*p<n*a?o:l),c(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,r]=p,i=u(e=+e),a=u(t=+t),s=u(r=+r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,h):[e,t,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(c=p,h):c};function m(p){return function(y){var g,w,v;return arguments.length?([g,w,v]=y,c=Oat(p,[g,w,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(b1),h.rangeRound=m(TF),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return u=p,i=p(e),a=p(t),s=p(r),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),n=a<i?-1:1,h}}function Jde(){var e=bp($O()(Ms));return e.copy=function(){return _p(e,Jde())},Sd.apply(e,arguments)}function Qde(){var e=PF($O()).domain([.1,1,10]);return e.copy=function(){return _p(e,Qde()).base(e.base())},Sd.apply(e,arguments)}function ehe(){var e=NF($O());return e.copy=function(){return _p(e,ehe()).constant(e.constant())},Sd.apply(e,arguments)}function VF(){var e=IF($O());return e.copy=function(){return _p(e,VF()).exponent(e.exponent())},Sd.apply(e,arguments)}function vot(){return VF.apply(null,arguments).exponent(.5)}const uK=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:t_,scaleDiverging:Jde,scaleDivergingLog:Qde,scaleDivergingPow:VF,scaleDivergingSqrt:vot,scaleDivergingSymlog:ehe,scaleIdentity:Ide,scaleImplicit:BM,scaleLinear:Kk,scaleLog:Lde,scaleOrdinal:SF,scalePoint:Ax,scalePow:RF,scaleQuantile:jde,scaleQuantize:$de,scaleRadial:Dde,scaleSequential:Kde,scaleSequentialLog:Yde,scaleSequentialPow:zF,scaleSequentialQuantile:Zde,scaleSequentialSqrt:yot,scaleSequentialSymlog:Xde,scaleSqrt:Jat,scaleSymlog:Mde,scaleThreshold:Fde,scaleTime:mot,scaleUtc:got,tickFormat:Nde},Symbol.toStringTag,{value:"Module"}));var wot=d1;function xot(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],s=t(a);if(s!=null&&(o===void 0?s===s&&!wot(s):r(s,o)))var o=s,l=a}return l}var FO=xot;function bot(e,t){return e>t}var the=bot,_ot=FO,Sot=the,Eot=w1;function Aot(e){return e&&e.length?_ot(e,Eot,Sot):void 0}var Tot=Aot;const BO=Hr(Tot);function kot(e,t){return e<t}var rhe=kot,Cot=FO,Oot=rhe,Pot=w1;function Not(e){return e&&e.length?Cot(e,Pot,Oot):void 0}var Iot=Not;const UO=Hr(Iot);var Rot=nF,Lot=Ku,Mot=ude,Dot=po;function jot(e,t){var r=Dot(e)?Rot:Mot;return r(e,Lot(t))}var $ot=jot,Fot=lde,Bot=$ot;function Uot(e,t){return Fot(Bot(e,t),1)}var zot=Uot;const Vot=Hr(zot);var Wot=vF;function Hot(e,t){return Wot(e,t)}var Got=Hot;const zO=Hr(Got);var _1=1e9,qot={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HF,Gn=!0,jl="[DecimalError] ",B0=jl+"Invalid argument: ",WF=jl+"Exponent out of range: ",S1=Math.floor,i0=Math.pow,Kot=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bo,ma=1e7,Dn=7,nhe=9007199254740991,Jk=S1(nhe/Dn),Et={};Et.absoluteValue=Et.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Et.comparedTo=Et.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Et.decimalPlaces=Et.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Dn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Et.dividedBy=Et.div=function(e){return Hf(this,new this.constructor(e))};Et.dividedToIntegerBy=Et.idiv=function(e){var t=this,r=t.constructor;return xn(Hf(t,new r(e),0,1),r.precision)};Et.equals=Et.eq=function(e){return!this.cmp(e)};Et.exponent=function(){return zi(this)};Et.greaterThan=Et.gt=function(e){return this.cmp(e)>0};Et.greaterThanOrEqualTo=Et.gte=function(e){return this.cmp(e)>=0};Et.isInteger=Et.isint=function(){return this.e>this.d.length-2};Et.isNegative=Et.isneg=function(){return this.s<0};Et.isPositive=Et.ispos=function(){return this.s>0};Et.isZero=function(){return this.s===0};Et.lessThan=Et.lt=function(e){return this.cmp(e)<0};Et.lessThanOrEqualTo=Et.lte=function(e){return this.cmp(e)<1};Et.logarithm=Et.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Bo))throw Error(jl+"NaN");if(r.s<1)throw Error(jl+(r.s?"NaN":"-Infinity"));return r.eq(Bo)?new n(0):(Gn=!1,t=Hf(s_(r,a),s_(e,a),a),Gn=!0,xn(t,i))};Et.minus=Et.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?she(t,e):ihe(t,(e.s=-e.s,e))};Et.modulo=Et.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(jl+"NaN");return r.s?(Gn=!1,t=Hf(r,e,0,1).times(e),Gn=!0,r.minus(t)):xn(new n(r),i)};Et.naturalExponential=Et.exp=function(){return ahe(this)};Et.naturalLogarithm=Et.ln=function(){return s_(this)};Et.negated=Et.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Et.plus=Et.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ihe(t,e):she(t,(e.s=-e.s,e))};Et.precision=Et.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(B0+e);if(t=zi(i)+1,n=i.d.length-1,r=n*Dn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Et.squareRoot=Et.sqrt=function(){var e,t,r,n,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(jl+"NaN")}for(e=zi(o),Gn=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=Au(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=S1((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(i.toString()),r=l.precision,i=s=r+3;;)if(a=n,n=a.plus(Hf(o,a,s+2)).times(.5),Au(a.d).slice(0,s)===(t=Au(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(xn(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return Gn=!0,xn(n,r)};Et.times=Et.mul=function(e){var t,r,n,i,a,s,o,l,c,u=this,f=u.constructor,d=u.d,h=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,l=d.length,c=h.length,l<c&&(a=d,d=h,h=a,s=l,l=c,c=s),a=[],s=l+c,n=s;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,i=l+n;i>n;)o=a[i]+h[n]*d[i-n-1]+t,a[i--]=o%ma|0,t=o/ma|0;a[i]=(a[i]+t)%ma|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Gn?xn(e,f.precision):e};Et.toDecimalPlaces=Et.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(zu(e,0,_1),t===void 0?t=n.rounding:zu(t,0,8),xn(r,e+zi(r)+1,t))};Et.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=um(n,!0):(zu(e,0,_1),t===void 0?t=i.rounding:zu(t,0,8),n=xn(new i(n),e+1,t),r=um(n,!0,e+1)),r};Et.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?um(i):(zu(e,0,_1),t===void 0?t=a.rounding:zu(t,0,8),n=xn(new a(i),e+zi(i)+1,t),r=um(n.abs(),!1,e+zi(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Et.toInteger=Et.toint=function(){var e=this,t=e.constructor;return xn(new t(e),zi(e)+1,t.rounding)};Et.toNumber=function(){return+this};Et.toPower=Et.pow=function(e){var t,r,n,i,a,s,o=this,l=o.constructor,c=12,u=+(e=new l(e));if(!e.s)return new l(Bo);if(o=new l(o),!o.s){if(e.s<1)throw Error(jl+"Infinity");return o}if(o.eq(Bo))return o;if(n=l.precision,e.eq(Bo))return xn(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=u<0?-u:u)<=nhe){for(i=new l(Bo),t=Math.ceil(n/Dn+4),Gn=!1;r%2&&(i=i.times(o),dK(i.d,t)),r=S1(r/2),r!==0;)o=o.times(o),dK(o.d,t);return Gn=!0,e.s<0?new l(Bo).div(i):xn(i,n)}}else if(a<0)throw Error(jl+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Gn=!1,i=e.times(s_(o,n+c)),Gn=!0,i=ahe(i),i.s=a,i};Et.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=zi(i),n=um(i,r<=a.toExpNeg||r>=a.toExpPos)):(zu(e,1,_1),t===void 0?t=a.rounding:zu(t,0,8),i=xn(new a(i),e,t),r=zi(i),n=um(i,e<=r||r<=a.toExpNeg,e)),n};Et.toSignificantDigits=Et.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(zu(e,1,_1),t===void 0?t=n.rounding:zu(t,0,8)),xn(new n(r),e,t)};Et.toString=Et.valueOf=Et.val=Et.toJSON=Et[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=zi(e),r=e.constructor;return um(e,t<=r.toExpNeg||t>=r.toExpPos)};function ihe(e,t){var r,n,i,a,s,o,l,c,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Gn?xn(t,f):t;if(l=e.d,c=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i,a){for(a<0?(n=l,a=-a,o=c.length):(n=c,i=s,o=l.length),s=Math.ceil(f/Dn),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=c.length,o-a<0&&(a=o,n=c,c=l,l=n),r=0;a;)r=(l[--a]=l[a]+c[a]+r)/ma|0,l[a]%=ma;for(r&&(l.unshift(r),++i),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=i,Gn?xn(t,f):t}function zu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(B0+e)}function Au(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=Dn-n.length,r&&(a+=ch(r)),a+=n;s=e[t],n=s+"",r=Dn-n.length,r&&(a+=ch(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Hf=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%ma|0,s=a/ma|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*ma+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,l,c,u,f,d,h,m,p,y,g,w,v,x,b,S,T,A,O=n.constructor,M=n.s==i.s?1:-1,P=n.d,N=i.d;if(!n.s)return new O(n);if(!i.s)throw Error(jl+"Division by zero");for(l=n.e-i.e,T=N.length,b=P.length,h=new O(M),m=h.d=[],c=0;N[c]==(P[c]||0);)++c;if(N[c]>(P[c]||0)&&--l,a==null?w=a=O.precision:s?w=a+(zi(n)-zi(i))+1:w=a,w<0)return new O(0);if(w=w/Dn+2|0,c=0,T==1)for(u=0,N=N[0],w++;(c<b||u)&&w--;c++)v=u*ma+(P[c]||0),m[c]=v/N|0,u=v%N|0;else{for(u=ma/(N[0]+1)|0,u>1&&(N=e(N,u),P=e(P,u),T=N.length,b=P.length),x=T,p=P.slice(0,T),y=p.length;y<T;)p[y++]=0;A=N.slice(),A.unshift(0),S=N[0],N[1]>=ma/2&&++S;do u=0,o=t(N,p,T,y),o<0?(g=p[0],T!=y&&(g=g*ma+(p[1]||0)),u=g/S|0,u>1?(u>=ma&&(u=ma-1),f=e(N,u),d=f.length,y=p.length,o=t(f,p,d,y),o==1&&(u--,r(f,T<d?A:N,d))):(u==0&&(o=u=1),f=N.slice()),d=f.length,d<y&&f.unshift(0),r(p,f,y),o==-1&&(y=p.length,o=t(N,p,T,y),o<1&&(u++,r(p,T<y?A:N,y))),y=p.length):o===0&&(u++,p=[0]),m[c++]=u,o&&p[0]?p[y++]=P[x]||0:(p=[P[x]],y=1);while((x++<b||p[0]!==void 0)&&w--)}return m[0]||m.shift(),h.e=l,xn(h,s?a+zi(h)+1:a)}}();function ahe(e,t){var r,n,i,a,s,o,l=0,c=0,u=e.constructor,f=u.precision;if(zi(e)>16)throw Error(WF+zi(e));if(!e.s)return new u(Bo);for(Gn=!1,o=f,s=new u(.03125);e.abs().gte(.1);)e=e.times(s),c+=5;for(n=Math.log(i0(2,c))/Math.LN10*2+5|0,o+=n,r=i=a=new u(Bo),u.precision=o;;){if(i=xn(i.times(e),o),r=r.times(++l),s=a.plus(Hf(i,r,o)),Au(s.d).slice(0,o)===Au(a.d).slice(0,o)){for(;c--;)a=xn(a.times(a),o);return u.precision=f,t==null?(Gn=!0,xn(a,f)):a}a=s}}function zi(e){for(var t=e.e*Dn,r=e.d[0];r>=10;r/=10)t++;return t}function kI(e,t,r){if(t>e.LN10.sd())throw Gn=!0,r&&(e.precision=r),Error(jl+"LN10 precision limit exceeded");return xn(new e(e.LN10),t)}function ch(e){for(var t="";e--;)t+="0";return t}function s_(e,t){var r,n,i,a,s,o,l,c,u,f=1,d=10,h=e,m=h.d,p=h.constructor,y=p.precision;if(h.s<1)throw Error(jl+(h.s?"NaN":"-Infinity"));if(h.eq(Bo))return new p(0);if(t==null?(Gn=!1,c=y):c=t,h.eq(10))return t==null&&(Gn=!0),kI(p,c);if(c+=d,p.precision=c,r=Au(m),n=r.charAt(0),a=zi(h),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Au(h.d),n=r.charAt(0),f++;a=zi(h),n>1?(h=new p("0."+r),a++):h=new p(n+"."+r.slice(1))}else return l=kI(p,c+2,y).times(a+""),h=s_(new p(n+"."+r.slice(1)),c-d).plus(l),p.precision=y,t==null?(Gn=!0,xn(h,y)):h;for(o=s=h=Hf(h.minus(Bo),h.plus(Bo),c),u=xn(h.times(h),c),i=3;;){if(s=xn(s.times(u),c),l=o.plus(Hf(s,new p(i),c)),Au(l.d).slice(0,c)===Au(o.d).slice(0,c))return o=o.times(2),a!==0&&(o=o.plus(kI(p,c+2,y).times(a+""))),o=Hf(o,new p(f),c),p.precision=y,t==null?(Gn=!0,xn(o,y)):o;o=l,i+=2}}function fK(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=S1(r/Dn),e.d=[],n=(r+1)%Dn,r<0&&(n+=Dn),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Dn;n<i;)e.d.push(+t.slice(n,n+=Dn));t=t.slice(n),n=Dn-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Gn&&(e.e>Jk||e.e<-Jk))throw Error(WF+r)}else e.s=0,e.e=0,e.d=[0];return e}function xn(e,t,r){var n,i,a,s,o,l,c,u,f=e.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=Dn,i=t,c=f[u=0];else{if(u=Math.ceil((n+1)/Dn),a=f.length,u>=a)return e;for(c=a=f[u],s=1;a>=10;a/=10)s++;n%=Dn,i=n-Dn+s}if(r!==void 0&&(a=i0(10,s-i-1),o=c/a%10|0,l=t<0||f[u+1]!==void 0||c%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?i>0?c/i0(10,s-i):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=zi(e),f.length=1,t=t-a-1,f[0]=i0(10,(Dn-t%Dn)%Dn),e.e=S1(-t/Dn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=u,a=1,u--):(f.length=u+1,a=i0(10,Dn-n),f[u]=i>0?(c/i0(10,s-i)%i0(10,i)|0)*a:0),l)for(;;)if(u==0){(f[0]+=a)==ma&&(f[0]=1,++e.e);break}else{if(f[u]+=a,f[u]!=ma)break;f[u--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Gn&&(e.e>Jk||e.e<-Jk))throw Error(WF+zi(e));return e}function she(e,t){var r,n,i,a,s,o,l,c,u,f,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new d(e),Gn?xn(t,h):t;if(l=e.d,f=t.d,n=t.e,c=e.e,l=l.slice(),s=c-n,s){for(u=s<0,u?(r=l,s=-s,o=f.length):(r=f,n=c,o=l.length),i=Math.max(Math.ceil(h/Dn),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=l.length,o=f.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){u=l[i]<f[i];break}s=0}for(u&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=ma-1;--l[a],l[i]+=ma}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Gn?xn(t,h):t):new d(0)}function um(e,t,r){var n,i=zi(e),a=Au(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+ch(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ch(-i-1)+a,r&&(n=r-s)>0&&(a+=ch(n))):i>=s?(a+=ch(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+ch(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=ch(n))),e.s<0?"-"+a:a}function dK(e,t){if(e.length>t)return e.length=t,!0}function ohe(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(B0+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return fK(s,a.toString())}else if(typeof a!="string")throw Error(B0+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Kot.test(a))fK(s,a);else throw Error(B0+a)}if(i.prototype=Et,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=ohe,i.config=i.set=Yot,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Yot(e){if(!e||typeof e!="object")throw Error(jl+"Object expected");var t,r,n,i=["precision",1,_1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(S1(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(B0+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(B0+r+": "+n);return this}var HF=ohe(qot);Bo=new HF(1);const dn=HF;function Xot(e){return elt(e)||Qot(e)||Jot(e)||Zot()}function Zot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jot(e,t){if(e){if(typeof e=="string")return WM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WM(e,t)}}function Qot(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function elt(e){if(Array.isArray(e))return WM(e)}function WM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tlt=function(t){return t},lhe={},che=function(t){return t===lhe},hK=function(t){return function r(){return arguments.length===0||arguments.length===1&&che(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},rlt=function e(t,r){return t===1?r:hK(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==lhe}).length;return s>=t?r.apply(void 0,i):e(t-s,hK(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=i.map(function(f){return che(f)?l.shift():f});return r.apply(void 0,Xot(u).concat(l))}))})},VO=function(t){return rlt(t.length,t)},HM=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},nlt=VO(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),ilt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return tlt;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},GM=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},uhe=function(t){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(o,l){return o===r[l]})||(r=a,n=t.apply(void 0,a)),n}};function alt(e){var t;return e===0?t=1:t=Math.floor(new dn(e).abs().log(10).toNumber())+1,t}function slt(e,t,r){for(var n=new dn(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var olt=VO(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),llt=VO(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),clt=VO(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const WO={rangeStep:slt,getDigitCount:alt,interpolateNumber:olt,uninterpolateNumber:llt,uninterpolateTruncation:clt};function qM(e){return dlt(e)||flt(e)||fhe(e)||ult()}function ult(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function flt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function dlt(e){if(Array.isArray(e))return KM(e)}function o_(e,t){return mlt(e)||plt(e,t)||fhe(e,t)||hlt()}function hlt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fhe(e,t){if(e){if(typeof e=="string")return KM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KM(e,t)}}function KM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function plt(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),o;!(n=(o=s.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function mlt(e){if(Array.isArray(e))return e}function dhe(e){var t=o_(e,2),r=t[0],n=t[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function hhe(e,t,r){if(e.lte(0))return new dn(0);var n=WO.getDigitCount(e.toNumber()),i=new dn(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new dn(Math.ceil(a.div(s).toNumber())).add(r).mul(s),l=o.mul(i);return t?l:new dn(Math.ceil(l))}function glt(e,t,r){var n=1,i=new dn(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new dn(10).pow(WO.getDigitCount(e)-1),i=new dn(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new dn(Math.floor(e)))}else e===0?i=new dn(Math.floor((t-1)/2)):r||(i=new dn(Math.floor(e)));var s=Math.floor((t-1)/2),o=ilt(nlt(function(l){return i.add(new dn(l-s).mul(n)).toNumber()}),HM);return o(0,t)}function phe(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new dn(0),tickMin:new dn(0),tickMax:new dn(0)};var a=hhe(new dn(t).sub(e).div(r-1),n,i),s;e<=0&&t>=0?s=new dn(0):(s=new dn(e).add(t).div(2),s=s.sub(new dn(s).mod(a)));var o=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new dn(t).sub(s).div(a).toNumber()),c=o+l+1;return c>r?phe(e,t,r,n,i+1):(c<r&&(l=t>0?l+(r-c):l,o=t>0?o:o+(r-c)),{step:a,tickMin:s.sub(new dn(o).mul(a)),tickMax:s.add(new dn(l).mul(a))})}function ylt(e){var t=o_(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=dhe([r,n]),l=o_(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var f=u===1/0?[c].concat(qM(HM(0,i-1).map(function(){return 1/0}))):[].concat(qM(HM(0,i-1).map(function(){return-1/0})),[u]);return r>n?GM(f):f}if(c===u)return glt(c,i,a);var d=phe(c,u,s,a),h=d.step,m=d.tickMin,p=d.tickMax,y=WO.rangeStep(m,p.add(new dn(.1).mul(h)),h);return r>n?GM(y):y}function vlt(e,t){var r=o_(e,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=dhe([n,i]),o=o_(s,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[n,i];if(l===c)return[l];var u=Math.max(t,2),f=hhe(new dn(c).sub(l).div(u-1),a,0),d=[].concat(qM(WO.rangeStep(new dn(l),new dn(c).sub(new dn(.99).mul(f)),f)),[c]);return n>i?GM(d):d}var wlt=uhe(ylt),xlt=uhe(vlt),blt="Invariant failed";function fm(e,t){throw new Error(blt)}var _lt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function Qk(){return Qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qk.apply(this,arguments)}function Slt(e,t){return klt(e)||Tlt(e,t)||Alt(e,t)||Elt()}function Elt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Alt(e,t){if(e){if(typeof e=="string")return pK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pK(e,t)}}function pK(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tlt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function klt(e){if(Array.isArray(e))return e}function Clt(e,t){if(e==null)return{};var r=Olt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Olt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Plt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nlt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yhe(n.key),n)}}function Ilt(e,t,r){return t&&Nlt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rlt(e,t,r){return t=e5(t),Llt(e,mhe()?Reflect.construct(t,r||[],e5(e).constructor):t.apply(e,r))}function Llt(e,t){if(t&&(Sv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mlt(e)}function Mlt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mhe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mhe=function(){return!!e})()}function e5(e){return e5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e5(e)}function Dlt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YM(e,t)}function YM(e,t){return YM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},YM(e,t)}function ghe(e,t,r){return t=yhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yhe(e){var t=jlt(e,"string");return Sv(t)=="symbol"?t:t+""}function jlt(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HO=function(e){function t(){return Plt(this,t),Rlt(this,t,arguments)}return Dlt(t,e),Ilt(t,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,o=n.dataKey,l=n.data,c=n.dataPointFormatter,u=n.xAxis,f=n.yAxis,d=Clt(n,_lt),h=rr(d,!1);this.props.direction==="x"&&u.type!=="number"&&fm();var m=l.map(function(p){var y=c(p,o),g=y.x,w=y.y,v=y.value,x=y.errorVal;if(!x)return null;var b=[],S,T;if(Array.isArray(x)){var A=Slt(x,2);S=A[0],T=A[1]}else S=T=x;if(a==="vertical"){var O=u.scale,M=w+i,P=M+s,N=M-s,V=O(v-S),B=O(v+T);b.push({x1:B,y1:P,x2:B,y2:N}),b.push({x1:V,y1:M,x2:B,y2:M}),b.push({x1:V,y1:P,x2:V,y2:N})}else if(a==="horizontal"){var G=f.scale,Z=g+i,J=Z-s,Y=Z+s,U=G(v-S),se=G(v+T);b.push({x1:J,y1:se,x2:Y,y2:se}),b.push({x1:Z,y1:U,x2:Z,y2:se}),b.push({x1:J,y1:U,x2:Y,y2:U})}return he.createElement(on,Qk({className:"recharts-errorBar",key:"bar-".concat(b.map(function(ue){return"".concat(ue.x1,"-").concat(ue.x2,"-").concat(ue.y1,"-").concat(ue.y2)}))},h),b.map(function(ue){return he.createElement("line",Qk({},ue,{key:"line-".concat(ue.x1,"-").concat(ue.x2,"-").concat(ue.y1,"-").concat(ue.y2)}))}))});return he.createElement(on,{className:"recharts-errorBars"},m)}}])}(he.Component);ghe(HO,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ghe(HO,"displayName","ErrorBar");function l_(e){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l_(e)}function mK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mK(Object(r),!0).forEach(function(n){$lt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $lt(e,t,r){return t=Flt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Flt(e){var t=Blt(e,"string");return l_(t)=="symbol"?t:t+""}function Blt(e,t){if(l_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(l_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vhe=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,s=Io(r,Iy);if(!s)return null;var o=Iy.defaultProps,l=o!==void 0?Gp(Gp({},o),s.props):{},c;return s.props&&s.props.payload?c=s.props&&s.props.payload:a==="children"?c=(n||[]).reduce(function(u,f){var d=f.item,h=f.props,m=h.sectors||h.data||[];return u.concat(m.map(function(p){return{type:s.props.iconType||d.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):c=(n||[]).map(function(u){var f=u.item,d=f.type.defaultProps,h=d!==void 0?Gp(Gp({},d),f.props):{},m=h.dataKey,p=h.name,y=h.legendType,g=h.hide;return{inactive:g,dataKey:m,type:l.iconType||y||"square",color:GF(f),value:p||m,payload:h}}),Gp(Gp(Gp({},l),Iy.getWithHeight(s,i)),{},{payload:c,item:s})};function c_(e){"@babel/helpers - typeof";return c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c_(e)}function gK(e){return Wlt(e)||Vlt(e)||zlt(e)||Ult()}function Ult(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zlt(e,t){if(e){if(typeof e=="string")return XM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XM(e,t)}}function Vlt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wlt(e){if(Array.isArray(e))return XM(e)}function XM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yK(Object(r),!0).forEach(function(n){Ly(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ly(e,t,r){return t=Hlt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hlt(e){var t=Glt(e,"string");return c_(t)=="symbol"?t:t+""}function Glt(e,t){if(c_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(c_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function os(e,t,r){return kr(e)||kr(t)?r:la(t)?qo(e,t,r):sr(t)?t(e):r}function Tx(e,t,r,n){var i=Vot(e,function(o){return os(o,t)});if(r==="number"){var a=i.filter(function(o){return ht(o)||parseFloat(o)});return a.length?[UO(a),BO(a)]:[1/0,-1/0]}var s=n?i.filter(function(o){return!kr(o)}):i;return s.map(function(o){return la(o)||o instanceof Date?o:""})}var qlt=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<o;c++){var u=c>0?i[c-1].coordinate:i[o-1].coordinate,f=i[c].coordinate,d=c>=o-1?i[0].coordinate:i[c+1].coordinate,h=void 0;if(Rs(f-u)!==Rs(d-f)){var m=[];if(Rs(d-f)===Rs(l[1]-l[0])){h=d;var p=f+l[1]-l[0];m[0]=Math.min(p,(p+u)/2),m[1]=Math.max(p,(p+u)/2)}else{h=u;var y=d+l[1]-l[0];m[0]=Math.min(f,(y+f)/2),m[1]=Math.max(f,(y+f)/2)}var g=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>g[0]&&t<=g[1]||t>=m[0]&&t<=m[1]){s=i[c].index;break}}else{var w=Math.min(u,d),v=Math.max(u,d);if(t>(w+f)/2&&t<=(v+f)/2){s=i[c].index;break}}}else for(var x=0;x<o;x++)if(x===0&&t<=(n[x].coordinate+n[x+1].coordinate)/2||x>0&&x<o-1&&t>(n[x].coordinate+n[x-1].coordinate)/2&&t<=(n[x].coordinate+n[x+1].coordinate)/2||x===o-1&&t>(n[x].coordinate+n[x-1].coordinate)/2){s=n[x].index;break}return s},GF=function(t){var r,n=t,i=n.type.displayName,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ui(ui({},t.type.defaultProps),t.props):t.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},Klt=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,c=o.length;l<c;l++)for(var u=a[o[l]].stackGroups,f=Object.keys(u),d=0,h=f.length;d<h;d++){var m=u[f[d]],p=m.items,y=m.cateAxisId,g=p.filter(function(T){return Wf(T.type).indexOf("Bar")>=0});if(g&&g.length){var w=g[0].type.defaultProps,v=w!==void 0?ui(ui({},w),g[0].props):g[0].props,x=v.barSize,b=v[y];s[b]||(s[b]=[]);var S=kr(x)?r:x;s[b].push({item:g[0],stackList:g.slice(1),barSize:kr(S)?void 0:Ls(S,n,0)})}}return s},Ylt=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,a=t.sizeList,s=a===void 0?[]:a,o=t.maxBarSize,l=s.length;if(l<1)return null;var c=Ls(r,i,0,!0),u,f=[];if(s[0].barSize===+s[0].barSize){var d=!1,h=i/l,m=s.reduce(function(x,b){return x+b.barSize||0},0);m+=(l-1)*c,m>=i&&(m-=(l-1)*c,c=0),m>=i&&h>0&&(d=!0,h*=.9,m=l*h);var p=(i-m)/2>>0,y={offset:p-c,size:0};u=s.reduce(function(x,b){var S={item:b.item,position:{offset:y.offset+y.size+c,size:d?h:b.barSize}},T=[].concat(gK(x),[S]);return y=T[T.length-1].position,b.stackList&&b.stackList.length&&b.stackList.forEach(function(A){T.push({item:A,position:y})}),T},f)}else{var g=Ls(n,i,0,!0);i-2*g-(l-1)*c<=0&&(c=0);var w=(i-2*g-(l-1)*c)/l;w>1&&(w>>=0);var v=o===+o?Math.min(w,o):w;u=s.reduce(function(x,b,S){var T=[].concat(gK(x),[{item:b.item,position:{offset:g+(w+c)*S+(w-v)/2,size:v}}]);return b.stackList&&b.stackList.length&&b.stackList.forEach(function(A){T.push({item:A,position:T[T.length-1].position})}),T},f)}return u},Xlt=function(t,r,n,i){var a=n.children,s=n.width,o=n.margin,l=s-(o.left||0)-(o.right||0),c=vhe({children:a,legendWidth:l});if(c){var u=i||{},f=u.width,d=u.height,h=c.align,m=c.verticalAlign,p=c.layout;if((p==="vertical"||p==="horizontal"&&m==="middle")&&h!=="center"&&ht(t[h]))return ui(ui({},t),{},Ly({},h,t[h]+(f||0)));if((p==="horizontal"||p==="vertical"&&h==="center")&&m!=="middle"&&ht(t[m]))return ui(ui({},t),{},Ly({},m,t[m]+(d||0)))}return t},Zlt=function(t,r,n){return kr(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},whe=function(t,r,n,i,a){var s=r.props.children,o=Il(s,HO).filter(function(c){return Zlt(i,a,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return t.reduce(function(c,u){var f=os(u,n);if(kr(f))return c;var d=Array.isArray(f)?[UO(f),BO(f)]:[f,f],h=l.reduce(function(m,p){var y=os(u,p,0),g=d[0]-Math.abs(Array.isArray(y)?y[0]:y),w=d[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(g,m[0]),Math.max(w,m[1])]},[1/0,-1/0]);return[Math.min(h[0],c[0]),Math.max(h[1],c[1])]},[1/0,-1/0])}return null},Jlt=function(t,r,n,i,a){var s=r.map(function(o){return whe(t,o,n,a,i)}).filter(function(o){return!kr(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},xhe=function(t,r,n,i,a){var s=r.map(function(l){var c=l.props.dataKey;return n==="number"&&c&&whe(t,l,c,i)||Tx(t,c,n,a)});if(n==="number")return s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,c){for(var u=0,f=c.length;u<f;u++)o[c[u]]||(o[c[u]]=!0,l.push(c[u]));return l},[])},bhe=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},_he=function(t,r,n,i){if(i)return t.map(function(l){return l.coordinate});var a,s,o=t.map(function(l){return l.coordinate===r&&(a=!0),l.coordinate===n&&(s=!0),l.coordinate});return a||o.push(r),s||o.push(n),o},Mf=function(t,r,n){if(!t)return null;var i=t.scale,a=t.duplicateDomain,s=t.type,o=t.range,l=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Rs(o[0]-o[1])*2*c:c,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var d=a?a.indexOf(f):f;return{coordinate:i(d)+c,value:f,offset:c}});return u.filter(function(f){return!k2(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,d){return{coordinate:i(f)+c,value:f,index:d,offset:c}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,d){return{coordinate:i(f)+c,value:a?a[f]:f,index:d,offset:c}})},CI=new WeakMap,ME=function(t,r){if(typeof r!="function")return t;CI.has(t)||CI.set(t,new WeakMap);var n=CI.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},She=function(t,r,n){var i=t.scale,a=t.type,s=t.layout,o=t.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:t_(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Kk(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ax(),realScaleType:"point"}:a==="category"?{scale:t_(),realScaleType:"band"}:{scale:Kk(),realScaleType:"linear"};if(om(i)){var l="scale".concat(AO(i));return{scale:(uK[l]||Ax)(),realScaleType:uK[l]?l:"point"}}return sr(i)?{scale:i}:{scale:Ax(),realScaleType:"point"}},vK=1e-4,Ehe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),a=Math.min(i[0],i[1])-vK,s=Math.max(i[0],i[1])+vK,o=t(r[0]),l=t(r[n-1]);(o<a||o>s||l<a||l>s)&&t.domain([r[0],r[n-1]])}},Qlt=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},ect=function(t,r){if(!r||r.length!==2||!ht(r[0])||!ht(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[t[0],t[1]];return(!ht(t[0])||t[0]<n)&&(a[0]=n),(!ht(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},tct=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var a=0,s=0,o=0;o<r;++o){var l=k2(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=a,t[o][n][1]=a+l,a=t[o][n][1]):(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1])}},rct=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var o=k2(t[s][n][1])?t[s][n][0]:t[s][n][1];o>=0?(t[s][n][0]=a,t[s][n][1]=a+o,a=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},nct={sign:tct,expand:xYe,none:mv,silhouette:bYe,wiggle:_Ye,positive:rct},ict=function(t,r,n){var i=r.map(function(o){return o.props.dataKey}),a=nct[n],s=wYe().keys(i).value(function(o,l){return+os(o,l,0)}).order(bM).offset(a);return s(t)},act=function(t,r,n,i,a,s){if(!t)return null;var o=s?r.reverse():r,l={},c=o.reduce(function(f,d){var h,m=(h=d.type)!==null&&h!==void 0&&h.defaultProps?ui(ui({},d.type.defaultProps),d.props):d.props,p=m.stackId,y=m.hide;if(y)return f;var g=m[n],w=f[g]||{hasStack:!1,stackGroups:{}};if(la(p)){var v=w.stackGroups[p]||{numericAxisId:n,cateAxisId:i,items:[]};v.items.push(d),w.hasStack=!0,w.stackGroups[p]=v}else w.stackGroups[C2("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[d]};return ui(ui({},f),{},Ly({},g,w))},l),u={};return Object.keys(c).reduce(function(f,d){var h=c[d];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(p,y){var g=h.stackGroups[y];return ui(ui({},p),{},Ly({},y,{numericAxisId:n,cateAxisId:i,items:g.items,stackedData:ict(t,g.items,a)}))},m)}return ui(ui({},f),{},Ly({},d,h))},u)},Ahe=function(t,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,o=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var c=t.domain();if(!c.length)return null;var u=wlt(c,a,o);return t.domain([UO(u),BO(u)]),{niceTicks:u}}if(a&&i==="number"){var f=t.domain(),d=xlt(f,a,o);return{niceTicks:d}}return null},wK=function(t){var r=t.axis,n=t.ticks,i=t.offset,a=t.bandSize,s=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+i:null;var l=os(s,r.dataKey,r.domain[o]);return kr(l)?null:r.scale(l)-a/2+i},sct=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},oct=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ui(ui({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(la(a)){var s=r[a];if(s){var o=s.items.indexOf(t);return o>=0?s.stackedData[o]:null}}return null},lct=function(t){return t.reduce(function(r,n){return[UO(n.concat([r[0]]).filter(ht)),BO(n.concat([r[1]]).filter(ht))]},[1/0,-1/0])},The=function(t,r,n){return Object.keys(t).reduce(function(i,a){var s=t[a],o=s.stackedData,l=o.reduce(function(c,u){var f=lct(u.slice(r,n+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},xK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZM=function(t,r,n){if(sr(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(ht(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(xK.test(t[0])){var a=+xK.exec(t[0])[1];i[0]=r[0]-a}else sr(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(ht(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(bK.test(t[1])){var s=+bK.exec(t[1])[1];i[1]=r[1]+s}else sr(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},t5=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var a=xF(r,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},_K=function(t,r,n){return!t||!t.length||zO(t,qo(n,"type.defaultProps.domain"))?r:t},khe=function(t,r){var n=t.type.defaultProps?ui(ui({},t.type.defaultProps),t.props):t.props,i=n.dataKey,a=n.name,s=n.unit,o=n.formatter,l=n.tooltipType,c=n.chartType,u=n.hide;return ui(ui({},rr(t,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:GF(t),value:os(r,i),type:l,payload:r,chartType:c,hide:u})};function u_(e){"@babel/helpers - typeof";return u_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u_(e)}function SK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _f(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SK(Object(r),!0).forEach(function(n){Che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t,r){return t=cct(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cct(e){var t=uct(e,"string");return u_(t)=="symbol"?t:t+""}function uct(e,t){if(u_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(u_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fct(e,t){return mct(e)||pct(e,t)||hct(e,t)||dct()}function dct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hct(e,t){if(e){if(typeof e=="string")return EK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EK(e,t)}}function EK(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pct(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function mct(e){if(Array.isArray(e))return e}var r5=Math.PI/180,gct=function(t){return t*180/Math.PI},On=function(t,r,n,i){return{x:t+Math.cos(-r5*i)*n,y:r+Math.sin(-r5*i)*n}},Ohe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},yct=function(t,r,n,i,a){var s=t.width,o=t.height,l=t.startAngle,c=t.endAngle,u=Ls(t.cx,s,s/2),f=Ls(t.cy,o,o/2),d=Ohe(s,o,n),h=Ls(t.innerRadius,d,0),m=Ls(t.outerRadius,d,d*.8),p=Object.keys(r);return p.reduce(function(y,g){var w=r[g],v=w.domain,x=w.reversed,b;if(kr(w.range))i==="angleAxis"?b=[l,c]:i==="radiusAxis"&&(b=[h,m]),x&&(b=[b[1],b[0]]);else{b=w.range;var S=b,T=fct(S,2);l=T[0],c=T[1]}var A=She(w,a),O=A.realScaleType,M=A.scale;M.domain(v).range(b),Ehe(M);var P=Ahe(M,_f(_f({},w),{},{realScaleType:O})),N=_f(_f(_f({},w),P),{},{range:b,radius:m,realScaleType:O,scale:M,cx:u,cy:f,innerRadius:h,outerRadius:m,startAngle:l,endAngle:c});return _f(_f({},y),{},Che({},g,N))},{})},vct=function(t,r){var n=t.x,i=t.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},wct=function(t,r){var n=t.x,i=t.y,a=r.cx,s=r.cy,o=vct({x:n,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(n-a)/o,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:o,angle:gct(c),angleInRadian:c}},xct=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},bct=function(t,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),o=Math.min(a,s);return t+o*360},AK=function(t,r){var n=t.x,i=t.y,a=wct({x:n,y:i},r),s=a.radius,o=a.angle,l=r.innerRadius,c=r.outerRadius;if(s<l||s>c)return!1;if(s===0)return!0;var u=xct(r),f=u.startAngle,d=u.endAngle,h=o,m;if(f<=d){for(;h>d;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=d}else{for(;h>f;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=f}return m?_f(_f({},r),{},{radius:s,angle:bct(h,r)}):null},Phe=function(t){return!C.isValidElement(t)&&!sr(t)&&typeof t!="boolean"?t.className:""};function f_(e){"@babel/helpers - typeof";return f_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f_(e)}var _ct=["offset"];function Sct(e){return kct(e)||Tct(e)||Act(e)||Ect()}function Ect(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Act(e,t){if(e){if(typeof e=="string")return JM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JM(e,t)}}function Tct(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kct(e){if(Array.isArray(e))return JM(e)}function JM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cct(e,t){if(e==null)return{};var r=Oct(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oct(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TK(Object(r),!0).forEach(function(n){Pct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pct(e,t,r){return t=Nct(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nct(e){var t=Ict(e,"string");return f_(t)=="symbol"?t:t+""}function Ict(e,t){if(f_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(f_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d_(){return d_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d_.apply(this,arguments)}var Rct=function(t){var r=t.value,n=t.formatter,i=kr(t.children)?r:t.children;return sr(n)?n(i):i},Lct=function(t,r){var n=Rs(r-t),i=Math.min(Math.abs(r-t),360);return n*i},Mct=function(t,r,n){var i=t.position,a=t.viewBox,s=t.offset,o=t.className,l=a,c=l.cx,u=l.cy,f=l.innerRadius,d=l.outerRadius,h=l.startAngle,m=l.endAngle,p=l.clockWise,y=(f+d)/2,g=Lct(h,m),w=g>=0?1:-1,v,x;i==="insideStart"?(v=h+w*s,x=p):i==="insideEnd"?(v=m-w*s,x=!p):i==="end"&&(v=m+w*s,x=p),x=g<=0?x:!x;var b=On(c,u,y,v),S=On(c,u,y,v+(x?1:-1)*359),T="M".concat(b.x,",").concat(b.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(x?0:1,`,
    `).concat(S.x,",").concat(S.y),A=kr(t.id)?C2("recharts-radial-line-"):t.id;return he.createElement("text",d_({},n,{dominantBaseline:"central",className:_r("recharts-radial-bar-label",o)}),he.createElement("defs",null,he.createElement("path",{id:A,d:T})),he.createElement("textPath",{xlinkHref:"#".concat(A)},r))},Dct=function(t){var r=t.viewBox,n=t.offset,i=t.position,a=r,s=a.cx,o=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,f=a.endAngle,d=(u+f)/2;if(i==="outside"){var h=On(s,o,c+n,d),m=h.x,p=h.y;return{x:m,y:p,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,g=On(s,o,y,d),w=g.x,v=g.y;return{x:w,y:v,textAnchor:"middle",verticalAnchor:"middle"}},jct=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,a=t.position,s=r,o=s.x,l=s.y,c=s.width,u=s.height,f=u>=0?1:-1,d=f*i,h=f>0?"end":"start",m=f>0?"start":"end",p=c>=0?1:-1,y=p*i,g=p>0?"end":"start",w=p>0?"start":"end";if(a==="top"){var v={x:o+c/2,y:l-f*i,textAnchor:"middle",verticalAnchor:h};return Qi(Qi({},v),n?{height:Math.max(l-n.y,0),width:c}:{})}if(a==="bottom"){var x={x:o+c/2,y:l+u+d,textAnchor:"middle",verticalAnchor:m};return Qi(Qi({},x),n?{height:Math.max(n.y+n.height-(l+u),0),width:c}:{})}if(a==="left"){var b={x:o-y,y:l+u/2,textAnchor:g,verticalAnchor:"middle"};return Qi(Qi({},b),n?{width:Math.max(b.x-n.x,0),height:u}:{})}if(a==="right"){var S={x:o+c+y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return Qi(Qi({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:u}:{})}var T=n?{width:c,height:u}:{};return a==="insideLeft"?Qi({x:o+y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},T):a==="insideRight"?Qi({x:o+c-y,y:l+u/2,textAnchor:g,verticalAnchor:"middle"},T):a==="insideTop"?Qi({x:o+c/2,y:l+d,textAnchor:"middle",verticalAnchor:m},T):a==="insideBottom"?Qi({x:o+c/2,y:l+u-d,textAnchor:"middle",verticalAnchor:h},T):a==="insideTopLeft"?Qi({x:o+y,y:l+d,textAnchor:w,verticalAnchor:m},T):a==="insideTopRight"?Qi({x:o+c-y,y:l+d,textAnchor:g,verticalAnchor:m},T):a==="insideBottomLeft"?Qi({x:o+y,y:l+u-d,textAnchor:w,verticalAnchor:h},T):a==="insideBottomRight"?Qi({x:o+c-y,y:l+u-d,textAnchor:g,verticalAnchor:h},T):h1(a)&&(ht(a.x)||_0(a.x))&&(ht(a.y)||_0(a.y))?Qi({x:o+Ls(a.x,c),y:l+Ls(a.y,u),textAnchor:"end",verticalAnchor:"end"},T):Qi({x:o+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},$ct=function(t){return"cx"in t&&ht(t.cx)};function Bi(e){var t=e.offset,r=t===void 0?5:t,n=Cct(e,_ct),i=Qi({offset:r},n),a=i.viewBox,s=i.position,o=i.value,l=i.children,c=i.content,u=i.className,f=u===void 0?"":u,d=i.textBreakAll;if(!a||kr(o)&&kr(l)&&!C.isValidElement(c)&&!sr(c))return null;if(C.isValidElement(c))return C.cloneElement(c,i);var h;if(sr(c)){if(h=C.createElement(c,i),C.isValidElement(h))return h}else h=Rct(i);var m=$ct(a),p=rr(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Mct(i,h,p);var y=m?Dct(i):jct(i);return he.createElement(cm,d_({className:_r("recharts-label",f)},p,y,{breakAll:d}),h)}Bi.displayName="Label";var Nhe=function(t){var r=t.cx,n=t.cy,i=t.angle,a=t.startAngle,s=t.endAngle,o=t.r,l=t.radius,c=t.innerRadius,u=t.outerRadius,f=t.x,d=t.y,h=t.top,m=t.left,p=t.width,y=t.height,g=t.clockWise,w=t.labelViewBox;if(w)return w;if(ht(p)&&ht(y)){if(ht(f)&&ht(d))return{x:f,y:d,width:p,height:y};if(ht(h)&&ht(m))return{x:h,y:m,width:p,height:y}}return ht(f)&&ht(d)?{x:f,y:d,width:0,height:0}:ht(r)&&ht(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:g}:t.viewBox?t.viewBox:{}},Fct=function(t,r){return t?t===!0?he.createElement(Bi,{key:"label-implicit",viewBox:r}):la(t)?he.createElement(Bi,{key:"label-implicit",viewBox:r,value:t}):C.isValidElement(t)?t.type===Bi?C.cloneElement(t,{key:"label-implicit",viewBox:r}):he.createElement(Bi,{key:"label-implicit",content:t,viewBox:r}):sr(t)?he.createElement(Bi,{key:"label-implicit",content:t,viewBox:r}):h1(t)?he.createElement(Bi,d_({viewBox:r},t,{key:"label-implicit"})):null:null},Bct=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,a=Nhe(t),s=Il(i,Bi).map(function(l,c){return C.cloneElement(l,{viewBox:r||a,key:"label-".concat(c)})});if(!n)return s;var o=Fct(t.label,r||a);return[o].concat(Sct(s))};Bi.parseViewBox=Nhe;Bi.renderCallByParent=Bct;function Uct(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var zct=Uct;const Vct=Hr(zct);function h_(e){"@babel/helpers - typeof";return h_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h_(e)}var Wct=["valueAccessor"],Hct=["data","dataKey","clockWise","id","textBreakAll"];function Gct(e){return Xct(e)||Yct(e)||Kct(e)||qct()}function qct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kct(e,t){if(e){if(typeof e=="string")return QM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QM(e,t)}}function Yct(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xct(e){if(Array.isArray(e))return QM(e)}function QM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n5(){return n5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n5.apply(this,arguments)}function kK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kK(Object(r),!0).forEach(function(n){Zct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zct(e,t,r){return t=Jct(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jct(e){var t=Qct(e,"string");return h_(t)=="symbol"?t:t+""}function Qct(e,t){if(h_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(h_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OK(e,t){if(e==null)return{};var r=eut(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eut(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var tut=function(t){return Array.isArray(t.value)?Vct(t.value):t.value};function Wh(e){var t=e.valueAccessor,r=t===void 0?tut:t,n=OK(e,Wct),i=n.data,a=n.dataKey,s=n.clockWise,o=n.id,l=n.textBreakAll,c=OK(n,Hct);return!i||!i.length?null:he.createElement(on,{className:"recharts-label-list"},i.map(function(u,f){var d=kr(a)?r(u,f):os(u&&u.payload,a),h=kr(o)?{}:{id:"".concat(o,"-").concat(f)};return he.createElement(Bi,n5({},rr(u,!0),c,h,{parentViewBox:u.parentViewBox,value:d,textBreakAll:l,viewBox:Bi.parseViewBox(kr(s)?u:CK(CK({},u),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}Wh.displayName="LabelList";function rut(e,t){return e?e===!0?he.createElement(Wh,{key:"labelList-implicit",data:t}):he.isValidElement(e)||sr(e)?he.createElement(Wh,{key:"labelList-implicit",data:t,content:e}):h1(e)?he.createElement(Wh,n5({data:t},e,{key:"labelList-implicit"})):null:null}function nut(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=Il(n,Wh).map(function(s,o){return C.cloneElement(s,{data:t,key:"labelList-".concat(o)})});if(!r)return i;var a=rut(e.label,t);return[a].concat(Gct(i))}Wh.renderCallByParent=nut;function p_(e){"@babel/helpers - typeof";return p_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p_(e)}function eD(){return eD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eD.apply(this,arguments)}function PK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PK(Object(r),!0).forEach(function(n){iut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iut(e,t,r){return t=aut(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aut(e){var t=sut(e,"string");return p_(t)=="symbol"?t:t+""}function sut(e,t){if(p_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(p_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var out=function(t,r){var n=Rs(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},DE=function(t){var r=t.cx,n=t.cy,i=t.radius,a=t.angle,s=t.sign,o=t.isExternal,l=t.cornerRadius,c=t.cornerIsExternal,u=l*(o?1:-1)+i,f=Math.asin(l/u)/r5,d=c?a:a+s*f,h=On(r,n,u,d),m=On(r,n,i,d),p=c?a-s*f:a,y=On(r,n,u*Math.cos(f*r5),p);return{center:h,circleTangency:m,lineTangency:y,theta:f}},Ihe=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.startAngle,o=t.endAngle,l=out(s,o),c=s+l,u=On(r,n,a,s),f=On(r,n,a,c),d="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=On(r,n,i,s),m=On(r,n,i,c);d+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else d+="L ".concat(r,",").concat(n," Z");return d},lut=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,u=t.endAngle,f=Rs(u-c),d=DE({cx:r,cy:n,radius:a,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),h=d.circleTangency,m=d.lineTangency,p=d.theta,y=DE({cx:r,cy:n,radius:a,angle:u,sign:-f,cornerRadius:s,cornerIsExternal:l}),g=y.circleTangency,w=y.lineTangency,v=y.theta,x=l?Math.abs(c-u):Math.abs(c-u)-p-v;if(x<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Ihe({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var b="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var S=DE({cx:r,cy:n,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),T=S.circleTangency,A=S.lineTangency,O=S.theta,M=DE({cx:r,cy:n,radius:i,angle:u,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),P=M.circleTangency,N=M.lineTangency,V=M.theta,B=l?Math.abs(c-u):Math.abs(c-u)-O-V;if(B<0&&s===0)return"".concat(b,"L").concat(r,",").concat(n,"Z");b+="L".concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(f>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else b+="L".concat(r,",").concat(n,"Z");return b},cut={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Rhe=function(t){var r=NK(NK({},cut),t),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,c=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,d=r.className;if(s<a||u===f)return null;var h=_r("recharts-sector",d),m=s-a,p=Ls(o,m,0,!0),y;return p>0&&Math.abs(u-f)<360?y=lut({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(p,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:f}):y=Ihe({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f}),he.createElement("path",eD({},rr(r,!0),{className:h,d:y,role:"img"}))};function m_(e){"@babel/helpers - typeof";return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m_(e)}function tD(){return tD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tD.apply(this,arguments)}function IK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function RK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IK(Object(r),!0).forEach(function(n){uut(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uut(e,t,r){return t=fut(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fut(e){var t=dut(e,"string");return m_(t)=="symbol"?t:t+""}function dut(e,t){if(m_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(m_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LK={curveBasisClosed:lYe,curveBasisOpen:cYe,curveBasis:oYe,curveBumpX:qKe,curveBumpY:KKe,curveLinearClosed:uYe,curveLinear:kO,curveMonotoneX:fYe,curveMonotoneY:dYe,curveNatural:hYe,curveStep:pYe,curveStepAfter:gYe,curveStepBefore:mYe},jE=function(t){return t.x===+t.x&&t.y===+t.y},Ew=function(t){return t.x},Aw=function(t){return t.y},hut=function(t,r){if(sr(t))return t;var n="curve".concat(AO(t));return(n==="curveMonotone"||n==="curveBump")&&r?LK["".concat(n).concat(r==="vertical"?"Y":"X")]:LK[n]||kO},put=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,a=i===void 0?[]:i,s=t.baseLine,o=t.layout,l=t.connectNulls,c=l===void 0?!1:l,u=hut(n,o),f=c?a.filter(function(p){return jE(p)}):a,d;if(Array.isArray(s)){var h=c?s.filter(function(p){return jE(p)}):s,m=f.map(function(p,y){return RK(RK({},p),{},{base:h[y]})});return o==="vertical"?d=kE().y(Aw).x1(Ew).x0(function(p){return p.base.x}):d=kE().x(Ew).y1(Aw).y0(function(p){return p.base.y}),d.defined(jE).curve(u),d(m)}return o==="vertical"&&ht(s)?d=kE().y(Aw).x1(Ew).x0(s):ht(s)?d=kE().x(Ew).y1(Aw).y0(s):d=kfe().x(Ew).y(Aw),d.defined(jE).curve(u),d(f)},rD=function(t){var r=t.className,n=t.points,i=t.path,a=t.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?put(t):i;return C.createElement("path",tD({},rr(t,!1),kk(t),{className:_r("recharts-curve",r),d:s,ref:a}))},Lhe={exports:{}},mut="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gut=mut,yut=gut;function Mhe(){}function Dhe(){}Dhe.resetWarningCache=Mhe;var vut=function(){function e(n,i,a,s,o,l){if(l!==yut){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Dhe,resetWarningCache:Mhe};return r.PropTypes=r,r};Lhe.exports=vut();var wut=Lhe.exports;const Jr=Hr(wut),{getOwnPropertyNames:xut,getOwnPropertySymbols:but}=Object,{hasOwnProperty:_ut}=Object.prototype;function OI(e,t){return function(n,i,a){return e(n,i,a)&&t(n,i,a)}}function $E(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);const{cache:a}=i,s=a.get(r),o=a.get(n);if(s&&o)return s===n&&o===r;a.set(r,n),a.set(n,r);const l=e(r,n,i);return a.delete(r),a.delete(n),l}}function Sut(e){return e!=null?e[Symbol.toStringTag]:void 0}function MK(e){return xut(e).concat(but(e))}const Eut=Object.hasOwn||((e,t)=>_ut.call(e,t));function Nm(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Aut="__v",Tut="__o",kut="_owner",{getOwnPropertyDescriptor:DK,keys:jK}=Object;function Cut(e,t){return e.byteLength===t.byteLength&&i5(new Uint8Array(e),new Uint8Array(t))}function Out(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Put(e,t){return e.byteLength===t.byteLength&&i5(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Nut(e,t){return Nm(e.getTime(),t.getTime())}function Iut(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Rut(e,t){return e===t}function $K(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const i=new Array(n),a=e.entries();let s,o,l=0;for(;(s=a.next())&&!s.done;){const c=t.entries();let u=!1,f=0;for(;(o=c.next())&&!o.done;){if(i[f]){f++;continue}const d=s.value,h=o.value;if(r.equals(d[0],h[0],l,f,e,t,r)&&r.equals(d[1],h[1],d[0],h[0],e,t,r)){u=i[f]=!0;break}f++}if(!u)return!1;l++}return!0}const Lut=Nm;function Mut(e,t,r){const n=jK(e);let i=n.length;if(jK(t).length!==i)return!1;for(;i-- >0;)if(!jhe(e,t,r,n[i]))return!1;return!0}function Tw(e,t,r){const n=MK(e);let i=n.length;if(MK(t).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=n[i],!jhe(e,t,r,a)||(s=DK(e,a),o=DK(t,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Dut(e,t){return Nm(e.valueOf(),t.valueOf())}function jut(e,t){return e.source===t.source&&e.flags===t.flags}function FK(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const i=new Array(n),a=e.values();let s,o;for(;(s=a.next())&&!s.done;){const l=t.values();let c=!1,u=0;for(;(o=l.next())&&!o.done;){if(!i[u]&&r.equals(s.value,o.value,s.value,o.value,e,t,r)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function i5(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function $ut(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function jhe(e,t,r,n){return(n===kut||n===Tut||n===Aut)&&(e.$$typeof||t.$$typeof)?!0:Eut(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const Fut="[object ArrayBuffer]",But="[object Arguments]",Uut="[object Boolean]",zut="[object DataView]",Vut="[object Date]",Wut="[object Error]",Hut="[object Map]",Gut="[object Number]",qut="[object Object]",Kut="[object RegExp]",Yut="[object Set]",Xut="[object String]",Zut={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Jut="[object URL]",Qut=Object.prototype.toString;function eft({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:d,areUrlsEqual:h,unknownTagComparators:m}){return function(y,g,w){if(y===g)return!0;if(y==null||g==null)return!1;const v=typeof y;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(y,g,w):v==="function"?a(y,g,w):!1;const x=y.constructor;if(x!==g.constructor)return!1;if(x===Object)return l(y,g,w);if(Array.isArray(y))return t(y,g,w);if(x===Date)return n(y,g,w);if(x===RegExp)return u(y,g,w);if(x===Map)return s(y,g,w);if(x===Set)return f(y,g,w);const b=Qut.call(y);if(b===Vut)return n(y,g,w);if(b===Kut)return u(y,g,w);if(b===Hut)return s(y,g,w);if(b===Yut)return f(y,g,w);if(b===qut)return typeof y.then!="function"&&typeof g.then!="function"&&l(y,g,w);if(b===Jut)return h(y,g,w);if(b===Wut)return i(y,g,w);if(b===But)return l(y,g,w);if(Zut[b])return d(y,g,w);if(b===Fut)return e(y,g,w);if(b===zut)return r(y,g,w);if(b===Uut||b===Gut||b===Xut)return c(y,g,w);if(m){let S=m[b];if(!S){const T=Sut(y);T&&(S=m[T])}if(S)return S(y,g,w)}return!1}}function tft({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Cut,areArraysEqual:r?Tw:Out,areDataViewsEqual:Put,areDatesEqual:Nut,areErrorsEqual:Iut,areFunctionsEqual:Rut,areMapsEqual:r?OI($K,Tw):$K,areNumbersEqual:Lut,areObjectsEqual:r?Tw:Mut,arePrimitiveWrappersEqual:Dut,areRegExpsEqual:jut,areSetsEqual:r?OI(FK,Tw):FK,areTypedArraysEqual:r?OI(i5,Tw):i5,areUrlsEqual:$ut,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const i=$E(n.areArraysEqual),a=$E(n.areMapsEqual),s=$E(n.areObjectsEqual),o=$E(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return n}function rft(e){return function(t,r,n,i,a,s,o){return e(t,r,o)}}function nft({circular:e,comparator:t,createState:r,equals:n,strict:i}){if(r)return function(o,l){const{cache:c=e?new WeakMap:void 0,meta:u}=r();return t(o,l,{cache:c,equals:n,meta:u,strict:i})};if(e)return function(o,l){return t(o,l,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(o,l){return t(o,l,a)}}const ift=Sp();Sp({strict:!0});Sp({circular:!0});Sp({circular:!0,strict:!0});Sp({createInternalComparator:()=>Nm});Sp({strict:!0,createInternalComparator:()=>Nm});Sp({circular:!0,createInternalComparator:()=>Nm});Sp({circular:!0,createInternalComparator:()=>Nm,strict:!0});function Sp(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:i=!1}=e,a=tft(e),s=eft(a),o=r?r(s):rft(s);return nft({circular:t,comparator:s,createState:n,equals:o,strict:i})}function aft(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function BK(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>t?(e(a),r=-1):aft(i)};requestAnimationFrame(n)}function nD(e){"@babel/helpers - typeof";return nD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nD(e)}function sft(e){return uft(e)||cft(e)||lft(e)||oft()}function oft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lft(e,t){if(e){if(typeof e=="string")return UK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UK(e,t)}}function UK(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uft(e){if(Array.isArray(e))return e}function fft(){var e={},t=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,o=sft(s),l=o[0],c=o.slice(1);if(typeof l=="number"){BK(i.bind(null,c),l);return}i(l),BK(i.bind(null,c));return}nD(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function g_(e){"@babel/helpers - typeof";return g_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g_(e)}function zK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zK(Object(r),!0).forEach(function(n){$he(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $he(e,t,r){return t=dft(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dft(e){var t=hft(e,"string");return g_(t)==="symbol"?t:String(t)}function hft(e,t){if(g_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(g_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pft=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},mft=function(t){return t},gft=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},kx=function(t,r){return Object.keys(r).reduce(function(n,i){return VK(VK({},n),{},$he({},i,t(i,r[i])))},{})},WK=function(t,r,n){return t.map(function(i){return"".concat(gft(i)," ").concat(r,"ms ").concat(n)}).join(",")};function yft(e,t){return xft(e)||wft(e,t)||Fhe(e,t)||vft()}function vft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wft(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function xft(e){if(Array.isArray(e))return e}function bft(e){return Eft(e)||Sft(e)||Fhe(e)||_ft()}function _ft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fhe(e,t){if(e){if(typeof e=="string")return iD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iD(e,t)}}function Sft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Eft(e){if(Array.isArray(e))return iD(e)}function iD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a5=1e-4,Bhe=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Uhe=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},HK=function(t,r){return function(n){var i=Bhe(t,r);return Uhe(i,n)}},Aft=function(t,r){return function(n){var i=Bhe(t,r),a=[].concat(bft(i.map(function(s,o){return s*o}).slice(1)),[0]);return Uhe(a,n)}},GK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=yft(c,4);i=u[0],a=u[1],s=u[2],o=u[3]}}}var f=HK(i,s),d=HK(a,o),h=Aft(i,s),m=function(g){return g>1?1:g<0?0:g},p=function(g){for(var w=g>1?1:g,v=w,x=0;x<8;++x){var b=f(v)-w,S=h(v);if(Math.abs(b-w)<a5||S<a5)return d(v);v=m(v-b/S)}return d(v)};return p.isStepper=!1,p},Tft=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,a=i===void 0?8:i,s=t.dt,o=s===void 0?17:s,l=function(u,f,d){var h=-(u-f)*n,m=d*a,p=d+(h-m)*o/1e3,y=d*o/1e3+u;return Math.abs(y-f)<a5&&Math.abs(p)<a5?[f,0]:[y,p]};return l.isStepper=!0,l.dt=o,l},kft=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GK(i);case"spring":return Tft();default:if(i.split("(")[0]==="cubic-bezier")return GK(i)}return typeof i=="function"?i:null};function y_(e){"@babel/helpers - typeof";return y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y_(e)}function qK(e){return Pft(e)||Oft(e)||zhe(e)||Cft()}function Cft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pft(e){if(Array.isArray(e))return sD(e)}function KK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(r),!0).forEach(function(n){aD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aD(e,t,r){return t=Nft(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nft(e){var t=Ift(e,"string");return y_(t)==="symbol"?t:String(t)}function Ift(e,t){if(y_(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(y_(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rft(e,t){return Dft(e)||Mft(e,t)||zhe(e,t)||Lft()}function Lft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zhe(e,t){if(e){if(typeof e=="string")return sD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sD(e,t)}}function sD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mft(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Dft(e){if(Array.isArray(e))return e}var s5=function(t,r,n){return t+(r-t)*n},oD=function(t){var r=t.from,n=t.to;return r!==n},jft=function e(t,r,n){var i=kx(function(a,s){if(oD(s)){var o=t(s.from,s.to,s.velocity),l=Rft(o,2),c=l[0],u=l[1];return La(La({},s),{},{from:c,velocity:u})}return s},r);return n<1?kx(function(a,s){return oD(s)?La(La({},s),{},{velocity:s5(s.velocity,i[a].velocity,n),from:s5(s.from,i[a].from,n)}):s},r):e(t,i,n-1)};const $ft=function(e,t,r,n,i){var a=pft(e,t),s=a.reduce(function(y,g){return La(La({},y),{},aD({},g,[e[g],t[g]]))},{}),o=a.reduce(function(y,g){return La(La({},y),{},aD({},g,{from:e[g],velocity:0,to:t[g]}))},{}),l=-1,c,u,f=function(){return null},d=function(){return kx(function(g,w){return w.from},o)},h=function(){return!Object.values(o).filter(oD).length},m=function(g){c||(c=g);var w=g-c,v=w/r.dt;o=jft(r,o,v),i(La(La(La({},e),t),d())),c=g,h()||(l=requestAnimationFrame(f))},p=function(g){u||(u=g);var w=(g-u)/n,v=kx(function(b,S){return s5.apply(void 0,qK(S).concat([r(w)]))},s);if(i(La(La(La({},e),t),v)),w<1)l=requestAnimationFrame(f);else{var x=kx(function(b,S){return s5.apply(void 0,qK(S).concat([r(1)]))},s);i(La(La(La({},e),t),x))}};return f=r.isStepper?m:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}var Fft=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Bft(e,t){if(e==null)return{};var r=Uft(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Uft(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function PI(e){return Hft(e)||Wft(e)||Vft(e)||zft()}function zft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vft(e,t){if(e){if(typeof e=="string")return lD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lD(e,t)}}function Wft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hft(e){if(Array.isArray(e))return lD(e)}function lD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YK(Object(r),!0).forEach(function(n){qw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qw(e,t,r){return t=Vhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vhe(n.key),n)}}function Kft(e,t,r){return t&&qft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vhe(e){var t=Yft(e,"string");return Ev(t)==="symbol"?t:String(t)}function Yft(e,t){if(Ev(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ev(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cD(e,t)}function cD(e,t){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cD(e,t)}function Zft(e){var t=Jft();return function(){var n=o5(e),i;if(t){var a=o5(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return uD(this,i)}}function uD(e,t){if(t&&(Ev(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fD(e)}function fD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jft(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function o5(e){return o5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o5(e)}var fd=function(e){Xft(r,e);var t=Zft(r);function r(n,i){var a;Gft(this,r),a=t.call(this,n,i);var s=a.props,o=s.isActive,l=s.attributeName,c=s.from,u=s.to,f=s.steps,d=s.children,h=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(fD(a)),a.changeStyle=a.changeStyle.bind(fD(a)),!o||h<=0)return a.state={style:{}},typeof d=="function"&&(a.state={style:u}),uD(a);if(f&&f.length)a.state={style:f[0].style};else if(c){if(typeof d=="function")return a.state={style:c},uD(a);a.state={style:l?qw({},l,c):c}}else a.state={style:{}};return a}return Kft(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,f=a.from,d=this.state.style;if(o){if(!s){var h={style:l?qw({},l,u):u};this.state&&d&&(l&&d[l]!==u||!l&&d!==u)&&this.setState(h);return}if(!(ift(i.to,u)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||c?f:i.to;if(this.state&&d){var y={style:l?qw({},l,p):p};(l&&d[l]!==p||!l&&d!==p)&&this.setState(y)}this.runAnimation(nc(nc({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,c=i.easing,u=i.begin,f=i.onAnimationEnd,d=i.onAnimationStart,h=$ft(s,o,kft(c),l,this.changeStyle),m=function(){a.stopJSAnimation=h()};this.manager.start([d,u,m,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,c=s[0],u=c.style,f=c.duration,d=f===void 0?0:f,h=function(p,y,g){if(g===0)return p;var w=y.duration,v=y.easing,x=v===void 0?"ease":v,b=y.style,S=y.properties,T=y.onAnimationEnd,A=g>0?s[g-1]:y,O=S||Object.keys(b);if(typeof x=="function"||x==="spring")return[].concat(PI(p),[a.runJSAnimation.bind(a,{from:A.style,to:b,duration:w,easing:x}),w]);var M=WK(O,w,x),P=nc(nc(nc({},A.style),b),{},{transition:M});return[].concat(PI(p),[P,w,T]).filter(mft)};return this.manager.start([l].concat(PI(s.reduce(h,[u,Math.max(d,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=fft());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,f=i.onAnimationEnd,d=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(i);return}if(d.length>1){this.runStepAnimation(i);return}var p=o?qw({},o,l):l,y=WK(Object.keys(p),s,c);m.start([u,a,nc(nc({},p),{},{transition:y}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Bft(i,Fft),c=C.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!o||c===0||s<=0)return a;var f=function(h){var m=h.props,p=m.style,y=p===void 0?{}:p,g=m.className,w=C.cloneElement(h,nc(nc({},l),{},{style:nc(nc({},y),u),className:g}));return w};return c===1?f(C.Children.only(a)):he.createElement("div",null,C.Children.map(a,function(d){return f(d)}))}}]),r}(C.PureComponent);fd.displayName="Animate";fd.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};fd.propTypes={from:Jr.oneOfType([Jr.object,Jr.string]),to:Jr.oneOfType([Jr.object,Jr.string]),attributeName:Jr.string,duration:Jr.number,begin:Jr.number,easing:Jr.oneOfType([Jr.string,Jr.func]),steps:Jr.arrayOf(Jr.shape({duration:Jr.number.isRequired,style:Jr.object.isRequired,easing:Jr.oneOfType([Jr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Jr.func]),properties:Jr.arrayOf("string"),onAnimationEnd:Jr.func})),children:Jr.oneOfType([Jr.node,Jr.func]),isActive:Jr.bool,canBegin:Jr.bool,onAnimationEnd:Jr.func,shouldReAnimate:Jr.bool,onAnimationStart:Jr.func,onAnimationReStart:Jr.func};function v_(e){"@babel/helpers - typeof";return v_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v_(e)}function l5(){return l5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l5.apply(this,arguments)}function Qft(e,t){return ndt(e)||rdt(e,t)||tdt(e,t)||edt()}function edt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tdt(e,t){if(e){if(typeof e=="string")return XK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XK(e,t)}}function XK(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rdt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function ndt(e){if(Array.isArray(e))return e}function ZK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function JK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZK(Object(r),!0).forEach(function(n){idt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function idt(e,t,r){return t=adt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function adt(e){var t=sdt(e,"string");return v_(t)=="symbol"?t:t+""}function sdt(e,t){if(v_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(v_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QK=function(t,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),o=i>=0?1:-1,l=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,u;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],d=0,h=4;d<h;d++)f[d]=a[d]>s?s:a[d];u="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(t+l*f[0],",").concat(r)),u+="L ".concat(t+n-l*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(r+o*f[1])),u+="L ".concat(t+n,",").concat(r+i-o*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(t+n-l*f[2],",").concat(r+i)),u+="L ".concat(t+l*f[3],",").concat(r+i),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(r+i-o*f[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);u="M ".concat(t,",").concat(r+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+l*m,",").concat(r,`
            L `).concat(t+n-l*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+n,",").concat(r+o*m,`
            L `).concat(t+n,",").concat(r+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+n-l*m,",").concat(r+i,`
            L `).concat(t+l*m,",").concat(r+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t,",").concat(r+i-o*m," Z")}else u="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return u},odt=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,a=r.x,s=r.y,o=r.width,l=r.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(a,a+o),u=Math.max(a,a+o),f=Math.min(s,s+l),d=Math.max(s,s+l);return n>=c&&n<=u&&i>=f&&i<=d}return!1},ldt={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qF=function(t){var r=JK(JK({},ldt),t),n=C.useRef(),i=C.useState(-1),a=Qft(i,2),s=a[0],o=a[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&o(x)}catch{}},[]);var l=r.x,c=r.y,u=r.width,f=r.height,d=r.radius,h=r.className,m=r.animationEasing,p=r.animationDuration,y=r.animationBegin,g=r.isAnimationActive,w=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||u===0||f===0)return null;var v=_r("recharts-rectangle",h);return w?he.createElement(fd,{canBegin:s>0,from:{width:u,height:f,x:l,y:c},to:{width:u,height:f,x:l,y:c},duration:p,animationEasing:m,isActive:w},function(x){var b=x.width,S=x.height,T=x.x,A=x.y;return he.createElement(fd,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,isActive:g,easing:m},he.createElement("path",l5({},rr(r,!0),{className:v,d:QK(T,A,b,S,d),ref:n})))}):he.createElement("path",l5({},rr(r,!0),{className:v,d:QK(l,c,u,f,d)}))},cdt=["points","className","baseLinePoints","connectNulls"];function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function udt(e,t){if(e==null)return{};var r=fdt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fdt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eY(e){return mdt(e)||pdt(e)||hdt(e)||ddt()}function ddt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hdt(e,t){if(e){if(typeof e=="string")return dD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dD(e,t)}}function pdt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mdt(e){if(Array.isArray(e))return dD(e)}function dD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tY=function(t){return t&&t.x===+t.x&&t.y===+t.y},gdt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){tY(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),tY(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Cx=function(t,r){var n=gdt(t);r&&(n=[n.reduce(function(a,s){return[].concat(eY(a),eY(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},ydt=function(t,r,n){var i=Cx(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Cx(r.reverse(),n).slice(1))},vdt=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,a=t.connectNulls,s=udt(t,cdt);if(!r||!r.length)return null;var o=_r("recharts-polygon",n);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",c=ydt(r,i,a);return he.createElement("g",{className:o},he.createElement("path",cy({},rr(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),l?he.createElement("path",cy({},rr(s,!0),{fill:"none",d:Cx(r,a)})):null,l?he.createElement("path",cy({},rr(s,!0),{fill:"none",d:Cx(i,a)})):null)}var u=Cx(r,a);return he.createElement("path",cy({},rr(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:o,d:u}))};function hD(){return hD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hD.apply(this,arguments)}var KF=function(t){var r=t.cx,n=t.cy,i=t.r,a=t.className,s=_r("recharts-dot",a);return r===+r&&n===+n&&i===+i?C.createElement("circle",hD({},rr(t,!1),kk(t),{className:s,cx:r,cy:n,r:i})):null};function w_(e){"@babel/helpers - typeof";return w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w_(e)}var wdt=["x","y","top","left","width","height","className"];function pD(){return pD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pD.apply(this,arguments)}function rY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xdt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rY(Object(r),!0).forEach(function(n){bdt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bdt(e,t,r){return t=_dt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _dt(e){var t=Sdt(e,"string");return w_(t)=="symbol"?t:t+""}function Sdt(e,t){if(w_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(w_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Edt(e,t){if(e==null)return{};var r=Adt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Adt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Tdt=function(t,r,n,i,a,s){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},kdt=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,a=i===void 0?0:i,s=t.top,o=s===void 0?0:s,l=t.left,c=l===void 0?0:l,u=t.width,f=u===void 0?0:u,d=t.height,h=d===void 0?0:d,m=t.className,p=Edt(t,wdt),y=xdt({x:n,y:a,top:o,left:c,width:f,height:h},p);return!ht(n)||!ht(a)||!ht(f)||!ht(h)||!ht(o)||!ht(c)?null:he.createElement("path",pD({},rr(y,!0),{className:_r("recharts-cross",m),d:Tdt(n,a,f,h,o,c)}))},Cdt=FO,Odt=the,Pdt=Ku;function Ndt(e,t){return e&&e.length?Cdt(e,Pdt(t),Odt):void 0}var Idt=Ndt;const Rdt=Hr(Idt);var Ldt=FO,Mdt=Ku,Ddt=rhe;function jdt(e,t){return e&&e.length?Ldt(e,Mdt(t),Ddt):void 0}var $dt=jdt;const Fdt=Hr($dt);var Bdt=["cx","cy","angle","ticks","axisLine"],Udt=["ticks","tick","angle","tickFormatter","stroke"];function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ox.apply(this,arguments)}function nY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nY(Object(r),!0).forEach(function(n){GO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t){if(e==null)return{};var r=zdt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zdt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Vdt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hhe(n.key),n)}}function Wdt(e,t,r){return t&&aY(e.prototype,t),r&&aY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hdt(e,t,r){return t=c5(t),Gdt(e,Whe()?Reflect.construct(t,r||[],c5(e).constructor):t.apply(e,r))}function Gdt(e,t){if(t&&(Av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qdt(e)}function qdt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Whe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Whe=function(){return!!e})()}function c5(e){return c5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c5(e)}function Kdt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mD(e,t)}function mD(e,t){return mD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},mD(e,t)}function GO(e,t,r){return t=Hhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hhe(e){var t=Ydt(e,"string");return Av(t)=="symbol"?t:t+""}function Ydt(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qO=function(e){function t(){return Vdt(this,t),Hdt(this,t,arguments)}return Kdt(t,e),Wdt(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return On(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,o=n.ticks,l=Rdt(o,function(u){return u.coordinate||0}),c=Fdt(o,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,o=n.ticks,l=n.axisLine,c=iY(n,Bdt),u=o.reduce(function(m,p){return[Math.min(m[0],p.coordinate),Math.max(m[1],p.coordinate)]},[1/0,-1/0]),f=On(i,a,u[0],s),d=On(i,a,u[1],s),h=qp(qp(qp({},rr(c,!1)),{},{fill:"none"},rr(l,!1)),{},{x1:f.x,y1:f.y,x2:d.x,y2:d.y});return he.createElement("line",Ox({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,c=i.stroke,u=iY(i,Udt),f=this.getTickTextAnchor(),d=rr(u,!1),h=rr(s,!1),m=a.map(function(p,y){var g=n.getTickValueCoord(p),w=qp(qp(qp(qp({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(g.x,", ").concat(g.y,")")},d),{},{stroke:"none",fill:c},h),{},{index:y},g),{},{payload:p});return he.createElement(on,Ox({className:_r("recharts-polar-radius-axis-tick",Phe(s)),key:"tick-".concat(p.coordinate)},lm(n.props,p,y)),t.renderTickItem(s,w,l?l(p.value,y):p.value))});return he.createElement(on,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:he.createElement(on,{className:_r("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Bi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return he.isValidElement(n)?s=he.cloneElement(n,i):sr(n)?s=n(i):s=he.createElement(cm,Ox({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(C.PureComponent);GO(qO,"displayName","PolarRadiusAxis");GO(qO,"axisType","radiusAxis");GO(qO,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(this,arguments)}function sY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sY(Object(r),!0).forEach(function(n){KO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xdt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qhe(n.key),n)}}function Zdt(e,t,r){return t&&oY(e.prototype,t),r&&oY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jdt(e,t,r){return t=u5(t),Qdt(e,Ghe()?Reflect.construct(t,r||[],u5(e).constructor):t.apply(e,r))}function Qdt(e,t){if(t&&(Tv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eht(e)}function eht(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ghe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ghe=function(){return!!e})()}function u5(e){return u5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u5(e)}function tht(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gD(e,t)}function gD(e,t){return gD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gD(e,t)}function KO(e,t,r){return t=qhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=rht(e,"string");return Tv(t)=="symbol"?t:t+""}function rht(e,t){if(Tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nht=Math.PI/180,lY=1e-5,YO=function(e){function t(){return Xdt(this,t),Jdt(this,t,arguments)}return tht(t,e),Zdt(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,c=i.tickSize,u=c||8,f=On(a,s,o,n.coordinate),d=On(a,s,o+(l==="inner"?-1:1)*u,n.coordinate);return{x1:f.x,y1:f.y,x2:d.x,y2:d.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*nht),s;return a>lY?s=i==="outer"?"start":"end":a<-lY?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,o=n.axisLine,l=n.axisLineType,c=Kp(Kp({},rr(this.props,!1)),{},{fill:"none"},rr(o,!1));if(l==="circle")return he.createElement(KF,u0({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:a,r:s}));var u=this.props.ticks,f=u.map(function(d){return On(i,a,s,d.coordinate)});return he.createElement(vdt,u0({className:"recharts-polar-angle-axis-line"},c,{points:f}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,c=i.stroke,u=rr(this.props,!1),f=rr(s,!1),d=Kp(Kp({},u),{},{fill:"none"},rr(o,!1)),h=a.map(function(m,p){var y=n.getTickLineCoord(m),g=n.getTickTextAnchor(m),w=Kp(Kp(Kp({textAnchor:g},u),{},{stroke:"none",fill:c},f),{},{index:p,payload:m,x:y.x2,y:y.y2});return he.createElement(on,u0({className:_r("recharts-polar-angle-axis-tick",Phe(s)),key:"tick-".concat(m.coordinate)},lm(n.props,m,p)),o&&he.createElement("line",u0({className:"recharts-polar-angle-axis-tick-line"},d,y)),s&&t.renderTickItem(s,w,l?l(m.value,p):m.value))});return he.createElement(on,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:he.createElement(on,{className:_r("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return he.isValidElement(n)?s=he.cloneElement(n,i):sr(n)?s=n(i):s=he.createElement(cm,u0({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(C.PureComponent);KO(YO,"displayName","PolarAngleAxis");KO(YO,"axisType","angleAxis");KO(YO,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var iht=Zfe,aht=iht(Object.getPrototypeOf,Object),sht=aht,oht=bd,lht=sht,cht=_d,uht="[object Object]",fht=Function.prototype,dht=Object.prototype,Khe=fht.toString,hht=dht.hasOwnProperty,pht=Khe.call(Object);function mht(e){if(!cht(e)||oht(e)!=uht)return!1;var t=lht(e);if(t===null)return!0;var r=hht.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Khe.call(r)==pht}var ght=mht;const yht=Hr(ght);var vht=bd,wht=_d,xht="[object Boolean]";function bht(e){return e===!0||e===!1||wht(e)&&vht(e)==xht}var _ht=bht;const Sht=Hr(_ht);function x_(e){"@babel/helpers - typeof";return x_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x_(e)}function f5(){return f5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f5.apply(this,arguments)}function Eht(e,t){return Cht(e)||kht(e,t)||Tht(e,t)||Aht()}function Aht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tht(e,t){if(e){if(typeof e=="string")return cY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cY(e,t)}}function cY(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kht(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Cht(e){if(Array.isArray(e))return e}function uY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uY(Object(r),!0).forEach(function(n){Oht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oht(e,t,r){return t=Pht(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pht(e){var t=Nht(e,"string");return x_(t)=="symbol"?t:t+""}function Nht(e,t){if(x_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(x_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dY=function(t,r,n,i,a){var s=n-i,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-s/2,",").concat(r+a),o+="L ".concat(t+n-s/2-i,",").concat(r+a),o+="L ".concat(t,",").concat(r," Z"),o},Iht={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rht=function(t){var r=fY(fY({},Iht),t),n=C.useRef(),i=C.useState(-1),a=Eht(i,2),s=a[0],o=a[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&o(v)}catch{}},[]);var l=r.x,c=r.y,u=r.upperWidth,f=r.lowerWidth,d=r.height,h=r.className,m=r.animationEasing,p=r.animationDuration,y=r.animationBegin,g=r.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||f!==+f||d!==+d||u===0&&f===0||d===0)return null;var w=_r("recharts-trapezoid",h);return g?he.createElement(fd,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:d,x:l,y:c},to:{upperWidth:u,lowerWidth:f,height:d,x:l,y:c},duration:p,animationEasing:m,isActive:g},function(v){var x=v.upperWidth,b=v.lowerWidth,S=v.height,T=v.x,A=v.y;return he.createElement(fd,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,easing:m},he.createElement("path",f5({},rr(r,!0),{className:w,d:dY(T,A,x,b,S),ref:n})))}):he.createElement("g",null,he.createElement("path",f5({},rr(r,!0),{className:w,d:dY(l,c,u,f,d)})))},Lht=["option","shapeType","propTransformer","activeClassName","isActive"];function b_(e){"@babel/helpers - typeof";return b_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b_(e)}function Mht(e,t){if(e==null)return{};var r=Dht(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dht(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hY(Object(r),!0).forEach(function(n){jht(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jht(e,t,r){return t=$ht(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ht(e){var t=Fht(e,"string");return b_(t)=="symbol"?t:t+""}function Fht(e,t){if(b_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(b_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bht(e,t){return d5(d5({},t),e)}function Uht(e,t){return e==="symbols"}function pY(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return he.createElement(qF,r);case"trapezoid":return he.createElement(Rht,r);case"sector":return he.createElement(Rhe,r);case"symbols":if(Uht(t))return he.createElement(dF,r);break;default:return null}}function zht(e){return C.isValidElement(e)?e.props:e}function Yhe(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?Bht:n,a=e.activeClassName,s=a===void 0?"recharts-active-shape":a,o=e.isActive,l=Mht(e,Lht),c;if(C.isValidElement(t))c=C.cloneElement(t,d5(d5({},l),zht(t)));else if(sr(t))c=t(l);else if(yht(t)&&!Sht(t)){var u=i(t,l);c=he.createElement(pY,{shapeType:r,elementProps:u})}else{var f=l;c=he.createElement(pY,{shapeType:r,elementProps:f})}return o?he.createElement(on,{className:s},c):c}function XO(e,t){return t!=null&&"trapezoids"in e.props}function ZO(e,t){return t!=null&&"sectors"in e.props}function __(e,t){return t!=null&&"points"in e.props}function Vht(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,a=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&a}function Wht(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Hht(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function Ght(e,t){var r;return XO(e,t)?r=Vht:ZO(e,t)?r=Wht:__(e,t)&&(r=Hht),r}function qht(e,t){var r;return XO(e,t)?r="trapezoids":ZO(e,t)?r="sectors":__(e,t)&&(r="points"),r}function Kht(e,t){if(XO(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(ZO(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return __(e,t)?t.payload:{}}function Yht(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=qht(r,t),a=Kht(r,t),s=n.filter(function(l,c){var u=zO(a,l),f=r.props[i].filter(function(m){var p=Ght(r,t);return p(m,t)}),d=r.props[i].indexOf(f[f.length-1]),h=c===d;return u&&h}),o=n.indexOf(s[s.length-1]);return o}var ZA;function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(this,arguments)}function mY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mY(Object(r),!0).forEach(function(n){_l(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zhe(n.key),n)}}function Zht(e,t,r){return t&&gY(e.prototype,t),r&&gY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jht(e,t,r){return t=h5(t),Qht(e,Xhe()?Reflect.construct(t,r||[],h5(e).constructor):t.apply(e,r))}function Qht(e,t){if(t&&(kv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ept(e)}function ept(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xhe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xhe=function(){return!!e})()}function h5(e){return h5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h5(e)}function tpt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yD(e,t)}function yD(e,t){return yD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},yD(e,t)}function _l(e,t,r){return t=Zhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zhe(e){var t=rpt(e,"string");return kv(t)=="symbol"?t:t+""}function rpt(e,t){if(kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ed=function(e){function t(r){var n;return Xht(this,t),n=Jht(this,t,[r]),_l(n,"pieRef",null),_l(n,"sectorRefs",[]),_l(n,"id",C2("recharts-pie-")),_l(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),sr(i)&&i()}),_l(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),sr(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return tpt(t,e),Zht(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,c=a.valueKey,u=rr(this.props,!1),f=rr(s,!1),d=rr(o,!1),h=s&&s.offsetRadius||20,m=n.map(function(p,y){var g=(p.startAngle+p.endAngle)/2,w=On(p.cx,p.cy,p.outerRadius+h,g),v=En(En(En(En({},u),p),{},{stroke:"none"},f),{},{index:y,textAnchor:t.getTextAnchor(w.x,p.cx)},w),x=En(En(En(En({},u),p),{},{fill:"none",stroke:p.fill},d),{},{index:y,points:[On(p.cx,p.cy,p.outerRadius,g),w]}),b=l;return kr(l)&&kr(c)?b="value":kr(l)&&(b=c),he.createElement(on,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(y)},o&&t.renderLabelLineItem(o,x,"line"),t.renderLabelItem(s,v,os(p,b)))});return he.createElement(on,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return n.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&n.length!==1)return null;var f=i.isActiveIndex(u),d=l&&i.hasActiveIndex()?l:null,h=f?s:d,m=En(En({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return he.createElement(on,uy({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},lm(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),he.createElement(Yhe,uy({option:h,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,f=this.state,d=f.prevSectors,h=f.prevIsAnimationActive;return he.createElement(fd,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var p=m.t,y=[],g=a&&a[0],w=g.startAngle;return a.forEach(function(v,x){var b=d&&d[x],S=x>0?qo(v,"paddingAngle",0):0;if(b){var T=lh(b.endAngle-b.startAngle,v.endAngle-v.startAngle),A=En(En({},v),{},{startAngle:w+S,endAngle:w+T(p)+S});y.push(A),w=A.endAngle}else{var O=v.endAngle,M=v.startAngle,P=lh(0,O-M),N=P(p),V=En(En({},v),{},{startAngle:w+S,endAngle:w+N+S});y.push(V),w=V.endAngle}}),he.createElement(on,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,a=n.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!zO(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,c=i.cx,u=i.cy,f=i.innerRadius,d=i.outerRadius,h=i.isAnimationActive,m=this.state.isAnimationFinished;if(a||!s||!s.length||!ht(c)||!ht(u)||!ht(f)||!ht(d))return null;var p=_r("recharts-pie",o);return he.createElement(on,{tabIndex:this.props.rootTabIndex,className:p,ref:function(g){n.pieRef=g}},this.renderSectors(),l&&this.renderLabels(s),Bi.renderCallByParent(this.props,null,!1),(!h||m)&&Wh.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,a){if(he.isValidElement(n))return he.cloneElement(n,i);if(sr(n))return n(i);var s=_r("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return he.createElement(rD,uy({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,i,a){if(he.isValidElement(n))return he.cloneElement(n,i);var s=a;if(sr(n)&&(s=n(i),he.isValidElement(s)))return s;var o=_r("recharts-pie-label-text",typeof n!="boolean"&&!sr(n)?n.className:"");return he.createElement(cm,uy({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(C.PureComponent);ZA=Ed;_l(Ed,"displayName","Pie");_l(Ed,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!x1.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_l(Ed,"parseDeltaAngle",function(e,t){var r=Rs(t-e),n=Math.min(Math.abs(t-e),360);return r*n});_l(Ed,"getRealPieData",function(e){var t=e.data,r=e.children,n=rr(e,!1),i=Il(r,IO);return t&&t.length?t.map(function(a,s){return En(En(En({payload:a},n),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return En(En({},n),a.props)}):[]});_l(Ed,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,a=t.height,s=Ohe(i,a),o=n+Ls(e.cx,i,i/2),l=r+Ls(e.cy,a,a/2),c=Ls(e.innerRadius,s,0),u=Ls(e.outerRadius,s,s*.8),f=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:c,outerRadius:u,maxRadius:f}});_l(Ed,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?En(En({},t.type.defaultProps),t.props):t.props,i=ZA.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,s=n.startAngle,o=n.endAngle,l=n.paddingAngle,c=n.dataKey,u=n.nameKey,f=n.valueKey,d=n.tooltipType,h=Math.abs(n.minAngle),m=ZA.parseCoordinateOfPie(n,r),p=ZA.parseDeltaAngle(s,o),y=Math.abs(p),g=c;kr(c)&&kr(f)?(Rc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):kr(c)&&(Rc(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=f);var w=i.filter(function(A){return os(A,g,0)!==0}).length,v=(y>=360?w:w-1)*l,x=y-w*h-v,b=i.reduce(function(A,O){var M=os(O,g,0);return A+(ht(M)?M:0)},0),S;if(b>0){var T;S=i.map(function(A,O){var M=os(A,g,0),P=os(A,u,O),N=(ht(M)?M:0)/b,V;O?V=T.endAngle+Rs(p)*l*(M!==0?1:0):V=s;var B=V+Rs(p)*((M!==0?h:0)+N*x),G=(V+B)/2,Z=(m.innerRadius+m.outerRadius)/2,J=[{name:P,value:M,payload:A,dataKey:g,type:d}],Y=On(m.cx,m.cy,Z,G);return T=En(En(En({percent:N,cornerRadius:a,name:P,tooltipPayload:J,midAngle:G,middleRadius:Z,tooltipPosition:Y},A),m),{},{value:os(A,g),startAngle:V,endAngle:B,payload:A,paddingAngle:Rs(p)*l}),T})}return En(En({},m),{},{sectors:S,data:i})});var npt=Math.ceil,ipt=Math.max;function apt(e,t,r,n){for(var i=-1,a=ipt(npt((t-e)/(r||1)),0),s=Array(a);a--;)s[n?a:++i]=e,e+=r;return s}var spt=apt,opt=gde,yY=1/0,lpt=17976931348623157e292;function cpt(e){if(!e)return e===0?e:0;if(e=opt(e),e===yY||e===-yY){var t=e<0?-1:1;return t*lpt}return e===e?e:0}var Jhe=cpt,upt=spt,fpt=NO,NI=Jhe;function dpt(e){return function(t,r,n){return n&&typeof n!="number"&&fpt(t,r,n)&&(r=n=void 0),t=NI(t),r===void 0?(r=t,t=0):r=NI(r),n=n===void 0?t<r?1:-1:NI(n),upt(t,r,n,e)}}var hpt=dpt,ppt=hpt,mpt=ppt(),gpt=mpt;const p5=Hr(gpt);function S_(e){"@babel/helpers - typeof";return S_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S_(e)}function vY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vY(Object(r),!0).forEach(function(n){Qhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qhe(e,t,r){return t=ypt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ypt(e){var t=vpt(e,"string");return S_(t)=="symbol"?t:t+""}function vpt(e,t){if(S_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(S_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wpt=["Webkit","Moz","O","ms"],xpt=function(t,r){var n=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=wpt.reduce(function(a,s){return wY(wY({},a),{},Qhe({},s+n,r))},{});return i[t]=r,i};function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(e)}function m5(){return m5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m5.apply(this,arguments)}function xY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function II(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xY(Object(r),!0).forEach(function(n){Oo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bpt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tpe(n.key),n)}}function _pt(e,t,r){return t&&bY(e.prototype,t),r&&bY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Spt(e,t,r){return t=g5(t),Ept(e,epe()?Reflect.construct(t,r||[],g5(e).constructor):t.apply(e,r))}function Ept(e,t){if(t&&(Cv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Apt(e)}function Apt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function epe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(epe=function(){return!!e})()}function g5(e){return g5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g5(e)}function Tpt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vD(e,t)}function vD(e,t){return vD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vD(e,t)}function Oo(e,t,r){return t=tpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tpe(e){var t=kpt(e,"string");return Cv(t)=="symbol"?t:t+""}function kpt(e,t){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cpt=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,a=t.x,s=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,c=Ax().domain(p5(0,l)).range([a,a+s-o]),u=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:u}},_Y=function(t){return t.changedTouches&&!!t.changedTouches.length},Ov=function(e){function t(r){var n;return bpt(this,t),n=Spt(this,t,[r]),Oo(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Oo(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Oo(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),n.detachDragEndListener()}),Oo(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Oo(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Oo(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Oo(n,"handleSlideDragStart",function(i){var a=_Y(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Tpt(t,e),_pt(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,u=c.length-1,f=Math.min(i,a),d=Math.max(i,a),h=t.getIndexInRange(s,f),m=t.getIndexInRange(s,d);return{startIndex:h-h%l,endIndex:m===u?u:m-m%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=os(a[n],o,n);return sr(s)?s(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,c=l.x,u=l.width,f=l.travellerWidth,d=l.startIndex,h=l.endIndex,m=l.onChange,p=n.pageX-a;p>0?p=Math.min(p,c+u-f-o,c+u-f-s):p<0&&(p=Math.max(p,c-s,c-o));var y=this.getIndex({startX:s+p,endX:o+p});(y.startIndex!==d||y.endIndex!==h)&&m&&m(y),this.setState({startX:s+p,endX:o+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=_Y(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[s],u=this.props,f=u.x,d=u.width,h=u.travellerWidth,m=u.onChange,p=u.gap,y=u.data,g={startX:this.state.startX,endX:this.state.endX},w=n.pageX-a;w>0?w=Math.min(w,f+d-h-c):w<0&&(w=Math.max(w,f-c)),g[s]=c+w;var v=this.getIndex(g),x=v.startIndex,b=v.endIndex,S=function(){var A=y.length-1;return s==="startX"&&(o>l?x%p===0:b%p===0)||o<l&&b===A||s==="endX"&&(o>l?b%p===0:x%p===0)||o>l&&b===A};this.setState(Oo(Oo({},s,c+w),"brushMoveStartX",n.pageX),function(){m&&S()&&m(v)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,c=s.endX,u=this.state[i],f=o.indexOf(u);if(f!==-1){var d=f+n;if(!(d===-1||d>=o.length)){var h=o[d];i==="startX"&&h>=c||i==="endX"&&h<=l||this.setState(Oo({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,o=n.height,l=n.fill,c=n.stroke;return he.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,o=n.height,l=n.data,c=n.children,u=n.padding,f=C.Children.only(c);return f?he.cloneElement(f,{x:i,y:a,width:s,height:o,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,o=this,l=this.props,c=l.y,u=l.travellerWidth,f=l.height,d=l.traveller,h=l.ariaLabel,m=l.data,p=l.startIndex,y=l.endIndex,g=Math.max(n,this.props.x),w=II(II({},rr(this.props,!1)),{},{x:g,y:c,width:u,height:f}),v=h||"Min value: ".concat((a=m[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=m[y])===null||s===void 0?void 0:s.name);return he.createElement(on,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(b){["ArrowLeft","ArrowRight"].includes(b.key)&&(b.preventDefault(),b.stopPropagation(),o.handleTravellerMoveKeyboard(b.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,w))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(n,i)+c,f=Math.max(Math.abs(i-n)-c,0);return he.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:s,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,o=n.height,l=n.travellerWidth,c=n.stroke,u=this.state,f=u.startX,d=u.endX,h=5,m={pointerEvents:"none",fill:c};return he.createElement(on,{className:"recharts-brush-texts"},he.createElement(cm,m5({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,d)-h,y:s+o/2},m),this.getTextOfTick(i)),he.createElement(cm,m5({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,d)+l+h,y:s+o/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,o=n.x,l=n.y,c=n.width,u=n.height,f=n.alwaysShowText,d=this.state,h=d.startX,m=d.endX,p=d.isTextActive,y=d.isSlideMoving,g=d.isTravellerMoving,w=d.isTravellerFocused;if(!i||!i.length||!ht(o)||!ht(l)||!ht(c)||!ht(u)||c<=0||u<=0)return null;var v=_r("recharts-brush",a),x=he.Children.count(s)===1,b=xpt("userSelect","none");return he.createElement(on,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(p||y||g||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,o=n.height,l=n.stroke,c=Math.floor(a+o/2)-1;return he.createElement(he.Fragment,null,he.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),he.createElement("line",{x1:i+1,y1:c,x2:i+s-1,y2:c,fill:"none",stroke:"#fff"}),he.createElement("line",{x1:i+1,y1:c+2,x2:i+s-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return he.isValidElement(n)?a=he.cloneElement(n,i):sr(n)?a=n(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,o=n.x,l=n.travellerWidth,c=n.updateId,u=n.startIndex,f=n.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return II({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s},a&&a.length?Cpt({data:a,width:s,x:o,travellerWidth:l,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var d=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);n[l]>i?o=l:s=l}return i>=n[o]?o:s}}])}(C.PureComponent);Oo(Ov,"displayName","Brush");Oo(Ov,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Opt=wF;function Ppt(e,t){var r;return Opt(e,function(n,i,a){return r=t(n,i,a),!r}),!!r}var Npt=Ppt,Ipt=Vfe,Rpt=Ku,Lpt=Npt,Mpt=po,Dpt=NO;function jpt(e,t,r){var n=Mpt(e)?Ipt:Lpt;return r&&Dpt(e,t,r)&&(t=void 0),n(e,Rpt(t))}var $pt=jpt;const Fpt=Hr($pt);var ju=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},SY=fde;function Bpt(e,t,r){t=="__proto__"&&SY?SY(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Upt=Bpt,zpt=Upt,Vpt=cde,Wpt=Ku;function Hpt(e,t){var r={};return t=Wpt(t),Vpt(e,function(n,i,a){zpt(r,i,t(n,i,a))}),r}var Gpt=Hpt;const qpt=Hr(Gpt);function Kpt(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Ypt=Kpt,Xpt=wF;function Zpt(e,t){var r=!0;return Xpt(e,function(n,i,a){return r=!!t(n,i,a),r}),r}var Jpt=Zpt,Qpt=Ypt,e0t=Jpt,t0t=Ku,r0t=po,n0t=NO;function i0t(e,t,r){var n=r0t(e)?Qpt:e0t;return r&&n0t(e,t,r)&&(t=void 0),n(e,t0t(t))}var a0t=i0t;const rpe=Hr(a0t);var s0t=["x","y"];function E_(e){"@babel/helpers - typeof";return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E_(e)}function wD(){return wD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wD.apply(this,arguments)}function EY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EY(Object(r),!0).forEach(function(n){o0t(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o0t(e,t,r){return t=l0t(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l0t(e){var t=c0t(e,"string");return E_(t)=="symbol"?t:t+""}function c0t(e,t){if(E_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(E_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u0t(e,t){if(e==null)return{};var r=f0t(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function f0t(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function d0t(e,t){var r=e.x,n=e.y,i=u0t(e,s0t),a="".concat(r),s=parseInt(a,10),o="".concat(n),l=parseInt(o,10),c="".concat(t.height||i.height),u=parseInt(c,10),f="".concat(t.width||i.width),d=parseInt(f,10);return kw(kw(kw(kw(kw({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:u,width:d,name:t.name,radius:t.radius})}function AY(e){return he.createElement(Yhe,wD({shapeType:"rectangle",propTransformer:d0t,activeClassName:"recharts-active-bar"},e))}var h0t=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var a=ht(n)||Rqe(n);return a?t(n,i):(a||fm(),r)}},p0t=["value","background"],npe;function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function m0t(e,t){if(e==null)return{};var r=g0t(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g0t(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function y5(){return y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y5.apply(this,arguments)}function TY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TY(Object(r),!0).forEach(function(n){_h(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y0t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ape(n.key),n)}}function v0t(e,t,r){return t&&kY(e.prototype,t),r&&kY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function w0t(e,t,r){return t=v5(t),x0t(e,ipe()?Reflect.construct(t,r||[],v5(e).constructor):t.apply(e,r))}function x0t(e,t){if(t&&(Pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b0t(e)}function b0t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ipe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ipe=function(){return!!e})()}function v5(e){return v5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v5(e)}function _0t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xD(e,t)}function xD(e,t){return xD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xD(e,t)}function _h(e,t,r){return t=ape(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ape(e){var t=S0t(e,"string");return Pv(t)=="symbol"?t:t+""}function S0t(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Im=function(e){function t(){var r;y0t(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=w0t(this,t,[].concat(i)),_h(r,"state",{isAnimationFinished:!1}),_h(r,"id",C2("recharts-bar-")),_h(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),_h(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return _0t(t,e),v0t(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,c=a.activeBar,u=rr(this.props,!1);return n&&n.map(function(f,d){var h=d===l,m=h?c:s,p=Pi(Pi(Pi({},u),f),{},{isActive:h,option:m,index:d,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return he.createElement(on,y5({className:"recharts-bar-rectangle"},lm(i.props,f,d),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(d)}),he.createElement(AY,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,d=this.state.prevData;return he.createElement(fd,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,p=a.map(function(y,g){var w=d&&d[g];if(w){var v=lh(w.x,y.x),x=lh(w.y,y.y),b=lh(w.width,y.width),S=lh(w.height,y.height);return Pi(Pi({},y),{},{x:v(m),y:x(m),width:b(m),height:S(m)})}if(s==="horizontal"){var T=lh(0,y.height),A=T(m);return Pi(Pi({},y),{},{y:y.y+y.height-A,height:A})}var O=lh(0,y.width),M=O(m);return Pi(Pi({},y),{},{width:M})});return he.createElement(on,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!zO(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=rr(this.props.background,!1);return a.map(function(c,u){c.value;var f=c.background,d=m0t(c,p0t);if(!f)return null;var h=Pi(Pi(Pi(Pi(Pi({},d),{},{fill:"#eee"},f),l),lm(n.props,c,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:u,className:"recharts-bar-background-rectangle"});return he.createElement(AY,y5({key:"background-bar-".concat(u),option:n.props.background,isActive:u===o},h))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,f=Il(u,HO);if(!f)return null;var d=c==="vertical"?s[0].height/2:s[0].width/2,h=function(y,g){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:os(y,g)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return he.createElement(on,m,f.map(function(p){return he.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:s,xAxis:o,yAxis:l,layout:c,offset:d,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,o=n.xAxis,l=n.yAxis,c=n.left,u=n.top,f=n.width,d=n.height,h=n.isAnimationActive,m=n.background,p=n.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,g=_r("recharts-bar",s),w=o&&o.allowDataOverflow,v=l&&l.allowDataOverflow,x=w||v,b=kr(p)?this.id:p;return he.createElement(on,{className:g},w||v?he.createElement("defs",null,he.createElement("clipPath",{id:"clipPath-".concat(b)},he.createElement("rect",{x:w?c:c-f/2,y:v?u:u-d/2,width:w?f:f*2,height:v?d:d*2}))):null,he.createElement(on,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(b,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,b),(!h||y)&&Wh.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(C.PureComponent);npe=Im;_h(Im,"displayName","Bar");_h(Im,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!x1.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_h(Im,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,a=e.xAxis,s=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,f=e.displayedData,d=e.offset,h=Qlt(n,r);if(!h)return null;var m=t.layout,p=r.type.defaultProps,y=p!==void 0?Pi(Pi({},p),r.props):r.props,g=y.dataKey,w=y.children,v=y.minPointSize,x=m==="horizontal"?s:a,b=c?x.scale.domain():null,S=sct({numericAxis:x}),T=Il(w,IO),A=f.map(function(O,M){var P,N,V,B,G,Z;c?P=ect(c[u+M],b):(P=os(O,g),Array.isArray(P)||(P=[S,P]));var J=h0t(v,npe.defaultProps.minPointSize)(P[1],M);if(m==="horizontal"){var Y,U=[s.scale(P[0]),s.scale(P[1])],se=U[0],ue=U[1];N=wK({axis:a,ticks:o,bandSize:i,offset:h.offset,entry:O,index:M}),V=(Y=ue??se)!==null&&Y!==void 0?Y:void 0,B=h.size;var I=se-ue;if(G=Number.isNaN(I)?0:I,Z={x:N,y:s.y,width:B,height:s.height},Math.abs(J)>0&&Math.abs(G)<Math.abs(J)){var z=Rs(G||J)*(Math.abs(J)-Math.abs(G));V-=z,G+=z}}else{var H=[a.scale(P[0]),a.scale(P[1])],q=H[0],F=H[1];if(N=q,V=wK({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:O,index:M}),B=F-q,G=h.size,Z={x:a.x,y:V,width:a.width,height:G},Math.abs(J)>0&&Math.abs(B)<Math.abs(J)){var D=Rs(B||J)*(Math.abs(J)-Math.abs(B));B+=D}}return Pi(Pi(Pi({},O),{},{x:N,y:V,width:B,height:G,value:c?P:P[1],payload:O,background:Z},T&&T[M]&&T[M].props),{},{tooltipPayload:[khe(r,O)],tooltipPosition:{x:N+B/2,y:V+G/2}})});return Pi({data:A,layout:m},d)});function A_(e){"@babel/helpers - typeof";return A_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A_(e)}function E0t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,spe(n.key),n)}}function A0t(e,t,r){return t&&CY(e.prototype,t),r&&CY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OY(Object(r),!0).forEach(function(n){JO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JO(e,t,r){return t=spe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function spe(e){var t=T0t(e,"string");return A_(t)=="symbol"?t:t+""}function T0t(e,t){if(A_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(A_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k0t=function(t,r,n,i,a){var s=t.width,o=t.height,l=t.layout,c=t.children,u=Object.keys(r),f={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},d=!!Io(c,Im);return u.reduce(function(h,m){var p=r[m],y=p.orientation,g=p.domain,w=p.padding,v=w===void 0?{}:w,x=p.mirror,b=p.reversed,S="".concat(y).concat(x?"Mirror":""),T,A,O,M,P;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var N=g[1]-g[0],V=1/0,B=p.categoricalDomain.sort(Dqe);if(B.forEach(function(H,q){q>0&&(V=Math.min((H||0)-(B[q-1]||0),V))}),Number.isFinite(V)){var G=V/N,Z=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(T=G*Z/2),p.padding==="no-gap"){var J=Ls(t.barCategoryGap,G*Z),Y=G*Z/2;T=Y-J-(Y-J)/Z*J}}}i==="xAxis"?A=[n.left+(v.left||0)+(T||0),n.left+n.width-(v.right||0)-(T||0)]:i==="yAxis"?A=l==="horizontal"?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(T||0),n.top+n.height-(v.bottom||0)-(T||0)]:A=p.range,b&&(A=[A[1],A[0]]);var U=She(p,a,d),se=U.scale,ue=U.realScaleType;se.domain(g).range(A),Ehe(se);var I=Ahe(se,wc(wc({},p),{},{realScaleType:ue}));i==="xAxis"?(P=y==="top"&&!x||y==="bottom"&&x,O=n.left,M=f[S]-P*p.height):i==="yAxis"&&(P=y==="left"&&!x||y==="right"&&x,O=f[S]-P*p.width,M=n.top);var z=wc(wc(wc({},p),I),{},{realScaleType:ue,x:O,y:M,scale:se,width:i==="xAxis"?n.width:p.width,height:i==="yAxis"?n.height:p.height});return z.bandSize=t5(z,I),!p.hide&&i==="xAxis"?f[S]+=(P?-1:1)*z.height:p.hide||(f[S]+=(P?-1:1)*z.width),wc(wc({},h),{},JO({},m,z))},{})},ope=function(t,r){var n=t.x,i=t.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},C0t=function(t){var r=t.x1,n=t.y1,i=t.x2,a=t.y2;return ope({x:r,y:n},{x:i,y:a})},lpe=function(){function e(t){E0t(this,e),this.scale=t}return A0t(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();JO(lpe,"EPS",1e-4);var YF=function(t){var r=Object.keys(t).reduce(function(n,i){return wc(wc({},n),{},JO({},i,lpe.create(t[i])))},{});return wc(wc({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return qpt(i,function(l,c){return r[c].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return rpe(i,function(a,s){return r[s].isInRange(a)})}})};function O0t(e){return(e%180+180)%180}var P0t=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=O0t(i),s=a*Math.PI/180,o=Math.atan(n/r),l=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(l)},N0t=Ku,I0t=O2,R0t=OO;function L0t(e){return function(t,r,n){var i=Object(t);if(!I0t(t)){var a=N0t(r);t=R0t(t),r=function(o){return a(i[o],o,i)}}var s=e(t,r,n);return s>-1?i[a?t[s]:s]:void 0}}var M0t=L0t,D0t=Jhe;function j0t(e){var t=D0t(e),r=t%1;return t===t?r?t-r:t:0}var $0t=j0t,F0t=nde,B0t=Ku,U0t=$0t,z0t=Math.max;function V0t(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:U0t(r);return i<0&&(i=z0t(n+i,0)),F0t(e,B0t(t),i)}var W0t=V0t,H0t=M0t,G0t=W0t,q0t=H0t(G0t),K0t=q0t;const Y0t=Hr(K0t);var X0t=FGe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),XF=C.createContext(void 0),ZF=C.createContext(void 0),cpe=C.createContext(void 0),upe=C.createContext({}),fpe=C.createContext(void 0),dpe=C.createContext(0),hpe=C.createContext(0),PY=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=t.clipPathId,o=t.children,l=t.width,c=t.height,u=X0t(a);return he.createElement(XF.Provider,{value:n},he.createElement(ZF.Provider,{value:i},he.createElement(upe.Provider,{value:a},he.createElement(cpe.Provider,{value:u},he.createElement(fpe.Provider,{value:s},he.createElement(dpe.Provider,{value:c},he.createElement(hpe.Provider,{value:l},o)))))))},Z0t=function(){return C.useContext(fpe)},ppe=function(t){var r=C.useContext(XF);r==null&&fm();var n=r[t];return n==null&&fm(),n},J0t=function(){var t=C.useContext(XF);return ph(t)},Q0t=function(){var t=C.useContext(ZF),r=Y0t(t,function(n){return rpe(n.domain,Number.isFinite)});return r||ph(t)},mpe=function(t){var r=C.useContext(ZF);r==null&&fm();var n=r[t];return n==null&&fm(),n},emt=function(){var t=C.useContext(cpe);return t},tmt=function(){return C.useContext(upe)},JF=function(){return C.useContext(hpe)},QF=function(){return C.useContext(dpe)};function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function rmt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nmt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ype(n.key),n)}}function imt(e,t,r){return t&&nmt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function amt(e,t,r){return t=w5(t),smt(e,gpe()?Reflect.construct(t,r||[],w5(e).constructor):t.apply(e,r))}function smt(e,t){if(t&&(Nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return omt(e)}function omt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gpe=function(){return!!e})()}function w5(e){return w5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w5(e)}function lmt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bD(e,t)}function bD(e,t){return bD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bD(e,t)}function NY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function IY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NY(Object(r),!0).forEach(function(n){eB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eB(e,t,r){return t=ype(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ype(e){var t=cmt(e,"string");return Nv(t)=="symbol"?t:t+""}function cmt(e,t){if(Nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function umt(e,t){return pmt(e)||hmt(e,t)||dmt(e,t)||fmt()}function fmt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dmt(e,t){if(e){if(typeof e=="string")return RY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RY(e,t)}}function RY(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hmt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function pmt(e){if(Array.isArray(e))return e}function _D(){return _D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_D.apply(this,arguments)}var mmt=function(t,r){var n;return he.isValidElement(t)?n=he.cloneElement(t,r):sr(t)?n=t(r):n=he.createElement("line",_D({},r,{className:"recharts-reference-line-line"})),n},gmt=function(t,r,n,i,a,s,o,l,c){var u=a.x,f=a.y,d=a.width,h=a.height;if(n){var m=c.y,p=t.y.apply(m,{position:s});if(ju(c,"discard")&&!t.y.isInRange(p))return null;var y=[{x:u+d,y:p},{x:u,y:p}];return l==="left"?y.reverse():y}if(r){var g=c.x,w=t.x.apply(g,{position:s});if(ju(c,"discard")&&!t.x.isInRange(w))return null;var v=[{x:w,y:f+h},{x:w,y:f}];return o==="top"?v.reverse():v}if(i){var x=c.segment,b=x.map(function(S){return t.apply(S,{position:s})});return ju(c,"discard")&&Fpt(b,function(S){return!t.isInRange(S)})?null:b}return null};function ymt(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,o=e.className,l=e.alwaysShow,c=Z0t(),u=ppe(i),f=mpe(a),d=emt();if(!c||!d)return null;Rc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=YF({x:u.scale,y:f.scale}),m=la(t),p=la(r),y=n&&n.length===2,g=gmt(h,m,p,y,d,e.position,u.orientation,f.orientation,e);if(!g)return null;var w=umt(g,2),v=w[0],x=v.x,b=v.y,S=w[1],T=S.x,A=S.y,O=ju(e,"hidden")?"url(#".concat(c,")"):void 0,M=IY(IY({clipPath:O},rr(e,!0)),{},{x1:x,y1:b,x2:T,y2:A});return he.createElement(on,{className:_r("recharts-reference-line",o)},mmt(s,M),Bi.renderCallByParent(e,C0t({x1:x,y1:b,x2:T,y2:A})))}var tB=function(e){function t(){return rmt(this,t),amt(this,t,arguments)}return lmt(t,e),imt(t,[{key:"render",value:function(){return he.createElement(ymt,this.props)}}])}(he.Component);eB(tB,"displayName","ReferenceLine");eB(tB,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function SD(){return SD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SD.apply(this,arguments)}function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function LY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LY(Object(r),!0).forEach(function(n){QO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vmt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wmt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wpe(n.key),n)}}function xmt(e,t,r){return t&&wmt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bmt(e,t,r){return t=x5(t),_mt(e,vpe()?Reflect.construct(t,r||[],x5(e).constructor):t.apply(e,r))}function _mt(e,t){if(t&&(Iv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Smt(e)}function Smt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vpe=function(){return!!e})()}function x5(e){return x5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x5(e)}function Emt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ED(e,t)}function ED(e,t){return ED=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ED(e,t)}function QO(e,t,r){return t=wpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wpe(e){var t=Amt(e,"string");return Iv(t)=="symbol"?t:t+""}function Amt(e,t){if(Iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tmt=function(t){var r=t.x,n=t.y,i=t.xAxis,a=t.yAxis,s=YF({x:i.scale,y:a.scale}),o=s.apply({x:r,y:n},{bandAware:!0});return ju(t,"discard")&&!s.isInRange(o)?null:o},eP=function(e){function t(){return vmt(this,t),bmt(this,t,arguments)}return Emt(t,e),xmt(t,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,o=n.alwaysShow,l=n.clipPathId,c=la(i),u=la(a);if(Rc(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var f=Tmt(this.props);if(!f)return null;var d=f.x,h=f.y,m=this.props,p=m.shape,y=m.className,g=ju(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=MY(MY({clipPath:g},rr(this.props,!0)),{},{cx:d,cy:h});return he.createElement(on,{className:_r("recharts-reference-dot",y)},t.renderDot(p,w),Bi.renderCallByParent(this.props,{x:d-s,y:h-s,width:2*s,height:2*s}))}}])}(he.Component);QO(eP,"displayName","ReferenceDot");QO(eP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});QO(eP,"renderDot",function(e,t){var r;return he.isValidElement(e)?r=he.cloneElement(e,t):sr(e)?r=e(t):r=he.createElement(KF,SD({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function AD(){return AD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AD.apply(this,arguments)}function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function DY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DY(Object(r),!0).forEach(function(n){tP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kmt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cmt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bpe(n.key),n)}}function Omt(e,t,r){return t&&Cmt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pmt(e,t,r){return t=b5(t),Nmt(e,xpe()?Reflect.construct(t,r||[],b5(e).constructor):t.apply(e,r))}function Nmt(e,t){if(t&&(Rv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Imt(e)}function Imt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xpe=function(){return!!e})()}function b5(e){return b5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b5(e)}function Rmt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TD(e,t)}function TD(e,t){return TD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},TD(e,t)}function tP(e,t,r){return t=bpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bpe(e){var t=Lmt(e,"string");return Rv(t)=="symbol"?t:t+""}function Lmt(e,t){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mmt=function(t,r,n,i,a){var s=a.x1,o=a.x2,l=a.y1,c=a.y2,u=a.xAxis,f=a.yAxis;if(!u||!f)return null;var d=YF({x:u.scale,y:f.scale}),h={x:t?d.x.apply(s,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(l,{position:"start"}):d.y.rangeMin},m={x:r?d.x.apply(o,{position:"end"}):d.x.rangeMax,y:i?d.y.apply(c,{position:"end"}):d.y.rangeMax};return ju(a,"discard")&&(!d.isInRange(h)||!d.isInRange(m))?null:ope(h,m)},rP=function(e){function t(){return kmt(this,t),Pmt(this,t,arguments)}return Rmt(t,e),Omt(t,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,o=n.y2,l=n.className,c=n.alwaysShow,u=n.clipPathId;Rc(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=la(i),d=la(a),h=la(s),m=la(o),p=this.props.shape;if(!f&&!d&&!h&&!m&&!p)return null;var y=Mmt(f,d,h,m,this.props);if(!y&&!p)return null;var g=ju(this.props,"hidden")?"url(#".concat(u,")"):void 0;return he.createElement(on,{className:_r("recharts-reference-area",l)},t.renderRect(p,jY(jY({clipPath:g},rr(this.props,!0)),y)),Bi.renderCallByParent(this.props,y))}}])}(he.Component);tP(rP,"displayName","ReferenceArea");tP(rP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tP(rP,"renderRect",function(e,t){var r;return he.isValidElement(e)?r=he.cloneElement(e,t):sr(e)?r=e(t):r=he.createElement(qF,AD({},t,{className:"recharts-reference-area-rect"})),r});function _pe(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function Dmt(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return P0t(n,r)}function jmt(e,t,r){var n=r==="width",i=e.x,a=e.y,s=e.width,o=e.height;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function _5(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function $mt(e,t){return _pe(e,t+1)}function Fmt(e,t,r,n,i){for(var a=(n||[]).slice(),s=t.start,o=t.end,l=0,c=1,u=s,f=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:_pe(n,c)};var p=l,y,g=function(){return y===void 0&&(y=r(m,p)),y},w=m.coordinate,v=l===0||_5(e,w,g,u,o);v||(l=0,u=s,c+=1),v&&(u=w+e*(g()/2+i),l+=c)},d;c<=a.length;)if(d=f(),d)return d.v;return[]}function T_(e){"@babel/helpers - typeof";return T_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T_(e)}function $Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$Y(Object(r),!0).forEach(function(n){Bmt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$Y(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bmt(e,t,r){return t=Umt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Umt(e){var t=zmt(e,"string");return T_(t)=="symbol"?t:t+""}function zmt(e,t){if(T_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(T_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vmt(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,o=t.start,l=t.end,c=function(d){var h=a[d],m,p=function(){return m===void 0&&(m=r(h,d)),m};if(d===s-1){var y=e*(h.coordinate+e*p()/2-l);a[d]=h=ts(ts({},h),{},{tickCoord:y>0?h.coordinate-y*e:h.coordinate})}else a[d]=h=ts(ts({},h),{},{tickCoord:h.coordinate});var g=_5(e,h.tickCoord,p,o,l);g&&(l=h.tickCoord-e*(p()/2+i),a[d]=ts(ts({},h),{},{isShow:!0}))},u=s-1;u>=0;u--)c(u);return a}function Wmt(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,l=t.start,c=t.end;if(a){var u=n[o-1],f=r(u,o-1),d=e*(u.coordinate+e*f/2-c);s[o-1]=u=ts(ts({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate});var h=_5(e,u.tickCoord,function(){return f},l,c);h&&(c=u.tickCoord-e*(f/2+i),s[o-1]=ts(ts({},u),{},{isShow:!0}))}for(var m=a?o-1:o,p=function(w){var v=s[w],x,b=function(){return x===void 0&&(x=r(v,w)),x};if(w===0){var S=e*(v.coordinate-e*b()/2-l);s[w]=v=ts(ts({},v),{},{tickCoord:S<0?v.coordinate-S*e:v.coordinate})}else s[w]=v=ts(ts({},v),{},{tickCoord:v.coordinate});var T=_5(e,v.tickCoord,b,l,c);T&&(l=v.tickCoord+e*(b()/2+i),s[w]=ts(ts({},v),{},{isShow:!0}))},y=0;y<m;y++)p(y);return s}function rB(e,t,r){var n=e.tick,i=e.ticks,a=e.viewBox,s=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,f=e.angle;if(!i||!i.length||!n)return[];if(ht(l)||x1.isSsr)return $mt(i,typeof l=="number"&&ht(l)?l:0);var d=[],h=o==="top"||o==="bottom"?"width":"height",m=u&&h==="width"?Ex(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(v,x){var b=sr(c)?c(v.value,x):v.value;return h==="width"?Dmt(Ex(b,{fontSize:t,letterSpacing:r}),m,f):Ex(b,{fontSize:t,letterSpacing:r})[h]},y=i.length>=2?Rs(i[1].coordinate-i[0].coordinate):1,g=jmt(a,y,h);return l==="equidistantPreserveStart"?Fmt(y,g,p,i,s):(l==="preserveStart"||l==="preserveStartEnd"?d=Wmt(y,g,p,i,s,l==="preserveStartEnd"):d=Vmt(y,g,p,i,s),d.filter(function(w){return w.isShow}))}var Hmt=["viewBox"],Gmt=["viewBox"],qmt=["ticks"];function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(this,arguments)}function FY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FY(Object(r),!0).forEach(function(n){nB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RI(e,t){if(e==null)return{};var r=Kmt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kmt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ymt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Epe(n.key),n)}}function Xmt(e,t,r){return t&&BY(e.prototype,t),r&&BY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zmt(e,t,r){return t=S5(t),Jmt(e,Spe()?Reflect.construct(t,r||[],S5(e).constructor):t.apply(e,r))}function Jmt(e,t){if(t&&(Lv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qmt(e)}function Qmt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Spe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Spe=function(){return!!e})()}function S5(e){return S5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S5(e)}function egt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kD(e,t)}function kD(e,t){return kD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},kD(e,t)}function nB(e,t,r){return t=Epe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Epe(e){var t=tgt(e,"string");return Lv(t)=="symbol"?t:t+""}function tgt(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var E1=function(e){function t(r){var n;return Ymt(this,t),n=Zmt(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return egt(t,e),Xmt(t,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=RI(n,Hmt),o=this.props,l=o.viewBox,c=RI(o,Gmt);return!Ny(a,l)||!Ny(s,c)||!Ny(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,c=i.orientation,u=i.tickSize,f=i.mirror,d=i.tickMargin,h,m,p,y,g,w,v=f?-1:1,x=n.tickSize||u,b=ht(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":h=m=n.coordinate,y=s+ +!f*l,p=y-v*x,w=p-v*d,g=b;break;case"left":p=y=n.coordinate,m=a+ +!f*o,h=m-v*x,g=h-v*d,w=b;break;case"right":p=y=n.coordinate,m=a+ +f*o,h=m+v*x,g=h+v*d,w=b;break;default:h=m=n.coordinate,y=s+ +f*l,p=y+v*x,w=p+v*d,g=b;break}return{line:{x1:h,y1:p,x2:m,y2:y},tick:{x:g,y:w}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,o=n.height,l=n.orientation,c=n.mirror,u=n.axisLine,f=Zi(Zi(Zi({},rr(this.props,!1)),rr(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var d=+(l==="top"&&!c||l==="bottom"&&c);f=Zi(Zi({},f),{},{x1:i,y1:a+d*o,x2:i+s,y2:a+d*o})}else{var h=+(l==="left"&&!c||l==="right"&&c);f=Zi(Zi({},f),{},{x1:i+h*s,y1:a,x2:i+h*s,y2:a+o})}return he.createElement("line",fy({},f,{className:_r("recharts-cartesian-axis-line",qo(u,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,o=this.props,l=o.tickLine,c=o.stroke,u=o.tick,f=o.tickFormatter,d=o.unit,h=rB(Zi(Zi({},this.props),{},{ticks:n}),i,a),m=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=rr(this.props,!1),g=rr(u,!1),w=Zi(Zi({},y),{},{fill:"none"},rr(l,!1)),v=h.map(function(x,b){var S=s.getTickLineCoord(x),T=S.line,A=S.tick,O=Zi(Zi(Zi(Zi({textAnchor:m,verticalAnchor:p},y),{},{stroke:"none",fill:c},g),A),{},{index:b,payload:x,visibleTicksCount:h.length,tickFormatter:f});return he.createElement(on,fy({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},lm(s.props,x,b)),l&&he.createElement("line",fy({},w,T,{className:_r("recharts-cartesian-axis-tick-line",qo(l,"className"))})),u&&t.renderTickItem(u,O,"".concat(sr(f)?f(x.value,b):x.value).concat(d||"")))});return he.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var f=this.props,d=f.ticks,h=RI(f,qmt),m=d;return sr(l)&&(m=d&&d.length>0?l(this.props):l(h)),s<=0||o<=0||!m||!m.length?null:he.createElement(on,{className:_r("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Bi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,o=_r(i.className,"recharts-cartesian-axis-tick-value");return he.isValidElement(n)?s=he.cloneElement(n,Zi(Zi({},i),{},{className:o})):sr(n)?s=n(Zi(Zi({},i),{},{className:o})):s=he.createElement(cm,fy({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(C.Component);nB(E1,"displayName","CartesianAxis");nB(E1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var rgt=["x1","y1","x2","y2","key"],ngt=["offset"];function dm(e){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(e)}function UY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function as(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UY(Object(r),!0).forEach(function(n){igt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function igt(e,t,r){return t=agt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function agt(e){var t=sgt(e,"string");return dm(t)=="symbol"?t:t+""}function sgt(e,t){if(dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A0.apply(this,arguments)}function zY(e,t){if(e==null)return{};var r=ogt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ogt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var lgt=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,i=t.x,a=t.y,s=t.width,o=t.height,l=t.ry;return he.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Ape(e,t){var r;if(he.isValidElement(e))r=he.cloneElement(e,t);else if(sr(e))r=e(t);else{var n=t.x1,i=t.y1,a=t.x2,s=t.y2,o=t.key,l=zY(t,rgt),c=rr(l,!1);c.offset;var u=zY(c,ngt);r=he.createElement("line",A0({},u,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:o}))}return r}function cgt(e){var t=e.x,r=e.width,n=e.horizontal,i=n===void 0?!0:n,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=as(as({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(l),index:l});return Ape(i,c)});return he.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function ugt(e){var t=e.y,r=e.height,n=e.vertical,i=n===void 0?!0:n,a=e.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var c=as(as({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(l),index:l});return Ape(i,c)});return he.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function fgt(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,a=e.width,s=e.height,o=e.horizontalPoints,l=e.horizontal,c=l===void 0?!0:l;if(!c||!t||!t.length)return null;var u=o.map(function(d){return Math.round(d+i-i)}).sort(function(d,h){return d-h});i!==u[0]&&u.unshift(0);var f=u.map(function(d,h){var m=!u[h+1],p=m?i+s-d:u[h+1]-d;if(p<=0)return null;var y=h%t.length;return he.createElement("rect",{key:"react-".concat(h),y:d,x:n,height:p,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return he.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function dgt(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,i=e.fillOpacity,a=e.x,s=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!r||!n||!n.length)return null;var u=c.map(function(d){return Math.round(d+a-a)}).sort(function(d,h){return d-h});a!==u[0]&&u.unshift(0);var f=u.map(function(d,h){var m=!u[h+1],p=m?a+o-d:u[h+1]-d;if(p<=0)return null;var y=h%n.length;return he.createElement("rect",{key:"react-".concat(h),x:d,y:s,width:p,height:l,stroke:"none",fill:n[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return he.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var hgt=function(t,r){var n=t.xAxis,i=t.width,a=t.height,s=t.offset;return _he(rB(as(as(as({},E1.defaultProps),n),{},{ticks:Mf(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},pgt=function(t,r){var n=t.yAxis,i=t.width,a=t.height,s=t.offset;return _he(rB(as(as(as({},E1.defaultProps),n),{},{ticks:Mf(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},gg={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Tpe(e){var t,r,n,i,a,s,o=JF(),l=QF(),c=tmt(),u=as(as({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:gg.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:gg.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:gg.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:gg.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:gg.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:gg.verticalFill,x:ht(e.x)?e.x:c.left,y:ht(e.y)?e.y:c.top,width:ht(e.width)?e.width:c.width,height:ht(e.height)?e.height:c.height}),f=u.x,d=u.y,h=u.width,m=u.height,p=u.syncWithTicks,y=u.horizontalValues,g=u.verticalValues,w=J0t(),v=Q0t();if(!ht(h)||h<=0||!ht(m)||m<=0||!ht(f)||f!==+f||!ht(d)||d!==+d)return null;var x=u.verticalCoordinatesGenerator||hgt,b=u.horizontalCoordinatesGenerator||pgt,S=u.horizontalPoints,T=u.verticalPoints;if((!S||!S.length)&&sr(b)){var A=y&&y.length,O=b({yAxis:v?as(as({},v),{},{ticks:A?y:v.ticks}):void 0,width:o,height:l,offset:c},A?!0:p);Rc(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(dm(O),"]")),Array.isArray(O)&&(S=O)}if((!T||!T.length)&&sr(x)){var M=g&&g.length,P=x({xAxis:w?as(as({},w),{},{ticks:M?g:w.ticks}):void 0,width:o,height:l,offset:c},M?!0:p);Rc(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(dm(P),"]")),Array.isArray(P)&&(T=P)}return he.createElement("g",{className:"recharts-cartesian-grid"},he.createElement(lgt,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),he.createElement(cgt,A0({},u,{offset:c,horizontalPoints:S,xAxis:w,yAxis:v})),he.createElement(ugt,A0({},u,{offset:c,verticalPoints:T,xAxis:w,yAxis:v})),he.createElement(fgt,A0({},u,{horizontalPoints:S})),he.createElement(dgt,A0({},u,{verticalPoints:T})))}Tpe.displayName="CartesianGrid";function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function mgt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ggt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ope(n.key),n)}}function ygt(e,t,r){return t&&ggt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vgt(e,t,r){return t=E5(t),wgt(e,kpe()?Reflect.construct(t,r||[],E5(e).constructor):t.apply(e,r))}function wgt(e,t){if(t&&(Mv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xgt(e)}function xgt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kpe=function(){return!!e})()}function E5(e){return E5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E5(e)}function bgt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CD(e,t)}function CD(e,t){return CD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},CD(e,t)}function Cpe(e,t,r){return t=Ope(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ope(e){var t=_gt(e,"string");return Mv(t)=="symbol"?t:t+""}function _gt(e,t){if(Mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function OD(){return OD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OD.apply(this,arguments)}function Sgt(e){var t=e.xAxisId,r=JF(),n=QF(),i=ppe(t);return i==null?null:C.createElement(E1,OD({},i,{className:_r("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Mf(s,!0)}}))}var nP=function(e){function t(){return mgt(this,t),vgt(this,t,arguments)}return bgt(t,e),ygt(t,[{key:"render",value:function(){return C.createElement(Sgt,this.props)}}])}(C.Component);Cpe(nP,"displayName","XAxis");Cpe(nP,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function Egt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Agt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ipe(n.key),n)}}function Tgt(e,t,r){return t&&Agt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kgt(e,t,r){return t=A5(t),Cgt(e,Ppe()?Reflect.construct(t,r||[],A5(e).constructor):t.apply(e,r))}function Cgt(e,t){if(t&&(Dv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ogt(e)}function Ogt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ppe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ppe=function(){return!!e})()}function A5(e){return A5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A5(e)}function Pgt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PD(e,t)}function PD(e,t){return PD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PD(e,t)}function Npe(e,t,r){return t=Ipe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ipe(e){var t=Ngt(e,"string");return Dv(t)=="symbol"?t:t+""}function Ngt(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ND(){return ND=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ND.apply(this,arguments)}var Igt=function(t){var r=t.yAxisId,n=JF(),i=QF(),a=mpe(r);return a==null?null:C.createElement(E1,ND({},a,{className:_r("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(o){return Mf(o,!0)}}))},iP=function(e){function t(){return Egt(this,t),kgt(this,t,arguments)}return Pgt(t,e),Tgt(t,[{key:"render",value:function(){return C.createElement(Igt,this.props)}}])}(C.Component);Npe(iP,"displayName","YAxis");Npe(iP,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VY(e){return Dgt(e)||Mgt(e)||Lgt(e)||Rgt()}function Rgt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lgt(e,t){if(e){if(typeof e=="string")return ID(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ID(e,t)}}function Mgt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dgt(e){if(Array.isArray(e))return ID(e)}function ID(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var RD=function(t,r,n,i,a){var s=Il(t,tB),o=Il(t,eP),l=[].concat(VY(s),VY(o)),c=Il(t,rP),u="".concat(i,"Id"),f=i[0],d=r;if(l.length&&(d=l.reduce(function(p,y){if(y.props[u]===n&&ju(y.props,"extendDomain")&&ht(y.props[f])){var g=y.props[f];return[Math.min(p[0],g),Math.max(p[1],g)]}return p},d)),c.length){var h="".concat(f,"1"),m="".concat(f,"2");d=c.reduce(function(p,y){if(y.props[u]===n&&ju(y.props,"extendDomain")&&ht(y.props[h])&&ht(y.props[m])){var g=y.props[h],w=y.props[m];return[Math.min(p[0],g,w),Math.max(p[1],g,w)]}return p},d)}return a&&a.length&&(d=a.reduce(function(p,y){return ht(y)?[Math.min(p[0],y),Math.max(p[1],y)]:p},d)),d},LI=new jRe,MI="recharts.syncMouseEvents";function k_(e){"@babel/helpers - typeof";return k_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k_(e)}function jgt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rpe(n.key),n)}}function Fgt(e,t,r){return t&&$gt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DI(e,t,r){return t=Rpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rpe(e){var t=Bgt(e,"string");return k_(t)=="symbol"?t:t+""}function Bgt(e,t){if(k_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(k_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ugt=function(){function e(){jgt(this,e),DI(this,"activeIndex",0),DI(this,"coordinateList",[]),DI(this,"layout","horizontal")}return Fgt(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,o=s===void 0?null:s,l=r.layout,c=l===void 0?null:l,u=r.offset,f=u===void 0?null:u,d=r.mouseHandlerCallback,h=d===void 0?null:d;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=a+l+c,d=s+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:f,pageY:d})}}}])}();function zgt(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&ht(n)&&ht(i))return!0}return!1}function Vgt(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Lpe(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,a=e.endAngle,s=On(t,r,n,i),o=On(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function Wgt(e,t,r){var n,i,a,s;if(e==="horizontal")n=t.x,a=n,i=r.top,s=r.top+r.height;else if(e==="vertical")i=t.y,s=i,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,f=t.angle,d=On(o,l,c,f),h=On(o,l,u,f);n=d.x,i=d.y,a=h.x,s=h.y}else return Lpe(t);return[{x:n,y:i},{x:a,y:s}]}function C_(e){"@babel/helpers - typeof";return C_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C_(e)}function WY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function FE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WY(Object(r),!0).forEach(function(n){Hgt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hgt(e,t,r){return t=Ggt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ggt(e){var t=qgt(e,"string");return C_(t)=="symbol"?t:t+""}function qgt(e,t){if(C_(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(C_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kgt(e){var t,r,n=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,o=e.activePayload,l=e.offset,c=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,d=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!a||!s||d!=="ScatterChart"&&i!=="axis")return null;var m,p=rD;if(d==="ScatterChart")m=s,p=kdt;else if(d==="BarChart")m=Vgt(f,s,l,u),p=qF;else if(f==="radial"){var y=Lpe(s),g=y.cx,w=y.cy,v=y.radius,x=y.startAngle,b=y.endAngle;m={cx:g,cy:w,startAngle:x,endAngle:b,innerRadius:v,outerRadius:v},p=Rhe}else m={points:Wgt(f,s,l)},p=rD;var S=FE(FE(FE(FE({stroke:"#ccc",pointerEvents:"none"},l),m),rr(h,!1)),{},{payload:o,payloadIndex:c,className:_r("recharts-tooltip-cursor",h.className)});return C.isValidElement(h)?C.cloneElement(h,S):C.createElement(p,S)}var Ygt=["item"],Xgt=["children","className","width","height","style","compact","title","desc"];function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dy.apply(this,arguments)}function HY(e,t){return Qgt(e)||Jgt(e,t)||Dpe(e,t)||Zgt()}function Zgt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jgt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function Qgt(e){if(Array.isArray(e))return e}function GY(e,t){if(e==null)return{};var r=eyt(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eyt(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function tyt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ryt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jpe(n.key),n)}}function nyt(e,t,r){return t&&ryt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iyt(e,t,r){return t=T5(t),ayt(e,Mpe()?Reflect.construct(t,r||[],T5(e).constructor):t.apply(e,r))}function ayt(e,t){if(t&&(jv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return syt(e)}function syt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mpe=function(){return!!e})()}function T5(e){return T5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T5(e)}function oyt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LD(e,t)}function LD(e,t){return LD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},LD(e,t)}function $v(e){return uyt(e)||cyt(e)||Dpe(e)||lyt()}function lyt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dpe(e,t){if(e){if(typeof e=="string")return MD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MD(e,t)}}function cyt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uyt(e){if(Array.isArray(e))return MD(e)}function MD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qY(Object(r),!0).forEach(function(n){Xt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qY(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xt(e,t,r){return t=jpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jpe(e){var t=fyt(e,"string");return jv(t)=="symbol"?t:t+""}function fyt(e,t){if(jv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dyt={xAxis:["bottom","top"],yAxis:["left","right"]},hyt={width:"100%",height:"100%"},$pe={x:0,y:0};function BE(e){return e}var pyt=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},myt=function(t,r,n,i){var a=r.find(function(u){return u&&u.index===n});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var s=a.coordinate,o=i.radius;return ze(ze(ze({},i),On(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,c=i.angle;return ze(ze(ze({},i),On(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return $pe},aP=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat($v(o),$v(c)):o},[]);return s.length>0?s:t&&t.length&&ht(i)&&ht(a)?t.slice(i,a+1):[]};function Fpe(e){return e==="number"?[0,"auto"]:void 0}var DD=function(t,r,n,i){var a=t.graphicalItems,s=t.tooltipAxis,o=aP(r,t);return n<0||!a||!a.length||n>=o.length?null:a.reduce(function(l,c){var u,f=(u=c.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var d;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;d=uM(h,s.dataKey,i)}else d=f&&f[n]||o[n];return d?[].concat($v(l),[khe(c,d)]):l},[])},KY=function(t,r,n,i){var a=i||{x:t.chartX,y:t.chartY},s=pyt(a,n),o=t.orderedTooltipTicks,l=t.tooltipAxis,c=t.tooltipTicks,u=qlt(s,o,c,l);if(u>=0&&c){var f=c[u]&&c[u].value,d=DD(t,r,u,f),h=myt(n,o,u,a);return{activeTooltipIndex:u,activeLabel:f,activePayload:d,activeCoordinate:h}}return null},gyt=function(t,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=t.layout,f=t.children,d=t.stackOffset,h=bhe(u,a);return n.reduce(function(m,p){var y,g=p.type.defaultProps!==void 0?ze(ze({},p.type.defaultProps),p.props):p.props,w=g.type,v=g.dataKey,x=g.allowDataOverflow,b=g.allowDuplicatedCategory,S=g.scale,T=g.ticks,A=g.includeHidden,O=g[s];if(m[O])return m;var M=aP(t.data,{graphicalItems:i.filter(function(I){var z,H=s in I.props?I.props[s]:(z=I.type.defaultProps)===null||z===void 0?void 0:z[s];return H===O}),dataStartIndex:l,dataEndIndex:c}),P=M.length,N,V,B;zgt(g.domain,x,w)&&(N=ZM(g.domain,null,x),h&&(w==="number"||S!=="auto")&&(B=Tx(M,v,"category")));var G=Fpe(w);if(!N||N.length===0){var Z,J=(Z=g.domain)!==null&&Z!==void 0?Z:G;if(v){if(N=Tx(M,v,w),w==="category"&&h){var Y=Mqe(N);b&&Y?(V=N,N=p5(0,P)):b||(N=_K(J,N,p).reduce(function(I,z){return I.indexOf(z)>=0?I:[].concat($v(I),[z])},[]))}else if(w==="category")b?N=N.filter(function(I){return I!==""&&!kr(I)}):N=_K(J,N,p).reduce(function(I,z){return I.indexOf(z)>=0||z===""||kr(z)?I:[].concat($v(I),[z])},[]);else if(w==="number"){var U=Jlt(M,i.filter(function(I){var z,H,q=s in I.props?I.props[s]:(z=I.type.defaultProps)===null||z===void 0?void 0:z[s],F="hide"in I.props?I.props.hide:(H=I.type.defaultProps)===null||H===void 0?void 0:H.hide;return q===O&&(A||!F)}),v,a,u);U&&(N=U)}h&&(w==="number"||S!=="auto")&&(B=Tx(M,v,"category"))}else h?N=p5(0,P):o&&o[O]&&o[O].hasStack&&w==="number"?N=d==="expand"?[0,1]:The(o[O].stackGroups,l,c):N=xhe(M,i.filter(function(I){var z=s in I.props?I.props[s]:I.type.defaultProps[s],H="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return z===O&&(A||!H)}),w,u,!0);if(w==="number")N=RD(f,N,O,a,T),J&&(N=ZM(J,N,x));else if(w==="category"&&J){var se=J,ue=N.every(function(I){return se.indexOf(I)>=0});ue&&(N=se)}}return ze(ze({},m),{},Xt({},O,ze(ze({},g),{},{axisType:a,domain:N,categoricalDomain:B,duplicateDomain:V,originalDomain:(y=g.domain)!==null&&y!==void 0?y:G,isCategorical:h,layout:u})))},{})},yyt=function(t,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=t.layout,f=t.children,d=aP(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:c}),h=d.length,m=bhe(u,a),p=-1;return n.reduce(function(y,g){var w=g.type.defaultProps!==void 0?ze(ze({},g.type.defaultProps),g.props):g.props,v=w[s],x=Fpe("number");if(!y[v]){p++;var b;return m?b=p5(0,h):o&&o[v]&&o[v].hasStack?(b=The(o[v].stackGroups,l,c),b=RD(f,b,v,a)):(b=ZM(x,xhe(d,n.filter(function(S){var T,A,O=s in S.props?S.props[s]:(T=S.type.defaultProps)===null||T===void 0?void 0:T[s],M="hide"in S.props?S.props.hide:(A=S.type.defaultProps)===null||A===void 0?void 0:A.hide;return O===v&&!M}),"number",u),i.defaultProps.allowDataOverflow),b=RD(f,b,v,a)),ze(ze({},y),{},Xt({},v,ze(ze({axisType:a},i.defaultProps),{},{hide:!0,orientation:qo(dyt,"".concat(a,".").concat(p%2),null),domain:b,originalDomain:x,isCategorical:m,layout:u})))}return y},{})},vyt=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,o=r.stackGroups,l=r.dataStartIndex,c=r.dataEndIndex,u=t.children,f="".concat(i,"Id"),d=Il(u,a),h={};return d&&d.length?h=gyt(t,{axes:d,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):s&&s.length&&(h=yyt(t,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),h},wyt=function(t){var r=ph(t),n=Mf(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:xF(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:t5(r,n)}},YY=function(t){var r=t.children,n=t.defaultShowTooltip,i=Io(r,Ov),a=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},xyt=function(t){return!t||!t.length?!1:t.some(function(r){var n=Wf(r&&r.type);return n&&n.indexOf("Bar")>=0})},XY=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},byt=function(t,r){var n=t.props,i=t.graphicalItems,a=t.xAxisMap,s=a===void 0?{}:a,o=t.yAxisMap,l=o===void 0?{}:o,c=n.width,u=n.height,f=n.children,d=n.margin||{},h=Io(f,Ov),m=Io(f,Iy),p=Object.keys(l).reduce(function(b,S){var T=l[S],A=T.orientation;return!T.mirror&&!T.hide?ze(ze({},b),{},Xt({},A,b[A]+T.width)):b},{left:d.left||0,right:d.right||0}),y=Object.keys(s).reduce(function(b,S){var T=s[S],A=T.orientation;return!T.mirror&&!T.hide?ze(ze({},b),{},Xt({},A,qo(b,"".concat(A))+T.height)):b},{top:d.top||0,bottom:d.bottom||0}),g=ze(ze({},y),p),w=g.bottom;h&&(g.bottom+=h.props.height||Ov.defaultProps.height),m&&r&&(g=Xlt(g,i,n,r));var v=c-g.left-g.right,x=u-g.top-g.bottom;return ze(ze({brushBottom:w},g),{},{width:Math.max(v,0),height:Math.max(x,0)})},_yt=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Bpe=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,s=t.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=t.axisComponents,c=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,d=function(g,w){var v=w.graphicalItems,x=w.stackGroups,b=w.offset,S=w.updateId,T=w.dataStartIndex,A=w.dataEndIndex,O=g.barSize,M=g.layout,P=g.barGap,N=g.barCategoryGap,V=g.maxBarSize,B=XY(M),G=B.numericAxisName,Z=B.cateAxisName,J=xyt(v),Y=[];return v.forEach(function(U,se){var ue=aP(g.data,{graphicalItems:[U],dataStartIndex:T,dataEndIndex:A}),I=U.type.defaultProps!==void 0?ze(ze({},U.type.defaultProps),U.props):U.props,z=I.dataKey,H=I.maxBarSize,q=I["".concat(G,"Id")],F=I["".concat(Z,"Id")],D={},re=l.reduce(function(nt,qe){var Ue=w["".concat(qe.axisType,"Map")],Qe=I["".concat(qe.axisType,"Id")];Ue&&Ue[Qe]||qe.axisType==="zAxis"||fm();var Ge=Ue[Qe];return ze(ze({},nt),{},Xt(Xt({},qe.axisType,Ge),"".concat(qe.axisType,"Ticks"),Mf(Ge)))},D),K=re[Z],le=re["".concat(Z,"Ticks")],xe=x&&x[q]&&x[q].hasStack&&oct(U,x[q].stackGroups),X=Wf(U.type).indexOf("Bar")>=0,Ie=t5(K,le),Re=[],ie=J&&Klt({barSize:O,stackGroups:x,totalSize:_yt(re,Z)});if(X){var Te,Me,tt=kr(H)?V:H,$e=(Te=(Me=t5(K,le,!0))!==null&&Me!==void 0?Me:tt)!==null&&Te!==void 0?Te:0;Re=Ylt({barGap:P,barCategoryGap:N,bandSize:$e!==Ie?$e:Ie,sizeList:ie[F],maxBarSize:tt}),$e!==Ie&&(Re=Re.map(function(nt){return ze(ze({},nt),{},{position:ze(ze({},nt.position),{},{offset:nt.position.offset-$e/2})})}))}var De=U&&U.type&&U.type.getComposedData;De&&Y.push({props:ze(ze({},De(ze(ze({},re),{},{displayedData:ue,props:g,dataKey:z,item:U,bandSize:Ie,barPosition:Re,offset:b,stackedData:xe,layout:M,dataStartIndex:T,dataEndIndex:A}))),{},Xt(Xt(Xt({key:U.key||"item-".concat(se)},G,re[G]),Z,re[Z]),"animationId",S)),childIndex:qqe(U,g.children),item:U})}),Y},h=function(g,w){var v=g.props,x=g.dataStartIndex,b=g.dataEndIndex,S=g.updateId;if(!gG({props:v}))return null;var T=v.children,A=v.layout,O=v.stackOffset,M=v.data,P=v.reverseStackOrder,N=XY(A),V=N.numericAxisName,B=N.cateAxisName,G=Il(T,n),Z=act(M,G,"".concat(V,"Id"),"".concat(B,"Id"),O,P),J=l.reduce(function(I,z){var H="".concat(z.axisType,"Map");return ze(ze({},I),{},Xt({},H,vyt(v,ze(ze({},z),{},{graphicalItems:G,stackGroups:z.axisType===V&&Z,dataStartIndex:x,dataEndIndex:b}))))},{}),Y=byt(ze(ze({},J),{},{props:v,graphicalItems:G}),w==null?void 0:w.legendBBox);Object.keys(J).forEach(function(I){J[I]=u(v,J[I],Y,I.replace("Map",""),r)});var U=J["".concat(B,"Map")],se=wyt(U),ue=d(v,ze(ze({},J),{},{dataStartIndex:x,dataEndIndex:b,updateId:S,graphicalItems:G,stackGroups:Z,offset:Y}));return ze(ze({formattedGraphicalItems:ue,graphicalItems:G,offset:Y,stackGroups:Z},se),J)},m=function(y){function g(w){var v,x,b;return tyt(this,g),b=iyt(this,g,[w]),Xt(b,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xt(b,"accessibilityManager",new Ugt),Xt(b,"handleLegendBBoxUpdate",function(S){if(S){var T=b.state,A=T.dataStartIndex,O=T.dataEndIndex,M=T.updateId;b.setState(ze({legendBBox:S},h({props:b.props,dataStartIndex:A,dataEndIndex:O,updateId:M},ze(ze({},b.state),{},{legendBBox:S}))))}}),Xt(b,"handleReceiveSyncEvent",function(S,T,A){if(b.props.syncId===S){if(A===b.eventEmitterSymbol&&typeof b.props.syncMethod!="function")return;b.applySyncEvent(T)}}),Xt(b,"handleBrushChange",function(S){var T=S.startIndex,A=S.endIndex;if(T!==b.state.dataStartIndex||A!==b.state.dataEndIndex){var O=b.state.updateId;b.setState(function(){return ze({dataStartIndex:T,dataEndIndex:A},h({props:b.props,dataStartIndex:T,dataEndIndex:A,updateId:O},b.state))}),b.triggerSyncEvent({dataStartIndex:T,dataEndIndex:A})}}),Xt(b,"handleMouseEnter",function(S){var T=b.getMouseInfo(S);if(T){var A=ze(ze({},T),{},{isTooltipActive:!0});b.setState(A),b.triggerSyncEvent(A);var O=b.props.onMouseEnter;sr(O)&&O(A,S)}}),Xt(b,"triggeredAfterMouseMove",function(S){var T=b.getMouseInfo(S),A=T?ze(ze({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};b.setState(A),b.triggerSyncEvent(A);var O=b.props.onMouseMove;sr(O)&&O(A,S)}),Xt(b,"handleItemMouseEnter",function(S){b.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Xt(b,"handleItemMouseLeave",function(){b.setState(function(){return{isTooltipActive:!1}})}),Xt(b,"handleMouseMove",function(S){S.persist(),b.throttleTriggeredAfterMouseMove(S)}),Xt(b,"handleMouseLeave",function(S){b.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};b.setState(T),b.triggerSyncEvent(T);var A=b.props.onMouseLeave;sr(A)&&A(T,S)}),Xt(b,"handleOuterEvent",function(S){var T=Gqe(S),A=qo(b.props,"".concat(T));if(T&&sr(A)){var O,M;/.*touch.*/i.test(T)?M=b.getMouseInfo(S.changedTouches[0]):M=b.getMouseInfo(S),A((O=M)!==null&&O!==void 0?O:{},S)}}),Xt(b,"handleClick",function(S){var T=b.getMouseInfo(S);if(T){var A=ze(ze({},T),{},{isTooltipActive:!0});b.setState(A),b.triggerSyncEvent(A);var O=b.props.onClick;sr(O)&&O(A,S)}}),Xt(b,"handleMouseDown",function(S){var T=b.props.onMouseDown;if(sr(T)){var A=b.getMouseInfo(S);T(A,S)}}),Xt(b,"handleMouseUp",function(S){var T=b.props.onMouseUp;if(sr(T)){var A=b.getMouseInfo(S);T(A,S)}}),Xt(b,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Xt(b,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.handleMouseDown(S.changedTouches[0])}),Xt(b,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&b.handleMouseUp(S.changedTouches[0])}),Xt(b,"handleDoubleClick",function(S){var T=b.props.onDoubleClick;if(sr(T)){var A=b.getMouseInfo(S);T(A,S)}}),Xt(b,"handleContextMenu",function(S){var T=b.props.onContextMenu;if(sr(T)){var A=b.getMouseInfo(S);T(A,S)}}),Xt(b,"triggerSyncEvent",function(S){b.props.syncId!==void 0&&LI.emit(MI,b.props.syncId,S,b.eventEmitterSymbol)}),Xt(b,"applySyncEvent",function(S){var T=b.props,A=T.layout,O=T.syncMethod,M=b.state.updateId,P=S.dataStartIndex,N=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)b.setState(ze({dataStartIndex:P,dataEndIndex:N},h({props:b.props,dataStartIndex:P,dataEndIndex:N,updateId:M},b.state)));else if(S.activeTooltipIndex!==void 0){var V=S.chartX,B=S.chartY,G=S.activeTooltipIndex,Z=b.state,J=Z.offset,Y=Z.tooltipTicks;if(!J)return;if(typeof O=="function")G=O(Y,S);else if(O==="value"){G=-1;for(var U=0;U<Y.length;U++)if(Y[U].value===S.activeLabel){G=U;break}}var se=ze(ze({},J),{},{x:J.left,y:J.top}),ue=Math.min(V,se.x+se.width),I=Math.min(B,se.y+se.height),z=Y[G]&&Y[G].value,H=DD(b.state,b.props.data,G),q=Y[G]?{x:A==="horizontal"?Y[G].coordinate:ue,y:A==="horizontal"?I:Y[G].coordinate}:$pe;b.setState(ze(ze({},S),{},{activeLabel:z,activeCoordinate:q,activePayload:H,activeTooltipIndex:G}))}else b.setState(S)}),Xt(b,"renderCursor",function(S){var T,A=b.state,O=A.isTooltipActive,M=A.activeCoordinate,P=A.activePayload,N=A.offset,V=A.activeTooltipIndex,B=A.tooltipAxisBandSize,G=b.getTooltipEventType(),Z=(T=S.props.active)!==null&&T!==void 0?T:O,J=b.props.layout,Y=S.key||"_recharts-cursor";return he.createElement(Kgt,{key:Y,activeCoordinate:M,activePayload:P,activeTooltipIndex:V,chartName:r,element:S,isActive:Z,layout:J,offset:N,tooltipAxisBandSize:B,tooltipEventType:G})}),Xt(b,"renderPolarAxis",function(S,T,A){var O=qo(S,"type.axisType"),M=qo(b.state,"".concat(O,"Map")),P=S.type.defaultProps,N=P!==void 0?ze(ze({},P),S.props):S.props,V=M&&M[N["".concat(O,"Id")]];return C.cloneElement(S,ze(ze({},V),{},{className:_r(O,V.className),key:S.key||"".concat(T,"-").concat(A),ticks:Mf(V,!0)}))}),Xt(b,"renderPolarGrid",function(S){var T=S.props,A=T.radialLines,O=T.polarAngles,M=T.polarRadius,P=b.state,N=P.radiusAxisMap,V=P.angleAxisMap,B=ph(N),G=ph(V),Z=G.cx,J=G.cy,Y=G.innerRadius,U=G.outerRadius;return C.cloneElement(S,{polarAngles:Array.isArray(O)?O:Mf(G,!0).map(function(se){return se.coordinate}),polarRadius:Array.isArray(M)?M:Mf(B,!0).map(function(se){return se.coordinate}),cx:Z,cy:J,innerRadius:Y,outerRadius:U,key:S.key||"polar-grid",radialLines:A})}),Xt(b,"renderLegend",function(){var S=b.state.formattedGraphicalItems,T=b.props,A=T.children,O=T.width,M=T.height,P=b.props.margin||{},N=O-(P.left||0)-(P.right||0),V=vhe({children:A,formattedGraphicalItems:S,legendWidth:N,legendContent:c});if(!V)return null;var B=V.item,G=GY(V,Ygt);return C.cloneElement(B,ze(ze({},G),{},{chartWidth:O,chartHeight:M,margin:P,onBBoxUpdate:b.handleLegendBBoxUpdate}))}),Xt(b,"renderTooltip",function(){var S,T=b.props,A=T.children,O=T.accessibilityLayer,M=Io(A,vc);if(!M)return null;var P=b.state,N=P.isTooltipActive,V=P.activeCoordinate,B=P.activePayload,G=P.activeLabel,Z=P.offset,J=(S=M.props.active)!==null&&S!==void 0?S:N;return C.cloneElement(M,{viewBox:ze(ze({},Z),{},{x:Z.left,y:Z.top}),active:J,label:G,payload:J?B:[],coordinate:V,accessibilityLayer:O})}),Xt(b,"renderBrush",function(S){var T=b.props,A=T.margin,O=T.data,M=b.state,P=M.offset,N=M.dataStartIndex,V=M.dataEndIndex,B=M.updateId;return C.cloneElement(S,{key:S.key||"_recharts-brush",onChange:ME(b.handleBrushChange,S.props.onChange),data:O,x:ht(S.props.x)?S.props.x:P.left,y:ht(S.props.y)?S.props.y:P.top+P.height+P.brushBottom-(A.bottom||0),width:ht(S.props.width)?S.props.width:P.width,startIndex:N,endIndex:V,updateId:"brush-".concat(B)})}),Xt(b,"renderReferenceElement",function(S,T,A){if(!S)return null;var O=b,M=O.clipPathId,P=b.state,N=P.xAxisMap,V=P.yAxisMap,B=P.offset,G=S.type.defaultProps||{},Z=S.props,J=Z.xAxisId,Y=J===void 0?G.xAxisId:J,U=Z.yAxisId,se=U===void 0?G.yAxisId:U;return C.cloneElement(S,{key:S.key||"".concat(T,"-").concat(A),xAxis:N[Y],yAxis:V[se],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:M})}),Xt(b,"renderActivePoints",function(S){var T=S.item,A=S.activePoint,O=S.basePoint,M=S.childIndex,P=S.isRange,N=[],V=T.props.key,B=T.item.type.defaultProps!==void 0?ze(ze({},T.item.type.defaultProps),T.item.props):T.item.props,G=B.activeDot,Z=B.dataKey,J=ze(ze({index:M,dataKey:Z,cx:A.x,cy:A.y,r:4,fill:GF(T.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},rr(G,!1)),kk(G));return N.push(g.renderActiveDot(G,J,"".concat(V,"-activePoint-").concat(M))),O?N.push(g.renderActiveDot(G,ze(ze({},J),{},{cx:O.x,cy:O.y}),"".concat(V,"-basePoint-").concat(M))):P&&N.push(null),N}),Xt(b,"renderGraphicChild",function(S,T,A){var O=b.filterFormatItem(S,T,A);if(!O)return null;var M=b.getTooltipEventType(),P=b.state,N=P.isTooltipActive,V=P.tooltipAxis,B=P.activeTooltipIndex,G=P.activeLabel,Z=b.props.children,J=Io(Z,vc),Y=O.props,U=Y.points,se=Y.isRange,ue=Y.baseLine,I=O.item.type.defaultProps!==void 0?ze(ze({},O.item.type.defaultProps),O.item.props):O.item.props,z=I.activeDot,H=I.hide,q=I.activeBar,F=I.activeShape,D=!!(!H&&N&&J&&(z||q||F)),re={};M!=="axis"&&J&&J.props.trigger==="click"?re={onClick:ME(b.handleItemMouseEnter,S.props.onClick)}:M!=="axis"&&(re={onMouseLeave:ME(b.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:ME(b.handleItemMouseEnter,S.props.onMouseEnter)});var K=C.cloneElement(S,ze(ze({},O.props),re));function le(qe){return typeof V.dataKey=="function"?V.dataKey(qe.payload):null}if(D)if(B>=0){var xe,X;if(V.dataKey&&!V.allowDuplicatedCategory){var Ie=typeof V.dataKey=="function"?le:"payload.".concat(V.dataKey.toString());xe=uM(U,Ie,G),X=se&&ue&&uM(ue,Ie,G)}else xe=U==null?void 0:U[B],X=se&&ue&&ue[B];if(F||q){var Re=S.props.activeIndex!==void 0?S.props.activeIndex:B;return[C.cloneElement(S,ze(ze(ze({},O.props),re),{},{activeIndex:Re})),null,null]}if(!kr(xe))return[K].concat($v(b.renderActivePoints({item:O,activePoint:xe,basePoint:X,childIndex:B,isRange:se})))}else{var ie,Te=(ie=b.getItemByXY(b.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:K},Me=Te.graphicalItem,tt=Me.item,$e=tt===void 0?S:tt,De=Me.childIndex,nt=ze(ze(ze({},O.props),re),{},{activeIndex:De});return[C.cloneElement($e,nt),null,null]}return se?[K,null,null]:[K,null]}),Xt(b,"renderCustomized",function(S,T,A){return C.cloneElement(S,ze(ze({key:"recharts-customized-".concat(A)},b.props),b.state))}),Xt(b,"renderMap",{CartesianGrid:{handler:BE,once:!0},ReferenceArea:{handler:b.renderReferenceElement},ReferenceLine:{handler:BE},ReferenceDot:{handler:b.renderReferenceElement},XAxis:{handler:BE},YAxis:{handler:BE},Brush:{handler:b.renderBrush,once:!0},Bar:{handler:b.renderGraphicChild},Line:{handler:b.renderGraphicChild},Area:{handler:b.renderGraphicChild},Radar:{handler:b.renderGraphicChild},RadialBar:{handler:b.renderGraphicChild},Scatter:{handler:b.renderGraphicChild},Pie:{handler:b.renderGraphicChild},Funnel:{handler:b.renderGraphicChild},Tooltip:{handler:b.renderCursor,once:!0},PolarGrid:{handler:b.renderPolarGrid,once:!0},PolarAngleAxis:{handler:b.renderPolarAxis},PolarRadiusAxis:{handler:b.renderPolarAxis},Customized:{handler:b.renderCustomized}}),b.clipPathId="".concat((v=w.id)!==null&&v!==void 0?v:C2("recharts"),"-clip"),b.throttleTriggeredAfterMouseMove=yde(b.triggeredAfterMouseMove,(x=w.throttleDelay)!==null&&x!==void 0?x:1e3/60),b.state={},b}return oyt(g,y),nyt(g,[{key:"componentDidMount",value:function(){var v,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,x=v.children,b=v.data,S=v.height,T=v.layout,A=Io(x,vc);if(A){var O=A.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,P=DD(this.state,b,O,M),N=this.state.tooltipTicks[O].coordinate,V=(this.state.offset.top+S)/2,B=T==="horizontal",G=B?{x:N,y:V}:{y:N,x:V},Z=this.state.formattedGraphicalItems.find(function(Y){var U=Y.item;return U.type.name==="Scatter"});Z&&(G=ze(ze({},G),Z.props.points[O].tooltipPosition),P=Z.props.points[O].tooltipPayload);var J={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:M,activePayload:P,activeCoordinate:G};this.setState(J),this.renderCursor(A),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var b,S;this.accessibilityManager.setDetails({offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(v){dM([Io(v.children,vc)],[Io(this.props.children,vc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=Io(this.props.children,vc);if(v&&typeof v.props.shared=="boolean"){var x=v.props.shared?"axis":"item";return o.indexOf(x)>=0?x:a}return a}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var x=this.container,b=x.getBoundingClientRect(),S=bit(b),T={chartX:Math.round(v.pageX-S.left),chartY:Math.round(v.pageY-S.top)},A=b.width/x.offsetWidth||1,O=this.inRange(T.chartX,T.chartY,A);if(!O)return null;var M=this.state,P=M.xAxisMap,N=M.yAxisMap,V=this.getTooltipEventType(),B=KY(this.state,this.props.data,this.props.layout,O);if(V!=="axis"&&P&&N){var G=ph(P).scale,Z=ph(N).scale,J=G&&G.invert?G.invert(T.chartX):null,Y=Z&&Z.invert?Z.invert(T.chartY):null;return ze(ze({},T),{},{xValue:J,yValue:Y},B)}return B?ze(ze({},T),B):null}},{key:"inRange",value:function(v,x){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,T=v/b,A=x/b;if(S==="horizontal"||S==="vertical"){var O=this.state.offset,M=T>=O.left&&T<=O.left+O.width&&A>=O.top&&A<=O.top+O.height;return M?{x:T,y:A}:null}var P=this.state,N=P.angleAxisMap,V=P.radiusAxisMap;if(N&&V){var B=ph(N);return AK({x:T,y:A},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,x=this.getTooltipEventType(),b=Io(v,vc),S={};b&&x==="axis"&&(b.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=kk(this.props,this.handleOuterEvent);return ze(ze({},T),S)}},{key:"addListener",value:function(){LI.on(MI,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){LI.removeListener(MI,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,x,b){for(var S=this.state.formattedGraphicalItems,T=0,A=S.length;T<A;T++){var O=S[T];if(O.item===v||O.props.key===v.key||x===Wf(O.item.type)&&b===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,x=this.state.offset,b=x.left,S=x.top,T=x.height,A=x.width;return he.createElement("defs",null,he.createElement("clipPath",{id:v},he.createElement("rect",{x:b,y:S,height:T,width:A})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(x,b){var S=HY(b,2),T=S[0],A=S[1];return ze(ze({},x),{},Xt({},T,A.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(x,b){var S=HY(b,2),T=S[0],A=S[1];return ze(ze({},x),{},Xt({},T,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[v])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(v){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[v])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(v){var x=this.state,b=x.formattedGraphicalItems,S=x.activeItem;if(b&&b.length)for(var T=0,A=b.length;T<A;T++){var O=b[T],M=O.props,P=O.item,N=P.type.defaultProps!==void 0?ze(ze({},P.type.defaultProps),P.props):P.props,V=Wf(P.type);if(V==="Bar"){var B=(M.data||[]).find(function(Y){return odt(v,Y)});if(B)return{graphicalItem:O,payload:B}}else if(V==="RadialBar"){var G=(M.data||[]).find(function(Y){return AK(v,Y)});if(G)return{graphicalItem:O,payload:G}}else if(XO(O,S)||ZO(O,S)||__(O,S)){var Z=Yht({graphicalItem:O,activeTooltipItem:S,itemData:N.data}),J=N.activeIndex===void 0?Z:N.activeIndex;return{graphicalItem:ze(ze({},O),{},{childIndex:J}),payload:__(O,S)?N.data[Z]:O.props.data[Z]}}}return null}},{key:"render",value:function(){var v=this;if(!gG(this))return null;var x=this.props,b=x.children,S=x.className,T=x.width,A=x.height,O=x.style,M=x.compact,P=x.title,N=x.desc,V=GY(x,Xgt),B=rr(V,!1);if(M)return he.createElement(PY,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},he.createElement(pM,dy({},B,{width:T,height:A,title:P,desc:N}),this.renderClipPath(),vG(b,this.renderMap)));if(this.props.accessibilityLayer){var G,Z;B.tabIndex=(G=this.props.tabIndex)!==null&&G!==void 0?G:0,B.role=(Z=this.props.role)!==null&&Z!==void 0?Z:"application",B.onKeyDown=function(Y){v.accessibilityManager.keyboardEvent(Y)},B.onFocus=function(){v.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return he.createElement(PY,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},he.createElement("div",dy({className:_r("recharts-wrapper",S),style:ze({position:"relative",cursor:"default",width:T,height:A},O)},J,{ref:function(U){v.container=U}}),he.createElement(pM,dy({},B,{width:T,height:A,title:P,desc:N,style:hyt}),this.renderClipPath(),vG(b,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(C.Component);Xt(m,"displayName",r),Xt(m,"defaultProps",ze({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xt(m,"getDerivedStateFromProps",function(y,g){var w=y.dataKey,v=y.data,x=y.children,b=y.width,S=y.height,T=y.layout,A=y.stackOffset,O=y.margin,M=g.dataStartIndex,P=g.dataEndIndex;if(g.updateId===void 0){var N=YY(y);return ze(ze(ze({},N),{},{updateId:0},h(ze(ze({props:y},N),{},{updateId:0}),g)),{},{prevDataKey:w,prevData:v,prevWidth:b,prevHeight:S,prevLayout:T,prevStackOffset:A,prevMargin:O,prevChildren:x})}if(w!==g.prevDataKey||v!==g.prevData||b!==g.prevWidth||S!==g.prevHeight||T!==g.prevLayout||A!==g.prevStackOffset||!Ny(O,g.prevMargin)){var V=YY(y),B={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},G=ze(ze({},KY(g,v,T)),{},{updateId:g.updateId+1}),Z=ze(ze(ze({},V),B),G);return ze(ze(ze({},Z),h(ze({props:y},Z),g)),{},{prevDataKey:w,prevData:v,prevWidth:b,prevHeight:S,prevLayout:T,prevStackOffset:A,prevMargin:O,prevChildren:x})}if(!dM(x,g.prevChildren)){var J,Y,U,se,ue=Io(x,Ov),I=ue&&(J=(Y=ue.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&J!==void 0?J:M,z=ue&&(U=(se=ue.props)===null||se===void 0?void 0:se.endIndex)!==null&&U!==void 0?U:P,H=I!==M||z!==P,q=!kr(v),F=q&&!H?g.updateId:g.updateId+1;return ze(ze({updateId:F},h(ze(ze({props:y},g),{},{updateId:F,dataStartIndex:I,dataEndIndex:z}),g)),{},{prevChildren:x,dataStartIndex:I,dataEndIndex:z})}return null}),Xt(m,"renderActiveDot",function(y,g,w){var v;return C.isValidElement(y)?v=C.cloneElement(y,g):sr(y)?v=y(g):v=he.createElement(KF,g),he.createElement(on,{className:"recharts-active-dot",key:w},v)});var p=C.forwardRef(function(g,w){return he.createElement(m,dy({},g,{ref:w}))});return p.displayName=m.displayName,p},Syt=Bpe({chartName:"BarChart",GraphicalChild:Im,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:nP},{axisType:"yAxis",AxisComp:iP}],formatAxisMap:k0t}),Eyt=Bpe({chartName:"PieChart",GraphicalChild:Ed,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:YO},{axisType:"radiusAxis",AxisComp:qO}],formatAxisMap:yct,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const ZY=["#22d3ee","#f87171","#a855f7","#fbbf24","#34d399"],Ayt=({data:e,currencyFormatter:t})=>{const r=e.reduce((n,i)=>n+i.value,0);return!e||e.length===0?E.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-500",children:"No data to display"}):E.jsx("div",{className:"h-[300px] w-full",children:E.jsx(vde,{width:"100%",height:"100%",children:E.jsxs(Eyt,{children:[E.jsxs(Ed,{data:e,cx:"50%",cy:"50%",innerRadius:70,outerRadius:90,paddingAngle:5,dataKey:"value",stroke:"none",children:[e.map((n,i)=>E.jsx(IO,{fill:ZY[i%ZY.length]},`cell-${i}`)),E.jsx(Bi,{value:"Total",position:"center",dy:-20,style:{fontSize:"12px",fill:"hsl(var(--muted-foreground))",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",transition:"fill 0.3s ease"}}),E.jsx(Bi,{value:t?t(r).replace(/\.00$/,""):r,position:"center",dy:15,style:{fontSize:"24px",fill:"hsl(var(--foreground))",fontWeight:800,transition:"fill 0.3s ease"}})]}),E.jsx(vc,{contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",color:"hsl(var(--foreground))",borderRadius:"12px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderWidth:"1px"},itemStyle:{color:"hsl(var(--foreground))"},formatter:n=>t?t(n):n})]})})})},Tyt=({data:e,currencyFormatter:t})=>!e||e.length===0?E.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-500",children:"No data to display"}):E.jsx("div",{className:"h-[300px] w-full",children:E.jsx(vde,{width:"100%",height:"100%",children:E.jsxs(Syt,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[E.jsx(Tpe,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",vertical:!1}),E.jsx(nP,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),E.jsx(iP,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:r=>t?t(r).replace(/\D+00(?=\D*$)/,""):r}),E.jsx(vc,{cursor:{fill:"hsl(var(--muted))",opacity:.15},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",color:"hsl(var(--foreground))",borderRadius:"12px",borderWidth:"1px"},formatter:r=>[t?t(r):r,"Amount"]}),E.jsx(Im,{dataKey:"amount",fill:"#22d3ee",radius:[6,6,0,0],maxBarSize:40})]})})});function kyt(e,t=[]){let r=[];function n(a,s){const o=C.createContext(s);o.displayName=a+"Context";const l=r.length;r=[...r,s];const c=f=>{var g;const{scope:d,children:h,...m}=f,p=((g=d==null?void 0:d[e])==null?void 0:g[l])||o,y=C.useMemo(()=>m,Object.values(m));return E.jsx(p.Provider,{value:y,children:h})};c.displayName=a+"Provider";function u(f,d){var p;const h=((p=d==null?void 0:d[e])==null?void 0:p[l])||o,m=C.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[c,u]}const i=()=>{const a=r.map(s=>C.createContext(s));return function(o){const l=(o==null?void 0:o[e])||a;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[n,Cyt(i,...t)]}function Cyt(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=n.reduce((o,{useScope:l,scopeName:c})=>{const f=l(a)[`__scope${c}`];return{...o,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var Oyt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Upe=Oyt.reduce((e,t)=>{const r=vC(`Primitive.${t}`),n=C.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(l,{...o,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),iB="Progress",aB=100,[Pyt]=kyt(iB),[Nyt,Iyt]=Pyt(iB),zpe=C.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:a=Ryt,...s}=e;(i||i===0)&&!JY(i)&&console.error(Lyt(`${i}`,"Progress"));const o=JY(i)?i:aB;n!==null&&!QY(n,o)&&console.error(Myt(`${n}`,"Progress"));const l=QY(n,o)?n:null,c=k5(l)?a(l,o):void 0;return E.jsx(Nyt,{scope:r,value:l,max:o,children:E.jsx(Upe.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":k5(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":Hpe(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});zpe.displayName=iB;var Vpe="ProgressIndicator",Wpe=C.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,i=Iyt(Vpe,r);return E.jsx(Upe.div,{"data-state":Hpe(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});Wpe.displayName=Vpe;function Ryt(e,t){return`${Math.round(e/t*100)}%`}function Hpe(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function k5(e){return typeof e=="number"}function JY(e){return k5(e)&&!isNaN(e)&&e>0}function QY(e,t){return k5(e)&&!isNaN(e)&&e<=t&&e>=0}function Lyt(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${aB}\`.`}function Myt(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${aB} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Gpe=zpe,Dyt=Wpe;const jyt=C.forwardRef(({className:e,value:t,...r},n)=>E.jsx(Gpe,{ref:n,className:Ft("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:E.jsx(Dyt,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));jyt.displayName=Gpe.displayName;function qpe(){return E.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] space-y-4",children:[E.jsx(Sm,{className:"h-12 w-12 animate-spin text-cyan-500"}),E.jsx("p",{className:"text-muted-foreground text-sm font-medium animate-pulse",children:"Loading data..."})]})}const $yt=()=>{var v,x;const{expenses:e,categories:t,formatCurrency:r,goals:n,isLoading:i}=yd(),{user:a}=gd(),s=K_(),[o,l]=C.useState(!1),c=new Date().getMonth(),u=new Date().getFullYear(),f=C.useMemo(()=>e.filter(b=>{const S=new Date(b.date);return S.getMonth()===c&&S.getFullYear()===u}),[e,c,u]),d=C.useMemo(()=>f.reduce((b,S)=>b+S.amount,0),[f]),h=C.useMemo(()=>5e4-e.reduce((S,T)=>S+T.amount,0),[e]),m=C.useMemo(()=>{const b=n[0]||{target_amount:5e4},S=5e4-h;return Math.min(S/b.target_amount*100,100)},[n,h]),p=C.useMemo(()=>t.map(b=>({name:b,value:f.filter(S=>S.category===b).reduce((S,T)=>S+T.amount,0)})).filter(b=>b.value>0),[f,t]),y=C.useMemo(()=>{const b=[],S=new Date;for(let T=5;T>=0;T--){const A=new Date(S.getFullYear(),S.getMonth()-T,1),O=A.toLocaleString("default",{month:"short"}),M=e.filter(P=>{const N=new Date(P.date);return N.getMonth()===A.getMonth()&&N.getFullYear()===A.getFullYear()}).reduce((P,N)=>P+N.amount,0);b.push({date:O,amount:M})}return b},[e]),g=e.slice(0,4),w=b=>{const S=(b||"").toLowerCase();return S.includes("food")||S.includes("dining")?E.jsx(mAe,{className:"h-4 w-4"}):S.includes("housing")||S.includes("rent")?E.jsx(KEe,{className:"h-4 w-4"}):S.includes("entertainment")?E.jsx(hAe,{className:"h-4 w-4"}):E.jsx(VEe,{className:"h-4 w-4"})};return i?E.jsx(qpe,{}):E.jsxs("div",{className:"space-y-8 pb-8",children:[E.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground transition-colors",children:"Personal Dashboard"}),E.jsxs("p",{className:"text-muted-foreground transition-colors",children:["Welcome back,"," ",((x=(v=a==null?void 0:a.user_metadata)==null?void 0:v.full_name)==null?void 0:x.split(" ")[0])||"User","!"]})]}),E.jsxs("div",{className:"flex items-center gap-3 relative",children:[E.jsx(Er,{variant:"outline",size:"icon",onClick:()=>{l(!0),setTimeout(()=>l(!1),3e3)},className:"rounded-full bg-secondary/50 border-border text-foreground hover:bg-secondary/80 transition-all shadow-sm",children:E.jsx($Ee,{className:"h-4 w-4"})}),o&&E.jsx("div",{className:"absolute top-12 right-0 bg-slate-800 border border-slate-700 text-white text-[10px] py-1 px-3 rounded-md shadow-xl z-50 animate-in fade-in zoom-in duration-200",children:"No new notifications"}),E.jsxs(Er,{onClick:()=>s("/expenses"),className:"bg-cyan-400 hover:bg-cyan-500 text-slate-950 font-semibold gap-2",children:[E.jsx(pb,{className:"h-4 w-4"})," Add Expense"]})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsx(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:E.jsxs($n,{className:"pt-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:E.jsx(yC,{className:"h-5 w-5 text-emerald-500"})}),E.jsxs("div",{className:"flex items-center gap-1 text-emerald-500 text-xs font-medium",children:[E.jsx(fx,{className:"h-3 w-3"})," +12.5%"]})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Balance"}),E.jsx("p",{className:"text-2xl font-bold text-foreground",children:r(h)})]})]})}),E.jsx(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:E.jsxs($n,{className:"pt-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:E.jsx(fx,{className:"h-5 w-5 text-orange-500"})}),E.jsxs("div",{className:"flex items-center gap-1 text-orange-500 text-xs font-medium",children:[E.jsx(fx,{className:"h-3 w-3"})," +4.2%"]})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Spending"}),E.jsx("p",{className:"text-2xl font-bold text-foreground",children:r(d)})]})]})}),E.jsx(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:E.jsxs($n,{className:"pt-6",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:E.jsx(Wte,{className:"h-5 w-5 text-purple-500"})}),E.jsxs("p",{className:"text-xs text-muted-foreground",children:["Goal: ",r(5e4)]})]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"Savings Progress"}),E.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[m.toFixed(1),"%"]})]}),E.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-cyan-400 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.5)]",style:{width:`${m}%`}})})]})]})})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[E.jsxs(wn,{className:"lg:col-span-2 bg-card/50 border-border shadow-sm",children:[E.jsxs(fs,{className:"flex flex-row items-center justify-between",children:[E.jsxs("div",{children:[E.jsx(Fs,{className:"text-foreground text-lg font-semibold",children:"Spending Categories"}),E.jsx(zc,{className:"text-muted-foreground",children:"This Month"})]}),E.jsx("select",{className:"bg-transparent border-none text-xs text-muted-foreground focus:ring-0 cursor-pointer hover:text-foreground transition-colors",children:E.jsx("option",{children:"This Month"})})]}),E.jsxs($n,{children:[E.jsx(Ayt,{data:p,currencyFormatter:r}),E.jsx("div",{className:"mt-4 space-y-3",children:p.slice(0,3).map((b,S)=>E.jsxs("div",{className:"flex items-center justify-between text-sm",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-2 h-2 rounded-full shadow-sm",style:{backgroundColor:["#22d3ee","#f87171","#a855f7"][S%3]}}),E.jsx("span",{className:"text-muted-foreground",children:b.name})]}),E.jsx("span",{className:"text-foreground font-medium",children:r(b.value)})]},b.name))})]})]}),E.jsxs(wn,{className:"lg:col-span-3 bg-card/50 border-border shadow-sm",children:[E.jsx(fs,{children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx(Fs,{className:"text-foreground text-lg font-semibold",children:"Monthly Trends"}),E.jsx(zc,{className:"text-muted-foreground",children:"Income vs Expenses over 6 months"})]}),E.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[E.jsxs("div",{className:"flex items-center gap-1.5",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400"}),E.jsx("span",{className:"text-muted-foreground",children:"Income"})]}),E.jsxs("div",{className:"flex items-center gap-1.5",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),E.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]})}),E.jsx($n,{children:E.jsx(Tyt,{data:y,currencyFormatter:r})})]})]}),E.jsxs(wn,{className:"bg-card/50 border-border shadow-sm",children:[E.jsxs(fs,{className:"flex flex-row items-center justify-between pb-2",children:[E.jsx(Fs,{className:"text-foreground text-lg font-semibold",children:"Recent Expenses"}),E.jsx(Er,{variant:"link",className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 transition-colors text-sm px-0",children:"View All"})]}),E.jsx($n,{children:E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full",children:[E.jsx("thead",{children:E.jsxs("tr",{className:"text-left text-xs text-muted-foreground uppercase tracking-wider border-b border-border",children:[E.jsx("th",{className:"pb-4 font-medium",children:"Date"}),E.jsx("th",{className:"pb-4 font-medium",children:"Merchant / Category"}),E.jsx("th",{className:"pb-4 font-medium",children:"Amount"}),E.jsx("th",{className:"pb-4 font-medium",children:"Status"}),E.jsx("th",{className:"pb-4"})]})}),E.jsx("tbody",{className:"divide-y divide-border/50",children:g.map(b=>E.jsxs("tr",{className:"text-sm group hover:bg-muted/50 transition-colors",children:[E.jsxs("td",{className:"py-4",children:[E.jsx("div",{className:"text-foreground font-medium",children:new Date(b.date).toLocaleDateString()}),E.jsx("div",{className:"text-[10px] text-muted-foreground",children:new Date(b.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),E.jsx("td",{className:"py-4",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"p-2 bg-muted rounded-lg text-emerald-600 dark:text-emerald-400 shadow-sm transition-colors group-hover:bg-background",children:w(b.category)}),E.jsxs("div",{children:[E.jsx("div",{className:"text-foreground font-medium transition-colors",children:b.description||"Expense"}),E.jsx("div",{className:"text-xs text-muted-foreground",children:b.category})]})]})}),E.jsxs("td",{className:"py-4 font-medium text-foreground",children:["-",r(b.amount)]}),E.jsx("td",{className:"py-4",children:E.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-500/10 text-emerald-700 dark:text-emerald-500 shadow-sm",children:"Completed"})}),E.jsx("td",{className:"py-4 text-right",children:E.jsx(Er,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground transition-colors hover:bg-muted",children:E.jsx(iAe,{className:"h-4 w-4"})})})]},b.id))})]})})})]})]})};function Fyt(e){const t=Byt(e),r=C.forwardRef((n,i)=>{const{children:a,...s}=n,o=C.Children.toArray(a),l=o.find(zyt);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function Byt(e){const t=C.forwardRef((r,n)=>{const{children:i,...a}=r;if(C.isValidElement(i)){const s=Wyt(i),o=Vyt(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Uyt=Symbol("radix.slottable");function zyt(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Uyt}function Vyt(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function Wyt(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var sP="Dialog",[Kpe]=Hu(sP),[Hyt,Kc]=Kpe(sP),Ype=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:s=!0}=e,o=C.useRef(null),l=C.useRef(null),[c,u]=Kh({prop:n,defaultProp:i??!1,onChange:a,caller:sP});return E.jsx(Hyt,{scope:t,triggerRef:o,contentRef:l,contentId:Nc(),titleId:Nc(),descriptionId:Nc(),open:c,onOpenChange:u,onOpenToggle:C.useCallback(()=>u(f=>!f),[u]),modal:s,children:r})};Ype.displayName=sP;var Xpe="DialogTrigger",Zpe=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Kc(Xpe,r),a=Mr(t,i.triggerRef);return E.jsx(lr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":lB(i.open),...n,ref:a,onClick:_t(e.onClick,i.onOpenToggle)})});Zpe.displayName=Xpe;var sB="DialogPortal",[Gyt,Jpe]=Kpe(sB,{forceMount:void 0}),Qpe=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,a=Kc(sB,t);return E.jsx(Gyt,{scope:t,forceMount:r,children:C.Children.map(n,s=>E.jsx(Hc,{present:r||a.open,children:E.jsx(t2,{asChild:!0,container:i,children:s})}))})};Qpe.displayName=sB;var C5="DialogOverlay",e0e=C.forwardRef((e,t)=>{const r=Jpe(C5,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Kc(C5,e.__scopeDialog);return a.modal?E.jsx(Hc,{present:n||a.open,children:E.jsx(Kyt,{...i,ref:t})}):null});e0e.displayName=C5;var qyt=Fyt("DialogOverlay.RemoveScroll"),Kyt=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Kc(C5,r);return E.jsx(n2,{as:qyt,allowPinchZoom:!0,shards:[i.contentRef],children:E.jsx(lr.div,{"data-state":lB(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),hm="DialogContent",t0e=C.forwardRef((e,t)=>{const r=Jpe(hm,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Kc(hm,e.__scopeDialog);return E.jsx(Hc,{present:n||a.open,children:a.modal?E.jsx(Yyt,{...i,ref:t}):E.jsx(Xyt,{...i,ref:t})})});t0e.displayName=hm;var Yyt=C.forwardRef((e,t)=>{const r=Kc(hm,e.__scopeDialog),n=C.useRef(null),i=Mr(t,r.contentRef,n);return C.useEffect(()=>{const a=n.current;if(a)return kC(a)},[]),E.jsx(r0e,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_t(e.onCloseAutoFocus,a=>{var s;a.preventDefault(),(s=r.triggerRef.current)==null||s.focus()}),onPointerDownOutside:_t(e.onPointerDownOutside,a=>{const s=a.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&a.preventDefault()}),onFocusOutside:_t(e.onFocusOutside,a=>a.preventDefault())})}),Xyt=C.forwardRef((e,t)=>{const r=Kc(hm,e.__scopeDialog),n=C.useRef(!1),i=C.useRef(!1);return E.jsx(r0e,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,a),a.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=a.target;((c=r.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),r0e=C.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=e,o=Kc(hm,r),l=C.useRef(null),c=Mr(t,l);return xC(),E.jsxs(E.Fragment,{children:[E.jsx(Q_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:E.jsx(J_,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":lB(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),E.jsxs(E.Fragment,{children:[E.jsx(Zyt,{titleId:o.titleId}),E.jsx(Qyt,{contentRef:l,descriptionId:o.descriptionId})]})]})}),oB="DialogTitle",n0e=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Kc(oB,r);return E.jsx(lr.h2,{id:i.titleId,...n,ref:t})});n0e.displayName=oB;var i0e="DialogDescription",a0e=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Kc(i0e,r);return E.jsx(lr.p,{id:i.descriptionId,...n,ref:t})});a0e.displayName=i0e;var s0e="DialogClose",o0e=C.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Kc(s0e,r);return E.jsx(lr.button,{type:"button",...n,ref:t,onClick:_t(e.onClick,()=>i.onOpenChange(!1))})});o0e.displayName=s0e;function lB(e){return e?"open":"closed"}var l0e="DialogTitleWarning",[H4t,c0e]=aTe(l0e,{contentName:hm,titleName:oB,docsSlug:"dialog"}),Zyt=({titleId:e})=>{const t=c0e(l0e),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Jyt="DialogDescriptionWarning",Qyt=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c0e(Jyt).contentName}}.`;return C.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},evt=Ype,tvt=Zpe,rvt=Qpe,u0e=e0e,f0e=t0e,d0e=n0e,h0e=a0e,p0e=o0e;const m0e=evt,nvt=tvt,ivt=rvt,avt=p0e,g0e=C.forwardRef(({className:e,...t},r)=>E.jsx(u0e,{ref:r,className:Ft("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));g0e.displayName=u0e.displayName;const cB=C.forwardRef(({className:e,children:t,...r},n)=>E.jsxs(ivt,{children:[E.jsx(g0e,{}),E.jsxs(f0e,{ref:n,className:Ft("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,E.jsxs(p0e,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[E.jsx(mb,{className:"h-4 w-4"}),E.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cB.displayName=f0e.displayName;const uB=({className:e,...t})=>E.jsx("div",{className:Ft("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});uB.displayName="DialogHeader";const y0e=({className:e,...t})=>E.jsx("div",{className:Ft("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});y0e.displayName="DialogFooter";const fB=C.forwardRef(({className:e,...t},r)=>E.jsx(d0e,{ref:r,className:Ft("text-lg font-semibold leading-none tracking-tight",e),...t}));fB.displayName=d0e.displayName;const svt=C.forwardRef(({className:e,...t},r)=>E.jsx(h0e,{ref:r,className:Ft("text-sm text-muted-foreground",e),...t}));svt.displayName=h0e.displayName;function O5(e,[t,r]){return Math.min(r,Math.max(t,e))}function ovt(e){const t=lvt(e),r=C.forwardRef((n,i)=>{const{children:a,...s}=n,o=C.Children.toArray(a),l=o.find(uvt);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function lvt(e){const t=C.forwardRef((r,n)=>{const{children:i,...a}=r;if(C.isValidElement(i)){const s=dvt(i),o=fvt(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cvt=Symbol("radix.slottable");function uvt(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cvt}function fvt(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function dvt(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function v0e(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var w0e=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hvt="VisuallyHidden",pvt=C.forwardRef((e,t)=>E.jsx(lr.span,{...e,ref:t,style:{...w0e,...e.style}}));pvt.displayName=hvt;var mvt=[" ","Enter","ArrowUp","ArrowDown"],gvt=[" ","Enter"],pm="Select",[oP,lP,yvt]=wC(pm),[A1]=Hu(pm,[yvt,t1]),cP=t1(),[vvt,Ep]=A1(pm),[wvt,xvt]=A1(pm),x0e=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:a,value:s,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:d,required:h,form:m}=e,p=cP(t),[y,g]=C.useState(null),[w,v]=C.useState(null),[x,b]=C.useState(!1),S=Z_(c),[T,A]=Kh({prop:n,defaultProp:i??!1,onChange:a,caller:pm}),[O,M]=Kh({prop:s,defaultProp:o,onChange:l,caller:pm}),P=C.useRef(null),N=y?m||!!y.closest("form"):!0,[V,B]=C.useState(new Set),G=Array.from(V).map(Z=>Z.props.value).join(";");return E.jsx(D6,{...p,children:E.jsxs(vvt,{required:h,scope:t,trigger:y,onTriggerChange:g,valueNode:w,onValueNodeChange:v,valueNodeHasChildren:x,onValueNodeHasChildrenChange:b,contentId:Nc(),value:O,onValueChange:M,open:T,onOpenChange:A,dir:S,triggerPointerDownPosRef:P,disabled:d,children:[E.jsx(oP.Provider,{scope:t,children:E.jsx(wvt,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(Z=>{B(J=>new Set(J).add(Z))},[]),onNativeOptionRemove:C.useCallback(Z=>{B(J=>{const Y=new Set(J);return Y.delete(Z),Y})},[]),children:r})}),N?E.jsxs(W0e,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:f,value:O,onChange:Z=>M(Z.target.value),disabled:d,form:m,children:[O===void 0?E.jsx("option",{value:""}):null,Array.from(V)]},G):null]})})};x0e.displayName=pm;var b0e="SelectTrigger",_0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,a=cP(r),s=Ep(b0e,r),o=s.disabled||n,l=Mr(t,s.onTriggerChange),c=lP(r),u=C.useRef("touch"),[f,d,h]=G0e(p=>{const y=c().filter(v=>!v.disabled),g=y.find(v=>v.value===s.value),w=q0e(y,p,g);w!==void 0&&s.onValueChange(w.value)}),m=p=>{o||(s.onOpenChange(!0),h()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return E.jsx(AC,{asChild:!0,...a,children:E.jsx(lr.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":H0e(s.value)?"":void 0,...i,ref:l,onClick:_t(i.onClick,p=>{p.currentTarget.focus(),u.current!=="mouse"&&m(p)}),onPointerDown:_t(i.onPointerDown,p=>{u.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(m(p),p.preventDefault())}),onKeyDown:_t(i.onKeyDown,p=>{const y=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(y&&p.key===" ")&&mvt.includes(p.key)&&(m(),p.preventDefault())})})})});_0e.displayName=b0e;var S0e="SelectValue",E0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:s="",...o}=e,l=Ep(S0e,r),{onValueNodeHasChildrenChange:c}=l,u=a!==void 0,f=Mr(t,l.onValueNodeChange);return fa(()=>{c(u)},[c,u]),E.jsx(lr.span,{...o,ref:f,style:{pointerEvents:"none"},children:H0e(l.value)?E.jsx(E.Fragment,{children:s}):a})});E0e.displayName=S0e;var bvt="SelectIcon",A0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return E.jsx(lr.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});A0e.displayName=bvt;var _vt="SelectPortal",T0e=e=>E.jsx(t2,{asChild:!0,...e});T0e.displayName=_vt;var mm="SelectContent",k0e=C.forwardRef((e,t)=>{const r=Ep(mm,e.__scopeSelect),[n,i]=C.useState();if(fa(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?Gv.createPortal(E.jsx(C0e,{scope:e.__scopeSelect,children:E.jsx(oP.Slot,{scope:e.__scopeSelect,children:E.jsx("div",{children:e.children})})}),a):null}return E.jsx(O0e,{...e,ref:t})});k0e.displayName=mm;var fc=10,[C0e,Ap]=A1(mm),Svt="SelectContentImpl",Evt=ovt("SelectContent.RemoveScroll"),O0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:h,sticky:m,hideWhenDetached:p,avoidCollisions:y,...g}=e,w=Ep(mm,r),[v,x]=C.useState(null),[b,S]=C.useState(null),T=Mr(t,D=>x(D)),[A,O]=C.useState(null),[M,P]=C.useState(null),N=lP(r),[V,B]=C.useState(!1),G=C.useRef(!1);C.useEffect(()=>{if(v)return kC(v)},[v]),xC();const Z=C.useCallback(D=>{const[re,...K]=N().map(X=>X.ref.current),[le]=K.slice(-1),xe=document.activeElement;for(const X of D)if(X===xe||(X==null||X.scrollIntoView({block:"nearest"}),X===re&&b&&(b.scrollTop=0),X===le&&b&&(b.scrollTop=b.scrollHeight),X==null||X.focus(),document.activeElement!==xe))return},[N,b]),J=C.useCallback(()=>Z([A,v]),[Z,A,v]);C.useEffect(()=>{V&&J()},[V,J]);const{onOpenChange:Y,triggerPointerDownPosRef:U}=w;C.useEffect(()=>{if(v){let D={x:0,y:0};const re=le=>{var xe,X;D={x:Math.abs(Math.round(le.pageX)-(((xe=U.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(le.pageY)-(((X=U.current)==null?void 0:X.y)??0))}},K=le=>{D.x<=10&&D.y<=10?le.preventDefault():v.contains(le.target)||Y(!1),document.removeEventListener("pointermove",re),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",K,{capture:!0})}}},[v,Y,U]),C.useEffect(()=>{const D=()=>Y(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[Y]);const[se,ue]=G0e(D=>{const re=N().filter(xe=>!xe.disabled),K=re.find(xe=>xe.ref.current===document.activeElement),le=q0e(re,D,K);le&&setTimeout(()=>le.ref.current.focus())}),I=C.useCallback((D,re,K)=>{const le=!G.current&&!K;(w.value!==void 0&&w.value===re||le)&&(O(D),le&&(G.current=!0))},[w.value]),z=C.useCallback(()=>v==null?void 0:v.focus(),[v]),H=C.useCallback((D,re,K)=>{const le=!G.current&&!K;(w.value!==void 0&&w.value===re||le)&&P(D)},[w.value]),q=n==="popper"?jD:P0e,F=q===jD?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:d,collisionPadding:h,sticky:m,hideWhenDetached:p,avoidCollisions:y}:{};return E.jsx(C0e,{scope:r,content:v,viewport:b,onViewportChange:S,itemRefCallback:I,selectedItem:A,onItemLeave:z,itemTextRefCallback:H,focusSelectedItem:J,selectedItemText:M,position:n,isPositioned:V,searchRef:se,children:E.jsx(n2,{as:Evt,allowPinchZoom:!0,children:E.jsx(Q_,{asChild:!0,trapped:w.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:_t(i,D=>{var re;(re=w.trigger)==null||re.focus({preventScroll:!0}),D.preventDefault()}),children:E.jsx(J_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:E.jsx(q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:D=>D.preventDefault(),...g,...F,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:_t(g.onKeyDown,D=>{const re=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!re&&D.key.length===1&&ue(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let le=N().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(D.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const xe=D.target,X=le.indexOf(xe);le=le.slice(X+1)}setTimeout(()=>Z(le)),D.preventDefault()}})})})})})})});O0e.displayName=Svt;var Avt="SelectItemAlignedPosition",P0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,a=Ep(mm,r),s=Ap(mm,r),[o,l]=C.useState(null),[c,u]=C.useState(null),f=Mr(t,T=>u(T)),d=lP(r),h=C.useRef(!1),m=C.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:g,focusSelectedItem:w}=s,v=C.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&p&&y&&g){const T=a.trigger.getBoundingClientRect(),A=c.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),M=g.getBoundingClientRect();if(a.dir!=="rtl"){const xe=M.left-A.left,X=O.left-xe,Ie=T.left-X,Re=T.width+Ie,ie=Math.max(Re,A.width),Te=window.innerWidth-fc,Me=O5(X,[fc,Math.max(fc,Te-ie)]);o.style.minWidth=Re+"px",o.style.left=Me+"px"}else{const xe=A.right-M.right,X=window.innerWidth-O.right-xe,Ie=window.innerWidth-T.right-X,Re=T.width+Ie,ie=Math.max(Re,A.width),Te=window.innerWidth-fc,Me=O5(X,[fc,Math.max(fc,Te-ie)]);o.style.minWidth=Re+"px",o.style.right=Me+"px"}const P=d(),N=window.innerHeight-fc*2,V=p.scrollHeight,B=window.getComputedStyle(c),G=parseInt(B.borderTopWidth,10),Z=parseInt(B.paddingTop,10),J=parseInt(B.borderBottomWidth,10),Y=parseInt(B.paddingBottom,10),U=G+Z+V+Y+J,se=Math.min(y.offsetHeight*5,U),ue=window.getComputedStyle(p),I=parseInt(ue.paddingTop,10),z=parseInt(ue.paddingBottom,10),H=T.top+T.height/2-fc,q=N-H,F=y.offsetHeight/2,D=y.offsetTop+F,re=G+Z+D,K=U-re;if(re<=H){const xe=P.length>0&&y===P[P.length-1].ref.current;o.style.bottom="0px";const X=c.clientHeight-p.offsetTop-p.offsetHeight,Ie=Math.max(q,F+(xe?z:0)+X+J),Re=re+Ie;o.style.height=Re+"px"}else{const xe=P.length>0&&y===P[0].ref.current;o.style.top="0px";const Ie=Math.max(H,G+p.offsetTop+(xe?I:0)+F)+K;o.style.height=Ie+"px",p.scrollTop=re-H+p.offsetTop}o.style.margin=`${fc}px 0`,o.style.minHeight=se+"px",o.style.maxHeight=N+"px",n==null||n(),requestAnimationFrame(()=>h.current=!0)}},[d,a.trigger,a.valueNode,o,c,p,y,g,a.dir,n]);fa(()=>v(),[v]);const[x,b]=C.useState();fa(()=>{c&&b(window.getComputedStyle(c).zIndex)},[c]);const S=C.useCallback(T=>{T&&m.current===!0&&(v(),w==null||w(),m.current=!1)},[v,w]);return E.jsx(kvt,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:h,onScrollButtonChange:S,children:E.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:E.jsx(lr.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});P0e.displayName=Avt;var Tvt="SelectPopperPosition",jD=C.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=fc,...a}=e,s=cP(r);return E.jsx(j6,{...s,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jD.displayName=Tvt;var[kvt,dB]=A1(mm,{}),$D="SelectViewport",N0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,a=Ap($D,r),s=dB($D,r),o=Mr(t,a.onViewportChange),l=C.useRef(0);return E.jsxs(E.Fragment,{children:[E.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),E.jsx(oP.Slot,{scope:r,children:E.jsx(lr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:_t(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&f){const h=Math.abs(l.current-u.scrollTop);if(h>0){const m=window.innerHeight-fc*2,p=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),g=Math.max(p,y);if(g<m){const w=g+h,v=Math.min(m,w),x=w-v;f.style.height=v+"px",f.style.bottom==="0px"&&(u.scrollTop=x>0?x:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});N0e.displayName=$D;var I0e="SelectGroup",[Cvt,Ovt]=A1(I0e),Pvt=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Nc();return E.jsx(Cvt,{scope:r,id:i,children:E.jsx(lr.div,{role:"group","aria-labelledby":i,...n,ref:t})})});Pvt.displayName=I0e;var R0e="SelectLabel",L0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Ovt(R0e,r);return E.jsx(lr.div,{id:i.id,...n,ref:t})});L0e.displayName=R0e;var P5="SelectItem",[Nvt,M0e]=A1(P5),D0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...s}=e,o=Ep(P5,r),l=Ap(P5,r),c=o.value===n,[u,f]=C.useState(a??""),[d,h]=C.useState(!1),m=Mr(t,w=>{var v;return(v=l.itemRefCallback)==null?void 0:v.call(l,w,n,i)}),p=Nc(),y=C.useRef("touch"),g=()=>{i||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return E.jsx(Nvt,{scope:r,value:n,disabled:i,textId:p,isSelected:c,onItemTextChange:C.useCallback(w=>{f(v=>v||((w==null?void 0:w.textContent)??"").trim())},[]),children:E.jsx(oP.ItemSlot,{scope:r,value:n,disabled:i,textValue:u,children:E.jsx(lr.div,{role:"option","aria-labelledby":p,"data-highlighted":d?"":void 0,"aria-selected":c&&d,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:m,onFocus:_t(s.onFocus,()=>h(!0)),onBlur:_t(s.onBlur,()=>h(!1)),onClick:_t(s.onClick,()=>{y.current!=="mouse"&&g()}),onPointerUp:_t(s.onPointerUp,()=>{y.current==="mouse"&&g()}),onPointerDown:_t(s.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:_t(s.onPointerMove,w=>{var v;y.current=w.pointerType,i?(v=l.onItemLeave)==null||v.call(l):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_t(s.onPointerLeave,w=>{var v;w.currentTarget===document.activeElement&&((v=l.onItemLeave)==null||v.call(l))}),onKeyDown:_t(s.onKeyDown,w=>{var x;((x=l.searchRef)==null?void 0:x.current)!==""&&w.key===" "||(gvt.includes(w.key)&&g(),w.key===" "&&w.preventDefault())})})})})});D0e.displayName=P5;var Kw="SelectItemText",j0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...a}=e,s=Ep(Kw,r),o=Ap(Kw,r),l=M0e(Kw,r),c=xvt(Kw,r),[u,f]=C.useState(null),d=Mr(t,g=>f(g),l.onItemTextChange,g=>{var w;return(w=o.itemTextRefCallback)==null?void 0:w.call(o,g,l.value,l.disabled)}),h=u==null?void 0:u.textContent,m=C.useMemo(()=>E.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=c;return fa(()=>(p(m),()=>y(m)),[p,y,m]),E.jsxs(E.Fragment,{children:[E.jsx(lr.span,{id:l.textId,...a,ref:d}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Gv.createPortal(a.children,s.valueNode):null]})});j0e.displayName=Kw;var $0e="SelectItemIndicator",F0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return M0e($0e,r).isSelected?E.jsx(lr.span,{"aria-hidden":!0,...n,ref:t}):null});F0e.displayName=$0e;var FD="SelectScrollUpButton",B0e=C.forwardRef((e,t)=>{const r=Ap(FD,e.__scopeSelect),n=dB(FD,e.__scopeSelect),[i,a]=C.useState(!1),s=Mr(t,n.onScrollButtonChange);return fa(()=>{if(r.viewport&&r.isPositioned){let o=function(){const c=l.scrollTop>0;a(c)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?E.jsx(z0e,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});B0e.displayName=FD;var BD="SelectScrollDownButton",U0e=C.forwardRef((e,t)=>{const r=Ap(BD,e.__scopeSelect),n=dB(BD,e.__scopeSelect),[i,a]=C.useState(!1),s=Mr(t,n.onScrollButtonChange);return fa(()=>{if(r.viewport&&r.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;a(u)};const l=r.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),i?E.jsx(z0e,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=r;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});U0e.displayName=BD;var z0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,a=Ap("SelectScrollButton",r),s=C.useRef(null),o=lP(r),l=C.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),fa(()=>{var u;const c=o().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),E.jsx(lr.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:_t(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:_t(i.onPointerMove,()=>{var c;(c=a.onItemLeave)==null||c.call(a),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:_t(i.onPointerLeave,()=>{l()})})}),Ivt="SelectSeparator",V0e=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return E.jsx(lr.div,{"aria-hidden":!0,...n,ref:t})});V0e.displayName=Ivt;var UD="SelectArrow",Rvt=C.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=cP(r),a=Ep(UD,r),s=Ap(UD,r);return a.open&&s.position==="popper"?E.jsx($6,{...i,...n,ref:t}):null});Rvt.displayName=UD;var Lvt="SelectBubbleInput",W0e=C.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=C.useRef(null),a=Mr(n,i),s=v0e(t);return C.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&u){const f=new Event("change",{bubbles:!0});u.call(o,t),o.dispatchEvent(f)}},[s,t]),E.jsx(lr.select,{...r,style:{...w0e,...r.style},ref:a,defaultValue:t})});W0e.displayName=Lvt;function H0e(e){return e===""||e===void 0}function G0e(e){const t=jc(e),r=C.useRef(""),n=C.useRef(0),i=C.useCallback(s=>{const o=r.current+s;t(o),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),a=C.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function q0e(e,t,r){const i=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let s=Mvt(e,Math.max(a,0));i.length===1&&(s=s.filter(c=>c!==r));const l=s.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function Mvt(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Dvt=x0e,K0e=_0e,jvt=E0e,$vt=A0e,Fvt=T0e,Y0e=k0e,Bvt=N0e,X0e=L0e,Z0e=D0e,Uvt=j0e,zvt=F0e,J0e=B0e,Q0e=U0e,eme=V0e;const tme=Dvt,rme=jvt,hB=C.forwardRef(({className:e,children:t,...r},n)=>E.jsxs(K0e,{ref:n,className:Ft("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,E.jsx($vt,{asChild:!0,children:E.jsx(LT,{className:"h-4 w-4 opacity-50"})})]}));hB.displayName=K0e.displayName;const nme=C.forwardRef(({className:e,...t},r)=>E.jsx(J0e,{ref:r,className:Ft("flex cursor-default items-center justify-center py-1",e),...t,children:E.jsx(BEe,{className:"h-4 w-4"})}));nme.displayName=J0e.displayName;const ime=C.forwardRef(({className:e,...t},r)=>E.jsx(Q0e,{ref:r,className:Ft("flex cursor-default items-center justify-center py-1",e),...t,children:E.jsx(LT,{className:"h-4 w-4"})}));ime.displayName=Q0e.displayName;const pB=C.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>E.jsx(Fvt,{children:E.jsxs(Y0e,{ref:i,className:Ft("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[E.jsx(nme,{}),E.jsx(Bvt,{className:Ft("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),E.jsx(ime,{})]})}));pB.displayName=Y0e.displayName;const Vvt=C.forwardRef(({className:e,...t},r)=>E.jsx(X0e,{ref:r,className:Ft("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Vvt.displayName=X0e.displayName;const mB=C.forwardRef(({className:e,children:t,...r},n)=>E.jsxs(Z0e,{ref:n,className:Ft("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[E.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:E.jsx(zvt,{children:E.jsx(hb,{className:"h-4 w-4"})})}),E.jsx(Uvt,{children:t})]}));mB.displayName=Z0e.displayName;const Wvt=C.forwardRef(({className:e,...t},r)=>E.jsx(eme,{ref:r,className:Ft("-mx-1 my-1 h-px bg-muted",e),...t}));Wvt.displayName=eme.displayName;const ame=6048e5,Hvt=864e5,eX=Symbol.for("constructDateFrom");function Vi(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&eX in e?e[eX](t):e instanceof Date?new e.constructor(t):new Date(t)}function mn(e,t){return Vi(t||e,e)}function sme(e,t,r){const n=mn(e,r==null?void 0:r.in);return isNaN(t)?Vi(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ome(e,t,r){const n=mn(e,r==null?void 0:r.in);if(isNaN(t))return Vi(e,NaN);if(!t)return n;const i=n.getDate(),a=Vi(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return i>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}let Gvt={};function L2(){return Gvt}function Fv(e,t){var o,l,c,u;const r=L2(),n=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=mn(e,t==null?void 0:t.in),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function O_(e,t){return Fv(e,{...t,weekStartsOn:1})}function lme(e,t){const r=mn(e,t==null?void 0:t.in),n=r.getFullYear(),i=Vi(r,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=O_(i),s=Vi(r,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=O_(s);return r.getTime()>=a.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function tX(e){const t=mn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function T1(e,...t){const r=Vi.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function P_(e,t){const r=mn(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function gB(e,t,r){const[n,i]=T1(r==null?void 0:r.in,e,t),a=P_(n),s=P_(i),o=+a-tX(a),l=+s-tX(s);return Math.round((o-l)/Hvt)}function qvt(e,t){const r=lme(e,t),n=Vi(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),O_(n)}function Kvt(e,t,r){return sme(e,t*7,r)}function Yvt(e,t,r){return ome(e,t*12,r)}function Xvt(e,t){let r,n=t==null?void 0:t.in;return e.forEach(i=>{!n&&typeof i=="object"&&(n=Vi.bind(null,i));const a=mn(i,n);(!r||r<a||isNaN(+a))&&(r=a)}),Vi(n,r||NaN)}function Zvt(e,t){let r,n=t==null?void 0:t.in;return e.forEach(i=>{!n&&typeof i=="object"&&(n=Vi.bind(null,i));const a=mn(i,n);(!r||r>a||isNaN(+a))&&(r=a)}),Vi(n,r||NaN)}function Jvt(e,t,r){const[n,i]=T1(r==null?void 0:r.in,e,t);return+P_(n)==+P_(i)}function cme(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Qvt(e){return!(!cme(e)&&typeof e!="number"||isNaN(+mn(e)))}function ume(e,t,r){const[n,i]=T1(r==null?void 0:r.in,e,t),a=n.getFullYear()-i.getFullYear(),s=n.getMonth()-i.getMonth();return a*12+s}function e1t(e,t){const r=mn(e,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function fme(e,t){const[r,n]=T1(e,t.start,t.end);return{start:r,end:n}}function t1t(e,t){const{start:r,end:n}=fme(t==null?void 0:t.in,e);let i=+r>+n;const a=i?+r:+n,s=i?n:r;s.setHours(0,0,0,0),s.setDate(1);let o=1;const l=[];for(;+s<=a;)l.push(Vi(r,s)),s.setMonth(s.getMonth()+o);return i?l.reverse():l}function r1t(e,t){const r=mn(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function n1t(e,t){const r=mn(e,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function dme(e,t){const r=mn(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function i1t(e,t){const{start:r,end:n}=fme(t==null?void 0:t.in,e);let i=+r>+n;const a=i?+r:+n,s=i?n:r;s.setHours(0,0,0,0),s.setMonth(0,1);let o=1;const l=[];for(;+s<=a;)l.push(Vi(r,s)),s.setFullYear(s.getFullYear()+o);return i?l.reverse():l}function hme(e,t){var o,l,c,u;const r=L2(),n=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=mn(e,t==null?void 0:t.in),a=i.getDay(),s=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function a1t(e,t){return hme(e,{...t,weekStartsOn:1})}const s1t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},o1t=(e,t,r)=>{let n;const i=s1t[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function jI(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const l1t={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},c1t={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},u1t={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f1t={date:jI({formats:l1t,defaultWidth:"full"}),time:jI({formats:c1t,defaultWidth:"full"}),dateTime:jI({formats:u1t,defaultWidth:"full"})},d1t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},h1t=(e,t,r,n)=>d1t[e];function Cw(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):s;i=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[o]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const p1t={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},m1t={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},g1t={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},y1t={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},v1t={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},w1t={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},x1t=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},b1t={ordinalNumber:x1t,era:Cw({values:p1t,defaultWidth:"wide"}),quarter:Cw({values:m1t,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cw({values:g1t,defaultWidth:"wide"}),day:Cw({values:y1t,defaultWidth:"wide"}),dayPeriod:Cw({values:v1t,defaultWidth:"wide",formattingValues:w1t,defaultFormattingWidth:"wide"})};function Ow(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?S1t(o,f=>f.test(s)):_1t(o,f=>f.test(s));let c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=t.slice(s.length);return{value:c,rest:u}}}function _1t(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function S1t(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function E1t(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],a=t.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=r.valueCallback?r.valueCallback(s):s;const o=t.slice(i.length);return{value:s,rest:o}}}const A1t=/^(\d+)(th|st|nd|rd)?/i,T1t=/\d+/i,k1t={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},C1t={any:[/^b/i,/^(a|c)/i]},O1t={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},P1t={any:[/1/i,/2/i,/3/i,/4/i]},N1t={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},I1t={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},R1t={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L1t={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},M1t={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},D1t={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},j1t={ordinalNumber:E1t({matchPattern:A1t,parsePattern:T1t,valueCallback:e=>parseInt(e,10)}),era:Ow({matchPatterns:k1t,defaultMatchWidth:"wide",parsePatterns:C1t,defaultParseWidth:"any"}),quarter:Ow({matchPatterns:O1t,defaultMatchWidth:"wide",parsePatterns:P1t,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ow({matchPatterns:N1t,defaultMatchWidth:"wide",parsePatterns:I1t,defaultParseWidth:"any"}),day:Ow({matchPatterns:R1t,defaultMatchWidth:"wide",parsePatterns:L1t,defaultParseWidth:"any"}),dayPeriod:Ow({matchPatterns:M1t,defaultMatchWidth:"any",parsePatterns:D1t,defaultParseWidth:"any"})},Ng={code:"en-US",formatDistance:o1t,formatLong:f1t,formatRelative:h1t,localize:b1t,match:j1t,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $1t(e,t){const r=mn(e,t==null?void 0:t.in);return gB(r,dme(r))+1}function yB(e,t){const r=mn(e,t==null?void 0:t.in),n=+O_(r)-+qvt(r);return Math.round(n/ame)+1}function pme(e,t){var u,f,d,h;const r=mn(e,t==null?void 0:t.in),n=r.getFullYear(),i=L2(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(d=i.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=Vi((t==null?void 0:t.in)||e,0);s.setFullYear(n+1,0,a),s.setHours(0,0,0,0);const o=Fv(s,t),l=Vi((t==null?void 0:t.in)||e,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=Fv(l,t);return+r>=+o?n+1:+r>=+c?n:n-1}function F1t(e,t){var o,l,c,u;const r=L2(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=pme(e,t),a=Vi((t==null?void 0:t.in)||e,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Fv(a,t)}function vB(e,t){const r=mn(e,t==null?void 0:t.in),n=+Fv(r,t)-+F1t(r,t);return Math.round(n/ame)+1}function nn(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Kd={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return nn(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):nn(r+1,2)},d(e,t){return nn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return nn(e.getHours()%12||12,t.length)},H(e,t){return nn(e.getHours(),t.length)},m(e,t){return nn(e.getMinutes(),t.length)},s(e,t){return nn(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return nn(i,t.length)}},yg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rX={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Kd.y(e,t)},Y:function(e,t,r,n){const i=pme(e,n),a=i>0?i:1-i;if(t==="YY"){const s=a%100;return nn(s,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):nn(a,t.length)},R:function(e,t){const r=lme(e);return nn(r,t.length)},u:function(e,t){const r=e.getFullYear();return nn(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return nn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return nn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Kd.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return nn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=vB(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):nn(i,t.length)},I:function(e,t,r){const n=yB(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):nn(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Kd.d(e,t)},D:function(e,t,r){const n=$1t(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):nn(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return nn(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return nn(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return nn(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=yg.noon:n===0?i=yg.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=yg.evening:n>=12?i=yg.afternoon:n>=4?i=yg.morning:i=yg.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Kd.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Kd.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):nn(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):nn(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Kd.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Kd.s(e,t)},S:function(e,t){return Kd.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return iX(n);case"XXXX":case"XX":return a0(n);case"XXXXX":case"XXX":default:return a0(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return iX(n);case"xxxx":case"xx":return a0(n);case"xxxxx":case"xxx":default:return a0(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+nX(n,":");case"OOOO":default:return"GMT"+a0(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+nX(n,":");case"zzzz":default:return"GMT"+a0(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return nn(n,t.length)},T:function(e,t,r){return nn(+e,t.length)}};function nX(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+t+nn(a,2)}function iX(e,t){return e%60===0?(e>0?"-":"+")+nn(Math.abs(e)/60,2):a0(e,t)}function a0(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=nn(Math.trunc(n/60),2),a=nn(n%60,2);return r+i+t+a}const aX=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},mme=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},B1t=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return aX(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",aX(n,t)).replace("{{time}}",mme(i,t))},U1t={p:mme,P:B1t},z1t=/^D+$/,V1t=/^Y+$/,W1t=["D","DD","YY","YYYY"];function H1t(e){return z1t.test(e)}function G1t(e){return V1t.test(e)}function q1t(e,t,r){const n=K1t(e,t,r);if(console.warn(n),W1t.includes(e))throw new RangeError(n)}function K1t(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Y1t=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,X1t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Z1t=/^'([^]*?)'?$/,J1t=/''/g,Q1t=/[a-zA-Z]/;function T0(e,t,r){var u,f,d,h,m,p,y,g;const n=L2(),i=(r==null?void 0:r.locale)??n.locale??Ng,a=(r==null?void 0:r.firstWeekContainsDate)??((f=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=(r==null?void 0:r.weekStartsOn)??((p=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((g=(y=n.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??0,o=mn(e,r==null?void 0:r.in);if(!Qvt(o))throw new RangeError("Invalid time value");let l=t.match(X1t).map(w=>{const v=w[0];if(v==="p"||v==="P"){const x=U1t[v];return x(w,i.formatLong)}return w}).join("").match(Y1t).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const v=w[0];if(v==="'")return{isToken:!1,value:ewt(w)};if(rX[v])return{isToken:!0,value:w};if(v.match(Q1t))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const v=w.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&G1t(v)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&H1t(v))&&q1t(v,t,String(e));const x=rX[v[0]];return x(o,v,i.localize,c)}).join("")}function ewt(e){const t=e.match(Z1t);return t?t[1].replace(J1t,"'"):e}function twt(e,t){const r=mn(e,t==null?void 0:t.in),n=r.getFullYear(),i=r.getMonth(),a=Vi(r,0);return a.setFullYear(n,i+1,0),a.setHours(0,0,0,0),a.getDate()}function rwt(e,t){return mn(e,t==null?void 0:t.in).getMonth()}function nwt(e,t){return mn(e,t==null?void 0:t.in).getFullYear()}function iwt(e,t){return+mn(e)>+mn(t)}function awt(e,t){return+mn(e)<+mn(t)}function swt(e,t,r){const[n,i]=T1(r==null?void 0:r.in,e,t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function owt(e,t,r){const[n,i]=T1(r==null?void 0:r.in,e,t);return n.getFullYear()===i.getFullYear()}function lwt(e,t,r){const n=mn(e,r==null?void 0:r.in),i=n.getFullYear(),a=n.getDate(),s=Vi(e,0);s.setFullYear(i,t,15),s.setHours(0,0,0,0);const o=twt(s);return n.setMonth(t,Math.min(a,o)),n}function cwt(e,t,r){const n=mn(e,r==null?void 0:r.in);return isNaN(+n)?Vi(e,NaN):(n.setFullYear(t),n)}function uwt(e,t,r="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:r}).format(t).split(/\s/g).slice(2).join(" ")}const $I={},Yw={};function k0(e,t){try{const n=($I[e]||($I[e]=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return n in Yw?Yw[n]:sX(n,n.split(":"))}catch{if(e in Yw)return Yw[e];const r=e==null?void 0:e.match(fwt);return r?sX(e,r.slice(1)):NaN}}const fwt=/([+-]\d\d):?(\d\d)?/;function sX(e,t){const r=+(t[0]||0),n=+(t[1]||0),i=+(t[2]||0)/60;return Yw[e]=r*60+n>0?r*60+n+i:r*60-n-i}class Tu extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(k0(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),gme(this),zD(this)):this.setTime(Date.now())}static tz(t,...r){return r.length?new Tu(...r,t):new Tu(Date.now(),t)}withTimeZone(t){return new Tu(+this,t)}getTimezoneOffset(){const t=-k0(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),zD(this),+this}[Symbol.for("constructDateFrom")](t){return new Tu(+new Date(t),this.timeZone)}}const oX=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!oX.test(e))return;const t=e.replace(oX,"$1UTC");Tu.prototype[t]&&(e.startsWith("get")?Tu.prototype[e]=function(){return this.internal[t]()}:(Tu.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),dwt(this),+this},Tu.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),zD(this),+this}))});function zD(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-k0(e.timeZone,e)*60))}function dwt(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),gme(e)}function gme(e){const t=k0(e.timeZone,e),r=t>0?Math.floor(t):Math.ceil(t),n=new Date(+e);n.setUTCHours(n.getUTCHours()-1);const i=-new Date(+e).getTimezoneOffset(),a=-new Date(+n).getTimezoneOffset(),s=i-a,o=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();s&&o&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+s);const l=i-r;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const c=new Date(+e);c.setUTCSeconds(0);const u=i>0?c.getSeconds():(c.getSeconds()-60)%60,f=Math.round(-(k0(e.timeZone,e)*60))%60;(f||u)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+f+u));const d=k0(e.timeZone,e),h=d>0?Math.floor(d):Math.ceil(d),p=-new Date(+e).getTimezoneOffset()-h,y=h!==r,g=p-l;if(y&&g){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+g);const w=k0(e.timeZone,e),v=w>0?Math.floor(w):Math.ceil(w),x=h-v;x&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+x),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+x))}}class rs extends Tu{static tz(t,...r){return r.length?new rs(...r,t):new rs(Date.now(),t)}toISOString(){const[t,r,n]=this.tzComponents(),i=`${t}${r}:${n}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,r,n,i]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${n} ${r} ${i}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[r,n,i]=this.tzComponents();return`${t} GMT${r}${n}${i} (${uwt(this.timeZone,this)})`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,{...r,timeZone:(r==null?void 0:r.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),r=t>0?"-":"+",n=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),i=String(Math.abs(t)%60).padStart(2,"0");return[r,n,i]}withTimeZone(t){return new rs(+this,t)}[Symbol.for("constructDateFrom")](t){return new rs(+new Date(t),this.timeZone)}}const lX=5,hwt=4;function pwt(e,t){const r=t.startOfMonth(e),n=r.getDay()>0?r.getDay():7,i=t.addDays(e,-n+1),a=t.addDays(i,lX*7-1);return t.getMonth(e)===t.getMonth(a)?lX:hwt}function yme(e,t){const r=t.startOfMonth(e),n=r.getDay();return n===1?r:n===0?t.addDays(r,-1*6):t.addDays(r,-1*(n-1))}function mwt(e,t){const r=yme(e,t),n=pwt(e,t);return t.addDays(r,n*7-1)}const vme={...Ng,labels:{labelDayButton:(e,t,r,n)=>{let i;n&&typeof n.format=="function"?i=n.format.bind(n):i=(s,o)=>T0(s,o,{locale:Ng,...r});let a=i(e,"PPPP");return t.today&&(a=`Today, ${a}`),t.selected&&(a=`${a}, selected`),a},labelMonthDropdown:"Choose the Month",labelNext:"Go to the Next Month",labelPrevious:"Go to the Previous Month",labelWeekNumber:e=>`Week ${e}`,labelYearDropdown:"Choose the Year",labelGrid:(e,t,r)=>{let n;return r&&typeof r.format=="function"?n=r.format.bind(r):n=(i,a)=>T0(i,a,{locale:Ng,...t}),n(e,"LLLL yyyy")},labelGridcell:(e,t,r,n)=>{let i;n&&typeof n.format=="function"?i=n.format.bind(n):i=(s,o)=>T0(s,o,{locale:Ng,...r});let a=i(e,"PPPP");return t!=null&&t.today&&(a=`Today, ${a}`),a},labelNav:"Navigation bar",labelWeekNumberHeader:"Week Number",labelWeekday:(e,t,r)=>{let n;return r&&typeof r.format=="function"?n=r.format.bind(r):n=(i,a)=>T0(i,a,{locale:Ng,...t}),n(e,"cccc")}}};class Zo{constructor(t,r){this.Date=Date,this.today=()=>{var n;return(n=this.overrides)!=null&&n.today?this.overrides.today():this.options.timeZone?rs.tz(this.options.timeZone):new this.Date},this.newDate=(n,i,a)=>{var s;return(s=this.overrides)!=null&&s.newDate?this.overrides.newDate(n,i,a):this.options.timeZone?new rs(n,i,a,this.options.timeZone):new Date(n,i,a)},this.addDays=(n,i)=>{var a;return(a=this.overrides)!=null&&a.addDays?this.overrides.addDays(n,i):sme(n,i)},this.addMonths=(n,i)=>{var a;return(a=this.overrides)!=null&&a.addMonths?this.overrides.addMonths(n,i):ome(n,i)},this.addWeeks=(n,i)=>{var a;return(a=this.overrides)!=null&&a.addWeeks?this.overrides.addWeeks(n,i):Kvt(n,i)},this.addYears=(n,i)=>{var a;return(a=this.overrides)!=null&&a.addYears?this.overrides.addYears(n,i):Yvt(n,i)},this.differenceInCalendarDays=(n,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,i):gB(n,i)},this.differenceInCalendarMonths=(n,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,i):ume(n,i)},this.eachMonthOfInterval=n=>{var i;return(i=this.overrides)!=null&&i.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):t1t(n)},this.eachYearOfInterval=n=>{var o;const i=(o=this.overrides)!=null&&o.eachYearOfInterval?this.overrides.eachYearOfInterval(n):i1t(n),a=new Set(i.map(l=>this.getYear(l)));if(a.size===i.length)return i;const s=[];return a.forEach(l=>{s.push(new Date(l,0,1))}),s},this.endOfBroadcastWeek=n=>{var i;return(i=this.overrides)!=null&&i.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):mwt(n,this)},this.endOfISOWeek=n=>{var i;return(i=this.overrides)!=null&&i.endOfISOWeek?this.overrides.endOfISOWeek(n):a1t(n)},this.endOfMonth=n=>{var i;return(i=this.overrides)!=null&&i.endOfMonth?this.overrides.endOfMonth(n):e1t(n)},this.endOfWeek=(n,i)=>{var a;return(a=this.overrides)!=null&&a.endOfWeek?this.overrides.endOfWeek(n,i):hme(n,this.options)},this.endOfYear=n=>{var i;return(i=this.overrides)!=null&&i.endOfYear?this.overrides.endOfYear(n):n1t(n)},this.format=(n,i,a)=>{var o;const s=(o=this.overrides)!=null&&o.format?this.overrides.format(n,i,this.options):T0(n,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(s):s},this.getISOWeek=n=>{var i;return(i=this.overrides)!=null&&i.getISOWeek?this.overrides.getISOWeek(n):yB(n)},this.getMonth=(n,i)=>{var a;return(a=this.overrides)!=null&&a.getMonth?this.overrides.getMonth(n,this.options):rwt(n,this.options)},this.getYear=(n,i)=>{var a;return(a=this.overrides)!=null&&a.getYear?this.overrides.getYear(n,this.options):nwt(n,this.options)},this.getWeek=(n,i)=>{var a;return(a=this.overrides)!=null&&a.getWeek?this.overrides.getWeek(n,this.options):vB(n,this.options)},this.isAfter=(n,i)=>{var a;return(a=this.overrides)!=null&&a.isAfter?this.overrides.isAfter(n,i):iwt(n,i)},this.isBefore=(n,i)=>{var a;return(a=this.overrides)!=null&&a.isBefore?this.overrides.isBefore(n,i):awt(n,i)},this.isDate=n=>{var i;return(i=this.overrides)!=null&&i.isDate?this.overrides.isDate(n):cme(n)},this.isSameDay=(n,i)=>{var a;return(a=this.overrides)!=null&&a.isSameDay?this.overrides.isSameDay(n,i):Jvt(n,i)},this.isSameMonth=(n,i)=>{var a;return(a=this.overrides)!=null&&a.isSameMonth?this.overrides.isSameMonth(n,i):swt(n,i)},this.isSameYear=(n,i)=>{var a;return(a=this.overrides)!=null&&a.isSameYear?this.overrides.isSameYear(n,i):owt(n,i)},this.max=n=>{var i;return(i=this.overrides)!=null&&i.max?this.overrides.max(n):Xvt(n)},this.min=n=>{var i;return(i=this.overrides)!=null&&i.min?this.overrides.min(n):Zvt(n)},this.setMonth=(n,i)=>{var a;return(a=this.overrides)!=null&&a.setMonth?this.overrides.setMonth(n,i):lwt(n,i)},this.setYear=(n,i)=>{var a;return(a=this.overrides)!=null&&a.setYear?this.overrides.setYear(n,i):cwt(n,i)},this.startOfBroadcastWeek=(n,i)=>{var a;return(a=this.overrides)!=null&&a.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):yme(n,this)},this.startOfDay=n=>{var i;return(i=this.overrides)!=null&&i.startOfDay?this.overrides.startOfDay(n):P_(n)},this.startOfISOWeek=n=>{var i;return(i=this.overrides)!=null&&i.startOfISOWeek?this.overrides.startOfISOWeek(n):O_(n)},this.startOfMonth=n=>{var i;return(i=this.overrides)!=null&&i.startOfMonth?this.overrides.startOfMonth(n):r1t(n)},this.startOfWeek=(n,i)=>{var a;return(a=this.overrides)!=null&&a.startOfWeek?this.overrides.startOfWeek(n,this.options):Fv(n,this.options)},this.startOfYear=n=>{var i;return(i=this.overrides)!=null&&i.startOfYear?this.overrides.startOfYear(n):dme(n)},this.options={locale:vme,...t},this.overrides=r}getDigitMap(){const{numerals:t="latn"}=this.options,r=new Intl.NumberFormat("en-US",{numberingSystem:t}),n={};for(let i=0;i<10;i++)n[i.toString()]=r.format(i);return n}replaceDigits(t){const r=this.getDigitMap();return t.replace(/\d/g,n=>r[n]||n)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){var r;const t=(r=this.options.locale)==null?void 0:r.code;return t&&Zo.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:r,timeZone:n,numerals:i}=this.options,a=r==null?void 0:r.code;if(a&&Zo.yearFirstLocales.has(a))try{return new Intl.DateTimeFormat(a,{month:"long",year:"numeric",timeZone:n,numberingSystem:i}).format(t)}catch{}const s=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,s)}}Zo.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Yu=new Zo;class wme{constructor(t,r,n=Yu){this.date=t,this.displayMonth=r,this.outside=!!(r&&!n.isSameMonth(t,r)),this.dateLib=n,this.isoDate=n.format(t,"yyyy-MM-dd"),this.displayMonthId=n.format(r,"yyyy-MM"),this.dateMonthId=n.format(t,"yyyy-MM")}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class gwt{constructor(t,r){this.date=t,this.weeks=r}}class ywt{constructor(t,r){this.days=r,this.weekNumber=t}}function vwt(e){return he.createElement("button",{...e})}function wwt(e){return he.createElement("span",{...e})}function xwt(e){const{size:t=24,orientation:r="left",className:n}=e;return he.createElement("svg",{className:n,width:t,height:t,viewBox:"0 0 24 24"},r==="up"&&he.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),r==="down"&&he.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),r==="left"&&he.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),r==="right"&&he.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function bwt(e){const{day:t,modifiers:r,...n}=e;return he.createElement("td",{...n})}function _wt(e){const{day:t,modifiers:r,...n}=e,i=he.useRef(null);return he.useEffect(()=>{var a;r.focused&&((a=i.current)==null||a.focus())},[r.focused]),he.createElement("button",{ref:i,...n})}var Ht;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(Ht||(Ht={}));var Xn;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(Xn||(Xn={}));var Tc;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(Tc||(Tc={}));var Ro;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ro||(Ro={}));function Swt(e){const{options:t,className:r,components:n,classNames:i,...a}=e,s=[i[Ht.Dropdown],r].join(" "),o=t==null?void 0:t.find(({value:l})=>l===a.value);return he.createElement("span",{"data-disabled":a.disabled,className:i[Ht.DropdownRoot]},he.createElement(n.Select,{className:s,...a},t==null?void 0:t.map(({value:l,label:c,disabled:u})=>he.createElement(n.Option,{key:l,value:l,disabled:u},c))),he.createElement("span",{className:i[Ht.CaptionLabel],"aria-hidden":!0},o==null?void 0:o.label,he.createElement(n.Chevron,{orientation:"down",size:18,className:i[Ht.Chevron]})))}function Ewt(e){return he.createElement("div",{...e})}function Awt(e){return he.createElement("div",{...e})}function Twt(e){const{calendarMonth:t,displayIndex:r,...n}=e;return he.createElement("div",{...n},e.children)}function kwt(e){const{calendarMonth:t,displayIndex:r,...n}=e;return he.createElement("div",{...n})}function Cwt(e){return he.createElement("table",{...e})}function Owt(e){return he.createElement("div",{...e})}const xme=C.createContext(void 0);function M2(){const e=C.useContext(xme);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function Pwt(e){const{components:t}=M2();return he.createElement(t.Dropdown,{...e})}function Nwt(e){const{onPreviousClick:t,onNextClick:r,previousMonth:n,nextMonth:i,...a}=e,{components:s,classNames:o,labels:{labelPrevious:l,labelNext:c}}=M2(),u=C.useCallback(d=>{i&&(r==null||r(d))},[i,r]),f=C.useCallback(d=>{n&&(t==null||t(d))},[n,t]);return he.createElement("nav",{...a},he.createElement(s.PreviousMonthButton,{type:"button",className:o[Ht.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":l(n),onClick:f},he.createElement(s.Chevron,{disabled:n?void 0:!0,className:o[Ht.Chevron],orientation:"left"})),he.createElement(s.NextMonthButton,{type:"button",className:o[Ht.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":c(i),onClick:u},he.createElement(s.Chevron,{disabled:i?void 0:!0,orientation:"right",className:o[Ht.Chevron]})))}function Iwt(e){const{components:t}=M2();return he.createElement(t.Button,{...e})}function Rwt(e){return he.createElement("option",{...e})}function Lwt(e){const{components:t}=M2();return he.createElement(t.Button,{...e})}function Mwt(e){const{rootRef:t,...r}=e;return he.createElement("div",{...r,ref:t})}function Dwt(e){return he.createElement("select",{...e})}function jwt(e){const{week:t,...r}=e;return he.createElement("tr",{...r})}function $wt(e){return he.createElement("th",{...e})}function Fwt(e){return he.createElement("thead",{"aria-hidden":!0},he.createElement("tr",{...e}))}function Bwt(e){const{week:t,...r}=e;return he.createElement("th",{...r})}function Uwt(e){return he.createElement("th",{...e})}function zwt(e){return he.createElement("tbody",{...e})}function Vwt(e){const{components:t}=M2();return he.createElement(t.Dropdown,{...e})}const Wwt=Object.freeze(Object.defineProperty({__proto__:null,Button:vwt,CaptionLabel:wwt,Chevron:xwt,Day:bwt,DayButton:_wt,Dropdown:Swt,DropdownNav:Ewt,Footer:Awt,Month:Twt,MonthCaption:kwt,MonthGrid:Cwt,Months:Owt,MonthsDropdown:Pwt,Nav:Nwt,NextMonthButton:Iwt,Option:Rwt,PreviousMonthButton:Lwt,Root:Mwt,Select:Dwt,Week:jwt,WeekNumber:Bwt,WeekNumberHeader:Uwt,Weekday:$wt,Weekdays:Fwt,Weeks:zwt,YearsDropdown:Vwt},Symbol.toStringTag,{value:"Module"}));function Df(e,t,r=!1,n=Yu){let{from:i,to:a}=e;const{differenceInCalendarDays:s,isSameDay:o}=n;return i&&a?(s(a,i)<0&&([i,a]=[a,i]),s(t,i)>=(r?1:0)&&s(a,t)>=(r?1:0)):!r&&a?o(a,t):!r&&i?o(i,t):!1}function wB(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function uP(e){return!!(e&&typeof e=="object"&&"from"in e)}function xB(e){return!!(e&&typeof e=="object"&&"after"in e)}function bB(e){return!!(e&&typeof e=="object"&&"before"in e)}function bme(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function _me(e,t){return Array.isArray(e)&&e.every(t.isDate)}function jf(e,t,r=Yu){const n=Array.isArray(t)?t:[t],{isSameDay:i,differenceInCalendarDays:a,isAfter:s}=r;return n.some(o=>{if(typeof o=="boolean")return o;if(r.isDate(o))return i(e,o);if(_me(o,r))return o.some(l=>i(e,l));if(uP(o))return Df(o,e,!1,r);if(bme(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(e.getDay()):o.dayOfWeek===e.getDay();if(wB(o)){const l=a(o.before,e),c=a(o.after,e),u=l>0,f=c<0;return s(o.before,o.after)?f&&u:u||f}return xB(o)?a(e,o.after)>0:bB(o)?a(o.before,e)>0:typeof o=="function"?o(e):!1})}function Hwt(e,t,r,n,i){const{disabled:a,hidden:s,modifiers:o,showOutsideDays:l,broadcastCalendar:c,today:u=i.today()}=t,{isSameDay:f,isSameMonth:d,startOfMonth:h,isBefore:m,endOfMonth:p,isAfter:y}=i,g=r&&h(r),w=n&&p(n),v={[Xn.focused]:[],[Xn.outside]:[],[Xn.disabled]:[],[Xn.hidden]:[],[Xn.today]:[]},x={};for(const b of e){const{date:S,displayMonth:T}=b,A=!!(T&&!d(S,T)),O=!!(g&&m(S,g)),M=!!(w&&y(S,w)),P=!!(a&&jf(S,a,i)),N=!!(s&&jf(S,s,i))||O||M||!c&&!l&&A||c&&l===!1&&A,V=f(S,u);A&&v.outside.push(b),P&&v.disabled.push(b),N&&v.hidden.push(b),V&&v.today.push(b),o&&Object.keys(o).forEach(B=>{const G=o==null?void 0:o[B];G&&jf(S,G,i)&&(x[B]?x[B].push(b):x[B]=[b])})}return b=>{const S={[Xn.focused]:!1,[Xn.disabled]:!1,[Xn.hidden]:!1,[Xn.outside]:!1,[Xn.today]:!1},T={};for(const A in v){const O=v[A];S[A]=O.some(M=>M===b)}for(const A in x)T[A]=x[A].some(O=>O===b);return{...S,...T}}}function Gwt(e,t,r={}){return Object.entries(e).filter(([,i])=>i===!0).reduce((i,[a])=>(r[a]?i.push(r[a]):t[Xn[a]]?i.push(t[Xn[a]]):t[Tc[a]]&&i.push(t[Tc[a]]),i),[t[Ht.Day]])}function qwt(e){return{...Wwt,...e}}function Kwt(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([r,n])=>{r.startsWith("data-")&&(t[r]=n)}),t}function Ywt(){const e={};for(const t in Ht)e[Ht[t]]=`rdp-${Ht[t]}`;for(const t in Xn)e[Xn[t]]=`rdp-${Xn[t]}`;for(const t in Tc)e[Tc[t]]=`rdp-${Tc[t]}`;for(const t in Ro)e[Ro[t]]=`rdp-${Ro[t]}`;return e}function Sme(e,t,r){return(r??new Zo(t)).formatMonthYear(e)}const Xwt=Sme;function Zwt(e,t,r){return(r??new Zo(t)).format(e,"d")}function Jwt(e,t=Yu){return t.format(e,"LLLL")}function Qwt(e,t,r){return(r??new Zo(t)).format(e,"cccccc")}function ext(e,t=Yu){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function txt(){return""}function Eme(e,t=Yu){return t.format(e,"yyyy")}const rxt=Eme,nxt=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Sme,formatDay:Zwt,formatMonthCaption:Xwt,formatMonthDropdown:Jwt,formatWeekNumber:ext,formatWeekNumberHeader:txt,formatWeekdayName:Qwt,formatYearCaption:rxt,formatYearDropdown:Eme},Symbol.toStringTag,{value:"Module"}));function ixt(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...nxt,...e}}function _B(e,t,r,n){let i=(n??new Zo(r)).format(e,"PPPP");return t.today&&(i=`Today, ${i}`),t.selected&&(i=`${i}, selected`),i}const axt=_B;function SB(e,t,r){return(r??new Zo(t)).formatMonthYear(e)}const sxt=SB;function Ame(e,t,r,n){let i=(n??new Zo(r)).format(e,"PPPP");return t!=null&&t.today&&(i=`Today, ${i}`),i}function Tme(e){return"Choose the Month"}function kme(){return""}const oxt="Go to the Next Month";function Cme(e,t){return oxt}function Ome(e){return"Go to the Previous Month"}function Pme(e,t,r){return(r??new Zo(t)).format(e,"cccc")}function Nme(e,t){return`Week ${e}`}function Ime(e){return"Week Number"}function Rme(e){return"Choose the Year"}const lxt=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:sxt,labelDay:axt,labelDayButton:_B,labelGrid:SB,labelGridcell:Ame,labelMonthDropdown:Tme,labelNav:kme,labelNext:Cme,labelPrevious:Ome,labelWeekNumber:Nme,labelWeekNumberHeader:Ime,labelWeekday:Pme,labelYearDropdown:Rme},Symbol.toStringTag,{value:"Module"})),ic=(e,t,r)=>t||(r?typeof r=="function"?r:(...n)=>r:e);function cxt(e,t){var n;const r=((n=t.locale)==null?void 0:n.labels)??{};return{...lxt,...e??{},labelDayButton:ic(_B,e==null?void 0:e.labelDayButton,r.labelDayButton),labelMonthDropdown:ic(Tme,e==null?void 0:e.labelMonthDropdown,r.labelMonthDropdown),labelNext:ic(Cme,e==null?void 0:e.labelNext,r.labelNext),labelPrevious:ic(Ome,e==null?void 0:e.labelPrevious,r.labelPrevious),labelWeekNumber:ic(Nme,e==null?void 0:e.labelWeekNumber,r.labelWeekNumber),labelYearDropdown:ic(Rme,e==null?void 0:e.labelYearDropdown,r.labelYearDropdown),labelGrid:ic(SB,e==null?void 0:e.labelGrid,r.labelGrid),labelGridcell:ic(Ame,e==null?void 0:e.labelGridcell,r.labelGridcell),labelNav:ic(kme,e==null?void 0:e.labelNav,r.labelNav),labelWeekNumberHeader:ic(Ime,e==null?void 0:e.labelWeekNumberHeader,r.labelWeekNumberHeader),labelWeekday:ic(Pme,e==null?void 0:e.labelWeekday,r.labelWeekday)}}function uxt(e,t,r,n,i){const{startOfMonth:a,startOfYear:s,endOfYear:o,eachMonthOfInterval:l,getMonth:c}=i;return l({start:s(e),end:o(e)}).map(d=>{const h=n.formatMonthDropdown(d,i),m=c(d),p=t&&d<a(t)||r&&d>a(r)||!1;return{value:m,label:h,disabled:p}})}function fxt(e,t={},r={}){let n={...t==null?void 0:t[Ht.Day]};return Object.entries(e).filter(([,i])=>i===!0).forEach(([i])=>{n={...n,...r==null?void 0:r[i]}}),n}function dxt(e,t,r,n){const i=n??e.today(),a=r?e.startOfBroadcastWeek(i,e):t?e.startOfISOWeek(i):e.startOfWeek(i),s=[];for(let o=0;o<7;o++){const l=e.addDays(a,o);s.push(l)}return s}function hxt(e,t,r,n,i=!1){if(!e||!t)return;const{startOfYear:a,endOfYear:s,eachYearOfInterval:o,getYear:l}=n,c=a(e),u=s(t),f=o({start:c,end:u});return i&&f.reverse(),f.map(d=>{const h=r.formatYearDropdown(d,n);return{value:l(d),label:h,disabled:!1}})}function pxt(e,t={}){var o;const{weekStartsOn:r,locale:n}=t,i=r??((o=n==null?void 0:n.options)==null?void 0:o.weekStartsOn)??0,a=l=>{const c=typeof l=="number"||typeof l=="string"?new Date(l):l;return new rs(c.getFullYear(),c.getMonth(),c.getDate(),12,0,0,e)},s=l=>{const c=a(l);return new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0)};return{today:()=>a(rs.tz(e)),newDate:(l,c,u)=>new rs(l,c,u,12,0,0,e),startOfDay:l=>a(l),startOfWeek:(l,c)=>{const u=a(l),f=(c==null?void 0:c.weekStartsOn)??i,d=(u.getDay()-f+7)%7;return u.setDate(u.getDate()-d),u},startOfISOWeek:l=>{const c=a(l),u=(c.getDay()-1+7)%7;return c.setDate(c.getDate()-u),c},startOfMonth:l=>{const c=a(l);return c.setDate(1),c},startOfYear:l=>{const c=a(l);return c.setMonth(0,1),c},endOfWeek:(l,c)=>{const u=a(l),h=((((c==null?void 0:c.weekStartsOn)??i)+6)%7-u.getDay()+7)%7;return u.setDate(u.getDate()+h),u},endOfISOWeek:l=>{const c=a(l),u=(7-c.getDay())%7;return c.setDate(c.getDate()+u),c},endOfMonth:l=>{const c=a(l);return c.setMonth(c.getMonth()+1,0),c},endOfYear:l=>{const c=a(l);return c.setMonth(11,31),c},eachMonthOfInterval:l=>{const c=a(l.start),u=a(l.end),f=[],d=new rs(c.getFullYear(),c.getMonth(),1,12,0,0,e),h=u.getFullYear()*12+u.getMonth();for(;d.getFullYear()*12+d.getMonth()<=h;)f.push(new rs(d,e)),d.setMonth(d.getMonth()+1,1);return f},addDays:(l,c)=>{const u=a(l);return u.setDate(u.getDate()+c),u},addWeeks:(l,c)=>{const u=a(l);return u.setDate(u.getDate()+c*7),u},addMonths:(l,c)=>{const u=a(l);return u.setMonth(u.getMonth()+c),u},addYears:(l,c)=>{const u=a(l);return u.setFullYear(u.getFullYear()+c),u},eachYearOfInterval:l=>{const c=a(l.start),u=a(l.end),f=[],d=new rs(c.getFullYear(),0,1,12,0,0,e);for(;d.getFullYear()<=u.getFullYear();)f.push(new rs(d,e)),d.setFullYear(d.getFullYear()+1,0,1);return f},getWeek:(l,c)=>{var f;const u=s(l);return vB(u,{weekStartsOn:(c==null?void 0:c.weekStartsOn)??i,firstWeekContainsDate:(c==null?void 0:c.firstWeekContainsDate)??((f=n==null?void 0:n.options)==null?void 0:f.firstWeekContainsDate)??1})},getISOWeek:l=>{const c=s(l);return yB(c)},differenceInCalendarDays:(l,c)=>{const u=s(l),f=s(c);return gB(u,f)},differenceInCalendarMonths:(l,c)=>{const u=s(l),f=s(c);return ume(u,f)}}}const D2=e=>e instanceof HTMLElement?e:null,FI=e=>[...e.querySelectorAll("[data-animated-month]")??[]],mxt=e=>D2(e.querySelector("[data-animated-month]")),BI=e=>D2(e.querySelector("[data-animated-caption]")),UI=e=>D2(e.querySelector("[data-animated-weeks]")),gxt=e=>D2(e.querySelector("[data-animated-nav]")),yxt=e=>D2(e.querySelector("[data-animated-weekdays]"));function vxt(e,t,{classNames:r,months:n,focused:i,dateLib:a}){const s=C.useRef(null),o=C.useRef(n),l=C.useRef(!1);C.useLayoutEffect(()=>{const c=o.current;if(o.current=n,!t||!e.current||!(e.current instanceof HTMLElement)||n.length===0||c.length===0||n.length!==c.length)return;const u=a.isSameMonth(n[0].date,c[0].date),f=a.isAfter(n[0].date,c[0].date),d=f?r[Ro.caption_after_enter]:r[Ro.caption_before_enter],h=f?r[Ro.weeks_after_enter]:r[Ro.weeks_before_enter],m=s.current,p=e.current.cloneNode(!0);if(p instanceof HTMLElement?(FI(p).forEach(v=>{if(!(v instanceof HTMLElement))return;const x=mxt(v);x&&v.contains(x)&&v.removeChild(x);const b=BI(v);b&&b.classList.remove(d);const S=UI(v);S&&S.classList.remove(h)}),s.current=p):s.current=null,l.current||u||i)return;const y=m instanceof HTMLElement?FI(m):[],g=FI(e.current);if(g!=null&&g.every(w=>w instanceof HTMLElement)&&y&&y.every(w=>w instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const w=gxt(e.current);w&&(w.style.zIndex="1"),g.forEach((v,x)=>{const b=y[x];if(!b)return;v.style.position="relative",v.style.overflow="hidden";const S=BI(v);S&&S.classList.add(d);const T=UI(v);T&&T.classList.add(h);const A=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),w&&(w.style.zIndex=""),S&&S.classList.remove(d),T&&T.classList.remove(h),v.style.position="",v.style.overflow="",v.contains(b)&&v.removeChild(b)};b.style.pointerEvents="none",b.style.position="absolute",b.style.overflow="hidden",b.setAttribute("aria-hidden","true");const O=yxt(b);O&&(O.style.opacity="0");const M=BI(b);M&&(M.classList.add(f?r[Ro.caption_before_exit]:r[Ro.caption_after_exit]),M.addEventListener("animationend",A));const P=UI(b);P&&P.classList.add(f?r[Ro.weeks_before_exit]:r[Ro.weeks_after_exit]),v.insertBefore(b,v.firstChild)})}})}function wxt(e,t,r,n){const i=e[0],a=e[e.length-1],{ISOWeek:s,fixedWeeks:o,broadcastCalendar:l}=r??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:f,endOfBroadcastWeek:d,endOfISOWeek:h,endOfMonth:m,endOfWeek:p,isAfter:y,startOfBroadcastWeek:g,startOfISOWeek:w,startOfWeek:v}=n,x=l?g(i,n):s?w(i):v(i),b=l?d(a):s?h(m(a)):p(m(a)),S=t&&(l?d(t):s?h(t):p(t)),T=S&&y(b,S)?S:b,A=u(T,x),O=f(a,i)+1,M=[];for(let V=0;V<=A;V++){const B=c(x,V);M.push(B)}const N=(l?35:42)*O;if(o&&M.length<N){const V=N-M.length;for(let B=0;B<V;B++){const G=c(M[M.length-1],1);M.push(G)}}return M}function xxt(e){const t=[];return e.reduce((r,n)=>{const i=n.weeks.reduce((a,s)=>a.concat(s.days.slice()),t.slice());return r.concat(i.slice())},t.slice())}function bxt(e,t,r,n){const{numberOfMonths:i=1}=r,a=[];for(let s=0;s<i;s++){const o=n.addMonths(e,s);if(t&&o>t)break;a.push(o)}return a}function cX(e,t,r,n){const{month:i,defaultMonth:a,today:s=n.today(),numberOfMonths:o=1}=e;let l=i||a||s;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:f}=n;if(r&&c(r,l)<o-1){const d=-1*(o-1);l=u(r,d)}return t&&c(l,t)<0&&(l=t),f(l)}function _xt(e,t,r,n){const{addDays:i,endOfBroadcastWeek:a,endOfISOWeek:s,endOfMonth:o,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:f,startOfISOWeek:d,startOfWeek:h}=n,m=e.reduce((p,y)=>{const g=r.broadcastCalendar?f(y,n):r.ISOWeek?d(y):h(y),w=r.broadcastCalendar?a(y):r.ISOWeek?s(o(y)):l(o(y)),v=t.filter(T=>T>=g&&T<=w),x=r.broadcastCalendar?35:42;if(r.fixedWeeks&&v.length<x){const T=t.filter(A=>{const O=x-v.length;return A>w&&A<=i(w,O)});v.push(...T)}const b=v.reduce((T,A)=>{const O=r.ISOWeek?c(A):u(A),M=T.find(N=>N.weekNumber===O),P=new wme(A,y,n);return M?M.days.push(P):T.push(new ywt(O,[P])),T},[]),S=new gwt(y,b);return p.push(S),p},[]);return r.reverseMonths?m.reverse():m}function Sxt(e,t){let{startMonth:r,endMonth:n}=e;const{startOfYear:i,startOfDay:a,startOfMonth:s,endOfMonth:o,addYears:l,endOfYear:c,newDate:u,today:f}=t,{fromYear:d,toYear:h,fromMonth:m,toMonth:p}=e;!r&&m&&(r=m),!r&&d&&(r=t.newDate(d,0,1)),!n&&p&&(n=p),!n&&h&&(n=u(h,11,31));const y=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return r?r=s(r):d?r=u(d,0,1):!r&&y&&(r=i(l(e.today??f(),-100))),n?n=o(n):h?n=u(h,11,31):!n&&y&&(n=c(e.today??f())),[r&&a(r),n&&a(n)]}function Ext(e,t,r,n){if(r.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a=1}=r,{startOfMonth:s,addMonths:o,differenceInCalendarMonths:l}=n,c=i?a:1,u=s(e);if(!t)return o(u,c);if(!(l(t,e)<a))return o(u,c)}function Axt(e,t,r,n){if(r.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a}=r,{startOfMonth:s,addMonths:o,differenceInCalendarMonths:l}=n,c=i?a??1:1,u=s(e);if(!t)return o(u,-c);if(!(l(u,t)<=0))return o(u,-c)}function Txt(e){const t=[];return e.reduce((r,n)=>r.concat(n.weeks.slice()),t.slice())}function fP(e,t){const[r,n]=C.useState(e);return[t===void 0?r:t,n]}function kxt(e,t){var x;const[r,n]=Sxt(e,t),{startOfMonth:i,endOfMonth:a}=t,s=cX(e,r,n,t),[o,l]=fP(s,e.month?s:void 0);C.useEffect(()=>{const b=cX(e,r,n,t);l(b)},[e.timeZone]);const{months:c,weeks:u,days:f,previousMonth:d,nextMonth:h}=C.useMemo(()=>{const b=bxt(o,n,{numberOfMonths:e.numberOfMonths},t),S=wxt(b,e.endMonth?a(e.endMonth):void 0,{ISOWeek:e.ISOWeek,fixedWeeks:e.fixedWeeks,broadcastCalendar:e.broadcastCalendar},t),T=_xt(b,S,{broadcastCalendar:e.broadcastCalendar,fixedWeeks:e.fixedWeeks,ISOWeek:e.ISOWeek,reverseMonths:e.reverseMonths},t),A=Txt(T),O=xxt(T),M=Axt(o,r,e,t),P=Ext(o,n,e,t);return{months:T,weeks:A,days:O,previousMonth:M,nextMonth:P}},[t,o.getTime(),n==null?void 0:n.getTime(),r==null?void 0:r.getTime(),e.disableNavigation,e.broadcastCalendar,(x=e.endMonth)==null?void 0:x.getTime(),e.fixedWeeks,e.ISOWeek,e.numberOfMonths,e.pagedNavigation,e.reverseMonths]),{disableNavigation:m,onMonthChange:p}=e,y=b=>u.some(S=>S.days.some(T=>T.isEqualTo(b))),g=b=>{if(m)return;let S=i(b);r&&S<i(r)&&(S=i(r)),n&&S>i(n)&&(S=i(n)),l(S),p==null||p(S)};return{months:c,weeks:u,days:f,navStart:r,navEnd:n,previousMonth:d,nextMonth:h,goToMonth:g,goToDay:b=>{y(b)||g(b.date)}}}var pu;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(pu||(pu={}));function uX(e){return!e[Xn.disabled]&&!e[Xn.hidden]&&!e[Xn.outside]}function Cxt(e,t,r,n){let i,a=-1;for(const s of e){const o=t(s);uX(o)&&(o[Xn.focused]&&a<pu.FocusedModifier?(i=s,a=pu.FocusedModifier):n!=null&&n.isEqualTo(s)&&a<pu.LastFocused?(i=s,a=pu.LastFocused):r(s.date)&&a<pu.Selected?(i=s,a=pu.Selected):o[Xn.today]&&a<pu.Today&&(i=s,a=pu.Today))}return i||(i=e.find(s=>uX(t(s)))),i}function Oxt(e,t,r,n,i,a,s){const{ISOWeek:o,broadcastCalendar:l}=a,{addDays:c,addMonths:u,addWeeks:f,addYears:d,endOfBroadcastWeek:h,endOfISOWeek:m,endOfWeek:p,max:y,min:g,startOfBroadcastWeek:w,startOfISOWeek:v,startOfWeek:x}=s;let S={day:c,week:f,month:u,year:d,startOfWeek:T=>l?w(T,s):o?v(T):x(T),endOfWeek:T=>l?h(T):o?m(T):p(T)}[e](r,t==="after"?1:-1);return t==="before"&&n?S=y([n,S]):t==="after"&&i&&(S=g([i,S])),S}function Lme(e,t,r,n,i,a,s,o=0){if(o>365)return;const l=Oxt(e,t,r.date,n,i,a,s),c=!!(a.disabled&&jf(l,a.disabled,s)),u=!!(a.hidden&&jf(l,a.hidden,s)),f=l,d=new wme(l,f,s);return!c&&!u?d:Lme(e,t,d,n,i,a,s,o+1)}function Pxt(e,t,r,n,i){const{autoFocus:a}=e,[s,o]=C.useState(),l=Cxt(t.days,r,n||(()=>!1),s),[c,u]=C.useState(a?l:void 0);return{isFocusTarget:p=>!!(l!=null&&l.isEqualTo(p)),setFocused:u,focused:c,blur:()=>{o(c),u(void 0)},moveFocus:(p,y)=>{if(!c)return;const g=Lme(p,y,c,t.navStart,t.navEnd,e,i);g&&(e.disableNavigation&&!t.days.some(v=>v.isEqualTo(g))||(t.goToDay(g),u(g)))}}}function Nxt(e,t){const{selected:r,required:n,onSelect:i}=e,[a,s]=fP(r,i?r:void 0),o=i?r:a,{isSameDay:l}=t,c=h=>(o==null?void 0:o.some(m=>l(m,h)))??!1,{min:u,max:f}=e;return{selected:o,select:(h,m,p)=>{let y=[...o??[]];if(c(h)){if((o==null?void 0:o.length)===u||n&&(o==null?void 0:o.length)===1)return;y=o==null?void 0:o.filter(g=>!l(g,h))}else(o==null?void 0:o.length)===f?y=[h]:y=[...y,h];return i||s(y),i==null||i(y,h,m,p),y},isSelected:c}}function Ixt(e,t,r=0,n=0,i=!1,a=Yu){const{from:s,to:o}=t||{},{isSameDay:l,isAfter:c,isBefore:u}=a;let f;if(!s&&!o)f={from:e,to:r>0?void 0:e};else if(s&&!o)l(s,e)?r===0?f={from:s,to:e}:i?f={from:s,to:void 0}:f=void 0:u(e,s)?f={from:e,to:s}:f={from:s,to:e};else if(s&&o)if(l(s,e)&&l(o,e))i?f={from:s,to:o}:f=void 0;else if(l(s,e))f={from:s,to:r>0?void 0:e};else if(l(o,e))f={from:e,to:r>0?void 0:e};else if(u(e,s))f={from:e,to:o};else if(c(e,s))f={from:s,to:e};else if(c(e,o))f={from:s,to:e};else throw new Error("Invalid range");if(f!=null&&f.from&&(f!=null&&f.to)){const d=a.differenceInCalendarDays(f.to,f.from);n>0&&d>n?f={from:e,to:void 0}:r>1&&d<r&&(f={from:e,to:void 0})}return f}function Rxt(e,t,r=Yu){const n=Array.isArray(t)?t:[t];let i=e.from;const a=r.differenceInCalendarDays(e.to,e.from),s=Math.min(a,6);for(let o=0;o<=s;o++){if(n.includes(i.getDay()))return!0;i=r.addDays(i,1)}return!1}function fX(e,t,r=Yu){return Df(e,t.from,!1,r)||Df(e,t.to,!1,r)||Df(t,e.from,!1,r)||Df(t,e.to,!1,r)}function Lxt(e,t,r=Yu){const n=Array.isArray(t)?t:[t];if(n.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:r.isDate(o)?Df(e,o,!1,r):_me(o,r)?o.some(l=>Df(e,l,!1,r)):uP(o)?o.from&&o.to?fX(e,{from:o.from,to:o.to},r):!1:bme(o)?Rxt(e,o.dayOfWeek,r):wB(o)?r.isAfter(o.before,o.after)?fX(e,{from:r.addDays(o.after,1),to:r.addDays(o.before,-1)},r):jf(e.from,o,r)||jf(e.to,o,r):xB(o)||bB(o)?jf(e.from,o,r)||jf(e.to,o,r):!1))return!0;const s=n.filter(o=>typeof o=="function");if(s.length){let o=e.from;const l=r.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=l;c++){if(s.some(u=>u(o)))return!0;o=r.addDays(o,1)}}return!1}function Mxt(e,t){const{disabled:r,excludeDisabled:n,selected:i,required:a,onSelect:s}=e,[o,l]=fP(i,s?i:void 0),c=s?i:o;return{selected:c,select:(d,h,m)=>{const{min:p,max:y}=e,g=d?Ixt(d,c,p,y,a,t):void 0;return n&&r&&(g!=null&&g.from)&&g.to&&Lxt({from:g.from,to:g.to},r,t)&&(g.from=d,g.to=void 0),s||l(g),s==null||s(g,d,h,m),g},isSelected:d=>c&&Df(c,d,!1,t)}}function Dxt(e,t){const{selected:r,required:n,onSelect:i}=e,[a,s]=fP(r,i?r:void 0),o=i?r:a,{isSameDay:l}=t;return{selected:o,select:(f,d,h)=>{let m=f;return!n&&o&&o&&l(f,o)&&(m=void 0),i||s(m),i==null||i(m,f,d,h),m},isSelected:f=>o?l(o,f):!1}}function jxt(e,t){const r=Dxt(e,t),n=Nxt(e,t),i=Mxt(e,t);switch(e.mode){case"single":return r;case"multiple":return n;case"range":return i;default:return}}function ml(e,t){return e instanceof rs&&e.timeZone===t?e:new rs(e,t)}function vg(e,t,r){return ml(e,t)}function dX(e,t,r){return typeof e=="boolean"||typeof e=="function"?e:e instanceof Date?vg(e,t):Array.isArray(e)?e.map(n=>n instanceof Date?vg(n,t):n):uP(e)?{...e,from:e.from?ml(e.from,t):e.from,to:e.to?ml(e.to,t):e.to}:wB(e)?{before:vg(e.before,t),after:vg(e.after,t)}:xB(e)?{after:vg(e.after,t)}:bB(e)?{before:vg(e.before,t)}:e}function zI(e,t,r){return e&&(Array.isArray(e)?e.map(n=>dX(n,t)):dX(e,t))}function $xt(e){var Kt;let t=e;const r=t.timeZone;if(r&&(t={...e,timeZone:r},t.today&&(t.today=ml(t.today,r)),t.month&&(t.month=ml(t.month,r)),t.defaultMonth&&(t.defaultMonth=ml(t.defaultMonth,r)),t.startMonth&&(t.startMonth=ml(t.startMonth,r)),t.endMonth&&(t.endMonth=ml(t.endMonth,r)),t.mode==="single"&&t.selected?t.selected=ml(t.selected,r):t.mode==="multiple"&&t.selected?t.selected=(Kt=t.selected)==null?void 0:Kt.map(ct=>ml(ct,r)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?ml(t.selected.from,r):t.selected.from,to:t.selected.to?ml(t.selected.to,r):t.selected.to}),t.disabled!==void 0&&(t.disabled=zI(t.disabled,r)),t.hidden!==void 0&&(t.hidden=zI(t.hidden,r)),t.modifiers)){const ct={};Object.keys(t.modifiers).forEach(Vt=>{var st;ct[Vt]=zI((st=t.modifiers)==null?void 0:st[Vt],r)}),t.modifiers=ct}const{components:n,formatters:i,labels:a,dateLib:s,locale:o,classNames:l}=C.useMemo(()=>{const ct={...vme,...t.locale},Vt=t.broadcastCalendar?1:t.weekStartsOn,st=t.noonSafe&&t.timeZone?pxt(t.timeZone,{weekStartsOn:Vt,locale:ct}):void 0,dt=t.dateLib&&st?{...st,...t.dateLib}:t.dateLib??st,ir=new Zo({locale:ct,weekStartsOn:Vt,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},dt);return{dateLib:ir,components:qwt(t.components),formatters:ixt(t.formatters),labels:cxt(t.labels,ir.options),locale:ct,classNames:{...Ywt(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.noonSafe,t.components,t.formatters,t.labels,t.classNames]);t.today||(t={...t,today:s.today()});const{captionLayout:c,mode:u,navLayout:f,numberOfMonths:d=1,onDayBlur:h,onDayClick:m,onDayFocus:p,onDayKeyDown:y,onDayMouseEnter:g,onDayMouseLeave:w,onNextClick:v,onPrevClick:x,showWeekNumber:b,styles:S}=t,{formatCaption:T,formatDay:A,formatMonthDropdown:O,formatWeekNumber:M,formatWeekNumberHeader:P,formatWeekdayName:N,formatYearDropdown:V}=i,B=kxt(t,s),{days:G,months:Z,navStart:J,navEnd:Y,previousMonth:U,nextMonth:se,goToMonth:ue}=B,I=Hwt(G,t,J,Y,s),{isSelected:z,select:H,selected:q}=jxt(t,s)??{},{blur:F,focused:D,isFocusTarget:re,moveFocus:K,setFocused:le}=Pxt(t,B,I,z??(()=>!1),s),{labelDayButton:xe,labelGridcell:X,labelGrid:Ie,labelMonthDropdown:Re,labelNav:ie,labelPrevious:Te,labelNext:Me,labelWeekday:tt,labelWeekNumber:$e,labelWeekNumberHeader:De,labelYearDropdown:nt}=a,qe=C.useMemo(()=>dxt(s,t.ISOWeek,t.broadcastCalendar,t.today),[s,t.ISOWeek,t.broadcastCalendar,t.today]),Ue=u!==void 0||m!==void 0,Qe=C.useCallback(()=>{U&&(ue(U),x==null||x(U))},[U,ue,x]),Ge=C.useCallback(()=>{se&&(ue(se),v==null||v(se))},[ue,se,v]),Fe=C.useCallback((ct,Vt)=>st=>{st.preventDefault(),st.stopPropagation(),le(ct),!Vt.disabled&&(H==null||H(ct.date,Vt,st),m==null||m(ct.date,Vt,st))},[H,m,le]),at=C.useCallback((ct,Vt)=>st=>{le(ct),p==null||p(ct.date,Vt,st)},[p,le]),Ze=C.useCallback((ct,Vt)=>st=>{F(),h==null||h(ct.date,Vt,st)},[F,h]),ft=C.useCallback((ct,Vt)=>st=>{const dt={ArrowLeft:[st.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[st.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[st.shiftKey?"year":"week","after"],ArrowUp:[st.shiftKey?"year":"week","before"],PageUp:[st.shiftKey?"year":"month","before"],PageDown:[st.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(dt[st.key]){st.preventDefault(),st.stopPropagation();const[ir,ur]=dt[st.key];K(ir,ur)}y==null||y(ct.date,Vt,st)},[K,y,t.dir]),pt=C.useCallback((ct,Vt)=>st=>{g==null||g(ct.date,Vt,st)},[g]),yt=C.useCallback((ct,Vt)=>st=>{w==null||w(ct.date,Vt,st)},[w]),Or=C.useCallback(ct=>Vt=>{const st=Number(Vt.target.value),dt=s.setMonth(s.startOfMonth(ct),st);ue(dt)},[s,ue]),qt=C.useCallback(ct=>Vt=>{const st=Number(Vt.target.value),dt=s.setYear(s.startOfMonth(ct),st);ue(dt)},[s,ue]),{className:Jt,style:cr}=C.useMemo(()=>({className:[l[Ht.Root],t.className].filter(Boolean).join(" "),style:{...S==null?void 0:S[Ht.Root],...t.style}}),[l,t.className,t.style,S]),un=Kwt(t),Ut=C.useRef(null);vxt(Ut,!!t.animate,{classNames:l,months:Z,focused:D,dateLib:s});const Xr={dayPickerProps:t,selected:q,select:H,isSelected:z,months:Z,nextMonth:se,previousMonth:U,goToMonth:ue,getModifiers:I,components:n,classNames:l,styles:S,labels:a,formatters:i};return he.createElement(xme.Provider,{value:Xr},he.createElement(n.Root,{rootRef:t.animate?Ut:void 0,className:Jt,style:cr,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...un},he.createElement(n.Months,{className:l[Ht.Months],style:S==null?void 0:S[Ht.Months]},!t.hideNavigation&&!f&&he.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Ht.Nav],style:S==null?void 0:S[Ht.Nav],"aria-label":ie(),onPreviousClick:Qe,onNextClick:Ge,previousMonth:U,nextMonth:se}),Z.map((ct,Vt)=>he.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:l[Ht.Month],style:S==null?void 0:S[Ht.Month],key:Vt,displayIndex:Vt,calendarMonth:ct},f==="around"&&!t.hideNavigation&&Vt===0&&he.createElement(n.PreviousMonthButton,{type:"button",className:l[Ht.PreviousMonthButton],tabIndex:U?void 0:-1,"aria-disabled":U?void 0:!0,"aria-label":Te(U),onClick:Qe,"data-animated-button":t.animate?"true":void 0},he.createElement(n.Chevron,{disabled:U?void 0:!0,className:l[Ht.Chevron],orientation:t.dir==="rtl"?"right":"left"})),he.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[Ht.MonthCaption],style:S==null?void 0:S[Ht.MonthCaption],calendarMonth:ct,displayIndex:Vt},c!=null&&c.startsWith("dropdown")?he.createElement(n.DropdownNav,{className:l[Ht.Dropdowns],style:S==null?void 0:S[Ht.Dropdowns]},(()=>{const st=c==="dropdown"||c==="dropdown-months"?he.createElement(n.MonthsDropdown,{key:"month",className:l[Ht.MonthsDropdown],"aria-label":Re(),classNames:l,components:n,disabled:!!t.disableNavigation,onChange:Or(ct.date),options:uxt(ct.date,J,Y,i,s),style:S==null?void 0:S[Ht.Dropdown],value:s.getMonth(ct.date)}):he.createElement("span",{key:"month"},O(ct.date,s)),dt=c==="dropdown"||c==="dropdown-years"?he.createElement(n.YearsDropdown,{key:"year",className:l[Ht.YearsDropdown],"aria-label":nt(s.options),classNames:l,components:n,disabled:!!t.disableNavigation,onChange:qt(ct.date),options:hxt(J,Y,i,s,!!t.reverseYears),style:S==null?void 0:S[Ht.Dropdown],value:s.getYear(ct.date)}):he.createElement("span",{key:"year"},V(ct.date,s));return s.getMonthYearOrder()==="year-first"?[dt,st]:[st,dt]})(),he.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},T(ct.date,s.options,s))):he.createElement(n.CaptionLabel,{className:l[Ht.CaptionLabel],role:"status","aria-live":"polite"},T(ct.date,s.options,s))),f==="around"&&!t.hideNavigation&&Vt===d-1&&he.createElement(n.NextMonthButton,{type:"button",className:l[Ht.NextMonthButton],tabIndex:se?void 0:-1,"aria-disabled":se?void 0:!0,"aria-label":Me(se),onClick:Ge,"data-animated-button":t.animate?"true":void 0},he.createElement(n.Chevron,{disabled:se?void 0:!0,className:l[Ht.Chevron],orientation:t.dir==="rtl"?"left":"right"})),Vt===d-1&&f==="after"&&!t.hideNavigation&&he.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[Ht.Nav],style:S==null?void 0:S[Ht.Nav],"aria-label":ie(),onPreviousClick:Qe,onNextClick:Ge,previousMonth:U,nextMonth:se}),he.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":Ie(ct.date,s.options,s)||void 0,className:l[Ht.MonthGrid],style:S==null?void 0:S[Ht.MonthGrid]},!t.hideWeekdays&&he.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[Ht.Weekdays],style:S==null?void 0:S[Ht.Weekdays]},b&&he.createElement(n.WeekNumberHeader,{"aria-label":De(s.options),className:l[Ht.WeekNumberHeader],style:S==null?void 0:S[Ht.WeekNumberHeader],scope:"col"},P()),qe.map(st=>he.createElement(n.Weekday,{"aria-label":tt(st,s.options,s),className:l[Ht.Weekday],key:String(st),style:S==null?void 0:S[Ht.Weekday],scope:"col"},N(st,s.options,s)))),he.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[Ht.Weeks],style:S==null?void 0:S[Ht.Weeks]},ct.weeks.map(st=>he.createElement(n.Week,{className:l[Ht.Week],key:st.weekNumber,style:S==null?void 0:S[Ht.Week],week:st},b&&he.createElement(n.WeekNumber,{week:st,style:S==null?void 0:S[Ht.WeekNumber],"aria-label":$e(st.weekNumber,{locale:o}),className:l[Ht.WeekNumber],scope:"row",role:"rowheader"},M(st.weekNumber,s)),st.days.map(dt=>{const{date:ir}=dt,ur=I(dt);if(ur[Xn.focused]=!ur.hidden&&!!(D!=null&&D.isEqualTo(dt)),ur[Tc.selected]=(z==null?void 0:z(ir))||ur.selected,uP(q)){const{from:Wt,to:vs}=q;ur[Tc.range_start]=!!(Wt&&vs&&s.isSameDay(ir,Wt)),ur[Tc.range_end]=!!(Wt&&vs&&s.isSameDay(ir,vs)),ur[Tc.range_middle]=Df(q,ir,!0,s)}const Si=fxt(ur,S,t.modifiersStyles),go=Gwt(ur,l,t.modifiersClassNames),Ks=!Ue&&!ur.hidden?X(ir,ur,s.options,s):void 0;return he.createElement(n.Day,{key:`${dt.isoDate}_${dt.displayMonthId}`,day:dt,modifiers:ur,className:go.join(" "),style:Si,role:"gridcell","aria-selected":ur.selected||void 0,"aria-label":Ks,"data-day":dt.isoDate,"data-month":dt.outside?dt.dateMonthId:void 0,"data-selected":ur.selected||void 0,"data-disabled":ur.disabled||void 0,"data-hidden":ur.hidden||void 0,"data-outside":dt.outside||void 0,"data-focused":ur.focused||void 0,"data-today":ur.today||void 0},!ur.hidden&&Ue?he.createElement(n.DayButton,{className:l[Ht.DayButton],style:S==null?void 0:S[Ht.DayButton],type:"button",day:dt,modifiers:ur,disabled:!ur.focused&&ur.disabled||void 0,"aria-disabled":ur.focused&&ur.disabled||void 0,tabIndex:re(dt)?0:-1,"aria-label":xe(ir,ur,s.options,s),onClick:Fe(dt,ur),onBlur:Ze(dt,ur),onFocus:at(dt,ur),onKeyDown:ft(dt,ur),onMouseEnter:pt(dt,ur),onMouseLeave:yt(dt,ur)},A(ir,s.options,s)):!ur.hidden&&A(dt.date,s.options,s))})))))))),t.footer&&he.createElement(n.Footer,{className:l[Ht.Footer],style:S==null?void 0:S[Ht.Footer],role:"status","aria-live":"polite"},t.footer)))}function Mme({className:e,classNames:t,showOutsideDays:r=!0,...n}){return E.jsx($xt,{showOutsideDays:r,className:Ft("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",month_caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",button_previous:Ft(vA({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute left-1"),button_next:Ft(vA({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute right-1"),month_grid:"w-full border-collapse space-y-1",weekdays:"flex",weekday:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",week:"flex w-full mt-2",day:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day_button:Ft(vA({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",today:"bg-accent text-accent-foreground",outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",disabled:"text-muted-foreground opacity-50",range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",hidden:"invisible",...t},components:{Chevron:({orientation:i})=>{const a=i==="left"?FEe:Fte;return E.jsx(a,{className:"h-4 w-4"})}},...n})}Mme.displayName="Calendar";function Fxt(e){const t=Bxt(e),r=C.forwardRef((n,i)=>{const{children:a,...s}=n,o=C.Children.toArray(a),l=o.find(zxt);if(l){const c=l.props.children,u=o.map(f=>f===l?C.Children.count(c)>1?C.Children.only(null):C.isValidElement(c)?c.props.children:null:f);return E.jsx(t,{...s,ref:i,children:C.isValidElement(c)?C.cloneElement(c,void 0,u):null})}return E.jsx(t,{...s,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}function Bxt(e){const t=C.forwardRef((r,n)=>{const{children:i,...a}=r;if(C.isValidElement(i)){const s=Wxt(i),o=Vxt(a,i.props);return i.type!==C.Fragment&&(o.ref=n?Wu(n,s):s),C.cloneElement(i,o)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Uxt=Symbol("radix.slottable");function zxt(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Uxt}function Vxt(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function Wxt(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var dP="Popover",[Dme]=Hu(dP,[t1]),j2=t1(),[Hxt,Tp]=Dme(dP),jme=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:s=!1}=e,o=j2(t),l=C.useRef(null),[c,u]=C.useState(!1),[f,d]=Kh({prop:n,defaultProp:i??!1,onChange:a,caller:dP});return E.jsx(D6,{...o,children:E.jsx(Hxt,{scope:t,contentId:Nc(),triggerRef:l,open:f,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(h=>!h),[d]),hasCustomAnchor:c,onCustomAnchorAdd:C.useCallback(()=>u(!0),[]),onCustomAnchorRemove:C.useCallback(()=>u(!1),[]),modal:s,children:r})})};jme.displayName=dP;var $me="PopoverAnchor",Gxt=C.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Tp($me,r),a=j2(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=i;return C.useEffect(()=>(s(),()=>o()),[s,o]),E.jsx(AC,{...a,...n,ref:t})});Gxt.displayName=$me;var Fme="PopoverTrigger",Bme=C.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Tp(Fme,r),a=j2(r),s=Mr(t,i.triggerRef),o=E.jsx(lr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Hme(i.open),...n,ref:s,onClick:_t(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:E.jsx(AC,{asChild:!0,...a,children:o})});Bme.displayName=Fme;var EB="PopoverPortal",[qxt,Kxt]=Dme(EB,{forceMount:void 0}),Ume=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,a=Tp(EB,t);return E.jsx(qxt,{scope:t,forceMount:r,children:E.jsx(Hc,{present:r||a.open,children:E.jsx(t2,{asChild:!0,container:i,children:n})})})};Ume.displayName=EB;var Bv="PopoverContent",zme=C.forwardRef((e,t)=>{const r=Kxt(Bv,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,a=Tp(Bv,e.__scopePopover);return E.jsx(Hc,{present:n||a.open,children:a.modal?E.jsx(Xxt,{...i,ref:t}):E.jsx(Zxt,{...i,ref:t})})});zme.displayName=Bv;var Yxt=Fxt("PopoverContent.RemoveScroll"),Xxt=C.forwardRef((e,t)=>{const r=Tp(Bv,e.__scopePopover),n=C.useRef(null),i=Mr(t,n),a=C.useRef(!1);return C.useEffect(()=>{const s=n.current;if(s)return kC(s)},[]),E.jsx(n2,{as:Yxt,allowPinchZoom:!0,children:E.jsx(Vme,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_t(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),a.current||(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:_t(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;a.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:_t(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),Zxt=C.forwardRef((e,t)=>{const r=Tp(Bv,e.__scopePopover),n=C.useRef(!1),i=C.useRef(!1);return E.jsx(Vme,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,a),a.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=a.target;((c=r.triggerRef.current)==null?void 0:c.contains(s))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),Vme=C.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=e,d=Tp(Bv,r),h=j2(r);return xC(),E.jsx(Q_,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:E.jsx(J_,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>d.onOpenChange(!1),children:E.jsx(j6,{"data-state":Hme(d.open),role:"dialog",id:d.contentId,...h,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Wme="PopoverClose",Jxt=C.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Tp(Wme,r);return E.jsx(lr.button,{type:"button",...n,ref:t,onClick:_t(e.onClick,()=>i.onOpenChange(!1))})});Jxt.displayName=Wme;var Qxt="PopoverArrow",ebt=C.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=j2(r);return E.jsx($6,{...i,...n,ref:t})});ebt.displayName=Qxt;function Hme(e){return e?"open":"closed"}var tbt=jme,rbt=Bme,nbt=Ume,Gme=zme;const ibt=tbt,abt=rbt,qme=C.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>E.jsx(nbt,{children:E.jsx(Gme,{ref:i,align:t,sideOffset:r,className:Ft("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));qme.displayName=Gme.displayName;function VD({date:e,setDate:t,className:r}){return E.jsxs(ibt,{children:[E.jsx(abt,{asChild:!0,children:E.jsxs(Er,{variant:"outline",className:Ft("w-full justify-start text-left font-normal bg-slate-800/50 border-slate-700 text-slate-300 hover:bg-slate-800 hover:text-white transition-all",!e&&"text-muted-foreground",r),children:[E.jsx(S6,{className:"mr-2 h-4 w-4 text-cyan-500"}),e?T0(e,"PPP"):E.jsx("span",{children:"Pick a date"})]})}),E.jsx(qme,{className:"w-auto p-0 bg-slate-900 border-slate-800",align:"start",children:E.jsx(Mme,{mode:"single",selected:e,onSelect:t,initialFocus:!0,className:"rounded-md border-slate-800"})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Kme=1252,sbt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],AB={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},TB=function(e){sbt.indexOf(e)!=-1&&(Kme=AB[0]=e)};function obt(){TB(1252)}var kc=function(e){TB(e)};function Yme(){kc(1200),obt()}function hX(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function lbt(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function Xme(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Xw=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?lbt(e.slice(2)):t==254&&r==255?Xme(e.slice(2)):t==65279?e.slice(1):e},UE=function(t){return String.fromCharCode(t)},pX=function(t){return String.fromCharCode(t)},N_,Sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function mX(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0,c=0;c<e.length;)r=e.charCodeAt(c++),a=r>>2,n=e.charCodeAt(c++),s=(r&3)<<4|n>>4,i=e.charCodeAt(c++),o=(n&15)<<2|i>>6,l=i&63,isNaN(n)?o=l=64:isNaN(i)&&(l=64),t+=Sh.charAt(a)+Sh.charAt(s)+Sh.charAt(o)+Sh.charAt(l);return t}function Jo(e){var t="",r=0,n=0,i=0,a=0,s=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)a=Sh.indexOf(e.charAt(c++)),s=Sh.indexOf(e.charAt(c++)),r=a<<2|s>>4,t+=String.fromCharCode(r),o=Sh.indexOf(e.charAt(c++)),n=(s&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=Sh.indexOf(e.charAt(c++)),i=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(i));return t}var Rr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Rm=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function ap(e){return Rr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function gX(e){return Rr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Sc=function(t){return Rr?Rm(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Lm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function kB(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return kB(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var mh=Rr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Rm(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),i=0;for(t=0,r=0;t<e.length;r+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function cbt(e){for(var t=[],r=0,n=e.length+250,i=ap(e.length+255),a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s<128)i[r++]=s;else if(s<2048)i[r++]=192|s>>6&31,i[r++]=128|s&63;else if(s>=55296&&s<57344){s=(s&1023)+64;var o=e.charCodeAt(++a)&1023;i[r++]=240|s>>8&7,i[r++]=128|s>>2&63,i[r++]=128|o>>6&15|(s&3)<<4,i[r++]=128|o&63}else i[r++]=224|s>>12&15,i[r++]=128|s>>6&63,i[r++]=128|s&63;r>n&&(t.push(i.slice(0,r)),r=0,i=ap(65535),n=65530)}return t.push(i.slice(0,r)),mh(t)}var Us=/\u0000/g,Zw=/[\u0001-\u0006]/g;function My(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Cc(e,t){var r=""+e;return r.length>=t?r:fi("0",t-r.length)+r}function CB(e,t){var r=""+e;return r.length>=t?r:fi(" ",t-r.length)+r}function N5(e,t){var r=""+e;return r.length>=t?r:r+fi(" ",t-r.length)}function ubt(e,t){var r=""+Math.round(e);return r.length>=t?r:fi("0",t-r.length)+r}function fbt(e,t){var r=""+e;return r.length>=t?r:fi("0",t-r.length)+r}var yX=Math.pow(2,32);function wg(e,t){if(e>yX||e<-yX)return ubt(e,t);var r=Math.round(e);return fbt(r,t)}function I5(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var vX=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],VI=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function dbt(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var yr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},wX={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},hbt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function R5(e,t,r){for(var n=e<0?-1:1,i=e*n,a=0,s=1,o=0,l=1,c=0,u=0,f=Math.floor(i);c<t&&(f=Math.floor(i),o=f*s+a,u=f*c+l,!(i-f<5e-8));)i=1/(i-f),a=s,s=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=a):(u=c,o=s)),!r)return[0,n*o,u];var d=Math.floor(n*o/u);return[d,n*o-d*u,u]}function C0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,i=Math.floor(86400*(e-n)),a=0,s=[],o={D:n,T:i,u:86400*(e-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)s=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)s=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),s=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=wbt(l,s))}return o.y=s[0],o.m=s[1],o.d=s[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=a,o}var Zme=new Date(1899,11,31,0,0,0),pbt=Zme.getTime(),mbt=new Date(1900,2,1,0,0,0);function Jme(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=mbt&&(r+=24*60*60*1e3),(r-(pbt+(e.getTimezoneOffset()-Zme.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function OB(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function gbt(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ybt(e){var t=e<0?12:11,r=OB(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function vbt(e){var t=OB(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function I_(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=ybt(e):t===10?r=e.toFixed(10).substr(0,12):r=vbt(e),OB(gbt(r.toUpperCase()))}function gm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):I_(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return $l(14,Jme(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function wbt(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function xbt(e,t,r,n){var i="",a=0,s=0,o=r.y,l,c=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,c=t.length;break;case 3:return VI[r.m-1][1];case 5:return VI[r.m-1][0];default:return VI[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,c=t.length;break;case 3:return vX[r.q][0];default:return vX[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Cc(r.S,t.length):(n>=2?s=n===3?1e3:100:s=n===1?10:1,a=Math.round(s*(r.S+r.u)),a>=60*s&&(a=0),t==="s"?a===0?"0":""+a/s:(i=Cc(a,2+n),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?Cc(l,c):"";return u}function Eh(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Qme=/%/g;function bbt(e,t,r){var n=t.replace(Qme,""),i=t.length-n.length;return Gf(e,n,r*Math.pow(10,2*i))+fi("%",i)}function _bt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Gf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function ege(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+ege(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),r.indexOf("e")===-1){var s=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,i)+"."+r.substr(2+i),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+a)%i)+"."+u.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var tge=/# (\?+)( ?)\/( ?)(\d+)/;function Sbt(e,t,r){var n=parseInt(e[4],10),i=Math.round(t*n),a=Math.floor(i/n),s=i-a*n,o=n;return r+(a===0?"":""+a)+" "+(s===0?fi(" ",e[1].length+1+e[4].length):CB(s,e[1].length)+e[2]+"/"+e[3]+Cc(o,e[4].length))}function Ebt(e,t,r){return r+(t===0?"":""+t)+fi(" ",e[1].length+2+e[4].length)}var rge=/^#*0*\.([0#]+)/,nge=/\).*[0#]/,ige=/\(###\) ###\\?-####/;function Ts(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function xX(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function bX(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Abt(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Tbt(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function hl(e,t,r){if(e.charCodeAt(0)===40&&!t.match(nge)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?hl("n",n,r):"("+hl("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return _bt(e,t,r);if(t.indexOf("%")!==-1)return bbt(e,t,r);if(t.indexOf("E")!==-1)return ege(t,r);if(t.charCodeAt(0)===36)return"$"+hl(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+wg(l,t.length);if(t.match(/^[#?]+$/))return i=wg(r,0),i==="0"&&(i=""),i.length>t.length?i:Ts(t.substr(0,t.length-i.length))+i;if(a=t.match(tge))return Sbt(a,l,c);if(t.match(/^#+0+$/))return c+wg(l,t.length-t.indexOf("0"));if(a=t.match(rge))return i=xX(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Ts(a[1])).replace(/\.$/,"."+Ts(a[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+fi("0",Ts(a[1]).length-p.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+xX(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+Eh(wg(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+hl(e,t,-r):Eh(""+(Math.floor(r)+Abt(r,a[1].length)))+"."+Cc(bX(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return hl(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=My(hl(e,t.replace(/[\\-]/g,""),r)),s=0,My(My(t.replace(/\\/g,"")).replace(/[0#]/g,function(m){return s<i.length?i.charAt(s++):m==="0"?"0":""}));if(t.match(ige))return i=hl(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=R5(l,Math.pow(10,s)-1,!1),i=""+c,u=Gf("n",a[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],u=N5(o[2],s),u.length<a[4].length&&(u=Ts(a[4].substr(a[4].length-u.length))+u),i+=u,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=R5(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?CB(o[1],s)+a[2]+"/"+a[3]+N5(o[2],s):fi(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=wg(r,0),t.length<=i.length?i:Ts(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,d=t.length-i.length-f;return Ts(t.substr(0,f)+i+t.substr(t.length-d))}if(a=t.match(/^00,000\.([#0]*0)$/))return s=bX(r,a[1].length),r<0?"-"+hl(e,t,-r):Eh(Tbt(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Cc(0,3-m.length):"")+m})+"."+Cc(s,a[1].length);switch(t){case"###,##0.00":return hl(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Eh(wg(l,0));return h!=="0"?c+h:"";case"###,###.00":return hl(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return hl(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function kbt(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Gf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Cbt(e,t,r){var n=t.replace(Qme,""),i=t.length-n.length;return Gf(e,n,r*Math.pow(10,2*i))+fi("%",i)}function age(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+age(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%i;if(a<0&&(a+=i),r=(t/Math.pow(10,a)).toPrecision(n+1+(i+a)%i),!r.match(/[Ee]/)){var s=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(s-r.length+a):r+="E+"+(s-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+a)%i)+"."+u.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function uu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(nge)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?uu("n",n,r):"("+uu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return kbt(e,t,r);if(t.indexOf("%")!==-1)return Cbt(e,t,r);if(t.indexOf("E")!==-1)return age(t,r);if(t.charCodeAt(0)===36)return"$"+uu(e,t.substr(t.charAt(1)==" "?2:1),r);var i,a,s,o,l=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+Cc(l,t.length);if(t.match(/^[#?]+$/))return i=""+r,r===0&&(i=""),i.length>t.length?i:Ts(t.substr(0,t.length-i.length))+i;if(a=t.match(tge))return Ebt(a,l,c);if(t.match(/^#+0+$/))return c+Cc(l,t.length-t.indexOf("0"));if(a=t.match(rge))return i=(""+r).replace(/^([^\.]+)$/,"$1."+Ts(a[1])).replace(/\.$/,"."+Ts(a[1])),i=i.replace(/\.(\d*)$/,function(m,p){return"."+p+fi("0",Ts(a[1]).length-p.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return c+Eh(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+uu(e,t,-r):Eh(""+r)+"."+fi("0",a[1].length);if(a=t.match(/^#,#*,#0/))return uu(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=My(uu(e,t.replace(/[\\-]/g,""),r)),s=0,My(My(t.replace(/\\/g,"")).replace(/[0#]/g,function(m){return s<i.length?i.charAt(s++):m==="0"?"0":""}));if(t.match(ige))return i=uu(e,"##########",r),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(a[4].length,7),o=R5(l,Math.pow(10,s)-1,!1),i=""+c,u=Gf("n",a[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+a[2]+"/"+a[3],u=N5(o[2],s),u.length<a[4].length&&(u=Ts(a[4].substr(a[4].length-u.length))+u),i+=u,i;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return s=Math.min(Math.max(a[1].length,a[4].length),7),o=R5(l,Math.pow(10,s)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?CB(o[1],s)+a[2]+"/"+a[3]+N5(o[2],s):fi(" ",2*s+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return i=""+r,t.length<=i.length?i:Ts(t.substr(0,t.length-i.length))+i;if(a=t.match(/^([#0]+)\.([#0]+)$/)){i=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),s=i.indexOf(".");var f=t.indexOf(".")-s,d=t.length-i.length-f;return Ts(t.substr(0,f)+i+t.substr(t.length-d))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+uu(e,t,-r):Eh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Cc(0,3-m.length):"")+m})+"."+Cc(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=Eh(""+l);return h!=="0"?c+h:"";default:if(t.match(/\.[0#?]*$/))return uu(e,t.slice(0,t.lastIndexOf(".")),r)+Ts(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Gf(e,t,r){return(r|0)===r?uu(e,t,r):hl(e,t,r)}function Obt(e){for(var t=[],r=!1,n=0,i=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(i,n-i),i=n+1}if(t[t.length]=e.substr(i),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var sge=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function k1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":I5(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(sge))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Pbt(e,t,r,n){for(var i=[],a="",s=0,o="",l="t",c,u,f,d="H";s<e.length;)switch(o=e.charAt(s)){case"G":if(!I5(e,s))throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"G",v:"General"},s+=7;break;case'"':for(a="";(f=e.charCodeAt(++s))!==34&&s<e.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++s;break;case"\\":var h=e.charAt(++s),m=h==="("||h===")"?h:"t";i[i.length]={t:m,v:h},++s;break;case"_":i[i.length]={t:"t",v:" "},s+=2;break;case"@":i[i.length]={t:"T",v:t},++s;break;case"B":case"b":if(e.charAt(s+1)==="1"||e.charAt(s+1)==="2"){if(c==null&&(c=C0(t,r,e.charAt(s+1)==="2"),c==null))return"";i[i.length]={t:"X",v:e.substr(s,2)},l=o,s+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=C0(t,r),c==null))return"";for(a=o;++s<e.length&&e.charAt(s).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=d),i[i.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var p={t:o,v:o};if(c==null&&(c=C0(t,r)),e.substr(s,3).toUpperCase()==="A/P"?(c!=null&&(p.v=c.H>=12?"P":"A"),p.t="T",d="h",s+=3):e.substr(s,5).toUpperCase()==="AM/PM"?(c!=null&&(p.v=c.H>=12?"PM":"AM"),p.t="T",s+=5,d="h"):e.substr(s,5).toUpperCase()==="/"?(c!=null&&(p.v=c.H>=12?"":""),p.t="T",s+=5,d="h"):(p.t="t",++s),c==null&&p.t==="T")return"";i[i.length]=p,l=o;break;case"[":for(a=o;e.charAt(s++)!=="]"&&s<e.length;)a+=e.charAt(s);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(sge)){if(c==null&&(c=C0(t,r),c==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",k1(e)||(i[i.length]={t:"t",v:a}));break;case".":if(c!=null){for(a=o;++s<e.length&&(o=e.charAt(s))==="0";)a+=o;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++s<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(s))>-1;)a+=o;i[i.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++s)===o;)a+=o;i[i.length]={t:o,v:a},l=o;break;case"*":++s,(e.charAt(s)==" "||e.charAt(s)=="*")&&++s;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;s<e.length&&"0123456789".indexOf(e.charAt(++s))>-1;)a+=e.charAt(s);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:o,v:o},++s;break;case"$":i[i.length]={t:"t",v:"$"},++s;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"t",v:o},++s;break}var y=0,g=0,w;for(s=i.length-1,l="t";s>=0;--s)switch(i[s].t){case"h":case"H":i[s].t=d,l="h",y<1&&(y=1);break;case"s":(w=i[s].v.match(/\.0+$/))&&(g=Math.max(g,w[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":l=i[s].t;break;case"m":l==="s"&&(i[s].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&i[s].v.match(/[Hh]/)&&(y=1),y<2&&i[s].v.match(/[Mm]/)&&(y=2),y<3&&i[s].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var v="",x;for(s=0;s<i.length;++s)switch(i[s].t){case"t":case"T":case" ":case"D":break;case"X":i[s].v="",i[s].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[s].v=xbt(i[s].t.charCodeAt(0),i[s].v,c,g),i[s].t="t";break;case"n":case"?":for(x=s+1;i[x]!=null&&((o=i[x].t)==="?"||o==="D"||(o===" "||o==="t")&&i[x+1]!=null&&(i[x+1].t==="?"||i[x+1].t==="t"&&i[x+1].v==="/")||i[s].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[x].v==="/"||i[x].v===" "&&i[x+1]!=null&&i[x+1].t=="?"));)i[s].v+=i[x].v,i[x]={v:"",t:";"},++x;v+=i[s].v,s=x-1;break;case"G":i[s].t="t",i[s].v=gm(t,r);break}var b="",S,T;if(v.length>0){v.charCodeAt(0)==40?(S=t<0&&v.charCodeAt(0)===45?-t:t,T=Gf("n",v,S)):(S=t<0&&n>1?-t:t,T=Gf("n",v,S),S<0&&i[0]&&i[0].t=="t"&&(T=T.substr(1),i[0].v="-"+i[0].v)),x=T.length-1;var A=i.length;for(s=0;s<i.length;++s)if(i[s]!=null&&i[s].t!="t"&&i[s].v.indexOf(".")>-1){A=s;break}var O=i.length;if(A===i.length&&T.indexOf("E")===-1){for(s=i.length-1;s>=0;--s)i[s]==null||"n?".indexOf(i[s].t)===-1||(x>=i[s].v.length-1?(x-=i[s].v.length,i[s].v=T.substr(x+1,i[s].v.length)):x<0?i[s].v="":(i[s].v=T.substr(0,x+1),x=-1),i[s].t="t",O=s);x>=0&&O<i.length&&(i[O].v=T.substr(0,x+1)+i[O].v)}else if(A!==i.length&&T.indexOf("E")===-1){for(x=T.indexOf(".")-1,s=A;s>=0;--s)if(!(i[s]==null||"n?".indexOf(i[s].t)===-1)){for(u=i[s].v.indexOf(".")>-1&&s===A?i[s].v.indexOf(".")-1:i[s].v.length-1,b=i[s].v.substr(u+1);u>=0;--u)x>=0&&(i[s].v.charAt(u)==="0"||i[s].v.charAt(u)==="#")&&(b=T.charAt(x--)+b);i[s].v=b,i[s].t="t",O=s}for(x>=0&&O<i.length&&(i[O].v=T.substr(0,x+1)+i[O].v),x=T.indexOf(".")+1,s=A;s<i.length;++s)if(!(i[s]==null||"n?(".indexOf(i[s].t)===-1&&s!==A)){for(u=i[s].v.indexOf(".")>-1&&s===A?i[s].v.indexOf(".")+1:0,b=i[s].v.substr(0,u);u<i[s].v.length;++u)x<T.length&&(b+=T.charAt(x++));i[s].v=b,i[s].t="t",O=s}}}for(s=0;s<i.length;++s)i[s]!=null&&"n?".indexOf(i[s].t)>-1&&(S=n>1&&t<0&&s>0&&i[s-1].v==="-"?-t:t,i[s].v=Gf(i[s].t,i[s].v,S),i[s].t="t");var M="";for(s=0;s!==i.length;++s)i[s]!=null&&(M+=i[s].v);return M}var _X=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function SX(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Nbt(e,t){var r=Obt(e),n=r.length,i=r[n-1].indexOf("@");if(n<4&&i>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||i>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=i>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=i>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=i>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var s=r[0].match(_X),o=r[1].match(_X);return SX(t,s)?[n,r[0]]:SX(t,o)?[n,r[1]]:[n,r[s!=null&&o!=null?2:1]]}return[n,a]}function $l(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:yr)[e],n==null&&(n=r.table&&r.table[wX[e]]||yr[wX[e]]),n==null&&(n=hbt[e]||"General");break}if(I5(n,0))return gm(t,r);t instanceof Date&&(t=Jme(t,r.date1904));var i=Nbt(n,t);if(I5(i[1]))return gm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Pbt(i[1],t,r,i[0])}function U0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(yr[r]==null){t<0&&(t=r);continue}if(yr[r]==e){t=r;break}}t<0&&(t=391)}return yr[t]=e,t}function oge(){yr=dbt()}var Ibt={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},lge=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Rbt(e){var t=typeof e=="number"?yr[e]:e;return t=t.replace(lge,"(\\d+)"),new RegExp("^"+t+"$")}function Lbt(e,t,r){var n=-1,i=-1,a=-1,s=-1,o=-1,l=-1;(t.match(lge)||[]).forEach(function(f,d){var h=parseInt(r[d+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":a=h;break;case"h":s=h;break;case"s":l=h;break;case"m":s>=0?o=h:i=h;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return s==-1&&o==-1&&l==-1?c:n==-1&&i==-1&&a==-1?u:c+"T"+u}var Mbt=function(){var e={};e.version="1.2.0";function t(){for(var T=0,A=new Array(256),O=0;O!=256;++O)T=O,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,A[O]=T;return typeof Int32Array<"u"?new Int32Array(A):A}var r=t();function n(T){var A=0,O=0,M=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)P[M]=T[M];for(M=0;M!=256;++M)for(O=T[M],A=256+M;A<4096;A+=256)O=P[A]=O>>>8^T[O&255];var N=[];for(M=1;M!=16;++M)N[M-1]=typeof Int32Array<"u"?P.subarray(M*256,M*256+256):P.slice(M*256,M*256+256);return N}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],d=i[7],h=i[8],m=i[9],p=i[10],y=i[11],g=i[12],w=i[13],v=i[14];function x(T,A){for(var O=A^-1,M=0,P=T.length;M<P;)O=O>>>8^r[(O^T.charCodeAt(M++))&255];return~O}function b(T,A){for(var O=A^-1,M=T.length-15,P=0;P<M;)O=v[T[P++]^O&255]^w[T[P++]^O>>8&255]^g[T[P++]^O>>16&255]^y[T[P++]^O>>>24]^p[T[P++]]^m[T[P++]]^h[T[P++]]^d[T[P++]]^f[T[P++]]^u[T[P++]]^c[T[P++]]^l[T[P++]]^o[T[P++]]^s[T[P++]]^a[T[P++]]^r[T[P++]];for(M+=15;P<M;)O=O>>>8^r[(O^T[P++])&255];return~O}function S(T,A){for(var O=A^-1,M=0,P=T.length,N=0,V=0;M<P;)N=T.charCodeAt(M++),N<128?O=O>>>8^r[(O^N)&255]:N<2048?(O=O>>>8^r[(O^(192|N>>6&31))&255],O=O>>>8^r[(O^(128|N&63))&255]):N>=55296&&N<57344?(N=(N&1023)+64,V=T.charCodeAt(M++)&1023,O=O>>>8^r[(O^(240|N>>8&7))&255],O=O>>>8^r[(O^(128|N>>2&63))&255],O=O>>>8^r[(O^(128|V>>6&15|(N&3)<<4))&255],O=O>>>8^r[(O^(128|V&63))&255]):(O=O>>>8^r[(O^(224|N>>12&15))&255],O=O>>>8^r[(O^(128|N>>6&63))&255],O=O>>>8^r[(O^(128|N&63))&255]);return~O}return e.table=r,e.bstr=x,e.buf=b,e.str=S,e}(),jr=function(){var t={};t.version="1.2.1";function r(te,ge){for(var ce=te.split("/"),de=ge.split("/"),ye=0,we=0,ke=Math.min(ce.length,de.length);ye<ke;++ye){if(we=ce[ye].length-de[ye].length)return we;if(ce[ye]!=de[ye])return ce[ye]<de[ye]?-1:1}return ce.length-de.length}function n(te){if(te.charAt(te.length-1)=="/")return te.slice(0,-1).indexOf("/")===-1?te:n(te.slice(0,-1));var ge=te.lastIndexOf("/");return ge===-1?te:te.slice(0,ge+1)}function i(te){if(te.charAt(te.length-1)=="/")return i(te.slice(0,-1));var ge=te.lastIndexOf("/");return ge===-1?te:te.slice(ge+1)}function a(te,ge){typeof ge=="string"&&(ge=new Date(ge));var ce=ge.getHours();ce=ce<<6|ge.getMinutes(),ce=ce<<5|ge.getSeconds()>>>1,te.write_shift(2,ce);var de=ge.getFullYear()-1980;de=de<<4|ge.getMonth()+1,de=de<<5|ge.getDate(),te.write_shift(2,de)}function s(te){var ge=te.read_shift(2)&65535,ce=te.read_shift(2)&65535,de=new Date,ye=ce&31;ce>>>=5;var we=ce&15;ce>>>=4,de.setMilliseconds(0),de.setFullYear(ce+1980),de.setMonth(we-1),de.setDate(ye);var ke=ge&31;ge>>>=5;var je=ge&63;return ge>>>=6,de.setHours(ge),de.setMinutes(je),de.setSeconds(ke<<1),de}function o(te){ja(te,0);for(var ge={},ce=0;te.l<=te.length-4;){var de=te.read_shift(2),ye=te.read_shift(2),we=te.l+ye,ke={};switch(de){case 21589:ce=te.read_shift(1),ce&1&&(ke.mtime=te.read_shift(4)),ye>5&&(ce&2&&(ke.atime=te.read_shift(4)),ce&4&&(ke.ctime=te.read_shift(4))),ke.mtime&&(ke.mt=new Date(ke.mtime*1e3));break}te.l=we,ge[de]=ke}return ge}var l;function c(){return l||(l={})}function u(te,ge){if(te[0]==80&&te[1]==75)return ct(te,ge);if((te[0]|32)==109&&(te[1]|32)==105)return Wt(te,ge);if(te.length<512)throw new Error("CFB file size "+te.length+" < 512");var ce=3,de=512,ye=0,we=0,ke=0,je=0,Ce=0,Oe=[],Le=te.slice(0,512);ja(Le,0);var Je=f(Le);switch(ce=Je[0],ce){case 3:de=512;break;case 4:de=4096;break;case 0:if(Je[1]==0)return ct(te,ge);default:throw new Error("Major Version: Expected 3 or 4 saw "+ce)}de!==512&&(Le=te.slice(0,de),ja(Le,28));var gt=te.slice(0,de);d(Le,ce);var xt=Le.read_shift(4,"i");if(ce===3&&xt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xt);Le.l+=4,ke=Le.read_shift(4,"i"),Le.l+=4,Le.chk("00100000","Mini Stream Cutoff Size: "),je=Le.read_shift(4,"i"),ye=Le.read_shift(4,"i"),Ce=Le.read_shift(4,"i"),we=Le.read_shift(4,"i");for(var it=-1,wt=0;wt<109&&(it=Le.read_shift(4,"i"),!(it<0));++wt)Oe[wt]=it;var er=h(te,de);y(Ce,we,er,de,Oe);var fn=w(er,ke,Oe,de);fn[ke].name="!Directory",ye>0&&je!==V&&(fn[je].name="!MiniFAT"),fn[Oe[0]].name="!FAT",fn.fat_addrs=Oe,fn.ssz=de;var Pr={},ri=[],Zc=[],Hl=[];v(ke,fn,er,ri,ye,Pr,Zc,je),m(Zc,Hl,ri),ri.shift();var Jc={FileIndex:Zc,FullPaths:Hl};return ge&&ge.raw&&(Jc.raw={header:gt,sectors:er}),Jc}function f(te){if(te[te.l]==80&&te[te.l+1]==75)return[0,0];te.chk(B,"Header Signature: "),te.l+=16;var ge=te.read_shift(2,"u");return[te.read_shift(2,"u"),ge]}function d(te,ge){var ce=9;switch(te.l+=2,ce=te.read_shift(2)){case 9:if(ge!=3)throw new Error("Sector Shift: Expected 9 saw "+ce);break;case 12:if(ge!=4)throw new Error("Sector Shift: Expected 12 saw "+ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ce)}te.chk("0600","Mini Sector Shift: "),te.chk("000000000000","Reserved: ")}function h(te,ge){for(var ce=Math.ceil(te.length/ge)-1,de=[],ye=1;ye<ce;++ye)de[ye-1]=te.slice(ye*ge,(ye+1)*ge);return de[ce-1]=te.slice(ce*ge),de}function m(te,ge,ce){for(var de=0,ye=0,we=0,ke=0,je=0,Ce=ce.length,Oe=[],Le=[];de<Ce;++de)Oe[de]=Le[de]=de,ge[de]=ce[de];for(;je<Le.length;++je)de=Le[je],ye=te[de].L,we=te[de].R,ke=te[de].C,Oe[de]===de&&(ye!==-1&&Oe[ye]!==ye&&(Oe[de]=Oe[ye]),we!==-1&&Oe[we]!==we&&(Oe[de]=Oe[we])),ke!==-1&&(Oe[ke]=de),ye!==-1&&de!=Oe[de]&&(Oe[ye]=Oe[de],Le.lastIndexOf(ye)<je&&Le.push(ye)),we!==-1&&de!=Oe[de]&&(Oe[we]=Oe[de],Le.lastIndexOf(we)<je&&Le.push(we));for(de=1;de<Ce;++de)Oe[de]===de&&(we!==-1&&Oe[we]!==we?Oe[de]=Oe[we]:ye!==-1&&Oe[ye]!==ye&&(Oe[de]=Oe[ye]));for(de=1;de<Ce;++de)if(te[de].type!==0){if(je=de,je!=Oe[je])do je=Oe[je],ge[de]=ge[je]+"/"+ge[de];while(je!==0&&Oe[je]!==-1&&je!=Oe[je]);Oe[de]=-1}for(ge[0]+="/",de=1;de<Ce;++de)te[de].type!==2&&(ge[de]+="/")}function p(te,ge,ce){for(var de=te.start,ye=te.size,we=[],ke=de;ce&&ye>0&&ke>=0;)we.push(ge.slice(ke*N,ke*N+N)),ye-=N,ke=f0(ce,ke*4);return we.length===0?na(0):mh(we).slice(0,te.size)}function y(te,ge,ce,de,ye){var we=V;if(te===V){if(ge!==0)throw new Error("DIFAT chain shorter than expected")}else if(te!==-1){var ke=ce[te],je=(de>>>2)-1;if(!ke)return;for(var Ce=0;Ce<je&&(we=f0(ke,Ce*4))!==V;++Ce)ye.push(we);y(f0(ke,de-4),ge-1,ce,de,ye)}}function g(te,ge,ce,de,ye){var we=[],ke=[];ye||(ye=[]);var je=de-1,Ce=0,Oe=0;for(Ce=ge;Ce>=0;){ye[Ce]=!0,we[we.length]=Ce,ke.push(te[Ce]);var Le=ce[Math.floor(Ce*4/de)];if(Oe=Ce*4&je,de<4+Oe)throw new Error("FAT boundary crossed: "+Ce+" 4 "+de);if(!te[Le])break;Ce=f0(te[Le],Oe)}return{nodes:we,data:RX([ke])}}function w(te,ge,ce,de){var ye=te.length,we=[],ke=[],je=[],Ce=[],Oe=de-1,Le=0,Je=0,gt=0,xt=0;for(Le=0;Le<ye;++Le)if(je=[],gt=Le+ge,gt>=ye&&(gt-=ye),!ke[gt]){Ce=[];var it=[];for(Je=gt;Je>=0;){it[Je]=!0,ke[Je]=!0,je[je.length]=Je,Ce.push(te[Je]);var wt=ce[Math.floor(Je*4/de)];if(xt=Je*4&Oe,de<4+xt)throw new Error("FAT boundary crossed: "+Je+" 4 "+de);if(!te[wt]||(Je=f0(te[wt],xt),it[Je]))break}we[gt]={nodes:je,data:RX([Ce])}}return we}function v(te,ge,ce,de,ye,we,ke,je){for(var Ce=0,Oe=de.length?2:0,Le=ge[te].data,Je=0,gt=0,xt;Je<Le.length;Je+=128){var it=Le.slice(Je,Je+128);ja(it,64),gt=it.read_shift(2),xt=LB(it,0,gt-Oe),de.push(xt);var wt={name:xt,type:it.read_shift(1),color:it.read_shift(1),L:it.read_shift(4,"i"),R:it.read_shift(4,"i"),C:it.read_shift(4,"i"),clsid:it.read_shift(16),state:it.read_shift(4,"i"),start:0,size:0},er=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);er!==0&&(wt.ct=x(it,it.l-8));var fn=it.read_shift(2)+it.read_shift(2)+it.read_shift(2)+it.read_shift(2);fn!==0&&(wt.mt=x(it,it.l-8)),wt.start=it.read_shift(4,"i"),wt.size=it.read_shift(4,"i"),wt.size<0&&wt.start<0&&(wt.size=wt.type=0,wt.start=V,wt.name=""),wt.type===5?(Ce=wt.start,ye>0&&Ce!==V&&(ge[Ce].name="!StreamData")):wt.size>=4096?(wt.storage="fat",ge[wt.start]===void 0&&(ge[wt.start]=g(ce,wt.start,ge.fat_addrs,ge.ssz)),ge[wt.start].name=wt.name,wt.content=ge[wt.start].data.slice(0,wt.size)):(wt.storage="minifat",wt.size<0?wt.size=0:Ce!==V&&wt.start!==V&&ge[Ce]&&(wt.content=p(wt,ge[Ce].data,(ge[je]||{}).data))),wt.content&&ja(wt.content,0),we[xt]=wt,ke.push(wt)}}function x(te,ge){return new Date((Do(te,ge+4)/1e7*Math.pow(2,32)+Do(te,ge)/1e7-11644473600)*1e3)}function b(te,ge){return c(),u(l.readFileSync(te),ge)}function S(te,ge){var ce=ge&&ge.type;switch(ce||Rr&&Buffer.isBuffer(te)&&(ce="buffer"),ce||"base64"){case"file":return b(te,ge);case"base64":return u(Sc(Jo(te)),ge);case"binary":return u(Sc(te),ge)}return u(te,ge)}function T(te,ge){var ce=ge||{},de=ce.root||"Root Entry";if(te.FullPaths||(te.FullPaths=[]),te.FileIndex||(te.FileIndex=[]),te.FullPaths.length!==te.FileIndex.length)throw new Error("inconsistent CFB structure");te.FullPaths.length===0&&(te.FullPaths[0]=de+"/",te.FileIndex[0]={name:de,type:5}),ce.CLSID&&(te.FileIndex[0].clsid=ce.CLSID),A(te)}function A(te){var ge="Sh33tJ5";if(!jr.find(te,"/"+ge)){var ce=na(4);ce[0]=55,ce[1]=ce[3]=50,ce[2]=54,te.FileIndex.push({name:ge,type:2,content:ce,size:4,L:69,R:69,C:69}),te.FullPaths.push(te.FullPaths[0]+ge),O(te)}}function O(te,ge){T(te);for(var ce=!1,de=!1,ye=te.FullPaths.length-1;ye>=0;--ye){var we=te.FileIndex[ye];switch(we.type){case 0:de?ce=!0:(te.FileIndex.pop(),te.FullPaths.pop());break;case 1:case 2:case 5:de=!0,isNaN(we.R*we.L*we.C)&&(ce=!0),we.R>-1&&we.L>-1&&we.R==we.L&&(ce=!0);break;default:ce=!0;break}}if(!(!ce&&!ge)){var ke=new Date(1987,1,19),je=0,Ce=Object.create?Object.create(null):{},Oe=[];for(ye=0;ye<te.FullPaths.length;++ye)Ce[te.FullPaths[ye]]=!0,te.FileIndex[ye].type!==0&&Oe.push([te.FullPaths[ye],te.FileIndex[ye]]);for(ye=0;ye<Oe.length;++ye){var Le=n(Oe[ye][0]);de=Ce[Le],de||(Oe.push([Le,{name:i(Le).replace("/",""),type:1,clsid:Z,ct:ke,mt:ke,content:null}]),Ce[Le]=!0)}for(Oe.sort(function(xt,it){return r(xt[0],it[0])}),te.FullPaths=[],te.FileIndex=[],ye=0;ye<Oe.length;++ye)te.FullPaths[ye]=Oe[ye][0],te.FileIndex[ye]=Oe[ye][1];for(ye=0;ye<Oe.length;++ye){var Je=te.FileIndex[ye],gt=te.FullPaths[ye];if(Je.name=i(gt).replace("/",""),Je.L=Je.R=Je.C=-(Je.color=1),Je.size=Je.content?Je.content.length:0,Je.start=0,Je.clsid=Je.clsid||Z,ye===0)Je.C=Oe.length>1?1:-1,Je.size=0,Je.type=5;else if(gt.slice(-1)=="/"){for(je=ye+1;je<Oe.length&&n(te.FullPaths[je])!=gt;++je);for(Je.C=je>=Oe.length?-1:je,je=ye+1;je<Oe.length&&n(te.FullPaths[je])!=n(gt);++je);Je.R=je>=Oe.length?-1:je,Je.type=1}else n(te.FullPaths[ye+1]||"")==n(gt)&&(Je.R=ye+1),Je.type=2}}}function M(te,ge){var ce=ge||{};if(ce.fileType=="mad")return vs(te,ce);switch(O(te),ce.fileType){case"zip":return st(te,ce)}var de=function(xt){for(var it=0,wt=0,er=0;er<xt.FileIndex.length;++er){var fn=xt.FileIndex[er];if(fn.content){var Pr=fn.content.length;Pr>0&&(Pr<4096?it+=Pr+63>>6:wt+=Pr+511>>9)}}for(var ri=xt.FullPaths.length+3>>2,Zc=it+7>>3,Hl=it+127>>7,Jc=Zc+wt+ri+Hl,rl=Jc+127>>7,Td=rl<=109?0:Math.ceil((rl-109)/127);Jc+rl+Td+127>>7>rl;)Td=++rl<=109?0:Math.ceil((rl-109)/127);var Ai=[1,Td,rl,Hl,ri,wt,it,0];return xt.FileIndex[0].size=it<<6,Ai[7]=(xt.FileIndex[0].start=Ai[0]+Ai[1]+Ai[2]+Ai[3]+Ai[4]+Ai[5])+(Ai[6]+7>>3),Ai}(te),ye=na(de[7]<<9),we=0,ke=0;{for(we=0;we<8;++we)ye.write_shift(1,G[we]);for(we=0;we<8;++we)ye.write_shift(2,0);for(ye.write_shift(2,62),ye.write_shift(2,3),ye.write_shift(2,65534),ye.write_shift(2,9),ye.write_shift(2,6),we=0;we<3;++we)ye.write_shift(2,0);for(ye.write_shift(4,0),ye.write_shift(4,de[2]),ye.write_shift(4,de[0]+de[1]+de[2]+de[3]-1),ye.write_shift(4,0),ye.write_shift(4,4096),ye.write_shift(4,de[3]?de[0]+de[1]+de[2]-1:V),ye.write_shift(4,de[3]),ye.write_shift(-4,de[1]?de[0]-1:V),ye.write_shift(4,de[1]),we=0;we<109;++we)ye.write_shift(-4,we<de[2]?de[1]+we:-1)}if(de[1])for(ke=0;ke<de[1];++ke){for(;we<236+ke*127;++we)ye.write_shift(-4,we<de[2]?de[1]+we:-1);ye.write_shift(-4,ke===de[1]-1?V:ke+1)}var je=function(xt){for(ke+=xt;we<ke-1;++we)ye.write_shift(-4,we+1);xt&&(++we,ye.write_shift(-4,V))};for(ke=we=0,ke+=de[1];we<ke;++we)ye.write_shift(-4,J.DIFSECT);for(ke+=de[2];we<ke;++we)ye.write_shift(-4,J.FATSECT);je(de[3]),je(de[4]);for(var Ce=0,Oe=0,Le=te.FileIndex[0];Ce<te.FileIndex.length;++Ce)Le=te.FileIndex[Ce],Le.content&&(Oe=Le.content.length,!(Oe<4096)&&(Le.start=ke,je(Oe+511>>9)));for(je(de[6]+7>>3);ye.l&511;)ye.write_shift(-4,J.ENDOFCHAIN);for(ke=we=0,Ce=0;Ce<te.FileIndex.length;++Ce)Le=te.FileIndex[Ce],Le.content&&(Oe=Le.content.length,!(!Oe||Oe>=4096)&&(Le.start=ke,je(Oe+63>>6)));for(;ye.l&511;)ye.write_shift(-4,J.ENDOFCHAIN);for(we=0;we<de[4]<<2;++we){var Je=te.FullPaths[we];if(!Je||Je.length===0){for(Ce=0;Ce<17;++Ce)ye.write_shift(4,0);for(Ce=0;Ce<3;++Ce)ye.write_shift(4,-1);for(Ce=0;Ce<12;++Ce)ye.write_shift(4,0);continue}Le=te.FileIndex[we],we===0&&(Le.start=Le.size?Le.start-1:V);var gt=we===0&&ce.root||Le.name;if(Oe=2*(gt.length+1),ye.write_shift(64,gt,"utf16le"),ye.write_shift(2,Oe),ye.write_shift(1,Le.type),ye.write_shift(1,Le.color),ye.write_shift(-4,Le.L),ye.write_shift(-4,Le.R),ye.write_shift(-4,Le.C),Le.clsid)ye.write_shift(16,Le.clsid,"hex");else for(Ce=0;Ce<4;++Ce)ye.write_shift(4,0);ye.write_shift(4,Le.state||0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,0),ye.write_shift(4,Le.start),ye.write_shift(4,Le.size),ye.write_shift(4,0)}for(we=1;we<te.FileIndex.length;++we)if(Le=te.FileIndex[we],Le.size>=4096)if(ye.l=Le.start+1<<9,Rr&&Buffer.isBuffer(Le.content))Le.content.copy(ye,ye.l,0,Le.size),ye.l+=Le.size+511&-512;else{for(Ce=0;Ce<Le.size;++Ce)ye.write_shift(1,Le.content[Ce]);for(;Ce&511;++Ce)ye.write_shift(1,0)}for(we=1;we<te.FileIndex.length;++we)if(Le=te.FileIndex[we],Le.size>0&&Le.size<4096)if(Rr&&Buffer.isBuffer(Le.content))Le.content.copy(ye,ye.l,0,Le.size),ye.l+=Le.size+63&-64;else{for(Ce=0;Ce<Le.size;++Ce)ye.write_shift(1,Le.content[Ce]);for(;Ce&63;++Ce)ye.write_shift(1,0)}if(Rr)ye.l=ye.length;else for(;ye.l<ye.length;)ye.write_shift(1,0);return ye}function P(te,ge){var ce=te.FullPaths.map(function(Ce){return Ce.toUpperCase()}),de=ce.map(function(Ce){var Oe=Ce.split("/");return Oe[Oe.length-(Ce.slice(-1)=="/"?2:1)]}),ye=!1;ge.charCodeAt(0)===47?(ye=!0,ge=ce[0].slice(0,-1)+ge):ye=ge.indexOf("/")!==-1;var we=ge.toUpperCase(),ke=ye===!0?ce.indexOf(we):de.indexOf(we);if(ke!==-1)return te.FileIndex[ke];var je=!we.match(Zw);for(we=we.replace(Us,""),je&&(we=we.replace(Zw,"!")),ke=0;ke<ce.length;++ke)if((je?ce[ke].replace(Zw,"!"):ce[ke]).replace(Us,"")==we||(je?de[ke].replace(Zw,"!"):de[ke]).replace(Us,"")==we)return te.FileIndex[ke];return null}var N=64,V=-2,B="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:B,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Y(te,ge,ce){c();var de=M(te,ce);l.writeFileSync(ge,de)}function U(te){for(var ge=new Array(te.length),ce=0;ce<te.length;++ce)ge[ce]=String.fromCharCode(te[ce]);return ge.join("")}function se(te,ge){var ce=M(te,ge);switch(ge&&ge.type||"buffer"){case"file":return c(),l.writeFileSync(ge.filename,ce),ce;case"binary":return typeof ce=="string"?ce:U(ce);case"base64":return mX(typeof ce=="string"?ce:U(ce));case"buffer":if(Rr)return Buffer.isBuffer(ce)?ce:Rm(ce);case"array":return typeof ce=="string"?Sc(ce):ce}return ce}var ue;function I(te){try{var ge=te.InflateRaw,ce=new ge;if(ce._processChunk(new Uint8Array([3,0]),ce._finishFlushFlag),ce.bytesRead)ue=te;else throw new Error("zlib does not expose bytesRead")}catch(de){console.error("cannot use native zlib: "+(de.message||de))}}function z(te,ge){if(!ue)return Xr(te,ge);var ce=ue.InflateRaw,de=new ce,ye=de._processChunk(te.slice(te.l),de._finishFlushFlag);return te.l+=de.bytesRead,ye}function H(te){return ue?ue.deflateRawSync(te):pt(te)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],D=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function re(te){var ge=(te<<1|te<<11)&139536|(te<<5|te<<15)&558144;return(ge>>16|ge>>8|ge)&255}for(var K=typeof Uint8Array<"u",le=K?new Uint8Array(256):[],xe=0;xe<256;++xe)le[xe]=re(xe);function X(te,ge){var ce=le[te&255];return ge<=8?ce>>>8-ge:(ce=ce<<8|le[te>>8&255],ge<=16?ce>>>16-ge:(ce=ce<<8|le[te>>16&255],ce>>>24-ge))}function Ie(te,ge){var ce=ge&7,de=ge>>>3;return(te[de]|(ce<=6?0:te[de+1]<<8))>>>ce&3}function Re(te,ge){var ce=ge&7,de=ge>>>3;return(te[de]|(ce<=5?0:te[de+1]<<8))>>>ce&7}function ie(te,ge){var ce=ge&7,de=ge>>>3;return(te[de]|(ce<=4?0:te[de+1]<<8))>>>ce&15}function Te(te,ge){var ce=ge&7,de=ge>>>3;return(te[de]|(ce<=3?0:te[de+1]<<8))>>>ce&31}function Me(te,ge){var ce=ge&7,de=ge>>>3;return(te[de]|(ce<=1?0:te[de+1]<<8))>>>ce&127}function tt(te,ge,ce){var de=ge&7,ye=ge>>>3,we=(1<<ce)-1,ke=te[ye]>>>de;return ce<8-de||(ke|=te[ye+1]<<8-de,ce<16-de)||(ke|=te[ye+2]<<16-de,ce<24-de)||(ke|=te[ye+3]<<24-de),ke&we}function $e(te,ge,ce){var de=ge&7,ye=ge>>>3;return de<=5?te[ye]|=(ce&7)<<de:(te[ye]|=ce<<de&255,te[ye+1]=(ce&7)>>8-de),ge+3}function De(te,ge,ce){var de=ge&7,ye=ge>>>3;return ce=(ce&1)<<de,te[ye]|=ce,ge+1}function nt(te,ge,ce){var de=ge&7,ye=ge>>>3;return ce<<=de,te[ye]|=ce&255,ce>>>=8,te[ye+1]=ce,ge+8}function qe(te,ge,ce){var de=ge&7,ye=ge>>>3;return ce<<=de,te[ye]|=ce&255,ce>>>=8,te[ye+1]=ce&255,te[ye+2]=ce>>>8,ge+16}function Ue(te,ge){var ce=te.length,de=2*ce>ge?2*ce:ge+5,ye=0;if(ce>=ge)return te;if(Rr){var we=gX(de);if(te.copy)te.copy(we);else for(;ye<te.length;++ye)we[ye]=te[ye];return we}else if(K){var ke=new Uint8Array(de);if(ke.set)ke.set(te);else for(;ye<ce;++ye)ke[ye]=te[ye];return ke}return te.length=de,te}function Qe(te){for(var ge=new Array(te),ce=0;ce<te;++ce)ge[ce]=0;return ge}function Ge(te,ge,ce){var de=1,ye=0,we=0,ke=0,je=0,Ce=te.length,Oe=K?new Uint16Array(32):Qe(32);for(we=0;we<32;++we)Oe[we]=0;for(we=Ce;we<ce;++we)te[we]=0;Ce=te.length;var Le=K?new Uint16Array(Ce):Qe(Ce);for(we=0;we<Ce;++we)Oe[ye=te[we]]++,de<ye&&(de=ye),Le[we]=0;for(Oe[0]=0,we=1;we<=de;++we)Oe[we+16]=je=je+Oe[we-1]<<1;for(we=0;we<Ce;++we)je=te[we],je!=0&&(Le[we]=Oe[je+16]++);var Je=0;for(we=0;we<Ce;++we)if(Je=te[we],Je!=0)for(je=X(Le[we],de)>>de-Je,ke=(1<<de+4-Je)-1;ke>=0;--ke)ge[je|ke<<Je]=Je&15|we<<4;return de}var Fe=K?new Uint16Array(512):Qe(512),at=K?new Uint16Array(32):Qe(32);if(!K){for(var Ze=0;Ze<512;++Ze)Fe[Ze]=0;for(Ze=0;Ze<32;++Ze)at[Ze]=0}(function(){for(var te=[],ge=0;ge<32;ge++)te.push(5);Ge(te,at,32);var ce=[];for(ge=0;ge<=143;ge++)ce.push(8);for(;ge<=255;ge++)ce.push(9);for(;ge<=279;ge++)ce.push(7);for(;ge<=287;ge++)ce.push(8);Ge(ce,Fe,288)})();var ft=function(){for(var ge=K?new Uint8Array(32768):[],ce=0,de=0;ce<D.length-1;++ce)for(;de<D[ce+1];++de)ge[de]=ce;for(;de<32768;++de)ge[de]=29;var ye=K?new Uint8Array(259):[];for(ce=0,de=0;ce<F.length-1;++ce)for(;de<F[ce+1];++de)ye[de]=ce;function we(je,Ce){for(var Oe=0;Oe<je.length;){var Le=Math.min(65535,je.length-Oe),Je=Oe+Le==je.length;for(Ce.write_shift(1,+Je),Ce.write_shift(2,Le),Ce.write_shift(2,~Le&65535);Le-- >0;)Ce[Ce.l++]=je[Oe++]}return Ce.l}function ke(je,Ce){for(var Oe=0,Le=0,Je=K?new Uint16Array(32768):[];Le<je.length;){var gt=Math.min(65535,je.length-Le);if(gt<10){for(Oe=$e(Ce,Oe,+(Le+gt==je.length)),Oe&7&&(Oe+=8-(Oe&7)),Ce.l=Oe/8|0,Ce.write_shift(2,gt),Ce.write_shift(2,~gt&65535);gt-- >0;)Ce[Ce.l++]=je[Le++];Oe=Ce.l*8;continue}Oe=$e(Ce,Oe,+(Le+gt==je.length)+2);for(var xt=0;gt-- >0;){var it=je[Le];xt=(xt<<5^it)&32767;var wt=-1,er=0;if((wt=Je[xt])&&(wt|=Le&-32768,wt>Le&&(wt-=32768),wt<Le))for(;je[wt+er]==je[Le+er]&&er<250;)++er;if(er>2){it=ye[er],it<=22?Oe=nt(Ce,Oe,le[it+1]>>1)-1:(nt(Ce,Oe,3),Oe+=5,nt(Ce,Oe,le[it-23]>>5),Oe+=3);var fn=it<8?0:it-4>>2;fn>0&&(qe(Ce,Oe,er-F[it]),Oe+=fn),it=ge[Le-wt],Oe=nt(Ce,Oe,le[it]>>3),Oe-=3;var Pr=it<4?0:it-2>>1;Pr>0&&(qe(Ce,Oe,Le-wt-D[it]),Oe+=Pr);for(var ri=0;ri<er;++ri)Je[xt]=Le&32767,xt=(xt<<5^je[Le])&32767,++Le;gt-=er-1}else it<=143?it=it+48:Oe=De(Ce,Oe,1),Oe=nt(Ce,Oe,le[it]),Je[xt]=Le&32767,++Le}Oe=nt(Ce,Oe,0)-1}return Ce.l=(Oe+7)/8|0,Ce.l}return function(Ce,Oe){return Ce.length<8?we(Ce,Oe):ke(Ce,Oe)}}();function pt(te){var ge=na(50+Math.floor(te.length*1.1)),ce=ft(te,ge);return ge.slice(0,ce)}var yt=K?new Uint16Array(32768):Qe(32768),Or=K?new Uint16Array(32768):Qe(32768),qt=K?new Uint16Array(128):Qe(128),Jt=1,cr=1;function un(te,ge){var ce=Te(te,ge)+257;ge+=5;var de=Te(te,ge)+1;ge+=5;var ye=ie(te,ge)+4;ge+=4;for(var we=0,ke=K?new Uint8Array(19):Qe(19),je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ce=1,Oe=K?new Uint8Array(8):Qe(8),Le=K?new Uint8Array(8):Qe(8),Je=ke.length,gt=0;gt<ye;++gt)ke[q[gt]]=we=Re(te,ge),Ce<we&&(Ce=we),Oe[we]++,ge+=3;var xt=0;for(Oe[0]=0,gt=1;gt<=Ce;++gt)Le[gt]=xt=xt+Oe[gt-1]<<1;for(gt=0;gt<Je;++gt)(xt=ke[gt])!=0&&(je[gt]=Le[xt]++);var it=0;for(gt=0;gt<Je;++gt)if(it=ke[gt],it!=0){xt=le[je[gt]]>>8-it;for(var wt=(1<<7-it)-1;wt>=0;--wt)qt[xt|wt<<it]=it&7|gt<<3}var er=[];for(Ce=1;er.length<ce+de;)switch(xt=qt[Me(te,ge)],ge+=xt&7,xt>>>=3){case 16:for(we=3+Ie(te,ge),ge+=2,xt=er[er.length-1];we-- >0;)er.push(xt);break;case 17:for(we=3+Re(te,ge),ge+=3;we-- >0;)er.push(0);break;case 18:for(we=11+Me(te,ge),ge+=7;we-- >0;)er.push(0);break;default:er.push(xt),Ce<xt&&(Ce=xt);break}var fn=er.slice(0,ce),Pr=er.slice(ce);for(gt=ce;gt<286;++gt)fn[gt]=0;for(gt=de;gt<30;++gt)Pr[gt]=0;return Jt=Ge(fn,yt,286),cr=Ge(Pr,Or,30),ge}function Ut(te,ge){if(te[0]==3&&!(te[1]&3))return[ap(ge),2];for(var ce=0,de=0,ye=gX(ge||1<<18),we=0,ke=ye.length>>>0,je=0,Ce=0;!(de&1);){if(de=Re(te,ce),ce+=3,de>>>1)de>>1==1?(je=9,Ce=5):(ce=un(te,ce),je=Jt,Ce=cr);else{ce&7&&(ce+=8-(ce&7));var Oe=te[ce>>>3]|te[(ce>>>3)+1]<<8;if(ce+=32,Oe>0)for(!ge&&ke<we+Oe&&(ye=Ue(ye,we+Oe),ke=ye.length);Oe-- >0;)ye[we++]=te[ce>>>3],ce+=8;continue}for(;;){!ge&&ke<we+32767&&(ye=Ue(ye,we+32767),ke=ye.length);var Le=tt(te,ce,je),Je=de>>>1==1?Fe[Le]:yt[Le];if(ce+=Je&15,Je>>>=4,!(Je>>>8&255))ye[we++]=Je;else{if(Je==256)break;Je-=257;var gt=Je<8?0:Je-4>>2;gt>5&&(gt=0);var xt=we+F[Je];gt>0&&(xt+=tt(te,ce,gt),ce+=gt),Le=tt(te,ce,Ce),Je=de>>>1==1?at[Le]:Or[Le],ce+=Je&15,Je>>>=4;var it=Je<4?0:Je-2>>1,wt=D[Je];for(it>0&&(wt+=tt(te,ce,it),ce+=it),!ge&&ke<xt&&(ye=Ue(ye,xt+100),ke=ye.length);we<xt;)ye[we]=ye[we-wt],++we}}}return ge?[ye,ce+7>>>3]:[ye.slice(0,we),ce+7>>>3]}function Xr(te,ge){var ce=te.slice(te.l||0),de=Ut(ce,ge);return te.l+=de[1],de[0]}function Kt(te,ge){if(te)typeof console<"u"&&console.error(ge);else throw new Error(ge)}function ct(te,ge){var ce=te;ja(ce,0);var de=[],ye=[],we={FileIndex:de,FullPaths:ye};T(we,{root:ge.root});for(var ke=ce.length-4;(ce[ke]!=80||ce[ke+1]!=75||ce[ke+2]!=5||ce[ke+3]!=6)&&ke>=0;)--ke;ce.l=ke+4,ce.l+=4;var je=ce.read_shift(2);ce.l+=6;var Ce=ce.read_shift(4);for(ce.l=Ce,ke=0;ke<je;++ke){ce.l+=20;var Oe=ce.read_shift(4),Le=ce.read_shift(4),Je=ce.read_shift(2),gt=ce.read_shift(2),xt=ce.read_shift(2);ce.l+=8;var it=ce.read_shift(4),wt=o(ce.slice(ce.l+Je,ce.l+Je+gt));ce.l+=Je+gt+xt;var er=ce.l;ce.l=it+4,Vt(ce,Oe,Le,we,wt),ce.l=er}return we}function Vt(te,ge,ce,de,ye){te.l+=2;var we=te.read_shift(2),ke=te.read_shift(2),je=s(te);if(we&8257)throw new Error("Unsupported ZIP encryption");for(var Ce=te.read_shift(4),Oe=te.read_shift(4),Le=te.read_shift(4),Je=te.read_shift(2),gt=te.read_shift(2),xt="",it=0;it<Je;++it)xt+=String.fromCharCode(te[te.l++]);if(gt){var wt=o(te.slice(te.l,te.l+gt));(wt[21589]||{}).mt&&(je=wt[21589].mt),((ye||{})[21589]||{}).mt&&(je=ye[21589].mt)}te.l+=gt;var er=te.slice(te.l,te.l+Oe);switch(ke){case 8:er=z(te,Le);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ke)}var fn=!1;we&8&&(Ce=te.read_shift(4),Ce==134695760&&(Ce=te.read_shift(4),fn=!0),Oe=te.read_shift(4),Le=te.read_shift(4)),Oe!=ge&&Kt(fn,"Bad compressed size: "+ge+" != "+Oe),Le!=ce&&Kt(fn,"Bad uncompressed size: "+ce+" != "+Le),Ha(de,xt,er,{unsafe:!0,mt:je})}function st(te,ge){var ce=ge||{},de=[],ye=[],we=na(1),ke=ce.compression?8:0,je=0,Ce=0,Oe=0,Le=0,Je=0,gt=te.FullPaths[0],xt=gt,it=te.FileIndex[0],wt=[],er=0;for(Ce=1;Ce<te.FullPaths.length;++Ce)if(xt=te.FullPaths[Ce].slice(gt.length),it=te.FileIndex[Ce],!(!it.size||!it.content||xt=="Sh33tJ5")){var fn=Le,Pr=na(xt.length);for(Oe=0;Oe<xt.length;++Oe)Pr.write_shift(1,xt.charCodeAt(Oe)&127);Pr=Pr.slice(0,Pr.l),wt[Je]=Mbt.buf(it.content,0);var ri=it.content;ke==8&&(ri=H(ri)),we=na(30),we.write_shift(4,67324752),we.write_shift(2,20),we.write_shift(2,je),we.write_shift(2,ke),it.mt?a(we,it.mt):we.write_shift(4,0),we.write_shift(-4,wt[Je]),we.write_shift(4,ri.length),we.write_shift(4,it.content.length),we.write_shift(2,Pr.length),we.write_shift(2,0),Le+=we.length,de.push(we),Le+=Pr.length,de.push(Pr),Le+=ri.length,de.push(ri),we=na(46),we.write_shift(4,33639248),we.write_shift(2,0),we.write_shift(2,20),we.write_shift(2,je),we.write_shift(2,ke),we.write_shift(4,0),we.write_shift(-4,wt[Je]),we.write_shift(4,ri.length),we.write_shift(4,it.content.length),we.write_shift(2,Pr.length),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(4,0),we.write_shift(4,fn),er+=we.l,ye.push(we),er+=Pr.length,ye.push(Pr),++Je}return we=na(22),we.write_shift(4,101010256),we.write_shift(2,0),we.write_shift(2,0),we.write_shift(2,Je),we.write_shift(2,Je),we.write_shift(4,er),we.write_shift(4,Le),we.write_shift(2,0),mh([mh(de),mh(ye),we])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ir(te,ge){if(te.ctype)return te.ctype;var ce=te.name||"",de=ce.match(/\.([^\.]+)$/);return de&&dt[de[1]]||ge&&(de=(ce=ge).match(/[\.\\]([^\.\\])+$/),de&&dt[de[1]])?dt[de[1]]:"application/octet-stream"}function ur(te){for(var ge=mX(te),ce=[],de=0;de<ge.length;de+=76)ce.push(ge.slice(de,de+76));return ce.join(`\r
`)+`\r
`}function Si(te){var ge=te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Oe){var Le=Oe.charCodeAt(0).toString(16).toUpperCase();return"="+(Le.length==1?"0"+Le:Le)});ge=ge.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ge.charAt(0)==`
`&&(ge="=0D"+ge.slice(1)),ge=ge.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ce=[],de=ge.split(`\r
`),ye=0;ye<de.length;++ye){var we=de[ye];if(we.length==0){ce.push("");continue}for(var ke=0;ke<we.length;){var je=76,Ce=we.slice(ke,ke+je);Ce.charAt(je-1)=="="?je--:Ce.charAt(je-2)=="="?je-=2:Ce.charAt(je-3)=="="&&(je-=3),Ce=we.slice(ke,ke+je),ke+=je,ke<we.length&&(Ce+="="),ce.push(Ce)}}return ce.join(`\r
`)}function go(te){for(var ge=[],ce=0;ce<te.length;++ce){for(var de=te[ce];ce<=te.length&&de.charAt(de.length-1)=="=";)de=de.slice(0,de.length-1)+te[++ce];ge.push(de)}for(var ye=0;ye<ge.length;++ye)ge[ye]=ge[ye].replace(/[=][0-9A-Fa-f]{2}/g,function(we){return String.fromCharCode(parseInt(we.slice(1),16))});return Sc(ge.join(`\r
`))}function Ks(te,ge,ce){for(var de="",ye="",we="",ke,je=0;je<10;++je){var Ce=ge[je];if(!Ce||Ce.match(/^\s*$/))break;var Oe=Ce.match(/^(.*?):\s*([^\s].*)$/);if(Oe)switch(Oe[1].toLowerCase()){case"content-location":de=Oe[2].trim();break;case"content-type":we=Oe[2].trim();break;case"content-transfer-encoding":ye=Oe[2].trim();break}}switch(++je,ye.toLowerCase()){case"base64":ke=Sc(Jo(ge.slice(je).join("")));break;case"quoted-printable":ke=go(ge.slice(je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ye)}var Le=Ha(te,de.slice(ce.length),ke,{unsafe:!0});we&&(Le.ctype=we)}function Wt(te,ge){if(U(te.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ce=ge&&ge.root||"",de=(Rr&&Buffer.isBuffer(te)?te.toString("binary"):U(te)).split(`\r
`),ye=0,we="";for(ye=0;ye<de.length;++ye)if(we=de[ye],!!/^Content-Location:/i.test(we)&&(we=we.slice(we.indexOf("file")),ce||(ce=we.slice(0,we.lastIndexOf("/")+1)),we.slice(0,ce.length)!=ce))for(;ce.length>0&&(ce=ce.slice(0,ce.length-1),ce=ce.slice(0,ce.lastIndexOf("/")+1),we.slice(0,ce.length)!=ce););var ke=(de[1]||"").match(/boundary="(.*?)"/);if(!ke)throw new Error("MAD cannot find boundary");var je="--"+(ke[1]||""),Ce=[],Oe=[],Le={FileIndex:Ce,FullPaths:Oe};T(Le);var Je,gt=0;for(ye=0;ye<de.length;++ye){var xt=de[ye];xt!==je&&xt!==je+"--"||(gt++&&Ks(Le,de.slice(Je,ye),ce),Je=ye)}return Le}function vs(te,ge){var ce=ge||{},de=ce.boundary||"SheetJS";de="------="+de;for(var ye=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+de.slice(2)+'"',"","",""],we=te.FullPaths[0],ke=we,je=te.FileIndex[0],Ce=1;Ce<te.FullPaths.length;++Ce)if(ke=te.FullPaths[Ce].slice(we.length),je=te.FileIndex[Ce],!(!je.size||!je.content||ke=="Sh33tJ5")){ke=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(er){return"_x"+er.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(er){return"_u"+er.charCodeAt(0).toString(16)+"_"});for(var Oe=je.content,Le=Rr&&Buffer.isBuffer(Oe)?Oe.toString("binary"):U(Oe),Je=0,gt=Math.min(1024,Le.length),xt=0,it=0;it<=gt;++it)(xt=Le.charCodeAt(it))>=32&&xt<128&&++Je;var wt=Je>=gt*4/5;ye.push(de),ye.push("Content-Location: "+(ce.root||"file:///C:/SheetJS/")+ke),ye.push("Content-Transfer-Encoding: "+(wt?"quoted-printable":"base64")),ye.push("Content-Type: "+ir(je,ke)),ye.push(""),ye.push(wt?Si(Le):ur(Le))}return ye.push(de+`--\r
`),ye.join(`\r
`)}function Wl(te){var ge={};return T(ge,te),ge}function Ha(te,ge,ce,de){var ye=de&&de.unsafe;ye||T(te);var we=!ye&&jr.find(te,ge);if(!we){var ke=te.FullPaths[0];ge.slice(0,ke.length)==ke?ke=ge:(ke.slice(-1)!="/"&&(ke+="/"),ke=(ke+ge).replace("//","/")),we={name:i(ge),type:2},te.FileIndex.push(we),te.FullPaths.push(ke),ye||jr.utils.cfb_gc(te)}return we.content=ce,we.size=ce?ce.length:0,de&&(de.CLSID&&(we.clsid=de.CLSID),de.mt&&(we.mt=de.mt),de.ct&&(we.ct=de.ct)),we}function Ys(te,ge){T(te);var ce=jr.find(te,ge);if(ce){for(var de=0;de<te.FileIndex.length;++de)if(te.FileIndex[de]==ce)return te.FileIndex.splice(de,1),te.FullPaths.splice(de,1),!0}return!1}function Un(te,ge,ce){T(te);var de=jr.find(te,ge);if(de){for(var ye=0;ye<te.FileIndex.length;++ye)if(te.FileIndex[ye]==de)return te.FileIndex[ye].name=i(ce),te.FullPaths[ye]=ce,!0}return!1}function Ei(te){O(te,!0)}return t.find=P,t.read=S,t.parse=u,t.write=se,t.writeFile=Y,t.utils={cfb_new:Wl,cfb_add:Ha,cfb_del:Ys,cfb_mov:Un,cfb_gc:Ei,ReadShift:Px,CheckField:Pge,prep_blob:ja,bconcat:mh,use_zlib:I,_deflateRaw:pt,_inflateRaw:Xr,consts:J},t}();function Dbt(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Vu(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function PB(e){for(var t=[],r=Vu(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}var L5=new Date(1899,11,30,0,0,0);function Vs(e,t){var r=e.getTime(),n=L5.getTime()+(e.getTimezoneOffset()-L5.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var cge=new Date,jbt=L5.getTime()+(cge.getTimezoneOffset()-L5.getTimezoneOffset())*6e4,EX=cge.getTimezoneOffset();function hP(e){var t=new Date;return t.setTime(e*24*60*60*1e3+jbt),t.getTimezoneOffset()!==EX&&t.setTime(t.getTime()+(t.getTimezoneOffset()-EX)*6e4),t}function $bt(e){var t=0,r=0,n=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=i.length;++a)if(i[a]){switch(r=1,a>3&&(n=!0),i[a].slice(i[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[a].slice(i[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(i[a],10)}return t}var AX=new Date("2017-02-19T19:06:09.000Z"),uge=isNaN(AX.getFullYear())?new Date("2/19/17"):AX,Fbt=uge.getFullYear()==2017;function Sa(e,t){var r=new Date(e);if(Fbt)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(uge.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function ym(e,t){if(Rr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Qw(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Qw(Xme(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Qw(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Qw(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],i=0;i!=e.length;++i)n.push(String.fromCharCode(e[i]));return n.join("")}function Ua(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ua(e[r]));return t}function fi(e,t){for(var r="";r.length<t;)r+=e;return r}function Lc(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var Bbt=["january","february","march","april","may","june","july","august","september","october","november","december"];function Uv(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),i=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var s=e.toLowerCase();if(s.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(s=s.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),s.length>3&&Bbt.indexOf(s)==-1)return r}else if(s.match(/[a-z]/))return r;return n<0||n>8099?r:(i>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Ubt=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,i){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),s=[a[0]],o=1;o<a.length;++o)s.push(i),s.push(a[o]);return s}}();function fge(e){return e?e.content&&e.type?ym(e.content,!0):e.data?Xw(e.data):e.asNodeBuffer&&Rr?Xw(e.asNodeBuffer().toString("binary")):e.asBinary?Xw(e.asBinary()):e._data&&e._data.getContent?Xw(ym(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function dge(e){if(!e)return null;if(e.data)return hX(e.data);if(e.asNodeBuffer&&Rr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?hX(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function zbt(e){return e&&e.name.slice(-4)===".bin"?dge(e):fge(e)}function gl(e,t){for(var r=e.FullPaths||Vu(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),i=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var s=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==s||i==s)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function NB(e,t){var r=gl(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ni(e,t,r){if(!r)return zbt(NB(e,t));if(!t)return null;try{return Ni(e,t)}catch{return null}}function Uo(e,t,r){if(!r)return fge(NB(e,t));if(!t)return null;try{return Uo(e,t)}catch{return null}}function Vbt(e,t,r){return dge(NB(e,t))}function TX(e){for(var t=e.FullPaths||Vu(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Wbt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Rr?n=Rm(r):n=cbt(r),jr.utils.cfb_add(e,t,n)}jr.utils.cfb_add(e,t,r)}else e.file(t,r)}function hge(e,t){switch(t.type){case"base64":return jr.read(e,{type:"base64"});case"binary":return jr.read(e,{type:"binary"});case"buffer":case"array":return jr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Jw(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var i=n.shift();i===".."?r.pop():i!=="."&&r.push(i)}return r.join("/")}var pge=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Hbt=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,kX=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Gbt=/<[^>]*>/g,ys=pge.match(kX)?kX:Gbt,qbt=/<\w*:/,Kbt=/<(\/?)\w+:/;function tr(e,t,r){for(var n={},i=0,a=0;i!==e.length&&!((a=e.charCodeAt(i))===32||a===10||a===13);++i);if(t||(n[0]=e.slice(0,i)),i===e.length)return n;var s=e.match(Hbt),o=0,l="",c=0,u="",f="",d=1;if(s)for(c=0;c!=s.length;++c){for(f=s[c],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(u=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(d=(i=f.charCodeAt(a+1))==34||i==39?1:0,l=f.slice(a+1+d,f.length-d),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=l,n[u.toLowerCase()]=l;else{var h=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(n[h]&&u.slice(o-3,o)=="ext")continue;n[h]=l,n[h.toLowerCase()]=l}}return n}function Xu(e){return e.replace(Kbt,"<$1")}var mge={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ybt=PB(mge),Wr=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var i=n+"",a=i.indexOf("<![CDATA[");if(a==-1)return i.replace(e,function(o,l){return mge[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var s=i.indexOf("]]>");return r(i.slice(0,a))+i.slice(a+9,s)+r(i.slice(s+3))}}(),Xbt=/[&<>'"]/g,Zbt=/[\u0000-\u001f]/g;function IB(e){var t=e+"";return t.replace(Xbt,function(r){return Ybt[r]}).replace(/\n/g,"<br/>").replace(Zbt,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var CX=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Wn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function WI(e){for(var t="",r=0,n=0,i=0,a=0,s=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(i=e.charCodeAt(r++),n>191&&n<224){s=(n&31)<<6,s|=i&63,t+=String.fromCharCode(s);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63);continue}s=e.charCodeAt(r++),o=((n&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function OX(e){var t=ap(2*e.length),r,n,i=1,a=0,s=0,o;for(n=0;n<e.length;n+=i)i=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),i=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),i=3):(i=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,s=55296+(r>>>10&1023),r=56320+(r&1023)),s!==0&&(t[a++]=s&255,t[a++]=s>>>8,s=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function PX(e){return Rm(e,"binary").toString("utf8")}var zE="foo bar baz",Pn=Rr&&(PX(zE)==WI(zE)&&PX||OX(zE)==WI(zE)&&OX)||WI,Qw=Rr?function(e){return Rm(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,i=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},R_=function(){var e={};return function(r,n){var i=r+"|"+(n||"");return e[i]?e[i]:e[i]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),gge=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<e.length;++i)n=n.replace(e[i][0],e[i][1]);return n}}(),Jbt=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Qbt=/<\/?(?:vt:)?variant>/g,e_t=/<(?:vt:)([^>]*)>([\s\S]*)</;function NX(e,t){var r=tr(e),n=e.match(Jbt(r.baseType))||[],i=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return i}return n.forEach(function(a){var s=a.replace(Qbt,"").match(e_t);s&&i.push({v:Pn(s[2]),t:s[1]})}),i}var t_t=/(^\s|\s$|\n)/;function r_t(e){return Vu(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function n_t(e,t,r){return"<"+e+(r!=null?r_t(r):"")+(t!=null?(t.match(t_t)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function RB(e){if(Rr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Pn(Lm(kB(e)));throw new Error("Bad input format: expected Buffer or string")}var L_=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,i_t={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},a_t=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function s_t(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,a=5;a>=0;--a)i=i*256+e[t+a];return n==2047?i==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),r*Math.pow(2,n-52)*i)}function o_t(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,i=0,a=0,s=n?-t:t;isFinite(s)?s==0?i=a=0:(i=Math.floor(Math.log(s)/Math.LN2),a=s*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(i&15)<<4|a&15,e[r+7]=i>>4|n}var IX=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var i=0,a=e[0][n].length;i<a;i+=r)t.push.apply(t,e[0][n].slice(i,i+r));return t},RX=Rr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Rm(t)})):IX(e)}:IX,LX=function(e,t,r){for(var n=[],i=t;i<r;i+=2)n.push(String.fromCharCode($f(e,i)));return n.join("").replace(Us,"")},LB=Rr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Us,""):LX(e,t,r)}:LX,MX=function(e,t,r){for(var n=[],i=t;i<t+r;++i)n.push(("0"+e[i].toString(16)).slice(-2));return n.join("")},yge=Rr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):MX(e,t,r)}:MX,DX=function(e,t,r){for(var n=[],i=t;i<r;i++)n.push(String.fromCharCode(Ig(e,i)));return n.join("")},$2=Rr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):DX(t,r,n)}:DX,vge=function(e,t){var r=Do(e,t);return r>0?$2(e,t+4,t+4+r-1):""},wge=vge,xge=function(e,t){var r=Do(e,t);return r>0?$2(e,t+4,t+4+r-1):""},bge=xge,_ge=function(e,t){var r=2*Do(e,t);return r>0?$2(e,t+4,t+4+r-1):""},Sge=_ge,Ege=function(t,r){var n=Do(t,r);return n>0?LB(t,r+4,r+4+n):""},Age=Ege,Tge=function(e,t){var r=Do(e,t);return r>0?$2(e,t+4,t+4+r):""},kge=Tge,Cge=function(e,t){return s_t(e,t)},M5=Cge,Oge=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Rr&&(wge=function(t,r){if(!Buffer.isBuffer(t))return vge(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},bge=function(t,r){if(!Buffer.isBuffer(t))return xge(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Sge=function(t,r){if(!Buffer.isBuffer(t))return _ge(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Age=function(t,r){if(!Buffer.isBuffer(t))return Ege(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},kge=function(t,r){if(!Buffer.isBuffer(t))return Tge(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},M5=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Cge(t,r)},Oge=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Ig=function(e,t){return e[t]},$f=function(e,t){return e[t+1]*256+e[t]},l_t=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Do=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},f0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},c_t=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Px(e,t){var r="",n,i,a=[],s,o,l,c;switch(t){case"dbcs":if(c=this.l,Rr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode($f(this,c)),c+=2;e*=2;break;case"utf8":r=$2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=LB(this,this.l,this.l+e);break;case"wstr":return Px.call(this,e,"dbcs");case"lpstr-ansi":r=wge(this,this.l),e=4+Do(this,this.l);break;case"lpstr-cp":r=bge(this,this.l),e=4+Do(this,this.l);break;case"lpwstr":r=Sge(this,this.l),e=4+2*Do(this,this.l);break;case"lpp4":e=4+Do(this,this.l),r=Age(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Do(this,this.l),r=kge(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(s=Ig(this,this.l+e++))!==0;)a.push(UE(s));r=a.join("");break;case"_wstr":for(e=0,r="";(s=$f(this,this.l+e))!==0;)a.push(UE(s)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=Ig(this,c),this.l=c+1,o=Px.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(UE($f(this,c))),c+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return s=Ig(this,c),this.l=c+1,o=Px.call(this,e-l,s?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(UE(Ig(this,c))),c+=1}r=a.join("");break;default:switch(e){case 1:return n=Ig(this,this.l),this.l++,n;case 2:return n=(t==="i"?l_t:$f)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?f0:c_t)(this,this.l),this.l+=4,n):(i=Do(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=M5(this,this.l):i=M5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:r=yge(this,this.l,e);break}}return this.l+=e,r}var u_t=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},f_t=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},d_t=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function h_t(e,t,r){var n=0,i=0;if(r==="dbcs"){for(i=0;i!=t.length;++i)d_t(this,t.charCodeAt(i),this.l+2*i);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;n=t.length}else if(r==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var s=t.charCodeAt(i);this[this.l++]=s&255,this[this.l++]=s>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,u_t(this,t,this.l);break;case 8:if(n=8,r==="f"){o_t(this,t,this.l);break}case 16:break;case-4:n=4,f_t(this,t,this.l);break}return this.l+=n,this}function Pge(e,t){var r=yge(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ja(e,t){e.l=t,e.read_shift=Px,e.chk=Pge,e.write_shift=h_t}function gs(e,t){e.l+=t}function na(e){var t=ap(e);return ja(t,0),t}function Ad(e,t,r){if(e){var n,i,a;ja(e,e.l||0);for(var s=e.length,o=0,l=0;e.l<s;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=U5[o]||U5[65535];for(n=e.read_shift(1),a=n&127,i=1;i<4&&n&128;++i)a+=((n=e.read_shift(1))&127)<<7*i;l=e.l+a;var u=c.f&&c.f(e,a,r);if(e.l=l,t(u,c,o))return}}}function WD(){var e=[],t=Rr?256:2048,r=function(c){var u=na(c);return ja(u,0),u},n=r(t),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(c){return n&&c<n.length-n.l?n:(i(),n=r(Math.max(c+1,t)))},s=function(){return i(),mh(e)},o=function(c){i(),n=c,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:s,_bufs:e}}function Nx(e,t,r){var n=Ua(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function jX(e,t,r){var n=Ua(e);return n.s=Nx(n.s,t.s,r),n.e=Nx(n.e,t.s,r),n}function Ix(e,t){if(e.cRel&&e.c<0)for(e=Ua(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ua(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=hr(e);return!e.cRel&&e.cRel!=null&&(r=g_t(r)),!e.rRel&&e.rRel!=null&&(r=p_t(r)),r}function HI(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ca(e.s.c)+":"+(e.e.cRel?"":"$")+ca(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+za(e.s.r)+":"+(e.e.rRel?"":"$")+za(e.e.r):Ix(e.s,t.biff)+":"+Ix(e.e,t.biff)}function MB(e){return parseInt(m_t(e),10)-1}function za(e){return""+(e+1)}function p_t(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function m_t(e){return e.replace(/\$(\d+)$/,"$1")}function DB(e){for(var t=y_t(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function ca(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function g_t(e){return e.replace(/^([A-Z])/,"$$$1")}function y_t(e){return e.replace(/^\$([A-Z])/,"$1")}function v_t(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ds(e){for(var t=0,r=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(r=26*r+(i-64))}return{c:r-1,r:t-1}}function hr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function C1(e){var t=e.indexOf(":");return t==-1?{s:Ds(e),e:Ds(e)}:{s:Ds(e.slice(0,t)),e:Ds(e.slice(t+1))}}function $r(e,t){return typeof t>"u"||typeof t=="number"?$r(e.s,e.e):(typeof e!="string"&&(e=hr(e)),typeof t!="string"&&(t=hr(t)),e==t?e:e+":"+t)}function hi(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,i=0,a=e.length;for(r=0;n<a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.s.c=--r,r=0;n<a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;if(t.s.r=--r,n===a||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((i=e.charCodeAt(n)-64)<1||i>26);++n)r=26*r+i;for(t.e.c=--r,r=0;n!=a&&!((i=e.charCodeAt(n)-48)<0||i>9);++n)r=10*r+i;return t.e.r=--r,t}function $X(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=$l(e.z,r?Vs(t):t)}catch{}try{return e.w=$l((e.XF||{}).numFmtId||(r?14:0),r?Vs(t):t)}catch{return""+t}}function dd(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?jm[e.v]||e.v:t==null?$X(e,e.v):$X(e,t))}function kp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Nge(e,t,r){var n=r||{},i=e?Array.isArray(e):n.dense,a=e||(i?[]:{}),s=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Ds(n.origin):n.origin;s=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var u=hi(a["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),s==-1&&(c.e.r=s=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[f].length;++d)if(!(typeof t[f][d]>"u")){var h={v:t[f][d]},m=s+f,p=o+d;if(c.s.r>m&&(c.s.r=m),c.s.c>p&&(c.s.c=p),c.e.r<m&&(c.e.r=m),c.e.c<p&&(c.e.c=p),t[f][d]&&typeof t[f][d]=="object"&&!Array.isArray(t[f][d])&&!(t[f][d]instanceof Date))h=t[f][d];else if(Array.isArray(h.v)&&(h.f=t[f][d][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||yr[14],n.cellDates?(h.t="d",h.w=$l(h.z,Vs(h.v))):(h.t="n",h.v=Vs(h.v),h.w=$l(h.z,h.v))):h.t="s";if(i)a[m]||(a[m]=[]),a[m][p]&&a[m][p].z&&(h.z=a[m][p].z),a[m][p]=h;else{var y=hr({c:p,r:m});a[y]&&a[y].z&&(h.z=a[y].z),a[y]=h}}}return c.s.c<1e7&&(a["!ref"]=$r(c)),a}function O1(e,t){return Nge(null,e,t)}function w_t(e){return e.read_shift(4,"i")}function ds(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function x_t(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function jB(e,t){var r=e.l,n=e.read_shift(1),i=ds(e),a=[],s={t:i,h:i};if(n&1){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(x_t(e));s.r=a}else s.r=[{ich:0,ifnt:0}];return e.l=r+t,s}var b_t=jB;function Vl(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Mm(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var __t=ds;function $B(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var S_t=ds,HD=$B;function FB(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var i=n===0?M5([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):f0(t,0)>>2;return r?i/100:i}function Ige(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Dm=Ige;function ls(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function E_t(e){var t={},r=e.read_shift(1),n=r>>>1,i=e.read_shift(1),a=e.read_shift(2,"i"),s=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=i;var c=z0[i];c&&(t.rgb=D_(c));break;case 2:t.rgb=D_([s,o,l]);break;case 3:t.theme=i;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function A_t(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Rge(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function T_t(e){return Rge(e,1)}function k_t(e){return Rge(e,2)}var BB=2,eo=3,VE=11,FX=12,D5=19,WE=64,C_t=65,O_t=71,P_t=4108,N_t=4126,ga=80,Lge=81,I_t=[ga,Lge],R_t={1:{n:"CodePage",t:BB},2:{n:"Category",t:ga},3:{n:"PresentationFormat",t:ga},4:{n:"ByteCount",t:eo},5:{n:"LineCount",t:eo},6:{n:"ParagraphCount",t:eo},7:{n:"SlideCount",t:eo},8:{n:"NoteCount",t:eo},9:{n:"HiddenCount",t:eo},10:{n:"MultimediaClipCount",t:eo},11:{n:"ScaleCrop",t:VE},12:{n:"HeadingPairs",t:P_t},13:{n:"TitlesOfParts",t:N_t},14:{n:"Manager",t:ga},15:{n:"Company",t:ga},16:{n:"LinksUpToDate",t:VE},17:{n:"CharacterCount",t:eo},19:{n:"SharedDoc",t:VE},22:{n:"HyperlinksChanged",t:VE},23:{n:"AppVersion",t:eo,p:"version"},24:{n:"DigSig",t:C_t},26:{n:"ContentType",t:ga},27:{n:"ContentStatus",t:ga},28:{n:"Language",t:ga},29:{n:"Version",t:ga},255:{},2147483648:{n:"Locale",t:D5},2147483651:{n:"Behavior",t:D5},1919054434:{}},L_t={1:{n:"CodePage",t:BB},2:{n:"Title",t:ga},3:{n:"Subject",t:ga},4:{n:"Author",t:ga},5:{n:"Keywords",t:ga},6:{n:"Comments",t:ga},7:{n:"Template",t:ga},8:{n:"LastAuthor",t:ga},9:{n:"RevNumber",t:ga},10:{n:"EditTime",t:WE},11:{n:"LastPrinted",t:WE},12:{n:"CreatedDate",t:WE},13:{n:"ModifiedDate",t:WE},14:{n:"PageCount",t:eo},15:{n:"WordCount",t:eo},16:{n:"CharCount",t:eo},17:{n:"Thumbnail",t:O_t},18:{n:"Application",t:ga},19:{n:"DocSecurity",t:eo},255:{},2147483648:{n:"Locale",t:D5},2147483651:{n:"Behavior",t:D5},1919054434:{}},BX={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},M_t=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function D_t(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var j_t=D_t([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),z0=Ua(j_t),jm={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Mge={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},UX={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function $_t(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function F_t(e){var t=$_t();if(!e||!e.match)return t;var r={};if((e.match(ys)||[]).forEach(function(n){var i=tr(n);switch(i[0].replace(qbt,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[i.Extension]=i.ContentType;break;case"<Override":t[UX[i.ContentType]]!==void 0&&t[UX[i.ContentType]].push(i.PartName);break}}),t.xmlns!==i_t.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var hy={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function GD(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Rx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ys)||[]).forEach(function(i){var a=tr(i);if(a[0]==="<Relationship"){var s={};s.Type=a.Type,s.Target=a.Target,s.Id=a.Id,a.TargetMode&&(s.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Jw(a.Target,t);r[o]=s,n[a.Id]=s}}),r["!id"]=n,r}var B_t="application/vnd.oasis.opendocument.spreadsheet";function U_t(e,t){for(var r=RB(e),n,i;n=L_.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(i=tr(n[0],!1),i.path=="/"&&i.type!==B_t)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}var Lx=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],z_t=function(){for(var e=new Array(Lx.length),t=0;t<Lx.length;++t){var r=Lx[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Dge(e){var t={};e=Pn(e);for(var r=0;r<Lx.length;++r){var n=Lx[r],i=e.match(z_t[r]);i!=null&&i.length>0&&(t[n[1]]=Wr(i[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Sa(t[n[1]]))}return t}var V_t=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function jge(e,t,r,n){var i=[];if(typeof e=="string")i=NX(e,n);else for(var a=0;a<e.length;++a)i=i.concat(e[a].map(function(u){return{v:u}}));var s=typeof t=="string"?NX(t,n).map(function(u){return u.v}):t,o=0,l=0;if(s.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=s.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=s.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=s.slice(o,o+l);break}o+=l}}function W_t(e,t,r){var n={};return t||(t={}),e=Pn(e),V_t.forEach(function(i){var a=(e.match(R_(i[0]))||[])[1];switch(i[2]){case"string":a&&(t[i[1]]=Wr(a));break;case"bool":t[i[1]]=a==="true";break;case"raw":var s=e.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));s&&s.length>0&&(n[i[1]]=s[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&jge(n.HeadingPairs,n.TitlesOfParts,t,r),t}var H_t=/<[^>]+>[^<]*/g;function G_t(e,t){var r={},n="",i=e.match(H_t);if(i)for(var a=0;a!=i.length;++a){var s=i[a],o=tr(s);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Wr(o.name);break;case"</property>":n=null;break;default:if(s.indexOf("<vt:")===0){var l=s.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Wr(u);break;case"bool":r[n]=Wn(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=Sa(u);break;case"cy":case"error":r[n]=Wr(u);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",s,c,l)}}else if(s.slice(0,2)!=="</"){if(t.WTF)throw new Error(s)}}}return r}var q_t={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},GI;function K_t(e,t,r){GI||(GI=PB(q_t)),t=GI[t]||t,e[t]=r}function UB(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function $ge(e,t,r){var n=e.l,i=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return i}function Fge(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Bge(e,t,r){return t===31?Fge(e):$ge(e,t,r)}function qD(e,t,r){return Bge(e,t,r===!1?0:4)}function Y_t(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Bge(e,t,0)}function X_t(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var i=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Us,""),e.l-i&2&&(e.l+=2)}return r}function Z_t(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Us,"");return r}function J_t(e){var t=e.l,r=j5(e,Lge);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=j5(e,eo);return[r,n]}function Q_t(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(J_t(e));return r}function zX(e,t){for(var r=e.read_shift(4),n={},i=0;i!=r;++i){var a=e.read_shift(4),s=e.read_shift(4);n[a]=e.read_shift(s,t===1200?"utf16le":"utf8").replace(Us,"").replace(Zw,"!"),t===1200&&s%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Uge(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function e2t(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function j5(e,t,r){var n=e.read_shift(2),i,a=r||{};if(e.l+=2,t!==FX&&n!==t&&I_t.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===FX?n:t){case 2:return i=e.read_shift(2,"i"),a.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i"),i;case 11:return e.read_shift(4)!==0;case 19:return i=e.read_shift(4),i;case 30:return $ge(e,n,4).replace(Us,"");case 31:return Fge(e);case 64:return UB(e);case 65:return Uge(e);case 71:return e2t(e);case 80:return qD(e,n,!a.raw).replace(Us,"");case 81:return Y_t(e,n).replace(Us,"");case 4108:return Q_t(e);case 4126:case 4127:return n==4127?X_t(e):Z_t(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function VX(e,t){var r=e.l,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0,o=0,l=-1,c={};for(s=0;s!=i;++s){var u=e.read_shift(4),f=e.read_shift(4);a[s]=[u,f+r]}a.sort(function(w,v){return w[1]-v[1]});var d={};for(s=0;s!=i;++s){if(e.l!==a[s][1]){var h=!0;if(s>0&&t)switch(t[a[s-1][0]].t){case 2:e.l+2===a[s][1]&&(e.l+=2,h=!1);break;case 80:e.l<=a[s][1]&&(e.l=a[s][1],h=!1);break;case 4108:e.l<=a[s][1]&&(e.l=a[s][1],h=!1);break}if((!t||s==0)&&e.l<=a[s][1]&&(h=!1,e.l=a[s][1]),h)throw new Error("Read Error: Expected address "+a[s][1]+" at "+e.l+" :"+s)}if(t){var m=t[a[s][0]];if(d[m.n]=j5(e,m.t,{raw:!0}),m.p==="version"&&(d[m.n]=String(d[m.n]>>16)+"."+("0000"+String(d[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(d[m.n]){case 0:d[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:kc(o=d[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+d[m.n])}}else if(a[s][0]===1){if(o=d.CodePage=j5(e,BB),kc(o),l!==-1){var p=e.l;e.l=a[l][1],c=zX(e,o),e.l=p}}else if(a[s][0]===0){if(o===0){l=s,e.l=a[s+1][1];continue}c=zX(e,o)}else{var y=c[a[s][0]],g;switch(e[e.l]){case 65:e.l+=4,g=Uge(e);break;case 30:e.l+=4,g=qD(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,g=qD(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=vi(e,4);break;case 64:e.l+=4,g=Sa(UB(e));break;default:throw new Error("unparsed value: "+e[e.l])}d[y]=g}}return e.l=r+n,d}function WX(e,t,r){var n=e.content;if(!n)return{};ja(n,0);var i,a,s,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==jr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(i=n.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(a=n.read_shift(16),o=n.read_shift(4),i===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);i===2&&(s=n.read_shift(16),l=n.read_shift(4));var f=VX(n,t),d={SystemIdentifier:c};for(var h in f)d[h]=f[h];if(d.FMTID=a,i===1)return d;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var m;try{m=VX(n,null)}catch{}for(h in m)d[h]=m[h];return d.FMTID=[a,s],d}function Yd(e,t){return e.read_shift(t),null}function t2t(e,t,r){for(var n=[],i=e.l+t;e.l<i;)n.push(r(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return n}function vi(e,t){return e.read_shift(t)===1}function Ii(e){return e.read_shift(2,"u")}function zge(e,t){return t2t(e,t,Ii)}function r2t(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function F2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),i="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else r.biff==12&&(i="wstr");r.biff>=2&&r.biff<=5&&(i="cpstr");var s=n?e.read_shift(n,i):"";return s}function n2t(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,i=r&8,a=1+(r&1),s=0,o,l={};i&&(s=e.read_shift(2)),n&&(o=e.read_shift(4));var c=a==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,c);return i&&(e.l+=4*s),n&&(e.l+=o),l.t=u,i||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function vm(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function B2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):vm(e,n,r)}function $m(e,t,r){if(r.biff>5)return B2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function i2t(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function a2t(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var i=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Us,"");return n&&(e.l+=24),i}function s2t(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=e.read_shift(4);if(i===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var s=e.read_shift(a>>1,"utf16le").replace(Us,"");return r+s}function o2t(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return a2t(e);case"0303000000000000c000000000000046":return s2t(e);default:throw new Error("Unsupported Moniker "+r)}}function HE(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Us,""):"";return r}function l2t(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var i=e.read_shift(2);e.l+=2;var a,s,o,l,c="",u,f;i&16&&(a=HE(e,r-e.l)),i&128&&(s=HE(e,r-e.l)),(i&257)===257&&(o=HE(e,r-e.l)),(i&257)===1&&(l=o2t(e,r-e.l)),i&8&&(c=HE(e,r-e.l)),i&32&&(u=e.read_shift(16)),i&64&&(f=UB(e)),e.l=r;var d=s||o||l||"";d&&c&&(d+="#"+c),d||(d="#"+c),i&2&&d.charAt(0)=="/"&&d.charAt(1)!="/"&&(d="file://"+d);var h={Target:d};return u&&(h.guid=u),f&&(h.time=f),a&&(h.Tooltip=a),h}function Vge(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),i=e.read_shift(1);return[t,r,n,i]}function Wge(e,t){var r=Vge(e);return r[3]=0,r}function Zu(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function c2t(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function u2t(e,t,r){return t===0?"":$m(e,t,r)}function f2t(e,t,r){var n=r.biff>8?4:2,i=e.read_shift(n),a=e.read_shift(n,"i"),s=e.read_shift(n,"i");return[i,a,s]}function Hge(e){var t=e.read_shift(2),r=FB(e);return[t,r]}function d2t(e,t,r){e.l+=4,t-=4;var n=e.l+t,i=F2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,i}function pP(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);return{s:{c:n,r:t},e:{c:i,r}}}function Gge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),i=e.read_shift(1);return{s:{c:n,r:t},e:{c:i,r}}}var h2t=Gge;function qge(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function p2t(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function m2t(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Xa(e){e.l+=2,e.l+=e.read_shift(2)}var g2t={0:Xa,4:Xa,5:Xa,6:Xa,7:m2t,8:Xa,9:Xa,10:Xa,11:Xa,12:Xa,13:p2t,14:Xa,15:Xa,16:Xa,17:Xa,18:Xa,19:Xa,20:Xa,21:qge};function y2t(e,t){for(var r=e.l+t,n=[];e.l<r;){var i=e.read_shift(2);e.l-=2;try{n.push(g2t[i](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function GE(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function v2t(e,t){return t===0||e.read_shift(2),1200}function w2t(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,i=$m(e,0,r);return e.read_shift(t+n-e.l),i}function x2t(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function b2t(e,t,r){var n=e.read_shift(4),i=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var s=F2(e,0,r);return s.length===0&&(s="Sheet1"),{pos:n,hs:i,dt:a,name:s}}function _2t(e,t){for(var r=e.l+t,n=e.read_shift(4),i=e.read_shift(4),a=[],s=0;s!=i&&e.l<r;++s)a.push(n2t(e));return a.Count=n,a.Unique=i,a}function S2t(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function E2t(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function A2t(e){var t=c2t(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function T2t(e){return e.read_shift(2),e.read_shift(4)}function HX(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var i=e.read_shift(2);r&&r.biff==2&&(n=1-(i>>15),i&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,i]}function k2t(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,i],Flags:a,CurTab:s,FirstTab:o,Selected:l,TabRatio:c}}function C2t(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function O2t(){}function P2t(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=F2(e,0,r),n}function N2t(e){var t=Zu(e);return t.isst=e.read_shift(4),t}function I2t(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,i=Zu(e);r.biff==2&&e.l++;var a=B2(e,n-e.l,r);return i.val=a,i}function R2t(e,t,r){var n=e.read_shift(2),i=$m(e,0,r);return[n,i]}var L2t=$m;function GX(e,t,r){var n=e.l+t,i=r.biff==8||!r.biff?4:2,a=e.read_shift(i),s=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:s,c:l}}}function M2t(e){var t=e.read_shift(2),r=e.read_shift(2),n=Hge(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function D2t(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(Hge(e));if(e.l!==r)throw new Error("MulRK read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulRK length mismatch");return{r:n,c:i,C:s,rkrec:a}}function j2t(e,t){for(var r=e.l+t-2,n=e.read_shift(2),i=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var s=e.read_shift(2);if(a.length!=s-i+1)throw new Error("MulBlank length mismatch");return{r:n,c:i,C:s,ixfe:a}}function $2t(e,t,r,n){var i={},a=e.read_shift(4),s=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=M_t[o>>26],n.cellStyles&&(i.alc=a&7,i.fWrap=a>>3&1,i.alcV=a>>4&7,i.fJustLast=a>>7&1,i.trot=a>>8&255,i.cIndent=a>>16&15,i.fShrinkToFit=a>>20&1,i.iReadOrder=a>>22&2,i.fAtrNum=a>>26&1,i.fAtrFnt=a>>27&1,i.fAtrAlc=a>>28&1,i.fAtrBdr=a>>29&1,i.fAtrPat=a>>30&1,i.fAtrProt=a>>31&1,i.dgLeft=s&15,i.dgRight=s>>4&15,i.dgTop=s>>8&15,i.dgBottom=s>>12&15,i.icvLeft=s>>16&127,i.icvRight=s>>23&127,i.grbitDiag=s>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function F2t(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=$2t(e,t,n.fStyle,r),n}function B2t(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function qX(e,t,r){var n=Zu(e);(r.biff==2||t==9)&&++e.l;var i=r2t(e);return n.val=i,n.t=i===!0||i===!1?"b":"e",n}function U2t(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Zu(e),i=ls(e);return n.val=i,n}var KX=u2t;function z2t(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,i];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var s=vm(e,a),o=[];n>e.l;)o.push(B2(e));return[a,i,s,o]}function YX(e,t,r){var n=e.read_shift(2),i,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(i=d2t(e,t-2,r)),a.body=i||e.read_shift(t-2),typeof i=="string"&&(a.Name=i),a}var V2t=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function XX(e,t,r){var n=e.l+t,i=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=vm(e,s,r);i&32&&(c=V2t[c.charCodeAt(0)]);var u=n-e.l;r&&r.biff==2&&--u;var f=n==e.l||o===0||!(u>0)?[]:ETt(e,u,r,o);return{chKey:a,Name:c,itab:l,rgce:f}}function Kge(e,t,r){if(r.biff<8)return W2t(e,t,r);for(var n=[],i=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(f2t(e,r.biff>8?12:6,r));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return n}function W2t(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=F2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function H2t(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),i=e.read_shift(2),a=vm(e,n,r),s=vm(e,i,r);return[a,s]}function G2t(e,t,r){var n=Gge(e);e.l++;var i=e.read_shift(1);return t-=8,[ATt(e,t,r),i,n]}function ZX(e,t,r){var n=h2t(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,_Tt(e,t,r)]}function q2t(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function K2t(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),o=$m(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:i},o,s,a]}}function Y2t(e,t,r){return K2t(e,t,r)}function X2t(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(pP(e));return r}function Z2t(e,t,r){if(r&&r.biff<8)return Q2t(e,t,r);var n=qge(e),i=y2t(e,t-22,n[1]);return{cmo:n,ft:i}}var J2t={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=r,{fmt:n}}};function Q2t(e,t,r){e.l+=4;var n=e.read_shift(2),i=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var s=[];return s.push((J2t[n]||gs)(e,t,r)),{cmo:[i,n,a],ft:s}}function eSt(e,t,r){var n=e.l,i="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],s;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:s=i2t(e,6,r);var o=e.read_shift(2);e.read_shift(2),Ii(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var u=e[e.l],f=vm(e,e.lens[c+1]-e.lens[c]-1);if(i+=f,i.length>=(u?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return e.l=n+t,{t:i}}catch{return e.l=n+t,{t:i}}}function tSt(e,t){var r=pP(e);e.l+=16;var n=l2t(e,t-24);return[r,n]}function rSt(e,t){e.read_shift(2);var r=pP(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Us,""),[r,n]}function nSt(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=BX[r]||r,r=e.read_shift(2),t[1]=BX[r]||r,t}function iSt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Wge(e));return r}function aSt(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Wge(e));return r}function sSt(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Yge(e,t,r){if(!r.cellStyles)return gs(e,t);var n=r&&r.biff>=12?4:2,i=e.read_shift(n),a=e.read_shift(n),s=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var c={s:i,e:a,w:s,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function oSt(e,t){var r={};return t<32||(e.l+=16,r.header=ls(e),r.footer=ls(e),e.l+=2),r}function lSt(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var i=e.read_shift(1);return e.l+=3,i&16&&(n.area=!0),n}var cSt=Zu,uSt=zge,fSt=B2;function dSt(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,i}function hSt(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Zu(e);++e.l;var i=$m(e,t-7,r);return n.t="str",n.val=i,n}function pSt(e){var t=Zu(e);++e.l;var r=ls(e);return t.t="n",t.val=r,t}function mSt(e){var t=Zu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function gSt(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function ySt(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function vSt(e,t,r){var n=e.l+t,i=Zu(e),a=e.read_shift(2),s=vm(e,a,r);return e.l=n,i.t="str",i.val=s,i}var wSt=[2,3,48,49,131,139,140,245],JX=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=PB({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],u=ap(1);switch(l.type){case"base64":u=Sc(Jo(o));break;case"binary":u=Sc(o);break;case"buffer":case"array":u=o;break}ja(u,0);var f=u.read_shift(1),d=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,d=!0;break;case 49:h=!0,d=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,y=521;f==2&&(p=u.read_shift(2)),u.l+=3,f!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(y=u.read_shift(2));var g=u.read_shift(2),w=l.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(w=e[u[u.l]]),u.l+=1,u.l+=2),m&&(u.l+=36);for(var v=[],x={},b=Math.min(u.length,f==2?521:y-10-(h?264:0)),S=m?32:11;u.l<b&&u[u.l]!=13;)switch(x={},x.name=N_.utils.decode(w,u.slice(u.l,u.l+S)).replace(/[\u0000\r\n].*$/g,""),u.l+=S,x.type=String.fromCharCode(u.read_shift(1)),f!=2&&!m&&(x.offset=u.read_shift(4)),x.len=u.read_shift(1),f==2&&(x.offset=u.read_shift(2)),x.dec=u.read_shift(1),x.name.length&&v.push(x),f!=2&&(u.l+=m?13:14),x.type){case"B":(!h||x.len!=8)&&l.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+x.name+":"+x.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+x.type)}if(u[u.l]!==13&&(u.l=y-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=y;var T=0,A=0;for(c[0]=[],A=0;A!=v.length;++A)c[0][A]=v[A].name;for(;p-- >0;){if(u[u.l]===42){u.l+=g;continue}for(++u.l,c[++T]=[],A=0,A=0;A!=v.length;++A){var O=u.slice(u.l,u.l+v[A].len);u.l+=v[A].len,ja(O,0);var M=N_.utils.decode(w,O);switch(v[A].type){case"C":M.trim().length&&(c[T][A]=M.replace(/\s+$/,""));break;case"D":M.length===8?c[T][A]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):c[T][A]=M;break;case"F":c[T][A]=parseFloat(M.trim());break;case"+":case"I":c[T][A]=m?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":c[T][A]=!0;break;case"N":case"F":c[T][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!d)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[T][A]="##MEMO##"+(m?parseInt(M.trim(),10):O.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(c[T][A]=+M||0);break;case"@":c[T][A]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":c[T][A]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":c[T][A]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[T][A]=-O.read_shift(-8,"f");break;case"B":if(h&&v[A].len==8){c[T][A]=O.read_shift(8,"f");break}case"G":case"P":O.l+=v[A].len;break;case"0":if(v[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+v[A].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=v,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=O1(r(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function i(o,l){try{return kp(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function s(o,l){var c=l||{};if(+c.codepage>=0&&kc(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=WD(),f=ej(o,{header:1,raw:!0,cellDates:!0}),d=f[0],h=f.slice(1),m=o["!cols"]||[],p=0,y=0,g=0,w=1;for(p=0;p<d.length;++p){if(((m[p]||{}).DBF||{}).name){d[p]=m[p].DBF.name,++g;continue}if(d[p]!=null){if(++g,typeof d[p]=="number"&&(d[p]=d[p].toString(10)),typeof d[p]!="string")throw new Error("DBF Invalid column name "+d[p]+" |"+typeof d[p]+"|");if(d.indexOf(d[p])!==p){for(y=0;y<1024;++y)if(d.indexOf(d[p]+"_"+y)==-1){d[p]+="_"+y;break}}}}var v=hi(o["!ref"]),x=[],b=[],S=[];for(p=0;p<=v.e.c-v.s.c;++p){var T="",A="",O=0,M=[];for(y=0;y<h.length;++y)h[y][p]!=null&&M.push(h[y][p]);if(M.length==0||d[p]==null){x[p]="?";continue}for(y=0;y<M.length;++y){switch(typeof M[y]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=M[y]instanceof Date?"D":"C";break;default:A="C"}O=Math.max(O,String(M[y]).length),T=T&&T!=A?"C":A}O>250&&(O=250),A=((m[p]||{}).DBF||{}).type,A=="C"&&m[p].DBF.len>O&&(O=m[p].DBF.len),T=="B"&&A=="N"&&(T="N",S[p]=m[p].DBF.dec,O=m[p].DBF.len),b[p]=T=="C"||A=="N"?O:a[T]||0,w+=b[p],x[p]=T}var P=u.next(32);for(P.write_shift(4,318902576),P.write_shift(4,h.length),P.write_shift(2,296+32*g),P.write_shift(2,w),p=0;p<4;++p)P.write_shift(4,0);for(P.write_shift(4,0|(+t[Kme]||3)<<8),p=0,y=0;p<d.length;++p)if(d[p]!=null){var N=u.next(32),V=(d[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);N.write_shift(1,V,"sbcs"),N.write_shift(1,x[p]=="?"?"C":x[p],"sbcs"),N.write_shift(4,y),N.write_shift(1,b[p]||a[x[p]]||0),N.write_shift(1,S[p]||0),N.write_shift(1,2),N.write_shift(4,0),N.write_shift(1,0),N.write_shift(4,0),N.write_shift(4,0),y+=b[p]||a[x[p]]||0}var B=u.next(264);for(B.write_shift(4,13),p=0;p<65;++p)B.write_shift(4,0);for(p=0;p<h.length;++p){var G=u.next(w);for(G.write_shift(1,0),y=0;y<d.length;++y)if(d[y]!=null)switch(x[y]){case"L":G.write_shift(1,h[p][y]==null?63:h[p][y]?84:70);break;case"B":G.write_shift(8,h[p][y]||0,"f");break;case"N":var Z="0";for(typeof h[p][y]=="number"&&(Z=h[p][y].toFixed(S[y]||0)),g=0;g<b[y]-Z.length;++g)G.write_shift(1,32);G.write_shift(1,Z,"sbcs");break;case"D":h[p][y]?(G.write_shift(4,("0000"+h[p][y].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(h[p][y].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+h[p][y].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var J=String(h[p][y]!=null?h[p][y]:"").slice(0,b[y]);for(G.write_shift(1,J,"sbcs"),g=0;g<b[y]-J.length;++g)G.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:n,from_sheet:s}}(),xSt=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Vu(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(d,h){var m=e[h];return typeof m=="number"?pX(m):m},n=function(d,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?d:pX(p)};e["|"]=254;function i(d,h){switch(h.type){case"base64":return a(Jo(d),h);case"binary":return a(d,h);case"buffer":return a(Rr&&Buffer.isBuffer(d)?d.toString("binary"):Lm(d),h);case"array":return a(ym(d),h)}throw new Error("Unrecognized type "+h.type)}function a(d,h){var m=d.split(/[\n\r]+/),p=-1,y=-1,g=0,w=0,v=[],x=[],b=null,S={},T=[],A=[],O=[],M=0,P;for(+h.codepage>=0&&kc(+h.codepage);g!==m.length;++g){M=0;var N=m[g].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),V=N.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),B=V[0],G;if(N.length>0)switch(B){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&x.push(N.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,J=!1,Y=!1,U=!1,se=-1,ue=-1;for(w=1;w<V.length;++w)switch(V[w].charAt(0)){case"A":break;case"X":y=parseInt(V[w].slice(1))-1,J=!0;break;case"Y":for(p=parseInt(V[w].slice(1))-1,J||(y=0),P=v.length;P<=p;++P)v[P]=[];break;case"K":G=V[w].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(Lc(G))?isNaN(Uv(G).getDate())||(G=Sa(G)):(G=Lc(G),b!==null&&k1(b)&&(G=hP(G))),Z=!0;break;case"E":U=!0;var I=Dy(V[w].slice(1),{r:p,c:y});v[p][y]=[v[p][y],I];break;case"S":Y=!0,v[p][y]=[v[p][y],"S5S"];break;case"G":break;case"R":se=parseInt(V[w].slice(1))-1;break;case"C":ue=parseInt(V[w].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+N)}if(Z&&(v[p][y]&&v[p][y].length==2?v[p][y][0]=G:v[p][y]=G,b=null),Y){if(U)throw new Error("SYLK shared formula cannot have own formula");var z=se>-1&&v[se][ue];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");v[p][y][1]=aye(z[1],{r:p-se,c:y-ue})}break;case"F":var H=0;for(w=1;w<V.length;++w)switch(V[w].charAt(0)){case"X":y=parseInt(V[w].slice(1))-1,++H;break;case"Y":for(p=parseInt(V[w].slice(1))-1,P=v.length;P<=p;++P)v[P]=[];break;case"M":M=parseInt(V[w].slice(1))/20;break;case"F":break;case"G":break;case"P":b=x[parseInt(V[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=V[w].slice(1).split(" "),P=parseInt(O[0],10);P<=parseInt(O[1],10);++P)M=parseInt(O[2],10),A[P-1]=M===0?{hidden:!0}:{wch:M},zv(A[P-1]);break;case"C":y=parseInt(V[w].slice(1))-1,A[y]||(A[y]={});break;case"R":p=parseInt(V[w].slice(1))-1,T[p]||(T[p]={}),M>0?(T[p].hpt=M,T[p].hpx=j_(M)):M===0&&(T[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+N)}H<1&&(b=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+N)}}return T.length>0&&(S["!rows"]=T),A.length>0&&(S["!cols"]=A),h&&h.sheetRows&&(v=v.slice(0,h.sheetRows)),[v,S]}function s(d,h){var m=i(d,h),p=m[0],y=m[1],g=O1(p,h);return Vu(y).forEach(function(w){g[w]=y[w]}),g}function o(d,h){return kp(s(d,h),h)}function l(d,h,m,p){var y="C;Y"+(m+1)+";X"+(p+1)+";K";switch(d.t){case"n":y+=d.v||0,d.f&&!d.F&&(y+=";E"+sAt(d.f,{r:m,c:p}));break;case"b":y+=d.v?"TRUE":"FALSE";break;case"e":y+=d.w||d.v;break;case"d":y+='"'+(d.w||d.v)+'"';break;case"s":y+='"'+d.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function c(d,h){h.forEach(function(m,p){var y="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?y+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=F5(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=B5(m.wpx)),typeof m.wch=="number"&&(y+=Math.round(m.wch))),y.charAt(y.length-1)!=" "&&d.push(y)})}function u(d,h){h.forEach(function(m,p){var y="F;";m.hidden?y+="M0;":m.hpt?y+="M"+20*m.hpt+";":m.hpx&&(y+="M"+20*rye(m.hpx)+";"),y.length>2&&d.push(y+"R"+(p+1))})}function f(d,h){var m=["ID;PWXL;N;E"],p=[],y=hi(d["!ref"]),g,w=Array.isArray(d),v=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),d["!cols"]&&c(m,d["!cols"]),d["!rows"]&&u(m,d["!rows"]),m.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var x=y.s.r;x<=y.e.r;++x)for(var b=y.s.c;b<=y.e.c;++b){var S=hr({r:x,c:b});g=w?(d[x]||[])[b]:d[S],!(!g||g.v==null&&(!g.f||g.F))&&p.push(l(g,d,x,b))}return m.join(v)+v+p.join(v)+v+"E"+v}return{to_workbook:o,to_sheet:s,from_sheet:f}}(),bSt=function(){function e(a,s){switch(s.type){case"base64":return t(Jo(a),s);case"binary":return t(a,s);case"buffer":return t(Rr&&Buffer.isBuffer(a)?a.toString("binary"):Lm(a),s);case"array":return t(ym(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){for(var o=a.split(`
`),l=-1,c=-1,u=0,f=[];u!==o.length;++u){if(o[u].trim()==="BOT"){f[++l]=[],c=0;continue}if(!(l<0)){var d=o[u].trim().split(","),h=d[0],m=d[1];++u;for(var p=o[u]||"";(p.match(/["]/g)||[]).length&1&&u<o.length-1;)p+=`
`+o[++u];switch(p=p.trim(),+h){case-1:if(p==="BOT"){f[++l]=[],c=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[l][c]=!0:p==="FALSE"?f[l][c]=!1:isNaN(Lc(m))?isNaN(Uv(m).getDate())?f[l][c]=m:f[l][c]=Sa(m):f[l][c]=Lc(m),++c;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[l][c++]=p!==""?p:null;break}if(p==="EOD")break}}return s&&s.sheetRows&&(f=f.slice(0,s.sheetRows)),f}function r(a,s){return O1(e(a,s),s)}function n(a,s){return kp(r(a,s),s)}var i=function(){var a=function(l,c,u,f,d){l.push(c),l.push(u+","+f),l.push('"'+d.replace(/"/g,'""')+'"')},s=function(l,c,u,f){l.push(c+","+u),l.push(c==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var c=[],u=hi(l["!ref"]),f,d=Array.isArray(l);a(c,"TABLE",0,1,"sheetjs"),a(c,"VECTORS",0,u.e.r-u.s.r+1,""),a(c,"TUPLES",0,u.e.c-u.s.c+1,""),a(c,"DATA",0,0,"");for(var h=u.s.r;h<=u.e.r;++h){s(c,-1,0,"BOT");for(var m=u.s.c;m<=u.e.c;++m){var p=hr({r:h,c:m});if(f=d?(l[h]||[])[m]:l[p],!f){s(c,1,0,"");continue}switch(f.t){case"n":var y=f.w;!y&&f.v!=null&&(y=f.v),y==null?f.f&&!f.F?s(c,1,0,"="+f.f):s(c,1,0,""):s(c,0,y,"V");break;case"b":s(c,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":s(c,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=$l(f.z||yr[14],Vs(Sa(f.v)))),s(c,0,f.w,"V");break;default:s(c,1,0,"")}}}s(c,-1,0,"EOD");var g=`\r
`,w=c.join(g);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:i}}(),_St=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,d){for(var h=f.split(`
`),m=-1,p=-1,y=0,g=[];y!==h.length;++y){var w=h[y].trim().split(":");if(w[0]==="cell"){var v=Ds(w[1]);if(g.length<=v.r)for(m=g.length;m<=v.r;++m)g[m]||(g[m]=[]);switch(m=v.r,p=v.c,w[2]){case"t":g[m][p]=e(w[3]);break;case"v":g[m][p]=+w[3];break;case"vtf":var x=w[w.length-1];case"vtc":switch(w[3]){case"nl":g[m][p]=!!+w[4];break;default:g[m][p]=+w[4];break}w[2]=="vtf"&&(g[m][p]=[g[m][p],x])}}}return d&&d.sheetRows&&(g=g.slice(0,d.sheetRows)),g}function n(f,d){return O1(r(f,d),d)}function i(f,d){return kp(n(f,d),d)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),s=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var d=[],h=[],m,p="",y=C1(f["!ref"]),g=Array.isArray(f),w=y.s.r;w<=y.e.r;++w)for(var v=y.s.c;v<=y.e.c;++v)if(p=hr({r:w,c:v}),m=g?(f[w]||[])[v]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(t(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=t(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=t(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var x=Vs(Sa(m.v));h[2]="vtc",h[3]="nd",h[4]=""+x,h[5]=m.w||$l(m.z||yr[14],x);break;case"e":continue}d.push(h.join(":"))}return d.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),d.push("valueformat:1:text-wiki"),d.join(`
`)}function u(f){return[a,s,o,s,c(f),l].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:u}}(),M_=function(){function e(u,f,d,h,m){m.raw?f[d][h]=u:u===""||(u==="TRUE"?f[d][h]=!0:u==="FALSE"?f[d][h]=!1:isNaN(Lc(u))?isNaN(Uv(u).getDate())?f[d][h]=u:f[d][h]=Sa(u):f[d][h]=Lc(u))}function t(u,f){var d=f||{},h=[];if(!u||u.length===0)return h;for(var m=u.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var y=10,g=0,w=0;w<=p;++w)g=m[w].indexOf(" "),g==-1?g=m[w].length:g++,y=Math.max(y,g);for(w=0;w<=p;++w){h[w]=[];var v=0;for(e(m[w].slice(0,y).trim(),h,w,v,d),v=1;v<=(m[w].length-y)/10+1;++v)e(m[w].slice(y+(v-1)*10,y+v*10).trim(),h,w,v,d)}return d.sheetRows&&(h=h.slice(0,d.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(u){for(var f={},d=!1,h=0,m=0;h<u.length;++h)(m=u.charCodeAt(h))==34?d=!d:!d&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,y){return p[0]-y[0]||n[p[1]]-n[y[1]]}),r[m.pop()[1]]||44}function a(u,f){var d=f||{},h="",m=d.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(h=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(h=u.charAt(4),u=u.slice(6)):h=i(u.slice(0,1024)):d&&d.FS?h=d.FS:h=i(u.slice(0,1024));var y=0,g=0,w=0,v=0,x=0,b=h.charCodeAt(0),S=!1,T=0,A=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var O=d.dateNF!=null?Rbt(d.dateNF):null;function M(){var P=u.slice(v,x),N={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)N.t="z";else if(d.raw)N.t="s",N.v=P;else if(P.trim().length===0)N.t="s",N.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(N.t="s",N.v=P.slice(2,-1).replace(/""/g,'"')):lAt(P)?(N.t="n",N.f=P.slice(1)):(N.t="s",N.v=P);else if(P=="TRUE")N.t="b",N.v=!0;else if(P=="FALSE")N.t="b",N.v=!1;else if(!isNaN(w=Lc(P)))N.t="n",d.cellText!==!1&&(N.w=P),N.v=w;else if(!isNaN(Uv(P).getDate())||O&&P.match(O)){N.z=d.dateNF||yr[14];var V=0;O&&P.match(O)&&(P=Lbt(P,d.dateNF,P.match(O)||[]),V=1),d.cellDates?(N.t="d",N.v=Sa(P,V)):(N.t="n",N.v=Vs(Sa(P,V))),d.cellText!==!1&&(N.w=$l(N.z,N.v instanceof Date?Vs(N.v):N.v)),d.cellNF||delete N.z}else N.t="s",N.v=P;if(N.t=="z"||(d.dense?(m[y]||(m[y]=[]),m[y][g]=N):m[hr({c:g,r:y})]=N),v=x+1,A=u.charCodeAt(v),p.e.c<g&&(p.e.c=g),p.e.r<y&&(p.e.r=y),T==b)++g;else if(g=0,++y,d.sheetRows&&d.sheetRows<=y)return!0}e:for(;x<u.length;++x)switch(T=u.charCodeAt(x)){case 34:A===34&&(S=!S);break;case b:case 10:case 13:if(!S&&M())break e;break}return x-v>0&&M(),m["!ref"]=$r(p),m}function s(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?a(u,f):O1(t(u,f),f)}function o(u,f){var d="",h=f.type=="string"?[0,0,0,0]:YB(u,f);switch(f.type){case"base64":d=Jo(u);break;case"binary":d=u;break;case"buffer":f.codepage==65001?d=u.toString("utf8"):f.codepage&&typeof N_<"u"||(d=Rr&&Buffer.isBuffer(u)?u.toString("binary"):Lm(u));break;case"array":d=ym(u);break;case"string":d=u;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?d=Pn(d.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?d=Pn(d):f.type=="binary"&&typeof N_<"u",d.slice(0,19)=="socialcalc:version:"?_St.to_sheet(f.type=="string"?d:Pn(d),f):s(d,f)}function l(u,f){return kp(o(u,f),f)}function c(u){for(var f=[],d=hi(u["!ref"]),h,m=Array.isArray(u),p=d.s.r;p<=d.e.r;++p){for(var y=[],g=d.s.c;g<=d.e.c;++g){var w=hr({r:p,c:g});if(h=m?(u[p]||[])[g]:u[w],!h||h.v==null){y.push("          ");continue}for(var v=(h.w||(dd(h),h.w)||"").slice(0,10);v.length<10;)v+=" ";y.push(v+(g===0?" ":""))}f.push(y.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function SSt(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var i=xSt.to_workbook(e,r);return r.WTF=n,i}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return M_.to_workbook(e,t)}}var Mx=function(){function e(I,z,H){if(I){ja(I,I.l||0);for(var q=H.Enum||se;I.l<I.length;){var F=I.read_shift(2),D=q[F]||q[65535],re=I.read_shift(2),K=I.l+re,le=D.f&&D.f(I,re,H);if(I.l=K,z(le,D,F))return}}}function t(I,z){switch(z.type){case"base64":return r(Sc(Jo(I)),z);case"binary":return r(Sc(I),z);case"buffer":case"array":return r(I,z)}throw"Unsupported type "+z.type}function r(I,z){if(!I)return I;var H=z||{},q=H.dense?[]:{},F="Sheet1",D="",re=0,K={},le=[],xe=[],X={s:{r:0,c:0},e:{r:0,c:0}},Ie=H.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)H.Enum=se,e(I,function(Me,tt,$e){switch($e){case 0:H.vers=Me,Me>=4096&&(H.qpro=!0);break;case 6:X=Me;break;case 204:Me&&(D=Me);break;case 222:D=Me;break;case 15:case 51:H.qpro||(Me[1].v=Me[1].v.slice(1));case 13:case 14:case 16:$e==14&&(Me[2]&112)==112&&(Me[2]&15)>1&&(Me[2]&15)<15&&(Me[1].z=H.dateNF||yr[14],H.cellDates&&(Me[1].t="d",Me[1].v=hP(Me[1].v))),H.qpro&&Me[3]>re&&(q["!ref"]=$r(X),K[F]=q,le.push(F),q=H.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},re=Me[3],F=D||"Sheet"+(re+1),D="");var De=H.dense?(q[Me[0].r]||[])[Me[0].c]:q[hr(Me[0])];if(De){De.t=Me[1].t,De.v=Me[1].v,Me[1].z!=null&&(De.z=Me[1].z),Me[1].f!=null&&(De.f=Me[1].f);break}H.dense?(q[Me[0].r]||(q[Me[0].r]=[]),q[Me[0].r][Me[0].c]=Me[1]):q[hr(Me[0])]=Me[1];break}},H);else if(I[2]==26||I[2]==14)H.Enum=ue,I[2]==14&&(H.qpro=!0,I.l=0),e(I,function(Me,tt,$e){switch($e){case 204:F=Me;break;case 22:Me[1].v=Me[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Me[3]>re&&(q["!ref"]=$r(X),K[F]=q,le.push(F),q=H.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},re=Me[3],F="Sheet"+(re+1)),Ie>0&&Me[0].r>=Ie)break;H.dense?(q[Me[0].r]||(q[Me[0].r]=[]),q[Me[0].r][Me[0].c]=Me[1]):q[hr(Me[0])]=Me[1],X.e.c<Me[0].c&&(X.e.c=Me[0].c),X.e.r<Me[0].r&&(X.e.r=Me[0].r);break;case 27:Me[14e3]&&(xe[Me[14e3][0]]=Me[14e3][1]);break;case 1537:xe[Me[0]]=Me[1],Me[0]==re&&(F=Me[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(q["!ref"]=$r(X),K[D||F]=q,le.push(D||F),!xe.length)return{SheetNames:le,Sheets:K};for(var Re={},ie=[],Te=0;Te<xe.length;++Te)K[le[Te]]?(ie.push(xe[Te]||le[Te]),Re[xe[Te]]=K[xe[Te]]||K[le[Te]]):(ie.push(xe[Te]),Re[xe[Te]]={"!ref":"A1"});return{SheetNames:ie,Sheets:Re}}function n(I,z){var H=z||{};if(+H.codepage>=0&&kc(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var q=WD(),F=hi(I["!ref"]),D=Array.isArray(I),re=[];sc(q,0,a(1030)),sc(q,6,l(F));for(var K=Math.min(F.e.r,8191),le=F.s.r;le<=K;++le)for(var xe=za(le),X=F.s.c;X<=F.e.c;++X){le===F.s.r&&(re[X]=ca(X));var Ie=re[X]+xe,Re=D?(I[le]||[])[X]:I[Ie];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?sc(q,13,h(le,X,Re.v)):sc(q,14,p(le,X,Re.v));else{var ie=dd(Re);sc(q,15,f(le,X,ie.slice(0,239)))}}return sc(q,1),q.end()}function i(I,z){var H=z||{};if(+H.codepage>=0&&kc(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var q=WD();sc(q,0,s(I));for(var F=0,D=0;F<I.SheetNames.length;++F)(I.Sheets[I.SheetNames[F]]||{})["!ref"]&&sc(q,27,U(I.SheetNames[F],D++));var re=0;for(F=0;F<I.SheetNames.length;++F){var K=I.Sheets[I.SheetNames[F]];if(!(!K||!K["!ref"])){for(var le=hi(K["!ref"]),xe=Array.isArray(K),X=[],Ie=Math.min(le.e.r,8191),Re=le.s.r;Re<=Ie;++Re)for(var ie=za(Re),Te=le.s.c;Te<=le.e.c;++Te){Re===le.s.r&&(X[Te]=ca(Te));var Me=X[Te]+ie,tt=xe?(K[Re]||[])[Te]:K[Me];if(!(!tt||tt.t=="z"))if(tt.t=="n")sc(q,23,M(Re,Te,re,tt.v));else{var $e=dd(tt);sc(q,22,T(Re,Te,re,$e.slice(0,239)))}}++re}}return sc(q,1),q.end()}function a(I){var z=na(2);return z.write_shift(2,I),z}function s(I){var z=na(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var H=0,q=0,F=0,D=0;D<I.SheetNames.length;++D){var re=I.SheetNames[D],K=I.Sheets[re];if(!(!K||!K["!ref"])){++F;var le=C1(K["!ref"]);H<le.e.r&&(H=le.e.r),q<le.e.c&&(q=le.e.c)}}return H>8191&&(H=8191),z.write_shift(2,H),z.write_shift(1,F),z.write_shift(1,q),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(I,z,H){var q={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&H.qpro?(q.s.c=I.read_shift(1),I.l++,q.s.r=I.read_shift(2),q.e.c=I.read_shift(1),I.l++,q.e.r=I.read_shift(2),q):(q.s.c=I.read_shift(2),q.s.r=I.read_shift(2),z==12&&H.qpro&&(I.l+=2),q.e.c=I.read_shift(2),q.e.r=I.read_shift(2),z==12&&H.qpro&&(I.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function l(I){var z=na(8);return z.write_shift(2,I.s.c),z.write_shift(2,I.s.r),z.write_shift(2,I.e.c),z.write_shift(2,I.e.r),z}function c(I,z,H){var q=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(q[0].c=I.read_shift(1),q[3]=I.read_shift(1),q[0].r=I.read_shift(2),I.l+=2):(q[2]=I.read_shift(1),q[0].c=I.read_shift(2),q[0].r=I.read_shift(2)),q}function u(I,z,H){var q=I.l+z,F=c(I,z,H);if(F[1].t="s",H.vers==20768){I.l++;var D=I.read_shift(1);return F[1].v=I.read_shift(D,"utf8"),F}return H.qpro&&I.l++,F[1].v=I.read_shift(q-I.l,"cstr"),F}function f(I,z,H){var q=na(7+H.length);q.write_shift(1,255),q.write_shift(2,z),q.write_shift(2,I),q.write_shift(1,39);for(var F=0;F<q.length;++F){var D=H.charCodeAt(F);q.write_shift(1,D>=128?95:D)}return q.write_shift(1,0),q}function d(I,z,H){var q=c(I,z,H);return q[1].v=I.read_shift(2,"i"),q}function h(I,z,H){var q=na(7);return q.write_shift(1,255),q.write_shift(2,z),q.write_shift(2,I),q.write_shift(2,H,"i"),q}function m(I,z,H){var q=c(I,z,H);return q[1].v=I.read_shift(8,"f"),q}function p(I,z,H){var q=na(13);return q.write_shift(1,255),q.write_shift(2,z),q.write_shift(2,I),q.write_shift(8,H,"f"),q}function y(I,z,H){var q=I.l+z,F=c(I,z,H);if(F[1].v=I.read_shift(8,"f"),H.qpro)I.l=q;else{var D=I.read_shift(2);x(I.slice(I.l,I.l+D),F),I.l+=D}return F}function g(I,z,H){var q=z&32768;return z&=-32769,z=(q?I:0)+(z>=8192?z-16384:z),(q?"":"$")+(H?ca(z):za(z))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},v=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function x(I,z){ja(I,0);for(var H=[],q=0,F="",D="",re="",K="";I.l<I.length;){var le=I[I.l++];switch(le){case 0:H.push(I.read_shift(8,"f"));break;case 1:D=g(z[0].c,I.read_shift(2),!0),F=g(z[0].r,I.read_shift(2),!1),H.push(D+F);break;case 2:{var xe=g(z[0].c,I.read_shift(2),!0),X=g(z[0].r,I.read_shift(2),!1);D=g(z[0].c,I.read_shift(2),!0),F=g(z[0].r,I.read_shift(2),!1),H.push(xe+X+":"+D+F)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(I.read_shift(2));break;case 6:{for(var Ie="";le=I[I.l++];)Ie+=String.fromCharCode(le);H.push('"'+Ie.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:K=H.pop(),re=H.pop(),H.push(["AND","OR"][le-20]+"("+re+","+K+")");break;default:if(le<32&&v[le])K=H.pop(),re=H.pop(),H.push(re+v[le]+K);else if(w[le]){if(q=w[le][1],q==69&&(q=I[I.l++]),q>H.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+H.join("|")+"|");return}var Re=H.slice(-q);H.length-=q,H.push(w[le][0]+"("+Re.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}H.length==1?z[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function b(I){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=I.read_shift(2),z[3]=I[I.l++],z[0].c=I[I.l++],z}function S(I,z){var H=b(I);return H[1].t="s",H[1].v=I.read_shift(z-4,"cstr"),H}function T(I,z,H,q){var F=na(6+q.length);F.write_shift(2,I),F.write_shift(1,H),F.write_shift(1,z),F.write_shift(1,39);for(var D=0;D<q.length;++D){var re=q.charCodeAt(D);F.write_shift(1,re>=128?95:re)}return F.write_shift(1,0),F}function A(I,z){var H=b(I);H[1].v=I.read_shift(2);var q=H[1].v>>1;if(H[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return H[1].v=q,H}function O(I,z){var H=b(I),q=I.read_shift(4),F=I.read_shift(4),D=I.read_shift(2);if(D==65535)return q===0&&F===3221225472?(H[1].t="e",H[1].v=15):q===0&&F===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var re=D&32768;return D=(D&32767)-16446,H[1].v=(1-re*2)*(F*Math.pow(2,D+32)+q*Math.pow(2,D)),H}function M(I,z,H,q){var F=na(14);if(F.write_shift(2,I),F.write_shift(1,H),F.write_shift(1,z),q==0)return F.write_shift(4,0),F.write_shift(4,0),F.write_shift(2,65535),F;var D=0,re=0,K=0,le=0;return q<0&&(D=1,q=-q),re=Math.log2(q)|0,q/=Math.pow(2,re-31),le=q>>>0,le&2147483648||(q/=2,++re,le=q>>>0),q-=le,le|=2147483648,le>>>=0,q*=Math.pow(2,32),K=q>>>0,F.write_shift(4,K),F.write_shift(4,le),re+=16383+(D?32768:0),F.write_shift(2,re),F}function P(I,z){var H=O(I);return I.l+=z-14,H}function N(I,z){var H=b(I),q=I.read_shift(4);return H[1].v=q>>6,H}function V(I,z){var H=b(I),q=I.read_shift(8,"f");return H[1].v=q,H}function B(I,z){var H=V(I);return I.l+=z-10,H}function G(I,z){return I[I.l+z-1]==0?I.read_shift(z,"cstr"):""}function Z(I,z){var H=I[I.l++];H>z-1&&(H=z-1);for(var q="";q.length<H;)q+=String.fromCharCode(I[I.l++]);return q}function J(I,z,H){if(!(!H.qpro||z<21)){var q=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var F=I.read_shift(z-21,"cstr");return[q,F]}}function Y(I,z){for(var H={},q=I.l+z;I.l<q;){var F=I.read_shift(2);if(F==14e3){for(H[F]=[0,""],H[F][0]=I.read_shift(2);I[I.l];)H[F][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return H}function U(I,z){var H=na(5+I.length);H.write_shift(2,14e3),H.write_shift(2,z);for(var q=0;q<I.length;++q){var F=I.charCodeAt(q);H[H.l++]=F>127?95:F}return H[H.l++]=0,H}var se={0:{n:"BOF",f:Ii},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:d},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},ue={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Y},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:N},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:B},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:t}}();function ESt(e){var t={},r=e.match(ys),n=0,i=!1;if(r)for(;n!=r.length;++n){var a=tr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=AB[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+a[0])}}return t}var ASt=function(){var e=R_("t"),t=R_("rPr");function r(a){var s=a.match(e);if(!s)return{t:"s",v:""};var o={t:"s",v:Wr(s[1])},l=a.match(t);return l&&(o.s=ESt(l[1])),o}var n=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(s){return s.replace(n,"").split(i).map(r).filter(function(o){return o.v})}}(),TSt=function(){var t=/(\r\n|\n)/g;function r(i,a,s){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),i.b&&(a.push("<b>"),s.push("</b>")),i.i&&(a.push("<i>"),s.push("</i>")),i.strike&&(a.push("<s>"),s.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),s.push("</"+l+">")),s.push("</span>"),i}function n(i){var a=[[],i.v,[]];return i.v?(i.s&&r(i.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),kSt=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,CSt=/<(?:\w+:)?r>/,OSt=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function zB(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Wr(Pn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Pn(e),r&&(n.h=IB(n.t))):e.match(CSt)&&(n.r=Pn(e),n.t=Wr(Pn((e.replace(OSt,"").match(kSt)||[]).join("").replace(ys,""))),r&&(n.h=TSt(ASt(n.r)))),n):{t:""}}var PSt=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,NSt=/<(?:\w+:)?(?:si|sstItem)>/g,ISt=/<\/(?:\w+:)?(?:si|sstItem)>/;function RSt(e,t){var r=[],n="";if(!e)return r;var i=e.match(PSt);if(i){n=i[2].replace(NSt,"").split(ISt);for(var a=0;a!=n.length;++a){var s=zB(n[a].trim(),t);s!=null&&(r[r.length]=s)}i=tr(i[1]),r.Count=i.count,r.Unique=i.uniqueCount}return r}function LSt(e){return[e.read_shift(4),e.read_shift(4)]}function MSt(e,t){var r=[],n=!1;return Ad(e,function(a,s,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Xge(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function qf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function DSt(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=qf(e,4),t.U=qf(e,4),t.W=qf(e,4),t}function jSt(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},i=e.read_shift(4),a=[];i-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function $St(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(jSt(e));return t}function FSt(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function BSt(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=qf(e,4),t.U=qf(e,4),t.W=qf(e,4),t}function USt(e){var t=BSt(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Zge(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var i=!1;switch(n.AlgID){case 26126:case 26127:case 26128:i=n.Flags==36;break;case 26625:i=n.Flags==4;break;case 0:i=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Jge(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function zSt(e){var t=qf(e);switch(t.Minor){case 2:return[t.Minor,VSt(e)];case 3:return[t.Minor,WSt()];case 4:return[t.Minor,HSt(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function VSt(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Zge(e,r),i=Jge(e,e.length-e.l);return{t:"Std",h:n,v:i}}function WSt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function HSt(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ys,function(a){var s=tr(a);switch(Xu(s[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=s[o]});break;case"<dataIntegrity":n.encryptedHmacKey=s.encryptedHmacKey,n.encryptedHmacValue=s.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=s.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(s);break;default:throw s[0]}}),n}function GSt(e,t){var r={},n=r.EncryptionVersionInfo=qf(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,r.EncryptionHeader=Zge(e,i),t-=i,r.EncryptionVerifier=Jge(e,t),r}function qSt(e){var t={},r=t.EncryptionVersionInfo=qf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function KSt(e){var t=0,r,n=Xge(e),i=n.length+1,a,s,o,l,c;for(r=ap(i),r[0]=n.length,a=1;a!=i;++a)r[a]=n[a-1];for(a=i-1;a>=0;--a)s=r[a],o=t&16384?1:0,l=t<<1&32767,c=o|l,t=c^s;return t^52811}var Qge=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(s){return(s/2|s*128)&255},i=function(s,o){return n(s^o)},a=function(s){for(var o=t[s.length-1],l=104,c=s.length-1;c>=0;--c)for(var u=s[c],f=0;f!=7;++f)u&64&&(o^=r[l]),u*=2,--l;return o};return function(s){for(var o=Xge(s),l=a(o),c=o.length,u=ap(16),f=0;f!=16;++f)u[f]=0;var d,h,m;for((c&1)===1&&(d=l>>8,u[c]=i(e[0],d),--c,d=l&255,h=o[o.length-1],u[c]=i(h,d));c>0;)--c,d=l>>8,u[c]=i(o[c],d),--c,d=l&255,u[c]=i(o[c],d);for(c=15,m=15-o.length;m>0;)d=l>>8,u[c]=i(e[m],d),--c,--m,d=l&255,u[c]=i(o[c],d),--c,--m;return u}}(),YSt=function(e,t,r,n,i){i||(i=t),n||(n=Qge(e));var a,s;for(a=0;a!=t.length;++a)s=t[a],s^=n[r],s=(s>>5|s<<3)&255,i[a]=s,++r;return[i,r,n]},XSt=function(e){var t=0,r=Qge(e);return function(n){var i=YSt("",n,t,r);return t=i[1],i[0]}};function ZSt(e,t,r,n){var i={key:Ii(e),verificationBytes:Ii(e)};return r.password&&(i.verifier=KSt(r.password)),n.valid=i.verificationBytes===i.verifier,n.valid&&(n.insitu=XSt(r.password)),i}function JSt(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=qSt(e):n.Data=GSt(e,t),n}function QSt(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?JSt(e,t-2,n):ZSt(e,r.biff>=8?t:t-2,r,n),n}var eEt=function(){function e(i,a){switch(a.type){case"base64":return t(Jo(i),a);case"binary":return t(i,a);case"buffer":return t(Rr&&Buffer.isBuffer(i)?i.toString("binary"):Lm(i),a);case"array":return t(ym(i),a)}throw new Error("Unrecognized type "+a.type)}function t(i,a){var s=a||{},o=s.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,f){Array.isArray(o)&&(o[f]=[]);for(var d=/\\\w+\b/g,h=0,m,p=-1;m=d.exec(u);){switch(m[0]){case"\\cell":var y=u.slice(h,d.lastIndex-m[0].length);if(y[0]==" "&&(y=y.slice(1)),++p,y.length){var g={v:y,t:"s"};Array.isArray(o)?o[f][p]=g:o[hr({r:f,c:p})]=g}break}h=d.lastIndex}p>c.e.c&&(c.e.c=p)}),o["!ref"]=$r(c),o}function r(i,a){return kp(e(i,a),a)}function n(i){for(var a=["{\\rtf1\\ansi"],s=hi(i["!ref"]),o,l=Array.isArray(i),c=s.s.r;c<=s.e.r;++c){a.push("\\trowd\\trautofit1");for(var u=s.s.c;u<=s.e.c;++u)a.push("\\cellx"+(u+1));for(a.push("\\pard\\intbl"),u=s.s.c;u<=s.e.c;++u){var f=hr({r:c,c:u});o=l?(i[c]||[])[u]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(dd(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function tEt(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function D_(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function rEt(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(t,r,n),a=Math.min(t,r,n),s=i-a;if(s===0)return[0,0,t];var o=0,l=0,c=i+a;switch(l=s/(c>1?2-c:c),i){case t:o=((r-n)/s+6)%6;break;case r:o=(n-t)/s+2;break;case n:o=(t-r)/s+4;break}return[o/6,l,c/2]}function nEt(e){var t=e[0],r=e[1],n=e[2],i=r*2*(n<.5?n:1-n),a=n-i/2,s=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=i*o,s[0]+=i,s[1]+=l;break;case 1:l=i*(2-o),s[0]+=l,s[1]+=i;break;case 2:l=i*(o-2),s[1]+=i,s[2]+=l;break;case 3:l=i*(4-o),s[1]+=l,s[2]+=i;break;case 4:l=i*(o-4),s[2]+=i,s[0]+=l;break;case 5:l=i*(6-o),s[2]+=l,s[0]+=i;break}for(var c=0;c!=3;++c)s[c]=Math.round(s[c]*255);return s}function $5(e,t){if(t===0)return e;var r=rEt(tEt(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),D_(nEt(r))}var eye=6,iEt=15,aEt=1,Cs=eye;function F5(e){return Math.floor((e+Math.round(128/Cs)/256)*Cs)}function B5(e){return Math.floor((e-5)/Cs*100+.5)/100}function KD(e){return Math.round((e*Cs+5)/Cs*256)/256}function qI(e){return KD(B5(F5(e)))}function VB(e){var t=Math.abs(e-qI(e)),r=Cs;if(t>.005)for(Cs=aEt;Cs<iEt;++Cs)Math.abs(e-qI(e))<=t&&(t=Math.abs(e-qI(e)),r=Cs);Cs=r}function zv(e){e.width?(e.wpx=F5(e.width),e.wch=B5(e.wpx),e.MDW=Cs):e.wpx?(e.wch=B5(e.wpx),e.width=KD(e.wch),e.MDW=Cs):typeof e.wch=="number"&&(e.width=KD(e.wch),e.wpx=F5(e.width),e.MDW=Cs),e.customWidth&&delete e.customWidth}var sEt=96,tye=sEt;function rye(e){return e*96/tye}function j_(e){return e*tye/96}var oEt={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function lEt(e,t,r,n){t.Borders=[];var i={},a=!1;(e[0].match(ys)||[]).forEach(function(s){var o=tr(s);switch(Xu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Wn(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Wn(o.diagonalDown)),t.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function cEt(e,t,r,n){t.Fills=[];var i={},a=!1;(e[0].match(ys)||[]).forEach(function(s){var o=tr(s);switch(Xu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function uEt(e,t,r,n){t.Fonts=[];var i={},a=!1;(e[0].match(ys)||[]).forEach(function(s){var o=tr(s);switch(Xu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=Pn(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Wn(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?Wn(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?Wn(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?Wn(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?Wn(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?Wn(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?Wn(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=AB[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Wn(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=z0[i.color.index];i.color.index==81&&(l=z0[1]),l||(l=z0[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(i.color.rgb=$5(r.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function fEt(e,t,r){t.NumberFmt=[];for(var n=Vu(yr),i=0;i<n.length;++i)t.NumberFmt[n[i]]=yr[n[i]];var a=e[0].match(ys);if(a)for(i=0;i<a.length;++i){var s=tr(a[i]);switch(Xu(s[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Wr(Pn(s.formatCode)),l=parseInt(s.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}U0(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+s[0]+" in numFmts")}}}var qE=["numFmtId","fillId","fontId","borderId","xfId"],KE=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function dEt(e,t,r){t.CellXf=[];var n,i=!1;(e[0].match(ys)||[]).forEach(function(a){var s=tr(a),o=0;switch(Xu(s[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=s,delete n[0],o=0;o<qE.length;++o)n[qE[o]]&&(n[qE[o]]=parseInt(n[qE[o]],10));for(o=0;o<KE.length;++o)n[KE[o]]&&(n[KE[o]]=Wn(n[KE[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};s.vertical&&(l.vertical=s.vertical),s.horizontal&&(l.horizontal=s.horizontal),s.textRotation!=null&&(l.textRotation=s.textRotation),s.indent&&(l.indent=s.indent),s.wrapText&&(l.wrapText=Wn(s.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(r&&r.WTF&&!i)throw new Error("unrecognized "+s[0]+" in cellXfs")}})}var hEt=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,c){var u={};if(!o)return u;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&fEt(f,u,c),(f=o.match(i))&&uEt(f,u,l,c),(f=o.match(n))&&cEt(f,u,l,c),(f=o.match(a))&&lEt(f,u,l,c),(f=o.match(r))&&dEt(f,u,c),u}}();function pEt(e,t){var r=e.read_shift(2),n=ds(e);return[r,n]}function mEt(e,t,r){var n={};n.sz=e.read_shift(2)/20;var i=A_t(e);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var s=e.read_shift(1);s!=0&&(n.underline=s);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=E_t(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ds(e),n}var gEt=gs;function yEt(e,t){var r=e.l+t,n=e.read_shift(2),i=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:i}}var vEt=gs;function wEt(e,t,r){var n={};n.NumberFmt=[];for(var i in yr)n.NumberFmt[i]=yr[i];n.CellXf=[],n.Fonts=[];var a=[],s=!1;return Ad(e,function(l,c,u){switch(u){case 44:n.NumberFmt[l[0]]=l[1],U0(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=$5(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;default:if(c.T>0)a.push(u);else if(c.T<0)a.pop();else if(!s||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}var xEt=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function bEt(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ys)||[]).forEach(function(i){var a=tr(i);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[xEt.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function _Et(){}function SEt(){}var EEt=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,AEt=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,TEt=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function kEt(e,t,r){t.themeElements={};var n;[["clrScheme",EEt,bEt],["fontScheme",AEt,_Et],["fmtScheme",TEt,SEt]].forEach(function(i){if(!(n=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](n,t,r)})}var CEt=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function nye(e,t){(!e||e.length===0)&&(e=OEt());var r,n={};if(!(r=e.match(CEt)))throw new Error("themeElements not found in theme");return kEt(r[0],n,t),n.raw=e,n}function OEt(e,t){var r=[pge];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function PEt(e,t,r){var n=e.l+t,i=e.read_shift(4);if(i!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var s;try{s=hge(a,{type:"array"})}catch{return}var o=Uo(s,"theme/theme/theme1.xml",!0);if(o)return nye(o,r)}}function NEt(e){return e.read_shift(4)}function IEt(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=REt(e,4);break;case 2:t.xclrValue=Vge(e);break;case 3:t.xclrValue=NEt(e);break;case 4:e.l+=4;break}return e.l+=8,t}function REt(e,t){return gs(e,t)}function LEt(e,t){return gs(e,t)}function MEt(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=IEt(e);break;case 6:n[1]=LEt(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function DEt(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),a=[];i-- >0;)a.push(MEt(e,r-e.l));return{ixfe:n,ext:a}}function jEt(e,t){t.forEach(function(r){switch(r[0]){}})}function $Et(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ds(e)}}function FEt(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function BEt(e){return e.l+=4,e.read_shift(4)!=0}function UEt(e,t,r){var n={Types:[],Cell:[],Value:[]},i=r||{},a=[],s=!1,o=2;return Ad(e,function(l,c,u){switch(u){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;default:if(!c.T){if(!s||i.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function zEt(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var i=!1,a=2,s;return e.replace(ys,function(o){var l=tr(o);switch(Xu(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==l.name&&(s=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+l.i);break;default:if(!i&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function VEt(e){var t=[];if(!e)return t;var r=1;return(e.match(ys)||[]).forEach(function(n){var i=tr(n);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?r=i.i:i.i=r,t.push(i);break}}),t}function WEt(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=hr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function HEt(e,t,r){var n=[];return Ad(e,function(a,s,o){switch(o){case 63:n.push(a);break;default:if(!s.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function GEt(e,t,r,n){if(!e)return e;var i=n||{},a=!1;Ad(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function qEt(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function QX(e,t,r,n){var i=Array.isArray(e),a;t.forEach(function(s){var o=Ds(s.ref);if(i?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[s.ref],!a){a={t:"z"},i?e[o.r][o.c]=a:e[s.ref]=a;var l=hi(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=$r(l);c!==e["!ref"]&&(e["!ref"]=c)}a.c||(a.c=[]);var u={a:s.author,t:s.t,r:s.r,T:r};s.h&&(u.h=s.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(u.a==n[f].id){u.a=n[f].name||u.a;break}}a.c.push(u)})}function KEt(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(s){if(!(s===""||s.trim()==="")){var o=s.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=tr(o[0]),c={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=Ds(l.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=s.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),d=!!f&&!!f[1]&&zB(f[1])||{r:"",t:"",h:""};c.r=d.r,d.r=="<t></t>"&&(d.t=d.h=""),c.t=(d.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=d.h),n.push(c)}}}}),n}function YEt(e,t){var r=[],n=!1,i={},a=0;return e.replace(ys,function(o,l){var c=tr(o);switch(Xu(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&r.push(i);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":i.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),r}function XEt(e,t){var r=[],n=!1;return e.replace(ys,function(a){var s=tr(a);switch(Xu(s[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:s.displayname,id:s.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return a}),r}function ZEt(e){var t={};t.iauthor=e.read_shift(4);var r=Dm(e);return t.rfx=r.s,t.ref=hr(r.s),e.l+=16,t}var JEt=ds;function QEt(e,t){var r=[],n=[],i={},a=!1;return Ad(e,function(o,l,c){switch(c){case 632:n.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=n[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,r.push(i);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}var eAt="application/vnd.ms-office.vbaProject";function tAt(e){var t=jr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var i=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");jr.utils.cfb_add(t,i,e.FileIndex[n].content)}}),jr.write(t)}function rAt(){return{"!type":"dialog"}}function nAt(){return{"!type":"dialog"}}function iAt(){return{"!type":"macro"}}function aAt(){return{"!type":"macro"}}var Dy=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,i,a,s){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),s.length==0?o=!0:s.charAt(0)=="["&&(o=!0,s=s.slice(1,-1));var c=a.length>0?parseInt(a,10)|0:0,u=s.length>0?parseInt(s,10)|0:0;return o?u+=t.c:--u,l?c+=t.r:--c,i+(o?"":"$")+ca(u)+(l?"":"$")+za(c)}return function(i,a){return t=a,i.replace(e,r)}}(),iye=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,sAt=function(){return function(t,r){return t.replace(iye,function(n,i,a,s,o,l){var c=DB(s)-(a?0:r.c),u=MB(l)-(o?0:r.r),f=u==0?"":o?u+1:"["+u+"]",d=c==0?"":a?c+1:"["+c+"]";return i+"R"+f+"C"+d})}}();function aye(e,t){return e.replace(iye,function(r,n,i,a,s,o){return n+(i=="$"?i+a:ca(DB(a)+t.c))+(s=="$"?s+o:za(MB(o)+t.r))})}function oAt(e,t,r){var n=C1(t),i=n.s,a=Ds(r),s={r:a.r-i.r,c:a.c-i.c};return aye(e,s)}function lAt(e){return e.length!=1}function eZ(e){return e.replace(/_xlfn\./g,"")}function Oi(e){e.l+=1}function sp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function sye(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return oye(e);r.biff==12&&(n=4)}var i=e.read_shift(n),a=e.read_shift(n),s=sp(e),o=sp(e);return{s:{r:i,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function oye(e){var t=sp(e),r=sp(e),n=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:i,cRel:r[1],rRel:r[2]}}}function cAt(e,t,r){if(r.biff<8)return oye(e);var n=e.read_shift(r.biff==12?4:2),i=e.read_shift(r.biff==12?4:2),a=sp(e),s=sp(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:s[0],cRel:s[1],rRel:s[2]}}}function lye(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return uAt(e);var n=e.read_shift(r&&r.biff==12?4:2),i=sp(e);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function uAt(e){var t=sp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function fAt(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function dAt(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return hAt(e);var i=e.read_shift(n>=12?4:2),a=e.read_shift(2),s=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;i>524287;)i-=1048576;if(s==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:s,rRel:o}}function hAt(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),i==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:i,rRel:n}}function pAt(e,t,r){var n=(e[e.l++]&96)>>5,i=sye(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,i]}function mAt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var s=sye(e,a,r);return[n,i,s]}function gAt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function yAt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,i]}function vAt(e,t,r){var n=(e[e.l++]&96)>>5,i=cAt(e,t-1,r);return[n,i]}function wAt(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function tZ(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function xAt(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),i=[],a=0;a<=n;++a)i.push(e.read_shift(r&&r.biff==2?1:2));return i}function bAt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function _At(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function SAt(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function EAt(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function cye(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function AAt(e){return e.read_shift(2),cye(e)}function TAt(e){return e.read_shift(2),cye(e)}function kAt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=lye(e,0,r);return[n,i]}function CAt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=dAt(e,0,r);return[n,i]}function OAt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=lye(e,0,r);return[n,i,a]}function PAt(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(r&&r.biff<=3?1:2);return[NTt[i],dye[i],n]}function NAt(e,t,r){var n=e[e.l++],i=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:IAt(e);return[i,(a[0]===0?dye:PTt)[a[1]]]}function IAt(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function RAt(e,t,r){e.l+=r&&r.biff==2?3:4}function LAt(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function MAt(e){return e.l++,jm[e.read_shift(1)]}function DAt(e){return e.l++,e.read_shift(2)}function jAt(e){return e.l++,e.read_shift(1)!==0}function $At(e){return e.l++,ls(e)}function FAt(e,t,r){return e.l++,F2(e,t-1,r)}function BAt(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=vi(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=jm[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ls(e);break;case 2:r[1]=$m(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function UAt(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),i=[],a=0;a!=n;++a)i.push((r.biff==12?Dm:pP)(e));return i}function zAt(e,t,r){var n=0,i=0;r.biff==12?(n=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--i==0&&(i=256));for(var a=0,s=[];a!=n&&(s[a]=[]);++a)for(var o=0;o!=i;++o)s[a][o]=BAt(e,r.biff);return s}function VAt(e,t,r){var n=e.read_shift(1)>>>5&3,i=!r||r.biff>=8?4:2,a=e.read_shift(i);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function WAt(e,t,r){if(r.biff==5)return HAt(e);var n=e.read_shift(1)>>>5&3,i=e.read_shift(2),a=e.read_shift(4);return[n,i,a]}function HAt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function GAt(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function qAt(e,t,r){var n=e.read_shift(1)>>>5&3,i=e.read_shift(r&&r.biff==2?1:2);return[n,i]}function KAt(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function YAt(e,t,r){var n=(e[e.l++]&96)>>5,i=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,i]}var XAt=gs,ZAt=gs,JAt=gs;function U2(e,t,r){return e.l+=2,[fAt(e)]}function WB(e){return e.l+=6,[]}var QAt=U2,eTt=WB,tTt=WB,rTt=U2;function uye(e){return e.l+=2,[Ii(e),e.read_shift(2)&1]}var nTt=U2,iTt=uye,aTt=WB,sTt=U2,oTt=U2,lTt=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function cTt(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),i=e.read_shift(2),a=e.read_shift(2),s=lTt[r>>2&31];return{ixti:t,coltype:r&3,rt:s,idx:n,c:i,C:a}}function uTt(e){return e.l+=2,[e.read_shift(4)]}function fTt(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function dTt(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function hTt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function pTt(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function mTt(e){return e.l+=4,[0,0]}var rZ={1:{n:"PtgExp",f:LAt},2:{n:"PtgTbl",f:JAt},3:{n:"PtgAdd",f:Oi},4:{n:"PtgSub",f:Oi},5:{n:"PtgMul",f:Oi},6:{n:"PtgDiv",f:Oi},7:{n:"PtgPower",f:Oi},8:{n:"PtgConcat",f:Oi},9:{n:"PtgLt",f:Oi},10:{n:"PtgLe",f:Oi},11:{n:"PtgEq",f:Oi},12:{n:"PtgGe",f:Oi},13:{n:"PtgGt",f:Oi},14:{n:"PtgNe",f:Oi},15:{n:"PtgIsect",f:Oi},16:{n:"PtgUnion",f:Oi},17:{n:"PtgRange",f:Oi},18:{n:"PtgUplus",f:Oi},19:{n:"PtgUminus",f:Oi},20:{n:"PtgPercent",f:Oi},21:{n:"PtgParen",f:Oi},22:{n:"PtgMissArg",f:Oi},23:{n:"PtgStr",f:FAt},26:{n:"PtgSheet",f:fTt},27:{n:"PtgEndSheet",f:dTt},28:{n:"PtgErr",f:MAt},29:{n:"PtgBool",f:jAt},30:{n:"PtgInt",f:DAt},31:{n:"PtgNum",f:$At},32:{n:"PtgArray",f:wAt},33:{n:"PtgFunc",f:PAt},34:{n:"PtgFuncVar",f:NAt},35:{n:"PtgName",f:VAt},36:{n:"PtgRef",f:kAt},37:{n:"PtgArea",f:pAt},38:{n:"PtgMemArea",f:GAt},39:{n:"PtgMemErr",f:XAt},40:{n:"PtgMemNoMem",f:ZAt},41:{n:"PtgMemFunc",f:qAt},42:{n:"PtgRefErr",f:KAt},43:{n:"PtgAreaErr",f:gAt},44:{n:"PtgRefN",f:CAt},45:{n:"PtgAreaN",f:vAt},46:{n:"PtgMemAreaN",f:hTt},47:{n:"PtgMemNoMemN",f:pTt},57:{n:"PtgNameX",f:WAt},58:{n:"PtgRef3d",f:OAt},59:{n:"PtgArea3d",f:mAt},60:{n:"PtgRefErr3d",f:YAt},61:{n:"PtgAreaErr3d",f:yAt},255:{}},gTt={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},yTt={1:{n:"PtgElfLel",f:uye},2:{n:"PtgElfRw",f:sTt},3:{n:"PtgElfCol",f:QAt},6:{n:"PtgElfRwV",f:oTt},7:{n:"PtgElfColV",f:rTt},10:{n:"PtgElfRadical",f:nTt},11:{n:"PtgElfRadicalS",f:aTt},13:{n:"PtgElfColS",f:eTt},15:{n:"PtgElfColSV",f:tTt},16:{n:"PtgElfRadicalLel",f:iTt},25:{n:"PtgList",f:cTt},29:{n:"PtgSxName",f:uTt},255:{}},vTt={0:{n:"PtgAttrNoop",f:mTt},1:{n:"PtgAttrSemi",f:EAt},2:{n:"PtgAttrIf",f:_At},4:{n:"PtgAttrChoose",f:xAt},8:{n:"PtgAttrGoto",f:bAt},16:{n:"PtgAttrSum",f:RAt},32:{n:"PtgAttrBaxcel",f:tZ},33:{n:"PtgAttrBaxcel",f:tZ},64:{n:"PtgAttrSpace",f:AAt},65:{n:"PtgAttrSpaceSemi",f:TAt},128:{n:"PtgAttrIfError",f:SAt},255:{}};function z2(e,t,r,n){if(n.biff<8)return gs(e,t);for(var i=e.l+t,a=[],s=0;s!==r.length;++s)switch(r[s][0]){case"PtgArray":r[s][1]=zAt(e,0,n),a.push(r[s][1]);break;case"PtgMemArea":r[s][2]=UAt(e,r[s][1],n),a.push(r[s][2]);break;case"PtgExp":n&&n.biff==12&&(r[s][1][1]=e.read_shift(4),a.push(r[s][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[s][0]}return t=i-e.l,t!==0&&a.push(gs(e,t)),a}function V2(e,t,r){for(var n=e.l+t,i,a,s=[];n!=e.l;)t=n-e.l,a=e[e.l],i=rZ[a]||rZ[gTt[a]],(a===24||a===25)&&(i=(a===24?yTt:vTt)[e[e.l+1]]),!i||!i.f?gs(e,t):s.push([i.n,i.f(e,t,r)]);return s}function wTt(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],i=[],a=0;a<n.length;++a){var s=n[a];if(s)switch(s[0]){case 2:i.push('"'+s[1].replace(/"/g,'""')+'"');break;default:i.push(s[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var xTt={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function bTt(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function fye(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var i="";if(r.biff>8)switch(e[n[0]][0]){case 357:return i=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(i=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function nZ(e,t,r){var n=fye(e,t,r);return n=="#REF"?n:bTt(n,r)}function ns(e,t,r,n,i){var a=i&&i.biff||8,s={s:{c:0,r:0}},o=[],l,c,u,f=0,d=0,h,m="";if(!e[0]||!e[0][0])return"";for(var p=-1,y="",g=0,w=e[0].length;g<w;++g){var v=e[0][g];switch(v[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),p>=0){switch(e[0][p][1][0]){case 0:y=fi(" ",e[0][p][1][1]);break;case 1:y=fi("\r",e[0][p][1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}c=c+y,p=-1}o.push(c+xTt[v[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Nx(v[1][1],s,i),o.push(Ix(u,a));break;case"PtgRefN":u=r?Nx(v[1][1],r,i):v[1][1],o.push(Ix(u,a));break;case"PtgRef3d":f=v[1][1],u=Nx(v[1][2],s,i),m=nZ(n,f,i),o.push(m+"!"+Ix(u,a));break;case"PtgFunc":case"PtgFuncVar":var x=v[1][0],b=v[1][1];x||(x=0),x&=127;var S=x==0?[]:o.slice(-x);o.length-=x,b==="User"&&(b=S.shift()),o.push(b+"("+S.join(",")+")");break;case"PtgBool":o.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(v[1]);break;case"PtgNum":o.push(String(v[1]));break;case"PtgStr":o.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(v[1]);break;case"PtgAreaN":h=jX(v[1][1],r?{s:r}:s,i),o.push(HI(h,i));break;case"PtgArea":h=jX(v[1][1],s,i),o.push(HI(h,i));break;case"PtgArea3d":f=v[1][1],h=v[1][2],m=nZ(n,f,i),o.push(m+"!"+HI(h,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":d=v[1][2];var T=(n.names||[])[d-1]||(n[0]||[])[d],A=T?T.Name:"SH33TJSNAME"+String(d);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var O=v[1][1];d=v[1][2];var M;if(i.biff<=5)O<0&&(O=-O),n[O]&&(M=n[O][d]);else{var P="";if(((n[O]||[])[0]||[])[0]==14849||(((n[O]||[])[0]||[])[0]==1025?n[O][d]&&n[O][d].itab>0&&(P=n.SheetNames[n[O][d].itab-1]+"!"):P=n.SheetNames[d-1]+"!"),n[O]&&n[O][d])P+=n[O][d].Name;else if(n[0]&&n[0][d])P+=n[0][d].Name;else{var N=(fye(n,O,i)||"").split(";;");N[d-1]?P=N[d-1]:P+="SH33TJSERRX"}o.push(P);break}M||(M={Name:"SH33TJSERRY"}),o.push(M.Name);break;case"PtgParen":var V="(",B=")";if(p>=0){switch(y="",e[0][p][1][0]){case 2:V=fi(" ",e[0][p][1][1])+V;break;case 3:V=fi("\r",e[0][p][1][1])+V;break;case 4:B=fi(" ",e[0][p][1][1])+B;break;case 5:B=fi("\r",e[0][p][1][1])+B;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][p][1][0])}p=-1}o.push(V+o.pop()+B);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:v[1][1],r:v[1][0]};var G={c:r.c,r:r.r};if(n.sharedf[hr(u)]){var Z=n.sharedf[hr(u)];o.push(ns(Z,s,G,n,i))}else{var J=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(ns(c[1],s,G,n,i)),J=!0;break}J||o.push(v[1])}break;case"PtgArray":o.push("{"+wTt(v[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=g;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(v));default:throw new Error("Unrecognized Formula Token: "+String(v))}var Y=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&Y.indexOf(e[0][g][0])==-1){v=e[0][p];var U=!0;switch(v[1][0]){case 4:U=!1;case 0:y=fi(" ",v[1][1]);break;case 5:U=!1;case 1:y=fi("\r",v[1][1]);break;default:if(y="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}o.push((U?y:"")+o.pop()+(U?"":y)),p=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function _Tt(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],gs(e,t-2)];var o=V2(e,s,r);return t!==s+i&&(a=z2(e,t-s-i,o,r)),e.l=n,[o,a]}function STt(e,t,r){var n=e.l+t,i=r.biff==2?1:2,a,s=e.read_shift(i);if(s==65535)return[[],gs(e,t-2)];var o=V2(e,s,r);return t!==s+i&&(a=z2(e,t-s-i,o,r)),e.l=n,[o,a]}function ETt(e,t,r,n){var i=e.l+t,a=V2(e,n,r),s;return i!==e.l&&(s=z2(e,i-e.l,a,r)),[a,s]}function ATt(e,t,r){var n=e.l+t,i,a=e.read_shift(2),s=V2(e,a,r);return a==65535?[[],gs(e,t-2)]:(t!==a+2&&(i=z2(e,n-a-2,s,r)),[s,i])}function TTt(e){var t;if($f(e,e.l+6)!==65535)return[ls(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function KI(e,t,r){var n=e.l+t,i=Zu(e);r.biff==2&&++e.l;var a=TTt(e),s=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=STt(e,n-e.l,r);return{cell:i,val:a[0],formula:o,shared:s>>3&1,tt:a[1]}}function mP(e,t,r){var n=e.read_shift(4),i=V2(e,n,r),a=e.read_shift(4),s=a>0?z2(e,a,i,r):null;return[i,s]}var kTt=mP,gP=mP,CTt=mP,OTt=mP,PTt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dye={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},NTt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function iZ(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function YI(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Dx={},jy={};function jx(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function hye(e,t,r,n,i,a){try{n.cellNF&&(e.z=yr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Sa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(yr[t]==null&&U0(Ibt[t]||"General",t),e.t==="e")e.w=e.w||jm[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=I_(e.v);else if(e.t==="d"){var s=Vs(e.v);(s|0)===s?e.w=s.toString(10):e.w=I_(s)}else{if(e.v===void 0)return"";e.w=gm(e.v,jy)}else e.t==="d"?e.w=$l(t,Vs(e.v),jy):e.w=$l(t,e.v,jy)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=$5(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=$5(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function ITt(e,t){var r=hi(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=$r(r))}var RTt=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,LTt=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,MTt=/<(?:\w:)?hyperlink [^>]*>/mg,DTt=/"(\w*:\w*)"/,jTt=/<(?:\w:)?col\b[^>]*[\/]?>/g,$Tt=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,FTt=/<(?:\w:)?pageMargins[^>]*\/>/g,pye=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,BTt=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,UTt=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function zTt(e,t,r,n,i,a,s){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",f=e.match(LTt);f?(c=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):c=u=e;var d=c.match(pye);d?HB(d[0],o,i,r):(d=c.match(BTt))&&VTt(d[0],d[1]||"",o,i,r);var h=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=c.slice(h,h+50).match(DTt);m&&ITt(o,m[1])}var p=c.match(UTt);p&&p[1]&&YTt(p[1],i);var y=[];if(t.cellStyles){var g=c.match(jTt);g&&GTt(y,g)}f&&XTt(f[1],o,t,l,a,s);var w=u.match($Tt);w&&(o["!autofilter"]=qTt(w[0]));var v=[],x=u.match(RTt);if(x)for(h=0;h!=x.length;++h)v[h]=hi(x[h].slice(x[h].indexOf('"')+1));var b=u.match(MTt);b&&WTt(o,b,n);var S=u.match(FTt);if(S&&(o["!margins"]=HTt(tr(S[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=$r(l)),t.sheetRows>0&&o["!ref"]){var T=hi(o["!ref"]);t.sheetRows<=+T.e.r&&(T.e.r=t.sheetRows-1,T.e.r>l.e.r&&(T.e.r=l.e.r),T.e.r<T.s.r&&(T.s.r=T.e.r),T.e.c>l.e.c&&(T.e.c=l.e.c),T.e.c<T.s.c&&(T.s.c=T.e.c),o["!fullref"]=o["!ref"],o["!ref"]=$r(T))}return y.length>0&&(o["!cols"]=y),v.length>0&&(o["!merges"]=v),o}function HB(e,t,r,n){var i=tr(e);r.Sheets[n]||(r.Sheets[n]={}),i.codeName&&(r.Sheets[n].CodeName=Wr(Pn(i.codeName)))}function VTt(e,t,r,n,i){HB(e.slice(0,e.indexOf(">")),r,n,i)}function WTt(e,t,r){for(var n=Array.isArray(e),i=0;i!=t.length;++i){var a=tr(Pn(t[i]),!0);if(!a.ref)return;var s=((r||{})["!id"]||[])[a.id];s?(a.Target=s.Target,a.location&&(a.Target+="#"+Wr(a.location))):(a.Target="#"+Wr(a.location),s={Target:a.Target,TargetMode:"Internal"}),a.Rel=s,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=hi(a.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=hr({c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=a):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=a)}}}function HTt(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function GTt(e,t){for(var r=!1,n=0;n!=t.length;++n){var i=tr(t[n],!0);i.hidden&&(i.hidden=Wn(i.hidden));var a=parseInt(i.min,10)-1,s=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!r&&i.width&&(r=!0,VB(i.width)),zv(i);a<=s;)e[a++]=Ua(i)}}function qTt(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var KTt=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function YTt(e,t){t.Views||(t.Views=[{}]),(e.match(KTt)||[]).forEach(function(r,n){var i=tr(r);t.Views[n]||(t.Views[n]={}),+i.zoomScale&&(t.Views[n].zoom=+i.zoomScale),Wn(i.rightToLeft)&&(t.Views[n].RTL=!0)})}var XTt=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,a=R_("v"),s=R_("f");return function(l,c,u,f,d,h){for(var m=0,p="",y=[],g=[],w=0,v=0,x=0,b="",S,T,A=0,O=0,M,P,N=0,V=0,B=Array.isArray(h.CellXf),G,Z=[],J=[],Y=Array.isArray(c),U=[],se={},ue=!1,I=!!u.sheetStubs,z=l.split(t),H=0,q=z.length;H!=q;++H){p=z[H].trim();var F=p.length;if(F!==0){var D=0;e:for(m=0;m<F;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(u&&u.cellStyles){if(T=tr(p.slice(D,m),!0),A=T.r!=null?parseInt(T.r,10):A+1,O=-1,u.sheetRows&&u.sheetRows<A)continue;se={},ue=!1,T.ht&&(ue=!0,se.hpt=parseFloat(T.ht),se.hpx=j_(se.hpt)),T.hidden=="1"&&(ue=!0,se.hidden=!0),T.outlineLevel!=null&&(ue=!0,se.level=+T.outlineLevel),ue&&(U[A-1]=se)}break;case"<":D=m;break}if(D>=m)break;if(T=tr(p.slice(D,m),!0),A=T.r!=null?parseInt(T.r,10):A+1,O=-1,!(u.sheetRows&&u.sheetRows<A)){f.s.r>A-1&&(f.s.r=A-1),f.e.r<A-1&&(f.e.r=A-1),u&&u.cellStyles&&(se={},ue=!1,T.ht&&(ue=!0,se.hpt=parseFloat(T.ht),se.hpx=j_(se.hpt)),T.hidden=="1"&&(ue=!0,se.hidden=!0),T.outlineLevel!=null&&(ue=!0,se.level=+T.outlineLevel),ue&&(U[A-1]=se)),y=p.slice(m).split(e);for(var re=0;re!=y.length&&y[re].trim().charAt(0)=="<";++re);for(y=y.slice(re),m=0;m!=y.length;++m)if(p=y[m].trim(),p.length!==0){if(g=p.match(r),w=m,v=0,x=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,g!=null&&g.length===2){for(w=0,b=g[1],v=0;v!=b.length&&!((x=b.charCodeAt(v)-64)<1||x>26);++v)w=26*w+x;--w,O=w}else++O;for(v=0;v!=p.length&&p.charCodeAt(v)!==62;++v);if(++v,T=tr(p.slice(0,v),!0),T.r||(T.r=hr({r:A-1,c:O})),b=p.slice(v),S={t:""},(g=b.match(a))!=null&&g[1]!==""&&(S.v=Wr(g[1])),u.cellFormula){if((g=b.match(s))!=null&&g[1]!==""){if(S.f=Wr(Pn(g[1])).replace(/\r\n/g,`
`),u.xlfn||(S.f=eZ(S.f)),g[0].indexOf('t="array"')>-1)S.F=(b.match(i)||[])[1],S.F.indexOf(":")>-1&&Z.push([hi(S.F),S.F]);else if(g[0].indexOf('t="shared"')>-1){P=tr(g[0]);var K=Wr(Pn(g[1]));u.xlfn||(K=eZ(K)),J[parseInt(P.si,10)]=[P,K,T.r]}}else(g=b.match(/<f[^>]*\/>/))&&(P=tr(g[0]),J[P.si]&&(S.f=oAt(J[P.si][1],J[P.si][2],T.r)));var le=Ds(T.r);for(v=0;v<Z.length;++v)le.r>=Z[v][0].s.r&&le.r<=Z[v][0].e.r&&le.c>=Z[v][0].s.c&&le.c<=Z[v][0].e.c&&(S.F=Z[v][1])}if(T.t==null&&S.v===void 0)if(S.f||S.F)S.v=0,S.t="n";else if(I)S.t="z";else continue;else S.t=T.t||"n";switch(f.s.c>O&&(f.s.c=O),f.e.c<O&&(f.e.c=O),S.t){case"n":if(S.v==""||S.v==null){if(!I)continue;S.t="z"}else S.v=parseFloat(S.v);break;case"s":if(typeof S.v>"u"){if(!I)continue;S.t="z"}else M=Dx[parseInt(S.v,10)],S.v=M.t,S.r=M.r,u.cellHTML&&(S.h=M.h);break;case"str":S.t="s",S.v=S.v!=null?Pn(S.v):"",u.cellHTML&&(S.h=IB(S.v));break;case"inlineStr":g=b.match(n),S.t="s",g!=null&&(M=zB(g[1]))?(S.v=M.t,u.cellHTML&&(S.h=M.h)):S.v="";break;case"b":S.v=Wn(S.v);break;case"d":u.cellDates?S.v=Sa(S.v,1):(S.v=Vs(Sa(S.v,1)),S.t="n");break;case"e":(!u||u.cellText!==!1)&&(S.w=S.v),S.v=Mge[S.v];break}if(N=V=0,G=null,B&&T.s!==void 0&&(G=h.CellXf[T.s],G!=null&&(G.numFmtId!=null&&(N=G.numFmtId),u.cellStyles&&G.fillId!=null&&(V=G.fillId))),hye(S,N,V,u,d,h),u.cellDates&&B&&S.t=="n"&&k1(yr[N])&&(S.t="d",S.v=hP(S.v)),T.cm&&u.xlmeta){var xe=(u.xlmeta.Cell||[])[+T.cm-1];xe&&xe.type=="XLDAPR"&&(S.D=!0)}if(Y){var X=Ds(T.r);c[X.r]||(c[X.r]=[]),c[X.r][X.c]=S}else c[T.r]=S}}}}U.length>0&&(c["!rows"]=U)}}();function ZTt(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=i/20),r}var JTt=Dm;function QTt(){}function ekt(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=__t(e),r}function tkt(e){var t=Vl(e);return[t]}function rkt(e){var t=Mm(e);return[t]}function nkt(e){var t=Vl(e),r=e.read_shift(1);return[t,r,"b"]}function ikt(e){var t=Mm(e),r=e.read_shift(1);return[t,r,"b"]}function akt(e){var t=Vl(e),r=e.read_shift(1);return[t,r,"e"]}function skt(e){var t=Mm(e),r=e.read_shift(1);return[t,r,"e"]}function okt(e){var t=Vl(e),r=e.read_shift(4);return[t,r,"s"]}function lkt(e){var t=Mm(e),r=e.read_shift(4);return[t,r,"s"]}function ckt(e){var t=Vl(e),r=ls(e);return[t,r,"n"]}function mye(e){var t=Mm(e),r=ls(e);return[t,r,"n"]}function ukt(e){var t=Vl(e),r=FB(e);return[t,r,"n"]}function fkt(e){var t=Mm(e),r=FB(e);return[t,r,"n"]}function dkt(e){var t=Vl(e),r=jB(e);return[t,r,"is"]}function hkt(e){var t=Vl(e),r=ds(e);return[t,r,"str"]}function pkt(e){var t=Mm(e),r=ds(e);return[t,r,"str"]}function mkt(e,t,r){var n=e.l+t,i=Vl(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"b"];if(r.cellFormula){e.l+=2;var o=gP(e,n-e.l,r);s[3]=ns(o,null,i,r.supbooks,r)}else e.l=n;return s}function gkt(e,t,r){var n=e.l+t,i=Vl(e);i.r=r["!row"];var a=e.read_shift(1),s=[i,a,"e"];if(r.cellFormula){e.l+=2;var o=gP(e,n-e.l,r);s[3]=ns(o,null,i,r.supbooks,r)}else e.l=n;return s}function ykt(e,t,r){var n=e.l+t,i=Vl(e);i.r=r["!row"];var a=ls(e),s=[i,a,"n"];if(r.cellFormula){e.l+=2;var o=gP(e,n-e.l,r);s[3]=ns(o,null,i,r.supbooks,r)}else e.l=n;return s}function vkt(e,t,r){var n=e.l+t,i=Vl(e);i.r=r["!row"];var a=ds(e),s=[i,a,"str"];if(r.cellFormula){e.l+=2;var o=gP(e,n-e.l,r);s[3]=ns(o,null,i,r.supbooks,r)}else e.l=n;return s}var wkt=Dm;function xkt(e,t){var r=e.l+t,n=Dm(e),i=$B(e),a=ds(e),s=ds(e),o=ds(e);e.l=r;var l={rfx:n,relId:i,loc:a,display:o};return s&&(l.Tooltip=s),l}function bkt(){}function _kt(e,t,r){var n=e.l+t,i=Ige(e),a=e.read_shift(1),s=[i];if(s[2]=a,r.cellFormula){var o=kTt(e,n-e.l,r);s[1]=o}else e.l=n;return s}function Skt(e,t,r){var n=e.l+t,i=Dm(e),a=[i];if(r.cellFormula){var s=OTt(e,n-e.l,r);a[1]=s,e.l=n}else e.l=n;return a}var Ekt=["left","right","top","bottom","header","footer"];function Akt(e){var t={};return Ekt.forEach(function(r){t[r]=ls(e)}),t}function Tkt(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function kkt(){}function Ckt(){}function Okt(e,t,r,n,i,a,s){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,d=!1,h,m,p,y,g,w,v,x,b,S=[];o.biff=12,o["!row"]=0;var T=0,A=!1,O=[],M={},P=o.supbooks||i.supbooks||[[]];if(P.sharedf=M,P.arrayf=O,P.SheetNames=i.SheetNames||i.Sheets.map(function(Y){return Y.name}),!o.supbooks&&(o.supbooks=P,i.Names))for(var N=0;N<i.Names.length;++N)P[0][N+1]=i.Names[N];var V=[],B=[],G=!1;U5[16]={n:"BrtShortReal",f:mye};var Z;if(Ad(e,function(U,se,ue){if(!d)switch(ue){case 148:c=U;break;case 0:h=U,o.sheetRows&&o.sheetRows<=h.r&&(d=!0),x=za(y=h.r),o["!row"]=h.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=j_(U.hpt)),B[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:U[2]},U[2]){case"n":m.v=U[1];break;case"s":v=Dx[U[1]],m.v=v.t,m.r=v.r;break;case"b":m.v=!!U[1];break;case"e":m.v=U[1],o.cellText!==!1&&(m.w=jm[m.v]);break;case"str":m.t="s",m.v=U[1];break;case"is":m.t="s",m.v=U[1].t;break}if((p=s.CellXf[U[0].iStyleRef])&&hye(m,p.numFmtId,null,o,a,s),g=U[0].c==-1?g+1:U[0].c,o.dense?(l[y]||(l[y]=[]),l[y][g]=m):l[ca(g)+x]=m,o.cellFormula){for(A=!1,T=0;T<O.length;++T){var I=O[T];h.r>=I[0].s.r&&h.r<=I[0].e.r&&g>=I[0].s.c&&g<=I[0].e.c&&(m.F=$r(I[0]),A=!0)}!A&&U.length>3&&(m.f=U[3])}if(u.s.r>h.r&&(u.s.r=h.r),u.s.c>g&&(u.s.c=g),u.e.r<h.r&&(u.e.r=h.r),u.e.c<g&&(u.e.c=g),o.cellDates&&p&&m.t=="n"&&k1(yr[p.numFmtId])){var z=C0(m.v);z&&(m.t="d",m.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}Z&&(Z.type=="XLDAPR"&&(m.D=!0),Z=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;m={t:"z",v:void 0},g=U[0].c==-1?g+1:U[0].c,o.dense?(l[y]||(l[y]=[]),l[y][g]=m):l[ca(g)+x]=m,u.s.r>h.r&&(u.s.r=h.r),u.s.c>g&&(u.s.c=g),u.e.r<h.r&&(u.e.r=h.r),u.e.c<g&&(u.e.c=g),Z&&(Z.type=="XLDAPR"&&(m.D=!0),Z=void 0);break;case 176:S.push(U);break;case 49:Z=((o.xlmeta||{}).Cell||[])[U-1];break;case 494:var H=n["!id"][U.relId];for(H?(U.Target=H.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=H):U.relId==""&&(U.Target="#"+U.loc),y=U.rfx.s.r;y<=U.rfx.e.r;++y)for(g=U.rfx.s.c;g<=U.rfx.e.c;++g)o.dense?(l[y]||(l[y]=[]),l[y][g]||(l[y][g]={t:"z",v:void 0}),l[y][g].l=U):(w=hr({c:g,r:y}),l[w]||(l[w]={t:"z",v:void 0}),l[w].l=U);break;case 426:if(!o.cellFormula)break;O.push(U),b=o.dense?l[y][g]:l[ca(g)+x],b.f=ns(U[1],u,{r:h.r,c:g},P,o),b.F=$r(U[0]);break;case 427:if(!o.cellFormula)break;M[hr(U[0].s)]=U[1],b=o.dense?l[y][g]:l[ca(g)+x],b.f=ns(U[1],u,{r:h.r,c:g},P,o);break;case 60:if(!o.cellStyles)break;for(;U.e>=U.s;)V[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},G||(G=!0,VB(U.w/256)),zv(V[U.e+1]);break;case 161:l["!autofilter"]={ref:$r(U)};break;case 476:l["!margins"]=U;break;case 147:i.Sheets[r]||(i.Sheets[r]={}),U.name&&(i.Sheets[r].CodeName=U.name),(U.above||U.left)&&(l["!outline"]={above:U.above,left:U.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),U.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!se.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ue.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=$r(c||u)),o.sheetRows&&l["!ref"]){var J=hi(l["!ref"]);o.sheetRows<=+J.e.r&&(J.e.r=o.sheetRows-1,J.e.r>u.e.r&&(J.e.r=u.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>u.e.c&&(J.e.c=u.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),l["!fullref"]=l["!ref"],l["!ref"]=$r(J))}return S.length>0&&(l["!merges"]=S),V.length>0&&(l["!cols"]=V),B.length>0&&(l["!rows"]=B),l}function Pkt(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var s=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);s&&(t[+s[1]]=r?+s[2]:s[2])});var i=Wr((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,i,n]}function Nkt(e,t,r,n,i,a){var s=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var d=Pkt(f);u.s.r=u.s.c=0,u.e.c=o,c=ca(o),d[0].forEach(function(h,m){s[c+za(m)]={t:"n",v:h,z:d[1]},l=m}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(s["!ref"]=$r(u)),s}function Ikt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s,o=e.match(pye);return o&&HB(o[0],a,i,r),(s=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=s[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function Rkt(e,t){e.l+=10;var r=ds(e);return{name:r}}function Lkt(e,t,r,n,i){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},s=!1;return Ad(e,function(l,c,u){switch(u){case 550:a["!rel"]=l;break;case 651:i.Sheets[r]||(i.Sheets[r]={}),l.name&&(i.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var gye=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Mkt=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Dkt=[],jkt=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function aZ(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],i=0;i!=t.length;++i){var a=t[i];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Wn(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function sZ(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Wn(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function yye(e){sZ(e.WBProps,gye),sZ(e.CalcPr,jkt),aZ(e.WBView,Mkt),aZ(e.Sheets,Dkt),jy.date1904=Wn(e.WBProps.date1904)}var $kt="][*?/\\".split("");function Fkt(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return $kt.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var Bkt=/<\w+:workbook/;function Ukt(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,i="xmlns",a={},s=0;if(e.replace(ys,function(l,c){var u=tr(l);switch(Xu(u[0])){case"<?xml":break;case"<workbook":l.match(Bkt)&&(i="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":gye.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Wn(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Pn(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Wr(Pn(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=Pn(u.name),u.comment&&(a.Comment=u.comment),u.localSheetId&&(a.Sheet=+u.localSheetId),Wn(u.hidden||"0")&&(a.Hidden=!0),s=c+l.length;break;case"</definedName>":a.Ref=Wr(Pn(e.slice(s,c))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),a_t.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return yye(r),r}function zkt(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=HD(e),r.name=ds(e),r}function Vkt(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var i=t>8?ds(e):"";return i.length>0&&(r.CodeName=i),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Wkt(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Hkt(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),a=S_t(e),s=CTt(e,0,r),o=$B(e);e.l=n;var l={Name:a,Ptg:s};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function Gkt(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],i=!1;t||(t={}),t.biff=12;var a=[],s=[[]];return s.SheetNames=[],s.XTI=[],U5[16]={n:"BrtFRTArchID$",f:Wkt},Ad(e,function(l,c,u){switch(u){case 156:s.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=ns(l.Ptg,null,null,s,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:s[0].length?s.push([u,l]):s[0]=[u,l],s[s.length-1].XTI=[];break;case 362:s.length===0&&(s[0]=[],s[0].XTI=[]),s[s.length-1].XTI=s[s.length-1].XTI.concat(l),s.XTI=s.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),i=!0;break;case 36:n.pop(),i=!1;break;case 37:n.push(u),i=!0;break;case 38:n.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),yye(r),r.Names=a,r.supbooks=s,r}function qkt(e,t,r){return t.slice(-4)===".bin"?Gkt(e,r):Ukt(e,r)}function Kkt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?Okt(e,n,r,i,a,s,o):zTt(e,n,r,i,a,s,o)}function Ykt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?Lkt(e,n,r,i,a):Ikt(e,n,r,i,a)}function Xkt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?iAt():aAt()}function Zkt(e,t,r,n,i,a,s,o){return t.slice(-4)===".bin"?rAt():nAt()}function Jkt(e,t,r,n){return t.slice(-4)===".bin"?wEt(e,r,n):hEt(e,r,n)}function Qkt(e,t,r){return nye(e,r)}function e5t(e,t,r){return t.slice(-4)===".bin"?MSt(e,r):RSt(e,r)}function t5t(e,t,r){return t.slice(-4)===".bin"?QEt(e,r):KEt(e,r)}function r5t(e,t,r){return t.slice(-4)===".bin"?HEt(e):VEt(e)}function n5t(e,t,r,n){return r.slice(-4)===".bin"?GEt(e,t,r,n):void 0}function i5t(e,t,r){return t.slice(-4)===".bin"?UEt(e,t,r):zEt(e,t,r)}var vye=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,wye=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ac(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var i=e.match(vye),a,s,o,l;if(i)for(l=0;l!=i.length;++l)a=i[l].match(wye),(s=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),n[o]=a[2].slice(1,a[2].length-1));return n}function a5t(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(vye),i,a,s,o;if(n)for(o=0;o!=n.length;++o)i=n[o].match(wye),(a=i[1].indexOf(":"))===-1?r[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?s="xmlns"+i[1].slice(6):s=i[1].slice(a+1),r[s]=i[2].slice(1,i[2].length-1));return r}var $x;function s5t(e,t){var r=$x[e]||Wr(e);return r==="General"?gm(t):$l(r,t)}function o5t(e,t,r,n){var i=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Wn(n);break;case"i2":case"int":i=parseInt(n,10);break;case"r4":case"float":i=parseFloat(n);break;case"date":case"dateTime.tz":i=Sa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Wr(t)]=i}function l5t(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||jm[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=I_(e.v):e.w=gm(e.v):e.w=s5t(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=$x[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&k1(n)){var i=C0(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(a){if(r.WTF)throw a}}}function c5t(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=oEt[n.Pattern]||n.Pattern)}e[t.ID]=t}function u5t(e,t,r,n,i,a,s,o,l,c){var u="General",f=n.StyleID,d={};c=c||{};var h=[],m=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&s&&(f=s.StyleID);a[f]!==void 0&&(a[f].nf&&(u=a[f].nf),a[f].Interior&&h.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Wn(e);break;case"String":n.t="s",n.r=CX(Wr(e)),n.v=e.indexOf("<")>-1?Wr(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Sa(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Wr(e):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Mge[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=CX(t||e));break}if(l5t(n,u,c),c.cellFormula!==!1)if(n.Formula){var p=Wr(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Dy(p,i),delete n.Formula,n.ArrayRange=="RC"?n.F=Dy("RC:RC",i):n.ArrayRange&&(n.F=Dy(n.ArrayRange,i),l.push([hi(n.F),n.F]))}else for(m=0;m<l.length;++m)i.r>=l[m][0].s.r&&i.r<=l[m][0].e.r&&i.c>=l[m][0].s.c&&i.c<=l[m][0].e.c&&(n.F=l[m][1]);c.cellStyles&&(h.forEach(function(y){!d.patternType&&y.patternType&&(d.patternType=y.patternType)}),n.s=d),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function f5t(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function XI(e,t){var r=t||{};oge();var n=Xw(RB(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Pn(n));var i=n.slice(0,1024).toLowerCase(),a=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var s=Ua(r);return s.type="string",M_.to_workbook(n,s)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(tt){i.indexOf("<"+tt)>=0&&(a=!0)}),a)return x5t(n,r);$x={"General Number":"General","General Date":yr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":yr[15],"Short Date":yr[14],"Long Time":yr[19],"Medium Time":yr[18],"Short Time":yr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:yr[2],Standard:yr[4],Percent:yr[10],Scientific:yr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},f=[],d=r.dense?[]:{},h="",m={},p={},y=ac('<Data ss:Type="String">'),g=0,w=0,v=0,x={s:{r:2e6,c:2e6},e:{r:0,c:0}},b={},S={},T="",A=0,O=[],M={},P={},N=0,V=[],B=[],G={},Z=[],J,Y=!1,U=[],se=[],ue={},I=0,z=0,H={Sheets:[],WBProps:{date1904:!1}},q={};L_.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var F="";o=L_.exec(n);)switch(o[3]=(F=o[3]).toLowerCase()){case"data":if(F=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?u5t(n.slice(g,o.index),T,y,l[l.length-1][0]=="comment"?G:m,{c:w,r:v},b,Z[w],p,U,r):(T="",y=ac(o[0]),g=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(B.length>0&&(m.c=B),(!r.sheetRows||r.sheetRows>v)&&m.v!==void 0&&(r.dense?(d[v]||(d[v]=[]),d[v][w]=m):d[ca(w)+za(v)]=m),m.HRef&&(m.l={Target:Wr(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(I=w+(parseInt(m.MergeAcross,10)|0),z=v+(parseInt(m.MergeDown,10)|0),O.push({s:{c:w,r:v},e:{c:I,r:z}})),!r.sheetStubs)m.MergeAcross?w=I+1:++w;else if(m.MergeAcross||m.MergeDown){for(var D=w;D<=I;++D)for(var re=v;re<=z;++re)(D>w||re>v)&&(r.dense?(d[re]||(d[re]=[]),d[re][D]={t:"z"}):d[ca(D)+za(re)]={t:"z"});w=I+1}else++w;else m=a5t(o[0]),m.Index&&(w=+m.Index-1),w<x.s.c&&(x.s.c=w),w>x.e.c&&(x.e.c=w),o[0].slice(-2)==="/>"&&++w,B=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(v<x.s.r&&(x.s.r=v),v>x.e.r&&(x.e.r=v),o[0].slice(-2)==="/>"&&(p=ac(o[0]),p.Index&&(v=+p.Index-1)),w=0,++v):(p=ac(o[0]),p.Index&&(v=+p.Index-1),ue={},(p.AutoFitHeight=="0"||p.Height)&&(ue.hpx=parseInt(p.Height,10),ue.hpt=rye(ue.hpx),se[v]=ue),p.Hidden=="1"&&(ue.hidden=!0,se[v]=ue));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(h),x.s.r<=x.e.r&&x.s.c<=x.e.c&&(d["!ref"]=$r(x),r.sheetRows&&r.sheetRows<=x.e.r&&(d["!fullref"]=d["!ref"],x.e.r=r.sheetRows-1,d["!ref"]=$r(x))),O.length&&(d["!merges"]=O),Z.length>0&&(d["!cols"]=Z),se.length>0&&(d["!rows"]=se),u[h]=d}else x={s:{r:2e6,c:2e6},e:{r:0,c:0}},v=w=0,l.push([o[3],!1]),c=ac(o[0]),h=Wr(c.Name),d=r.dense?[]:{},O=[],U=[],se=[],q={name:h,Hidden:0},H.Sheets.push(q);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),Z=[],Y=!1}break;case"style":o[1]==="/"?c5t(b,S,r):S=ac(o[0]);break;case"numberformat":S.nf=Wr(ac(o[0]).Format||"General"),$x[S.nf]&&(S.nf=$x[S.nf]);for(var K=0;K!=392&&yr[K]!=S.nf;++K);if(K==392){for(K=57;K!=392;++K)if(yr[K]==null){U0(S.nf,K);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(J=ac(o[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!Y&&J.wpx>10){Y=!0,Cs=eye;for(var le=0;le<Z.length;++le)Z[le]&&zv(Z[le])}Y&&zv(J),Z[J.Index-1||Z.length]=J;for(var xe=0;xe<+J.Span;++xe)Z[Z.length]=Ua(J);break;case"namedrange":if(o[1]==="/")break;H.Names||(H.Names=[]);var X=tr(o[0]),Ie={Name:X.Name,Ref:Dy(X.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(Ie.Sheet=H.Sheets.length-1),H.Names.push(Ie);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?T+=n.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;S.Interior=ac(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?K_t(M,F,n.slice(N,o.index)):N=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f5t(G),B.push(G)}else l.push([o[3],!1]),c=ac(o[0]),G={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=ac(o[0]);d["!autofilter"]={ref:Dy(Re.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return dZ(n,r);var ie=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ie=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ie=!1}break;case"excelworkbook":switch(o[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ie=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ie=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(N,o.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else N=o.index+o[0].length;break;case"header":d["!margins"]||jx(d["!margins"]={},"xlml"),isNaN(+tr(o[0]).Margin)||(d["!margins"].header=+tr(o[0]).Margin);break;case"footer":d["!margins"]||jx(d["!margins"]={},"xlml"),isNaN(+tr(o[0]).Margin)||(d["!margins"].footer=+tr(o[0]).Margin);break;case"pagemargins":var Te=tr(o[0]);d["!margins"]||jx(d["!margins"]={},"xlml"),isNaN(+Te.Top)||(d["!margins"].top=+Te.Top),isNaN(+Te.Left)||(d["!margins"].left=+Te.Left),isNaN(+Te.Right)||(d["!margins"].right=+Te.Right),isNaN(+Te.Bottom)||(d["!margins"].bottom=+Te.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":d["!outline"]||(d["!outline"]={}),d["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":d["!outline"]||(d["!outline"]={}),d["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ie=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ie=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ie=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ie=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ie=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ie=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ie=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ie=!1}break;case"smarttags":break;default:ie=!1;break}if(ie||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?o5t(P,F,V,n.slice(N,o.index)):(V=o,N=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Me={};return!r.bookSheets&&!r.bookProps&&(Me.Sheets=u),Me.SheetNames=f,Me.Workbook=H,Me.SSF=Ua(yr),Me.Props=M,Me.Custprops=P,Me}function YD(e,t){switch(KB(t=t||{}),t.type||"base64"){case"base64":return XI(Jo(e),t);case"binary":case"buffer":case"file":return XI(e,t);case"array":return XI(Lm(e),t)}}function d5t(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=T_t(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=k_t(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var h5t=[60,1084,2066,2165,2175];function p5t(e,t,r,n,i){var a=n,s=[],o=r.slice(r.l,r.l+a);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}s.push(o),r.l+=a;for(var l=$f(r,r.l),c=XD[l],u=0;c!=null&&h5t.indexOf(l)>-1;)a=$f(r,r.l+2),u=r.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=r.slice(u,r.l+4+a),s.push(o),r.l+=4+a,c=XD[l=$f(r,r.l)];var f=mh(s);ja(f,0);var d=0;f.lens=[];for(var h=0;h<s.length;++h)f.lens.push(d),d+=s[h].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,i)}function ou(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=yr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||jm[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=I_(e.v):e.w=gm(e.v):e.w=$l(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&k1(yr[n]||String(n))){var i=C0(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function YE(e,t,r){return{v:e,ixfe:t,t:r}}function m5t(e,t){var r={opts:{}},n={},i=t.dense?[]:{},a={},s={},o=null,l=[],c="",u={},f,d="",h,m,p,y,g={},w=[],v,x,b=[],S=[],T={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},O=function(pt){return pt<8?z0[pt]:pt<64&&S[pt-8]||z0[pt]},M=function(pt,yt,Or){var qt=yt.XF.data;if(!(!qt||!qt.patternType||!Or||!Or.cellStyles)){yt.s={},yt.s.patternType=qt.patternType;var Jt;(Jt=D_(O(qt.icvFore)))&&(yt.s.fgColor={rgb:Jt}),(Jt=D_(O(qt.icvBack)))&&(yt.s.bgColor={rgb:Jt})}},P=function(pt,yt,Or){if(!(ue>1)&&!(Or.sheetRows&&pt.r>=Or.sheetRows)){if(Or.cellStyles&&yt.XF&&yt.XF.data&&M(pt,yt,Or),delete yt.ixfe,delete yt.XF,f=pt,d=hr(pt),(!s||!s.s||!s.e)&&(s={s:{r:0,c:0},e:{r:0,c:0}}),pt.r<s.s.r&&(s.s.r=pt.r),pt.c<s.s.c&&(s.s.c=pt.c),pt.r+1>s.e.r&&(s.e.r=pt.r+1),pt.c+1>s.e.c&&(s.e.c=pt.c+1),Or.cellFormula&&yt.f){for(var qt=0;qt<w.length;++qt)if(!(w[qt][0].s.c>pt.c||w[qt][0].s.r>pt.r)&&!(w[qt][0].e.c<pt.c||w[qt][0].e.r<pt.r)){yt.F=$r(w[qt][0]),(w[qt][0].s.c!=pt.c||w[qt][0].s.r!=pt.r)&&delete yt.f,yt.f&&(yt.f=""+ns(w[qt][1],s,pt,U,N));break}}Or.dense?(i[pt.r]||(i[pt.r]=[]),i[pt.r][pt.c]=yt):i[d]=yt}},N={enc:!1,sbcch:0,snames:[],sharedf:g,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(N.password=t.password);var V,B=[],G=[],Z=[],J=[],Y=!1,U=[];U.SheetNames=N.snames,U.sharedf=N.sharedf,U.arrayf=N.arrayf,U.names=[],U.XTI=[];var se=0,ue=0,I=0,z=[],H=[],q;N.codepage=1200,kc(1200);for(var F=!1;e.l<e.length-1;){var D=e.l,re=e.read_shift(2);if(re===0&&se===10)break;var K=e.l===e.length?0:e.read_shift(2),le=XD[re];if(le&&le.f){if(t.bookSheets&&se===133&&re!==133)break;if(se=re,le.r===2||le.r==12){var xe=e.read_shift(2);if(K-=2,!N.enc&&xe!==re&&((xe&255)<<8|xe>>8)!==re)throw new Error("rt mismatch: "+xe+"!="+re);le.r==12&&(e.l+=10,K-=10)}var X={};if(re===10?X=le.f(e,K,N):X=p5t(re,le,e,K,N),ue==0&&[9,521,1033,2057].indexOf(se)===-1)continue;switch(re){case 34:r.opts.Date1904=T.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(N.enc||(e.l=0),N.enc=X,!t.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=X;break;case 66:var Ie=Number(X);switch(Ie){case 21010:Ie=1200;break;case 32768:Ie=1e4;break;case 32769:Ie=1252;break}kc(N.codepage=Ie),F=!0;break;case 317:N.rrtabid=X;break;case 25:N.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:N.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(i["!type"]="dialog"),X.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),X.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:b.push(X);break;case 430:U.push([X]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(X);break;case 24:case 536:q={Name:X.Name,Ref:ns(X.rgce,s,null,U,N)},X.itab>0&&(q.Sheet=X.itab-1),U.names.push(q),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(H[X.itab-1]={ref:$r(X.rgce[0][0][1][2])});break;case 22:N.ExternCount=X;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(X),U.XTI=U.XTI.concat(X);break;case 2196:if(N.biff<8)break;q!=null&&(q.Comment=X[1]);break;case 18:i["!protect"]=X;break;case 19:X!==0&&N.WTF&&console.error("Password verifier: "+X);break;case 133:a[X.pos]=X,N.snames.push(X.name);break;case 10:{if(--ue)break;if(s.e){if(s.e.r>0&&s.e.c>0){if(s.e.r--,s.e.c--,i["!ref"]=$r(s),t.sheetRows&&t.sheetRows<=s.e.r){var Re=s.e.r;s.e.r=t.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=$r(s),s.e.r=Re}s.e.r++,s.e.c++}B.length>0&&(i["!merges"]=B),G.length>0&&(i["!objects"]=G),Z.length>0&&(i["!cols"]=Z),J.length>0&&(i["!rows"]=J),T.Sheets.push(A)}c===""?u=i:n[c]=i,i=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(N.biff===8&&(N.biff={9:2,521:3,1033:4}[re]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),N.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(N.biff=5,F=!0,kc(N.codepage=28591)),N.biff==8&&X.BIFFVer==0&&X.dt==16&&(N.biff=2),ue++)break;if(i=t.dense?[]:{},N.biff<8&&!F&&(F=!0,kc(N.codepage=t.codepage||1252)),N.biff<5||X.BIFFVer==0&&X.dt==4096){c===""&&(c="Sheet1"),s={s:{r:0,c:0},e:{r:0,c:0}};var ie={pos:e.l-K,name:c};a[ie.pos]=ie,N.snames.push(c)}else c=(a[D]||{name:""}).name;X.dt==32&&(i["!type"]="chart"),X.dt==64&&(i["!type"]="macro"),B=[],G=[],N.arrayf=w=[],Z=[],J=[],Y=!1,A={Hidden:(a[D]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(t.dense?(i[X.r]||[])[X.c]:i[hr({c:X.c,r:X.r})])&&++X.c,v={ixfe:X.ixfe,XF:b[X.ixfe]||{},v:X.val,t:"n"},I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:X.c,r:X.r},v,t);break;case 5:case 517:v={ixfe:X.ixfe,XF:b[X.ixfe],v:X.val,t:X.t},I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:X.c,r:X.r},v,t);break;case 638:v={ixfe:X.ixfe,XF:b[X.ixfe],v:X.rknum,t:"n"},I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:X.c,r:X.r},v,t);break;case 189:for(var Te=X.c;Te<=X.C;++Te){var Me=X.rkrec[Te-X.c][0];v={ixfe:Me,XF:b[Me],v:X.rkrec[Te-X.c][1],t:"n"},I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:Te,r:X.r},v,t)}break;case 6:case 518:case 1030:{if(X.val=="String"){o=X;break}if(v=YE(X.val,X.cell.ixfe,X.tt),v.XF=b[v.ixfe],t.cellFormula){var tt=X.formula;if(tt&&tt[0]&&tt[0][0]&&tt[0][0][0]=="PtgExp"){var $e=tt[0][0][1][0],De=tt[0][0][1][1],nt=hr({r:$e,c:De});g[nt]?v.f=""+ns(X.formula,s,X.cell,U,N):v.F=((t.dense?(i[$e]||[])[De]:i[nt])||{}).F}else v.f=""+ns(X.formula,s,X.cell,U,N)}I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P(X.cell,v,t),o=X}break;case 7:case 519:if(o)o.val=X,v=YE(X,o.cell.ixfe,"s"),v.XF=b[v.ixfe],t.cellFormula&&(v.f=""+ns(o.formula,s,o.cell,U,N)),I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P(o.cell,v,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(X);var qe=hr(X[0].s);if(h=t.dense?(i[X[0].s.r]||[])[X[0].s.c]:i[qe],t.cellFormula&&h){if(!o||!qe||!h)break;h.f=""+ns(X[1],s,X[0],U,N),h.F=$r(X[0])}}break;case 1212:{if(!t.cellFormula)break;if(d){if(!o)break;g[hr(o.cell)]=X[0],h=t.dense?(i[o.cell.r]||[])[o.cell.c]:i[hr(o.cell)],(h||{}).f=""+ns(X[0],s,f,U,N)}}break;case 253:v=YE(l[X.isst].t,X.ixfe,"s"),l[X.isst].h&&(v.h=l[X.isst].h),v.XF=b[v.ixfe],I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:X.c,r:X.r},v,t);break;case 513:t.sheetStubs&&(v={ixfe:X.ixfe,XF:b[X.ixfe],t:"z"},I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:X.c,r:X.r},v,t));break;case 190:if(t.sheetStubs)for(var Ue=X.c;Ue<=X.C;++Ue){var Qe=X.ixfe[Ue-X.c];v={ixfe:Qe,XF:b[Qe],t:"z"},I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:Ue,r:X.r},v,t)}break;case 214:case 516:case 4:v=YE(X.val,X.ixfe,"s"),v.XF=b[v.ixfe],I>0&&(v.z=z[v.ixfe>>8&63]),ou(v,t,r.opts.Date1904),P({c:X.c,r:X.r},v,t);break;case 0:case 512:ue===1&&(s=X);break;case 252:l=X;break;case 1054:if(N.biff==4){z[I++]=X[1];for(var Ge=0;Ge<I+163&&yr[Ge]!=X[1];++Ge);Ge>=163&&U0(X[1],I+163)}else U0(X[1],X[0]);break;case 30:{z[I++]=X;for(var Fe=0;Fe<I+163&&yr[Fe]!=X;++Fe);Fe>=163&&U0(X,I+163)}break;case 229:B=B.concat(X);break;case 93:G[X.cmo[0]]=N.lastobj=X;break;case 438:N.lastobj.TxO=X;break;case 127:N.lastobj.ImData=X;break;case 440:for(y=X[0].s.r;y<=X[0].e.r;++y)for(p=X[0].s.c;p<=X[0].e.c;++p)h=t.dense?(i[y]||[])[p]:i[hr({c:p,r:y})],h&&(h.l=X[1]);break;case 2048:for(y=X[0].s.r;y<=X[0].e.r;++y)for(p=X[0].s.c;p<=X[0].e.c;++p)h=t.dense?(i[y]||[])[p]:i[hr({c:p,r:y})],h&&h.l&&(h.l.Tooltip=X[1]);break;case 28:{if(N.biff<=5&&N.biff>=2)break;h=t.dense?(i[X[0].r]||[])[X[0].c]:i[hr(X[0])];var at=G[X[2]];h||(t.dense?(i[X[0].r]||(i[X[0].r]=[]),h=i[X[0].r][X[0].c]={t:"z"}):h=i[hr(X[0])]={t:"z"},s.e.r=Math.max(s.e.r,X[0].r),s.s.r=Math.min(s.s.r,X[0].r),s.e.c=Math.max(s.e.c,X[0].c),s.s.c=Math.min(s.s.c,X[0].c)),h.c||(h.c=[]),m={a:X[1],t:at.TxO.t},h.c.push(m)}break;case 2173:jEt(b[X.ixfe],X.ext);break;case 125:{if(!N.cellStyles)break;for(;X.e>=X.s;)Z[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},Y||(Y=!0,VB(X.w/256)),zv(Z[X.e+1])}break;case 520:{var Ze={};X.level!=null&&(J[X.r]=Ze,Ze.level=X.level),X.hidden&&(J[X.r]=Ze,Ze.hidden=!0),X.hpt&&(J[X.r]=Ze,Ze.hpt=X.hpt,Ze.hpx=j_(X.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||jx(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[re]]=X;break;case 161:i["!margins"]||jx(i["!margins"]={}),i["!margins"].header=X.header,i["!margins"].footer=X.footer;break;case 574:X.RTL&&(T.Views[0].RTL=!0);break;case 146:S=X;break;case 2198:V=X;break;case 140:x=X;break;case 442:c?A.CodeName=X||A.name:T.WBProps.CodeName=X||"ThisWorkbook";break}}else le||console.error("Missing Info for XLS Record 0x"+re.toString(16)),e.l+=K}return r.SheetNames=Vu(a).sort(function(ft,pt){return Number(ft)-Number(pt)}).map(function(ft){return a[ft].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&H.forEach(function(ft,pt){r.Sheets[r.SheetNames[pt]]["!autofilter"]=ft}),r.Strings=l,r.SSF=Ua(yr),N.enc&&(r.Encryption=N.enc),V&&(r.Themes=V),r.Metadata={},x!==void 0&&(r.Metadata.Country=x),U.names.length>0&&(T.Names=U.names),r.Workbook=T,r}var oZ={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function g5t(e,t,r){var n=jr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var i=WX(n,R_t,oZ.DSI);for(var a in i)t[a]=i[a]}catch(c){if(r.WTF)throw c}var s=jr.find(e,"/!SummaryInformation");if(s&&s.size>0)try{var o=WX(s,L_t,oZ.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(jge(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function xye(e,t){t||(t={}),KB(t),Yme(),t.codepage&&TB(t.codepage);var r,n;if(e.FullPaths){if(jr.find(e,"/encryption"))throw new Error("File is password-protected");r=jr.find(e,"!CompObj"),n=jr.find(e,"/Workbook")||jr.find(e,"/Book")}else{switch(t.type){case"base64":e=Sc(Jo(e));break;case"binary":e=Sc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}ja(e,0),n={content:e}}var i,a;if(r&&d5t(r),t.bookProps&&!t.bookSheets)i={};else{var s=Rr?"buffer":"array";if(n&&n.content)i=m5t(n.content,t);else if((a=jr.find(e,"PerfectOffice_MAIN"))&&a.content)i=Mx.to_workbook(a.content,(t.type=s,t));else if((a=jr.find(e,"NativeContent_MAIN"))&&a.content)i=Mx.to_workbook(a.content,(t.type=s,t));else throw(a=jr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&jr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=tAt(e))}var o={};return e.FullPaths&&g5t(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}var U5={0:{f:ZTt},1:{f:tkt},2:{f:ukt},3:{f:akt},4:{f:nkt},5:{f:ckt},6:{f:hkt},7:{f:okt},8:{f:vkt},9:{f:ykt},10:{f:mkt},11:{f:gkt},12:{f:rkt},13:{f:fkt},14:{f:skt},15:{f:ikt},16:{f:mye},17:{f:pkt},18:{f:lkt},19:{f:jB},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Hkt},40:{},42:{},43:{f:mEt},44:{f:pEt},45:{f:gEt},46:{f:vEt},47:{f:yEt},48:{},49:{f:w_t},50:{},51:{f:FEt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Yge},62:{f:dkt},63:{f:WEt},64:{f:kkt},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:gs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Tkt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ekt},148:{f:JTt,p:16},151:{f:bkt},152:{},153:{f:Vkt},154:{},155:{},156:{f:zkt},157:{},158:{},159:{T:1,f:LSt},160:{T:-1},161:{T:1,f:Dm},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:wkt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:$Et},336:{T:-1},337:{f:BEt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:HD},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Kge},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:_kt},427:{f:Skt},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Akt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:QTt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:xkt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:HD},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:JEt},633:{T:1},634:{T:-1},635:{T:1,f:ZEt},636:{T:-1},637:{f:b_t},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Rkt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Ckt},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XD={6:{f:KI},10:{f:Yd},12:{f:Ii},13:{f:Ii},14:{f:vi},15:{f:vi},16:{f:ls},17:{f:vi},18:{f:vi},19:{f:Ii},20:{f:KX},21:{f:KX},23:{f:Kge},24:{f:XX},25:{f:vi},26:{},27:{},28:{f:Y2t},29:{},34:{f:vi},35:{f:YX},38:{f:ls},39:{f:ls},40:{f:ls},41:{f:ls},42:{f:vi},43:{f:vi},47:{f:QSt},49:{f:P2t},51:{f:Ii},60:{},61:{f:k2t},64:{f:vi},65:{f:O2t},66:{f:Ii},77:{},80:{},81:{},82:{},85:{f:Ii},89:{},90:{},91:{},92:{f:w2t},93:{f:Z2t},94:{},95:{f:vi},96:{},97:{},99:{f:vi},125:{f:Yge},128:{f:B2t},129:{f:x2t},130:{f:Ii},131:{f:vi},132:{f:vi},133:{f:b2t},134:{},140:{f:nSt},141:{f:Ii},144:{},146:{f:aSt},151:{},152:{},153:{},154:{},155:{},156:{f:Ii},157:{},158:{},160:{f:uSt},161:{f:oSt},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:D2t},190:{f:j2t},193:{f:Yd},197:{},198:{},199:{},200:{},201:{},202:{f:vi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ii},220:{},221:{f:vi},222:{},224:{f:F2t},225:{f:v2t},226:{f:Yd},227:{},229:{f:X2t},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:_2t},253:{f:N2t},255:{f:S2t},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:zge},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:vi},353:{f:Yd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:z2t},431:{f:vi},432:{},433:{},434:{},437:{},438:{f:eSt},439:{f:vi},440:{f:tSt},441:{},442:{f:B2},443:{},444:{f:Ii},445:{},446:{},448:{f:Yd},449:{f:T2t,r:2},450:{f:Yd},512:{f:GX},513:{f:cSt},515:{f:U2t},516:{f:I2t},517:{f:qX},519:{f:fSt},520:{f:E2t},523:{},545:{f:ZX},549:{f:HX},566:{},574:{f:C2t},638:{f:M2t},659:{},1048:{},1054:{f:R2t},1084:{},1212:{f:G2t},2048:{f:rSt},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:GE},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Yd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:sSt,r:12},2173:{f:DEt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:vi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:H2t,r:12},2197:{},2198:{f:PEt,r:12},2199:{},2200:{},2201:{},2202:{f:q2t,r:12},2203:{f:Yd},2204:{},2205:{},2206:{},2207:{},2211:{f:A2t},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ii},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:lSt},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:iSt},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:GX},1:{},2:{f:mSt},3:{f:pSt},4:{f:hSt},5:{f:qX},7:{f:gSt},8:{},9:{f:GE},11:{},22:{f:Ii},30:{f:L2t},31:{},32:{},33:{f:ZX},36:{},37:{f:HX},50:{f:ySt},62:{},52:{},67:{},68:{f:Ii},69:{},86:{},126:{},127:{f:dSt},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:vSt},223:{},234:{},354:{},421:{},518:{f:KI},521:{f:GE},536:{f:XX},547:{f:YX},561:{},579:{},1030:{f:KI},1033:{f:GE},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function sc(e,t,r,n){var i=t;if(!isNaN(i)){var a=(r||[]).length||0,s=e.next(4);s.write_shift(2,i),s.write_shift(2,a),a>0&&Oge(r)&&e.push(r)}}function lZ(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var i=e.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),s=i.index,o=a&&a.index||e.length,l=Ubt(e.slice(s,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,f=0,d=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(s=0;s<l.length;++s){var p=l[s].trim(),y=p.slice(0,3).toLowerCase();if(y=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(y!="<td"&&y!="<th")){var g=p.split(/<\/t[dh]>/i);for(o=0;o<g.length;++o){var w=g[o].trim();if(w.match(/<t[dh]/i)){for(var v=w,x=0;v.charAt(0)=="<"&&(x=v.indexOf(">"))>-1;)v=v.slice(x+1);for(var b=0;b<m.length;++b){var S=m[b];S.s.c==u&&S.s.r<c&&c<=S.e.r&&(u=S.e.c+1,b=-1)}var T=tr(w.slice(0,w.indexOf(">")));d=T.colspan?+T.colspan:1,((f=+T.rowspan)>1||d>1)&&m.push({s:{r:c,c:u},e:{r:c+(f||1)-1,c:u+d-1}});var A=T.t||T["data-t"]||"";if(!v.length){u+=d;continue}if(v=gge(v),h.s.r>c&&(h.s.r=c),h.e.r<c&&(h.e.r=c),h.s.c>u&&(h.s.c=u),h.e.c<u&&(h.e.c=u),!v.length){u+=d;continue}var O={t:"s",v};r.raw||!v.trim().length||A=="s"||(v==="TRUE"?O={t:"b",v:!0}:v==="FALSE"?O={t:"b",v:!1}:isNaN(Lc(v))?isNaN(Uv(v).getDate())||(O={t:"d",v:Sa(v)},r.cellDates||(O={t:"n",v:Vs(O.v)}),O.z=r.dateNF||yr[14]):O={t:"n",v:Lc(v)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=O):n[hr({r:c,c:u})]=O,u+=d}}}}return n["!ref"]=$r(h),m.length&&(n["!merges"]=m),n}function y5t(e,t,r,n){for(var i=e["!merges"]||[],a=[],s=t.s.c;s<=t.e.c;++s){for(var o=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>r||i[c].s.c>s)&&!(i[c].e.r<r||i[c].e.c<s)){if(i[c].s.r<r||i[c].s.c<s){o=-1;break}o=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(o<0)){var u=hr({r,c:s}),f=n.dense?(e[r]||[])[s]:e[u],d=f&&f.v!=null&&(f.h||IB(f.w||(dd(f),f.w)||""))||"",h={};o>1&&(h.rowspan=o),l>1&&(h.colspan=l),n.editable?d='<span contenteditable="true">'+d+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(d='<a href="'+f.l.Target+'">'+d+"</a>")),h.id=(n.id||"sjs")+"-"+u,a.push(n_t("td",d,h))}}var m="<tr>";return m+a.join("")+"</tr>"}var v5t='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',w5t="</body></html>";function x5t(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return kp(lZ(r[0],t),t);var n=XB();return r.forEach(function(i,a){ZB(n,lZ(i,t),"Sheet"+(a+1))}),n}function b5t(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _5t(e,t){var r=t||{},n=r.header!=null?r.header:v5t,i=r.footer!=null?r.footer:w5t,a=[n],s=C1(e["!ref"]);r.dense=Array.isArray(e),a.push(b5t(e,s,r));for(var o=s.s.r;o<=s.e.r;++o)a.push(y5t(e,s,o,r));return a.push("</table>"+i),a.join("")}function bye(e,t,r){var n=r||{},i=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var s=typeof n.origin=="string"?Ds(n.origin):n.origin;i=s.r,a=s.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:i,c:a}};if(e["!ref"]){var u=C1(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var f=[],d=0,h=e["!rows"]||(e["!rows"]=[]),m=0,p=0,y=0,g=0,w=0,v=0;for(e["!cols"]||(e["!cols"]=[]);m<o.length&&p<l;++m){var x=o[m];if(cZ(x)){if(n.display)continue;h[p]={hidden:!0}}var b=x.children;for(y=g=0;y<b.length;++y){var S=b[y];if(!(n.display&&cZ(S))){var T=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):gge(S.innerHTML),A=S.getAttribute("data-z")||S.getAttribute("z");for(d=0;d<f.length;++d){var O=f[d];O.s.c==g+a&&O.s.r<p+i&&p+i<=O.e.r&&(g=O.e.c+1-a,d=-1)}v=+S.getAttribute("colspan")||1,((w=+S.getAttribute("rowspan")||1)>1||v>1)&&f.push({s:{r:p+i,c:g+a},e:{r:p+i+(w||1)-1,c:g+a+(v||1)-1}});var M={t:"s",v:T},P=S.getAttribute("data-t")||S.getAttribute("t")||"";T!=null&&(T.length==0?M.t=P||"z":n.raw||T.trim().length==0||P=="s"||(T==="TRUE"?M={t:"b",v:!0}:T==="FALSE"?M={t:"b",v:!1}:isNaN(Lc(T))?isNaN(Uv(T).getDate())||(M={t:"d",v:Sa(T)},n.cellDates||(M={t:"n",v:Vs(M.v)}),M.z=n.dateNF||yr[14]):M={t:"n",v:Lc(T)})),M.z===void 0&&A!=null&&(M.z=A);var N="",V=S.getElementsByTagName("A");if(V&&V.length)for(var B=0;B<V.length&&!(V[B].hasAttribute("href")&&(N=V[B].getAttribute("href"),N.charAt(0)!="#"));++B);N&&N.charAt(0)!="#"&&(M.l={Target:N}),n.dense?(e[p+i]||(e[p+i]=[]),e[p+i][g+a]=M):e[hr({c:g+a,r:p+i})]=M,c.e.c<g+a&&(c.e.c=g+a),g+=v}}++p}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),c.e.r=Math.max(c.e.r,p-1+i),e["!ref"]=$r(c),p>=l&&(e["!fullref"]=$r((c.e.r=o.length-m+p-1+i,c))),e}function _ye(e,t){var r=t||{},n=r.dense?[]:{};return bye(n,e,t)}function S5t(e,t){return kp(_ye(e,t),t)}function cZ(e){var t="",r=E5t(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function E5t(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function A5t(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Wr(t.replace(/<[^>]*>/g,""));return[r]}var uZ={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Sye(e,t){var r=t||{},n=RB(e),i=[],a,s,o={name:""},l="",c=0,u,f,d={},h=[],m=r.dense?[]:{},p,y,g={value:""},w="",v=0,x=[],b=-1,S=-1,T={s:{r:1e6,c:1e7},e:{r:0,c:0}},A=0,O={},M=[],P={},N=0,V=0,B=[],G=1,Z=1,J=[],Y={Names:[]},U={},se=["",""],ue=[],I={},z="",H=0,q=!1,F=!1,D=0;for(L_.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=L_.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(T.e.c>=T.s.c&&T.e.r>=T.s.r?m["!ref"]=$r(T):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=T.e.r&&(m["!fullref"]=m["!ref"],T.e.r=r.sheetRows-1,m["!ref"]=$r(T)),M.length&&(m["!merges"]=M),B.length&&(m["!rows"]=B),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),h.push(u.name),d[u.name]=m,F=!1):p[0].charAt(p[0].length-2)!=="/"&&(u=tr(p[0],!1),b=S=-1,T.s.r=T.s.c=1e7,T.e.r=T.e.c=0,m=r.dense?[]:{},M=[],B=[],F=!0);break;case"table-row-group":p[1]==="/"?--A:++A;break;case"table-row":case"":if(p[1]==="/"){b+=G,G=1;break}if(f=tr(p[0],!1),f.?b=f.-1:b==-1&&(b=0),G=+f["number-rows-repeated"]||1,G<10)for(D=0;D<G;++D)A>0&&(B[b+D]={level:A});S=-1;break;case"covered-table-cell":p[1]!=="/"&&++S,r.sheetStubs&&(r.dense?(m[b]||(m[b]=[]),m[b][S]={t:"z"}):m[hr({r:b,c:S})]={t:"z"}),w="",x=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++S,g=tr(p[0],!1),Z=parseInt(g["number-columns-repeated"]||"1",10),y={t:"z",v:null},g.formula&&r.cellFormula!=!1&&(y.f=iZ(Wr(g.formula))),(g.||g["value-type"])=="string"&&(y.t="s",y.v=Wr(g["string-value"]||""),r.dense?(m[b]||(m[b]=[]),m[b][S]=y):m[hr({r:b,c:S})]=y),S+=Z-1;else if(p[1]!=="/"){++S,w="",v=0,x=[],Z=1;var re=G?b+G-1:b;if(S>T.e.c&&(T.e.c=S),S<T.s.c&&(T.s.c=S),b<T.s.r&&(T.s.r=b),re>T.e.r&&(T.e.r=re),g=tr(p[0],!1),ue=[],I={},y={t:g.||g["value-type"],v:null},r.cellFormula)if(g.formula&&(g.formula=Wr(g.formula)),g["number-matrix-columns-spanned"]&&g["number-matrix-rows-spanned"]&&(N=parseInt(g["number-matrix-rows-spanned"],10)||0,V=parseInt(g["number-matrix-columns-spanned"],10)||0,P={s:{r:b,c:S},e:{r:b+N-1,c:S+V-1}},y.F=$r(P),J.push([P,y.F])),g.formula)y.f=iZ(g.formula);else for(D=0;D<J.length;++D)b>=J[D][0].s.r&&b<=J[D][0].e.r&&S>=J[D][0].s.c&&S<=J[D][0].e.c&&(y.F=J[D][1]);switch((g["number-columns-spanned"]||g["number-rows-spanned"])&&(N=parseInt(g["number-rows-spanned"],10)||0,V=parseInt(g["number-columns-spanned"],10)||0,P={s:{r:b,c:S},e:{r:b+N-1,c:S+V-1}},M.push(P)),g["number-columns-repeated"]&&(Z=parseInt(g["number-columns-repeated"],10)),y.t){case"boolean":y.t="b",y.v=Wn(g["boolean-value"]);break;case"float":y.t="n",y.v=parseFloat(g.value);break;case"percentage":y.t="n",y.v=parseFloat(g.value);break;case"currency":y.t="n",y.v=parseFloat(g.value);break;case"date":y.t="d",y.v=Sa(g["date-value"]),r.cellDates||(y.t="n",y.v=Vs(y.v)),y.z="m/d/yy";break;case"time":y.t="n",y.v=$bt(g["time-value"])/86400,r.cellDates&&(y.t="d",y.v=hP(y.v)),y.z="HH:MM:SS";break;case"number":y.t="n",y.v=parseFloat(g.);break;default:if(y.t==="string"||y.t==="text"||!y.t)y.t="s",g["string-value"]!=null&&(w=Wr(g["string-value"]),x=[]);else throw new Error("Unsupported value type "+y.t)}}else{if(q=!1,y.t==="s"&&(y.v=w||"",x.length&&(y.R=x),q=v==0),U.Target&&(y.l=U),ue.length>0&&(y.c=ue,ue=[]),w&&r.cellText!==!1&&(y.w=w),q&&(y.t="z",delete y.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=b))for(var K=0;K<G;++K){if(Z=parseInt(g["number-columns-repeated"]||"1",10),r.dense)for(m[b+K]||(m[b+K]=[]),m[b+K][S]=K==0?y:Ua(y);--Z>0;)m[b+K][S+Z]=Ua(y);else for(m[hr({r:b+K,c:S})]=y;--Z>0;)m[hr({r:b+K,c:S+Z})]=Ua(y);T.e.c<=S&&(T.e.c=S)}Z=parseInt(g["number-columns-repeated"]||"1",10),S+=Z-1,Z=0,y={},w="",x=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((a=i.pop())[0]!==p[3])throw"Bad state: "+a}else p[0].charAt(p[0].length-2)!=="/"&&i.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((a=i.pop())[0]!==p[3])throw"Bad state: "+a;I.t=w,x.length&&(I.R=x),I.a=z,ue.push(I)}else p[0].charAt(p[0].length-2)!=="/"&&i.push([p[3],!1]);z="",H=0,w="",v=0,x=[];break;case"creator":p[1]==="/"?z=n.slice(H,p.index):H=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((a=i.pop())[0]!==p[3])throw"Bad state: "+a}else p[0].charAt(p[0].length-2)!=="/"&&i.push([p[3],!1]);w="",v=0,x=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(O[o.name]=l,(a=i.pop())[0]!==p[3])throw"Bad state: "+a}else p[0].charAt(p[0].length-2)!=="/"&&(l="",o=tr(p[0],!1),i.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":s=tr(p[0],!1),l+=uZ[p[3]][s.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":s=tr(p[0],!1),l+=uZ[p[3]][s.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(c,p.index);break}else c=p.index+p[0].length;break;case"named-range":s=tr(p[0],!1),se=YI(s["cell-range-address"]);var le={Name:s.name,Ref:se[0]+"!"+se[1]};F&&(le.Sheet=h.length),Y.Names.push(le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(p[1]==="/"&&(!g||!g["string-value"])){var xe=A5t(n.slice(v,p.index));w=(w.length>0?w+`
`:"")+xe[0]}else tr(p[0],!1),v=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{se=YI(tr(p[0])["target-range-address"]),d[se[0]]["!autofilter"]={ref:se[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(U=tr(p[0],!1),!U.href)break;U.Target=Wr(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(se=YI(U.Target.slice(1)),U.Target="#"+se[0]+"!"+se[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var X={Sheets:d,SheetNames:h,Workbook:Y};return r.bookSheets&&delete X.Sheets,X}function fZ(e,t){t=t||{},gl(e,"META-INF/manifest.xml")&&U_t(Ni(e,"META-INF/manifest.xml"),t);var r=Uo(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Sye(Pn(r),t);return gl(e,"meta.xml")&&(n.Props=Dge(Ni(e,"meta.xml"))),n}function dZ(e,t){return Sye(e,t)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function GB(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ZD(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Pn(Lm(e))}function JD(e){var t=e.reduce(function(i,a){return i+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(i){r.set(i,n),n+=i.length}),r}function hZ(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function T5t(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,i=t+13;i>=t;--i)n=n*256+e[i];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function $_(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ua(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function us(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],i=$_(e,r),a=i&7;i=Math.floor(i/8);var s=0,o;if(i==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:s=4,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 1:s=8,o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 2:s=$_(e,r),o=e.slice(r[0],r[0]+s),r[0]+=s;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(n))}var c={data:o,type:a};t[i]==null?t[i]=[c]:t[i].push(c)}return t}function qB(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function k5t(e){for(var t,r=[],n=[0];n[0]<e.length;){var i=$_(e,n),a=us(e.slice(n[0],n[0]+i));n[0]+=i;var s={id:ua(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=us(o.data),c=ua(l[3][0].data);s.messages.push({meta:l,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=a[3])!=null&&t[0]&&(s.merge=ua(a[3][0].data)>>>0>0),r.push(s)}return r}function C5t(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=$_(t,r),i=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var s=t[r[0]++]>>2;if(s<60)++s;else{var o=s-59;s=t[r[0]],o>1&&(s|=t[r[0]+1]<<8),o>2&&(s|=t[r[0]+2]<<16),o>3&&(s|=t[r[0]+3]<<24),s>>>=0,s++,r[0]+=o}i.push(t.slice(r[0],r[0]+s)),r[0]+=s;continue}else{var l=0,c=0;if(a==1?(c=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),i=[JD(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=JD(i);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function O5t(e){for(var t=[],r=0;r<e.length;){var n=e[r++],i=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(C5t(n,e.slice(r,r+i))),r+=i}if(r!==e.length)throw new Error("data is not a valid framed stream!");return JD(t)}function P5t(e,t,r,n){var i=GB(e),a=i.getUint32(4,!0),s=(n>1?12:8)+hZ(a&(n>1?3470:398))*4,o=-1,l=-1,c=NaN,u=new Date(2001,0,1);a&512&&(o=i.getUint32(s,!0),s+=4),s+=hZ(a&(n>1?12288:4096))*4,a&16&&(l=i.getUint32(s,!0),s+=4),a&32&&(c=i.getFloat64(s,!0),s+=8),a&64&&(u.setTime(u.getTime()+i.getFloat64(s,!0)*1e3),s+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(c))f={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function N5t(e,t,r){var n=GB(e),i=n.getUint32(8,!0),a=12,s=-1,o=-1,l=NaN,c=NaN,u=new Date(2001,0,1);i&1&&(l=T5t(e,a),a+=16),i&2&&(c=n.getFloat64(a,!0),a+=8),i&4&&(u.setTime(u.getTime()+n.getFloat64(a,!0)*1e3),a+=8),i&8&&(o=n.getUint32(a,!0),a+=4),i&16&&(s=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:c>0};break;case 7:f={t:"n",v:c/86400};break;case 8:f={t:"e",v:0};break;case 9:if(s>-1)f={t:"s",v:r[s]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e.slice(0,4)))}return f}function I5t(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return P5t(e,t,r,e[0]);case 5:return N5t(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Hh(e){var t=us(e);return $_(t[1][0].data)}function pZ(e,t){var r=us(t.data),n=ua(r[1][0].data),i=r[3],a=[];return(i||[]).forEach(function(s){var o=us(s.data),l=ua(o[1][0].data)>>>0;switch(n){case 1:a[l]=ZD(o[3][0].data);break;case 8:{var c=e[Hh(o[9][0].data)][0],u=us(c.data),f=e[Hh(u[1][0].data)][0],d=ua(f.meta[1][0].data);if(d!=2001)throw new Error("2000 unexpected reference to ".concat(d));var h=us(f.data);a[l]=h[3].map(function(m){return ZD(m.data)}).join("")}break}}),a}function R5t(e,t){var r,n,i,a,s,o,l,c,u,f,d,h,m,p,y=us(e),g=ua(y[1][0].data)>>>0,w=ua(y[2][0].data)>>>0,v=((n=(r=y[8])==null?void 0:r[0])==null?void 0:n.data)&&ua(y[8][0].data)>0||!1,x,b;if((a=(i=y[7])==null?void 0:i[0])!=null&&a.data&&t!=0)x=(o=(s=y[7])==null?void 0:s[0])==null?void 0:o.data,b=(c=(l=y[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(u=y[4])==null?void 0:u[0])!=null&&f.data&&t!=1)x=(h=(d=y[4])==null?void 0:d[0])==null?void 0:h.data,b=(p=(m=y[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var S=v?4:1,T=GB(x),A=[],O=0;O<x.length/2;++O){var M=T.getUint16(O*2,!0);M<65535&&A.push([O,M])}if(A.length!=w)throw"Expected ".concat(w," cells, found ").concat(A.length);var P=[];for(O=0;O<A.length-1;++O)P[A[O][0]]=b.subarray(A[O][1]*S,A[O+1][1]*S);return A.length>=1&&(P[A[A.length-1][0]]=b.subarray(A[A.length-1][1]*S)),{R:g,cells:P}}function L5t(e,t){var r,n=us(t.data),i=(r=n==null?void 0:n[7])!=null&&r[0]?ua(n[7][0].data)>>>0>0?1:0:-1,a=qB(n[5],function(s){return R5t(s,i)});return{nrows:ua(n[4][0].data)>>>0,data:a.reduce(function(s,o){return s[o.R]||(s[o.R]=[]),o.cells.forEach(function(l,c){if(s[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));s[o.R][c]=l}),s},[])}}function M5t(e,t,r){var n,i=us(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ua(i[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(a.e.c=(ua(i[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));r["!ref"]=$r(a);var s=us(i[4][0].data),o=pZ(e,e[Hh(s[4][0].data)][0]),l=(n=s[17])!=null&&n[0]?pZ(e,e[Hh(s[17][0].data)][0]):[],c=us(s[3][0].data),u=0;c[1].forEach(function(f){var d=us(f.data),h=e[Hh(d[2][0].data)][0],m=ua(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=L5t(e,h);p.data.forEach(function(y,g){y.forEach(function(w,v){var x=hr({r:u+g,c:v}),b=I5t(w,o,l);b&&(r[x]=b)})}),u+=p.nrows})}function D5t(e,t){var r=us(t.data),n={"!ref":"A1"},i=e[Hh(r[2][0].data)],a=ua(i[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return M5t(e,i[0],n),n}function j5t(e,t){var r,n=us(t.data),i={name:(r=n[1])!=null&&r[0]?ZD(n[1][0].data):"",sheets:[]},a=qB(n[2],Hh);return a.forEach(function(s){e[s].forEach(function(o){var l=ua(o.meta[1][0].data);l==6e3&&i.sheets.push(D5t(e,o))})}),i}function $5t(e,t){var r=XB(),n=us(t.data),i=qB(n[1],Hh);if(i.forEach(function(a){e[a].forEach(function(s){var o=ua(s.meta[1][0].data);if(o==2){var l=j5t(e,s);l.sheets.forEach(function(c,u){ZB(r,c,u==0?l.name:l.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function ZI(e){var t,r,n,i,a={},s=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var c;try{c=O5t(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var u;try{u=k5t(c)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){a[f.id]=f.messages,s.push(f.id)})}}),!s.length)throw new Error("File has no messages");var o=((i=(n=(r=(t=a==null?void 0:a[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:i[0].data)&&ua(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||s.forEach(function(l){a[l].forEach(function(c){var u=ua(c.meta[1][0].data)>>>0;if(u==1)if(!o)o=c;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return $5t(a,o)}function F5t(e){return function(r){for(var n=0;n!=e.length;++n){var i=e[n];r[i[0]]===void 0&&(r[i[0]]=i[1]),i[2]==="n"&&(r[i[0]]=Number(r[i[0]]))}}}function KB(e){F5t([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function B5t(e){return hy.WS.indexOf(e)>-1?"sheet":e==hy.CS?"chart":e==hy.DS?"dialog":e==hy.MS?"macro":e&&e.length?e:"sheet"}function U5t(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,B5t(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function z5t(e,t,r,n,i,a,s,o,l,c,u,f){try{a[n]=Rx(Uo(e,r,!0),t);var d=Ni(e,t),h;switch(o){case"sheet":h=Kkt(d,t,i,l,a[n],c,u,f);break;case"chart":if(h=Ykt(d,t,i,l,a[n],c,u,f),!h||!h["!drawel"])break;var m=Jw(h["!drawel"].Target,t),p=GD(m),y=qEt(Uo(e,m,!0),Rx(Uo(e,p,!0),m)),g=Jw(y,m),w=GD(g);h=Nkt(Uo(e,g,!0),g,l,Rx(Uo(e,w,!0),g),c,h);break;case"macro":h=Xkt(d,t,i,l,a[n],c,u,f);break;case"dialog":h=Zkt(d,t,i,l,a[n],c,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}s[n]=h;var v=[];a&&a[n]&&Vu(a[n]).forEach(function(x){var b="";if(a[n][x].Type==hy.CMNT){b=Jw(a[n][x].Target,t);var S=t5t(Ni(e,b,!0),b,l);if(!S||!S.length)return;QX(h,S,!1)}a[n][x].Type==hy.TCMNT&&(b=Jw(a[n][x].Target,t),v=v.concat(YEt(Ni(e,b,!0),l)))}),v&&v.length&&QX(h,v,!0,l.people||[])}catch(x){if(l.WTF)throw x}}function fl(e){return e.charAt(0)=="/"?e.slice(1):e}function V5t(e,t){if(oge(),t=t||{},KB(t),gl(e,"META-INF/manifest.xml")||gl(e,"objectdata.xml"))return fZ(e,t);if(gl(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof ZI<"u"){if(e.FileIndex)return ZI(e);var r=jr.utils.cfb_new();return TX(e).forEach(function(B){Wbt(r,B,Vbt(e,B))}),ZI(r)}throw new Error("Unsupported NUMBERS file")}if(!gl(e,"[Content_Types].xml"))throw gl(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):gl(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=TX(e),i=F_t(Uo(e,"[Content_Types].xml")),a=!1,s,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",Ni(e,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!Ni(e,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),a=!0}i.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(Dx=[],i.sst)try{Dx=e5t(Ni(e,fl(i.sst)),i.sst,t)}catch(B){if(t.WTF)throw B}t.cellStyles&&i.themes.length&&(l=Qkt(Uo(e,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],t)),i.style&&(c=Jkt(Ni(e,fl(i.style)),i.style,l,t))}i.links.map(function(B){try{var G=Rx(Uo(e,GD(fl(B))),B);return n5t(Ni(e,fl(B)),G,B,t)}catch{}});var u=qkt(Ni(e,fl(i.workbooks[0])),i.workbooks[0],t),f={},d="";i.coreprops.length&&(d=Ni(e,fl(i.coreprops[0]),!0),d&&(f=Dge(d)),i.extprops.length!==0&&(d=Ni(e,fl(i.extprops[0]),!0),d&&W_t(d,f,t)));var h={};(!t.bookSheets||t.bookProps)&&i.custprops.length!==0&&(d=Uo(e,fl(i.custprops[0]),!0),d&&(h=G_t(d,t)));var m={};if((t.bookSheets||t.bookProps)&&(u.Sheets?s=u.Sheets.map(function(G){return G.name}):f.Worksheets&&f.SheetNames.length>0&&(s=f.SheetNames),t.bookProps&&(m.Props=f,m.Custprops=h),t.bookSheets&&typeof s<"u"&&(m.SheetNames=s),t.bookSheets?m.SheetNames:t.bookProps))return m;s={};var p={};t.bookDeps&&i.calcchain&&(p=r5t(Ni(e,fl(i.calcchain)),i.calcchain));var y=0,g={},w,v;{var x=u.Sheets;f.Worksheets=x.length,f.SheetNames=[];for(var b=0;b!=x.length;++b)f.SheetNames[b]=x[b].name}var S=a?"bin":"xml",T=i.workbooks[0].lastIndexOf("/"),A=(i.workbooks[0].slice(0,T+1)+"_rels/"+i.workbooks[0].slice(T+1)+".rels").replace(/^\//,"");gl(e,A)||(A="xl/_rels/workbook."+S+".rels");var O=Rx(Uo(e,A,!0),A.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(t.xlmeta=i5t(Ni(e,fl(i.metadata[0])),i.metadata[0],t)),(i.people||[]).length>=1&&(t.people=XEt(Ni(e,fl(i.people[0])),t)),O&&(O=U5t(O,u.Sheets));var M=Ni(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(y=0;y!=f.Worksheets;++y){var P="sheet";if(O&&O[y]?(w="xl/"+O[y][1].replace(/[\/]?xl\//,""),gl(e,w)||(w=O[y][1]),gl(e,w)||(w=A.replace(/_rels\/.*$/,"")+O[y][1]),P=O[y][2]):(w="xl/worksheets/sheet"+(y+1-M)+"."+S,w=w.replace(/sheet0\./,"sheet.")),v=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(y!=t.sheets)continue e;break;case"string":if(f.SheetNames[y].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var N=!1,V=0;V!=t.sheets.length;++V)typeof t.sheets[V]=="number"&&t.sheets[V]==y&&(N=1),typeof t.sheets[V]=="string"&&t.sheets[V].toLowerCase()==f.SheetNames[y].toLowerCase()&&(N=1);if(!N)continue e}}z5t(e,w,v,f.SheetNames[y],y,g,s,P,t,u,l,c)}return m={Directory:i,Workbook:u,Props:f,Custprops:h,Deps:p,Sheets:s,SheetNames:f.SheetNames,Strings:Dx,Styles:c,Themes:l,SSF:Ua(yr)},t&&t.bookFiles&&(e.files?(m.keys=n,m.files=e.files):(m.keys=[],m.files={},e.FullPaths.forEach(function(B,G){B=B.replace(/^Root Entry[\/]/,""),m.keys.push(B),m.files[B]=e.FileIndex[G]}))),t&&t.bookVBA&&(i.vba.length>0?m.vbaraw=Ni(e,fl(i.vba[0]),!0):i.defaults&&i.defaults.bin===eAt&&(m.vbaraw=Ni(e,"xl/vbaProject.bin",!0))),m}function W5t(e,t){var r=t||{},n="Workbook",i=jr.find(e,n);try{if(n="/!DataSpaces/Version",i=jr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(DSt(i.content),n="/!DataSpaces/DataSpaceMap",i=jr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=$St(i.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=jr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=FSt(i.content);if(s.length!=1||s[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=jr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);USt(i.content)}catch{}if(n="/EncryptionInfo",i=jr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=zSt(i.content);if(n="/EncryptedPackage",i=jr.find(e,n),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,r.password||"",r);throw new Error("File is password-protected")}function YB(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Jo(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function H5t(e,t){return jr.find(e,"EncryptedPackage")?W5t(e,t):xye(e,t)}function G5t(e,t){var r,n=e,i=t||{};return i.type||(i.type=Rr&&Buffer.isBuffer(e)?"buffer":"base64"),r=hge(n,i),V5t(r,i)}function Eye(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return YD(e.slice(r),t);default:break e}return M_.to_workbook(e,t)}function q5t(e,t){var r="",n=YB(e,t);switch(t.type){case"base64":r=Jo(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=ym(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Pn(r)),t.type="binary",Eye(r,t)}function K5t(e,t){var r=e;return t.type=="base64"&&(r=Jo(r)),r=N_.utils.decode(1200,r.slice(2),"str"),t.type="binary",Eye(r,t)}function Y5t(e){return e.match(/[^\x00-\x7F]/)?Qw(e):e}function JI(e,t,r,n){return n?(r.type="string",M_.to_workbook(e,r)):M_.to_workbook(t,r)}function QD(e,t){Yme();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return QD(new Uint8Array(e),(r=Ua(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,i=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),jy={},r.dateNF&&(jy.dateNF=r.dateNF),r.type||(r.type=Rr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Rr?"buffer":"binary",n=Dbt(e),typeof Uint8Array<"u"&&!Rr&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Y5t(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var s=new ArrayBuffer(3),o=new Uint8Array(s);if(o.foo="bar",!o.foo)return r=Ua(r),r.type="array",QD(kB(n),r)}switch((i=YB(n,r))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return H5t(jr.read(n,r),r);break;case 9:if(i[1]<=8)return xye(n,r);break;case 60:return YD(n,r);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return SSt(n,r);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return bSt.to_workbook(n,r);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?G5t(n,r):JI(e,n,r,a);case 239:return i[3]===60?YD(n,r):JI(e,n,r,a);case 255:if(i[1]===254)return K5t(n,r);if(i[1]===0&&i[2]===2&&i[3]===0)return Mx.to_workbook(n,r);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Mx.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return JX.to_workbook(n,r);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return eEt.to_workbook(n,r);break;case 10:case 13:case 32:return q5t(n,r);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return wSt.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?JX.to_workbook(n,r):JI(e,n,r,a)}function X5t(e,t,r,n,i,a,s,o){var l=za(r),c=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,d=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:r,enumerable:!1})}catch{d.__rowNum__=r}else d.__rowNum__=r;if(!s||e[r])for(var h=t.s.c;h<=t.e.c;++h){var m=s?e[r][h]:e[n[h]+l];if(m===void 0||m.t===void 0){if(c===void 0)continue;a[h]!=null&&(d[a[h]]=c);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(a[h]!=null){if(p==null)if(m.t=="e"&&p===null)d[a[h]]=null;else if(c!==void 0)d[a[h]]=c;else if(u&&p===null)d[a[h]]=null;else continue;else d[a[h]]=u&&(m.t!=="n"||m.t==="n"&&o.rawNumbers!==!1)?p:dd(m,p,o);p!=null&&(f=!1)}}return{row:d,isempty:f}}function ej(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,i=1,a=[],s=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":l=hi(u);break;case"number":l=hi(e["!ref"]),l.s.r=u;break;default:l=u}n>0&&(i=0);var f=za(l.s.r),d=[],h=[],m=0,p=0,y=Array.isArray(e),g=l.s.r,w=0,v={};y&&!e[g]&&(e[g]=[]);var x=c.skipHidden&&e["!cols"]||[],b=c.skipHidden&&e["!rows"]||[];for(w=l.s.c;w<=l.e.c;++w)if(!(x[w]||{}).hidden)switch(d[w]=ca(w),r=y?e[g][w]:e[d[w]+f],n){case 1:a[w]=w-l.s.c;break;case 2:a[w]=d[w];break;case 3:a[w]=c.header[w-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=s=dd(r,null,c),p=v[s]||0,!p)v[s]=1;else{do o=s+"_"+p++;while(v[o]);v[s]=p,v[o]=1}a[w]=o}for(g=l.s.r+i;g<=l.e.r;++g)if(!(b[g]||{}).hidden){var S=X5t(e,l,g,d,n,a,y,c);(S.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(h[m++]=S.row)}return h.length=m,h}var mZ=/"/g;function Z5t(e,t,r,n,i,a,s,o){for(var l=!0,c=[],u="",f=za(r),d=t.s.c;d<=t.e.c;++d)if(n[d]){var h=o.dense?(e[r]||[])[d]:e[n[d]+f];if(h==null)u="";else if(h.v!=null){l=!1,u=""+(o.rawNumbers&&h.t=="n"?h.v:dd(h,null,o));for(var m=0,p=0;m!==u.length;++m)if((p=u.charCodeAt(m))===i||p===a||p===34||o.forceQuotes){u='"'+u.replace(mZ,'""')+'"';break}u=="ID"&&(u='"ID"')}else h.f!=null&&!h.F?(l=!1,u="="+h.f,u.indexOf(",")>=0&&(u='"'+u.replace(mZ,'""')+'"')):u="";c.push(u)}return o.blankrows===!1&&l?null:c.join(s)}function Aye(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var i=hi(e["!ref"]),a=n.FS!==void 0?n.FS:",",s=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((a=="|"?"\\|":a)+"+$"),u="",f=[];n.dense=Array.isArray(e);for(var d=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],m=i.s.c;m<=i.e.c;++m)(d[m]||{}).hidden||(f[m]=ca(m));for(var p=0,y=i.s.r;y<=i.e.r;++y)(h[y]||{}).hidden||(u=Z5t(e,i,y,f,s,l,a,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((p++?o:"")+u)));return delete n.dense,r.join("")}function J5t(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Aye(e,t);return r}function Q5t(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var i=hi(e["!ref"]),a="",s=[],o,l=[],c=Array.isArray(e);for(o=i.s.c;o<=i.e.c;++o)s[o]=ca(o);for(var u=i.s.r;u<=i.e.r;++u)for(a=za(u),o=i.s.c;o<=i.e.c;++o)if(t=s[o]+a,r=c?(e[u]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function Tye(e,t,r){var n=r||{},i=+!n.skipHeader,a=e||{},s=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var l=typeof n.origin=="string"?Ds(n.origin):n.origin;s=l.r,o=l.c}var c,u={s:{c:0,r:0},e:{c:o,r:s+t.length-1+i}};if(a["!ref"]){var f=hi(a["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),s==-1&&(s=f.e.r+1,u.e.r=s+t.length-1+i)}else s==-1&&(s=0,u.e.r=t.length-1+i);var d=n.header||[],h=0;t.forEach(function(p,y){Vu(p).forEach(function(g){(h=d.indexOf(g))==-1&&(d[h=d.length]=g);var w=p[g],v="z",x="",b=hr({c:o+h,r:s+y+i});c=F_(a,b),w&&typeof w=="object"&&!(w instanceof Date)?a[b]=w:(typeof w=="number"?v="n":typeof w=="boolean"?v="b":typeof w=="string"?v="s":w instanceof Date?(v="d",n.cellDates||(v="n",w=Vs(w)),x=n.dateNF||yr[14]):w===null&&n.nullError&&(v="e",w=0),c?(c.t=v,c.v=w,delete c.w,delete c.R,x&&(c.z=x)):a[b]=c={t:v,v:w},x&&(c.z=x))})}),u.e.c=Math.max(u.e.c,o+d.length-1);var m=za(s);if(i)for(h=0;h<d.length;++h)a[ca(h+o)+m]={t:"s",v:d[h]};return a["!ref"]=$r(u),a}function eCt(e,t){return Tye(null,e,t)}function F_(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ds(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?F_(e,hr(t)):F_(e,hr({r:t,c:r||0}))}function tCt(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function XB(){return{SheetNames:[],Sheets:{}}}function ZB(e,t,r,n){var i=1;if(!r)for(;i<=65535&&e.SheetNames.indexOf(r="Sheet"+i)!=-1;++i,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var s=a&&a[1]||r;for(++i;i<=65535&&e.SheetNames.indexOf(r=s+i)!=-1;++i);}if(Fkt(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function rCt(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=tCt(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function nCt(e,t){return e.z=t,e}function kye(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function iCt(e,t,r){return kye(e,"#"+t,r)}function aCt(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function sCt(e,t,r,n){for(var i=typeof t!="string"?t:hi(t),a=typeof t=="string"?t:$r(t),s=i.s.r;s<=i.e.r;++s)for(var o=i.s.c;o<=i.e.c;++o){var l=F_(e,s,o);l.t="n",l.F=a,delete l.v,s==i.s.r&&o==i.s.c&&(l.f=r,n&&(l.D=!0))}return e}var oCt={encode_col:ca,encode_row:za,encode_cell:hr,encode_range:$r,decode_col:DB,decode_row:MB,split_cell:v_t,decode_cell:Ds,decode_range:C1,format_cell:dd,sheet_add_aoa:Nge,sheet_add_json:Tye,sheet_add_dom:bye,aoa_to_sheet:O1,json_to_sheet:eCt,table_to_sheet:_ye,table_to_book:S5t,sheet_to_csv:Aye,sheet_to_txt:J5t,sheet_to_json:ej,sheet_to_html:_5t,sheet_to_formulae:Q5t,sheet_to_row_object_array:ej,sheet_get_cell:F_,book_new:XB,book_append_sheet:ZB,book_set_sheet_visibility:rCt,cell_set_number_format:nCt,cell_set_hyperlink:kye,cell_set_internal_link:iCt,cell_add_comment:aCt,sheet_set_array_formula:sCt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gZ=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result.split(",")[1]),n.onerror=i=>r(i)}),lCt=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=i=>{try{const a=new Uint8Array(i.target.result),s=QD(a,{type:"array"}),o=s.SheetNames[0],l=s.Sheets[o],c=oCt.sheet_to_csv(l);t(c)}catch(a){r(a)}},n.onerror=i=>r(i),n.readAsArrayBuffer(e)}),cCt=async e=>{try{const t=await Y$();let r=[];const n=`Analyze the provided document and extract the following information in JSON format:
    {
      "amount": number,
      "date": string (YYYY-MM-DD),
      "description": string,
      "category": string (one of: Food, Transport, Utilities, Entertainment, Health, Education, Shopping, Other)
    }
    If a field cannot be determined, return null for that field. Ensure the output is valid JSON.`;if(e.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||e.type==="application/vnd.ms-excel"){const l=await lCt(e);r=[{type:"text",text:`${n}

Here is the data from the Excel sheet:
${l}`}]}else if(e.type==="application/pdf"){const l=await gZ(e);r=[{type:"text",text:n},{type:"media",mime_type:"application/pdf",data:l}]}else{const l=await gZ(e);r=[{type:"text",text:n},{type:"image_url",image_url:`data:${e.type};base64,${l}`}]}const i=new ms({content:r}),s=(await t.invoke([i])).content,o=s.match(/\{[\s\S]*\}/);return o?JSON.parse(o[0]):(console.warn("OCR Service: No JSON found in response",s),{})}catch(t){throw console.error("OCR Service: Failed to scan receipt",t),t}},uCt=({onClose:e})=>{const{addExpense:t,categories:r}=yd(),[n,i]=C.useState({amount:"",category:r[0],description:""}),[a,s]=C.useState(new Date),[o,l]=C.useState(""),[c,u]=C.useState(!1),[f,d]=C.useState(!1),[h,m]=C.useState(null),[p,y]=C.useState(null),g=async v=>{const x=v.target.files[0];if(x){if(x.size>5*1024*1024){l("File size should be less than 5MB");return}if(y(x.type),x.type.startsWith("image/")){const b=new FileReader;b.onloadend=()=>{m(b.result)},b.readAsDataURL(x)}else m(null);u(!0),l("");try{const b=await cCt(x);d(!0),setTimeout(()=>{d(!1),i(S=>({...S,amount:b.amount||S.amount,description:b.description||S.description,category:r.includes(b.category)?b.category:S.category})),b.date&&s(new Date(b.date))},1500)}catch(b){console.error("Scan failed:",b),l("Failed to scan receipt. Please enter details manually.")}finally{f||u(!1)}}},w=v=>{if(v.preventDefault(),!n.amount||parseFloat(n.amount)<=0){l("Please enter a valid amount");return}if(!n.description.trim()){l("Please enter a description");return}t({...n,amount:parseFloat(n.amount),date:T0(a,"yyyy-MM-dd")}),e()};return E.jsxs("form",{onSubmit:w,className:"space-y-4 py-4 text-white",children:[E.jsxs("div",{className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-slate-700 rounded-lg hover:border-slate-500 transition-colors bg-slate-800/30",children:[E.jsx("input",{type:"file",accept:"image/*,.pdf,.xls,.xlsx",onChange:g,className:"hidden",id:"receipt-upload",disabled:c}),E.jsx("label",{htmlFor:"receipt-upload",className:"cursor-pointer flex flex-col items-center gap-2 w-full relative h-40 justify-center",children:E.jsx(zue,{mode:"wait",children:c&&!f?E.jsxs(yu.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex flex-col items-center gap-2 text-cyan-400",children:[E.jsx(cAe,{className:"w-10 h-10 animate-bounce"}),E.jsx("span",{className:"text-sm font-medium",children:"Scanning Document..."})]},"scanning"):f?E.jsxs(yu.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"flex flex-col items-center gap-2 text-green-500",children:[E.jsx($te,{className:"w-12 h-12"}),E.jsx("span",{className:"text-lg font-bold",children:"Scan Complete!"})]},"success"):h?E.jsxs(yu.div,{initial:{opacity:0},animate:{opacity:1},className:"relative w-full h-full rounded-md overflow-hidden bg-slate-900 flex items-center justify-center",children:[E.jsx("img",{src:h,alt:"Receipt preview",className:"w-full h-full object-contain"}),E.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:E.jsx("span",{className:"text-white text-sm font-medium bg-black/60 px-3 py-1 rounded-full",children:"Click to replace"})})]},"preview"):p==="application/pdf"?E.jsxs(yu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center gap-2 text-red-400",children:[E.jsx(GEe,{className:"w-12 h-12"}),E.jsx("span",{className:"text-sm font-medium",children:"PDF Selected"}),E.jsx("span",{className:"text-xs text-slate-400",children:"Click to replace"})]},"pdf"):p==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||p==="application/vnd.ms-excel"?E.jsxs(yu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center gap-2 text-green-400",children:[E.jsx(HEe,{className:"w-12 h-12"}),E.jsx("span",{className:"text-sm font-medium",children:"Excel Selected"}),E.jsx("span",{className:"text-xs text-slate-400",children:"Click to replace"})]},"excel"):E.jsxs(yu.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center gap-2 text-slate-400",children:[E.jsx(pAe,{className:"w-10 h-10"}),E.jsxs("div",{className:"text-center",children:[E.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Upload Receipt (Image, PDF, Excel)"}),E.jsx("p",{className:"text-xs text-slate-500",children:"Max size 5MB"})]})]},"upload")})})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"amount",children:"Amount"}),E.jsx(Bs,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:n.amount,onChange:v=>i({...n,amount:v.target.value}),className:Ft("bg-slate-800/50 border-slate-700 text-white",o&&!n.amount?"border-destructive":""),autoFocus:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{children:"Category"}),E.jsxs(tme,{value:n.category,onValueChange:v=>i({...n,category:v}),children:[E.jsx(hB,{className:"bg-slate-800/50 border-slate-700 text-white",children:E.jsx(rme,{placeholder:"Select category"})}),E.jsx(pB,{className:"bg-slate-900 border-slate-800 text-white",children:r.map(v=>E.jsx(mB,{value:v,children:v},v))})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{children:"Date"}),E.jsx(VD,{date:a,setDate:s})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx(Fa,{htmlFor:"description",children:"Description"}),E.jsx(Bs,{id:"description",placeholder:"What was this for?",value:n.description,onChange:v=>i({...n,description:v.target.value}),className:Ft("bg-slate-800/50 border-slate-700 text-white",o&&!n.description?"border-destructive":"")}),o&&E.jsx("p",{className:"text-sm text-destructive",children:o})]}),E.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[E.jsx(Er,{type:"button",variant:"ghost",onClick:e,className:"text-slate-400 hover:text-white",children:"Cancel"}),E.jsx(Er,{type:"submit",className:"bg-cyan-500 hover:bg-cyan-600 text-slate-900 font-bold",children:"Add Expense"})]})]})},fCt=()=>{const{expenses:e,deleteExpense:t,formatCurrency:r,isLoading:n}=yd(),[i,a]=C.useState(!1),s=[...e].sort((l,c)=>new Date(c.date)-new Date(l.date)||c.timestamp-l.timestamp),o=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return n?E.jsx(qpe,{}):E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Expenses"}),E.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your daily spending"})]}),E.jsxs(m0e,{open:i,onOpenChange:a,children:[E.jsx(nvt,{asChild:!0,children:E.jsxs(Er,{children:[E.jsx(pb,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),E.jsxs(cB,{className:"max-h-[90vh] flex flex-col",children:[E.jsx(uB,{children:E.jsx(fB,{children:"Add New Expense"})}),E.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:E.jsx(uCt,{onClose:()=>a(!1)})})]})]})]}),s.length===0?E.jsxs("div",{className:"p-12 rounded-2xl bg-card border text-center",children:[E.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4 text-muted-foreground",children:E.jsx(pb,{className:"h-8 w-8"})}),E.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No expenses yet"}),E.jsx("p",{className:"text-muted-foreground mt-2 max-w-sm mx-auto",children:"Start tracking your spending by adding your first expense."}),E.jsx(Er,{variant:"secondary",className:"mt-6 mx-auto",onClick:()=>a(!0),children:"Add Now"})]}):E.jsx("div",{className:"grid gap-4",children:s.map(l=>E.jsxs(wn,{className:"flex items-center justify-between p-4 group hover:border-primary/50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-secondary flex items-center justify-center text-xl",children:""}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-medium text-foreground text-lg",children:l.description}),E.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx(E6,{className:"h-3 w-3"}),l.category]}),E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx(S6,{className:"h-3 w-3"}),o(l.date)]})]})]})]}),E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsx("span",{className:"text-xl font-bold text-foreground",children:r(l.amount)}),E.jsx(Er,{variant:"ghost",size:"icon",onClick:()=>t(l.id),className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 opacity-0 group-hover:opacity-100 transition-all",title:"Delete Expense",children:E.jsx(A6,{className:"h-4 w-4"})})]})]},l.id))})]})},dCt=()=>{const{categoriesRaw:e,expenses:t,formatCurrency:r,updateLimit:n}=yd(),[i,a]=C.useState(null),[s,o]=C.useState(""),l=e.map(m=>{const p=t.filter(w=>w.category_name===m.name).reduce((w,v)=>w+v.amount,0),y=m.budget_limit>0?p/m.budget_limit*100:0,g=m.budget_limit-p;return{...m,spent:p,percentage:y,remaining:g}}),c=m=>{a(m.id),o(m.budget_limit.toString())},u=async m=>{const p=parseFloat(s);isNaN(p)||await n(m,p),a(null)},f=e.reduce((m,p)=>m+(p.budget_limit||0),0),d=t.reduce((m,p)=>m+p.amount,0),h=f>0?d/f*100:0;return E.jsxs("div",{className:"space-y-8 pb-8",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground font-outfit transition-colors",children:"Budget Management"}),E.jsx("p",{className:"text-muted-foreground transition-colors",children:"Set limits and track your spending efficiency."})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsx(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:E.jsxs($n,{className:"pt-6",children:[E.jsx("div",{className:"flex items-center justify-between mb-4",children:E.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg",children:E.jsx(yC,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"})})}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Budget"}),E.jsx("p",{className:"text-2xl font-bold text-foreground",children:r(f)})]})]})}),E.jsx(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:E.jsxs($n,{className:"pt-6",children:[E.jsx("div",{className:"flex items-center justify-between mb-4",children:E.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:E.jsx(Bte,{className:"h-5 w-5 text-orange-600 dark:text-orange-500"})})}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),E.jsx("p",{className:"text-2xl font-bold text-foreground",children:r(d)})]})]})}),E.jsx(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm hover:shadow-md transition-all",children:E.jsxs($n,{className:"pt-6",children:[E.jsx("div",{className:"flex items-center justify-between mb-4",children:E.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:E.jsx(fx,{className:"h-5 w-5 text-purple-600 dark:text-purple-500"})})}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall Usage"}),E.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[h.toFixed(1),"%"]})]})]})})]}),E.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(m=>E.jsxs(wn,{className:"bg-card/50 border-border hover:border-border/80 transition-all shadow-sm group",children:[E.jsx(fs,{className:"pb-4",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"p-2 bg-muted rounded-lg group-hover:bg-background transition-colors",children:E.jsx(qte,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"})}),E.jsxs("div",{children:[E.jsx(Fs,{className:"text-foreground text-base font-bold",children:m.name}),E.jsx(zc,{className:"text-muted-foreground text-xs uppercase font-medium tracking-tight",children:"Monthly Limit"})]})]}),i===m.id?E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(Bs,{type:"number",value:s,onChange:p=>o(p.target.value),className:"w-24 h-8 bg-background border-border text-foreground text-sm focus:ring-primary"}),E.jsx(Er,{size:"icon",variant:"ghost",className:"h-8 w-8 text-emerald-600 dark:text-emerald-500 hover:bg-emerald-500/10",onClick:()=>u(m.name),children:E.jsx(hb,{className:"h-4 w-4"})}),E.jsx(Er,{size:"icon",variant:"ghost",className:"h-8 w-8 text-rose-600 dark:text-rose-500 hover:bg-rose-500/10",onClick:()=>a(null),children:E.jsx(mb,{className:"h-4 w-4"})})]}):E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("span",{className:"text-foreground font-bold text-lg",children:r(m.budget_limit)}),E.jsx(Er,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-foreground transition-colors hover:bg-muted",onClick:()=>c(m),children:E.jsx(aAe,{className:"h-3.5 w-3.5"})})]})]})}),E.jsxs($n,{className:"space-y-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[E.jsxs("span",{className:"text-muted-foreground font-medium",children:["Spent: ",r(m.spent)]}),E.jsxs("span",{className:Ft("font-bold",m.percentage>100?"text-rose-600 dark:text-rose-500":m.percentage>85?"text-orange-600 dark:text-orange-500":"text-emerald-600 dark:text-emerald-500"),children:[m.percentage.toFixed(1),"%"]})]}),E.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden shadow-inner",children:E.jsx("div",{className:Ft("h-full transition-all duration-500 rounded-full shadow-sm",m.percentage>100?"bg-rose-500":m.percentage>85?"bg-orange-500":"bg-cyan-500"),style:{width:`${Math.min(m.percentage,100)}%`}})})]}),m.percentage>100&&E.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-rose-600 dark:text-rose-500 bg-rose-500/10 p-2.5 rounded-lg border border-rose-500/20 shadow-sm animate-in fade-in zoom-in duration-300",children:[E.jsx(MEe,{className:"h-3.5 w-3.5"}),E.jsxs("span",{className:"font-bold uppercase tracking-tight",children:["Budget exceeded by ",r(Math.abs(m.remaining))]})]}),E.jsxs("div",{className:"flex justify-between items-center text-[10px] text-muted-foreground/80 font-medium",children:[E.jsxs("span",{children:["Remaining: ",r(Math.max(0,m.remaining))]}),E.jsx("span",{className:"italic",children:"Resets on 1st of next month"})]})]})]},m.id))})]})},hCt="modulepreload",pCt=function(e){return"/Spend-Mind/"+e},yZ={},QI=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=pCt(l),l in yZ)return;yZ[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":hCt,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};function sn(e){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sn(e)}var Vc=Uint8Array,Wo=Uint16Array,JB=Int32Array,QB=new Vc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e7=new Vc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vZ=new Vc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cye=function(e,t){for(var r=new Wo(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new JB(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},Oye=Cye(QB,2),mCt=Oye.b,tj=Oye.r;mCt[28]=258,tj[258]=28;var gCt=Cye(e7,0),wZ=gCt.r,rj=new Wo(32768);for(var Fn=0;Fn<32768;++Fn){var Xd=(Fn&43690)>>1|(Fn&21845)<<1;Xd=(Xd&52428)>>2|(Xd&13107)<<2,Xd=(Xd&61680)>>4|(Xd&3855)<<4,rj[Fn]=((Xd&65280)>>8|(Xd&255)<<8)>>1}var Fx=function(e,t,r){for(var n=e.length,i=0,a=new Wo(t);i<n;++i)e[i]&&++a[e[i]-1];var s=new Wo(t);for(i=1;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(r){o=new Wo(1<<t);var l=15-t;for(i=0;i<n;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],f=s[e[i]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)o[rj[f]>>l]=c}else for(o=new Wo(n),i=0;i<n;++i)e[i]&&(o[i]=rj[s[e[i]-1]++]>>15-e[i]);return o},wm=new Vc(288);for(var Fn=0;Fn<144;++Fn)wm[Fn]=8;for(var Fn=144;Fn<256;++Fn)wm[Fn]=9;for(var Fn=256;Fn<280;++Fn)wm[Fn]=7;for(var Fn=280;Fn<288;++Fn)wm[Fn]=8;var z5=new Vc(32);for(var Fn=0;Fn<32;++Fn)z5[Fn]=5;var yCt=Fx(wm,9,0),vCt=Fx(z5,5,0),Pye=function(e){return(e+7)/8|0},wCt=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Vc(e.subarray(t,r))},vf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Pw=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},e3=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return{t:Iye,l:0};if(i==1){var s=new Vc(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(b,S){return b.f-S.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,f=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=r[r[c].f<r[f].f?c++:f++],l=r[c!=u&&r[c].f<r[f].f?c++:f++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var d=a[0].s,n=1;n<i;++n)a[n].s>d&&(d=a[n].s);var h=new Wo(d+1),m=nj(r[u-1],h,0);if(m>t){var n=0,p=0,y=m-t,g=1<<y;for(a.sort(function(S,T){return h[T.s]-h[S.s]||S.f-T.f});n<i;++n){var w=a[n].s;if(h[w]>t)p+=g-(1<<m-h[w]),h[w]=t;else break}for(p>>=y;p>0;){var v=a[n].s;h[v]<t?p-=1<<t-h[v]++-1:++n}for(;n>=0&&p;--n){var x=a[n].s;h[x]==t&&(--h[x],++p)}m=t}return{t:new Vc(h),l:m}},nj=function(e,t,r){return e.s==-1?Math.max(nj(e.l,t,r+1),nj(e.r,t,r+1)):t[e.s]=r},xZ=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Wo(++t),n=0,i=e[0],a=1,s=function(l){r[n++]=l},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return{c:r.subarray(0,n),n:t}},Nw=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Nye=function(e,t,r){var n=r.length,i=Pye(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},bZ=function(e,t,r,n,i,a,s,o,l,c,u){vf(t,u++,r),++i[256];for(var f=e3(i,15),d=f.t,h=f.l,m=e3(a,15),p=m.t,y=m.l,g=xZ(d),w=g.c,v=g.n,x=xZ(p),b=x.c,S=x.n,T=new Wo(19),A=0;A<w.length;++A)++T[w[A]&31];for(var A=0;A<b.length;++A)++T[b[A]&31];for(var O=e3(T,7),M=O.t,P=O.l,N=19;N>4&&!M[vZ[N-1]];--N);var V=c+5<<3,B=Nw(i,wm)+Nw(a,z5)+s,G=Nw(i,d)+Nw(a,p)+s+14+3*N+Nw(T,M)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&V<=B&&V<=G)return Nye(t,u,e.subarray(l,l+c));var Z,J,Y,U;if(vf(t,u,1+(G<B)),u+=2,G<B){Z=Fx(d,h,0),J=d,Y=Fx(p,y,0),U=p;var se=Fx(M,P,0);vf(t,u,v-257),vf(t,u+5,S-1),vf(t,u+10,N-4),u+=14;for(var A=0;A<N;++A)vf(t,u+3*A,M[vZ[A]]);u+=3*N;for(var ue=[w,b],I=0;I<2;++I)for(var z=ue[I],A=0;A<z.length;++A){var H=z[A]&31;vf(t,u,se[H]),u+=M[H],H>15&&(vf(t,u,z[A]>>5&127),u+=z[A]>>12)}}else Z=yCt,J=wm,Y=vCt,U=z5;for(var A=0;A<o;++A){var q=n[A];if(q>255){var H=q>>18&31;Pw(t,u,Z[H+257]),u+=J[H+257],H>7&&(vf(t,u,q>>23&31),u+=QB[H]);var F=q&31;Pw(t,u,Y[F]),u+=U[F],F>3&&(Pw(t,u,q>>5&8191),u+=e7[F])}else Pw(t,u,Z[q]),u+=J[q]}return Pw(t,u,Z[256]),u+J[256]},xCt=new JB([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Iye=new Vc(0),bCt=function(e,t,r,n,i,a){var s=a.z||e.length,o=new Vc(n+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(n,o.length-i),c=a.l,u=(a.r||0)&7;if(t){u&&(l[0]=a.r>>3);for(var f=xCt[t-1],d=f>>13,h=f&8191,m=(1<<r)-1,p=a.p||new Wo(32768),y=a.h||new Wo(m+1),g=Math.ceil(r/3),w=2*g,v=function(Re){return(e[Re]^e[Re+1]<<g^e[Re+2]<<w)&m},x=new JB(25e3),b=new Wo(288),S=new Wo(32),T=0,A=0,O=a.i||0,M=0,P=a.w||0,N=0;O+2<s;++O){var V=v(O),B=O&32767,G=y[V];if(p[B]=G,y[V]=B,P<=O){var Z=s-O;if((T>7e3||M>24576)&&(Z>423||!c)){u=bZ(e,l,0,x,b,S,A,M,N,O-N,u),M=T=A=0,N=O;for(var J=0;J<286;++J)b[J]=0;for(var J=0;J<30;++J)S[J]=0}var Y=2,U=0,se=h,ue=B-G&32767;if(Z>2&&V==v(O-ue))for(var I=Math.min(d,Z)-1,z=Math.min(32767,O),H=Math.min(258,Z);ue<=z&&--se&&B!=G;){if(e[O+Y]==e[O+Y-ue]){for(var q=0;q<H&&e[O+q]==e[O+q-ue];++q);if(q>Y){if(Y=q,U=ue,q>I)break;for(var F=Math.min(ue,q-2),D=0,J=0;J<F;++J){var re=O-ue+J&32767,K=p[re],le=re-K&32767;le>D&&(D=le,G=re)}}}B=G,G=p[B],ue+=B-G&32767}if(U){x[M++]=268435456|tj[Y]<<18|wZ[U];var xe=tj[Y]&31,X=wZ[U]&31;A+=QB[xe]+e7[X],++b[257+xe],++S[X],P=O+Y,++T}else x[M++]=e[O],++b[e[O]]}}for(O=Math.max(O,P);O<s;++O)x[M++]=e[O],++b[e[O]];u=bZ(e,l,c,x,b,S,A,M,N,O-N,u),c||(a.r=u&7|l[u/8|0]<<3,u-=7,a.h=y,a.p=p,a.i=O,a.w=P)}else{for(var O=a.w||0;O<s+c;O+=65535){var Ie=O+65535;Ie>=s&&(l[u/8|0]=c,Ie=s),u=Nye(l,u+1,e.subarray(O,Ie))}a.i=s}return wCt(o,0,n+Pye(u)+i)},Rye=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,a=r.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=n+=r[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},_Ct=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new Vc(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return bCt(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},Lye=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},SCt=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=Rye();i.p(t.dictionary),Lye(e,2,i.d())}};function ij(e,t){t||(t={});var r=Rye();r.p(e);var n=_Ct(e,t,t.dictionary?6:2,4);return SCt(n,t),Lye(n,n.length-4,r.d()),n}var ECt=typeof TextDecoder<"u"&&new TextDecoder,ACt=0;try{ECt.decode(Iye,{stream:!0}),ACt=1}catch{}function TCt(e){if(Array.isArray(e))return e}function kCt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,o=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function _Z(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function CCt(e,t){if(e){if(typeof e=="string")return _Z(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_Z(e,t):void 0}}function OCt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SZ(e,t){return TCt(e)||kCt(e,t)||CCt(e,t)||OCt()}function EZ(e,t="utf8"){return new TextDecoder(t).decode(e)}const PCt=new TextEncoder;function NCt(e){return PCt.encode(e)}const ICt=1024*8,RCt=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),t3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class t7{constructor(t=ICt,r={}){L(this,"buffer");L(this,"byteLength");L(this,"byteOffset");L(this,"length");L(this,"offset");L(this,"lastWrittenByte");L(this,"littleEndian");L(this,"_data");L(this,"_mark");L(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,a=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof t7)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=t3[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===RCt&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+n));o.reverse();const l=new t3[r](o.buffer);return this.offset+=n,l.reverse(),l}const s=new t3[r](a);return this.offset+=n,s}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return EZ(this.readBytes(t))}decodeText(t=1,r="utf8"){return EZ(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(NCt(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function P1(e){let t=e.length;for(;--t>=0;)e[t]=0}const LCt=3,MCt=258,Mye=29,DCt=256,jCt=DCt+1+Mye,Dye=30,$Ct=512,FCt=new Array((jCt+2)*2);P1(FCt);const BCt=new Array(Dye*2);P1(BCt);const UCt=new Array($Ct);P1(UCt);const zCt=new Array(MCt-LCt+1);P1(zCt);const VCt=new Array(Mye);P1(VCt);const WCt=new Array(Dye);P1(WCt);const HCt=(e,t,r,n)=>{let i=e&65535|0,a=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var aj=HCt;const GCt=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},qCt=new Uint32Array(GCt()),KCt=(e,t,r,n)=>{const i=qCt,a=n+r;e^=-1;for(let s=n;s<a;s++)e=e>>>8^i[(e^t[s])&255];return e^-1};var lu=KCt,sj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jye={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const YCt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var XCt=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)YCt(r,n)&&(e[n]=r[n])}}return e},ZCt=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let s=e[n];r.set(s,i),i+=s.length}return r},$ye={assign:XCt,flattenChunks:ZCt};let Fye=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Fye=!1}const B_=new Uint8Array(256);for(let e=0;e<256;e++)B_[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;B_[254]=B_[254]=1;var JCt=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,s=e.length,o=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),a=0,i=0;a<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const QCt=(e,t)=>{if(t<65534&&e.subarray&&Fye)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var eOt=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let s=e[n++];if(s<128){a[i++]=s;continue}let o=B_[s];if(o>4){a[i++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<r;)s=s<<6|e[n++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return QCt(a,i)},tOt=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+B_[e[r]]>t?r:t},oj={string2buf:JCt,buf2string:eOt,utf8border:tOt};function rOt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nOt=rOt;const XE=16209,iOt=16191;var aOt=function(t,r){let n,i,a,s,o,l,c,u,f,d,h,m,p,y,g,w,v,x,b,S,T,A,O,M;const P=t.state;n=t.next_in,O=t.input,i=n+(t.avail_in-5),a=t.next_out,M=t.output,s=a-(r-t.avail_out),o=a+(t.avail_out-257),l=P.dmax,c=P.wsize,u=P.whave,f=P.wnext,d=P.window,h=P.hold,m=P.bits,p=P.lencode,y=P.distcode,g=(1<<P.lenbits)-1,w=(1<<P.distbits)-1;e:do{m<15&&(h+=O[n++]<<m,m+=8,h+=O[n++]<<m,m+=8),v=p[h&g];t:for(;;){if(x=v>>>24,h>>>=x,m-=x,x=v>>>16&255,x===0)M[a++]=v&65535;else if(x&16){b=v&65535,x&=15,x&&(m<x&&(h+=O[n++]<<m,m+=8),b+=h&(1<<x)-1,h>>>=x,m-=x),m<15&&(h+=O[n++]<<m,m+=8,h+=O[n++]<<m,m+=8),v=y[h&w];r:for(;;){if(x=v>>>24,h>>>=x,m-=x,x=v>>>16&255,x&16){if(S=v&65535,x&=15,m<x&&(h+=O[n++]<<m,m+=8,m<x&&(h+=O[n++]<<m,m+=8)),S+=h&(1<<x)-1,S>l){t.msg="invalid distance too far back",P.mode=XE;break e}if(h>>>=x,m-=x,x=a-s,S>x){if(x=S-x,x>u&&P.sane){t.msg="invalid distance too far back",P.mode=XE;break e}if(T=0,A=d,f===0){if(T+=c-x,x<b){b-=x;do M[a++]=d[T++];while(--x);T=a-S,A=M}}else if(f<x){if(T+=c+f-x,x-=f,x<b){b-=x;do M[a++]=d[T++];while(--x);if(T=0,f<b){x=f,b-=x;do M[a++]=d[T++];while(--x);T=a-S,A=M}}}else if(T+=f-x,x<b){b-=x;do M[a++]=d[T++];while(--x);T=a-S,A=M}for(;b>2;)M[a++]=A[T++],M[a++]=A[T++],M[a++]=A[T++],b-=3;b&&(M[a++]=A[T++],b>1&&(M[a++]=A[T++]))}else{T=a-S;do M[a++]=M[T++],M[a++]=M[T++],M[a++]=M[T++],b-=3;while(b>2);b&&(M[a++]=M[T++],b>1&&(M[a++]=M[T++]))}}else if(x&64){t.msg="invalid distance code",P.mode=XE;break e}else{v=y[(v&65535)+(h&(1<<x)-1)];continue r}break}}else if(x&64)if(x&32){P.mode=iOt;break e}else{t.msg="invalid literal/length code",P.mode=XE;break e}else{v=p[(v&65535)+(h&(1<<x)-1)];continue t}break}}while(n<i&&a<o);b=m>>3,n-=b,m-=b<<3,h&=(1<<m)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<o?257+(o-a):257-(a-o),P.hold=h,P.bits=m};const xg=15,AZ=852,TZ=592,kZ=0,r3=1,CZ=2,sOt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oOt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lOt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cOt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uOt=(e,t,r,n,i,a,s,o)=>{const l=o.bits;let c=0,u=0,f=0,d=0,h=0,m=0,p=0,y=0,g=0,w=0,v,x,b,S,T,A=null,O;const M=new Uint16Array(xg+1),P=new Uint16Array(xg+1);let N=null,V,B,G;for(c=0;c<=xg;c++)M[c]=0;for(u=0;u<n;u++)M[t[r+u]]++;for(h=l,d=xg;d>=1&&M[d]===0;d--);if(h>d&&(h=d),d===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<d&&M[f]===0;f++);for(h<f&&(h=f),y=1,c=1;c<=xg;c++)if(y<<=1,y-=M[c],y<0)return-1;if(y>0&&(e===kZ||d!==1))return-1;for(P[1]=0,c=1;c<xg;c++)P[c+1]=P[c]+M[c];for(u=0;u<n;u++)t[r+u]!==0&&(s[P[t[r+u]]++]=u);if(e===kZ?(A=N=s,O=20):e===r3?(A=sOt,N=oOt,O=257):(A=lOt,N=cOt,O=0),w=0,u=0,c=f,T=a,m=h,p=0,b=-1,g=1<<h,S=g-1,e===r3&&g>AZ||e===CZ&&g>TZ)return 1;for(;;){V=c-p,s[u]+1<O?(B=0,G=s[u]):s[u]>=O?(B=N[s[u]-O],G=A[s[u]-O]):(B=96,G=0),v=1<<c-p,x=1<<m,f=x;do x-=v,i[T+(w>>p)+x]=V<<24|B<<16|G|0;while(x!==0);for(v=1<<c-1;w&v;)v>>=1;if(v!==0?(w&=v-1,w+=v):w=0,u++,--M[c]===0){if(c===d)break;c=t[r+s[u]]}if(c>h&&(w&S)!==b){for(p===0&&(p=h),T+=f,m=c-p,y=1<<m;m+p<d&&(y-=M[m+p],!(y<=0));)m++,y<<=1;if(g+=1<<m,e===r3&&g>AZ||e===CZ&&g>TZ)return 1;b=w&S,i[b]=h<<24|m<<16|T-a|0}}return w!==0&&(i[T+w]=c-p<<24|64<<16|0),o.bits=h,0};var Bx=uOt;const fOt=0,Bye=1,Uye=2,{Z_FINISH:OZ,Z_BLOCK:dOt,Z_TREES:ZE,Z_OK:xm,Z_STREAM_END:hOt,Z_NEED_DICT:pOt,Z_STREAM_ERROR:Fl,Z_DATA_ERROR:zye,Z_MEM_ERROR:Vye,Z_BUF_ERROR:mOt,Z_DEFLATED:PZ}=jye,yP=16180,NZ=16181,IZ=16182,RZ=16183,LZ=16184,MZ=16185,DZ=16186,jZ=16187,$Z=16188,FZ=16189,V5=16190,wf=16191,n3=16192,BZ=16193,i3=16194,UZ=16195,zZ=16196,VZ=16197,WZ=16198,JE=16199,QE=16200,HZ=16201,GZ=16202,qZ=16203,KZ=16204,YZ=16205,a3=16206,XZ=16207,ZZ=16208,zn=16209,Wye=16210,Hye=16211,gOt=852,yOt=592,vOt=15,wOt=vOt,JZ=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function xOt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Fm=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<yP||t.mode>Hye?1:0},Gye=e=>{if(Fm(e))return Fl;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=yP,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(gOt),t.distcode=t.distdyn=new Int32Array(yOt),t.sane=1,t.back=-1,xm},qye=e=>{if(Fm(e))return Fl;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Gye(e)},Kye=(e,t)=>{let r;if(Fm(e))return Fl;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Fl:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,qye(e))},Yye=(e,t)=>{if(!e)return Fl;const r=new xOt;e.state=r,r.strm=e,r.window=null,r.mode=yP;const n=Kye(e,t);return n!==xm&&(e.state=null),n},bOt=e=>Yye(e,wOt);let QZ=!0,s3,o3;const _Ot=e=>{if(QZ){s3=new Int32Array(512),o3=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Bx(Bye,e.lens,0,288,s3,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Bx(Uye,e.lens,0,32,o3,0,e.work,{bits:5}),QZ=!1}e.lencode=s3,e.lenbits=9,e.distcode=o3,e.distbits=5},Xye=(e,t,r,n)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},SOt=(e,t)=>{let r,n,i,a,s,o,l,c,u,f,d,h,m,p,y=0,g,w,v,x,b,S,T,A;const O=new Uint8Array(4);let M,P;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Fm(e)||!e.output||!e.input&&e.avail_in!==0)return Fl;r=e.state,r.mode===wf&&(r.mode=n3),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=r.hold,u=r.bits,f=o,d=l,A=xm;e:for(;;)switch(r.mode){case yP:if(r.wrap===0){r.mode=n3;break}for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,O[0]=c&255,O[1]=c>>>8&255,r.check=lu(r.check,O,2,0),c=0,u=0,r.mode=NZ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=zn;break}if((c&15)!==PZ){e.msg="unknown compression method",r.mode=zn;break}if(c>>>=4,u-=4,T=(c&15)+8,r.wbits===0&&(r.wbits=T),T>15||T>r.wbits){e.msg="invalid window size",r.mode=zn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=c&512?FZ:wf,c=0,u=0;break;case NZ:for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==PZ){e.msg="unknown compression method",r.mode=zn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=zn;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,r.check=lu(r.check,O,2,0)),c=0,u=0,r.mode=IZ;case IZ:for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,O[2]=c>>>16&255,O[3]=c>>>24&255,r.check=lu(r.check,O,4,0)),c=0,u=0,r.mode=RZ;case RZ:for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,r.check=lu(r.check,O,2,0)),c=0,u=0,r.mode=LZ;case LZ:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(O[0]=c&255,O[1]=c>>>8&255,r.check=lu(r.check,O,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=MZ;case MZ:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(T=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),T)),r.flags&512&&r.wrap&4&&(r.check=lu(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=DZ;case DZ:if(r.flags&2048){if(o===0)break e;h=0;do T=n[a+h++],r.head&&T&&r.length<65536&&(r.head.name+=String.fromCharCode(T));while(T&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=lu(r.check,n,h,a)),o-=h,a+=h,T)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=jZ;case jZ:if(r.flags&4096){if(o===0)break e;h=0;do T=n[a+h++],r.head&&T&&r.length<65536&&(r.head.comment+=String.fromCharCode(T));while(T&&h<o);if(r.flags&512&&r.wrap&4&&(r.check=lu(r.check,n,h,a)),o-=h,a+=h,T)break e}else r.head&&(r.head.comment=null);r.mode=$Z;case $Z:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.wrap&4&&c!==(r.check&65535)){e.msg="header crc mismatch",r.mode=zn;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=wf;break;case FZ:for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}e.adler=r.check=JZ(c),c=0,u=0,r.mode=V5;case V5:if(r.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=u,pOt;e.adler=r.check=1,r.mode=wf;case wf:if(t===dOt||t===ZE)break e;case n3:if(r.last){c>>>=u&7,u-=u&7,r.mode=a3;break}for(;u<3;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=BZ;break;case 1:if(_Ot(r),r.mode=JE,t===ZE){c>>>=2,u-=2;break e}break;case 2:r.mode=zZ;break;case 3:e.msg="invalid block type",r.mode=zn}c>>>=2,u-=2;break;case BZ:for(c>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=zn;break}if(r.length=c&65535,c=0,u=0,r.mode=i3,t===ZE)break e;case i3:r.mode=UZ;case UZ:if(h=r.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(n.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,r.length-=h;break}r.mode=wf;break;case zZ:for(;u<14;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=zn;break}r.have=0,r.mode=VZ;case VZ:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.lens[N[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},A=Bx(fOt,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,A){e.msg="invalid code lengths set",r.mode=zn;break}r.have=0,r.mode=WZ;case WZ:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[c&(1<<r.lenbits)-1],g=y>>>24,w=y>>>16&255,v=y&65535,!(g<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(v<16)c>>>=g,u-=g,r.lens[r.have++]=v;else{if(v===16){for(P=g+2;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(c>>>=g,u-=g,r.have===0){e.msg="invalid bit length repeat",r.mode=zn;break}T=r.lens[r.have-1],h=3+(c&3),c>>>=2,u-=2}else if(v===17){for(P=g+3;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=g,u-=g,T=0,h=3+(c&7),c>>>=3,u-=3}else{for(P=g+7;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=g,u-=g,T=0,h=11+(c&127),c>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=zn;break}for(;h--;)r.lens[r.have++]=T}}if(r.mode===zn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=zn;break}if(r.lenbits=9,M={bits:r.lenbits},A=Bx(Bye,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,A){e.msg="invalid literal/lengths set",r.mode=zn;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},A=Bx(Uye,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,A){e.msg="invalid distances set",r.mode=zn;break}if(r.mode=JE,t===ZE)break e;case JE:r.mode=QE;case QE:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=u,aOt(e,d),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,c=r.hold,u=r.bits,r.mode===wf&&(r.back=-1);break}for(r.back=0;y=r.lencode[c&(1<<r.lenbits)-1],g=y>>>24,w=y>>>16&255,v=y&65535,!(g<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(w&&!(w&240)){for(x=g,b=w,S=v;y=r.lencode[S+((c&(1<<x+b)-1)>>x)],g=y>>>24,w=y>>>16&255,v=y&65535,!(x+g<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=x,u-=x,r.back+=x}if(c>>>=g,u-=g,r.back+=g,r.length=v,w===0){r.mode=YZ;break}if(w&32){r.back=-1,r.mode=wf;break}if(w&64){e.msg="invalid literal/length code",r.mode=zn;break}r.extra=w&15,r.mode=HZ;case HZ:if(r.extra){for(P=r.extra;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=GZ;case GZ:for(;y=r.distcode[c&(1<<r.distbits)-1],g=y>>>24,w=y>>>16&255,v=y&65535,!(g<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(!(w&240)){for(x=g,b=w,S=v;y=r.distcode[S+((c&(1<<x+b)-1)>>x)],g=y>>>24,w=y>>>16&255,v=y&65535,!(x+g<=u);){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}c>>>=x,u-=x,r.back+=x}if(c>>>=g,u-=g,r.back+=g,w&64){e.msg="invalid distance code",r.mode=zn;break}r.offset=v,r.extra=w&15,r.mode=qZ;case qZ:if(r.extra){for(P=r.extra;u<P;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=zn;break}r.mode=KZ;case KZ:if(l===0)break e;if(h=d-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=zn;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=i,m=s-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do i[s++]=p[m++];while(--h);r.length===0&&(r.mode=QE);break;case YZ:if(l===0)break e;i[s++]=r.length,l--,r.mode=QE;break;case a3:if(r.wrap){for(;u<32;){if(o===0)break e;o--,c|=n[a++]<<u,u+=8}if(d-=l,e.total_out+=d,r.total+=d,r.wrap&4&&d&&(e.adler=r.check=r.flags?lu(r.check,i,d,s-d):aj(r.check,i,d,s-d)),d=l,r.wrap&4&&(r.flags?c:JZ(c))!==r.check){e.msg="incorrect data check",r.mode=zn;break}c=0,u=0}r.mode=XZ;case XZ:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,c+=n[a++]<<u,u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=zn;break}c=0,u=0}r.mode=ZZ;case ZZ:A=hOt;break e;case zn:A=zye;break e;case Wye:return Vye;case Hye:default:return Fl}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,r.hold=c,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<zn&&(r.mode<a3||t!==OZ))&&Xye(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,r.total+=d,r.wrap&4&&d&&(e.adler=r.check=r.flags?lu(r.check,i,d,e.next_out-d):aj(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===wf?128:0)+(r.mode===JE||r.mode===i3?256:0),(f===0&&d===0||t===OZ)&&A===xm&&(A=mOt),A},EOt=e=>{if(Fm(e))return Fl;let t=e.state;return t.window&&(t.window=null),e.state=null,xm},AOt=(e,t)=>{if(Fm(e))return Fl;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,xm):Fl},TOt=(e,t)=>{const r=t.length;let n,i,a;return Fm(e)||(n=e.state,n.wrap!==0&&n.mode!==V5)?Fl:n.mode===V5&&(i=1,i=aj(i,t,r,0),i!==n.check)?zye:(a=Xye(e,t,r,r),a?(n.mode=Wye,Vye):(n.havedict=1,xm))};var kOt=qye,COt=Kye,OOt=Gye,POt=bOt,NOt=Yye,IOt=SOt,ROt=EOt,LOt=AOt,MOt=TOt,DOt="pako inflate (from Nodeca project)",Cf={inflateReset:kOt,inflateReset2:COt,inflateResetKeep:OOt,inflateInit:POt,inflateInit2:NOt,inflate:IOt,inflateEnd:ROt,inflateGetHeader:LOt,inflateSetDictionary:MOt,inflateInfo:DOt};function jOt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $Ot=jOt;const Zye=Object.prototype.toString,{Z_NO_FLUSH:FOt,Z_FINISH:BOt,Z_OK:U_,Z_STREAM_END:l3,Z_NEED_DICT:c3,Z_STREAM_ERROR:UOt,Z_DATA_ERROR:eJ,Z_MEM_ERROR:zOt}=jye;function W2(e){this.options=$ye.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nOt,this.strm.avail_out=0;let r=Cf.inflateInit2(this.strm,t.windowBits);if(r!==U_)throw new Error(sj[r]);if(this.header=new $Ot,Cf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=oj.string2buf(t.dictionary):Zye.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Cf.inflateSetDictionary(this.strm,t.dictionary),r!==U_)))throw new Error(sj[r])}W2.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?BOt:FOt,Zye.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=Cf.inflate(r,s),a===c3&&i&&(a=Cf.inflateSetDictionary(r,i),a===U_?a=Cf.inflate(r,s):a===eJ&&(a=c3));r.avail_in>0&&a===l3&&r.state.wrap>0&&e[r.next_in]!==0;)Cf.inflateReset(r),a=Cf.inflate(r,s);switch(a){case UOt:case eJ:case c3:case zOt:return this.onEnd(a),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||a===l3))if(this.options.to==="string"){let l=oj.utf8border(r.output,r.next_out),c=r.next_out-l,u=oj.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===U_&&o===0)){if(a===l3)return a=Cf.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};W2.prototype.onData=function(e){this.chunks.push(e)};W2.prototype.onEnd=function(e){e===U_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=$ye.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function VOt(e,t){const r=new W2(t);if(r.push(e),r.err)throw r.msg||sj[r.err];return r.result}var WOt=W2,HOt=VOt,GOt={Inflate:WOt,inflate:HOt};const{Inflate:qOt,inflate:KOt}=GOt;var tJ=qOt,YOt=KOt;const Jye=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Jye[e]=t}const rJ=4294967295;function XOt(e,t,r){let n=e;for(let i=0;i<r;i++)n=Jye[(n^t[i])&255]^n>>>8;return n}function ZOt(e,t){return(XOt(rJ,e,t)^rJ)>>>0}function nJ(e,t,r){const n=e.readUint32(),i=ZOt(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function Qye(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function eve(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function tve(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function rve(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-i]+r[a]>>1)&255}}function nve(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+r[a]&255;for(;a<n;a++)t[a]=e[a]+JOt(t[a-i],r[a],r[a-i])&255}}function JOt(e,t,r){const n=e+t-r,i=Math.abs(n-e),a=Math.abs(n-t),s=Math.abs(n-r);return i<=a&&i<=s?e:a<=s?t:r}function QOt(e,t,r,n,i,a){switch(e){case 0:Qye(t,r,i);break;case 1:eve(t,r,i,a);break;case 2:tve(t,r,n,i);break;case 3:rve(t,r,n,i,a);break;case 4:nve(t,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const ePt=new Uint16Array([255]),tPt=new Uint8Array(ePt.buffer),rPt=tPt[0]===255;function nPt(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(n*r*o);let c=0;for(let u=0;u<7;u++){const f=s[u],d=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(d<=0||h<=0)continue;const m=d*o,p=new Uint8Array(m);for(let y=0;y<h;y++){const g=t[c++],w=t.subarray(c,c+m);c+=m;const v=new Uint8Array(m);QOt(g,w,v,p,m,o),p.set(v);for(let x=0;x<d;x++){const b=f.x+x*f.xStep,S=f.y+y*f.yStep;if(!(b>=r||S>=n))for(let T=0;T<o;T++)l[(S*r+b)*o+T]=v[x*o+T]}}}if(a===16){const u=new Uint16Array(l.buffer);if(rPt)for(let f=0;f<u.length;f++)u[f]=iPt(u[f]);return u}else return l}function iPt(e){return(e&255)<<8|e>>8&255}const aPt=new Uint16Array([255]),sPt=new Uint8Array(aPt.buffer),oPt=sPt[0]===255,lPt=new Uint8Array(0);function iJ(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*r),l=new Uint8Array(n*o);let c=lPt,u=0,f,d;for(let h=0;h<n;h++){switch(f=t.subarray(u+1,u+1+o),d=l.subarray(h*o,(h+1)*o),t[u]){case 0:Qye(f,d,o);break;case 1:eve(f,d,o,s);break;case 2:tve(f,d,c,o);break;case 3:rve(f,d,c,o,s);break;case 4:nve(f,d,c,o,s);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=d,u+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(oPt)for(let m=0;m<h.length;m++)h[m]=cPt(h[m]);return h}else return l}function cPt(e){return(e&255)<<8|e>>8&255}const JA=Uint8Array.of(137,80,78,71,13,10,26,10);function aJ(e){if(!uPt(e.readBytes(JA.length)))throw new Error("wrong PNG signature")}function uPt(e){if(e.length<JA.length)return!1;for(let t=0;t<JA.length;t++)if(e[t]!==JA[t])return!1;return!0}const fPt="tEXt",dPt=0,ive=new TextDecoder("latin1");function hPt(e){if(mPt(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const pPt=/^[\u0000-\u00FF]*$/;function mPt(e){if(!pPt.test(e))throw new Error("invalid latin1 text")}function gPt(e,t,r){const n=ave(t);e[n]=yPt(t,r-n.length-1)}function ave(e){for(e.mark();e.readByte()!==dPt;);const t=e.offset;e.reset();const r=ive.decode(e.readBytes(t-e.offset-1));return e.skip(1),hPt(r),r}function yPt(e,t){return ive.decode(e.readBytes(t))}const Ao={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},u3={UNKNOWN:-1,DEFLATE:0},sJ={UNKNOWN:-1,ADAPTIVE:0},f3={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},eA={NONE:0,BACKGROUND:1,PREVIOUS:2},d3={SOURCE:0,OVER:1};class vPt extends t7{constructor(r,n={}){super(r);L(this,"_checkCrc");L(this,"_inflator");L(this,"_png");L(this,"_apng");L(this,"_end");L(this,"_hasPalette");L(this,"_palette");L(this,"_hasTransparency");L(this,"_transparency");L(this,"_compressionMethod");L(this,"_filterMethod");L(this,"_interlaceMethod");L(this,"_colorType");L(this,"_isAnimated");L(this,"_numberOfFrames");L(this,"_numberOfPlays");L(this,"_frames");L(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new tJ,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=u3.UNKNOWN,this._filterMethod=sJ.UNKNOWN,this._interlaceMethod=f3.UNKNOWN,this._colorType=Ao.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(aJ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(aJ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case fPt:gPt(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?nJ(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=i+r;break}if(this.offset-i!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?nJ(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=wPt(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Ao.GREYSCALE:i=1;break;case Ao.TRUECOLOUR:i=3;break;case Ao.INDEXED_COLOUR:i=1;break;case Ao.GREYSCALE_ALPHA:i=2;break;case Ao.TRUECOLOUR_ALPHA:i=4;break;case Ao.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==u3.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<n;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Ao.GREYSCALE:case Ao.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Ao.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Ao.UNKNOWN:case Ao.GREYSCALE_ALPHA:case Ao.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=ave(this),i=this.readUint8();if(i!==u3.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:YOt(a)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:r,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(r);if(i){if(i.data=iJ({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const a=this._apng.frames.at(r-1);this.disposeFrame(i,a,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,i){switch(r.disposeOp){case eA.NONE:break;case eA.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*r.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case eA.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,c=(s*n.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(n.blendOp){case d3.SOURCE:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let u=0;u<this._png.channels;u++)r.data[l+u]=n.data[c+u]}break;case d3.OVER:for(let s=0;s<n.height;s++)for(let o=0;o<n.width;o++){const{index:l,frameIndex:c}=a(s,o);for(let u=0;u<this._png.channels;u++){const f=n.data[c+this._png.channels-1]/i,d=u%(this._png.channels-1)===0?1:n.data[c+u],h=Math.floor(f*d+(1-f)*r.data[l+u]);r.data[l+u]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==sJ.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===f3.NO_INTERLACE)this._png.data=iJ({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===f3.ADAM7)this._png.data=nPt({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:eA.NONE,blendOp:d3.SOURCE,data:r}),this._inflator=new tJ,this._writingDataChunks=!1}}function wPt(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var oJ;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(oJ||(oJ={}));function xPt(e,t){return new vPt(e,t).decode()}var nr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function h3(){nr.console&&typeof nr.console.log=="function"&&nr.console.log.apply(nr.console,arguments)}var vn={log:h3,warn:function(e){nr.console&&(typeof nr.console.warn=="function"?nr.console.warn.apply(nr.console,arguments):h3.call(null,arguments))},error:function(e){nr.console&&(typeof nr.console.error=="function"?nr.console.error.apply(nr.console,arguments):h3(e))}};function p3(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s0(n.response,t,r)},n.onerror=function(){vn.error("could not download file")},n.send()}function lJ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function tA(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s0=nr.saveAs||((typeof window>"u"?"undefined":sn(window))!=="object"||window!==nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=nr.URL||nr.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?lJ(i.href)?p3(e,t,r):tA(i,i.target="_blank"):tA(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){tA(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(lJ(e))p3(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){tA(n)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:sn(a)!=="object"&&(vn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return p3(e,t,r);var i=e.type==="application/octet-stream",a=/constructor/i.test(nr.HTMLElement)||nr.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":sn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(e)}else{var l=nr.URL||nr.webkitURL,c=l.createObjectURL(e);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function sve(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,s=i.exec(e);s&&(t=a(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}var QA=nr.atob.bind(nr),cJ=nr.btoa.bind(nr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function m3(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];r=Za(r,n,i,a,t[0],7,-680876936),a=Za(a,r,n,i,t[1],12,-389564586),i=Za(i,a,r,n,t[2],17,606105819),n=Za(n,i,a,r,t[3],22,-1044525330),r=Za(r,n,i,a,t[4],7,-176418897),a=Za(a,r,n,i,t[5],12,1200080426),i=Za(i,a,r,n,t[6],17,-1473231341),n=Za(n,i,a,r,t[7],22,-45705983),r=Za(r,n,i,a,t[8],7,1770035416),a=Za(a,r,n,i,t[9],12,-1958414417),i=Za(i,a,r,n,t[10],17,-42063),n=Za(n,i,a,r,t[11],22,-1990404162),r=Za(r,n,i,a,t[12],7,1804603682),a=Za(a,r,n,i,t[13],12,-40341101),i=Za(i,a,r,n,t[14],17,-1502002290),r=Ja(r,n=Za(n,i,a,r,t[15],22,1236535329),i,a,t[1],5,-165796510),a=Ja(a,r,n,i,t[6],9,-1069501632),i=Ja(i,a,r,n,t[11],14,643717713),n=Ja(n,i,a,r,t[0],20,-373897302),r=Ja(r,n,i,a,t[5],5,-701558691),a=Ja(a,r,n,i,t[10],9,38016083),i=Ja(i,a,r,n,t[15],14,-660478335),n=Ja(n,i,a,r,t[4],20,-405537848),r=Ja(r,n,i,a,t[9],5,568446438),a=Ja(a,r,n,i,t[14],9,-1019803690),i=Ja(i,a,r,n,t[3],14,-187363961),n=Ja(n,i,a,r,t[8],20,1163531501),r=Ja(r,n,i,a,t[13],5,-1444681467),a=Ja(a,r,n,i,t[2],9,-51403784),i=Ja(i,a,r,n,t[7],14,1735328473),r=Qa(r,n=Ja(n,i,a,r,t[12],20,-1926607734),i,a,t[5],4,-378558),a=Qa(a,r,n,i,t[8],11,-2022574463),i=Qa(i,a,r,n,t[11],16,1839030562),n=Qa(n,i,a,r,t[14],23,-35309556),r=Qa(r,n,i,a,t[1],4,-1530992060),a=Qa(a,r,n,i,t[4],11,1272893353),i=Qa(i,a,r,n,t[7],16,-155497632),n=Qa(n,i,a,r,t[10],23,-1094730640),r=Qa(r,n,i,a,t[13],4,681279174),a=Qa(a,r,n,i,t[0],11,-358537222),i=Qa(i,a,r,n,t[3],16,-722521979),n=Qa(n,i,a,r,t[6],23,76029189),r=Qa(r,n,i,a,t[9],4,-640364487),a=Qa(a,r,n,i,t[12],11,-421815835),i=Qa(i,a,r,n,t[15],16,530742520),r=es(r,n=Qa(n,i,a,r,t[2],23,-995338651),i,a,t[0],6,-198630844),a=es(a,r,n,i,t[7],10,1126891415),i=es(i,a,r,n,t[14],15,-1416354905),n=es(n,i,a,r,t[5],21,-57434055),r=es(r,n,i,a,t[12],6,1700485571),a=es(a,r,n,i,t[3],10,-1894986606),i=es(i,a,r,n,t[10],15,-1051523),n=es(n,i,a,r,t[1],21,-2054922799),r=es(r,n,i,a,t[8],6,1873313359),a=es(a,r,n,i,t[15],10,-30611744),i=es(i,a,r,n,t[6],15,-1560198380),n=es(n,i,a,r,t[13],21,1309151649),r=es(r,n,i,a,t[4],6,-145523070),a=es(a,r,n,i,t[11],10,-1120210379),i=es(i,a,r,n,t[2],15,718787259),n=es(n,i,a,r,t[9],21,-343485551),e[0]=Ah(r,e[0]),e[1]=Ah(n,e[1]),e[2]=Ah(i,e[2]),e[3]=Ah(a,e[3])}function vP(e,t,r,n,i,a){return t=Ah(Ah(t,e),Ah(n,a)),Ah(t<<i|t>>>32-i,r)}function Za(e,t,r,n,i,a,s){return vP(t&r|~t&n,e,t,i,a,s)}function Ja(e,t,r,n,i,a,s){return vP(t&n|r&~n,e,t,i,a,s)}function Qa(e,t,r,n,i,a,s){return vP(t^r^n,e,t,i,a,s)}function es(e,t,r,n,i,a,s){return vP(r^(t|~n),e,t,i,a,s)}function ove(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)m3(n,bPt(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(m3(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,m3(n,i),n}function bPt(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var uJ="0123456789abcdef".split("");function _Pt(e){for(var t="",r=0;r<4;r++)t+=uJ[e>>8*r+4&15]+uJ[e>>8*r&15];return t}function SPt(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function lj(e){return ove(e).map(SPt).join("")}var EPt=function(e){for(var t=0;t<e.length;t++)e[t]=_Pt(e[t]);return e.join("")}(ove("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ah(e,t){if(EPt){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cj(e,t){var r,n,i,a;if(e!==r){for(var s=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}r=e,n=o}else o=n;var f=t.length,d=0,h=0,m="";for(l=0;l<f;l++)h=(h+(u=o[d=(d+1)%256]))%256,o[d]=o[h],o[h]=u,s=o[(o[d]+o[h])%256],m+=String.fromCharCode(t.charCodeAt(l)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fJ={print:4,modify:8,copy:16,"annot-forms":32};function Rg(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(o){if(fJ.perm!==void 0)throw new Error("Invalid permission: "+o);i+=fJ[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=lj(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=cj(this.encryptionKey,this.padding)}function Lg(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function dJ(e){if(sn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[r]){var s=t[r][a];try{s[0].apply(e,n)}catch(o){nr.console&&vn.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function W5(e){if(!(this instanceof W5))return new W5(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function lve(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function d0(e,t,r,n,i){if(!(this instanceof d0))return new d0(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,lve.call(this,n,i)}function py(e,t,r,n,i){if(!(this instanceof py))return new py(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,lve.call(this,n,i)}function $t(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,c="S",u=null;sn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,a=e.compress||e.compressPdf||a,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(a===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,d={},h={internal:{},__private__:{}};h.__private__.PubSub=dJ;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(R){m=R};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return y};var g=h.__private__.getPageFormat=function(R){return y[R]};i=i||"a4";var w="compat",v="advanced",x=w;function b(){this.saveGraphicsState(),ie(new Wt(pt,0,0,-pt,0,Ip()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),c="n",x=v}function S(){this.restoreGraphicsState(),c="S",x=w}var T=h.__private__.combineFontStyleAndFontWeight=function(R,Q){if(R=="bold"&&Q=="normal"||R=="bold"&&Q==400||R=="normal"&&Q=="italic"||R=="bold"&&Q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Q&&(R=Q==400||Q==="normal"?R==="italic"?"italic":"normal":Q!=700&&Q!=="bold"||R!=="normal"?(Q==700?"bold":Q)+""+R:"bold"),R};h.advancedAPI=function(R){var Q=x===w;return Q&&b.call(this),typeof R!="function"||(R(this),Q&&S.call(this)),this},h.compatAPI=function(R){var Q=x===v;return Q&&S.call(this),typeof R!="function"||(R(this),Q&&b.call(this)),this},h.isAdvancedAPI=function(){return x===v};var A,O=function(R){if(x!==v)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=h.roundToPrecision=h.__private__.roundToPrecision=function(R,Q){var ve=t||Q;if(isNaN(R)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(ve).replace(/0+$/,"")};A=h.hpf=h.__private__.hpf=typeof l=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return M(R,l)}:l==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return M(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return M(R,16)};var P=h.f2=h.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return M(R,2)},N=h.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return M(R,3)},V=h.scale=h.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return x===w?R*pt:x===v?R:void 0},B=function(R){return V(function(Q){return x===w?Ip()-Q:x===v?Q:void 0}(R))};h.__private__.setPrecision=h.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(t=parseInt(R,10))};var G,Z="00000000000000000000000000000000",J=h.__private__.getFileId=function(){return Z},Y=h.__private__.setFileId=function(R){return Z=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Hi=new Rg(u.userPermissions,u.userPassword,u.ownerPassword,Z)),Z};h.setFileId=function(R){return Y(R),this},h.getFileId=function(){return J()};var U=h.__private__.convertDateToPDFDate=function(R){var Q=R.getTimezoneOffset(),ve=Q<0?"+":"-",be=Math.floor(Math.abs(Q/60)),Ee=Math.abs(Q%60),We=[ve,H(be),"'",H(Ee),"'"].join("");return["D:",R.getFullYear(),H(R.getMonth()+1),H(R.getDate()),H(R.getHours()),H(R.getMinutes()),H(R.getSeconds()),We].join("")},se=h.__private__.convertPDFDateToDate=function(R){var Q=parseInt(R.substr(2,4),10),ve=parseInt(R.substr(6,2),10)-1,be=parseInt(R.substr(8,2),10),Ee=parseInt(R.substr(10,2),10),We=parseInt(R.substr(12,2),10),Ke=parseInt(R.substr(14,2),10);return new Date(Q,ve,be,Ee,We,Ke,0)},ue=h.__private__.setCreationDate=function(R){var Q;if(R===void 0&&(R=new Date),R instanceof Date)Q=U(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Q=R}return G=Q},I=h.__private__.getCreationDate=function(R){var Q=G;return R==="jsDate"&&(Q=se(G)),Q};h.setCreationDate=function(R){return ue(R),this},h.getCreationDate=function(R){return I(R)};var z,H=h.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},q=h.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},F=0,D=[],re=[],K=0,le=[],xe=[],X=!1,Ie=re;h.__private__.setCustomOutputDestination=function(R){X=!0,Ie=R};var Re=function(R){X||(Ie=R)};h.__private__.resetCustomOutputDestination=function(){X=!1,Ie=re};var ie=h.__private__.out=function(R){return R=R.toString(),K+=R.length+1,Ie.push(R),Ie},Te=h.__private__.write=function(R){return ie(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},Me=h.__private__.getArrayBuffer=function(R){for(var Q=R.length,ve=new ArrayBuffer(Q),be=new Uint8Array(ve);Q--;)be[Q]=R.charCodeAt(Q);return ve},tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return tt};var $e=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(R){return $e=x===v?R/pt:R,this};var De,nt=h.__private__.getFontSize=h.getFontSize=function(){return x===w?$e:$e*pt},qe=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(R){return qe=R,this},h.__private__.getR2L=h.getR2L=function(){return qe};var Ue,Qe=h.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))De=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');De=R}else De=parseInt(R,10)};h.__private__.getZoomMode=function(){return De};var Ge,Fe=h.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Ue=R};h.__private__.getPageMode=function(){return Ue};var at=h.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Ge=R};h.__private__.getLayoutMode=function(){return Ge},h.__private__.setDisplayMode=h.setDisplayMode=function(R,Q,ve){return Qe(R),at(Q),Fe(ve),this};var Ze={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(R){if(Object.keys(Ze).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ze[R]},h.__private__.getDocumentProperties=function(){return Ze},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(R){for(var Q in Ze)Ze.hasOwnProperty(Q)&&R[Q]&&(Ze[Q]=R[Q]);return this},h.__private__.setDocumentProperty=function(R,Q){if(Object.keys(Ze).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ze[R]=Q};var ft,pt,yt,Or,qt,Jt={},cr={},un=[],Ut={},Xr={},Kt={},ct={},Vt=null,st=0,dt=[],ir=new dJ(h),ur=e.hotfixes||[],Si={},go={},Ks=[],Wt=function R(Q,ve,be,Ee,We,Ke){if(!(this instanceof R))return new R(Q,ve,be,Ee,We,Ke);isNaN(Q)&&(Q=1),isNaN(ve)&&(ve=0),isNaN(be)&&(be=0),isNaN(Ee)&&(Ee=1),isNaN(We)&&(We=0),isNaN(Ke)&&(Ke=0),this._matrix=[Q,ve,be,Ee,We,Ke]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Wt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(R)},Wt.prototype.multiply=function(R){var Q=R.sx*this.sx+R.shy*this.shx,ve=R.sx*this.shy+R.shy*this.sy,be=R.shx*this.sx+R.sy*this.shx,Ee=R.shx*this.shy+R.sy*this.sy,We=R.tx*this.sx+R.ty*this.shx+this.tx,Ke=R.tx*this.shy+R.ty*this.sy+this.ty;return new Wt(Q,ve,be,Ee,We,Ke)},Wt.prototype.decompose=function(){var R=this.sx,Q=this.shy,ve=this.shx,be=this.sy,Ee=this.tx,We=this.ty,Ke=Math.sqrt(R*R+Q*Q),Pt=(R/=Ke)*ve+(Q/=Ke)*be;ve-=R*Pt,be-=Q*Pt;var Dt=Math.sqrt(ve*ve+be*be);return Pt/=Dt,R*(be/=Dt)<Q*(ve/=Dt)&&(R=-R,Q=-Q,Pt=-Pt,Ke=-Ke),{scale:new Wt(Ke,0,0,Dt,0,0),translate:new Wt(1,0,0,1,Ee,We),rotate:new Wt(R,Q,-Q,R,0,0),skew:new Wt(1,0,Pt,1,0,0)}},Wt.prototype.toString=function(R){return this.join(" ")},Wt.prototype.inversed=function(){var R=this.sx,Q=this.shy,ve=this.shx,be=this.sy,Ee=this.tx,We=this.ty,Ke=1/(R*be-Q*ve),Pt=be*Ke,Dt=-Q*Ke,ar=-ve*Ke,gr=R*Ke;return new Wt(Pt,Dt,ar,gr,-Pt*Ee-ar*We,-Dt*Ee-gr*We)},Wt.prototype.applyToPoint=function(R){var Q=R.x*this.sx+R.y*this.shx+this.tx,ve=R.x*this.shy+R.y*this.sy+this.ty;return new nf(Q,ve)},Wt.prototype.applyToRectangle=function(R){var Q=this.applyToPoint(R),ve=this.applyToPoint(new nf(R.x+R.w,R.y+R.h));return new j1(Q.x,Q.y,ve.x-Q.x,ve.y-Q.y)},Wt.prototype.clone=function(){var R=this.sx,Q=this.shy,ve=this.shx,be=this.sy,Ee=this.tx,We=this.ty;return new Wt(R,Q,ve,be,Ee,We)},h.Matrix=Wt;var vs=h.matrixMult=function(R,Q){return Q.multiply(R)},Wl=new Wt(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Wl;var Ha=function(R,Q){if(!Xr[R]){var ve=(Q instanceof d0?"Sh":"P")+(Object.keys(Ut).length+1).toString(10);Q.id=ve,Xr[R]=ve,Ut[ve]=Q,ir.publish("addPattern",Q)}};h.ShadingPattern=d0,h.TilingPattern=py,h.addShadingPattern=function(R,Q){return O("addShadingPattern()"),Ha(R,Q),this},h.beginTilingPattern=function(R){O("beginTilingPattern()"),$1(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},h.endTilingPattern=function(R,Q){O("endTilingPattern()"),Q.stream=xe[z].join(`
`),Ha(R,Q),ir.publish("endTilingPattern",Q),Ks.pop().restore()};var Ys,Un=h.__private__.newObject=function(){var R=Ei();return te(R,!0),R},Ei=h.__private__.newObjectDeferred=function(){return F++,D[F]=function(){return K},F},te=function(R,Q){return Q=typeof Q=="boolean"&&Q,D[R]=K,Q&&ie(R+" 0 obj"),R},ge=h.__private__.newAdditionalObject=function(){var R={objId:Ei(),content:""};return le.push(R),R},ce=Ei(),de=Ei(),ye=h.__private__.decodeColorString=function(R){var Q=R.split(" ");if(Q.length!==2||Q[1]!=="g"&&Q[1]!=="G")Q.length!==5||Q[4]!=="k"&&Q[4]!=="K"||(Q=[(1-Q[0])*(1-Q[3]),(1-Q[1])*(1-Q[3]),(1-Q[2])*(1-Q[3]),"r"]);else{var ve=parseFloat(Q[0]);Q=[ve,ve,ve,"r"]}for(var be="#",Ee=0;Ee<3;Ee++)be+=("0"+Math.floor(255*parseFloat(Q[Ee])).toString(16)).slice(-2);return be},we=h.__private__.encodeColorString=function(R){var Q;typeof R=="string"&&(R={ch1:R});var ve=R.ch1,be=R.ch2,Ee=R.ch3,We=R.ch4,Ke=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var Pt=new sve(ve);if(Pt.ok)ve=Pt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var Dt=parseInt(ve.substr(1),16);ve=Dt>>16&255,be=Dt>>8&255,Ee=255&Dt}if(be===void 0||We===void 0&&ve===be&&be===Ee)Q=typeof ve=="string"?ve+" "+Ke[0]:R.precision===2?P(ve/255)+" "+Ke[0]:N(ve/255)+" "+Ke[0];else if(We===void 0||sn(We)==="object"){if(We&&!isNaN(We.a)&&We.a===0)return["1.","1.","1.",Ke[1]].join(" ");Q=typeof ve=="string"?[ve,be,Ee,Ke[1]].join(" "):R.precision===2?[P(ve/255),P(be/255),P(Ee/255),Ke[1]].join(" "):[N(ve/255),N(be/255),N(Ee/255),Ke[1]].join(" ")}else Q=typeof ve=="string"?[ve,be,Ee,We,Ke[2]].join(" "):R.precision===2?[P(ve),P(be),P(Ee),P(We),Ke[2]].join(" "):[N(ve),N(be),N(Ee),N(We),Ke[2]].join(" ");return Q},ke=h.__private__.getFilters=function(){return s},je=h.__private__.putStream=function(R){var Q=(R=R||{}).data||"",ve=R.filters||ke(),be=R.alreadyAppliedFilters||[],Ee=R.addLength1||!1,We=Q.length,Ke=R.objectId,Pt=function(Gi){return Gi};if(u!==null&&Ke===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Pt=Hi.encryptor(Ke,0));var Dt={};ve===!0&&(ve=["FlateEncode"]);var ar=R.additionalKeyValues||[],gr=(Dt=$t.API.processDataByFilters!==void 0?$t.API.processDataByFilters(Q,ve):{data:Q,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Dt.data.length!==0&&(ar.push({key:"Length",value:Dt.data.length}),Ee===!0&&ar.push({key:"Length1",value:We})),gr.length!=0)if(gr.split("/").length-1==1)ar.push({key:"Filter",value:gr});else{ar.push({key:"Filter",value:"["+gr+"]"});for(var Fr=0;Fr<ar.length;Fr+=1)if(ar[Fr].key==="DecodeParms"){for(var Kn=[],ki=0;ki<Dt.reverseChain.split("/").length-1;ki+=1)Kn.push("null");Kn.push(ar[Fr].value),ar[Fr].value="["+Kn.join(" ")+"]"}}ie("<<");for(var bn=0;bn<ar.length;bn++)ie("/"+ar[bn].key+" "+ar[bn].value);ie(">>"),Dt.data.length!==0&&(ie("stream"),ie(Pt(Dt.data)),ie("endstream"))},Ce=h.__private__.putPage=function(R){var Q=R.number,ve=R.data,be=R.objId,Ee=R.contentsObjId;te(be,!0),ie("<</Type /Page"),ie("/Parent "+R.rootDictionaryObjId+" 0 R"),ie("/Resources "+R.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(A(R.mediaBox.bottomLeftX))+" "+parseFloat(A(R.mediaBox.bottomLeftY))+" "+A(R.mediaBox.topRightX)+" "+A(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&ie("/CropBox ["+A(R.cropBox.bottomLeftX)+" "+A(R.cropBox.bottomLeftY)+" "+A(R.cropBox.topRightX)+" "+A(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&ie("/BleedBox ["+A(R.bleedBox.bottomLeftX)+" "+A(R.bleedBox.bottomLeftY)+" "+A(R.bleedBox.topRightX)+" "+A(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&ie("/TrimBox ["+A(R.trimBox.bottomLeftX)+" "+A(R.trimBox.bottomLeftY)+" "+A(R.trimBox.topRightX)+" "+A(R.trimBox.topRightY)+"]"),R.artBox!==null&&ie("/ArtBox ["+A(R.artBox.bottomLeftX)+" "+A(R.artBox.bottomLeftY)+" "+A(R.artBox.topRightX)+" "+A(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&ie("/UserUnit "+R.userUnit),ir.publish("putPage",{objId:be,pageContext:dt[Q],pageNumber:Q,page:ve}),ie("/Contents "+Ee+" 0 R"),ie(">>"),ie("endobj");var We=ve.join(`
`);return x===v&&(We+=`
Q`),te(Ee,!0),je({data:We,filters:ke(),objectId:Ee}),ie("endobj"),be},Oe=h.__private__.putPages=function(){var R,Q,ve=[];for(R=1;R<=st;R++)dt[R].objId=Ei(),dt[R].contentsObjId=Ei();for(R=1;R<=st;R++)ve.push(Ce({number:R,data:xe[R],objId:dt[R].objId,contentsObjId:dt[R].contentsObjId,mediaBox:dt[R].mediaBox,cropBox:dt[R].cropBox,bleedBox:dt[R].bleedBox,trimBox:dt[R].trimBox,artBox:dt[R].artBox,userUnit:dt[R].userUnit,rootDictionaryObjId:ce,resourceDictionaryObjId:de}));te(ce,!0),ie("<</Type /Pages");var be="/Kids [";for(Q=0;Q<st;Q++)be+=ve[Q]+" 0 R ";ie(be+"]"),ie("/Count "+st),ie(">>"),ie("endobj"),ir.publish("postPutPages")},Le=function(R){ir.publish("putFont",{font:R,out:ie,newObject:Un,putStream:je}),R.isAlreadyPutted!==!0&&(R.objectNumber=Un(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+Lg(R.postScriptName)),ie("/Subtype /Type1"),typeof R.encoding=="string"&&ie("/Encoding /"+R.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Je=function(R){R.objectNumber=Un();var Q=[];Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Form"}),Q.push({key:"BBox",value:"["+[A(R.x),A(R.y),A(R.x+R.width),A(R.y+R.height)].join(" ")+"]"}),Q.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var ve=R.pages[1].join(`
`);je({data:ve,additionalKeyValues:Q,objectId:R.objectNumber}),ie("endobj")},gt=function(R,Q){Q||(Q=21);var ve=Un(),be=function(Ke,Pt){var Dt,ar=[],gr=1/(Pt-1);for(Dt=0;Dt<1;Dt+=gr)ar.push(Dt);if(ar.push(1),Ke[0].offset!=0){var Fr={offset:0,color:Ke[0].color};Ke.unshift(Fr)}if(Ke[Ke.length-1].offset!=1){var Kn={offset:1,color:Ke[Ke.length-1].color};Ke.push(Kn)}for(var ki="",bn=0,Gi=0;Gi<ar.length;Gi++){for(Dt=ar[Gi];Dt>Ke[bn+1].offset;)bn++;var Ci=Ke[bn].offset,Aa=(Dt-Ci)/(Ke[bn+1].offset-Ci),of=Ke[bn].color,ql=Ke[bn+1].color;ki+=q(Math.round((1-Aa)*of[0]+Aa*ql[0]).toString(16))+q(Math.round((1-Aa)*of[1]+Aa*ql[1]).toString(16))+q(Math.round((1-Aa)*of[2]+Aa*ql[2]).toString(16))}return ki.trim()}(R.colors,Q),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+Q+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),je({data:be,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),ie("endobj"),R.objectNumber=Un(),ie("<< /ShadingType "+R.type),ie("/ColorSpace /DeviceRGB");var We="/Coords ["+A(parseFloat(R.coords[0]))+" "+A(parseFloat(R.coords[1]))+" ";R.type===2?We+=A(parseFloat(R.coords[2]))+" "+A(parseFloat(R.coords[3])):We+=A(parseFloat(R.coords[2]))+" "+A(parseFloat(R.coords[3]))+" "+A(parseFloat(R.coords[4]))+" "+A(parseFloat(R.coords[5])),ie(We+="]"),R.matrix&&ie("/Matrix ["+R.matrix.toString()+"]"),ie("/Function "+ve+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},xt=function(R,Q){var ve=Ei(),be=Un();Q.push({resourcesOid:ve,objectOid:be}),R.objectNumber=be;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+R.boundingBox.map(A).join(" ")+"]"}),Ee.push({key:"XStep",value:A(R.xStep)}),Ee.push({key:"YStep",value:A(R.yStep)}),Ee.push({key:"Resources",value:ve+" 0 R"}),R.matrix&&Ee.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),je({data:R.stream,additionalKeyValues:Ee,objectId:R.objectNumber}),ie("endobj")},it=function(R){for(var Q in R.objectNumber=Un(),ie("<<"),R)switch(Q){case"opacity":ie("/ca "+P(R[Q]));break;case"stroke-opacity":ie("/CA "+P(R[Q]))}ie(">>"),ie("endobj")},wt=function(R){te(R.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Q in ie("/Font <<"),Jt)Jt.hasOwnProperty(Q)&&(f===!1||f===!0&&d.hasOwnProperty(Q))&&ie("/"+Q+" "+Jt[Q].objectNumber+" 0 R");ie(">>")}(),function(){if(Object.keys(Ut).length>0){for(var Q in ie("/Shading <<"),Ut)Ut.hasOwnProperty(Q)&&Ut[Q]instanceof d0&&Ut[Q].objectNumber>=0&&ie("/"+Q+" "+Ut[Q].objectNumber+" 0 R");ir.publish("putShadingPatternDict"),ie(">>")}}(),function(Q){if(Object.keys(Ut).length>0){for(var ve in ie("/Pattern <<"),Ut)Ut.hasOwnProperty(ve)&&Ut[ve]instanceof h.TilingPattern&&Ut[ve].objectNumber>=0&&Ut[ve].objectNumber<Q&&ie("/"+ve+" "+Ut[ve].objectNumber+" 0 R");ir.publish("putTilingPatternDict"),ie(">>")}}(R.objectOid),function(){if(Object.keys(Kt).length>0){var Q;for(Q in ie("/ExtGState <<"),Kt)Kt.hasOwnProperty(Q)&&Kt[Q].objectNumber>=0&&ie("/"+Q+" "+Kt[Q].objectNumber+" 0 R");ir.publish("putGStateDict"),ie(">>")}}(),function(){for(var Q in ie("/XObject <<"),Si)Si.hasOwnProperty(Q)&&Si[Q].objectNumber>=0&&ie("/"+Q+" "+Si[Q].objectNumber+" 0 R");ir.publish("putXobjectDict"),ie(">>")}(),ie(">>"),ie("endobj")},er=function(R){cr[R.fontName]=cr[R.fontName]||{},cr[R.fontName][R.fontStyle]=R.id},fn=function(R,Q,ve,be,Ee){var We={id:"F"+(Object.keys(Jt).length+1).toString(10),postScriptName:R,fontName:Q,fontStyle:ve,encoding:be,isStandardFont:Ee||!1,metadata:{}};return ir.publish("addFont",{font:We,instance:this}),Jt[We.id]=We,er(We),We.id},Pr=h.__private__.pdfEscape=h.pdfEscape=function(R,Q){return function(ve,be){var Ee,We,Ke,Pt,Dt,ar,gr,Fr,Kn;if(Ke=(be=be||{}).sourceEncoding||"Unicode",Dt=be.outputEncoding,(be.autoencode||Dt)&&Jt[ft].metadata&&Jt[ft].metadata[Ke]&&Jt[ft].metadata[Ke].encoding&&(Pt=Jt[ft].metadata[Ke].encoding,!Dt&&Jt[ft].encoding&&(Dt=Jt[ft].encoding),!Dt&&Pt.codePages&&(Dt=Pt.codePages[0]),typeof Dt=="string"&&(Dt=Pt[Dt]),Dt)){for(gr=!1,ar=[],Ee=0,We=ve.length;Ee<We;Ee++)(Fr=Dt[ve.charCodeAt(Ee)])?ar.push(String.fromCharCode(Fr)):ar.push(ve[Ee]),ar[Ee].charCodeAt(0)>>8&&(gr=!0);ve=ar.join("")}for(Ee=ve.length;gr===void 0&&Ee!==0;)ve.charCodeAt(Ee-1)>>8&&(gr=!0),Ee--;if(!gr)return ve;for(ar=be.noBOM?[]:[254,255],Ee=0,We=ve.length;Ee<We;Ee++){if((Kn=(Fr=ve.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ar.push(Kn),ar.push(Fr-(Kn<<8))}return String.fromCharCode.apply(void 0,ar)}(R,Q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ri=h.__private__.beginPage=function(R){xe[++st]=[],dt[st]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},Jc(st),Re(xe[z])},Zc=function(R,Q){var ve,be,Ee;switch(r=Q||r,typeof R=="string"&&(ve=g(R.toLowerCase()),Array.isArray(ve)&&(be=ve[0],Ee=ve[1])),Array.isArray(R)&&(be=R[0]*pt,Ee=R[1]*pt),isNaN(be)&&(be=i[0],Ee=i[1]),(be>14400||Ee>14400)&&(vn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ee=Math.min(14400,Ee)),i=[be,Ee],r.substr(0,1)){case"l":Ee>be&&(i=[Ee,be]);break;case"p":be>Ee&&(i=[Ee,be])}ri(i),or(R1),ie(Wm),M1!==0&&ie(M1+" J"),D1!==0&&ie(D1+" j"),ir.publish("addPage",{pageNumber:st})},Hl=function(R){R>0&&R<=st&&(xe.splice(R,1),dt.splice(R,1),st--,z>st&&(z=st),this.setPage(z))},Jc=function(R){R>0&&R<=st&&(z=R)},rl=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return xe.length-1},Td=function(R,Q,ve){var be,Ee=void 0;return ve=ve||{},R=R!==void 0?R:Jt[ft].fontName,Q=Q!==void 0?Q:Jt[ft].fontStyle,be=R.toLowerCase(),cr[be]!==void 0&&cr[be][Q]!==void 0?Ee=cr[be][Q]:cr[R]!==void 0&&cr[R][Q]!==void 0?Ee=cr[R][Q]:ve.disableWarning===!1&&vn.warn("Unable to look up font label for font '"+R+"', '"+Q+"'. Refer to getFontList() for available fonts."),Ee||ve.noFallback||(Ee=cr.times[Q])==null&&(Ee=cr.times.normal),Ee},Ai=h.__private__.putInfo=function(){var R=Un(),Q=function(be){return be};for(var ve in u!==null&&(Q=Hi.encryptor(R,0)),ie("<<"),ie("/Producer ("+Pr(Q("jsPDF "+$t.version))+")"),Ze)Ze.hasOwnProperty(ve)&&Ze[ve]&&ie("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+Pr(Q(Ze[ve]))+")");ie("/CreationDate ("+Pr(Q(G))+")"),ie(">>"),ie("endobj")},Um=h.__private__.putCatalog=function(R){var Q=(R=R||{}).rootDictionaryObjId||ce;switch(Un(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+Q+" 0 R"),De||(De="fullwidth"),De){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+De;ve.substr(ve.length-1)==="%"&&(De=parseInt(De)/100),typeof De=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+P(De)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}Ue&&ie("/PageMode /"+Ue),ir.publish("putCatalog"),ie(">>"),ie("endobj")},_P=h.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(F+1)),ie("/Root "+F+" 0 R"),ie("/Info "+(F-1)+" 0 R"),u!==null&&ie("/Encrypt "+Hi.oid+" 0 R"),ie("/ID [ <"+Z+"> <"+Z+"> ]"),ie(">>")},Ti=h.__private__.putHeader=function(){ie("%PDF-"+m),ie("%")},H2=h.__private__.putXRef=function(){var R="0000000000";ie("xref"),ie("0 "+(F+1)),ie("0000000000 65535 f ");for(var Q=1;Q<=F;Q++)typeof D[Q]=="function"?ie((R+D[Q]()).slice(-10)+" 00000 n "):D[Q]!==void 0?ie((R+D[Q]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},Qc=h.__private__.buildDocument=function(){var R;F=0,K=0,re=[],D=[],le=[],ce=Ei(),de=Ei(),Re(re),ir.publish("buildDocument"),Ti(),Oe(),function(){ir.publish("putAdditionalObjects");for(var ve=0;ve<le.length;ve++){var be=le[ve];te(be.objId,!0),ie(be.content),ie("endobj")}ir.publish("postPutAdditionalObjects")}(),R=[],function(){for(var ve in Jt)Jt.hasOwnProperty(ve)&&(f===!1||f===!0&&d.hasOwnProperty(ve))&&Le(Jt[ve])}(),function(){var ve;for(ve in Kt)Kt.hasOwnProperty(ve)&&it(Kt[ve])}(),function(){for(var ve in Si)Si.hasOwnProperty(ve)&&Je(Si[ve])}(),function(ve){var be;for(be in Ut)Ut.hasOwnProperty(be)&&(Ut[be]instanceof d0?gt(Ut[be]):Ut[be]instanceof py&&xt(Ut[be],ve))}(R),ir.publish("putResources"),R.forEach(wt),wt({resourcesOid:de,objectOid:Number.MAX_SAFE_INTEGER}),ir.publish("postPutResources"),u!==null&&(Hi.oid=Un(),ie("<<"),ie("/Filter /Standard"),ie("/V "+Hi.v),ie("/R "+Hi.r),ie("/U <"+Hi.toHexString(Hi.U)+">"),ie("/O <"+Hi.toHexString(Hi.O)+">"),ie("/P "+Hi.P),ie(">>"),ie("endobj")),Ai(),Um();var Q=K;return H2(),_P(),ie("startxref"),ie(""+Q),ie("%%EOF"),Re(xe[z]),re.join(`
`)},zm=h.__private__.getBlob=function(R){return new Blob([Me(R)],{type:"application/pdf"})},G2=h.output=h.__private__.output=(Ys=function(R,Q){switch(typeof(Q=Q||{})=="string"?Q={filename:Q}:Q.filename=Q.filename||"generated.pdf",R){case void 0:return Qc();case"save":h.save(Q.filename);break;case"arraybuffer":return Me(Qc());case"blob":return zm(Qc());case"bloburi":case"bloburl":if(nr.URL!==void 0&&typeof nr.URL.createObjectURL=="function")return nr.URL&&nr.URL.createObjectURL(zm(Qc()))||void 0;vn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",be=Qc();try{ve=cJ(be)}catch{ve=cJ(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+Q.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nr)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",We=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Q.pdfObjectUrl&&(Ee=Q.pdfObjectUrl,We="");var Ke='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+We+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Q)+");<\/script></body></html>",Pt=nr.open();return Pt!==null&&Pt.document.write(Ke),Pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nr)==="[object Window]"){var Dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Q.filename+'" width="500px" height="400px" /></body></html>',ar=nr.open();if(ar!==null){ar.document.write(Dt);var gr=this;ar.document.documentElement.querySelector("#pdfViewer").onload=function(){ar.document.title=Q.filename,ar.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gr.output("bloburl"))}}return ar}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Q)+'"></iframe></body></html>',Kn=nr.open();if(Kn!==null&&(Kn.document.write(Fr),Kn.document.title=Q.filename),Kn||typeof safari>"u")return Kn;break;case"datauri":case"dataurl":return nr.document.location.href=this.output("datauristring",Q);default:return null}},Ys.foo=function(){try{return Ys.apply(this,arguments)}catch(ve){var R=ve.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var Q="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ve.message;if(!nr.console)throw new Error(Q);nr.console.error(Q,ve),nr.alert&&alert(Q)}},Ys.foo.bar=Ys,Ys.foo),nl=function(R){return Array.isArray(ur)===!0&&ur.indexOf(R)>-1};switch(n){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=nl("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);pt=n}var Hi=null;ue(),Y();var Qu=h.__private__.getPageInfo=h.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[R].objId,pageNumber:R,pageContext:dt[R]}},q2=h.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Q in dt)if(dt[Q].objId===R)break;return Qu(Q)},SP=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:dt[z].objId,pageNumber:z,pageContext:dt[z]}};h.addPage=function(){return Zc.apply(this,arguments),this},h.setPage=function(){return Jc.apply(this,arguments),Re.call(this,xe[z]),this},h.insertPage=function(R){return this.addPage(),this.movePage(z,R),this},h.movePage=function(R,Q){var ve,be;if(R>Q){ve=xe[R],be=dt[R];for(var Ee=R;Ee>Q;Ee--)xe[Ee]=xe[Ee-1],dt[Ee]=dt[Ee-1];xe[Q]=ve,dt[Q]=be,this.setPage(Q)}else if(R<Q){ve=xe[R],be=dt[R];for(var We=R;We<Q;We++)xe[We]=xe[We+1],dt[We]=dt[We+1];xe[Q]=ve,dt[Q]=be,this.setPage(Q)}return this},h.deletePage=function(){return Hl.apply(this,arguments),this},h.__private__.text=h.text=function(R,Q,ve,be,Ee){var We,Ke,Pt,Dt,ar,gr,Fr,Kn,ki,bn=(be=be||{}).scope||this;if(typeof R=="number"&&typeof Q=="number"&&(typeof ve=="string"||Array.isArray(ve))){var Gi=ve;ve=Q,Q=R,R=Gi}if(arguments[3]instanceof Wt==0?(Pt=arguments[4],Dt=arguments[5],sn(Fr=arguments[3])==="object"&&Fr!==null||(typeof Pt=="string"&&(Dt=Pt,Pt=null),typeof Fr=="string"&&(Dt=Fr,Fr=null),typeof Fr=="number"&&(Pt=Fr,Fr=null),be={flags:Fr,angle:Pt,align:Dt})):(O("The transform parameter of text() with a Matrix value"),ki=Ee),isNaN(Q)||isNaN(ve)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return bn;var Ci,Aa="",of=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Op,ql=bn.internal.scaleFactor;function lf(Zr){return Zr=Zr.split("	").join(Array(be.TabLen||9).join(" ")),Pr(Zr,Fr)}function B1(Zr){for(var gn,mi=Zr.concat(),qi=[],ff=mi.length;ff--;)typeof(gn=mi.shift())=="string"?qi.push(gn):Array.isArray(Zr)&&(gn.length===1||gn[1]===void 0&&gn[2]===void 0)?qi.push(gn[0]):qi.push([gn[0],gn[1],gn[2]]);return qi}function Gm(Zr,gn){var mi;if(typeof Zr=="string")mi=gn(Zr)[0];else if(Array.isArray(Zr)){for(var qi,ff,X1=Zr.concat(),Ym=[],iS=X1.length;iS--;)typeof(qi=X1.shift())=="string"?Ym.push(gn(qi)[0]):Array.isArray(qi)&&typeof qi[0]=="string"&&(ff=gn(qi[0],qi[1],qi[2]),Ym.push([ff[0],ff[1],ff[2]]));mi=Ym}return mi}var kd=!1,Rp=!0;if(typeof R=="string")kd=!0;else if(Array.isArray(R)){var Lp=R.concat();Ke=[];for(var Cd,Ta=Lp.length;Ta--;)(typeof(Cd=Lp.shift())!="string"||Array.isArray(Cd)&&typeof Cd[0]!="string")&&(Rp=!1);kd=Rp}if(kd===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Mp=$e/bn.internal.scaleFactor,Dp=Mp*(of-1);switch(be.baseline){case"bottom":ve-=Dp;break;case"top":ve+=Mp-Dp;break;case"hanging":ve+=Mp-2*Dp;break;case"middle":ve+=Mp/2-Dp}if((gr=be.maxWidth||0)>0&&(typeof R=="string"?R=bn.splitTextToSize(R,gr):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Zr,gn){return Zr.concat(bn.splitTextToSize(gn,gr))},[]))),We={text:R,x:Q,y:ve,options:be,mutex:{pdfEscape:Pr,activeFontKey:ft,fonts:Jt,activeFontSize:$e}},ir.publish("preProcessText",We),R=We.text,Pt=(be=We.options).angle,ki instanceof Wt==0&&Pt&&typeof Pt=="number"){Pt*=Math.PI/180,be.rotationDirection===0&&(Pt=-Pt),x===v&&(Pt=-Pt);var U1=Math.cos(Pt),z1=Math.sin(Pt);ki=new Wt(U1,z1,-z1,U1,0,0)}else Pt&&Pt instanceof Wt&&(ki=Pt);x!==v||ki||(ki=Wl),(ar=be.charSpace||rf)!==void 0&&(Aa+=A(V(ar))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Kn=be.horizontalScale)!==void 0&&(Aa+=A(100*Kn)+` Tz
`),be.lang;var ws=-1,cf=be.renderingMode!==void 0?be.renderingMode:be.stroke,qm=bn.internal.getCurrentPageInfo().pageContext;switch(cf){case 0:case!1:case"fill":ws=0;break;case 1:case!0:case"stroke":ws=1;break;case 2:case"fillThenStroke":ws=2;break;case 3:case"invisible":ws=3;break;case 4:case"fillAndAddForClipping":ws=4;break;case 5:case"strokeAndAddPathForClipping":ws=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ws=6;break;case 7:case"addToPathForClipping":ws=7}var rS=qm.usedRenderingMode!==void 0?qm.usedRenderingMode:-1;ws!==-1?Aa+=ws+` Tr
`:rS!==-1&&(Aa+=`0 Tr
`),ws!==-1&&(qm.usedRenderingMode=ws),Dt=be.align||"left";var il,jp=$e*of,V1=bn.internal.pageSize.getWidth(),W1=Jt[ft];ar=be.charSpace||rf,gr=be.maxWidth||0,Fr=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Od=[],$p=function(Zr){return bn.getStringUnitWidth(Zr,{font:W1,charSpace:ar,fontSize:$e,doKerning:!1})*$e/ql};if(Object.prototype.toString.call(R)==="[object Array]"){var yo;Ke=B1(R),Dt!=="left"&&(il=Ke.map($p));var vo,Pd=0;if(Dt==="right"){Q-=il[0],R=[],Ta=Ke.length;for(var uf=0;uf<Ta;uf++)uf===0?(vo=ef(Q),yo=tf(ve)):(vo=V(Pd-il[uf]),yo=-jp),R.push([Ke[uf],vo,yo]),Pd=il[uf]}else if(Dt==="center"){Q-=il[0]/2,R=[],Ta=Ke.length;for(var Nd=0;Nd<Ta;Nd++)Nd===0?(vo=ef(Q),yo=tf(ve)):(vo=V((Pd-il[Nd])/2),yo=-jp),R.push([Ke[Nd],vo,yo]),Pd=il[Nd]}else if(Dt==="left"){R=[],Ta=Ke.length;for(var H1=0;H1<Ta;H1++)R.push(Ke[H1])}else if(Dt==="justify"&&W1.encoding==="Identity-H"){R=[],Ta=Ke.length,gr=gr!==0?gr:V1;for(var Km=0,pi=0;pi<Ta;pi++)if(yo=pi===0?tf(ve):-jp,vo=pi===0?ef(Q):Km,pi<Ta-1){var nS=V((gr-il[pi])/(Ke[pi].split(" ").length-1)),tu=Ke[pi].split(" ");R.push([tu[0]+" ",vo,yo]),Km=0;for(var ru=1;ru<tu.length;ru++){var G1=($p(tu[ru-1]+" "+tu[ru])-$p(tu[ru]))*ql+nS;ru==tu.length-1?R.push([tu[ru],G1,0]):R.push([tu[ru]+" ",G1,0]),Km-=G1}}else R.push([Ke[pi],vo,yo]);R.push(["",Km,0])}else{if(Dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Ta=Ke.length,gr=gr!==0?gr:V1,pi=0;pi<Ta;pi++){yo=pi===0?tf(ve):-jp,vo=pi===0?ef(Q):0;var q1=Ke[pi].split(" ").length-1,K1=q1>0?(gr-il[pi])/q1:0;pi<Ta-1?Od.push(A(V(K1))):Od.push(0),R.push([Ke[pi],vo,yo])}}}(typeof be.R2L=="boolean"?be.R2L:qe)===!0&&(R=Gm(R,function(Zr,gn,mi){return[Zr.split("").reverse().join(""),gn,mi]})),We={text:R,x:Q,y:ve,options:be,mutex:{pdfEscape:Pr,activeFontKey:ft,fonts:Jt,activeFontSize:$e}},ir.publish("postProcessText",We),R=We.text,Ci=We.mutex.isHex||!1;var Y1=Jt[ft].encoding;Y1!=="WinAnsiEncoding"&&Y1!=="StandardEncoding"||(R=Gm(R,function(Zr,gn,mi){return[lf(Zr),gn,mi]})),Ke=B1(R),R=[];for(var Id,Rd,Ld,Fp=Array.isArray(Ke[0])?1:0,Md="",Bp=function(Zr,gn,mi){var qi="";return mi instanceof Wt?(mi=typeof be.angle=="number"?vs(mi,new Wt(1,0,0,1,Zr,gn)):vs(new Wt(1,0,0,1,Zr,gn),mi),x===v&&(mi=vs(new Wt(1,0,0,-1,0,0),mi)),qi=mi.join(" ")+` Tm
`):qi=A(Zr)+" "+A(gn)+` Td
`,qi},al=0;al<Ke.length;al++){switch(Md="",Fp){case 1:Ld=(Ci?"<":"(")+Ke[al][0]+(Ci?">":")"),Id=parseFloat(Ke[al][1]),Rd=parseFloat(Ke[al][2]);break;case 0:Ld=(Ci?"<":"(")+Ke[al]+(Ci?">":")"),Id=ef(Q),Rd=tf(ve)}Od!==void 0&&Od[al]!==void 0&&(Md=Od[al]+` Tw
`),al===0?R.push(Md+Bp(Id,Rd,ki)+Ld):Fp===0?R.push(Md+Ld):Fp===1&&R.push(Md+Bp(Id,Rd,ki)+Ld)}R=Fp===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var nu=`BT
/`;return nu+=ft+" "+$e+` Tf
`,nu+=A($e*of)+` TL
`,nu+=Pp+`
`,nu+=Aa,nu+=R,ie(nu+="ET"),d[ft]=!0,bn};var EP=h.__private__.clip=h.clip=function(R){return ie(R==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return EP("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ie("n"),this};var eu=h.__private__.isValidStyle=function(R){var Q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(Q=!0),Q};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(R){return eu(R)&&(c=R),this};var K2=h.__private__.getStyle=h.getStyle=function(R){var Q=c;switch(R){case"D":case"S":Q="S";break;case"F":Q="f";break;case"FD":case"DF":Q="B";break;case"f":case"f*":case"B":case"B*":Q=R}return Q},Y2=h.close=function(){return ie("h"),this};h.stroke=function(){return ie("S"),this},h.fill=function(R){return Vm("f",R),this},h.fillEvenOdd=function(R){return Vm("f*",R),this},h.fillStroke=function(R){return Vm("B",R),this},h.fillStrokeEvenOdd=function(R){return Vm("B*",R),this};var Vm=function(R,Q){sn(Q)==="object"?TP(Q,R):ie(R)},Cp=function(R){R===null||x===v&&R===void 0||(R=K2(R),ie(R))};function AP(R,Q,ve,be,Ee){var We=new py(Q||this.boundingBox,ve||this.xStep,be||this.yStep,this.gState,Ee||this.matrix);We.stream=this.stream;var Ke=R+"$$"+this.cloneIndex+++"$$";return Ha(Ke,We),We}var TP=function(R,Q){var ve=Xr[R.key],be=Ut[ve];if(be instanceof d0)ie("q"),ie(kP(Q)),be.gState&&h.setGState(be.gState),ie(R.matrix.toString()+" cm"),ie("/"+ve+" sh"),ie("Q");else if(be instanceof py){var Ee=new Wt(1,0,0,-1,0,Ip());R.matrix&&(Ee=Ee.multiply(R.matrix||Wl),ve=AP.call(be,R.key,R.boundingBox,R.xStep,R.yStep,Ee).id),ie("q"),ie("/Pattern cs"),ie("/"+ve+" scn"),be.gState&&h.setGState(be.gState),ie(Q),ie("Q")}},kP=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},I1=h.moveTo=function(R,Q){return ie(A(V(R))+" "+A(B(Q))+" m"),this},X2=h.lineTo=function(R,Q){return ie(A(V(R))+" "+A(B(Q))+" l"),this},Gl=h.curveTo=function(R,Q,ve,be,Ee,We){return ie([A(V(R)),A(B(Q)),A(V(ve)),A(B(be)),A(V(Ee)),A(B(We)),"c"].join(" ")),this};h.__private__.line=h.line=function(R,Q,ve,be,Ee){if(isNaN(R)||isNaN(Q)||isNaN(ve)||isNaN(be)||!eu(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return x===w?this.lines([[ve-R,be-Q]],R,Q,[1,1],Ee||"S"):this.lines([[ve-R,be-Q]],R,Q,[1,1]).stroke()},h.__private__.lines=h.lines=function(R,Q,ve,be,Ee,We){var Ke,Pt,Dt,ar,gr,Fr,Kn,ki,bn,Gi,Ci,Aa;if(typeof R=="number"&&(Aa=ve,ve=Q,Q=R,R=Aa),be=be||[1,1],We=We||!1,isNaN(Q)||isNaN(ve)||!Array.isArray(R)||!Array.isArray(be)||!eu(Ee)||typeof We!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(I1(Q,ve),Ke=be[0],Pt=be[1],ar=R.length,Gi=Q,Ci=ve,Dt=0;Dt<ar;Dt++)(gr=R[Dt]).length===2?(Gi=gr[0]*Ke+Gi,Ci=gr[1]*Pt+Ci,X2(Gi,Ci)):(Fr=gr[0]*Ke+Gi,Kn=gr[1]*Pt+Ci,ki=gr[2]*Ke+Gi,bn=gr[3]*Pt+Ci,Gi=gr[4]*Ke+Gi,Ci=gr[5]*Pt+Ci,Gl(Fr,Kn,ki,bn,Gi,Ci));return We&&Y2(),Cp(Ee),this},h.path=function(R){for(var Q=0;Q<R.length;Q++){var ve=R[Q],be=ve.c;switch(ve.op){case"m":I1(be[0],be[1]);break;case"l":X2(be[0],be[1]);break;case"c":Gl.apply(this,be);break;case"h":Y2()}}return this},h.__private__.rect=h.rect=function(R,Q,ve,be,Ee){if(isNaN(R)||isNaN(Q)||isNaN(ve)||isNaN(be)||!eu(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return x===w&&(be=-be),ie([A(V(R)),A(B(Q)),A(V(ve)),A(V(be)),"re"].join(" ")),Cp(Ee),this},h.__private__.triangle=h.triangle=function(R,Q,ve,be,Ee,We,Ke){if(isNaN(R)||isNaN(Q)||isNaN(ve)||isNaN(be)||isNaN(Ee)||isNaN(We)||!eu(Ke))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-R,be-Q],[Ee-ve,We-be],[R-Ee,Q-We]],R,Q,[1,1],Ke,!0),this},h.__private__.roundedRect=h.roundedRect=function(R,Q,ve,be,Ee,We,Ke){if(isNaN(R)||isNaN(Q)||isNaN(ve)||isNaN(be)||isNaN(Ee)||isNaN(We)||!eu(Ke))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Pt=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*ve),We=Math.min(We,.5*be),this.lines([[ve-2*Ee,0],[Ee*Pt,0,Ee,We-We*Pt,Ee,We],[0,be-2*We],[0,We*Pt,-Ee*Pt,We,-Ee,We],[2*Ee-ve,0],[-Ee*Pt,0,-Ee,-We*Pt,-Ee,-We],[0,2*We-be],[0,-We*Pt,Ee*Pt,-We,Ee,-We]],R+Ee,Q,[1,1],Ke,!0),this},h.__private__.ellipse=h.ellipse=function(R,Q,ve,be,Ee){if(isNaN(R)||isNaN(Q)||isNaN(ve)||isNaN(be)||!eu(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var We=4/3*(Math.SQRT2-1)*ve,Ke=4/3*(Math.SQRT2-1)*be;return I1(R+ve,Q),Gl(R+ve,Q-Ke,R+We,Q-be,R,Q-be),Gl(R-We,Q-be,R-ve,Q-Ke,R-ve,Q),Gl(R-ve,Q+Ke,R-We,Q+be,R,Q+be),Gl(R+We,Q+be,R+ve,Q+Ke,R+ve,Q),Cp(Ee),this},h.__private__.circle=h.circle=function(R,Q,ve,be){if(isNaN(R)||isNaN(Q)||isNaN(ve)||!eu(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,Q,ve,ve,be)},h.setFont=function(R,Q,ve){return ve&&(Q=T(Q,ve)),ft=Td(R,Q,{disableWarning:!1}),this};var CP=h.__private__.getFont=h.getFont=function(){return Jt[Td.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var R,Q,ve={};for(R in cr)if(cr.hasOwnProperty(R))for(Q in ve[R]=[],cr[R])cr[R].hasOwnProperty(Q)&&ve[R].push(Q);return ve},h.addFont=function(R,Q,ve,be,Ee){var We=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&We.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&We.indexOf(arguments[3])==-1&&(ve=T(ve,be)),fn.call(this,R,Q,ve,Ee=Ee||"Identity-H")};var Op,R1=e.lineWidth||.200025,OP=h.__private__.getLineWidth=h.getLineWidth=function(){return R1},or=h.__private__.setLineWidth=h.setLineWidth=function(R){return R1=R,ie(A(V(R))+" w"),this};h.__private__.setLineDash=$t.API.setLineDash=$t.API.setLineDashPattern=function(R,Q){if(R=R||[],Q=Q||0,isNaN(Q)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(ve){return A(V(ve))}).join(" "),Q=A(V(Q)),ie("["+R+"] "+Q+" d"),this};var PP=h.__private__.getLineHeight=h.getLineHeight=function(){return $e*Op};h.__private__.getLineHeight=h.getLineHeight=function(){return $e*Op};var NP=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Op=R),this},IP=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Op};NP(e.lineHeight);var ef=h.__private__.getHorizontalCoordinate=function(R){return V(R)},tf=h.__private__.getVerticalCoordinate=function(R){return x===v?R:dt[z].mediaBox.topRightY-dt[z].mediaBox.bottomLeftY-V(R)},RP=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(R){return A(ef(R))},LP=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(R){return A(tf(R))},Wm=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return ye(Wm)},h.__private__.setStrokeColor=h.setDrawColor=function(R,Q,ve,be){return Wm=we({ch1:R,ch2:Q,ch3:ve,ch4:be,pdfColorType:"draw",precision:2}),ie(Wm),this};var L1=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return ye(L1)},h.__private__.setFillColor=h.setFillColor=function(R,Q,ve,be){return L1=we({ch1:R,ch2:Q,ch3:ve,ch4:be,pdfColorType:"fill",precision:2}),ie(L1),this};var Pp=e.textColor||"0 g",MP=h.__private__.getTextColor=h.getTextColor=function(){return ye(Pp)};h.__private__.setTextColor=h.setTextColor=function(R,Q,ve,be){return Pp=we({ch1:R,ch2:Q,ch3:ve,ch4:be,pdfColorType:"text",precision:3}),this};var rf=e.charSpace,DP=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(rf||0)};h.__private__.setCharSpace=h.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return rf=R,this};var M1=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(R){var Q=h.CapJoinStyles[R];if(Q===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return M1=Q,ie(Q+" J"),this};var D1=0;h.__private__.setLineJoin=h.setLineJoin=function(R){var Q=h.CapJoinStyles[R];if(Q===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return D1=Q,ie(Q+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(A(V(R))+" M"),this},h.GState=W5,h.setGState=function(R){(R=typeof R=="string"?Kt[ct[R]]:Z2(null,R)).equals(Vt)||(ie("/"+R.id+" gs"),Vt=R)};var Z2=function(R,Q){if(!R||!ct[R]){var ve=!1;for(var be in Kt)if(Kt.hasOwnProperty(be)&&Kt[be].equals(Q)){ve=!0;break}if(ve)Q=Kt[be];else{var Ee="GS"+(Object.keys(Kt).length+1).toString(10);Kt[Ee]=Q,Q.id=Ee}return R&&(ct[R]=Q.id),ir.publish("addGState",Q),Q}};h.addGState=function(R,Q){return Z2(R,Q),this},h.saveGraphicsState=function(){return ie("q"),un.push({key:ft,size:$e,color:Pp}),this},h.restoreGraphicsState=function(){ie("Q");var R=un.pop();return ft=R.key,$e=R.size,Pp=R.color,Vt=null,this},h.setCurrentTransformationMatrix=function(R){return ie(R.toString()+" cm"),this},h.comment=function(R){return ie("#"+R),this};var nf=function(R,Q){var ve=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function(We){isNaN(We)||(ve=parseFloat(We))}});var be=Q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(We){isNaN(We)||(be=parseFloat(We))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(We){Ee=We.toString()}}),this},j1=function(R,Q,ve,be){nf.call(this,R,Q),this.type="rect";var Ee=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(Ke){isNaN(Ke)||(Ee=parseFloat(Ke))}});var We=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return We},set:function(Ke){isNaN(Ke)||(We=parseFloat(Ke))}}),this},Hm=function(){this.page=st,this.currentPage=z,this.pages=xe.slice(0),this.pagesContext=dt.slice(0),this.x=yt,this.y=Or,this.matrix=qt,this.width=F1(z),this.height=Q2(z),this.outputDestination=Ie,this.id="",this.objectNumber=-1};Hm.prototype.restore=function(){st=this.page,z=this.currentPage,dt=this.pagesContext,xe=this.pages,yt=this.x,Or=this.y,qt=this.matrix,J2(z,this.width),af(z,this.height),Ie=this.outputDestination};var $1=function(R,Q,ve,be,Ee){Ks.push(new Hm),st=z=0,xe=[],yt=R,Or=Q,qt=Ee,ri([ve,be])};for(var Np in h.beginFormObject=function(R,Q,ve,be,Ee){return $1(R,Q,ve,be,Ee),this},h.endFormObject=function(R){return function(Q){if(go[Q])Ks.pop().restore();else{var ve=new Hm,be="Xo"+(Object.keys(Si).length+1).toString(10);ve.id=be,go[Q]=be,Si[be]=ve,ir.publish("addFormObject",ve),Ks.pop().restore()}}(R),this},h.doFormObject=function(R,Q){var ve=Si[go[R]];return ie("q"),ie(Q.toString()+" cm"),ie("/"+ve.id+" Do"),ie("Q"),this},h.getFormObject=function(R){var Q=Si[go[R]];return{x:Q.x,y:Q.y,width:Q.width,height:Q.height,matrix:Q.matrix}},h.save=function(R,Q){return R=R||"generated.pdf",(Q=Q||{}).returnPromise=Q.returnPromise||!1,Q.returnPromise===!1?(s0(zm(Qc()),R),typeof s0.unload=="function"&&nr.setTimeout&&setTimeout(s0.unload,911),this):new Promise(function(ve,be){try{var Ee=s0(zm(Qc()),R);typeof s0.unload=="function"&&nr.setTimeout&&setTimeout(s0.unload,911),ve(Ee)}catch(We){be(We.message)}})},$t.API)$t.API.hasOwnProperty(Np)&&(Np==="events"&&$t.API.events.length?function(R,Q){var ve,be,Ee;for(Ee=Q.length-1;Ee!==-1;Ee--)ve=Q[Ee][0],be=Q[Ee][1],R.subscribe.apply(R,[ve].concat(typeof be=="function"?[be]:be))}(ir,$t.API.events):h[Np]=$t.API[Np]);function F1(R){return dt[R].mediaBox.topRightX-dt[R].mediaBox.bottomLeftX}function J2(R,Q){dt[R].mediaBox.topRightX=Q+dt[R].mediaBox.bottomLeftX}function Q2(R){return dt[R].mediaBox.topRightY-dt[R].mediaBox.bottomLeftY}function af(R,Q){dt[R].mediaBox.topRightY=Q+dt[R].mediaBox.bottomLeftY}var sf=h.getPageWidth=function(R){return F1(R=R||z)/pt},eS=h.setPageWidth=function(R,Q){J2(R,Q*pt)},Ip=h.getPageHeight=function(R){return Q2(R=R||z)/pt},tS=h.setPageHeight=function(R,Q){af(R,Q*pt)};return h.internal={pdfEscape:Pr,getStyle:K2,getFont:CP,getFontSize:nt,getCharSpace:DP,getTextColor:MP,getLineHeight:PP,getLineHeightFactor:IP,getLineWidth:OP,write:Te,getHorizontalCoordinate:ef,getVerticalCoordinate:tf,getCoordinateString:RP,getVerticalCoordinateString:LP,collections:{},newObject:Un,newAdditionalObject:ge,newObjectDeferred:Ei,newObjectDeferredBegin:te,getFilters:ke,putStream:je,events:ir,scaleFactor:pt,pageSize:{getWidth:function(){return sf(z)},setWidth:function(R){eS(z,R)},getHeight:function(){return Ip(z)},setHeight:function(R){tS(z,R)}},encryptionOptions:u,encryption:Hi,getEncryptor:function(R){return u!==null?Hi.encryptor(R,0):function(Q){return Q}},output:G2,getNumberOfPages:rl,get pages(){return xe},out:ie,f2:P,f3:N,getPageInfo:Qu,getPageInfoByObjId:q2,getCurrentPageInfo:SP,getPDFVersion:p,Point:nf,Rectangle:j1,Matrix:Wt,hasHotfix:nl},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return sf(z)},set:function(R){eS(z,R)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Ip(z)},set:function(R){tS(z,R)},enumerable:!0,configurable:!0}),(function(R){for(var Q=0,ve=tt.length;Q<ve;Q++){var be=fn.call(this,R[Q][0],R[Q][1],R[Q][2],tt[Q][3],!0);f===!1&&(d[be]=!0);var Ee=R[Q][0].split("-");er({id:be,fontName:Ee[0],fontStyle:Ee[1]||""})}ir.publish("addFonts",{fonts:Jt,dictionary:cr})}).call(h,tt),ft="F1",Zc(i,r),ir.publish("initialized"),h}Rg.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Rg.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Rg.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Rg.prototype.processOwnerPassword=function(e,t){return cj(lj(t).substr(0,5),e)},Rg.prototype.encryptor=function(e,t){var r=lj(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return cj(r,n)}},W5.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||sn(e)!==sn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},$t.API={events:[]},$t.version="4.1.0";var ai=$t.API,r7=1,Bm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bg=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},H5=function(e){return e.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(t){var r=t.charCodeAt(0).toString(16).toUpperCase();return"#"+(r.length===1?"0"+r:r)})},dr=function(e){return e.toFixed(2)},Zd=function(e){return e.toFixed(5)};ai.__acroform__={};var mo=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},hJ=function(e){return e*r7},fu=function(e){var t=new uve,r=Ct.internal.getHeight(e)||0,n=Ct.internal.getWidth(e)||0;return t.BBox=[0,0,Number(dr(n)),Number(dr(r))],t},APt=ai.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},TPt=ai.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},kPt=ai.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},xi=ai.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kPt(e,t-1)},bi=ai.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return APt(e,t-1)},_i=ai.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return TPt(e,t-1)},CPt=ai.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],a=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(i+s)||0,l.upperRight_Y=n(a)||0,[Number(dr(l.lowerLeft_X)),Number(dr(l.lowerLeft_Y)),Number(dr(l.upperRight_X)),Number(dr(l.upperRight_Y))]},OPt=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=uj(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+dr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=fu(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},uj=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(P){return P.split(`
`)}):i.map(function(P){return[P]});var a=r,s=Ct.internal.getHeight(e)||0;s=s<0?-s:s;var o=Ct.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(P,N,V){if(P+1<i.length){var B=N+" "+i[P+1][0];return rA(B,e,V).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var c,u,f=rA("3",e,a).height,d=e.multiline?s-a:(s-f)/2,h=d+=2,m=0,p=0,y=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+rA(t,e,a=12).width+", FieldWidth:"+o+`
`;break}for(var g="",w=0,v=0;v<i.length;v++)if(i.hasOwnProperty(v)){var x=!1;if(i[v].length!==1&&y!==i[v].length-1){if((f+2)*(w+2)+2>s)continue e;g+=i[v][y],x=!0,p=v,v--}else{g=(g+=i[v][y]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var b=parseInt(v),S=l(b,g,a),T=v>=i.length-1;if(S&&!T){g+=" ",y=0;continue}if(S||T){if(T)p=b;else if(e.multiline&&(f+2)*(w+2)+2>s)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>s)continue e;p=b}}for(var A="",O=m;O<=p;O++){var M=i[O];if(e.multiline){if(O===p){A+=M[y]+" ",y=(y+1)%M.length;continue}if(O===m){A+=M[M.length-1]+" ";continue}}A+=M[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,u=rA(A,e,a).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=dr(c)+" "+dr(h)+` Td
`,t+="("+Bm(A)+`) Tj
`,t+=-dr(c)+` 0 Td
`,h=-(a+2),u=0,m=x?p:p+1,w++,g=""}break}return n.text=t,n.fontSize=a,n},rA=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},PPt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},NPt=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},IPt=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Yc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(PPt)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");r7=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new fve,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&NPt(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=CPt(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ct.createDefaultAppearanceStream(o),sn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=OPt(o);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var f="";for(var d in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(d)){var h=o.appearanceStreamContent[d];if(f+="/"+d+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var m=h[s];typeof m=="function"&&(m=m.call(i,o)),f+="/"+s+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,o)),f+="/"+s+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(p,y){for(var g in p)if(p.hasOwnProperty(g)){var w=g,v=p[g];y.internal.newObjectDeferredBegin(v.objId,!0),sn(v)==="object"&&typeof v.putStream=="function"&&v.putStream(),delete p[w]}}(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},cve=ai.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(s){return s};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),sn(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)==="/"?i+="/"+H5(e[a].substr(1)):(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+Bm(n(e[a].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},g3=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Bm(n(e))+")"},ku=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ku.prototype.toString=function(){return this.objId+" 0 R"},ku.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ku.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:cve(i,this.objId,this.scope)}):i instanceof ku?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var uve=function(){ku.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};mo(uve,ku);var fve=function(){ku.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Bm(r(e))+")"}},set:function(r){e=r}})};mo(fve,ku);var Yc=function e(){ku.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');t=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!xi(t,3)},set:function(g){g?this.F=bi(t,3):this.F=_i(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');r=g}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(g){n=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(g){n[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(g){n[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(g){n[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(g){n[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof G5)return;a="FieldObject"+e.FieldNum++}var g=function(w){return w};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+Bm(g(a))+")"},set:function(g){a=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(g){a=g}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/r7:c},set:function(g){c=g}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(g){u=g}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof G5||this instanceof V0))return g3(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=g}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof va==0?g3(d,this.objId,this.scope):d},set:function(g){g=g.toString(),d=this instanceof va==0?g.substr(0,1)==="("?bg(g.substr(1,g.length-2)):bg(g):g}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof va==1?bg(d.substr(1,d.length-1)):d},set:function(g){g=g.toString(),d=this instanceof va==1?"/"+H5(g):g}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof va==0?g3(h,this.objId,this.scope):h},set:function(g){g=g.toString(),h=this instanceof va==0?g.substr(0,1)==="("?bg(g.substr(1,g.length-2)):bg(g):g}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof va==1?bg(h.substr(1,h.length-1)):h},set:function(g){g=g.toString(),h=this instanceof va==1?"/"+H5(g):g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(g){g=!!g,p=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(g){m=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,1)},set:function(g){g?this.Ff=bi(this.Ff,1):this.Ff=_i(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,2)},set:function(g){g?this.Ff=bi(this.Ff,2):this.Ff=_i(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,3)},set:function(g){g?this.Ff=bi(this.Ff,3):this.Ff=_i(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');y=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(y){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};mo(Yc,ku);var $y=function(){Yc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return cve(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,c=[];l=s.exec(a);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,18)},set:function(r){r?this.Ff=bi(this.Ff,18):this.Ff=_i(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=bi(this.Ff,19):this.Ff=_i(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,20)},set:function(r){r?(this.Ff=bi(this.Ff,20),t.sort()):this.Ff=_i(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,22)},set:function(r){r?this.Ff=bi(this.Ff,22):this.Ff=_i(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,23)},set:function(r){r?this.Ff=bi(this.Ff,23):this.Ff=_i(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,27)},set:function(r){r?this.Ff=bi(this.Ff,27):this.Ff=_i(this.Ff,27)}}),this.hasAppearanceStream=!1};mo($y,Yc);var Fy=function(){$y.call(this),this.fontName="helvetica",this.combo=!1};mo(Fy,$y);var By=function(){Fy.call(this),this.combo=!0};mo(By,Fy);var eT=function(){By.call(this),this.edit=!0};mo(eT,By);var va=function(){Yc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,15)},set:function(r){r?this.Ff=bi(this.Ff,15):this.Ff=_i(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,16)},set:function(r){r?this.Ff=bi(this.Ff,16):this.Ff=_i(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,17)},set:function(r){r?this.Ff=bi(this.Ff,17):this.Ff=_i(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,26)},set:function(r){r?this.Ff=bi(this.Ff,26):this.Ff=_i(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+Bm(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){sn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+H5(r)}})};mo(va,Yc);var tT=function(){va.call(this),this.pushButton=!0};mo(tT,va);var Uy=function(){va.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};mo(Uy,va);var G5=function(){var e,t;Yc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),n)s.push("/"+a+" ("+Bm(i(n[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){sn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ct.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mo(G5,Yc),Uy.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Uy.prototype.createOption=function(e){var t=new G5;return t.Parent=this,t.optionName=e,this.Kids.push(t),RPt.call(this.scope,t),t};var rT=function(){va.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ct.CheckBox.createAppearanceStream()};mo(rT,va);var V0=function(){Yc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,13)},set:function(t){t?this.Ff=bi(this.Ff,13):this.Ff=_i(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,21)},set:function(t){t?this.Ff=bi(this.Ff,21):this.Ff=_i(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,23)},set:function(t){t?this.Ff=bi(this.Ff,23):this.Ff=_i(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,24)},set:function(t){t?this.Ff=bi(this.Ff,24):this.Ff=_i(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,25)},set:function(t){t?this.Ff=bi(this.Ff,25):this.Ff=_i(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,26)},set:function(t){t?this.Ff=bi(this.Ff,26):this.Ff=_i(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mo(V0,Yc);var nT=function(){V0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!xi(this.Ff,14)},set:function(e){e?this.Ff=bi(this.Ff,14):this.Ff=_i(this.Ff,14)}}),this.password=!0};mo(nT,V0);var Ct={CheckBox:{createAppearanceStream:function(){return{N:{On:Ct.CheckBox.YesNormal},D:{On:Ct.CheckBox.YesPushDown,Off:Ct.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=fu(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=uj(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+dr(Ct.internal.getWidth(e))+" "+dr(Ct.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+dr(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=fu(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],a=Ct.internal.getHeight(e),s=Ct.internal.getWidth(e),o=uj(e,e.caption);return i.push("1 g"),i.push("0 0 "+dr(s)+" "+dr(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+dr(s-1)+" "+dr(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+dr(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=fu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+dr(Ct.internal.getWidth(e))+" "+dr(Ct.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ct.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ct.RadioButton.Circle.YesNormal,t.D[e]=Ct.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=fu(e);t.scope=e.scope;var r=[],n=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Ct.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Zd(Ct.internal.getWidth(e)/2)+" "+Zd(Ct.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=fu(e);t.scope=e.scope;var r=[],n=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Ct.internal.Bezier_C).toFixed(5)),s=Number((n*Ct.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Zd(Ct.internal.getWidth(e)/2)+" "+Zd(Ct.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Zd(Ct.internal.getWidth(e)/2)+" "+Zd(Ct.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=fu(e);t.scope=e.scope;var r=[],n=Ct.internal.getWidth(e)<=Ct.internal.getHeight(e)?Ct.internal.getWidth(e)/4:Ct.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*Ct.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Zd(Ct.internal.getWidth(e)/2)+" "+Zd(Ct.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ct.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ct.RadioButton.Cross.YesNormal,t.D[e]=Ct.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=fu(e);t.scope=e.scope;var r=[],n=Ct.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+dr(Ct.internal.getWidth(e)-2)+" "+dr(Ct.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(dr(n.x1.x)+" "+dr(n.x1.y)+" m"),r.push(dr(n.x2.x)+" "+dr(n.x2.y)+" l"),r.push(dr(n.x4.x)+" "+dr(n.x4.y)+" m"),r.push(dr(n.x3.x)+" "+dr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=fu(e);t.scope=e.scope;var r=Ct.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+dr(Ct.internal.getWidth(e))+" "+dr(Ct.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+dr(Ct.internal.getWidth(e)-2)+" "+dr(Ct.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(dr(r.x1.x)+" "+dr(r.x1.y)+" m"),n.push(dr(r.x2.x)+" "+dr(r.x2.y)+" l"),n.push(dr(r.x4.x)+" "+dr(r.x4.y)+" m"),n.push(dr(r.x3.x)+" "+dr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=fu(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+dr(Ct.internal.getWidth(e))+" "+dr(Ct.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ct.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ct.internal.getWidth(e),r=Ct.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Ct.internal.getWidth=function(e){var t=0;return sn(e)==="object"&&(t=hJ(e.Rect[2])),t},Ct.internal.getHeight=function(e){var t=0;return sn(e)==="object"&&(t=hJ(e.Rect[3])),t};var RPt=ai.addField=function(e){if(IPt(this,e),!(e instanceof Yc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ai.AcroFormChoiceField=$y,ai.AcroFormListBox=Fy,ai.AcroFormComboBox=By,ai.AcroFormEditBox=eT,ai.AcroFormButton=va,ai.AcroFormPushButton=tT,ai.AcroFormRadioButton=Uy,ai.AcroFormCheckBox=rT,ai.AcroFormTextField=V0,ai.AcroFormPasswordField=nT,ai.AcroFormAppearance=Ct,ai.AcroForm={ChoiceField:$y,ListBox:Fy,ComboBox:By,EditBox:eT,Button:va,PushButton:tT,RadioButton:Uy,CheckBox:rT,TextField:V0,PasswordField:nT,Appearance:Ct},$t.AcroForm={ChoiceField:$y,ListBox:Fy,ComboBox:By,EditBox:eT,Button:va,PushButton:tT,RadioButton:Uy,CheckBox:rT,TextField:V0,PasswordField:nT,Appearance:Ct};$t.AcroForm;function dve(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(P,N){var V,B,G,Z,J,Y=r;if((N=N||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(S(P))for(J in n)for(G=n[J],V=0;V<G.length;V+=1){for(Z=!0,B=0;B<G[V].length;B+=1)if(G[V][B]!==void 0&&G[V][B]!==P[B]){Z=!1;break}if(Z===!0){Y=J;break}}else for(J in n)for(G=n[J],V=0;V<G.length;V+=1){for(Z=!0,B=0;B<G[V].length;B+=1)if(G[V][B]!==void 0&&G[V][B]!==P.charCodeAt(B)){Z=!1;break}if(Z===!0){Y=J;break}}return Y===r&&N!==r&&(Y=N),Y},a=function P(N){for(var V=this.internal.write,B=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:N.width}),Z.push({key:"Height",value:N.height}),N.colorSpace===g.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===g.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)&&N.transparency.length>0){for(var J="",Y=0,U=N.transparency.length;Y<U;Y++)J+=N.transparency[Y]+" "+N.transparency[Y]+" ";Z.push({key:"Mask",value:"["+J+"]"})}N.sMask!==void 0&&Z.push({key:"SMask",value:N.objectId+1+" 0 R"});var se=N.filter!==void 0?["/"+N.filter]:void 0;if(B({data:N.data,additionalKeyValues:Z,alreadyAppliedFilters:se,objectId:N.objectId}),V("endobj"),"sMask"in N&&N.sMask!==void 0){var ue,I=(ue=N.sMaskBitsPerComponent)!==null&&ue!==void 0?ue:N.bitsPerComponent,z={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:I,data:N.sMask};"filter"in N&&(z.decodeParameters="/Predictor ".concat(N.predictor," /Colors 1 /BitsPerComponent ").concat(I," /Columns ").concat(N.width),z.filter=N.filter),P.call(this,z)}if(N.colorSpace===g.INDEXED){var H=this.internal.newObject();B({data:A(new Uint8Array(N.palette)),objectId:H}),V("endobj")}},s=function(){var P=this.internal.collections[t+"images"];for(var N in P)a.call(this,P[N])},o=function(){var P,N=this.internal.collections[t+"images"],V=this.internal.write;for(var B in N)V("/I"+(P=N[B]).index,P.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections[t+"images"];return l.call(this),P},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},f=function(P){return typeof e["process"+P.toUpperCase()]=="function"},d=function(P){return sn(P)==="object"&&P.nodeType===1},h=function(P,N){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var V=""+P.getAttribute("src");if(V.indexOf("data:image/")===0)return QA(unescape(V).split("base64,").pop());var B=e.loadFile(V,!0);if(B!==void 0)return B}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var G;switch(N){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;default:G="image/jpeg"}return QA(P.toDataURL(G,1).split("base64,").pop())}},m=function(P){var N=this.internal.collections[t+"images"];if(N){for(var V in N)if(P===N[V].alias)return N[V]}},p=function(P,N,V){return P||N||(P=-96,N=-96),P<0&&(P=-1*V.width*72/P/this.internal.scaleFactor),N<0&&(N=-1*V.height*72/N/this.internal.scaleFactor),P===0&&(P=N*V.width/V.height),N===0&&(N=P*V.height/V.width),[P,N]},y=function(P,N,V,B,G,Z){var J=p.call(this,V,B,G),Y=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,se=c.call(this);if(V=J[0],B=J[1],se[G.index]=G,Z){Z*=Math.PI/180;var ue=Math.cos(Z),I=Math.sin(Z),z=function(q){return q.toFixed(4)},H=[z(ue),z(I),z(-1*I),z(ue),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,Y(P),U(N+B),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([Y(V),"0","0",Y(B),"0","0","cm"].join(" "))):this.internal.write([Y(V),"0","0",Y(B),Y(P),U(N+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(P){var N,V,B=0;if(typeof P=="string")for(V=P.length,N=0;N<V;N++)B=(B<<5)-B+P.charCodeAt(N),B|=0;else if(S(P))for(V=P.byteLength/2,N=0;N<V;N++)B=(B<<5)-B+P[N],B|=0;return B},x=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var N=!0;return P.length===0&&(N=!1),P.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(N=!1),N},b=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var N=P.indexOf(",");return N<0?null:P.substring(0,N).trim().endsWith("base64")?P.substring(N+1):null};e.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var S=e.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},T=e.__addimage__.binaryStringToUint8Array=function(P){for(var N=P.length,V=new Uint8Array(N),B=0;B<N;B++)V[B]=P.charCodeAt(B);return V},A=e.__addimage__.arrayBufferToBinaryString=function(P){for(var N="",V=S(P)?P:new Uint8Array(P),B=0;B<V.length;B+=8192)N+=String.fromCharCode.apply(null,V.subarray(B,B+8192));return N};e.addImage=function(){var P,N,V,B,G,Z,J,Y,U;if(typeof arguments[1]=="number"?(N=r,V=arguments[1],B=arguments[2],G=arguments[3],Z=arguments[4],J=arguments[5],Y=arguments[6],U=arguments[7]):(N=arguments[1],V=arguments[2],B=arguments[3],G=arguments[4],Z=arguments[5],J=arguments[6],Y=arguments[7],U=arguments[8]),sn(P=arguments[0])==="object"&&!d(P)&&"imageData"in P){var se=P;P=se.imageData,N=se.format||N||r,V=se.x||V||0,B=se.y||B||0,G=se.w||se.width||G,Z=se.h||se.height||Z,J=se.alias||J,Y=se.compression||Y,U=se.rotation||se.angle||U}var ue=this.internal.getFilters();if(Y===void 0&&ue.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(V)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=O.call(this,P,N,J,Y);return y.call(this,V,B,G,Z,I,U),this};var O=function(P,N,V,B){var G,Z,J;if(typeof P=="string"&&i(P)===r){P=unescape(P);var Y=M(P,!1);(Y!==""||(Y=e.loadFile(P,!0))!==void 0)&&(P=Y)}if(d(P)&&(P=h(P,N)),N=i(P,N),!f(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((J=V)==null||J.length===0)&&(V=function(U){return typeof U=="string"||S(U)?v(U):S(U.data)?v(U.data):null}(P)),(G=m.call(this,V))||(P instanceof Uint8Array||N==="RGBA"||(Z=P,P=T(P)),G=this["process"+N.toUpperCase()](P,u.call(this),V,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:w.NONE}(B),Z)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},M=e.__addimage__.convertBase64ToBinaryString=function(P,N){N=typeof N!="boolean"||N;var V,B="";if(typeof P=="string"){var G;V=(G=b(P))!==null&&G!==void 0?G:P;try{B=QA(V)}catch(Z){if(N)throw x(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};e.getImageProperties=function(P){var N,V,B="";if(d(P)&&(P=h(P)),typeof P=="string"&&i(P)===r&&((B=M(P,!1))===""&&(B=e.loadFile(P)||""),P=B),V=i(P),!f(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(P instanceof Uint8Array||(P=T(P)),!(N=this["process"+V.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=V,N}})($t.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};$t.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,f=0;f<c.length&&!u;f++)switch((n=c[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var d=0;d<c.length;d++){n=c[d];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),w=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",a+=" /Popup "+y.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(g(w))+") >>",p.content=a;var v=p.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(a+=" /Open true"),a+=" >>",y.content=a,this.internal.write(p.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var x=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var b=this.annotations._nameMap[n.options.name];n.options.pageNumber=b.page,n.options.top=b.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var S=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:c(n),w:l(r+i),h:c(n+a)},options:s,type:"link"})},e.textWithLink=function(r,n,i,a){var s,o,l=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var u=this.splitTextToSize(r,o).length;s=Math.ceil(c*u)}else o=l,s=c;return this.text(r,n,i,a),i+=.2*c,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,i-c,o,s,a),l},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}($t.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},s=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},o=e.__arabicParser__.isArabicEndLetter=function(p){return s(p)&&a(p)&&t[p.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(p){return s(p)&&i.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return s(p)&&a(p)&&t[p.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return s(p)&&a(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return s(p)&&a(p)&&t[p.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return s(p)&&a(p)&&t[p.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(p){var y=0,g=r,w="",v=0;for(y=0;y<p.length;y+=1)g[p.charCodeAt(y)]!==void 0?(v++,typeof(g=g[p.charCodeAt(y)])=="number"&&(w+=String.fromCharCode(g),g=r,v=0),y===p.length-1&&(g=r,w+=p.charAt(y-(v-1)),y-=v-1,v=0)):(g=r,w+=p.charAt(y-v),y-=v,v=0);return w};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var d=e.__arabicParser__.getCorrectForm=function(p,y,g){return s(p)?a(p)===!1?-1:!c(p)||!s(y)&&!s(g)||!s(g)&&o(y)||o(p)&&!s(y)||o(p)&&l(y)||o(p)&&o(y)?0:u(p)&&s(y)&&!o(y)&&s(g)&&c(g)?3:o(p)||!s(g)?1:2:-1},h=function(p){var y=0,g=0,w=0,v="",x="",b="",S=(p=p||"").split("\\s+"),T=[];for(y=0;y<S.length;y+=1){for(T.push(""),g=0;g<S[y].length;g+=1)v=S[y][g],x=S[y][g-1],b=S[y][g+1],s(v)?(w=d(v,x,b),T[y]+=w!==-1?String.fromCharCode(t[v.charCodeAt(0)][w]):v):T[y]+=v;T[y]=f(T[y])}return T.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var p,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(y)){var w=0;for(g=[],w=0;w<y.length;w+=1)Array.isArray(y[w])?g.push([h(y[w][0]),y[w][1],y[w][2]]):g.push([h(y[w])]);p=g}else p=h(y);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",m])}($t.API),$t.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}($t.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(p){l=p}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},e.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),f=c.font||this.getFont(),d=c.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=c.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(v,x){return v.concat(y.splitTextToSize(x,g))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)h<(p=this.getStringUnitWidth(l[w],{font:f})*u)&&(h=p);return h!==0&&(m=l.length),{w:h/=d,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/d,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,d=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,h&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};e.table=function(l,c,u,f,d){if(n.call(this),!u)throw new Error("No data for PDF table.");var h,m,p,y,g=[],w=[],v=[],x={},b={},S=[],T=[],A=(d=d||{}).autoSize||!1,O=d.printHeaders!==!1,M=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,P=d.margins||Object.assign({width:this.getPageWidth()},t),N=typeof d.padding=="number"?d.padding:3,V=d.headerBackgroundColor||"#c8c8c8",B=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=B,this.setFontSize(M),f==null)w=g=Object.keys(u[0]),v=g.map(function(){return"left"});else if(Array.isArray(f)&&sn(f[0])==="object")for(g=f.map(function(se){return se.name}),w=f.map(function(se){return se.prompt||se.name||""}),v=f.map(function(se){return se.align||"left"}),h=0;h<f.length;h+=1)b[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(w=g=f,v=g.map(function(){return"left"}));if(A||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<g.length;h+=1){for(x[y=g[h]]=u.map(function(se){return se[y]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(w[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=x[y],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)S.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[y]=Math.max.apply(null,S)+N+N,S=[]}if(O){var G={};for(h=0;h<g.length;h+=1)G[g[h]]={},G[g[h]].text=w[h],G[g[h]].align=v[h];var Z=o.call(this,G,b);T=g.map(function(se){return new a(l,c,b[se],Z,G[se].text,void 0,G[se].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var J=f.reduce(function(se,ue){return se[ue.name]=ue.align,se},{});for(h=0;h<u.length;h+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:h,data:u[h]},this);var Y=o.call(this,u[h],b);for(p=0;p<g.length;p+=1){var U=u[h][g[p]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:h,col:p,data:U},this),s.call(this,new a(l,c,b[g[p]],Y,U,h+2,J[g[p]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(h){var m=l[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/d+u+u},this).reduce(function(h,m){return Math.max(h,m)},0)};e.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},e.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,d.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(m)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),r=!1}}($t.API);var hve={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},pve=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fj=dve(pve),mve=[100,200,300,400,500,600,700,800,900],LPt=dve(mve);function y3(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return hve[a=a||"normal"]?a:"normal"}(e.style),n=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),i=function(a){return typeof fj[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function pJ(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var MPt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},mJ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function gJ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function yJ(e){return e.trimLeft()}function DPt(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function jPt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var _g,nA,vJ,wJ,xJ,v3=["times"];function bJ(e,t,r,n,i){var a=4,s=SJ;switch(i){case $t.API.image_compression.FAST:a=1,s=_J;break;case $t.API.image_compression.MEDIUM:a=6,s=EJ;break;case $t.API.image_compression.SLOW:a=9,s=AJ}e=function(l,c,u,f){for(var d,h=l.length/c,m=new Uint8Array(l.length+h),p=[$Pt,_J,SJ,EJ,AJ],y=0;y<h;y+=1){var g=y*c,w=l.subarray(g,g+c);if(f)m.set(f(w,u,d),g+y);else{for(var v=p.length,x=[],b=0;b<v;b+=1)x[b]=p[b](w,u,d);var S=BPt(x.concat());m.set(x[S],g+y)}d=w}return m}(e,t,Math.ceil(r*n/8),s);var o=ij(e,{level:a});return $t.API.__addimage__.arrayBufferToBinaryString(o)}function $Pt(e){var t=Array.apply([],e);return t.unshift(0),t}function _J(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=e[i-t]||0;n[i+1]=e[i]-a+256&255}return n}function SJ(e,t,r){var n=e.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var s=r&&r[a]||0;i[a+1]=e[a]-s+256&255}return i}function EJ(e,t,r){var n=e.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var s=e[a-t]||0,o=r&&r[a]||0;i[a+1]=e[a]+256-(s+o>>>1)&255}return i}function AJ(e,t,r){var n=e.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var s=FPt(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);i[a+1]=e[a]-s+256&255}return i}function FPt(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),a=Math.abs(e+t-r-r);return n<=i&&n<=a?e:i<=a?t:r}function BPt(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function w3(e,t,r){var n=t*r,i=Math.floor(n/8),a=16-(n-8*i+r),s=(1<<r)-1;return gve(e,i)>>a&s}function TJ(e,t,r,n){var i=r*n,a=Math.floor(i/8),s=16-(i-8*a+n),o=(1<<n)-1,l=(t&o)<<s;(function(c,u,f){if(u+1<c.byteLength)c.setUint16(u,f,!1);else{var d=f>>8&255;c.setUint8(u,d)}})(e,a,gve(e,a)&~(o<<s)&65535|l)}function gve(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function UPt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,s=1<<1+(7&i);e[t++],e[t++];var o=null,l=null;a&&(o=t,l=s,t+=3*s);var c=!0,u=[],f=0,d=null,h=0,m=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];f=e[t++]|e[t++]<<8,d=e[t++],1&p||(d=null),h=p>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,x=e[t++],b=x>>6&1,S=1<<1+(7&x),T=o,A=l,O=!1;x>>7&&(O=!0,T=t,A=S,t+=3*S);var M=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:y,y:g,width:w,height:v,has_local_palette:O,palette_offset:T,palette_size:A,data_offset:M,data_length:t-M,transparent_index:d,interlaced:!!b,delay:f,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(N){if(N<0||N>=u.length)throw new Error("Frame index out of range.");return u[N]},this.decodeAndBlitFrameBGRA=function(N,V){var B=this.frameInfo(N),G=B.width*B.height,Z=new Uint8Array(G);kJ(e,B.data_offset,Z,G);var J=B.palette_offset,Y=B.transparent_index;Y===null&&(Y=256);var U=B.width,se=r-U,ue=U,I=4*(B.y*r+B.x),z=4*((B.y+B.height)*r+B.x),H=I,q=4*se;B.interlaced===!0&&(q+=4*r*7);for(var F=8,D=0,re=Z.length;D<re;++D){var K=Z[D];if(ue===0&&(ue=U,(H+=q)>=z&&(q=4*se+4*r*(F-1),H=I+(U+se)*(F<<1),F>>=1)),K===Y)H+=4;else{var le=e[J+3*K],xe=e[J+3*K+1],X=e[J+3*K+2];V[H++]=X,V[H++]=xe,V[H++]=le,V[H++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(N,V){var B=this.frameInfo(N),G=B.width*B.height,Z=new Uint8Array(G);kJ(e,B.data_offset,Z,G);var J=B.palette_offset,Y=B.transparent_index;Y===null&&(Y=256);var U=B.width,se=r-U,ue=U,I=4*(B.y*r+B.x),z=4*((B.y+B.height)*r+B.x),H=I,q=4*se;B.interlaced===!0&&(q+=4*r*7);for(var F=8,D=0,re=Z.length;D<re;++D){var K=Z[D];if(ue===0&&(ue=U,(H+=q)>=z&&(q=4*se+4*r*(F-1),H=I+(U+se)*(F<<1),F>>=1)),K===Y)H+=4;else{var le=e[J+3*K],xe=e[J+3*K+1],X=e[J+3*K+2];V[H++]=le,V[H++]=xe,V[H++]=X,V[H++]=255}--ue}}}function kJ(e,t,r,n){for(var i=e[t++],a=1<<i,s=a+1,o=s+1,l=i+1,c=(1<<l)-1,u=0,f=0,d=0,h=e[t++],m=new Int32Array(4096),p=null;;){for(;u<16&&h!==0;)f|=e[t++]<<u,u+=8,h===1?h=e[t++]:--h;if(u<l)break;var y=f&c;if(f>>=l,u-=l,y!==a){if(y===s)break;for(var g=y<o?y:p,w=0,v=g;v>a;)v=m[v]>>8,++w;var x=v;if(d+w+(g!==y?1:0)>n)return void vn.log("Warning, gif stream longer than expected.");r[d++]=x;var b=d+=w;for(g!==y&&(r[d++]=x),v=g;w--;)v=m[v],r[--b]=255&v,v>>=8;p!==null&&o<4096&&(m[o++]=p<<8|x,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=y}else o=s+1,c=(1<<(l=i+1))-1,p=null}return d!==n&&vn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function x3(e){var t,r,n,i,a,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(65535),d=new Array(65535),h=new Array(64),m=new Array(64),p=[],y=0,g=7,w=new Array(64),v=new Array(64),x=new Array(64),b=new Array(256),S=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(I,z){for(var H=0,q=0,F=new Array,D=1;D<=16;D++){for(var re=1;re<=I[D];re++)F[z[q]]=[],F[z[q]][0]=H,F[z[q]][1]=D,q++,H++;H*=2}return F}function J(I){for(var z=I[0],H=I[1]-1;H>=0;)z&1<<H&&(y|=1<<g),H--,--g<0&&(y==255?(Y(255),Y(0)):Y(y),g=7,y=0)}function Y(I){p.push(I)}function U(I){Y(I>>8&255),Y(255&I)}function se(I,z,H,q,F){for(var D,re=F[0],K=F[240],le=function($e,De){var nt,qe,Ue,Qe,Ge,Fe,at,Ze,ft,pt,yt=0;for(ft=0;ft<8;++ft){nt=$e[yt],qe=$e[yt+1],Ue=$e[yt+2],Qe=$e[yt+3],Ge=$e[yt+4],Fe=$e[yt+5],at=$e[yt+6];var Or=nt+(Ze=$e[yt+7]),qt=nt-Ze,Jt=qe+at,cr=qe-at,un=Ue+Fe,Ut=Ue-Fe,Xr=Qe+Ge,Kt=Qe-Ge,ct=Or+Xr,Vt=Or-Xr,st=Jt+un,dt=Jt-un;$e[yt]=ct+st,$e[yt+4]=ct-st;var ir=.707106781*(dt+Vt);$e[yt+2]=Vt+ir,$e[yt+6]=Vt-ir;var ur=.382683433*((ct=Kt+Ut)-(dt=cr+qt)),Si=.5411961*ct+ur,go=1.306562965*dt+ur,Ks=.707106781*(st=Ut+cr),Wt=qt+Ks,vs=qt-Ks;$e[yt+5]=vs+Si,$e[yt+3]=vs-Si,$e[yt+1]=Wt+go,$e[yt+7]=Wt-go,yt+=8}for(yt=0,ft=0;ft<8;++ft){nt=$e[yt],qe=$e[yt+8],Ue=$e[yt+16],Qe=$e[yt+24],Ge=$e[yt+32],Fe=$e[yt+40],at=$e[yt+48];var Wl=nt+(Ze=$e[yt+56]),Ha=nt-Ze,Ys=qe+at,Un=qe-at,Ei=Ue+Fe,te=Ue-Fe,ge=Qe+Ge,ce=Qe-Ge,de=Wl+ge,ye=Wl-ge,we=Ys+Ei,ke=Ys-Ei;$e[yt]=de+we,$e[yt+32]=de-we;var je=.707106781*(ke+ye);$e[yt+16]=ye+je,$e[yt+48]=ye-je;var Ce=.382683433*((de=ce+te)-(ke=Un+Ha)),Oe=.5411961*de+Ce,Le=1.306562965*ke+Ce,Je=.707106781*(we=te+Un),gt=Ha+Je,xt=Ha-Je;$e[yt+40]=xt+Oe,$e[yt+24]=xt-Oe,$e[yt+8]=gt+Le,$e[yt+56]=gt-Le,yt++}for(ft=0;ft<64;++ft)pt=$e[ft]*De[ft],h[ft]=pt>0?pt+.5|0:pt-.5|0;return h}(I,z),xe=0;xe<64;++xe)m[T[xe]]=le[xe];var X=m[0]-H;H=m[0],X==0?J(q[0]):(J(q[d[D=32767+X]]),J(f[D]));for(var Ie=63;Ie>0&&m[Ie]==0;)Ie--;if(Ie==0)return J(re),H;for(var Re,ie=1;ie<=Ie;){for(var Te=ie;m[ie]==0&&ie<=Ie;)++ie;var Me=ie-Te;if(Me>=16){Re=Me>>4;for(var tt=1;tt<=Re;++tt)J(K);Me&=15}D=32767+m[ie],J(F[(Me<<4)+d[D]]),J(f[D]),ie++}return Ie!=63&&J(re),H}function ue(I){I=Math.min(Math.max(I,1),100),a!=I&&(function(z){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],q=0;q<64;q++){var F=s((H[q]*z+50)/100);F=Math.min(Math.max(F,1),255),o[T[q]]=F}for(var D=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var K=s((D[re]*z+50)/100);K=Math.min(Math.max(K,1),255),l[T[re]]=K}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],xe=0,X=0;X<8;X++)for(var Ie=0;Ie<8;Ie++)c[xe]=1/(o[T[xe]]*le[X]*le[Ie]*8),u[xe]=1/(l[T[xe]]*le[X]*le[Ie]*8),xe++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,z){z&&ue(z),p=new Array,y=0,g=7,U(65496),U(65504),U(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),U(1),U(1),Y(0),Y(0),function(){U(65499),U(132),Y(0);for(var qe=0;qe<64;qe++)Y(o[qe]);Y(1);for(var Ue=0;Ue<64;Ue++)Y(l[Ue])}(),function(qe,Ue){U(65472),U(17),Y(8),U(Ue),U(qe),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(I.width,I.height),function(){U(65476),U(418),Y(0);for(var qe=0;qe<16;qe++)Y(A[qe+1]);for(var Ue=0;Ue<=11;Ue++)Y(O[Ue]);Y(16);for(var Qe=0;Qe<16;Qe++)Y(M[Qe+1]);for(var Ge=0;Ge<=161;Ge++)Y(P[Ge]);Y(1);for(var Fe=0;Fe<16;Fe++)Y(N[Fe+1]);for(var at=0;at<=11;at++)Y(V[at]);Y(17);for(var Ze=0;Ze<16;Ze++)Y(B[Ze+1]);for(var ft=0;ft<=161;ft++)Y(G[ft])}(),U(65498),U(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var H=0,q=0,F=0;y=0,g=7,this.encode.displayName="_encode_";for(var D,re,K,le,xe,X,Ie,Re,ie,Te=I.data,Me=I.width,tt=I.height,$e=4*Me,De=0;De<tt;){for(D=0;D<$e;){for(xe=$e*De+D,Ie=-1,Re=0,ie=0;ie<64;ie++)X=xe+(Re=ie>>3)*$e+(Ie=4*(7&ie)),De+Re>=tt&&(X-=$e*(De+1+Re-tt)),D+Ie>=$e&&(X-=D+Ie-$e+4),re=Te[X++],K=Te[X++],le=Te[X++],w[ie]=(S[re]+S[K+256|0]+S[le+512|0]>>16)-128,v[ie]=(S[re+768|0]+S[K+1024|0]+S[le+1280|0]>>16)-128,x[ie]=(S[re+1280|0]+S[K+1536|0]+S[le+1792|0]>>16)-128;H=se(w,c,H,t,n),q=se(v,u,q,r,i),F=se(x,u,F,r,i),D+=32}De+=8}if(g>=0){var nt=[];nt[1]=g+1,nt[0]=(1<<g+1)-1,J(nt)}return U(65497),new Uint8Array(p)},e=e||50,function(){for(var I=String.fromCharCode,z=0;z<256;z++)b[z]=I(z)}(),t=Z(A,O),r=Z(N,V),n=Z(M,P),i=Z(B,G),function(){for(var I=1,z=2,H=1;H<=15;H++){for(var q=I;q<z;q++)d[32767+q]=H,f[32767+q]=[],f[32767+q][1]=H,f[32767+q][0]=q;for(var F=-(z-1);F<=-I;F++)d[32767+F]=H,f[32767+F]=[],f[32767+F][1]=H,f[32767+F][0]=z-1+F;I<<=1,z<<=1}}(),function(){for(var I=0;I<256;I++)S[I]=19595*I,S[I+256|0]=38470*I,S[I+512|0]=7471*I+32768,S[I+768|0]=-11059*I,S[I+1024|0]=-21709*I,S[I+1280|0]=32768*I+8421375,S[I+1536|0]=-27439*I,S[I+1792|0]=-5329*I}(),ue(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function oc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function CJ(e){function t(O){if(!O)throw Error("assert :P")}function r(O,M,P){for(var N=0;4>N;N++)if(O[M+N]!=P.charCodeAt(N))return!0;return!1}function n(O,M,P,N,V){for(var B=0;B<V;B++)O[M+B]=P[N+B]}function i(O,M,P,N){for(var V=0;V<N;V++)O[M+V]=P}function a(O){return new Int32Array(O)}function s(O,M){for(var P=[],N=0;N<O;N++)P.push(new M);return P}function o(O,M){var P=[];return function N(V,B,G){for(var Z=G[B],J=0;J<Z&&(V.push(G.length>B+1?[]:new M),!(G.length<B+1));J++)N(V[J],B+1,G)}(P,0,O),P}var l=function(){var O=this;function M(_,k){for(var j=1<<k-1>>>0;_&j;)j>>>=1;return j?(_&j-1)+j:_}function P(_,k,j,W,ee){t(!(W%j));do _[k+(W-=j)]=ee;while(0<W)}function N(_,k,j,W,ee){if(t(2328>=ee),512>=ee)var ne=a(512);else if((ne=a(ee))==null)return 0;return function(ae,oe,fe,pe,_e,Ne){var me,Se,Ae=oe,Be=1<<fe,Pe=a(16),Ve=a(16);for(t(_e!=0),t(pe!=null),t(ae!=null),t(0<fe),Se=0;Se<_e;++Se){if(15<pe[Se])return 0;++Pe[pe[Se]]}if(Pe[0]==_e)return 0;for(Ve[1]=0,me=1;15>me;++me){if(Pe[me]>1<<me)return 0;Ve[me+1]=Ve[me]+Pe[me]}for(Se=0;Se<_e;++Se)me=pe[Se],0<pe[Se]&&(Ne[Ve[me]++]=Se);if(Ve[15]==1)return(pe=new V).g=0,pe.value=Ne[0],P(ae,Ae,1,Be,pe),Be;var He,et=-1,Ye=Be-1,zt=0,At=1,vr=1,It=1<<fe;for(Se=0,me=1,_e=2;me<=fe;++me,_e<<=1){if(At+=vr<<=1,0>(vr-=Pe[me]))return 0;for(;0<Pe[me];--Pe[me])(pe=new V).g=me,pe.value=Ne[Se++],P(ae,Ae+zt,_e,It,pe),zt=M(zt,me)}for(me=fe+1,_e=2;15>=me;++me,_e<<=1){if(At+=vr<<=1,0>(vr-=Pe[me]))return 0;for(;0<Pe[me];--Pe[me]){if(pe=new V,(zt&Ye)!=et){for(Ae+=It,He=1<<(et=me)-fe;15>et&&!(0>=(He-=Pe[et]));)++et,He<<=1;Be+=It=1<<(He=et-fe),ae[oe+(et=zt&Ye)].g=He+fe,ae[oe+et].value=Ae-oe-et}pe.g=me-fe,pe.value=Ne[Se++],P(ae,Ae+(zt>>fe),_e,It,pe),zt=M(zt,me)}}return At!=2*Ve[15]-1?0:Be}(_,k,j,W,ee,ne)}function V(){this.value=this.g=0}function B(){this.value=this.g=0}function G(){this.G=s(5,V),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s($p,B)}function Z(_,k,j,W){t(_!=null),t(k!=null),t(2147483648>W),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=k,_.pa=j,_.Jd=k,_.Yc=j+W,_.Zc=4<=W?j+W-4+1:j,re(_)}function J(_,k){for(var j=0;0<k--;)j|=le(_,128)<<k;return j}function Y(_,k){var j=J(_,k);return K(_)?-j:j}function U(_,k,j,W){var ee,ne=0;for(t(_!=null),t(k!=null),t(4294967288>W),_.Sb=W,_.Ra=0,_.u=0,_.h=0,4<W&&(W=4),ee=0;ee<W;++ee)ne+=k[j+ee]<<8*ee;_.Ra=ne,_.bb=W,_.oa=k,_.pa=j}function se(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Pd-8>>>0,++_.bb,_.u-=8;q(_)&&(_.h=1,_.u=0)}function ue(_,k){if(t(0<=k),!_.h&&k<=vo){var j=H(_)&yo[k];return _.u+=k,se(_),j}return _.h=1,_.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(_){return _.Ra>>>(_.u&Pd-1)>>>0}function q(_){return t(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Pd}function F(_,k){_.u=k,_.h=q(_)}function D(_){_.u>=uf&&(t(_.u>=uf),se(_))}function re(_){t(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(t(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function K(_){return J(_,1)}function le(_,k){var j=_.Ca;0>_.b&&re(_);var W=_.b,ee=j*k>>>8,ne=(_.I>>>W>ee)+0;for(ne?(j-=ee,_.I-=ee+1<<W>>>0):j=ee+1,W=j,ee=0;256<=W;)ee+=8,W>>=8;return W=7^ee+Nd[W],_.b-=W,_.Ca=(j<<W)-1,ne}function xe(_,k,j){_[k+0]=j>>24&255,_[k+1]=j>>16&255,_[k+2]=j>>8&255,_[k+3]=255&j}function X(_,k){return _[k+0]|_[k+1]<<8}function Ie(_,k){return X(_,k)|_[k+2]<<16}function Re(_,k){return X(_,k)|X(_,k+2)<<16}function ie(_,k){var j=1<<k;return t(_!=null),t(0<k),_.X=a(j),_.X==null?0:(_.Mb=32-k,_.Xa=k,1)}function Te(_,k){t(_!=null),t(k!=null),t(_.Xa==k.Xa),n(k.X,0,_.X,0,1<<k.Xa)}function Me(){this.X=[],this.Xa=this.Mb=0}function tt(_,k,j,W){t(j!=null),t(W!=null);var ee=j[0],ne=W[0];return ee==0&&(ee=(_*ne+k/2)/k),ne==0&&(ne=(k*ee+_/2)/_),0>=ee||0>=ne?0:(j[0]=ee,W[0]=ne,1)}function $e(_,k){return _+(1<<k)-1>>>k}function De(_,k){return((4278255360&_)+(4278255360&k)>>>0&4278255360)+((16711935&_)+(16711935&k)>>>0&16711935)>>>0}function nt(_,k){O[k]=function(j,W,ee,ne,ae,oe,fe){var pe;for(pe=0;pe<ae;++pe){var _e=O[_](oe[fe+pe-1],ee,ne+pe);oe[fe+pe]=De(j[W+pe],_e)}}}function qe(){this.ud=this.hd=this.jd=0}function Ue(_,k){return((4278124286&(_^k))>>>1)+(_&k)>>>0}function Qe(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Ge(_,k){return Qe(_+(_-k+.5>>1))}function Fe(_,k,j){return Math.abs(k-j)-Math.abs(_-j)}function at(_,k,j,W,ee,ne,ae){for(W=ne[ae-1],j=0;j<ee;++j)ne[ae+j]=W=De(_[k+j],W)}function Ze(_,k,j,W,ee){var ne;for(ne=0;ne<j;++ne){var ae=_[k+ne],oe=ae>>8&255,fe=16711935&(fe=(fe=16711935&ae)+((oe<<16)+oe));W[ee+ne]=(4278255360&ae)+fe>>>0}}function ft(_,k){k.jd=255&_,k.hd=_>>8&255,k.ud=_>>16&255}function pt(_,k,j,W,ee,ne){var ae;for(ae=0;ae<W;++ae){var oe=k[j+ae],fe=oe>>>8,pe=oe,_e=255&(_e=(_e=oe>>>16)+((_.jd<<24>>24)*(fe<<24>>24)>>>5));pe=255&(pe=(pe+=(_.hd<<24>>24)*(fe<<24>>24)>>>5)+((_.ud<<24>>24)*(_e<<24>>24)>>>5)),ee[ne+ae]=(4278255360&oe)+(_e<<16)+pe}}function yt(_,k,j,W,ee){O[k]=function(ne,ae,oe,fe,pe,_e,Ne,me,Se){for(fe=Ne;fe<me;++fe)for(Ne=0;Ne<Se;++Ne)pe[_e++]=ee(oe[W(ne[ae++])])},O[_]=function(ne,ae,oe,fe,pe,_e,Ne){var me=8>>ne.b,Se=ne.Ea,Ae=ne.K[0],Be=ne.w;if(8>me)for(ne=(1<<ne.b)-1,Be=(1<<me)-1;ae<oe;++ae){var Pe,Ve=0;for(Pe=0;Pe<Se;++Pe)Pe&ne||(Ve=W(fe[pe++])),_e[Ne++]=ee(Ae[Ve&Be]),Ve>>=me}else O["VP8LMapColor"+j](fe,pe,Ae,Be,_e,Ne,ae,oe,Se)}}function Or(_,k,j,W,ee){for(j=k+j;k<j;){var ne=_[k++];W[ee++]=ne>>16&255,W[ee++]=ne>>8&255,W[ee++]=255&ne}}function qt(_,k,j,W,ee){for(j=k+j;k<j;){var ne=_[k++];W[ee++]=ne>>16&255,W[ee++]=ne>>8&255,W[ee++]=255&ne,W[ee++]=ne>>24&255}}function Jt(_,k,j,W,ee){for(j=k+j;k<j;){var ne=(ae=_[k++])>>16&240|ae>>12&15,ae=240&ae|ae>>28&15;W[ee++]=ne,W[ee++]=ae}}function cr(_,k,j,W,ee){for(j=k+j;k<j;){var ne=(ae=_[k++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;W[ee++]=ne,W[ee++]=ae}}function un(_,k,j,W,ee){for(j=k+j;k<j;){var ne=_[k++];W[ee++]=255&ne,W[ee++]=ne>>8&255,W[ee++]=ne>>16&255}}function Ut(_,k,j,W,ee,ne){if(ne==0)for(j=k+j;k<j;)xe(W,((ne=_[k++])[0]>>24|ne[1]>>8&65280|ne[2]<<8&16711680|ne[3]<<24)>>>0),ee+=32;else n(W,ee,_,k,j)}function Xr(_,k){O[k][0]=O[_+"0"],O[k][1]=O[_+"1"],O[k][2]=O[_+"2"],O[k][3]=O[_+"3"],O[k][4]=O[_+"4"],O[k][5]=O[_+"5"],O[k][6]=O[_+"6"],O[k][7]=O[_+"7"],O[k][8]=O[_+"8"],O[k][9]=O[_+"9"],O[k][10]=O[_+"10"],O[k][11]=O[_+"11"],O[k][12]=O[_+"12"],O[k][13]=O[_+"13"],O[k][14]=O[_+"0"],O[k][15]=O[_+"0"]}function Kt(_){return _==FP||_==BP||_==uS||_==UP}function ct(){this.eb=[],this.size=this.A=this.fb=0}function Vt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function st(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ct,this.f.kb=new Vt,this.sd=null}function dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ir(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ur(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Si(_,k){var j=_.T,W=k.ba.f.RGBA,ee=W.eb,ne=W.fb+_.ka*W.A,ae=ol[k.ba.S],oe=_.y,fe=_.O,pe=_.f,_e=_.N,Ne=_.ea,me=_.W,Se=k.cc,Ae=k.dc,Be=k.Mc,Pe=k.Nc,Ve=_.ka,He=_.ka+_.T,et=_.U,Ye=et+1>>1;for(Ve==0?ae(oe,fe,null,null,pe,_e,Ne,me,pe,_e,Ne,me,ee,ne,null,null,et):(ae(k.ec,k.fc,oe,fe,Se,Ae,Be,Pe,pe,_e,Ne,me,ee,ne-W.A,ee,ne,et),++j);Ve+2<He;Ve+=2)Se=pe,Ae=_e,Be=Ne,Pe=me,_e+=_.Rc,me+=_.Rc,ne+=2*W.A,ae(oe,(fe+=2*_.fa)-_.fa,oe,fe,Se,Ae,Be,Pe,pe,_e,Ne,me,ee,ne-W.A,ee,ne,et);return fe+=_.fa,_.j+He<_.o?(n(k.ec,k.fc,oe,fe,et),n(k.cc,k.dc,pe,_e,Ye),n(k.Mc,k.Nc,Ne,me,Ye),j--):1&He||ae(oe,fe,null,null,pe,_e,Ne,me,pe,_e,Ne,me,ee,ne+W.A,null,null,et),j}function go(_,k,j){var W=_.F,ee=[_.J];if(W!=null){var ne=_.U,ae=k.ba.S,oe=ae==cS||ae==uS;k=k.ba.f.RGBA;var fe=[0],pe=_.ka;fe[0]=_.T,_.Kb&&(pe==0?--fe[0]:(--pe,ee[0]-=_.width),_.j+_.ka+_.T==_.o&&(fe[0]=_.o-_.j-pe));var _e=k.eb;pe=k.fb+pe*k.A,_=d7(W,ee[0],_.width,ne,fe,_e,pe+(oe?0:3),k.A),t(j==fe),_&&Kt(ae)&&Z1(_e,pe,oe,ne,fe,k.A)}return 0}function Ks(_){var k=_.ma,j=k.ba.S,W=11>j,ee=j==oS||j==lS||j==cS||j==$P||j==12||Kt(j);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!V1(k.Oa,_,ee?11:12))return 0;if(ee&&Kt(j)&&B1(),_.da)alert("todo:use_scaling");else{if(W){if(k.Ib=ur,_.Kb){if(j=_.U+1>>1,k.memory=a(_.U+2*j),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+_.U,k.Mc=k.cc,k.Nc=k.dc+j,k.Ib=Si,B1()}}else alert("todo:EmitYUV");ee&&(k.Jb=go,W&&ql())}if(W&&!C7){for(_=0;256>_;++_)C1e[_]=89858*(_-128)+dS>>fS,N1e[_]=-22014*(_-128)+dS,P1e[_]=-45773*(_-128),O1e[_]=113618*(_-128)+dS>>fS;for(_=Q1;_<WP;++_)k=76283*(_-16)+dS>>fS,I1e[_-Q1]=Ai(k,255),R1e[_-Q1]=Ai(k+8>>4,15);C7=1}return 1}function Wt(_){var k=_.ma,j=_.U,W=_.T;return t(!(1&_.ka)),0>=j||0>=W?0:(j=k.Ib(_,k),k.Jb!=null&&k.Jb(_,k,j),k.Dc+=j,1)}function vs(_){_.ma.memory=null}function Wl(_,k,j,W){return ue(_,8)!=47?0:(k[0]=ue(_,14)+1,j[0]=ue(_,14)+1,W[0]=ue(_,1),ue(_,3)!=0?0:!_.h)}function Ha(_,k){if(4>_)return _+1;var j=_-2>>1;return(2+(1&_)<<j)+ue(k,j)+1}function Ys(_,k){return 120<k?k-120:1<=(j=((j=p1e[k-1])>>4)*_+(8-(15&j)))?j:1;var j}function Un(_,k,j){var W=H(j),ee=_[k+=255&W].g-8;return 0<ee&&(F(j,j.u+8),W=H(j),k+=_[k].value,k+=W&(1<<ee)-1),F(j,j.u+_[k].g),_[k].value}function Ei(_,k,j){return j.g+=_.g,j.value+=_.value<<k>>>0,t(8>=j.g),_.g}function te(_,k,j){var W=_.xc;return t((k=W==0?0:_.vc[_.md*(j>>W)+(k>>W)])<_.Wb),_.Ya[k]}function ge(_,k,j,W){var ee=_.ab,ne=_.c*k,ae=_.C;k=ae+k;var oe=j,fe=W;for(W=_.Ta,j=_.Ua;0<ee--;){var pe=_.gc[ee],_e=ae,Ne=k,me=oe,Se=fe,Ae=(fe=W,oe=j,pe.Ea);switch(t(_e<Ne),t(Ne<=pe.nc),pe.hc){case 2:pi(me,Se,(Ne-_e)*Ae,fe,oe);break;case 0:var Be=_e,Pe=Ne,Ve=fe,He=oe,et=(It=pe).Ea;Be==0&&(H1(me,Se,null,null,1,Ve,He),at(me,Se+1,0,0,et-1,Ve,He+1),Se+=et,He+=et,++Be);for(var Ye=1<<It.b,zt=Ye-1,At=$e(et,It.b),vr=It.K,It=It.w+(Be>>It.b)*At;Be<Pe;){var Nr=vr,Ki=It,wr=1;for(Km(me,Se,Ve,He-et,1,Ve,He);wr<et;){var Rt=(wr&~zt)+Ye;Rt>et&&(Rt=et),(0,q1[Nr[Ki++]>>8&15])(me,Se+ +wr,Ve,He+wr-et,Rt-wr,Ve,He+wr),wr=Rt}Se+=et,He+=et,++Be&zt||(It+=At)}Ne!=pe.nc&&n(fe,oe-Ae,fe,oe+(Ne-_e-1)*Ae,Ae);break;case 1:for(Ae=me,Pe=Se,et=(me=pe.Ea)-(He=me&~(Ve=(Se=1<<pe.b)-1)),Be=$e(me,pe.b),Ye=pe.K,pe=pe.w+(_e>>pe.b)*Be;_e<Ne;){for(zt=Ye,At=pe,vr=new qe,It=Pe+He,Nr=Pe+me;Pe<It;)ft(zt[At++],vr),K1(vr,Ae,Pe,Se,fe,oe),Pe+=Se,oe+=Se;Pe<Nr&&(ft(zt[At++],vr),K1(vr,Ae,Pe,et,fe,oe),Pe+=et,oe+=et),++_e&Ve||(pe+=Be)}break;case 3:if(me==fe&&Se==oe&&0<pe.b){for(Pe=fe,me=Ae=oe+(Ne-_e)*Ae-(He=(Ne-_e)*$e(pe.Ea,pe.b)),Se=fe,Ve=oe,Be=[],He=(et=He)-1;0<=He;--He)Be[He]=Se[Ve+He];for(He=et-1;0<=He;--He)Pe[me+He]=Be[He];nS(pe,_e,Ne,fe,Ae,fe,oe)}else nS(pe,_e,Ne,me,Se,fe,oe)}oe=W,fe=j}fe!=j&&n(W,j,oe,fe,ne)}function ce(_,k){var j=_.V,W=_.Ba+_.c*_.C,ee=k-_.C;if(t(k<=_.l.o),t(16>=ee),0<ee){var ne=_.l,ae=_.Ta,oe=_.Ua,fe=ne.width;if(ge(_,ee,j,W),ee=oe=[oe],t((j=_.C)<(W=k)),t(ne.v<ne.va),W>ne.o&&(W=ne.o),j<ne.j){var pe=ne.j-j;j=ne.j,ee[0]+=pe*fe}if(j>=W?j=0:(ee[0]+=4*ne.v,ne.ka=j-ne.j,ne.U=ne.va-ne.v,ne.T=W-j,j=1),j){if(oe=oe[0],11>(j=_.ca).S){var _e=j.f.RGBA,Ne=(W=j.S,ee=ne.U,ne=ne.T,pe=_e.eb,_e.A),me=ne;for(_e=_e.fb+_.Ma*_e.A;0<me--;){var Se=ae,Ae=oe,Be=ee,Pe=pe,Ve=_e;switch(W){case sS:Y1(Se,Ae,Be,Pe,Ve);break;case oS:Id(Se,Ae,Be,Pe,Ve);break;case FP:Id(Se,Ae,Be,Pe,Ve),Z1(Pe,Ve,0,Be,1,0);break;case w7:Fp(Se,Ae,Be,Pe,Ve);break;case lS:Ut(Se,Ae,Be,Pe,Ve,1);break;case BP:Ut(Se,Ae,Be,Pe,Ve,1),Z1(Pe,Ve,0,Be,1,0);break;case cS:Ut(Se,Ae,Be,Pe,Ve,0);break;case uS:Ut(Se,Ae,Be,Pe,Ve,0),Z1(Pe,Ve,1,Be,1,0);break;case $P:Rd(Se,Ae,Be,Pe,Ve);break;case UP:Rd(Se,Ae,Be,Pe,Ve),f7(Pe,Ve,Be,1,0);break;case x7:Ld(Se,Ae,Be,Pe,Ve);break;default:t(0)}oe+=fe,_e+=Ne}_.Ma+=ne}else alert("todo:EmitRescaledRowsYUVA");t(_.Ma<=j.height)}}_.C=k,t(_.C<=_.i)}function de(_){var k;if(0<_.ua)return 0;for(k=0;k<_.Wb;++k){var j=_.Ya[k].G,W=_.Ya[k].H;if(0<j[1][W[1]+0].g||0<j[2][W[2]+0].g||0<j[3][W[3]+0].g)return 0}return 1}function ye(_,k,j,W,ee,ne){if(_.Z!=0){var ae=_.qd,oe=_.rd;for(t(jd[_.Z]!=null);k<j;++k)jd[_.Z](ae,oe,W,ee,W,ee,ne),ae=W,oe=ee,ee+=ne;_.qd=ae,_.rd=oe}}function we(_,k){var j=_.l.ma,W=j.Z==0||j.Z==1?_.l.j:_.C;if(W=_.C<W?W:_.C,t(k<=_.l.o),k>W){var ee=_.l.width,ne=j.ca,ae=j.tb+ee*W,oe=_.V,fe=_.Ba+_.c*W,pe=_.gc;t(_.ab==1),t(pe[0].hc==3),ru(pe[0],W,k,oe,fe,ne,ae),ye(j,W,k,ne,ae,ee)}_.C=_.Ma=k}function ke(_,k,j,W,ee,ne,ae){var oe=_.$/W,fe=_.$%W,pe=_.m,_e=_.s,Ne=j+_.$,me=Ne;ee=j+W*ee;var Se=j+W*ne,Ae=280+_e.ua,Be=_.Pb?oe:16777216,Pe=0<_e.ua?_e.Wa:null,Ve=_e.wc,He=Ne<Se?te(_e,fe,oe):null;t(_.C<ne),t(Se<=ee);var et=!1;e:for(;;){for(;et||Ne<Se;){var Ye=0;if(oe>=Be){var zt=Ne-j;t((Be=_).Pb),Be.wd=Be.m,Be.xd=zt,0<Be.s.ua&&Te(Be.s.Wa,Be.s.vb),Be=oe+g1e}if(fe&Ve||(He=te(_e,fe,oe)),t(He!=null),He.Qb&&(k[Ne]=He.qb,et=!0),!et)if(D(pe),He.jc){Ye=pe,zt=k;var At=Ne,vr=He.pd[H(Ye)&$p-1];t(He.jc),256>vr.g?(F(Ye,Ye.u+vr.g),zt[At]=vr.value,Ye=0):(F(Ye,Ye.u+vr.g-256),t(256<=vr.value),Ye=vr.value),Ye==0&&(et=!0)}else Ye=Un(He.G[0],He.H[0],pe);if(pe.h)break;if(et||256>Ye){if(!et)if(He.nd)k[Ne]=(He.qb|Ye<<8)>>>0;else{if(D(pe),et=Un(He.G[1],He.H[1],pe),D(pe),zt=Un(He.G[2],He.H[2],pe),At=Un(He.G[3],He.H[3],pe),pe.h)break;k[Ne]=(At<<24|et<<16|Ye<<8|zt)>>>0}if(et=!1,++Ne,++fe>=W&&(fe=0,++oe,ae!=null&&oe<=ne&&!(oe%16)&&ae(_,oe),Pe!=null))for(;me<Ne;)Ye=k[me++],Pe.X[(506832829*Ye&4294967295)>>>Pe.Mb]=Ye}else if(280>Ye){if(Ye=Ha(Ye-256,pe),zt=Un(He.G[4],He.H[4],pe),D(pe),zt=Ys(W,zt=Ha(zt,pe)),pe.h)break;if(Ne-j<zt||ee-Ne<Ye)break e;for(At=0;At<Ye;++At)k[Ne+At]=k[Ne+At-zt];for(Ne+=Ye,fe+=Ye;fe>=W;)fe-=W,++oe,ae!=null&&oe<=ne&&!(oe%16)&&ae(_,oe);if(t(Ne<=ee),fe&Ve&&(He=te(_e,fe,oe)),Pe!=null)for(;me<Ne;)Ye=k[me++],Pe.X[(506832829*Ye&4294967295)>>>Pe.Mb]=Ye}else{if(!(Ye<Ae))break e;for(et=Ye-280,t(Pe!=null);me<Ne;)Ye=k[me++],Pe.X[(506832829*Ye&4294967295)>>>Pe.Mb]=Ye;Ye=Ne,t(!(et>>>(zt=Pe).Xa)),k[Ye]=zt.X[et],et=!0}et||t(pe.h==q(pe))}if(_.Pb&&pe.h&&Ne<ee)t(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Te(_.s.vb,_.s.Wa);else{if(pe.h)break e;ae!=null&&ae(_,oe>ne?ne:oe),_.a=0,_.$=Ne-j}return 1}return _.a=3,0}function je(_){t(_!=null),_.vc=null,_.yc=null,_.Ya=null;var k=_.Wa;k!=null&&(k.X=null),_.vb=null,t(_!=null)}function Ce(){var _=new ar;return _==null?null:(_.a=0,_.xb=S7,Xr("Predictor","VP8LPredictors"),Xr("Predictor","VP8LPredictors_C"),Xr("PredictorAdd","VP8LPredictorsAdd"),Xr("PredictorAdd","VP8LPredictorsAdd_C"),pi=Ze,K1=pt,Y1=Or,Id=qt,Rd=Jt,Ld=cr,Fp=un,O.VP8LMapColor32b=tu,O.VP8LMapColor8b=G1,_)}function Oe(_,k,j,W,ee){var ne=1,ae=[_],oe=[k],fe=W.m,pe=W.s,_e=null,Ne=0;e:for(;;){if(j)for(;ne&&ue(fe,1);){var me=ae,Se=oe,Ae=W,Be=1,Pe=Ae.m,Ve=Ae.gc[Ae.ab],He=ue(Pe,2);if(Ae.Oc&1<<He)ne=0;else{switch(Ae.Oc|=1<<He,Ve.hc=He,Ve.Ea=me[0],Ve.nc=Se[0],Ve.K=[null],++Ae.ab,t(4>=Ae.ab),He){case 0:case 1:Ve.b=ue(Pe,3)+2,Be=Oe($e(Ve.Ea,Ve.b),$e(Ve.nc,Ve.b),0,Ae,Ve.K),Ve.K=Ve.K[0];break;case 3:var et,Ye=ue(Pe,8)+1,zt=16<Ye?0:4<Ye?1:2<Ye?2:3;if(me[0]=$e(Ve.Ea,zt),Ve.b=zt,et=Be=Oe(Ye,1,0,Ae,Ve.K)){var At,vr=Ye,It=Ve,Nr=1<<(8>>It.b),Ki=a(Nr);if(Ki==null)et=0;else{var wr=It.K[0],Rt=It.w;for(Ki[0]=It.K[0][0],At=1;At<1*vr;++At)Ki[At]=De(wr[Rt+At],Ki[At-1]);for(;At<4*Nr;++At)Ki[At]=0;It.K[0]=null,It.K[0]=Ki,et=1}}Be=et;break;case 2:break;default:t(0)}ne=Be}}if(ae=ae[0],oe=oe[0],ne&&ue(fe,1)&&!(ne=1<=(Ne=ue(fe,4))&&11>=Ne)){W.a=3;break e}var vt;if(vt=ne)t:{var gi,mr,Dr,Nn=W,ka=ae,xs=oe,ni=Ne,Ga=j,bs=Nn.m,Yi=Nn.s,Br=[null],tn=1,ii=0,rn=m1e[ni];r:for(;;){if(Ga&&ue(bs,1)){var Ca=ue(bs,3)+2,Yl=$e(ka,Ca),yi=$e(xs,Ca),Xs=Yl*yi;if(!Oe(Yl,yi,0,Nn,Br))break r;for(Br=Br[0],Yi.xc=Ca,gi=0;gi<Xs;++gi){var yn=Br[gi]>>8&65535;Br[gi]=yn,yn>=tn&&(tn=yn+1)}}if(bs.h)break r;for(mr=0;5>mr;++mr){var Xi=b7[mr];!mr&&0<ni&&(Xi+=1<<ni),ii<Xi&&(ii=Xi)}var xo=s(tn*rn,V),_s=tn,bo=s(_s,G);if(bo==null)var _o=null;else t(65536>=_s),_o=bo;var Zs=a(ii);if(_o==null||Zs==null||xo==null){Nn.a=1;break r}var So=xo;for(gi=Dr=0;gi<tn;++gi){var _n=_o[gi],Eo=_n.G,Xl=_n.H,Up=0,hf=1,Oa=0;for(mr=0;5>mr;++mr){Xi=b7[mr],Eo[mr]=So,Xl[mr]=Dr,!mr&&0<ni&&(Xi+=1<<ni);i:{var pS,HP=Xi,mS=Nn,ew=Zs,D1e=So,j1e=Dr,GP=0,$d=mS.m,$1e=ue($d,1);if(i(ew,0,0,HP),$1e){var F1e=ue($d,1)+1,B1e=ue($d,1),N7=ue($d,B1e==0?1:8);ew[N7]=1,F1e==2&&(ew[N7=ue($d,8)]=1);var gS=1}else{var I7=a(19),R7=ue($d,4)+4;if(19<R7){mS.a=3;var yS=0;break i}for(pS=0;pS<R7;++pS)I7[h1e[pS]]=ue($d,3);var qP=void 0,tw=void 0,L7=mS,U1e=I7,vS=HP,M7=ew,KP=0,Fd=L7.m,D7=8,j7=s(128,V);n:for(;N(j7,0,7,U1e,19);){if(ue(Fd,1)){var z1e=2+2*ue(Fd,3);if((qP=2+ue(Fd,z1e))>vS)break n}else qP=vS;for(tw=0;tw<vS&&qP--;){D(Fd);var $7=j7[0+(127&H(Fd))];F(Fd,Fd.u+$7.g);var Xm=$7.value;if(16>Xm)M7[tw++]=Xm,Xm!=0&&(D7=Xm);else{var V1e=Xm==16,F7=Xm-16,W1e=f1e[F7],B7=ue(Fd,u1e[F7])+W1e;if(tw+B7>vS)break n;for(var H1e=V1e?D7:0;0<B7--;)M7[tw++]=H1e}}KP=1;break n}KP||(L7.a=3),gS=KP}(gS=gS&&!$d.h)&&(GP=N(D1e,j1e,8,ew,HP)),gS&&GP!=0?yS=GP:(mS.a=3,yS=0)}if(yS==0)break r;if(hf&&d1e[mr]==1&&(hf=So[Dr].g==0),Up+=So[Dr].g,Dr+=yS,3>=mr){var rw,YP=Zs[0];for(rw=1;rw<Xi;++rw)Zs[rw]>YP&&(YP=Zs[rw]);Oa+=YP}}if(_n.nd=hf,_n.Qb=0,hf&&(_n.qb=(Eo[3][Xl[3]+0].value<<24|Eo[1][Xl[1]+0].value<<16|Eo[2][Xl[2]+0].value)>>>0,Up==0&&256>Eo[0][Xl[0]+0].value&&(_n.Qb=1,_n.qb+=Eo[0][Xl[0]+0].value<<8)),_n.jc=!_n.Qb&&6>Oa,_n.jc){var wS,pf=_n;for(wS=0;wS<$p;++wS){var Bd=wS,Ud=pf.pd[Bd],xS=pf.G[0][pf.H[0]+Bd];256<=xS.value?(Ud.g=xS.g+256,Ud.value=xS.value):(Ud.g=0,Ud.value=0,Bd>>=Ei(xS,8,Ud),Bd>>=Ei(pf.G[1][pf.H[1]+Bd],16,Ud),Bd>>=Ei(pf.G[2][pf.H[2]+Bd],0,Ud),Ei(pf.G[3][pf.H[3]+Bd],24,Ud))}}}Yi.vc=Br,Yi.Wb=tn,Yi.Ya=_o,Yi.yc=xo,vt=1;break t}vt=0}if(!(ne=vt)){W.a=3;break e}if(0<Ne){if(pe.ua=1<<Ne,!ie(pe.Wa,Ne)){W.a=1,ne=0;break e}}else pe.ua=0;var XP=W,U7=ae,G1e=oe,ZP=XP.s,JP=ZP.xc;if(XP.c=U7,XP.i=G1e,ZP.md=$e(U7,JP),ZP.wc=JP==0?-1:(1<<JP)-1,j){W.xb=S1e;break e}if((_e=a(ae*oe))==null){W.a=1,ne=0;break e}ne=(ne=ke(W,_e,0,ae,oe,oe,null))&&!fe.h;break e}return ne?(ee!=null?ee[0]=_e:(t(_e==null),t(j)),W.$=0,j||je(pe)):je(pe),ne}function Le(_,k){var j=_.c*_.i,W=j+k+16*k;return t(_.c<=k),_.V=a(W),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+j+k,1)}function Je(_,k){var j=_.C,W=k-j,ee=_.V,ne=_.Ba+_.c*j;for(t(k<=_.l.o);0<W;){var ae=16<W?16:W,oe=_.l.ma,fe=_.l.width,pe=fe*ae,_e=oe.ca,Ne=oe.tb+fe*j,me=_.Ta,Se=_.Ua;ge(_,ae,ee,ne),h7(me,Se,_e,Ne,pe),ye(oe,j,j+ae,_e,Ne,fe),W-=ae,ee+=ae*_.c,j+=ae}t(j==k),_.C=_.Ma=k}function gt(){this.ub=this.yd=this.td=this.Rb=0}function xt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function it(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function wt(){this.Yb=function(){var _=[];return function k(j,W,ee){for(var ne=ee[W],ae=0;ae<ne&&(j.push(ee.length>W+1?[]:0),!(ee.length<W+1));ae++)k(j[ae],W+1,ee)}(_,0,[3,11]),_}()}function er(){this.jb=a(3),this.Wc=o([4,8],wt),this.Xc=o([4,17],wt)}function fn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Pr(){this.ld=this.La=this.dd=this.tc=0}function ri(){this.Na=this.la=0}function Zc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hl(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Jc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pr),this.Y=0,this.ya=Array(new Hl),this.aa=0,this.l=new Um}function rl(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Td(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new gt,this.Kc=new xt,this.ed=new fn,this.Qa=new it,this.Ic=this.$c=this.Aa=0,this.D=new Jc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,I),this.ia=0,this.pb=s(4,Zc),this.Pa=new er,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new rl),this.Hd=0,this.rb=Array(new ri),this.sb=0,this.wa=Array(new Pr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hl),this.L=this.aa=0,this.gd=o([4,2],Pr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ai(_,k){return 0>_?0:_>k?k:_}function Um(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _P(){var _=new Td;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,J1||(J1=zm)),_}function Ti(_,k,j){return _.a==0&&(_.a=k,_.sc=j,_.cb=0),0}function H2(_,k,j){return 3<=j&&_[k+0]==157&&_[k+1]==1&&_[k+2]==42}function Qc(_,k){if(_==null)return 0;if(_.a=0,_.sc="OK",k==null)return Ti(_,2,"null VP8Io passed to VP8GetHeaders()");var j=k.data,W=k.w,ee=k.ha;if(4>ee)return Ti(_,7,"Truncated header.");var ne=j[W+0]|j[W+1]<<8|j[W+2]<<16,ae=_.Od;if(ae.Rb=!(1&ne),ae.td=ne>>1&7,ae.yd=ne>>4&1,ae.ub=ne>>5,3<ae.td)return Ti(_,3,"Incorrect keyframe parameters.");if(!ae.yd)return Ti(_,4,"Frame not displayable.");W+=3,ee-=3;var oe=_.Kc;if(ae.Rb){if(7>ee)return Ti(_,7,"cannot parse picture header");if(!H2(j,W,ee))return Ti(_,3,"Bad code word");oe.c=16383&(j[W+4]<<8|j[W+3]),oe.Td=j[W+4]>>6,oe.i=16383&(j[W+6]<<8|j[W+5]),oe.Ud=j[W+6]>>6,W+=7,ee-=7,_.za=oe.c+15>>4,_.Ub=oe.i+15>>4,k.width=oe.c,k.height=oe.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,i((ne=_.Pa).jb,0,255,ne.jb.length),t((ne=_.Qa)!=null),ne.Cb=0,ne.Bb=0,ne.Fb=1,i(ne.Zb,0,0,ne.Zb.length),i(ne.Lb,0,0,ne.Lb)}if(ae.ub>ee)return Ti(_,7,"bad partition length");Z(ne=_.m,j,W,ae.ub),W+=ae.ub,ee-=ae.ub,ae.Rb&&(oe.Ld=K(ne),oe.Kd=K(ne)),oe=_.Qa;var fe,pe=_.Pa;if(t(ne!=null),t(oe!=null),oe.Cb=K(ne),oe.Cb){if(oe.Bb=K(ne),K(ne)){for(oe.Fb=K(ne),fe=0;4>fe;++fe)oe.Zb[fe]=K(ne)?Y(ne,7):0;for(fe=0;4>fe;++fe)oe.Lb[fe]=K(ne)?Y(ne,6):0}if(oe.Bb)for(fe=0;3>fe;++fe)pe.jb[fe]=K(ne)?J(ne,8):255}else oe.Bb=0;if(ne.Ka)return Ti(_,3,"cannot parse segment header");if((oe=_.ed).zd=K(ne),oe.Tb=J(ne,6),oe.wb=J(ne,3),oe.Pc=K(ne),oe.Pc&&K(ne)){for(pe=0;4>pe;++pe)K(ne)&&(oe.vd[pe]=Y(ne,6));for(pe=0;4>pe;++pe)K(ne)&&(oe.od[pe]=Y(ne,6))}if(_.L=oe.Tb==0?0:oe.zd?1:2,ne.Ka)return Ti(_,3,"cannot parse filter header");var _e=ee;if(ee=fe=W,W=fe+_e,oe=_e,_.Xb=(1<<J(_.m,2))-1,_e<3*(pe=_.Xb))j=7;else{for(fe+=3*pe,oe-=3*pe,_e=0;_e<pe;++_e){var Ne=j[ee+0]|j[ee+1]<<8|j[ee+2]<<16;Ne>oe&&(Ne=oe),Z(_.Jc[+_e],j,fe,Ne),fe+=Ne,oe-=Ne,ee+=3}Z(_.Jc[+pe],j,fe,oe),j=fe<W?0:5}if(j!=0)return Ti(_,j,"cannot parse partitions");for(j=J(fe=_.m,7),ee=K(fe)?Y(fe,4):0,W=K(fe)?Y(fe,4):0,oe=K(fe)?Y(fe,4):0,pe=K(fe)?Y(fe,4):0,fe=K(fe)?Y(fe,4):0,_e=_.Qa,Ne=0;4>Ne;++Ne){if(_e.Cb){var me=_e.Zb[Ne];_e.Fb||(me+=j)}else{if(0<Ne){_.pb[Ne]=_.pb[0];continue}me=j}var Se=_.pb[Ne];Se.Sc[0]=zP[Ai(me+ee,127)],Se.Sc[1]=VP[Ai(me+0,127)],Se.Eb[0]=2*zP[Ai(me+W,127)],Se.Eb[1]=101581*VP[Ai(me+oe,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=zP[Ai(me+pe,117)],Se.Qc[1]=VP[Ai(me+fe,127)],Se.lc=me+fe}if(!ae.Rb)return Ti(_,4,"Not a key frame.");for(K(ne),ae=_.Pa,j=0;4>j;++j){for(ee=0;8>ee;++ee)for(W=0;3>W;++W)for(oe=0;11>oe;++oe)pe=le(ne,b1e[j][ee][W][oe])?J(ne,8):w1e[j][ee][W][oe],ae.Wc[j][ee].Yb[W][oe]=pe;for(ee=0;17>ee;++ee)ae.Xc[j][ee]=ae.Wc[j][_1e[ee]]}return _.kc=K(ne),_.kc&&(_.Bd=J(ne,8)),_.cb=1}function zm(_,k,j,W,ee,ne,ae){var oe=k[ee].Yb[j];for(j=0;16>ee;++ee){if(!le(_,oe[j+0]))return ee;for(;!le(_,oe[j+1]);)if(oe=k[++ee].Yb[0],j=0,ee==16)return 16;var fe=k[ee+1].Yb;if(le(_,oe[j+2])){var pe=_,_e=0;if(le(pe,(me=oe)[(Ne=j)+3]))if(le(pe,me[Ne+6])){for(oe=0,Ne=2*(_e=le(pe,me[Ne+8]))+(me=le(pe,me[Ne+9+_e])),_e=0,me=y1e[Ne];me[oe];++oe)_e+=_e+le(pe,me[oe]);_e+=3+(8<<Ne)}else le(pe,me[Ne+7])?(_e=7+2*le(pe,165),_e+=le(pe,145)):_e=5+le(pe,159);else _e=le(pe,me[Ne+4])?3+le(pe,me[Ne+5]):2;oe=fe[2]}else _e=1,oe=fe[1];fe=ae+v1e[ee],0>(pe=_).b&&re(pe);var Ne,me=pe.b,Se=(Ne=pe.Ca>>1)-(pe.I>>me)>>31;--pe.b,pe.Ca+=Se,pe.Ca|=1,pe.I-=(Ne+1&Se)<<me,ne[fe]=((_e^Se)-Se)*W[(0<ee)+0]}return 16}function G2(_){var k=_.rb[_.sb-1];k.la=0,k.Na=0,i(_.zc,0,0,_.zc.length),_.ja=0}function nl(_,k,j,W,ee){ee=_[k+j+32*W]+(ee>>3),_[k+j+32*W]=-256&ee?0>ee?0:255:ee}function Hi(_,k,j,W,ee,ne){nl(_,k,0,j,W+ee),nl(_,k,1,j,W+ne),nl(_,k,2,j,W-ne),nl(_,k,3,j,W-ee)}function Qu(_){return(20091*_>>16)+_}function q2(_,k,j,W){var ee,ne=0,ae=a(16);for(ee=0;4>ee;++ee){var oe=_[k+0]+_[k+8],fe=_[k+0]-_[k+8],pe=(35468*_[k+4]>>16)-Qu(_[k+12]),_e=Qu(_[k+4])+(35468*_[k+12]>>16);ae[ne+0]=oe+_e,ae[ne+1]=fe+pe,ae[ne+2]=fe-pe,ae[ne+3]=oe-_e,ne+=4,k++}for(ee=ne=0;4>ee;++ee)oe=(_=ae[ne+0]+4)+ae[ne+8],fe=_-ae[ne+8],pe=(35468*ae[ne+4]>>16)-Qu(ae[ne+12]),nl(j,W,0,0,oe+(_e=Qu(ae[ne+4])+(35468*ae[ne+12]>>16))),nl(j,W,1,0,fe+pe),nl(j,W,2,0,fe-pe),nl(j,W,3,0,oe-_e),ne++,W+=32}function SP(_,k,j,W){var ee=_[k+0]+4,ne=35468*_[k+4]>>16,ae=Qu(_[k+4]),oe=35468*_[k+1]>>16;Hi(j,W,0,ee+ae,_=Qu(_[k+1]),oe),Hi(j,W,1,ee+ne,_,oe),Hi(j,W,2,ee-ne,_,oe),Hi(j,W,3,ee-ae,_,oe)}function EP(_,k,j,W,ee){q2(_,k,j,W),ee&&q2(_,k+16,j,W+4)}function eu(_,k,j,W){Bp(_,k+0,j,W,1),Bp(_,k+32,j,W+128,1)}function K2(_,k,j,W){var ee;for(_=_[k+0]+4,ee=0;4>ee;++ee)for(k=0;4>k;++k)nl(j,W,k,ee,_)}function Y2(_,k,j,W){_[k+0]&&Zr(_,k+0,j,W),_[k+16]&&Zr(_,k+16,j,W+4),_[k+32]&&Zr(_,k+32,j,W+128),_[k+48]&&Zr(_,k+48,j,W+128+4)}function Vm(_,k,j,W){var ee,ne=a(16);for(ee=0;4>ee;++ee){var ae=_[k+0+ee]+_[k+12+ee],oe=_[k+4+ee]+_[k+8+ee],fe=_[k+4+ee]-_[k+8+ee],pe=_[k+0+ee]-_[k+12+ee];ne[0+ee]=ae+oe,ne[8+ee]=ae-oe,ne[4+ee]=pe+fe,ne[12+ee]=pe-fe}for(ee=0;4>ee;++ee)ae=(_=ne[0+4*ee]+3)+ne[3+4*ee],oe=ne[1+4*ee]+ne[2+4*ee],fe=ne[1+4*ee]-ne[2+4*ee],pe=_-ne[3+4*ee],j[W+0]=ae+oe>>3,j[W+16]=pe+fe>>3,j[W+32]=ae-oe>>3,j[W+48]=pe-fe>>3,W+=64}function Cp(_,k,j){var W,ee=k-32,ne=wo,ae=255-_[ee-1];for(W=0;W<j;++W){var oe,fe=ne,pe=ae+_[k-1];for(oe=0;oe<j;++oe)_[k+oe]=fe[pe+_[ee+oe]];k+=32}}function AP(_,k){Cp(_,k,4)}function TP(_,k){Cp(_,k,8)}function kP(_,k){Cp(_,k,16)}function I1(_,k){var j;for(j=0;16>j;++j)n(_,k+32*j,_,k-32,16)}function X2(_,k){var j;for(j=16;0<j;--j)i(_,k,_[k-1],16),k+=32}function Gl(_,k,j){var W;for(W=0;16>W;++W)i(k,j+32*W,_,16)}function CP(_,k){var j,W=16;for(j=0;16>j;++j)W+=_[k-1+32*j]+_[k+j-32];Gl(W>>5,_,k)}function Op(_,k){var j,W=8;for(j=0;16>j;++j)W+=_[k-1+32*j];Gl(W>>4,_,k)}function R1(_,k){var j,W=8;for(j=0;16>j;++j)W+=_[k+j-32];Gl(W>>4,_,k)}function OP(_,k){Gl(128,_,k)}function or(_,k,j){return _+2*k+j+2>>2}function PP(_,k){var j,W=k-32;for(W=new Uint8Array([or(_[W-1],_[W+0],_[W+1]),or(_[W+0],_[W+1],_[W+2]),or(_[W+1],_[W+2],_[W+3]),or(_[W+2],_[W+3],_[W+4])]),j=0;4>j;++j)n(_,k+32*j,W,0,W.length)}function NP(_,k){var j=_[k-1],W=_[k-1+32],ee=_[k-1+64],ne=_[k-1+96];xe(_,k+0,16843009*or(_[k-1-32],j,W)),xe(_,k+32,16843009*or(j,W,ee)),xe(_,k+64,16843009*or(W,ee,ne)),xe(_,k+96,16843009*or(ee,ne,ne))}function IP(_,k){var j,W=4;for(j=0;4>j;++j)W+=_[k+j-32]+_[k-1+32*j];for(W>>=3,j=0;4>j;++j)i(_,k+32*j,W,4)}function ef(_,k){var j=_[k-1+0],W=_[k-1+32],ee=_[k-1+64],ne=_[k-1-32],ae=_[k+0-32],oe=_[k+1-32],fe=_[k+2-32],pe=_[k+3-32];_[k+0+96]=or(W,ee,_[k-1+96]),_[k+1+96]=_[k+0+64]=or(j,W,ee),_[k+2+96]=_[k+1+64]=_[k+0+32]=or(ne,j,W),_[k+3+96]=_[k+2+64]=_[k+1+32]=_[k+0+0]=or(ae,ne,j),_[k+3+64]=_[k+2+32]=_[k+1+0]=or(oe,ae,ne),_[k+3+32]=_[k+2+0]=or(fe,oe,ae),_[k+3+0]=or(pe,fe,oe)}function tf(_,k){var j=_[k+1-32],W=_[k+2-32],ee=_[k+3-32],ne=_[k+4-32],ae=_[k+5-32],oe=_[k+6-32],fe=_[k+7-32];_[k+0+0]=or(_[k+0-32],j,W),_[k+1+0]=_[k+0+32]=or(j,W,ee),_[k+2+0]=_[k+1+32]=_[k+0+64]=or(W,ee,ne),_[k+3+0]=_[k+2+32]=_[k+1+64]=_[k+0+96]=or(ee,ne,ae),_[k+3+32]=_[k+2+64]=_[k+1+96]=or(ne,ae,oe),_[k+3+64]=_[k+2+96]=or(ae,oe,fe),_[k+3+96]=or(oe,fe,fe)}function RP(_,k){var j=_[k-1+0],W=_[k-1+32],ee=_[k-1+64],ne=_[k-1-32],ae=_[k+0-32],oe=_[k+1-32],fe=_[k+2-32],pe=_[k+3-32];_[k+0+0]=_[k+1+64]=ne+ae+1>>1,_[k+1+0]=_[k+2+64]=ae+oe+1>>1,_[k+2+0]=_[k+3+64]=oe+fe+1>>1,_[k+3+0]=fe+pe+1>>1,_[k+0+96]=or(ee,W,j),_[k+0+64]=or(W,j,ne),_[k+0+32]=_[k+1+96]=or(j,ne,ae),_[k+1+32]=_[k+2+96]=or(ne,ae,oe),_[k+2+32]=_[k+3+96]=or(ae,oe,fe),_[k+3+32]=or(oe,fe,pe)}function LP(_,k){var j=_[k+0-32],W=_[k+1-32],ee=_[k+2-32],ne=_[k+3-32],ae=_[k+4-32],oe=_[k+5-32],fe=_[k+6-32],pe=_[k+7-32];_[k+0+0]=j+W+1>>1,_[k+1+0]=_[k+0+64]=W+ee+1>>1,_[k+2+0]=_[k+1+64]=ee+ne+1>>1,_[k+3+0]=_[k+2+64]=ne+ae+1>>1,_[k+0+32]=or(j,W,ee),_[k+1+32]=_[k+0+96]=or(W,ee,ne),_[k+2+32]=_[k+1+96]=or(ee,ne,ae),_[k+3+32]=_[k+2+96]=or(ne,ae,oe),_[k+3+64]=or(ae,oe,fe),_[k+3+96]=or(oe,fe,pe)}function Wm(_,k){var j=_[k-1+0],W=_[k-1+32],ee=_[k-1+64],ne=_[k-1+96];_[k+0+0]=j+W+1>>1,_[k+2+0]=_[k+0+32]=W+ee+1>>1,_[k+2+32]=_[k+0+64]=ee+ne+1>>1,_[k+1+0]=or(j,W,ee),_[k+3+0]=_[k+1+32]=or(W,ee,ne),_[k+3+32]=_[k+1+64]=or(ee,ne,ne),_[k+3+64]=_[k+2+64]=_[k+0+96]=_[k+1+96]=_[k+2+96]=_[k+3+96]=ne}function L1(_,k){var j=_[k-1+0],W=_[k-1+32],ee=_[k-1+64],ne=_[k-1+96],ae=_[k-1-32],oe=_[k+0-32],fe=_[k+1-32],pe=_[k+2-32];_[k+0+0]=_[k+2+32]=j+ae+1>>1,_[k+0+32]=_[k+2+64]=W+j+1>>1,_[k+0+64]=_[k+2+96]=ee+W+1>>1,_[k+0+96]=ne+ee+1>>1,_[k+3+0]=or(oe,fe,pe),_[k+2+0]=or(ae,oe,fe),_[k+1+0]=_[k+3+32]=or(j,ae,oe),_[k+1+32]=_[k+3+64]=or(W,j,ae),_[k+1+64]=_[k+3+96]=or(ee,W,j),_[k+1+96]=or(ne,ee,W)}function Pp(_,k){var j;for(j=0;8>j;++j)n(_,k+32*j,_,k-32,8)}function MP(_,k){var j;for(j=0;8>j;++j)i(_,k,_[k-1],8),k+=32}function rf(_,k,j){var W;for(W=0;8>W;++W)i(k,j+32*W,_,8)}function DP(_,k){var j,W=8;for(j=0;8>j;++j)W+=_[k+j-32]+_[k-1+32*j];rf(W>>4,_,k)}function M1(_,k){var j,W=4;for(j=0;8>j;++j)W+=_[k+j-32];rf(W>>3,_,k)}function D1(_,k){var j,W=4;for(j=0;8>j;++j)W+=_[k-1+32*j];rf(W>>3,_,k)}function Z2(_,k){rf(128,_,k)}function nf(_,k,j){var W=_[k-j],ee=_[k+0],ne=3*(ee-W)+jP[1020+_[k-2*j]-_[k+j]],ae=aS[112+(ne+4>>3)];_[k-j]=wo[255+W+aS[112+(ne+3>>3)]],_[k+0]=wo[255+ee-ae]}function j1(_,k,j,W){var ee=_[k+0],ne=_[k+j];return sl[255+_[k-2*j]-_[k-j]]>W||sl[255+ne-ee]>W}function Hm(_,k,j,W){return 4*sl[255+_[k-j]-_[k+0]]+sl[255+_[k-2*j]-_[k+j]]<=W}function $1(_,k,j,W,ee){var ne=_[k-3*j],ae=_[k-2*j],oe=_[k-j],fe=_[k+0],pe=_[k+j],_e=_[k+2*j],Ne=_[k+3*j];return 4*sl[255+oe-fe]+sl[255+ae-pe]>W?0:sl[255+_[k-4*j]-ne]<=ee&&sl[255+ne-ae]<=ee&&sl[255+ae-oe]<=ee&&sl[255+Ne-_e]<=ee&&sl[255+_e-pe]<=ee&&sl[255+pe-fe]<=ee}function Np(_,k,j,W){var ee=2*W+1;for(W=0;16>W;++W)Hm(_,k+W,j,ee)&&nf(_,k+W,j)}function F1(_,k,j,W){var ee=2*W+1;for(W=0;16>W;++W)Hm(_,k+W*j,1,ee)&&nf(_,k+W*j,1)}function J2(_,k,j,W){var ee;for(ee=3;0<ee;--ee)Np(_,k+=4*j,j,W)}function Q2(_,k,j,W){var ee;for(ee=3;0<ee;--ee)F1(_,k+=4,j,W)}function af(_,k,j,W,ee,ne,ae,oe){for(ne=2*ne+1;0<ee--;){if($1(_,k,j,ne,ae))if(j1(_,k,j,oe))nf(_,k,j);else{var fe=_,pe=k,_e=j,Ne=fe[pe-2*_e],me=fe[pe-_e],Se=fe[pe+0],Ae=fe[pe+_e],Be=fe[pe+2*_e],Pe=27*(He=jP[1020+3*(Se-me)+jP[1020+Ne-Ae]])+63>>7,Ve=18*He+63>>7,He=9*He+63>>7;fe[pe-3*_e]=wo[255+fe[pe-3*_e]+He],fe[pe-2*_e]=wo[255+Ne+Ve],fe[pe-_e]=wo[255+me+Pe],fe[pe+0]=wo[255+Se-Pe],fe[pe+_e]=wo[255+Ae-Ve],fe[pe+2*_e]=wo[255+Be-He]}k+=W}}function sf(_,k,j,W,ee,ne,ae,oe){for(ne=2*ne+1;0<ee--;){if($1(_,k,j,ne,ae))if(j1(_,k,j,oe))nf(_,k,j);else{var fe=_,pe=k,_e=j,Ne=fe[pe-_e],me=fe[pe+0],Se=fe[pe+_e],Ae=aS[112+(4+(Be=3*(me-Ne))>>3)],Be=aS[112+(Be+3>>3)],Pe=Ae+1>>1;fe[pe-2*_e]=wo[255+fe[pe-2*_e]+Pe],fe[pe-_e]=wo[255+Ne+Be],fe[pe+0]=wo[255+me-Ae],fe[pe+_e]=wo[255+Se-Pe]}k+=W}}function eS(_,k,j,W,ee,ne){af(_,k,j,1,16,W,ee,ne)}function Ip(_,k,j,W,ee,ne){af(_,k,1,j,16,W,ee,ne)}function tS(_,k,j,W,ee,ne){var ae;for(ae=3;0<ae;--ae)sf(_,k+=4*j,j,1,16,W,ee,ne)}function R(_,k,j,W,ee,ne){var ae;for(ae=3;0<ae;--ae)sf(_,k+=4,1,j,16,W,ee,ne)}function Q(_,k,j,W,ee,ne,ae,oe){af(_,k,ee,1,8,ne,ae,oe),af(j,W,ee,1,8,ne,ae,oe)}function ve(_,k,j,W,ee,ne,ae,oe){af(_,k,1,ee,8,ne,ae,oe),af(j,W,1,ee,8,ne,ae,oe)}function be(_,k,j,W,ee,ne,ae,oe){sf(_,k+4*ee,ee,1,8,ne,ae,oe),sf(j,W+4*ee,ee,1,8,ne,ae,oe)}function Ee(_,k,j,W,ee,ne,ae,oe){sf(_,k+4,1,ee,8,ne,ae,oe),sf(j,W+4,1,ee,8,ne,ae,oe)}function We(){this.ba=new st,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ir,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ke(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Pt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dt(){this.ua=0,this.Wa=new Me,this.vb=new Me,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new V}function ar(){this.xb=this.a=0,this.l=new Um,this.ca=new st,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dt,this.ab=0,this.gc=s(4,Pt),this.Oc=0}function gr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Um,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fr(_,k,j,W,ee,ne,ae){for(_=_==null?0:_[k+0],k=0;k<ae;++k)ee[ne+k]=_+j[W+k]&255,_=ee[ne+k]}function Kn(_,k,j,W,ee,ne,ae){var oe;if(_==null)Fr(null,null,j,W,ee,ne,ae);else for(oe=0;oe<ae;++oe)ee[ne+oe]=_[k+oe]+j[W+oe]&255}function ki(_,k,j,W,ee,ne,ae){if(_==null)Fr(null,null,j,W,ee,ne,ae);else{var oe,fe=_[k+0],pe=fe,_e=fe;for(oe=0;oe<ae;++oe)pe=_e+(fe=_[k+oe])-pe,_e=j[W+oe]+(-256&pe?0>pe?0:255:pe)&255,pe=fe,ee[ne+oe]=_e}}function bn(_,k,j,W){var ee=k.width,ne=k.o;if(t(_!=null&&k!=null),0>j||0>=W||j+W>ne)return null;if(!_.Cc){if(_.ga==null){var ae;if(_.ga=new gr,(ae=_.ga==null)||(ae=k.width*k.o,t(_.Gb.length==0),_.Gb=a(ae),_.Uc=0,_.Gb==null?ae=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,ae=1),ae=!ae),!ae){ae=_.ga;var oe=_.Fa,fe=_.P,pe=_.qc,_e=_.mb,Ne=_.nb,me=fe+1,Se=pe-1,Ae=ae.l;if(t(oe!=null&&_e!=null&&k!=null),jd[0]=null,jd[1]=Fr,jd[2]=Kn,jd[3]=ki,ae.ca=_e,ae.tb=Ne,ae.c=k.width,ae.i=k.height,t(0<ae.c&&0<ae.i),1>=pe)k=0;else if(ae.$a=3&oe[fe+0],ae.Z=oe[fe+0]>>2&3,ae.Lc=oe[fe+0]>>4&3,fe=oe[fe+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||fe)k=0;else if(Ae.put=Wt,Ae.ac=Ks,Ae.bc=vs,Ae.ma=ae,Ae.width=k.width,Ae.height=k.height,Ae.Da=k.Da,Ae.v=k.v,Ae.va=k.va,Ae.j=k.j,Ae.o=k.o,ae.$a)e:{t(ae.$a==1),k=Ce();t:for(;;){if(k==null){k=0;break e}if(t(ae!=null),ae.mc=k,k.c=ae.c,k.i=ae.i,k.l=ae.l,k.l.ma=ae,k.l.width=ae.c,k.l.height=ae.i,k.a=0,U(k.m,oe,me,Se),!Oe(ae.c,ae.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&de(k.s)?(ae.ic=1,oe=k.c*k.i,k.Ta=null,k.Ua=0,k.V=a(oe),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(ae.ic=0,k=Le(k,ae.c)),!k))break t;k=1;break e}ae.mc=null,k=0}else k=Se>=ae.c*ae.i;ae=!k}if(ae)return null;_.ga.Lc!=1?_.Ga=0:W=ne-j}t(_.ga!=null),t(j+W<=ne);e:{if(k=(oe=_.ga).c,ne=oe.l.o,oe.$a==0){if(me=_.rc,Se=_.Vc,Ae=_.Fa,fe=_.P+1+j*k,pe=_.mb,_e=_.nb+j*k,t(fe<=_.P+_.qc),oe.Z!=0)for(t(jd[oe.Z]!=null),ae=0;ae<W;++ae)jd[oe.Z](me,Se,Ae,fe,pe,_e,k),me=pe,Se=_e,_e+=k,fe+=k;else for(ae=0;ae<W;++ae)n(pe,_e,Ae,fe,k),me=pe,Se=_e,_e+=k,fe+=k;_.rc=me,_.Vc=Se}else{if(t(oe.mc!=null),k=j+W,t((ae=oe.mc)!=null),t(k<=ae.i),ae.C>=k)k=1;else if(oe.ic||ql(),oe.ic){oe=ae.V,me=ae.Ba,Se=ae.c;var Be=ae.i,Pe=(Ae=1,fe=ae.$/Se,pe=ae.$%Se,_e=ae.m,Ne=ae.s,ae.$),Ve=Se*Be,He=Se*k,et=Ne.wc,Ye=Pe<He?te(Ne,pe,fe):null;t(Pe<=Ve),t(k<=Be),t(de(Ne));t:for(;;){for(;!_e.h&&Pe<He;){if(pe&et||(Ye=te(Ne,pe,fe)),t(Ye!=null),D(_e),256>(Be=Un(Ye.G[0],Ye.H[0],_e)))oe[me+Pe]=Be,++Pe,++pe>=Se&&(pe=0,++fe<=k&&!(fe%16)&&we(ae,fe));else{if(!(280>Be)){Ae=0;break t}Be=Ha(Be-256,_e);var zt,At=Un(Ye.G[4],Ye.H[4],_e);if(D(_e),!(Pe>=(At=Ys(Se,At=Ha(At,_e)))&&Ve-Pe>=Be)){Ae=0;break t}for(zt=0;zt<Be;++zt)oe[me+Pe+zt]=oe[me+Pe+zt-At];for(Pe+=Be,pe+=Be;pe>=Se;)pe-=Se,++fe<=k&&!(fe%16)&&we(ae,fe);Pe<He&&pe&et&&(Ye=te(Ne,pe,fe))}t(_e.h==q(_e))}we(ae,fe>k?k:fe);break t}!Ae||_e.h&&Pe<Ve?(Ae=0,ae.a=_e.h?5:3):ae.$=Pe,k=Ae}else k=ke(ae,ae.V,ae.Ba,ae.c,ae.i,k,Je);if(!k){W=0;break e}}j+W>=ne&&(_.Cc=1),W=1}if(!W)return null;if(_.Cc&&((W=_.ga)!=null&&(W.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+j*ee}function Gi(_,k,j,W,ee,ne){for(;0<ee--;){var ae,oe=_,fe=k+(j?1:0),pe=_,_e=k+(j?0:3);for(ae=0;ae<W;++ae){var Ne=pe[_e+4*ae];Ne!=255&&(Ne*=32897,oe[fe+4*ae+0]=oe[fe+4*ae+0]*Ne>>23,oe[fe+4*ae+1]=oe[fe+4*ae+1]*Ne>>23,oe[fe+4*ae+2]=oe[fe+4*ae+2]*Ne>>23)}k+=ne}}function Ci(_,k,j,W,ee){for(;0<W--;){var ne;for(ne=0;ne<j;++ne){var ae=_[k+2*ne+0],oe=15&(pe=_[k+2*ne+1]),fe=4369*oe,pe=(240&pe|pe>>4)*fe>>16;_[k+2*ne+0]=(240&ae|ae>>4)*fe>>16&240|(15&ae|ae<<4)*fe>>16>>4&15,_[k+2*ne+1]=240&pe|oe}k+=ee}}function Aa(_,k,j,W,ee,ne,ae,oe){var fe,pe,_e=255;for(pe=0;pe<ee;++pe){for(fe=0;fe<W;++fe){var Ne=_[k+fe];ne[ae+4*fe]=Ne,_e&=Ne}k+=j,ae+=oe}return _e!=255}function of(_,k,j,W,ee){var ne;for(ne=0;ne<ee;++ne)j[W+ne]=_[k+ne]>>8}function ql(){Z1=Gi,f7=Ci,d7=Aa,h7=of}function lf(_,k,j){O[_]=function(W,ee,ne,ae,oe,fe,pe,_e,Ne,me,Se,Ae,Be,Pe,Ve,He,et){var Ye,zt=et-1>>1,At=oe[fe+0]|pe[_e+0]<<16,vr=Ne[me+0]|Se[Ae+0]<<16;t(W!=null);var It=3*At+vr+131074>>2;for(k(W[ee+0],255&It,It>>16,Be,Pe),ne!=null&&(It=3*vr+At+131074>>2,k(ne[ae+0],255&It,It>>16,Ve,He)),Ye=1;Ye<=zt;++Ye){var Nr=oe[fe+Ye]|pe[_e+Ye]<<16,Ki=Ne[me+Ye]|Se[Ae+Ye]<<16,wr=At+Nr+vr+Ki+524296,Rt=wr+2*(Nr+vr)>>3;It=Rt+At>>1,At=(wr=wr+2*(At+Ki)>>3)+Nr>>1,k(W[ee+2*Ye-1],255&It,It>>16,Be,Pe+(2*Ye-1)*j),k(W[ee+2*Ye-0],255&At,At>>16,Be,Pe+(2*Ye-0)*j),ne!=null&&(It=wr+vr>>1,At=Rt+Ki>>1,k(ne[ae+2*Ye-1],255&It,It>>16,Ve,He+(2*Ye-1)*j),k(ne[ae+2*Ye+0],255&At,At>>16,Ve,He+(2*Ye+0)*j)),At=Nr,vr=Ki}1&et||(It=3*At+vr+131074>>2,k(W[ee+et-1],255&It,It>>16,Be,Pe+(et-1)*j),ne!=null&&(It=3*vr+At+131074>>2,k(ne[ae+et-1],255&It,It>>16,Ve,He+(et-1)*j)))}}function B1(){ol[sS]=E1e,ol[oS]=E7,ol[w7]=A1e,ol[lS]=A7,ol[cS]=T7,ol[$P]=k7,ol[x7]=T1e,ol[FP]=E7,ol[BP]=A7,ol[uS]=T7,ol[UP]=k7}function Gm(_){return _&-16384?0>_?0:255:_>>k1e}function kd(_,k){return Gm((19077*_>>8)+(26149*k>>8)-14234)}function Rp(_,k,j){return Gm((19077*_>>8)-(6419*k>>8)-(13320*j>>8)+8708)}function Lp(_,k){return Gm((19077*_>>8)+(33050*k>>8)-17685)}function Cd(_,k,j,W,ee){W[ee+0]=kd(_,j),W[ee+1]=Rp(_,k,j),W[ee+2]=Lp(_,k)}function Ta(_,k,j,W,ee){W[ee+0]=Lp(_,k),W[ee+1]=Rp(_,k,j),W[ee+2]=kd(_,j)}function Mp(_,k,j,W,ee){var ne=Rp(_,k,j);k=ne<<3&224|Lp(_,k)>>3,W[ee+0]=248&kd(_,j)|ne>>5,W[ee+1]=k}function Dp(_,k,j,W,ee){var ne=240&Lp(_,k)|15;W[ee+0]=240&kd(_,j)|Rp(_,k,j)>>4,W[ee+1]=ne}function U1(_,k,j,W,ee){W[ee+0]=255,Cd(_,k,j,W,ee+1)}function z1(_,k,j,W,ee){Ta(_,k,j,W,ee),W[ee+3]=255}function ws(_,k,j,W,ee){Cd(_,k,j,W,ee),W[ee+3]=255}function cf(_,k,j){O[_]=function(W,ee,ne,ae,oe,fe,pe,_e,Ne){for(var me=_e+(-2&Ne)*j;_e!=me;)k(W[ee+0],ne[ae+0],oe[fe+0],pe,_e),k(W[ee+1],ne[ae+0],oe[fe+0],pe,_e+j),ee+=2,++ae,++fe,_e+=2*j;1&Ne&&k(W[ee+0],ne[ae+0],oe[fe+0],pe,_e)}}function qm(_,k,j){return j==0?_==0?k==0?6:5:k==0?4:0:j}function rS(_,k,j,W,ee){switch(_>>>30){case 3:Bp(k,j,W,ee,0);break;case 2:al(k,j,W,ee);break;case 1:Zr(k,j,W,ee)}}function il(_,k){var j,W,ee=k.M,ne=k.Nb,ae=_.oc,oe=_.pc+40,fe=_.oc,pe=_.pc+584,_e=_.oc,Ne=_.pc+600;for(j=0;16>j;++j)ae[oe+32*j-1]=129;for(j=0;8>j;++j)fe[pe+32*j-1]=129,_e[Ne+32*j-1]=129;for(0<ee?ae[oe-1-32]=fe[pe-1-32]=_e[Ne-1-32]=129:(i(ae,oe-32-1,127,21),i(fe,pe-32-1,127,9),i(_e,Ne-32-1,127,9)),W=0;W<_.za;++W){var me=k.ya[k.aa+W];if(0<W){for(j=-1;16>j;++j)n(ae,oe+32*j-4,ae,oe+32*j+12,4);for(j=-1;8>j;++j)n(fe,pe+32*j-4,fe,pe+32*j+4,4),n(_e,Ne+32*j-4,_e,Ne+32*j+4,4)}var Se=_.Gd,Ae=_.Hd+W,Be=me.ad,Pe=me.Hc;if(0<ee&&(n(ae,oe-32,Se[Ae].y,0,16),n(fe,pe-32,Se[Ae].f,0,8),n(_e,Ne-32,Se[Ae].ea,0,8)),me.Za){var Ve=ae,He=oe-32+16;for(0<ee&&(W>=_.za-1?i(Ve,He,Se[Ae].y[15],4):n(Ve,He,Se[Ae+1].y,0,4)),j=0;4>j;j++)Ve[He+128+j]=Ve[He+256+j]=Ve[He+384+j]=Ve[He+0+j];for(j=0;16>j;++j,Pe<<=2)Ve=ae,He=oe+O7[j],Kl[me.Ob[j]](Ve,He),rS(Pe,Be,16*+j,Ve,He)}else if(Ve=qm(W,ee,me.Ob[0]),Dd[Ve](ae,oe),Pe!=0)for(j=0;16>j;++j,Pe<<=2)rS(Pe,Be,16*+j,ae,oe+O7[j]);for(j=me.Gc,Ve=qm(W,ee,me.Dd),df[Ve](fe,pe),df[Ve](_e,Ne),Pe=Be,Ve=fe,He=pe,255&(me=0|j)&&(170&me?nu(Pe,256,Ve,He):gn(Pe,256,Ve,He)),me=_e,Pe=Ne,255&(j>>=8)&&(170&j?nu(Be,320,me,Pe):gn(Be,320,me,Pe)),ee<_.Ub-1&&(n(Se[Ae].y,0,ae,oe+480,16),n(Se[Ae].f,0,fe,pe+224,8),n(Se[Ae].ea,0,_e,Ne+224,8)),j=8*ne*_.B,Se=_.sa,Ae=_.ta+16*W+16*ne*_.R,Be=_.qa,me=_.ra+8*W+j,Pe=_.Ha,Ve=_.Ia+8*W+j,j=0;16>j;++j)n(Se,Ae+j*_.R,ae,oe+32*j,16);for(j=0;8>j;++j)n(Be,me+j*_.B,fe,pe+32*j,8),n(Pe,Ve+j*_.B,_e,Ne+32*j,8)}}function jp(_,k,j,W,ee,ne,ae,oe,fe){var pe=[0],_e=[0],Ne=0,me=fe!=null?fe.kd:0,Se=fe??new Ke;if(_==null||12>j)return 7;Se.data=_,Se.w=k,Se.ha=j,k=[k],j=[j],Se.gb=[Se.gb];e:{var Ae=k,Be=j,Pe=Se.gb;if(t(_!=null),t(Be!=null),t(Pe!=null),Pe[0]=0,12<=Be[0]&&!r(_,Ae[0],"RIFF")){if(r(_,Ae[0]+8,"WEBP")){Pe=3;break e}var Ve=Re(_,Ae[0]+4);if(12>Ve||4294967286<Ve){Pe=3;break e}if(me&&Ve>Be[0]-8){Pe=7;break e}Pe[0]=Ve,Ae[0]+=12,Be[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Ve=0<Se.gb[0],j=j[0];;){e:{var He=_;Be=k,Pe=j;var et=pe,Ye=_e,zt=Ae=[0];if((It=Ne=[Ne])[0]=0,8>Pe[0])Pe=7;else{if(!r(He,Be[0],"VP8X")){if(Re(He,Be[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var At=Re(He,Be[0]+8),vr=1+Ie(He,Be[0]+12);if(2147483648<=vr*(He=1+Ie(He,Be[0]+15))){Pe=3;break e}zt!=null&&(zt[0]=At),et!=null&&(et[0]=vr),Ye!=null&&(Ye[0]=He),Be[0]+=18,Pe[0]-=18,It[0]=1}Pe=0}}if(Ne=Ne[0],Ae=Ae[0],Pe!=0)return Pe;if(Be=!!(2&Ae),!Ve&&Ne)return 3;if(ne!=null&&(ne[0]=!!(16&Ae)),ae!=null&&(ae[0]=Be),oe!=null&&(oe[0]=0),ae=pe[0],Ae=_e[0],Ne&&Be&&fe==null){Pe=0;break}if(4>j){Pe=7;break}if(Ve&&Ne||!Ve&&!Ne&&!r(_,k[0],"ALPH")){j=[j],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{At=_,Pe=k,Ve=j;var It=Se.gb;et=Se.na,Ye=Se.P,zt=Se.Sa,vr=22,t(At!=null),t(Ve!=null),He=Pe[0];var Nr=Ve[0];for(t(et!=null),t(zt!=null),et[0]=null,Ye[0]=null,zt[0]=0;;){if(Pe[0]=He,Ve[0]=Nr,8>Nr){Pe=7;break e}var Ki=Re(At,He+4);if(4294967286<Ki){Pe=3;break e}var wr=8+Ki+1&-2;if(vr+=wr,0<It&&vr>It){Pe=3;break e}if(!r(At,He,"VP8 ")||!r(At,He,"VP8L")){Pe=0;break e}if(Nr[0]<wr){Pe=7;break e}r(At,He,"ALPH")||(et[0]=At,Ye[0]=He+8,zt[0]=Ki),He+=wr,Nr-=wr}}if(j=j[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],Pe!=0)break}j=[j],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(It=_,Pe=k,Ve=j,et=Se.gb[0],Ye=Se.Ja,zt=Se.xa,At=Pe[0],He=!r(It,At,"VP8 "),vr=!r(It,At,"VP8L"),t(It!=null),t(Ve!=null),t(Ye!=null),t(zt!=null),8>Ve[0])Pe=7;else{if(He||vr){if(It=Re(It,At+4),12<=et&&It>et-12){Pe=3;break e}if(me&&It>Ve[0]-8){Pe=7;break e}Ye[0]=It,Pe[0]+=8,Ve[0]-=8,zt[0]=vr}else zt[0]=5<=Ve[0]&&It[At+0]==47&&!(It[At+4]>>5),Ye[0]=Ve[0];Pe=0}if(j=j[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],k=k[0],Pe!=0)break;if(4294967286<Se.Ja)return 3;if(oe==null||Be||(oe[0]=Se.xa?2:1),ae=[ae],Ae=[Ae],Se.xa){if(5>j){Pe=7;break}oe=ae,me=Ae,Be=ne,_==null||5>j?_=0:5<=j&&_[k+0]==47&&!(_[k+4]>>5)?(Ve=[0],It=[0],et=[0],U(Ye=new z,_,k,j),Wl(Ye,Ve,It,et)?(oe!=null&&(oe[0]=Ve[0]),me!=null&&(me[0]=It[0]),Be!=null&&(Be[0]=et[0]),_=1):_=0):_=0}else{if(10>j){Pe=7;break}oe=Ae,_==null||10>j||!H2(_,k+3,j-3)?_=0:(me=_[k+0]|_[k+1]<<8|_[k+2]<<16,Be=16383&(_[k+7]<<8|_[k+6]),_=16383&(_[k+9]<<8|_[k+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=Se.Ja||!Be||!_?_=0:(ae&&(ae[0]=Be),oe&&(oe[0]=_),_=1))}if(!_||(ae=ae[0],Ae=Ae[0],Ne&&(pe[0]!=ae||_e[0]!=Ae)))return 3;fe!=null&&(fe[0]=Se,fe.offset=k-fe.w,t(4294967286>k-fe.w),t(fe.offset==fe.ha-j));break}return Pe==0||Pe==7&&Ne&&fe==null?(ne!=null&&(ne[0]|=Se.na!=null&&0<Se.na.length),W!=null&&(W[0]=ae),ee!=null&&(ee[0]=Ae),0):Pe}function V1(_,k,j){var W=k.width,ee=k.height,ne=0,ae=0,oe=W,fe=ee;if(k.Da=_!=null&&0<_.Da,k.Da&&(oe=_.cd,fe=_.bd,ne=_.v,ae=_.j,11>j||(ne&=-2,ae&=-2),0>ne||0>ae||0>=oe||0>=fe||ne+oe>W||ae+fe>ee))return 0;if(k.v=ne,k.j=ae,k.va=ne+oe,k.o=ae+fe,k.U=oe,k.T=fe,k.da=_!=null&&0<_.da,k.da){if(!tt(oe,fe,j=[_.ib],ne=[_.hb]))return 0;k.ib=j[0],k.hb=ne[0]}return k.ob=_!=null&&_.ob,k.Kb=_==null||!_.Sd,k.da&&(k.ob=k.ib<3*W/4&&k.hb<3*ee/4,k.Kb=0),1}function W1(_){if(_==null)return 2;if(11>_.S){var k=_.f.RGBA;k.fb+=(_.height-1)*k.A,k.A=-k.A}else k=_.f.kb,_=_.height,k.O+=(_-1)*k.fa,k.fa=-k.fa,k.N+=(_-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(_-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(_-1)*k.lb,k.lb=-k.lb);return 0}function Od(_,k,j,W){if(W==null||0>=_||0>=k)return 2;if(j!=null){if(j.Da){var ee=j.cd,ne=j.bd,ae=-2&j.v,oe=-2&j.j;if(0>ae||0>oe||0>=ee||0>=ne||ae+ee>_||oe+ne>k)return 2;_=ee,k=ne}if(j.da){if(!tt(_,k,ee=[j.ib],ne=[j.hb]))return 2;_=ee[0],k=ne[0]}}W.width=_,W.height=k;e:{var fe=W.width,pe=W.height;if(_=W.S,0>=fe||0>=pe||!(_>=sS&&13>_))_=2;else{if(0>=W.Rd&&W.sd==null){ae=ne=ee=k=0;var _e=(oe=fe*P7[_])*pe;if(11>_||(ne=(pe+1)/2*(k=(fe+1)/2),_==12&&(ae=(ee=fe)*pe)),(pe=a(_e+2*ne+ae))==null){_=1;break e}W.sd=pe,11>_?((fe=W.f.RGBA).eb=pe,fe.fb=0,fe.A=oe,fe.size=_e):((fe=W.f.kb).y=pe,fe.O=0,fe.fa=oe,fe.Fd=_e,fe.f=pe,fe.N=0+_e,fe.Ab=k,fe.Cd=ne,fe.ea=pe,fe.W=0+_e+ne,fe.Db=k,fe.Ed=ne,_==12&&(fe.F=pe,fe.J=0+_e+2*ne),fe.Tc=ae,fe.lb=ee)}if(k=1,ee=W.S,ne=W.width,ae=W.height,ee>=sS&&13>ee)if(11>ee)_=W.f.RGBA,k&=(oe=Math.abs(_.A))*(ae-1)+ne<=_.size,k&=oe>=ne*P7[ee],k&=_.eb!=null;else{_=W.f.kb,oe=(ne+1)/2,_e=(ae+1)/2,fe=Math.abs(_.fa),pe=Math.abs(_.Ab);var Ne=Math.abs(_.Db),me=Math.abs(_.lb),Se=me*(ae-1)+ne;k&=fe*(ae-1)+ne<=_.Fd,k&=pe*(_e-1)+oe<=_.Cd,k=(k&=Ne*(_e-1)+oe<=_.Ed)&fe>=ne&pe>=oe&Ne>=oe,k&=_.y!=null,k&=_.f!=null,k&=_.ea!=null,ee==12&&(k&=me>=ne,k&=Se<=_.Tc,k&=_.F!=null)}else k=0;_=k?0:2}}return _!=0||j!=null&&j.fd&&(_=W1(W)),_}var $p=64,yo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vo=24,Pd=32,uf=8,Nd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(_){return _},O.Predictor2=function(_,k,j){return k[j+0]},O.Predictor3=function(_,k,j){return k[j+1]},O.Predictor4=function(_,k,j){return k[j-1]},O.Predictor5=function(_,k,j){return Ue(Ue(_,k[j+1]),k[j+0])},O.Predictor6=function(_,k,j){return Ue(_,k[j-1])},O.Predictor7=function(_,k,j){return Ue(_,k[j+0])},O.Predictor8=function(_,k,j){return Ue(k[j-1],k[j+0])},O.Predictor9=function(_,k,j){return Ue(k[j+0],k[j+1])},O.Predictor10=function(_,k,j){return Ue(Ue(_,k[j-1]),Ue(k[j+0],k[j+1]))},O.Predictor11=function(_,k,j){var W=k[j+0];return 0>=Fe(W>>24&255,_>>24&255,(k=k[j-1])>>24&255)+Fe(W>>16&255,_>>16&255,k>>16&255)+Fe(W>>8&255,_>>8&255,k>>8&255)+Fe(255&W,255&_,255&k)?W:_},O.Predictor12=function(_,k,j){var W=k[j+0];return(Qe((_>>24&255)+(W>>24&255)-((k=k[j-1])>>24&255))<<24|Qe((_>>16&255)+(W>>16&255)-(k>>16&255))<<16|Qe((_>>8&255)+(W>>8&255)-(k>>8&255))<<8|Qe((255&_)+(255&W)-(255&k)))>>>0},O.Predictor13=function(_,k,j){var W=k[j-1];return(Ge((_=Ue(_,k[j+0]))>>24&255,W>>24&255)<<24|Ge(_>>16&255,W>>16&255)<<16|Ge(_>>8&255,W>>8&255)<<8|Ge(255&_,255&W))>>>0};var H1=O.PredictorAdd0;O.PredictorAdd1=at,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Km=O.PredictorAdd2;yt("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var pi,nS=O.ColorIndexInverseTransform,tu=O.MapARGB,ru=O.VP8LColorIndexInverseTransformAlpha,G1=O.MapAlpha,q1=O.VP8LPredictorsAdd=[];q1.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var K1,Y1,Id,Rd,Ld,Fp,Md,Bp,al,nu,Zr,gn,mi,qi,ff,X1,Ym,iS,a7,s7,o7,l7,c7,u7,Z1,f7,d7,h7,p7=a(511),m7=a(2041),g7=a(225),y7=a(767),v7=0,jP=m7,aS=g7,wo=y7,sl=p7,sS=0,oS=1,w7=2,lS=3,cS=4,$P=5,x7=6,FP=7,BP=8,uS=9,UP=10,u1e=[2,3,7],f1e=[3,3,11],b7=[280,256,256,256,40],d1e=[0,1,1,1,0],h1e=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],p1e=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],m1e=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],g1e=8,zP=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],VP=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],J1=null,y1e=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],v1e=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],_7=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],w1e=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],x1e=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],b1e=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_1e=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Dd=[],Kl=[],df=[],S1e=1,S7=2,jd=[],ol=[];lf("UpsampleRgbLinePair",Cd,3),lf("UpsampleBgrLinePair",Ta,3),lf("UpsampleRgbaLinePair",ws,4),lf("UpsampleBgraLinePair",z1,4),lf("UpsampleArgbLinePair",U1,4),lf("UpsampleRgba4444LinePair",Dp,2),lf("UpsampleRgb565LinePair",Mp,2);var E1e=O.UpsampleRgbLinePair,A1e=O.UpsampleBgrLinePair,E7=O.UpsampleRgbaLinePair,A7=O.UpsampleBgraLinePair,T7=O.UpsampleArgbLinePair,k7=O.UpsampleRgba4444LinePair,T1e=O.UpsampleRgb565LinePair,fS=16,dS=1<<fS-1,Q1=-227,WP=482,k1e=6,C7=0,C1e=a(256),O1e=a(256),P1e=a(256),N1e=a(256),I1e=a(WP-Q1),R1e=a(WP-Q1);cf("YuvToRgbRow",Cd,3),cf("YuvToBgrRow",Ta,3),cf("YuvToRgbaRow",ws,4),cf("YuvToBgraRow",z1,4),cf("YuvToArgbRow",U1,4),cf("YuvToRgba4444Row",Dp,2),cf("YuvToRgb565Row",Mp,2);var O7=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hS=[0,2,8],L1e=[8,7,6,4,4,2,2,2,1,1,1,1],M1e=1;this.WebPDecodeRGBA=function(_,k,j,W,ee){var ne=oS,ae=new We,oe=new st;ae.ba=oe,oe.S=ne,oe.width=[oe.width],oe.height=[oe.height];var fe=oe.width,pe=oe.height,_e=new dt;if(_e==null||_==null)var Ne=2;else t(_e!=null),Ne=jp(_,k,j,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Ne!=0?fe=0:(fe!=null&&(fe[0]=_e.width[0]),pe!=null&&(pe[0]=_e.height[0]),fe=1),fe){oe.width=oe.width[0],oe.height=oe.height[0],W!=null&&(W[0]=oe.width),ee!=null&&(ee[0]=oe.height);e:{if(W=new Um,(ee=new Ke).data=_,ee.w=k,ee.ha=j,ee.kd=1,k=[0],t(ee!=null),((_=jp(ee.data,ee.w,ee.ha,null,null,null,k,null,ee))==0||_==7)&&k[0]&&(_=4),(k=_)==0){if(t(ae!=null),W.data=ee.data,W.w=ee.w+ee.offset,W.ha=ee.ha-ee.offset,W.put=Wt,W.ac=Ks,W.bc=vs,W.ma=ae,ee.xa){if((_=Ce())==null){ae=1;break e}if(function(me,Se){var Ae=[0],Be=[0],Pe=[0];t:for(;;){if(me==null)return 0;if(Se==null)return me.a=2,0;if(me.l=Se,me.a=0,U(me.m,Se.data,Se.w,Se.ha),!Wl(me.m,Ae,Be,Pe)){me.a=3;break t}if(me.xb=S7,Se.width=Ae[0],Se.height=Be[0],!Oe(Ae[0],Be[0],1,me,null))break t;return 1}return t(me.a!=0),0}(_,W)){if(W=(k=Od(W.width,W.height,ae.Oa,ae.ba))==0){t:{W=_;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((j=W.l)!=null),t((ee=j.ma)!=null),W.xb!=0){if(W.ca=ee.ba,W.tb=ee.tb,t(W.ca!=null),!V1(ee.Oa,j,lS)){W.a=2;break r}if(!Le(W,j.width)||j.da)break r;if((j.da||Kt(W.ca.S))&&ql(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&ql()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!ie(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!ke(W,W.V,W.Ba,W.c,W.i,j.o,ce))break r;ee.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(k=_.a)}else k=_.a}else{if((_=new _P)==null){ae=1;break e}if(_.Fa=ee.na,_.P=ee.P,_.qc=ee.Sa,Qc(_,W)){if((k=Od(W.width,W.height,ae.Oa,ae.ba))==0){if(_.Aa=0,j=ae.Oa,t((ee=_)!=null),j!=null){if(0<(fe=0>(fe=j.Md)?0:100<fe?255:255*fe/100)){for(pe=_e=0;4>pe;++pe)12>(Ne=ee.pb[pe]).lc&&(Ne.ia=fe*L1e[0>Ne.lc?0:Ne.lc]>>3),_e|=Ne.ia;_e&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=j.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}(function(me,Se){if(me==null)return 0;if(Se==null)return Ti(me,2,"NULL VP8Io parameter in VP8Decode().");if(!me.cb&&!Qc(me,Se))return 0;if(t(me.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(me.L=0);var Ae=hS[me.L];if(me.L==2?(me.yb=0,me.zb=0):(me.yb=Se.v-Ae>>4,me.zb=Se.j-Ae>>4,0>me.yb&&(me.yb=0),0>me.zb&&(me.zb=0)),me.Va=Se.o+15+Ae>>4,me.Hb=Se.va+15+Ae>>4,me.Hb>me.za&&(me.Hb=me.za),me.Va>me.Ub&&(me.Va=me.Ub),0<me.L){var Be=me.ed;for(Ae=0;4>Ae;++Ae){var Pe;if(me.Qa.Cb){var Ve=me.Qa.Lb[Ae];me.Qa.Fb||(Ve+=Be.Tb)}else Ve=Be.Tb;for(Pe=0;1>=Pe;++Pe){var He=me.gd[Ae][Pe],et=Ve;if(Be.Pc&&(et+=Be.vd[0],Pe&&(et+=Be.od[0])),0<(et=0>et?0:63<et?63:et)){var Ye=et;0<Be.wb&&(Ye=4<Be.wb?Ye>>2:Ye>>1)>9-Be.wb&&(Ye=9-Be.wb),1>Ye&&(Ye=1),He.dd=Ye,He.tc=2*et+Ye,He.ld=40<=et?2:15<=et?1:0}else He.tc=0;He.La=Pe}}}Ae=0}else Ti(me,6,"Frame setup failed"),Ae=me.a;if(Ae=Ae==0){if(Ae){me.$c=0,0<me.Aa||(me.Ic=M1e);t:{Ae=me.Ic,Be=4*(Ye=me.za);var zt=32*Ye,At=Ye+1,vr=0<me.L?Ye*(0<me.Aa?2:1):0,It=(me.Aa==2?2:1)*Ye;if((He=Be+832+(Pe=3*(16*Ae+hS[me.L])/2*zt)+(Ve=me.Fa!=null&&0<me.Fa.length?me.Kc.c*me.Kc.i:0))!=He)Ae=0;else{if(He>me.Vb){if(me.Vb=0,me.Ec=a(He),me.Fc=0,me.Ec==null){Ae=Ti(me,1,"no memory during frame initialization.");break t}me.Vb=He}He=me.Ec,et=me.Fc,me.Ac=He,me.Bc=et,et+=Be,me.Gd=s(zt,rl),me.Hd=0,me.rb=s(At+1,ri),me.sb=1,me.wa=vr?s(vr,Pr):null,me.Y=0,me.D.Nb=0,me.D.wa=me.wa,me.D.Y=me.Y,0<me.Aa&&(me.D.Y+=Ye),t(!0),me.oc=He,me.pc=et,et+=832,me.ya=s(It,Hl),me.aa=0,me.D.ya=me.ya,me.D.aa=me.aa,me.Aa==2&&(me.D.aa+=Ye),me.R=16*Ye,me.B=8*Ye,Ye=(zt=hS[me.L])*me.R,zt=zt/2*me.B,me.sa=He,me.ta=et+Ye,me.qa=me.sa,me.ra=me.ta+16*Ae*me.R+zt,me.Ha=me.qa,me.Ia=me.ra+8*Ae*me.B+zt,me.$c=0,et+=Pe,me.mb=Ve?He:null,me.nb=Ve?et:null,t(et+Ve<=me.Fc+me.Vb),G2(me),i(me.Ac,me.Bc,0,Be),Ae=1}}if(Ae){if(Se.ka=0,Se.y=me.sa,Se.O=me.ta,Se.f=me.qa,Se.N=me.ra,Se.ea=me.Ha,Se.Vd=me.Ia,Se.fa=me.R,Se.Rc=me.B,Se.F=null,Se.J=0,!v7){for(Ae=-255;255>=Ae;++Ae)p7[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)m7[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)g7[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)y7[255+Ae]=0>Ae?0:255<Ae?255:Ae;v7=1}Md=Vm,Bp=EP,nu=eu,Zr=K2,gn=Y2,al=SP,mi=eS,qi=Ip,ff=Q,X1=ve,Ym=tS,iS=R,a7=be,s7=Ee,o7=Np,l7=F1,c7=J2,u7=Q2,Kl[0]=IP,Kl[1]=AP,Kl[2]=PP,Kl[3]=NP,Kl[4]=ef,Kl[5]=RP,Kl[6]=tf,Kl[7]=LP,Kl[8]=L1,Kl[9]=Wm,Dd[0]=CP,Dd[1]=kP,Dd[2]=I1,Dd[3]=X2,Dd[4]=Op,Dd[5]=R1,Dd[6]=OP,df[0]=DP,df[1]=TP,df[2]=Pp,df[3]=MP,df[4]=D1,df[5]=M1,df[6]=Z2,Ae=1}else Ae=0}Ae&&(Ae=function(Nr,Ki){for(Nr.M=0;Nr.M<Nr.Va;++Nr.M){var wr,Rt=Nr.Jc[Nr.M&Nr.Xb],vt=Nr.m,gi=Nr;for(wr=0;wr<gi.za;++wr){var mr=vt,Dr=gi,Nn=Dr.Ac,ka=Dr.Bc+4*wr,xs=Dr.zc,ni=Dr.ya[Dr.aa+wr];if(Dr.Qa.Bb?ni.$b=le(mr,Dr.Pa.jb[0])?2+le(mr,Dr.Pa.jb[2]):le(mr,Dr.Pa.jb[1]):ni.$b=0,Dr.kc&&(ni.Ad=le(mr,Dr.Bd)),ni.Za=!le(mr,145)+0,ni.Za){var Ga=ni.Ob,bs=0;for(Dr=0;4>Dr;++Dr){var Yi,Br=xs[0+Dr];for(Yi=0;4>Yi;++Yi){Br=x1e[Nn[ka+Yi]][Br];for(var tn=_7[le(mr,Br[0])];0<tn;)tn=_7[2*tn+le(mr,Br[tn])];Br=-tn,Nn[ka+Yi]=Br}n(Ga,bs,Nn,ka,4),bs+=4,xs[0+Dr]=Br}}else Br=le(mr,156)?le(mr,128)?1:3:le(mr,163)?2:0,ni.Ob[0]=Br,i(Nn,ka,Br,4),i(xs,0,Br,4);ni.Dd=le(mr,142)?le(mr,114)?le(mr,183)?1:3:2:0}if(gi.m.Ka)return Ti(Nr,7,"Premature end-of-partition0 encountered.");for(;Nr.ja<Nr.za;++Nr.ja){if(gi=Rt,mr=(vt=Nr).rb[vt.sb-1],Nn=vt.rb[vt.sb+vt.ja],wr=vt.ya[vt.aa+vt.ja],ka=vt.kc?wr.Ad:0)mr.la=Nn.la=0,wr.Za||(mr.Na=Nn.Na=0),wr.Hc=0,wr.Gc=0,wr.ia=0;else{var ii,rn;if(mr=Nn,Nn=gi,ka=vt.Pa.Xc,xs=vt.ya[vt.aa+vt.ja],ni=vt.pb[xs.$b],Dr=xs.ad,Ga=0,bs=vt.rb[vt.sb-1],Br=Yi=0,i(Dr,Ga,0,384),xs.Za)var Ca=0,Yl=ka[3];else{tn=a(16);var yi=mr.Na+bs.Na;if(yi=J1(Nn,ka[1],yi,ni.Eb,0,tn,0),mr.Na=bs.Na=(0<yi)+0,1<yi)Md(tn,0,Dr,Ga);else{var Xs=tn[0]+3>>3;for(tn=0;256>tn;tn+=16)Dr[Ga+tn]=Xs}Ca=1,Yl=ka[0]}var yn=15&mr.la,Xi=15&bs.la;for(tn=0;4>tn;++tn){var xo=1&Xi;for(Xs=rn=0;4>Xs;++Xs)yn=yn>>1|(xo=(yi=J1(Nn,Yl,yi=xo+(1&yn),ni.Sc,Ca,Dr,Ga))>Ca)<<7,rn=rn<<2|(3<yi?3:1<yi?2:Dr[Ga+0]!=0),Ga+=16;yn>>=4,Xi=Xi>>1|xo<<7,Yi=(Yi<<8|rn)>>>0}for(Yl=yn,Ca=Xi>>4,ii=0;4>ii;ii+=2){for(rn=0,yn=mr.la>>4+ii,Xi=bs.la>>4+ii,tn=0;2>tn;++tn){for(xo=1&Xi,Xs=0;2>Xs;++Xs)yi=xo+(1&yn),yn=yn>>1|(xo=0<(yi=J1(Nn,ka[2],yi,ni.Qc,0,Dr,Ga)))<<3,rn=rn<<2|(3<yi?3:1<yi?2:Dr[Ga+0]!=0),Ga+=16;yn>>=2,Xi=Xi>>1|xo<<5}Br|=rn<<4*ii,Yl|=yn<<4<<ii,Ca|=(240&Xi)<<ii}mr.la=Yl,bs.la=Ca,xs.Hc=Yi,xs.Gc=Br,xs.ia=43690&Br?0:ni.ia,ka=!(Yi|Br)}if(0<vt.L&&(vt.wa[vt.Y+vt.ja]=vt.gd[wr.$b][wr.Za],vt.wa[vt.Y+vt.ja].La|=!ka),gi.Ka)return Ti(Nr,7,"Premature end-of-file encountered.")}if(G2(Nr),vt=Ki,gi=1,wr=(Rt=Nr).D,mr=0<Rt.L&&Rt.M>=Rt.zb&&Rt.M<=Rt.Va,Rt.Aa==0)t:{if(wr.M=Rt.M,wr.uc=mr,il(Rt,wr),gi=1,wr=(rn=Rt.D).Nb,mr=(Br=hS[Rt.L])*Rt.R,Nn=Br/2*Rt.B,tn=16*wr*Rt.R,Xs=8*wr*Rt.B,ka=Rt.sa,xs=Rt.ta-mr+tn,ni=Rt.qa,Dr=Rt.ra-Nn+Xs,Ga=Rt.Ha,bs=Rt.Ia-Nn+Xs,Xi=(yn=rn.M)==0,Yi=yn>=Rt.Va-1,Rt.Aa==2&&il(Rt,rn),rn.uc)for(xo=(yi=Rt).D.M,t(yi.D.uc),rn=yi.yb;rn<yi.Hb;++rn){Ca=rn,Yl=xo;var _s=(bo=(Oa=yi).D).Nb;ii=Oa.R;var bo=bo.wa[bo.Y+Ca],_o=Oa.sa,Zs=Oa.ta+16*_s*ii+16*Ca,So=bo.dd,_n=bo.tc;if(_n!=0)if(t(3<=_n),Oa.L==1)0<Ca&&l7(_o,Zs,ii,_n+4),bo.La&&u7(_o,Zs,ii,_n),0<Yl&&o7(_o,Zs,ii,_n+4),bo.La&&c7(_o,Zs,ii,_n);else{var Eo=Oa.B,Xl=Oa.qa,Up=Oa.ra+8*_s*Eo+8*Ca,hf=Oa.Ha,Oa=Oa.Ia+8*_s*Eo+8*Ca;_s=bo.ld,0<Ca&&(qi(_o,Zs,ii,_n+4,So,_s),X1(Xl,Up,hf,Oa,Eo,_n+4,So,_s)),bo.La&&(iS(_o,Zs,ii,_n,So,_s),s7(Xl,Up,hf,Oa,Eo,_n,So,_s)),0<Yl&&(mi(_o,Zs,ii,_n+4,So,_s),ff(Xl,Up,hf,Oa,Eo,_n+4,So,_s)),bo.La&&(Ym(_o,Zs,ii,_n,So,_s),a7(Xl,Up,hf,Oa,Eo,_n,So,_s))}}if(Rt.ia&&alert("todo:DitherRow"),vt.put!=null){if(rn=16*yn,yn=16*(yn+1),Xi?(vt.y=Rt.sa,vt.O=Rt.ta+tn,vt.f=Rt.qa,vt.N=Rt.ra+Xs,vt.ea=Rt.Ha,vt.W=Rt.Ia+Xs):(rn-=Br,vt.y=ka,vt.O=xs,vt.f=ni,vt.N=Dr,vt.ea=Ga,vt.W=bs),Yi||(yn-=Br),yn>vt.o&&(yn=vt.o),vt.F=null,vt.J=null,Rt.Fa!=null&&0<Rt.Fa.length&&rn<yn&&(vt.J=bn(Rt,vt,rn,yn-rn),vt.F=Rt.mb,vt.F==null&&vt.F.length==0)){gi=Ti(Rt,3,"Could not decode alpha data.");break t}rn<vt.j&&(Br=vt.j-rn,rn=vt.j,t(!(1&Br)),vt.O+=Rt.R*Br,vt.N+=Rt.B*(Br>>1),vt.W+=Rt.B*(Br>>1),vt.F!=null&&(vt.J+=vt.width*Br)),rn<yn&&(vt.O+=vt.v,vt.N+=vt.v>>1,vt.W+=vt.v>>1,vt.F!=null&&(vt.J+=vt.v),vt.ka=rn-vt.j,vt.U=vt.va-vt.v,vt.T=yn-rn,gi=vt.put(vt))}wr+1!=Rt.Ic||Yi||(n(Rt.sa,Rt.ta-mr,ka,xs+16*Rt.R,mr),n(Rt.qa,Rt.ra-Nn,ni,Dr+8*Rt.B,Nn),n(Rt.Ha,Rt.Ia-Nn,Ga,bs+8*Rt.B,Nn))}if(!gi)return Ti(Nr,6,"Output aborted.")}return 1}(me,Se)),Se.bc!=null&&Se.bc(Se),Ae&=1}return Ae?(me.cb=0,Ae):0})(_,W)||(k=_.a)}}else k=_.a}k==0&&ae.Oa!=null&&ae.Oa.fd&&(k=W1(ae.ba))}ae=k}ne=ae!=0?null:11>ne?oe.f.RGBA.eb:oe.f.kb.y}else ne=null;return ne};var P7=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,M){for(var P="",N=0;N<4;N++)P+=String.fromCharCode(O[M++]);return P}function u(O,M){return O[M+0]|O[M+1]<<8}function f(O,M){return(O[M+0]|O[M+1]<<8|O[M+2]<<16)>>>0}function d(O,M){return(O[M+0]|O[M+1]<<8|O[M+2]<<16|O[M+3]<<24)>>>0}new l;var h=[0],m=[0],p=[],y=new l,g=e,w=function(O,M){var P={},N=0,V=!1,B=0,G=0;if(P.frames=[],!function(I,z){for(var H=0;H<4;H++)if(I[z+H]!="RIFF".charCodeAt(H))return!0;return!1}(O,M)){for(d(O,M+=4),M+=8;M<O.length;){var Z=c(O,M),J=d(O,M+=4);M+=4;var Y=J+(1&J);switch(Z){case"VP8 ":case"VP8L":P.frames[N]===void 0&&(P.frames[N]={}),(ue=P.frames[N]).src_off=V?G:M-8,ue.src_size=B+J+8,N++,V&&(V=!1,B=0,G=0);break;case"VP8X":(ue=P.header={}).feature_flags=O[M];var U=M+4;ue.canvas_width=1+f(O,U),U+=3,ue.canvas_height=1+f(O,U),U+=3;break;case"ALPH":V=!0,B=Y+8,G=M-8;break;case"ANIM":(ue=P.header).bgcolor=d(O,M),U=M+4,ue.loop_count=u(O,U),U+=2;break;case"ANMF":var se,ue;(ue=P.frames[N]={}).offset_x=2*f(O,M),M+=3,ue.offset_y=2*f(O,M),M+=3,ue.width=1+f(O,M),M+=3,ue.height=1+f(O,M),M+=3,ue.duration=f(O,M),M+=3,se=O[M++],ue.dispose=1&se,ue.blend=se>>1&1}Z!="ANMF"&&(M+=Y)}return P}}(g,0);w.response=g,w.rgbaoutput=!0,w.dataurl=!1;var v=w.header?w.header:null,x=w.frames?w.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],m=[v.canvas_width];for(var b=0;b<x.length&&x[b].blend!=0;b++);}var S=x[0],T=y.WebPDecodeRGBA(g,S.src_off,S.src_size,m,h);S.rgba=T,S.imgwidth=m[0],S.imgheight=h[0];for(var A=0;A<m[0]*h[0]*4;A++)p[A]=T[A];return this.width=m,this.height=h,this.data=p,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function zPt(){var e,t=this.internal.__metadata__.metadata,r=unescape(encodeURIComponent(t));e=this.internal.__metadata__.rawXml?r:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+e.length+" >>"),this.internal.write("stream"),this.internal.write(e),this.internal.write("endstream"),this.internal.write("endobj")}function VPt(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(e){var t,r,n,i,a,s,o,l,c,u=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new s,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new s,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var f=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=I;Object.defineProperty(this,"pdf",{get:function(){return z}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(ie){H=!!ie}});var q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return q},set:function(ie){q=!!ie}});var F=0;Object.defineProperty(this,"posX",{get:function(){return F},set:function(ie){isNaN(ie)||(F=ie)}});var D=0;Object.defineProperty(this,"posY",{get:function(){return D},set:function(ie){isNaN(ie)||(D=ie)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ie){var Te;typeof ie=="number"?Te=[ie,ie,ie,ie]:((Te=new Array(4))[0]=ie[0],Te[1]=ie.length>=2?ie[1]:Te[0],Te[2]=ie.length>=3?ie[2]:Te[0],Te[3]=ie.length>=4?ie[3]:Te[1]),c.margin=Te}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(ie){re=ie}});var K=0;Object.defineProperty(this,"lastBreak",{get:function(){return K},set:function(ie){K=ie}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(ie){le=ie}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ie){ie instanceof u&&(c=ie)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ie){c.path=ie}});var xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return xe},set:function(ie){xe=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var Te;Te=d(ie),this.ctx.fillStyle=Te.style,this.ctx.isFillTransparent=Te.a===0,this.ctx.fillOpacity=Te.a,this.pdf.setFillColor(Te.r,Te.g,Te.b,{a:Te.a}),this.pdf.setTextColor(Te.r,Te.g,Te.b,{a:Te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var Te=d(ie);this.ctx.strokeStyle=Te.style,this.ctx.isStrokeTransparent=Te.a===0,this.ctx.strokeOpacity=Te.a,Te.a===0?this.pdf.setDrawColor(255,255,255):(Te.a,this.pdf.setDrawColor(Te.r,Te.g,Te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var X=null,Ie=null,Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(ie){X=null,Ie=null,Re=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var Te;if(this.ctx.font=ie,(Te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ie))!==null){var Me=Te[1];Te[2];var tt=Te[3],$e=Te[4];Te[5];var De=Te[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(nt==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var qe=function(yt){var Or,qt,Jt=[],cr=yt.trim();if(cr==="")return v3;if(cr in mJ)return[mJ[cr]];for(;cr!=="";){switch(qt=null,Or=(cr=yJ(cr)).charAt(0)){case'"':case"'":qt=DPt(cr.substring(1),Or);break;default:qt=jPt(cr)}if(qt===null||(Jt.push(qt[0]),(cr=yJ(qt[1]))!==""&&cr.charAt(0)!==","))return v3;cr=cr.replace(/^,/,"")}return Jt}(De);if(this.fontFaces){var Ue=function(yt,Or){var qt=yt.getFontList(),Jt=JSON.stringify(qt);if(X===null||Ie!==Jt){var cr=function(un){var Ut=[];return Object.keys(un).forEach(function(Xr){un[Xr].forEach(function(Kt){var ct=null;switch(Kt){case"bold":ct={family:Xr,weight:"bold"};break;case"italic":ct={family:Xr,style:"italic"};break;case"bolditalic":ct={family:Xr,weight:"bold",style:"italic"};break;case"":case"normal":ct={family:Xr}}ct!==null&&(ct.ref={name:Xr,style:Kt},Ut.push(ct))})}),Ut}(qt);X=function(un){for(var Ut={},Xr=0;Xr<un.length;++Xr){var Kt=y3(un[Xr]),ct=Kt.family,Vt=Kt.stretch,st=Kt.style,dt=Kt.weight;Ut[ct]=Ut[ct]||{},Ut[ct][Vt]=Ut[ct][Vt]||{},Ut[ct][Vt][st]=Ut[ct][Vt][st]||{},Ut[ct][Vt][st][dt]=Kt}return Ut}(cr.concat(Or)),Ie=Jt}return X}(this.pdf,this.fontFaces),Qe=qe.map(function(yt){return{family:yt,stretch:"normal",weight:tt,style:Me}}),Ge=function(yt,Or,qt){for(var Jt=(qt=qt||{}).defaultFontFamily||"times",cr=Object.assign({},MPt,qt.genericFontFamilies||{}),un=null,Ut=null,Xr=0;Xr<Or.length;++Xr)if(cr[(un=y3(Or[Xr])).family]&&(un.family=cr[un.family]),yt.hasOwnProperty(un.family)){Ut=yt[un.family];break}if(!(Ut=Ut||yt[Jt]))throw new Error("Could not find a font-family for the rule '"+gJ(un)+"' and default family '"+Jt+"'.");if(Ut=function(Kt,ct){if(ct[Kt])return ct[Kt];var Vt=fj[Kt],st=Vt<=fj.normal?-1:1,dt=pJ(ct,pve,Vt,st);if(!dt)throw new Error("Could not find a matching font-stretch value for "+Kt);return dt}(un.stretch,Ut),Ut=function(Kt,ct){if(ct[Kt])return ct[Kt];for(var Vt=hve[Kt],st=0;st<Vt.length;++st)if(ct[Vt[st]])return ct[Vt[st]];throw new Error("Could not find a matching font-style for "+Kt)}(un.style,Ut),!(Ut=function(Kt,ct){if(ct[Kt])return ct[Kt];if(Kt===400&&ct[500])return ct[500];if(Kt===500&&ct[400])return ct[400];var Vt=LPt[Kt],st=pJ(ct,mve,Vt,Kt<400?-1:1);if(!st)throw new Error("Could not find a matching font-weight for value "+Kt);return st}(un.weight,Ut)))throw new Error("Failed to resolve a font for the rule '"+gJ(un)+"'.");return Ut}(Ue,Qe);this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Fe="";(tt==="bold"||parseInt(tt,10)>=700||Me==="bold")&&(Fe="bold"),Me==="italic"&&(Fe+="italic"),Fe.length===0&&(Fe="normal");for(var at="",Ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ft=0;ft<qe.length;ft++){if(this.pdf.internal.getFont(qe[ft],Fe,{noFallback:!0,disableWarning:!0})!==void 0){at=qe[ft];break}if(Fe==="bolditalic"&&this.pdf.internal.getFont(qe[ft],"bold",{noFallback:!0,disableWarning:!0})!==void 0)at=qe[ft],Fe="bold";else if(this.pdf.internal.getFont(qe[ft],"normal",{noFallback:!0,disableWarning:!0})!==void 0){at=qe[ft],Fe="normal";break}}if(at===""){for(var pt=0;pt<qe.length;pt++)if(Ze[qe[pt]]){at=Ze[qe[pt]];break}}at=at===""?"Times":at,this.pdf.setFont(at,Fe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};f.prototype.setLineDash=function(I){this.lineDash=I},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){x.call(this,"fill",!1)},f.prototype.stroke=function(){x.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(I,z){if(isNaN(I)||isNaN(z))throw vn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new s(I,z));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new s(I,z)},f.prototype.closePath=function(){var I=new s(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&sn(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){I=new s(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(I.x,I.y)},f.prototype.lineTo=function(I,z){if(isNaN(I)||isNaN(z))throw vn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new s(I,z));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new s(H.x,H.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},f.prototype.quadraticCurveTo=function(I,z,H,q){if(isNaN(H)||isNaN(q)||isNaN(I)||isNaN(z))throw vn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var F=this.ctx.transform.applyToPoint(new s(H,q)),D=this.ctx.transform.applyToPoint(new s(I,z));this.path.push({type:"qct",x1:D.x,y1:D.y,x:F.x,y:F.y}),this.ctx.lastPoint=new s(F.x,F.y)},f.prototype.bezierCurveTo=function(I,z,H,q,F,D){if(isNaN(F)||isNaN(D)||isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q))throw vn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new s(F,D)),K=this.ctx.transform.applyToPoint(new s(I,z)),le=this.ctx.transform.applyToPoint(new s(H,q));this.path.push({type:"bct",x1:K.x,y1:K.y,x2:le.x,y2:le.y,x:re.x,y:re.y}),this.ctx.lastPoint=new s(re.x,re.y)},f.prototype.arc=function(I,z,H,q,F,D){if(isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q)||isNaN(F))throw vn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(D=!!D,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new s(I,z));I=re.x,z=re.y;var K=this.ctx.transform.applyToPoint(new s(0,H)),le=this.ctx.transform.applyToPoint(new s(0,0));H=Math.sqrt(Math.pow(K.x-le.x,2)+Math.pow(K.y-le.y,2))}Math.abs(F-q)>=2*Math.PI&&(q=0,F=2*Math.PI),this.path.push({type:"arc",x:I,y:z,radius:H,startAngle:q,endAngle:F,counterclockwise:D})},f.prototype.arcTo=function(I,z,H,q,F){throw new Error("arcTo not implemented.")},f.prototype.rect=function(I,z,H,q){if(isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q))throw vn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,z),this.lineTo(I+H,z),this.lineTo(I+H,z+q),this.lineTo(I,z+q),this.lineTo(I,z),this.lineTo(I+H,z),this.lineTo(I,z)},f.prototype.fillRect=function(I,z,H,q){if(isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q))throw vn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var F={};this.lineCap!=="butt"&&(F.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(F.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,z,H,q),this.fill(),F.hasOwnProperty("lineCap")&&(this.lineCap=F.lineCap),F.hasOwnProperty("lineJoin")&&(this.lineJoin=F.lineJoin)}},f.prototype.strokeRect=function(I,z,H,q){if(isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q))throw vn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(I,z,H,q),this.stroke())},f.prototype.clearRect=function(I,z,H,q){if(isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q))throw vn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,z,H,q))},f.prototype.save=function(I){I=typeof I!="boolean"||I;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var q=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=q}},f.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(z),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(I){var z,H,q,F;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))z=0,H=0,q=0,F=0;else{var D=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(D!==null)z=parseInt(D[1]),H=parseInt(D[2]),q=parseInt(D[3]),F=1;else if((D=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)z=parseInt(D[1]),H=parseInt(D[2]),q=parseInt(D[3]),F=parseFloat(D[4]);else{if(F=1,typeof I=="string"&&I.charAt(0)!=="#"){var re=new sve(I);I=re.ok?re.toHex():"#000000"}I.length===4?(z=I.substring(1,2),z+=z,H=I.substring(2,3),H+=H,q=I.substring(3,4),q+=q):(z=I.substring(1,3),H=I.substring(3,5),q=I.substring(5,7)),z=parseInt(z,16),H=parseInt(H,16),q=parseInt(q,16)}}return{r:z,g:H,b:q,a:F,style:I}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(I,z,H,q){if(isNaN(z)||isNaN(H)||typeof I!="string")throw vn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(q=isNaN(q)?void 0:q,!h.call(this)){var F=Y(this.ctx.transform.rotation),D=this.ctx.transform.scaleX;N.call(this,{text:I,x:z,y:H,scale:D,angle:F,align:this.textAlign,maxWidth:q})}},f.prototype.strokeText=function(I,z,H,q){if(isNaN(z)||isNaN(H)||typeof I!="string")throw vn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){q=isNaN(q)?void 0:q;var F=Y(this.ctx.transform.rotation),D=this.ctx.transform.scaleX;N.call(this,{text:I,x:z,y:H,scale:D,renderingMode:"stroke",angle:F,align:this.textAlign,maxWidth:q})}},f.prototype.measureText=function(I){if(typeof I!="string")throw vn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,H=this.pdf.internal.scaleFactor,q=z.internal.getFontSize(),F=z.getStringUnitWidth(I)*q/z.internal.scaleFactor;return new function(D){var re=(D=D||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return re}}),this}({width:F*=Math.round(96*H/72*1e4)/1e4})},f.prototype.scale=function(I,z){if(isNaN(I)||isNaN(z))throw vn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new l(I,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.rotate=function(I){if(isNaN(I))throw vn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.translate=function(I,z){if(isNaN(I)||isNaN(z))throw vn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new l(1,0,0,1,I,z);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.transform=function(I,z,H,q,F,D){if(isNaN(I)||isNaN(z)||isNaN(H)||isNaN(q)||isNaN(F)||isNaN(D))throw vn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new l(I,z,H,q,F,D);this.ctx.transform=this.ctx.transform.multiply(re)},f.prototype.setTransform=function(I,z,H,q,F,D){I=isNaN(I)?1:I,z=isNaN(z)?0:z,H=isNaN(H)?0:H,q=isNaN(q)?1:q,F=isNaN(F)?0:F,D=isNaN(D)?0:D,this.ctx.transform=new l(I,z,H,q,F,D)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(I,z,H,q,F,D,re,K,le){var xe=this.pdf.getImageProperties(I),X=1,Ie=1,Re=1,ie=1;q!==void 0&&K!==void 0&&(Re=K/q,ie=le/F,X=xe.width/q*K/q,Ie=xe.height/F*le/F),D===void 0&&(D=z,re=H,z=0,H=0),q!==void 0&&K===void 0&&(K=q,le=F),q===void 0&&K===void 0&&(K=xe.width,le=xe.height);var Te=this.ctx.transform.decompose(),Me=Y(Te.rotate.shx),tt=new l,$e=(tt=(tt=(tt=tt.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new o(D-z*Re,re-H*ie,q*X,F*Ie));if(this.autoPaging){for(var De,nt=y.call(this,$e),qe=[],Ue=0;Ue<nt.length;Ue+=1)qe.indexOf(nt[Ue])===-1&&qe.push(nt[Ue]);v(qe);for(var Qe=qe[0],Ge=qe[qe.length-1],Fe=Qe;Fe<Ge+1;Fe++){this.pdf.setPage(Fe);var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=Fe===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=Fe===1?0:ft+(Fe-2)*pt;if(this.ctx.clip_path.length!==0){var Or=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(De,this.posX+this.margin[3],-yt+Ze+this.ctx.prevPageLastElemOffset),b.call(this,"fill",!0),this.path=Or}var qt=JSON.parse(JSON.stringify($e));qt=w([qt],this.posX+this.margin[3],-yt+Ze+this.ctx.prevPageLastElemOffset)[0];var Jt=(Fe>Qe||Fe<Ge)&&p.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,pt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,Me),Jt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(I,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Me)};var y=function(I,z,H){var q=[];z=z||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var F=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":q.push(Math.floor((I.y+F)/H)+1);break;case"arc":q.push(Math.floor((I.y+F-I.radius)/H)+1),q.push(Math.floor((I.y+F+I.radius)/H)+1);break;case"qct":var D=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);q.push(Math.floor((D.y+F)/H)+1),q.push(Math.floor((D.y+D.h+F)/H)+1);break;case"bct":var re=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);q.push(Math.floor((re.y+F)/H)+1),q.push(Math.floor((re.y+re.h+F)/H)+1);break;case"rect":q.push(Math.floor((I.y+F)/H)+1),q.push(Math.floor((I.y+I.h+F)/H)+1)}for(var K=0;K<q.length;K+=1)for(;this.pdf.internal.getNumberOfPages()<q[K];)g.call(this);return q},g=function(){var I=this.fillStyle,z=this.strokeStyle,H=this.font,q=this.lineCap,F=this.lineWidth,D=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=z,this.font=H,this.lineCap=q,this.lineWidth=F,this.lineJoin=D},w=function(I,z,H){for(var q=0;q<I.length;q++)switch(I[q].type){case"bct":I[q].x2+=z,I[q].y2+=H;case"qct":I[q].x1+=z,I[q].y1+=H;default:I[q].x+=z,I[q].y+=H}return I},v=function(I){return I.sort(function(z,H){return z-H})},x=function(I,z){var H=this.fillStyle,q=this.strokeStyle,F=this.lineCap,D=this.lineWidth,re=Math.abs(D*this.ctx.transform.scaleX),K=this.lineJoin;if(this.autoPaging){for(var le,xe,X=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),Re=[],ie=0;ie<Ie.length;ie++)if(Ie[ie].x!==void 0)for(var Te=y.call(this,Ie[ie]),Me=0;Me<Te.length;Me+=1)Re.indexOf(Te[Me])===-1&&Re.push(Te[Me]);for(var tt=0;tt<Re.length;tt++)for(;this.pdf.internal.getNumberOfPages()<Re[tt];)g.call(this);v(Re);for(var $e=Re[0],De=Re[Re.length-1],nt=$e;nt<De+1;nt++){this.pdf.setPage(nt),this.fillStyle=H,this.strokeStyle=q,this.lineCap=F,this.lineWidth=re,this.lineJoin=K;var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=nt===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Fe=nt===1?0:Qe+(nt-2)*Ge;if(this.ctx.clip_path.length!==0){var at=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(le,this.posX+this.margin[3],-Fe+Ue+this.ctx.prevPageLastElemOffset),b.call(this,I,!0),this.path=at}if(xe=JSON.parse(JSON.stringify(X)),this.path=w(xe,this.posX+this.margin[3],-Fe+Ue+this.ctx.prevPageLastElemOffset),z===!1||nt===0){var Ze=(nt>$e||nt<De)&&p.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Ge,null).clip().discardPath()),b.call(this,I,z),Ze&&this.pdf.restoreGraphicsState()}this.lineWidth=D}this.path=X}else this.lineWidth=re,b.call(this,I,z),this.lineWidth=D},b=function(I,z){if((I!=="stroke"||z||!m.call(this))&&(I==="stroke"||z||!h.call(this))){for(var H,q,F=[],D=this.path,re=0;re<D.length;re++){var K=D[re];switch(K.type){case"begin":F.push({begin:!0});break;case"close":F.push({close:!0});break;case"mt":F.push({start:K,deltas:[],abs:[]});break;case"lt":var le=F.length;if(D[re-1]&&!isNaN(D[re-1].x)&&(H=[K.x-D[re-1].x,K.y-D[re-1].y],le>0)){for(;le>=0;le--)if(F[le-1].close!==!0&&F[le-1].begin!==!0){F[le-1].deltas.push(H),F[le-1].abs.push(K);break}}break;case"bct":H=[K.x1-D[re-1].x,K.y1-D[re-1].y,K.x2-D[re-1].x,K.y2-D[re-1].y,K.x-D[re-1].x,K.y-D[re-1].y],F[F.length-1].deltas.push(H);break;case"qct":var xe=D[re-1].x+2/3*(K.x1-D[re-1].x),X=D[re-1].y+2/3*(K.y1-D[re-1].y),Ie=K.x+2/3*(K.x1-K.x),Re=K.y+2/3*(K.y1-K.y),ie=K.x,Te=K.y;H=[xe-D[re-1].x,X-D[re-1].y,Ie-D[re-1].x,Re-D[re-1].y,ie-D[re-1].x,Te-D[re-1].y],F[F.length-1].deltas.push(H);break;case"arc":F.push({deltas:[],abs:[],arc:!0}),Array.isArray(F[F.length-1].abs)&&F[F.length-1].abs.push(K)}}q=z?null:I==="stroke"?"stroke":"fill";for(var Me=!1,tt=0;tt<F.length;tt++)if(F[tt].arc)for(var $e=F[tt].abs,De=0;De<$e.length;De++){var nt=$e[De];nt.type==="arc"?A.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,z,!Me):V.call(this,nt.x,nt.y),Me=!0}else if(F[tt].close===!0)this.pdf.internal.out("h"),Me=!1;else if(F[tt].begin!==!0){var qe=F[tt].start.x,Ue=F[tt].start.y;B.call(this,F[tt].deltas,qe,Ue),Me=!0}q&&O.call(this,q),z&&M.call(this)}},S=function(I){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-H;case"top":return I+z-H;case"hanging":return I+z-2*H;case"middle":return I+z/2-H;default:return I}},T=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(z,H){this.colorStops.push([z,H])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(I,z,H,q,F,D,re,K,le){for(var xe=Z.call(this,H,q,F,D),X=0;X<xe.length;X++){var Ie=xe[X];X===0&&(le?P.call(this,Ie.x1+I,Ie.y1+z):V.call(this,Ie.x1+I,Ie.y1+z)),G.call(this,I,z,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}K?M.call(this):O.call(this,re)},O=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(I,z){this.pdf.internal.out(r(I)+" "+n(z)+" m")},N=function(I){var z;switch(I.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var H,q,F,D=this.pdf.getTextDimensions(I.text),re=S.call(this,I.y),K=T.call(this,re)-D.h,le=this.ctx.transform.applyToPoint(new s(I.x,re));if(this.autoPaging){var xe=this.ctx.transform.decompose(),X=new l;X=(X=(X=X.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Ie=this.ctx.transform.applyToRectangle(new o(I.x,re,D.w,D.h)),Re=X.applyToRectangle(new o(I.x,K,D.w,D.h)),ie=y.call(this,Re),Te=[],Me=0;Me<ie.length;Me+=1)Te.indexOf(ie[Me])===-1&&Te.push(ie[Me]);v(Te);for(var tt=Te[0],$e=Te[Te.length-1],De=tt;De<$e+1;De++){this.pdf.setPage(De);var nt=De===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Qe=Ue-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],Fe=Ge-this.margin[3],at=De===1?0:qe+(De-2)*Qe;if(this.ctx.clip_path.length!==0){var Ze=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(H,this.posX+this.margin[3],-1*at+nt),b.call(this,"fill",!0),this.path=Ze}var ft=w([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-at+nt+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(q*I.scale),F=this.lineWidth,this.lineWidth=F*I.scale);var pt=this.autoPaging!=="text";if(pt||ft.y+ft.h<=Ue){if(pt||ft.y>=nt&&ft.x<=Ge){var yt=pt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Ge-ft.x)[0],Or=w([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-at+nt+this.ctx.prevPageLastElemOffset)[0],qt=pt&&(De>tt||De<$e)&&p.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,Qe,null).clip().discardPath()),this.pdf.text(yt,Or.x,Or.y,{angle:I.angle,align:z,renderingMode:I.renderingMode}),qt&&this.pdf.restoreGraphicsState()}}else ft.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-ft.y);I.scale>=.01&&(this.pdf.setFontSize(q),this.lineWidth=F)}}else I.scale>=.01&&(q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(q*I.scale),F=this.lineWidth,this.lineWidth=F*I.scale),this.pdf.text(I.text,le.x+this.posX,le.y+this.posY,{angle:I.angle,align:z,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(q),this.lineWidth=F)},V=function(I,z,H,q){H=H||0,q=q||0,this.pdf.internal.out(r(I+H)+" "+n(z+q)+" l")},B=function(I,z,H){return this.pdf.lines(I,z,H,null,null)},G=function(I,z,H,q,F,D,re,K){this.pdf.internal.out([t(i(H+I)),t(a(q+z)),t(i(F+I)),t(a(D+z)),t(i(re+I)),t(a(K+z)),"c"].join(" "))},Z=function(I,z,H,q){for(var F=2*Math.PI,D=Math.PI/2;z>H;)z-=F;var re=Math.abs(H-z);re<F&&q&&(re=F-re);for(var K=[],le=q?-1:1,xe=z;re>1e-5;){var X=xe+le*Math.min(re,D);K.push(J.call(this,I,xe,X)),re-=Math.abs(X-xe),xe=X}return K},J=function(I,z,H){var q=(H-z)/2,F=I*Math.cos(q),D=I*Math.sin(q),re=F,K=-D,le=re*re+K*K,xe=le+re*F+K*D,X=4/3*(Math.sqrt(2*le*xe)-xe)/(re*D-K*F),Ie=re-X*K,Re=K+X*re,ie=Ie,Te=-Re,Me=q+z,tt=Math.cos(Me),$e=Math.sin(Me);return{x1:I*Math.cos(z),y1:I*Math.sin(z),x2:Ie*tt-Re*$e,y2:Ie*$e+Re*tt,x3:ie*tt-Te*$e,y3:ie*$e+Te*tt,x4:I*Math.cos(H),y4:I*Math.sin(H)}},Y=function(I){return 180*I/Math.PI},U=function(I,z,H,q,F,D){var re=I+.5*(H-I),K=z+.5*(q-z),le=F+.5*(H-F),xe=D+.5*(q-D),X=Math.min(I,F,re,le),Ie=Math.max(I,F,re,le),Re=Math.min(z,D,K,xe),ie=Math.max(z,D,K,xe);return new o(X,Re,Ie-X,ie-Re)},se=function(I,z,H,q,F,D,re,K){var le,xe,X,Ie,Re,ie,Te,Me,tt,$e,De,nt,qe,Ue,Qe=H-I,Ge=q-z,Fe=F-H,at=D-q,Ze=re-F,ft=K-D;for(xe=0;xe<41;xe++)tt=(Te=(X=I+(le=xe/40)*Qe)+le*((Re=H+le*Fe)-X))+le*(Re+le*(F+le*Ze-Re)-Te),$e=(Me=(Ie=z+le*Ge)+le*((ie=q+le*at)-Ie))+le*(ie+le*(D+le*ft-ie)-Me),xe==0?(De=tt,nt=$e,qe=tt,Ue=$e):(De=Math.min(De,tt),nt=Math.min(nt,$e),qe=Math.max(qe,tt),Ue=Math.max(Ue,$e));return new o(Math.round(De),Math.round(nt),Math.round(qe-De),Math.round(Ue-nt))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,z,H=(I=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:z}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})($t.API),function(e){var t=function(s){var o,l,c,u,f,d,h,m,p,y;for(l=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(f=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(f=((f=((f=((f=(f-(y=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,l.push(d+33,h+33,m+33,p+33,y+33)):l.push(122);return function(g,w){for(var v=w;v>0;v--)g.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(s){var o,l,c,u,f,d=String,h="length",m=255,p="charCodeAt",y="slice",g="replace";for(s[y](-2),s=s[y](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],u=0,f=(s+=o="uuuuu"[y](s[h]%5||5))[h];f>u;u+=5)l=52200625*(s[p](u)-33)+614125*(s[p](u+1)-33)+7225*(s[p](u+2)-33)+85*(s[p](u+3)-33)+(s[p](u+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(w,v){for(var x=v;x>0;x--)w.pop()}(c,o[h]),d.fromCharCode.apply(d,c)},n=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=ij(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,o){var l=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}($t.API),function(e){e.loadFile=function(t,r,n){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,c,u){var f=new XMLHttpRequest,d=0,h=function(m){var p=m.length,y=[],g=String.fromCharCode;for(d=0;d<p;d+=1)y.push(g(255&m.charCodeAt(d)));return y.join("")};if(f.open("GET",l,!c),f.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(f.onload=function(){f.status===200?u(h(this.responseText)):u(void 0)}),f.send(null),c&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(t,r,n)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile}($t.API),function(e){function t(){return(nr.html2canvas?Promise.resolve(nr.html2canvas):QI(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(nr.DOMPurify?Promise.resolve(nr.DOMPurify):QI(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=sn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},a=function o(l,c){for(var u=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),f=l.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||u.appendChild(o(f,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(u.width=l.width,u.height=l.height,u.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(u.value=l.value),u.addEventListener("load",function(){u.scrollTop=l.scrollTop,u.scrollLeft=l.scrollLeft},!0)),u},s=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return(u=u.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(r).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],p=m.src.find(function(y){return y.format==="truetype"});p&&c.addFont(p.url,m.ref.name,m.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),l(this.prop.container,d)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||$t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,f).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),l&&(l=l.bind(u));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:s.convert(Object.assign({},u),Promise.prototype),d=c.call(f,o,l);return s.convert(d,u.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,$t.getPageSize=function(o,l,c){if(sn(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var m,p=0,y=0;if(h.hasOwnProperty(d))p=h[d][1]/f,y=h[d][0]/f;else try{p=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",y>p&&(m=y,y=p,p=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",p>y&&(m=y,y=p,p=m)}return{width:y,height:p,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(y3):null;var c=new s(l);return l.worker?c:c.from(o).doCallback()}}($t.API),$t.API.addJS=function(e){var t,r,n=e;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(t+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){t!==void 0&&r!==void 0&&this.internal.out("/Names <</JavaScript "+t+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=n.exec(s);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(a=0;a<c;a++){var f=r.internal.newObject();u.push(f);var d=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<u.length;a++)r.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var s={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var s=n.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])}($t.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,a,s,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(f){for(var d,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},y=4;y<m;y+=2){if(y+=h,t.indexOf(f.charCodeAt(y+1))!==-1){d=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),p={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:d,numcomponents:f.charCodeAt(y+9)};break}h=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:i}}return u}}($t.API),$t.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=xPt(e,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,c=a.palette,u=a.depth;i=c&&l===1?function(A){for(var O=A.width,M=A.height,P=A.data,N=A.palette,V=A.depth,B=!1,G=[],Z=[],J=void 0,Y=!1,U=0,se=0;se<N.length;se++){var ue=SZ(N[se],4),I=ue[0],z=ue[1],H=ue[2],q=ue[3];G.push(I,z,H),q!=null&&(q===0?(U++,Z.length<1&&Z.push(se)):q<255&&(Y=!0))}if(Y||U>1){B=!0,Z=void 0;var F=O*M;J=new Uint8Array(F);for(var D=new DataView(P.buffer),re=0;re<F;re++){var K=w3(D,re,V),le=SZ(N[K],4)[3];J[re]=le}}else U===0&&(Z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:B?8:void 0,colorBytes:P,alphaBytes:J,needSMask:B,palette:G,mask:Z}}(a):l===2||l===4?function(A){for(var O=A.data,M=A.width,P=A.height,N=A.channels,V=A.depth,B=N===2?"DeviceGray":"DeviceRGB",G=N-1,Z=M*P,J=G,Y=Z*J,U=1*Z,se=Math.ceil(Y*V/8),ue=Math.ceil(U*V/8),I=new Uint8Array(se),z=new Uint8Array(ue),H=new DataView(O.buffer),q=new DataView(I.buffer),F=new DataView(z.buffer),D=!1,re=0;re<Z;re++){for(var K=re*N,le=0;le<J;le++)TJ(q,w3(H,K+le,V),re*J+le,V);var xe=w3(H,K+J,V);xe<(1<<V)-1&&(D=!0),TJ(F,xe,1*re,V)}return{colorSpace:B,colorsPerPixel:G,sMaskBitsPerComponent:D?V:void 0,colorBytes:I,alphaBytes:z,needSMask:D}}(a):function(A){var O=A.data,M=A.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?function(P){for(var N=P.length,V=new Uint8Array(2*N),B=new DataView(V.buffer,V.byteOffset,V.byteLength),G=0;G<N;G++)B.setUint16(2*G,P[G],!1);return V}(O):O,needSMask:!1}}(a);var f,d,h,m=i,p=m.colorSpace,y=m.colorsPerPixel,g=m.sMaskBitsPerComponent,w=m.colorBytes,v=m.alphaBytes,x=m.needSMask,b=m.palette,S=m.mask,T=null;return n!==$t.API.image_compression.NONE&&typeof ij=="function"?(T=function(A){var O;switch(A){case $t.API.image_compression.FAST:O=11;break;case $t.API.image_compression.MEDIUM:O=13;break;case $t.API.image_compression.SLOW:O=14;break;default:O=12}return O}(n),f=this.decode.FLATE_DECODE,d="/Predictor ".concat(T," /Colors ").concat(y," /BitsPerComponent ").concat(u," /Columns ").concat(s),e=bJ(w,Math.ceil(s*y*u/8),y,u,n),x&&(h=bJ(v,Math.ceil(s*g/8),1,g,n))):(f=void 0,d=void 0,e=w,x&&(h=v)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:e,index:t,filter:f,decodeParameters:d,transparency:S,palette:b,sMask:h,predictor:T,width:s,height:o,bitsPerComponent:u,sMaskBitsPerComponent:g,colorSpace:p}}},function(e){e.processGIF89A=function(t,r,n,i){var a=new UPt(t),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new x3(100).encode(c,100);return e.processJPEG.call(this,u,r,n,i)},e.processGIF87A=e.processGIF89A}($t.API),oc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oc.prototype.parseBGR=function(){this.pos=this.offset;var e="bit"+this.bitPP,t=this.width*this.height*4;if(t>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(t);try{this[e]()}catch(r){vn.log("bit decode error:"+r)}},oc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}r!==0&&(this.pos+=4-r)}},oc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}t!==0&&(this.pos+=4-t)}},oc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},oc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,u=n*this.width*4+4*i;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=e}},oc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&r)/r*255|0,c=(s>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},oc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},oc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=s}},oc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,i){var a=new oc(t,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new x3(100).encode(l,100);return e.processJPEG.call(this,c,r,n,i)}}($t.API),CJ.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,i){var a=new CJ(t),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new x3(100).encode(l,100);return e.processJPEG.call(this,c,r,n,i)}}($t.API),$t.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var u=n[c],f=n[c+1],d=n[c+2],h=n[c+3];a[o++]=u,a[o++]=f,a[o++]=d,s[l++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},$t.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_g=$t.API,nA=_g.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,f=t.doKerning!==!1,d=0,h=e.length,m=0,p=o[0]||l,y=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/a)||0)/1e3):(d=f&&sn(c[n])==="object"&&!isNaN(parseInt(c[n][m],10))?c[n][m]/u:0,y.push((o[n]||p)/l+d)),m=n;return y},vJ=_g.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return _g.processArabic&&(e=_g.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:nA.apply(this,arguments).reduce(function(a,s){return a+s},0)},wJ=function(e,t,r,n){for(var i=[],a=0,s=e.length,o=0;a!==s&&o+t[a]<r;)o+=t[a],a++;i.push(e.slice(0,a));var l=a;for(o=0;a!==s;)o+t[a]>n&&(i.push(e.slice(l,a)),o=0,l=a),o+=t[a],a++;return l!==a&&i.push(e.slice(l,a)),i},xJ=function(e,t,r){r||(r={});var n,i,a,s,o,l,c,u=[],f=[u],d=r.textIndent||0,h=0,m=0,p=e.split(" "),y=nA.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var g=Array(l).join(" "),w=[];p.map(function(x){(x=x.split(/\s*\n/)).length>1?w=w.concat(x.map(function(b,S){return(S&&b.length?`
`:"")+b})):w.push(x[0])}),p=w,l=vJ.apply(this,[g,r])}for(a=0,s=p.length;a<s;a++){var v=0;if(n=p[a],l&&n[0]==`
`&&(n=n.substr(1),v=1),d+h+(m=(i=nA.apply(this,[n,r])).reduce(function(x,b){return x+b},0))>t||v){if(m>t){for(o=wJ.apply(this,[n,i,t-(d+h),t]),u.push(o.shift()),u=[o.pop()];o.length;)f.push([o.shift()]);m=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(x,b){return x+b},0)}else u=[n];f.push(u),d=m+l,h=y}else u.push(n),d+=h+m,h=y}return c=l?function(x,b){return(b?g:"")+x.join(" ")}:function(x){return x.join(" ")},f.map(c)},_g.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle),d="Unicode";return f.metadata[d]?{widths:f.metadata[d].widths||{0:1},kerning:f.metadata[d].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(xJ.apply(this,[n[o],s,a]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=t[a],i[t[a]]=r[a];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=e.__fontmetrics__.compress=function(d){var h,m,p,y,g=["{"];for(var w in d){if(h=d[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=s(w).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(p=s(h).slice(3),y="-"):(p=s(h).slice(2),y=""),p=y+p.slice(0,-1)+i[p.slice(-1)];else{if(sn(h)!=="object")throw new Error("Don't know what to do with value type "+sn(h)+".");p=o(h)}g.push(m+p)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,y,g={},w=1,v=g,x=[],b="",S="",T=d.length-1,A=1;A<T;A+=1)(y=d[A])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(x.push([v,p]),v={},p=void 0):y=="}"?((m=x.pop())[0][m[1]]=v,p=void 0,v=m[0]):y=="-"?w=-1:p===void 0?n.hasOwnProperty(y)?(b+=n[y],p=parseInt(b,16)*w,w=1,b=""):b+=y:n.hasOwnProperty(y)?(S+=n[y],v[p]=parseInt(S,16)*w,w=1,p=void 0,S=""):S+=y;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(d){var h=d.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=u.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}($t.API),function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(QA(o)),s.metadata=e.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}($t),$t.API.addSvgAsImage=function(e,t,r,n,i,a,s,o){if(isNaN(t)||isNaN(r))throw vn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw vn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(nr.canvg?Promise.resolve(nr.canvg):QI(()=>import("./index.es-vd-tnwg-.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load canvg: "+d))}).then(function(d){return d.default?d.default:d}).then(function(d){return d.fromString(c,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(d){return d.render(u)}).then(function(){f.addImage(l.toDataURL("image/jpeg",1),t,r,n,i,s,o)})},$t.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},$t.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,f=0;function d(m,p){var y,g=!1;for(y=0;y<m.length;y+=1)m[y]===p&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=o.length;for(f=0;f<h;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(sn(e)==="object"){for(i in e)if(a=e[i],d(o,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&d(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(c=0;c<a.length;c+=1)if(n=!0,a[c].length===1&&typeof a[c][0]=="number")l.push(String(a[c]-1));else if(a[c].length>1){for(u=0;u<a[c].length;u+=1)typeof a[c][u]!="number"&&(n=!1);n===!0&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},$t.API.addMetadata=function(e,t){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:e,namespaceUri:t??"http://jspdf.default.namespaceuri/",rawXml:typeof t=="boolean"&&t},this.internal.events.subscribe("putCatalog",VPt),this.internal.events.subscribe("postPutResources",zPt)),this},function(e){var t=e.API,r=t.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],f=0,d=a.length;f<d;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(a){var s,o,l,c,u,f,d;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,d=(o=Object.keys(a).sort(function(h,m){return h-m})).length;f<d;f++)s=o[f],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(c=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,d=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",m=0;m<d.length;m++)h+=String.fromCharCode(d[m]);var p=c();u({data:h,addLength1:!0,objectId:p}),l("endobj");var y=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var g=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Lg(o.fontName)),l("/FontFile2 "+p+" 0 R"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var w=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Lg(o.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+e.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+Lg(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,d="",h=0;h<f.length;h++)d+=String.fromCharCode(f[h]);var m=c();u({data:d,addLength1:!0,objectId:m}),l("endobj");var p=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:p}),l("endobj");var y=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Lg(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var g=0;g<o.metadata.hmtx.widths.length;g++)o.metadata.hmtx.widths[g]=parseInt(o.metadata.hmtx.widths[g]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Lg(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,c=a.y,u=a.options||{},f=a.mutex||{},d=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,y="",g=0,w="",v=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:f};for(w=o,p=h,Array.isArray(o)&&(w=o[0]),g=0;g<w.length;g+=1)m[p].metadata.hasOwnProperty("cmap")&&(s=m[p].metadata.cmap.unicode.codeMap[w[g].charCodeAt(0)]),s||w[g].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?y+=w[g]:y+="";var x="";return parseInt(p.slice(1))<14||v==="WinAnsiEncoding"?x=d(y,p).split("").map(function(b){return b.charCodeAt(0).toString(16)}).join(""):v==="Identity-H"&&(x=r(y,m[p])),f.isHex=!0,{text:x,x:l,y:c,options:u,mutex:f}};t.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(i(Object.assign({},l,{text:s[c]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}($t),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}($t.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,a,s,o,l,c,u,f=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,v=0;this.__bidiEngine__={};var x=function(P){var N=P.charCodeAt(),V=N>>8,B=p[V];return B!==void 0?f[256*B+(255&N)]:V===252||V===253?"AL":g.test(V)?"L":V===8?"R":"N"},b=function(P){for(var N,V=0;V<P.length;V++){if((N=x(P.charAt(V)))==="L")return!1;if(N==="R")return!0}return!1},S=function(P,N,V,B){var G,Z,J,Y,U=N[B];switch(U){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(U="AN");break;case"AL":w=!0,U="R";break;case"WS":case"BN":U="N";break;case"CS":B<1||B+1>=N.length||(G=V[B-1])!=="EN"&&G!=="AN"||(Z=N[B+1])!=="EN"&&Z!=="AN"?U="N":w&&(Z="AN"),U=Z===G?Z:"N";break;case"ES":U=(G=B>0?V[B-1]:"B")==="EN"&&B+1<N.length&&N[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&V[B-1]==="EN"){U="EN";break}if(w){U="N";break}for(J=B+1,Y=N.length;J<Y&&N[J]==="ET";)J++;U=J<Y&&N[J]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(Y=N.length,J=B+1;J<Y&&N[J]==="NSM";)J++;if(J<Y){var se=P[B],ue=se>=1425&&se<=2303||se===64286;if(G=N[J],ue&&(G==="R"||G==="AL")){U="R";break}}}U=B<1||(G=N[B-1])==="B"?"N":V[B-1];break;case"B":w=!1,i=!0,U=v;break;case"S":a=!0,U="N"}return U},T=function(P,N,V){var B=P.split("");return V&&A(B,V,{hiLevel:v}),B.reverse(),N&&N.reverse(),B.join("")},A=function(P,N,V){var B,G,Z,J,Y,U=-1,se=P.length,ue=0,I=[],z=v?h:d,H=[];for(w=!1,i=!1,a=!1,G=0;G<se;G++)H[G]=x(P[G]);for(Z=0;Z<se;Z++){if(Y=ue,I[Z]=S(P,H,I,Z),B=240&(ue=z[Y][m[I[Z]]]),ue&=15,N[Z]=J=z[ue][5],B>0)if(B===16){for(G=U;G<Z;G++)N[G]=1;U=-1}else U=-1;if(z[ue][6])U===-1&&(U=Z);else if(U>-1){for(G=U;G<Z;G++)N[G]=J;U=-1}H[Z]==="B"&&(N[Z]=0),V.hiLevel|=J}a&&function(q,F,D){for(var re=0;re<D;re++)if(q[re]==="S"){F[re]=v;for(var K=re-1;K>=0&&q[K]==="WS";K--)F[K]=v}}(H,N,se)},O=function(P,N,V,B,G){if(!(G.hiLevel<P)){if(P===1&&v===1&&!i)return N.reverse(),void(V&&V.reverse());for(var Z,J,Y,U,se=N.length,ue=0;ue<se;){if(B[ue]>=P){for(Y=ue+1;Y<se&&B[Y]>=P;)Y++;for(U=ue,J=Y-1;U<J;U++,J--)Z=N[U],N[U]=N[J],N[J]=Z,V&&(Z=V[U],V[U]=V[J],V[J]=Z);ue=Y}ue++}}},M=function(P,N,V){var B=P.split(""),G={hiLevel:v};return V||(V=[]),A(B,V,G),function(Z,J,Y){if(Y.hiLevel!==0&&u)for(var U,se=0;se<Z.length;se++)J[se]===1&&(U=y.indexOf(Z[se]))>=0&&(Z[se]=y[U+1])}(B,V,G),O(2,B,N,V,G),O(1,B,N,V,G),B.join("")};return this.__bidiEngine__.doBidiReorder=function(P,N,V){if(function(G,Z){if(Z)for(var J=0;J<G.length;J++)Z[J]=J;o===void 0&&(o=b(G)),c===void 0&&(c=b(G))}(P,N),s||!l||c)if(s&&l&&o^c)v=o?1:0,P=T(P,N,V);else if(!s&&l&&c)v=o?1:0,P=M(P,N,V),P=T(P,N);else if(!s||o||l||c){if(s&&!l&&o^c)P=T(P,N),o?(v=0,P=M(P,N,V)):(v=1,P=M(P,N,V),P=T(P,N));else if(s&&o&&!l&&c)v=1,P=M(P,N,V),P=T(P,N);else if(!s&&!l&&o^c){var B=u;o?(v=1,P=M(P,N,V),v=0,u=!1,P=M(P,N,V),u=B):(v=0,P=M(P,N,V),P=T(P,N),v=1,u=!1,P=M(P,N,V),u=B,P=T(P,N))}}else v=0,P=M(P,N,V);else v=o?1:0,P=M(P,N,V);return P},this.__bidiEngine__.setOptions=function(P){P&&(s=P.isInputVisual,l=P.isOutputVisual,o=P.isInputRtl,c=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([r.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([r.doBidiReorder(i[o])]);n.text=s}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}($t),$t.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new op(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new iNt(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new WPt(this.contents),this.head=new GPt(this),this.name=new ZPt(this),this.cmap=new yve(this),this.toUnicode={},this.hhea=new qPt(this),this.maxp=new JPt(this),this.hmtx=new QPt(this),this.post=new YPt(this),this.os2=new KPt(this),this.loca=new nNt(this),this.glyf=new eNt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)t=l[s],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,a,s,o;for(s=0,a=0,o=(t=""+t).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=t.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return s*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Xc,op=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,a,s,o,l;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*s+256*o+l},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)r=t[n],a.push(this.writeByte(r));return a},e}(),WPt=function(){var e;function t(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,a,s,o,l,c,u,f,d,h,m,p;for(p in h=Object.keys(r).length,l=Math.log(2),f=16*Math.floor(Math.log(h)/l),s=Math.floor(f/l),u=16*h-f,(i=new op).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(u),a=16*h,c=i.pos+a,o=null,m=[],r)for(d=r[p],i.writeString(p),i.writeInt(e(d)),i.writeInt(c),i.writeInt(d.length),m=m.concat(d),p==="head"&&(o=c),c+=d.length;c%4;)m.push(0),c++;return i.write(m),n=2981146554-e(i.data),i.pos=o+8,i.writeUInt32(n),i.data},e=function(r){var n,i,a,s;for(r=vve.call(r);r.length%4;)r.push(0);for(a=new op(r),i=0,n=0,s=r.length;n<s;n=n+=4)i+=a.readUInt32();return 4294967295&i},t}(),HPt={}.hasOwnProperty,Ju=function(e,t){for(var r in t)HPt.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Xc=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var GPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new op).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),OJ=function(){function e(t,r){var n,i,a,s,o,l,c,u,f,d,h,m,p,y,g,w,v;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(h=t.readUInt16(),d=h/2,t.pos+=6,a=function(){var x,b;for(b=[],l=x=0;0<=d?x<d:x>d;l=0<=d?++x:--x)b.push(t.readUInt16());return b}(),t.pos+=2,p=function(){var x,b;for(b=[],l=x=0;0<=d?x<d:x>d;l=0<=d?++x:--x)b.push(t.readUInt16());return b}(),c=function(){var x,b;for(b=[],l=x=0;0<=d?x<d:x>d;l=0<=d?++x:--x)b.push(t.readUInt16());return b}(),u=function(){var x,b;for(b=[],l=x=0;0<=d?x<d:x>d;l=0<=d?++x:--x)b.push(t.readUInt16());return b}(),i=(this.length-t.pos+this.offset)/2,o=function(){var x,b;for(b=[],l=x=0;0<=i?x<i:x>i;l=0<=i?++x:--x)b.push(t.readUInt16());return b}(),l=g=0,v=a.length;g<v;l=++g)for(y=a[l],n=w=m=p[l];m<=y?w<=y:w>=y;n=m<=y?++w:--w)u[l]===0?s=n+c[l]:(s=o[u[l]/2+(n-m)-(d-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}t.pos=f}return e.encode=function(t,r){var n,i,a,s,o,l,c,u,f,d,h,m,p,y,g,w,v,x,b,S,T,A,O,M,P,N,V,B,G,Z,J,Y,U,se,ue,I,z,H,q,F,D,re,K,le,xe,X;switch(B=new op,s=Object.keys(t).sort(function(Ie,Re){return Ie-Re}),r){case"macroman":for(p=0,y=function(){var Ie=[];for(m=0;m<256;++m)Ie.push(0);return Ie}(),w={0:0},a={},G=0,U=s.length;G<U;G++)w[K=t[i=s[G]]]==null&&(w[K]=++p),a[i]={old:t[i],new:w[t[i]]},y[i]=w[t[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(y),{charMap:a,subtable:B.data,maxGlyphID:p+1};case"unicode":for(N=[],f=[],v=0,w={},n={},g=c=null,Z=0,se=s.length;Z<se;Z++)w[b=t[i=s[Z]]]==null&&(w[b]=++v),n[i]={old:b,new:w[b]},o=w[b]-i,g!=null&&o===c||(g&&f.push(g),N.push(i),c=o),g=i;for(g&&f.push(g),f.push(65535),N.push(65535),M=2*(O=N.length),A=2*Math.pow(Math.log(O)/Math.LN2,2),d=Math.log(A/2)/Math.LN2,T=2*O-A,l=[],S=[],h=[],m=J=0,ue=N.length;J<ue;m=++J){if(P=N[m],u=f[m],P===65535){l.push(0),S.push(0);break}if(P-(V=n[P].new)>=32768)for(l.push(0),S.push(2*(h.length+O-m)),i=Y=P;P<=u?Y<=u:Y>=u;i=P<=u?++Y:--Y)h.push(n[i].new);else l.push(V-P),S.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*O+2*h.length),B.writeUInt16(0),B.writeUInt16(M),B.writeUInt16(A),B.writeUInt16(d),B.writeUInt16(T),D=0,I=f.length;D<I;D++)i=f[D],B.writeUInt16(i);for(B.writeUInt16(0),re=0,z=N.length;re<z;re++)i=N[re],B.writeUInt16(i);for(le=0,H=l.length;le<H;le++)o=l[le],B.writeUInt16(o);for(xe=0,q=S.length;xe<q;xe++)x=S[xe],B.writeUInt16(x);for(X=0,F=h.length;X<F;X++)p=h[X],B.writeUInt16(p);return{charMap:n,subtable:B.data,maxGlyphID:v+1}}},e}(),yve=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new OJ(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=OJ.encode(t,r),(i=new op).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),qPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),KPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),YPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(t.readUInt32());return l}).call(this)}},e}(),XPt=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ZPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,a,s,o,l,c,u,f,d;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(l={},a=u=0,f=n.length;u<f;a=++u)i=n[a],t.pos=i.offset,c=t.readString(i.length),s=new XPt(c,i),l[d=i.nameID]==null&&(l[d]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},e}(),JPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),QPt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,a,s,o,l;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,u;for(u=[],r=c=0;0<=i?c<i:c>i;r=0<=i?++c:--c)u.push(t.readInt16());return u}(),this.widths=(function(){var c,u,f,d;for(d=[],c=0,u=(f=this.metrics).length;c<u;c++)a=f[c],d.push(a.advance);return d}).call(this),n=this.widths[this.widths.length-1],l=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)l.push(this.widths.push(n));return l},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),vve=[].slice,eNt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,a,s,o,l,c,u,f;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,s=(o=new op(r.read(i))).readShort(),c=o.readShort(),f=o.readShort(),l=o.readShort(),u=o.readShort(),this.cache[t]=s===-1?new rNt(o,c,f,l,u):new tNt(o,s,c,f,l,u),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,a,s,o,l;for(s=[],a=[],o=0,l=r.length;o<l;o++)i=t[r[o]],a.push(s.length),i&&(s=s.concat(i.encode(n)));return a.push(s.length),{table:s,offsets:a}},e}(),tNt=function(){function e(t,r,n,i,a,s){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),rNt=function(){function e(t,r,n,i,a){var s,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new op(vve.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),nNt=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ju(e,Xc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<n.length;++s)if(n[s]=i,a<r.length&&r[a]==s){++a,n[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},e}(),iNt=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,a,s,o,l;for(i={},s=0,o=t.length;s<o;s++)i[a=t[s]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],i[a]=n;return i},e.prototype.encode=function(t,r){var n,i,a,s,o,l,c,u,f,d,h,m,p,y,g;for(i in n=yve.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),h={0:0},g=n.charMap)h[(l=g[i]).old]=l.new;for(m in d=n.maxGlyphID,s)m in h||(h[m]=d++);return u=function(w){var v,x;for(v in x={},w)x[w[v]]=v;return x}(h),f=Object.keys(u).sort(function(w,v){return w-v}),p=function(){var w,v,x;for(x=[],w=0,v=f.length;w<v;w++)o=f[w],x.push(u[o]);return x}(),a=this.font.glyf.encode(s,p,h),c=this.font.loca.encode(a.offsets,p),y={cmap:this.font.cmap.raw(),glyf:a.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();$t.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,a,s;if(Array.isArray(r))return"["+function(){var o,l,c;for(c=[],o=0,l=r.length;o<l;o++)n=r[o],c.push(t.convert(n));return c}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)s=r[i],a.push("/"+i+" "+t.convert(s));return a.push(">>"),a.join(`
`)}return""+r},t}();function wve(e,t,r,n,i){n=n||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,c=o*l,u=/\r\n|\r|\n/g,f="",d=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(u):e,d=f.length||1),r+=o*(2-a),n.valign==="middle"?r-=d/2*c:n.valign==="bottom"&&(r-=d*c),n.halign==="center"||n.halign==="right"){var h=o;if(n.halign==="center"&&(h*=.5),f&&d>=1){for(var m=0;m<f.length;m++)i.text(f[m],t-i.getStringUnitWidth(f[m])*h,r),r+=c;return i}t-=i.getStringUnitWidth(e)*h}return n.halign==="justify"?i.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(e,t,r),i}var PJ={},zy=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:PJ=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,i,a;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&c.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=e.unifyColor(t.lineColor),u&&(a=this.jsPDFDocument).setDrawColor.apply(a,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,i,a){return this.jsPDFDocument.rect(t,r,n,i,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return PJ||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),dj=function(e,t){return dj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},dj(e,t)};function xve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dj(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var bve=function(e){xve(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function aNt(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function sNt(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function q5(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],i=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function _ve(e,t,r,n){var i=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:a});var s=Sve(i,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,s)}function Sve(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function wP(e,t){var r,n,i,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Eve(e,t){var r=wP(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function oNt(e,t,r,n,i){var a={},s=1.3333333333333333,o=b3(t,function(v){return i.getComputedStyle(v).backgroundColor});o!=null&&(a.fillColor=o);var l=b3(t,function(v){return i.getComputedStyle(v).color});l!=null&&(a.textColor=l);var c=cNt(n,r);c&&(a.cellPadding=c);var u="borderTopColor",f=s*r,d=n.borderTopWidth;if(n.borderBottomWidth===d&&n.borderRightWidth===d&&n.borderLeftWidth===d){var h=(parseFloat(d)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?u="borderRightColor":a.lineWidth.bottom?u="borderBottomColor":a.lineWidth.left&&(u="borderLeftColor"));var m=b3(t,function(v){return i.getComputedStyle(v)[u]});m!=null&&(a.lineColor=m);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(a.fontSize=y/s);var g=lNt(n);g&&(a.fontStyle=g);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(a.font=w),a}function lNt(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function b3(e,t){var r=Ave(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Ave(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Ave(e.parentElement,t):r}function cNt(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(o){return parseInt(o||"0")/n}),s=wP(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function Tve(e,t,r,n,i){var a,s;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),u=[],f=[],d=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:u,body:f,foot:d};for(var h=0;h<o.rows.length;h++){var m=o.rows[h],p=(s=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=uNt(l,c,r,m,n,i);y&&(p==="thead"?u.push(y):p==="tfoot"?d.push(y):f.push(y))}return{head:u,body:f,foot:d}}function uNt(e,t,r,n,i,a){for(var s=new bve(n),o=0;o<n.cells.length;o++){var l=n.cells[o],c=r.getComputedStyle(l);if(i||c.display!=="none"){var u=void 0;a&&(u=oNt(e,l,t,c,r)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:fNt(l)})}}var f=r.getComputedStyle(n);if(s.length>0&&(i||f.display!=="none"))return s}function fNt(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function dNt(e,t,r){for(var n=0,i=[e,t,r];n<i.length;n++){var a=i[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Ff(e,t,r,n,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function kve(e,t){var r=new zy(e),n=r.getDocumentOptions(),i=r.getGlobalOptions();dNt(i,n,t);var a=Ff({},i,n,t),s;typeof window<"u"&&(s=window);var o=hNt(i,n,t),l=pNt(i,n,t),c=mNt(r,a),u=yNt(r,a,s);return{id:t.tableId,content:u,hooks:l,styles:o,settings:c}}function hNt(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var c=e[l],u=t[l],f=r[l];n.columnStyles=Ff({},c,u,f)}else{var d=[e,t,r],h=d.map(function(m){return m[l]||{}});n[l]=Ff({},h[0],h[1],h[2])}},a=0,s=Object.keys(n);a<s.length;a++){var o=s[a];i(o)}return n}function pNt(e,t,r){for(var n=[e,t,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=n;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function mNt(e,t){var r,n,i,a,s,o,l,c,u,f,d,h,m=wP(t.margin,40/e.scaleFactor()),p=(r=gNt(e,t.startY))!==null&&r!==void 0?r:m.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var g;t.showHead===!0?g="everyPage":t.showHead===!1?g="never":g=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var w=(a=t.useCss)!==null&&a!==void 0?a:!1,v=t.theme||(w?"plain":"striped"),x=!!t.horizontalPageBreak,b=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:v,startY:p,margin:m,pageBreak:(l=t.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:g,showFoot:y,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(d=t.tableLineColor)!==null&&d!==void 0?d:200,horizontalPageBreak:x,horizontalPageBreakRepeat:b,horizontalPageBreakBehaviour:(h=t.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function gNt(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),i=e.pageNumber(),a=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;a=s===i}return typeof t=="number"?t:(t==null||t===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function yNt(e,t,r){var n=t.head||[],i=t.body||[],a=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var o=Tve(e,t.html,r,s,t.useCss)||{};n=o.head||n,i=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=t.columns||vNt(n,i,a);return{columns:l,head:n,body:i,foot:a}}function vNt(e,t,r){var n=e[0]||t[0]||r[0]||[],i=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var c=void 0;Array.isArray(n)?c=i.length:c=a+(l>0?"_".concat(l):"");var u={dataKey:c};i.push(u)}}),i}var hj=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),wNt=function(e){xve(t,e);function t(r,n,i,a,s,o){var l=e.call(this,r,n,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return t}(hj),xNt=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,i,a,s){for(var o=0,l=r;o<l.length;o++){var c=l[o],u=new wNt(t,this,n,i,a,s),f=c(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var a=i[n];a(new hj(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var a=i[n];a(new hj(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Cve=function(){function e(t,r,n,i,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof bve&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,i){var a;return Math.max(n,((a=r.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(i,a){var s=n.cells[a.index];if(!s)return 0;var o=r.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=l+o;return c>i?c:i},0)},e}(),Ove=function(){function e(t,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*r,a=n*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=wP(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),bNt=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,i=t.allRows();n<i.length;n++){var a=i[n],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function _Nt(e,t){SNt(e,t);var r=[],n=0;t.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(t);s?a.width=s:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var i=t.getWidth(e.pageSize().width)-n;i&&(i=pj(r,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=pj(r,i,function(a){return a.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),ANt(t),TNt(t,e),ENt(t)}function SNt(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,i=Eve(e,t);t.allRows().forEach(function(a){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(e,u,c,a,l,null);var f=c.padding("horizontal");c.contentWidth=q5(c.text,c.styles,e)+f;var d=q5(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=d+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>i?(c.minWidth=i,c.wrappedWidth=i):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var h=10/r;c.minWidth=c.styles.minCellWidth||h,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(a){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c&&c.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,c.wrappedWidth),l.minWidth=Math.max(l.minWidth,c.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,c.minReadableWidth);else{var u=t.styles.columnStyles[l.dataKey]||t.styles.columnStyles[l.index]||{},f=u.cellWidth||u.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}c&&(c.colSpan>1&&!l.minWidth&&(l.minWidth=c.minWidth),c.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=c.minWidth))}})}function pj(e,t,r){for(var n=t,i=e.reduce(function(h,m){return h+m.wrappedWidth},0),a=0;a<e.length;a++){var s=e[a],o=s.wrappedWidth/i,l=n*o,c=s.width+l,u=r(s),f=c<u?u:c;t-=f-s.width,s.width=f}if(t=Math.round(t*1e10)/1e10,t){var d=e.filter(function(h){return t<0?h.width>r(h):!0});d.length&&(t=pj(d,t,r))}return t}function ENt(e){for(var t={},r=1,n=e.allRows(),i=0;i<n.length;i++)for(var a=n[i],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=t[l.index];if(r>1)r--,delete a.cells[l.index];else if(c)c.cell.height+=a.height,r=c.cell.colSpan,delete a.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=a.cells[l.index];if(!u)continue;if(u.height=a.height,u.rowSpan>1){var f=n.length-i,d=u.rowSpan>f?f:u.rowSpan;t[l.index]={cell:u,left:d,row:a}}}}}function ANt(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],i=null,a=0,s=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if(s-=1,s>1&&e.columns[o+1])a+=l.width,delete n.cells[l.index];else if(i){var c=i;delete n.cells[l.index],i=null,c.width=l.width+a}else{var c=n.cells[l.index];if(!c)continue;if(s=c.colSpan,a=0,c.colSpan>1){i=c,a+=l.width;continue}c.width=l.width+a}}}function TNt(e,t){for(var r={count:0,height:0},n=0,i=e.allRows();n<i.length;n++){for(var a=i[n],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=a.cells[l.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=NJ(c.text,u,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=NJ(c.text,u,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var f=c.styles.overflow(c.text,u);typeof f=="string"?c.text=[f]:c.text=f}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var d=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<d*c.rowSpan?r={height:d,count:c.rowSpan}:r&&r.count>0&&r.height>d&&(d=r.height),d>a.height&&(a.height=d)}}r.count--}}function NJ(e,t,r,n,i){return e.map(function(a){return kNt(a,t,r,n,i)})}function kNt(e,t,r,n,i){var a=1e4*n.scaleFactor();if(t=Math.ceil(t*a)/a,t>=q5(e,r,n))return e;for(;t<q5(e+i,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function Pve(e,t){var r=new zy(e),n=CNt(t,r.scaleFactor()),i=new xNt(t,n);return _Nt(r,i),r.applyStyles(r.userStyles),i}function CNt(e,t){var r=e.content,n=PNt(r.columns);if(r.head.length===0){var i=IJ(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=IJ(n,"foot");i&&r.foot.push(i)}var a=e.settings.theme,s=e.styles;return{columns:n,head:_3("head",r.head,n,s,a,t),body:_3("body",r.body,n,s,a,t),foot:_3("foot",r.foot,n,s,a,t)}}function _3(e,t,r,n,i,a){var s={},o=t.map(function(l,c){for(var u=0,f={},d=0,h=0,m=0,p=r;m<p.length;m++){var y=p[m];if(s[y.index]==null||s[y.index].left===0)if(h===0){var g=void 0;Array.isArray(l)?g=l[y.index-d-u]:g=l[y.dataKey];var w={};typeof g=="object"&&!Array.isArray(g)&&(w=(g==null?void 0:g.styles)||{});var v=NNt(e,y,c,i,n,a,w),x=new Ove(g,v,e);f[y.dataKey]=x,f[y.index]=x,h=x.colSpan-1,s[y.index]={left:x.rowSpan-1,times:h}}else h--,d++;else s[y.index].left--,h=s[y.index].times,u++}return new Cve(l,c,e,f)});return o}function IJ(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var i=ONt(t,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function ONt(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function PNt(e){return e.map(function(t,r){var n,i;return typeof t=="object"?i=(n=t.dataKey)!==null&&n!==void 0?n:r:i=r,new bNt(i,t,r)})}function NNt(e,t,r,n,i,a,s){var o=sNt(n),l;e==="head"?l=i.headStyles:e==="body"?l=i.bodyStyles:e==="foot"&&(l=i.footStyles);var c=Ff({},o.table,o[e],i.styles,l),u=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},f=e==="body"?u:{},d=e==="body"&&r%2===0?Ff({},o.alternateRow,i.alternateRowStyles):{},h=aNt(a),m=Ff({},h,c,d,f);return Ff(m,s)}function INt(e,t,r){var n;r===void 0&&(r={});var i=Eve(e,t),a=new Map,s=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(d){var h=t.columns.find(function(m){return m.dataKey===d||m.index===d});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(t.columns[h.index]),i-=h.wrappedWidth)});for(var c=!0,u=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(a.has(u)){u++;continue}var f=t.columns[u].wrappedWidth;if(c||i>=f)c=!1,s.push(u),o.push(t.columns[u]),i-=f;else break;u++}return{colIndexes:s,columns:o,lastIndex:u-1}}function RNt(e,t){for(var r=[],n=0;n<t.columns.length;n++){var i=INt(e,t,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function Nve(e,t){var r=t.settings,n=r.startY,i=r.margin,a={x:i.left,y:n},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+i.bottom+s;if(r.pageBreak==="avoid"){var l=t.body,c=l.reduce(function(d,h){return d+h.height},0);o+=c}var u=new zy(e);(r.pageBreak==="always"||r.startY!=null&&o>u.pageSize().height)&&(Rve(u),a.y=i.top),t.callWillDrawPageHooks(u,a);var f=Ff({},a);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?LNt(u,t,f,a):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(d){return hd(u,t,d,a,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(d,h){var m=h===t.body.length-1;K5(u,t,d,m,f,a,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(d){return hd(u,t,d,a,t.columns)})),_ve(u,t,f,a),t.callEndPageHooks(u,a),t.finalY=a.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function LNt(e,t,r,n){var i=RNt(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(c,u){e.applyStyles(e.userStyles),u>0?Ux(e,t,r,n,c.columns,!0):RJ(e,t,n,c.columns),MNt(e,t,r,n,c.columns),S3(e,t,n,c.columns)});else for(var s=-1,o=i[0],l=function(){var c=s;if(o){e.applyStyles(e.userStyles);var u=o.columns;s>=0?Ux(e,t,r,n,u,!0):RJ(e,t,n,u),c=LJ(e,t,s+1,n,u),S3(e,t,n,u)}var f=c-s;i.slice(1).forEach(function(d){e.applyStyles(e.userStyles),Ux(e,t,r,n,d.columns,!0),LJ(e,t,s+1,n,d.columns,f),S3(e,t,n,d.columns)}),s=c};s<t.body.length-1;)l()}function RJ(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(a){return hd(e,t,a,r,n)})}function MNt(e,t,r,n,i){e.applyStyles(e.userStyles),t.body.forEach(function(a,s){var o=s===t.body.length-1;K5(e,t,a,o,r,n,i)})}function LJ(e,t,r,n,i,a){e.applyStyles(e.userStyles),a=a??t.body.length;var s=Math.min(r+a,t.body.length),o=-1;return t.body.slice(r,s).forEach(function(l,c){var u=r+c===t.body.length-1,f=Ive(e,t,u,n);l.canEntireRowFit(f,i)&&(hd(e,t,l,n,i),o=r+c)}),o}function S3(e,t,r,n){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(a){return hd(e,t,a,r,n)})}function DNt(e,t,r){var n=r.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),a=Math.floor((t-i)/n);return Math.max(0,a)}function jNt(e,t,r,n){var i={};e.spansMultiplePages=!0,e.height=0;for(var a=0,s=0,o=r.columns;s<o.length;s++){var l=o[s],c=e.cells[l.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new Ove(c.raw,c.styles,c.section);u=Ff(u,c),u.text=[];var f=DNt(c,t,n);c.text.length>f&&(u.text=c.text.splice(f,c.text.length));var d=n.scaleFactor(),h=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(d,h),c.contentHeight>=t&&(c.contentHeight=t,u.styles.minCellHeight-=t),c.contentHeight>e.height&&(e.height=c.contentHeight),u.contentHeight=u.getContentHeight(d,h),u.contentHeight>a&&(a=u.contentHeight),i[l.index]=u}}var m=new Cve(e.raw,-1,e.section,i,!0);m.height=a;for(var p=0,y=r.columns;p<y.length;p++){var l=y[p],u=m.cells[l.index];u&&(u.height=m.height);var c=e.cells[l.index];c&&(c.height=e.height)}return m}function $Nt(e,t,r,n){var i=e.pageSize().height,a=n.settings.margin,s=a.top+a.bottom,o=i-s;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=t.getMinimumRowHeight(n.columns,e),c=l<r;if(l>o)return console.log("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(u&&console.log("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function K5(e,t,r,n,i,a,s){var o=Ive(e,t,n,a);if(r.canEntireRowFit(o,s))hd(e,t,r,a,s);else if($Nt(e,r,o,t)){var l=jNt(r,o,t,e);hd(e,t,r,a,s),Ux(e,t,i,a,s),K5(e,t,l,n,i,a,s)}else Ux(e,t,i,a,s),K5(e,t,r,n,i,a,s)}function hd(e,t,r,n,i){n.x=t.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=r.cells[o.index];if(!l){n.x+=o.width;continue}e.applyStyles(l.styles),l.x=n.x,l.y=n.y;var c=t.callCellHooks(e,t.hooks.willDrawCell,l,r,o,n);if(c===!1){n.x+=o.width;continue}FNt(e,l,n);var u=l.getTextPos();wve(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function FNt(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=Sve(n.lineWidth,n.fillColor);i&&e.rect(t.x,r.y,t.width,t.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),BNt(e,t,r,n.lineWidth))}function BNt(e,t,r,n){var i,a,s,o;n.top&&(i=r.x,a=r.y,s=r.x+t.width,o=r.y,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,a,s,o)),n.bottom&&(i=r.x,a=r.y+t.height,s=r.x+t.width,o=r.y+t.height,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,a,s,o)),n.left&&(i=r.x,a=r.y,s=r.x,o=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,i,a,s,o)),n.right&&(i=r.x+t.width,a=r.y,s=r.x+t.width,o=r.y+t.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,i,a,s,o));function l(c,u,f,d,h){e.getDocument().setLineWidth(c),e.getDocument().line(u,f,d,h,"S")}}function Ive(e,t,r,n){var i=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-i}function Ux(e,t,r,n,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(o){return hd(e,t,o,n,i)}),t.callEndPageHooks(e,n);var s=t.settings.margin;_ve(e,t,r,n),Rve(e),t.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return hd(e,t,o,n,i)}),e.applyStyles(e.userStyles))}function Rve(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function UNt(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=kve(this,n),a=Pve(this,i);return Nve(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,i){wve(t,r,n,i,this)},e.API.autoTableSetDefaults=function(t){return zy.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){zy.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new zy(this),a=Tve(i,t,window,r,!1),s=a.head,o=a.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:l,rows:o,data:o}}}var E3;function MJ(e,t){var r=kve(e,t),n=Pve(e,r);Nve(e,n)}try{if(typeof window<"u"&&window){var DJ=window,jJ=DJ.jsPDF||((E3=DJ.jspdf)===null||E3===void 0?void 0:E3.jsPDF);jJ&&UNt(jJ)}}catch(e){console.error("Could not apply autoTable plugin",e)}const zNt=()=>{const{expenses:e,categories:t,formatCurrency:r,settings:n}=yd(),[i,a]=C.useState("all"),[s,o]=C.useState("all"),[l,c]=C.useState(null),[u,f]=C.useState(null),[d,h]=C.useState(!1),m=C.useMemo(()=>e.filter(v=>{const x=new Date(v.date),b=new Date;let S=!0;i==="month"?S=x.getMonth()===b.getMonth()&&x.getFullYear()===b.getFullYear():i==="year"?S=x.getFullYear()===b.getFullYear():i==="custom"&&(l&&u?S=x>=l&&x<=u:l?S=x>=l:u&&(S=x<=u));const T=s==="all"||v.category_name===s;return S&&T}),[e,i,s,l,u]),p=C.useMemo(()=>m.reduce((v,x)=>v+x.amount,0),[m]),y=v=>{try{const{locale:x,code:b}=n.currency;return new Intl.NumberFormat(x,{style:"currency",currency:b,currencyDisplay:"code"}).format(v).replace(/\u00a0/g," ").replace(/\u202f/g," ")}catch{return(v==null?void 0:v.toLocaleString())||"0"}},g=()=>{const v=new $t;v.setFontSize(20),v.setTextColor(40),v.text("Spend-Mind Expense Report",14,22),v.setFontSize(10),v.setTextColor(100),v.text(`Generated on: ${new Date().toLocaleDateString()}`,14,30);let x="All Time";if(i==="month")x="Current Month";else if(i==="year")x="Current Year";else if(i==="custom"){const S=l?l.toLocaleDateString():"Beginning",T=u?u.toLocaleDateString():"Present";x=`${S} to ${T}`}v.text(`Filter: ${x}`,14,35),v.text(`Category: ${s==="all"?"All Categories":s}`,14,40),v.setDrawColor(200),v.setFillColor(245,247,250),v.rect(14,45,182,15,"F"),v.setFontSize(12),v.setTextColor(40),v.text(`Total Spending in Period: ${y(p)}`,20,54);const b=m.map(S=>[new Date(S.date).toLocaleDateString(),S.description||"N/A",S.category_name,y(S.amount)]);MJ(v,{startY:65,head:[["Date","Description","Category","Amount"]],body:b,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:255,fontSize:10,fontStyle:"bold",halign:"center"},columnStyles:{3:{halign:"right"}},styles:{fontSize:9,cellPadding:3,font:"helvetica"},alternateRowStyles:{fillColor:[249,250,251]}}),v.save(`SpendMind_Report_${new Date().toISOString().split("T")[0]}.pdf`)},w=async()=>{h(!0);try{const v=new $t;v.setFontSize(20),v.setTextColor(40),v.text("Spend-Mind Expense Report",14,22),v.setFontSize(10),v.setTextColor(100),v.text(`Generated on: ${new Date().toLocaleDateString()}`,14,30);let x="All Time";if(i==="month")x="Current Month";else if(i==="year")x="Current Year";else if(i==="custom"){const A=l?l.toLocaleDateString():"Beginning",O=u?u.toLocaleDateString():"Present";x=`${A} to ${O}`}v.text(`Filter: ${x}`,14,35),v.text(`Category: ${s==="all"?"All Categories":s}`,14,40),v.setDrawColor(200),v.setFillColor(245,247,250),v.rect(14,45,182,15,"F"),v.setFontSize(12),v.setTextColor(40),v.text(`Total Spending in Period: ${y(p)}`,20,54);const b=m.map(A=>[new Date(A.date).toLocaleDateString(),A.description||"N/A",A.category_name,y(A.amount)]);MJ(v,{startY:65,head:[["Date","Description","Category","Amount"]],body:b,theme:"striped",headStyles:{fillColor:[34,197,94],textColor:255,fontSize:10,fontStyle:"bold",halign:"center"},columnStyles:{3:{halign:"right"}},styles:{fontSize:9,cellPadding:3,font:"helvetica"},alternateRowStyles:{fillColor:[249,250,251]}});const S=v.output("blob"),T=new FileReader;T.readAsDataURL(S),T.onloadend=async()=>{const A=T.result.split(",")[1],{data:{user:O}}=await Yn.auth.getUser();if(!O||!O.email){alert("User email not found. Please log in.");return}const{data:M,error:P}=await Yn.functions.invoke("send-report",{body:{email:O.email,subject:`Spend Mind Report: ${x}`,pdfBase64:A}});if(P)throw P;alert("Email sent successfully!")}}catch(v){console.error("Error sending email:",v),alert("Failed to send email. Please check your configuration.")}finally{h(!1)}};return E.jsxs("div",{className:"space-y-8 pb-8",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground font-outfit transition-colors",children:"Expense Reports"}),E.jsx("p",{className:"text-muted-foreground transition-colors",children:"Generate and export detailed spending summaries."})]}),E.jsxs(wn,{className:"bg-card/50 border-border backdrop-blur-sm shadow-sm transition-all overflow-hidden",children:[E.jsx(fs,{className:"border-b border-border pb-6 bg-muted/30",children:E.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[E.jsxs("div",{className:"flex flex-wrap gap-3",children:[E.jsxs("div",{className:"relative group",children:[E.jsx(S6,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-hover:text-foreground transition-colors"}),E.jsxs("select",{className:"bg-background border-border text-foreground text-sm rounded-lg pl-10 pr-10 py-2 appearance-none focus:ring-1 focus:ring-cyan-500 outline-none hover:bg-muted transition-colors cursor-pointer",value:i,onChange:v=>a(v.target.value),children:[E.jsx("option",{value:"all",children:"All Time"}),E.jsx("option",{value:"month",children:"This Month"}),E.jsx("option",{value:"year",children:"This Year"}),E.jsx("option",{value:"custom",children:"Custom Range"})]}),E.jsx(LT,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-hover:text-foreground transition-colors"})]}),i==="custom"&&E.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-left-2 duration-300",children:[E.jsx(VD,{date:l,setDate:c,className:"w-[150px] h-9 text-xs shadow-sm"}),E.jsx("span",{className:"text-muted-foreground text-xs font-medium",children:"to"}),E.jsx(VD,{date:u,setDate:f,className:"w-[150px] h-9 text-xs shadow-sm"})]}),E.jsxs("div",{className:"relative group",children:[E.jsx(E6,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-hover:text-foreground transition-colors"}),E.jsxs("select",{className:"bg-background border-border text-foreground text-sm rounded-lg pl-10 pr-10 py-2 appearance-none focus:ring-1 focus:ring-cyan-500 outline-none hover:bg-muted transition-colors cursor-pointer",value:s,onChange:v=>o(v.target.value),children:[E.jsx("option",{value:"all",children:"All Categories"}),t.map(v=>E.jsx("option",{value:v,children:v},v))]}),E.jsx(LT,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none group-hover:text-foreground transition-colors"})]})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsxs(Er,{variant:"outline",className:"gap-2 border-cyan-500/20 text-cyan-500 hover:bg-cyan-500/10",onClick:w,disabled:d,children:[d?E.jsx(Sm,{className:"h-4 w-4 animate-spin"}):E.jsx(JEe,{className:"h-4 w-4"}),d?"Sending...":"Send Email"]}),E.jsxs(Er,{className:"bg-cyan-500 hover:bg-cyan-600 text-white font-bold gap-2 shadow-sm transition-all shadow-cyan-500/20 active:scale-95",onClick:g,children:[E.jsx(WEe,{className:"h-4 w-4"})," Export PDF"]})]})]})}),E.jsxs($n,{className:"pt-8",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[E.jsxs("div",{className:"p-4 bg-accent/20 rounded-xl border border-border/50 shadow-sm transition-all hover:bg-accent/30",children:[E.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest mb-1.5 px-0.5",children:"Total Period Spending"}),E.jsx("p",{className:"text-xl font-bold text-foreground",children:r(p)})]}),E.jsxs("div",{className:"p-4 bg-accent/20 rounded-xl border border-border/50 shadow-sm transition-all hover:bg-accent/30",children:[E.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest mb-1.5 px-0.5",children:"Expense Count"}),E.jsx("p",{className:"text-xl font-bold text-foreground",children:m.length})]})]}),E.jsxs("div",{className:"overflow-x-auto",children:[E.jsxs("table",{className:"w-full text-sm text-left",children:[E.jsx("thead",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-widest bg-muted/20",children:E.jsxs("tr",{children:[E.jsx("th",{className:"py-3 px-4 rounded-l-lg font-bold",children:"Date"}),E.jsx("th",{className:"py-3 px-4 font-bold",children:"Description"}),E.jsx("th",{className:"py-3 px-4 font-bold",children:"Category"}),E.jsx("th",{className:"py-3 px-4 text-right rounded-r-lg font-bold",children:"Amount"})]})}),E.jsx("tbody",{className:"divide-y divide-border/50",children:m.length>0?m.slice(0,10).map(v=>E.jsxs("tr",{className:"text-foreground/80 hover:bg-muted/50 transition-colors group",children:[E.jsx("td",{className:"py-4 px-4 font-medium",children:new Date(v.date).toLocaleDateString()}),E.jsx("td",{className:"py-4 px-4 font-bold text-foreground group-hover:text-primary transition-colors",children:v.description||"Expense"}),E.jsx("td",{className:"py-4 px-4 text-xs",children:E.jsx("span",{className:"bg-secondary text-secondary-foreground px-2 py-1 rounded-md font-bold text-[10px] uppercase tracking-tighter",children:v.category_name})}),E.jsxs("td",{className:"py-4 px-4 text-right font-bold text-foreground",children:["-",r(v.amount)]})]},v.id)):E.jsx("tr",{children:E.jsx("td",{colSpan:"4",className:"py-12 text-center text-muted-foreground italic font-medium",children:"No expenses found for the selected filters."})})})]}),m.length>10&&E.jsx("p",{className:"mt-4 text-center text-[10px] text-muted-foreground font-bold uppercase tracking-widest opacity-60",children:"Showing first 10 transactions. Export PDF for full report."})]})]})]})]})};var xP="Tabs",[VNt]=Hu(xP,[TC]),Lve=TC(),[WNt,n7]=VNt(xP),Mve=C.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=e,u=Z_(o),[f,d]=Kh({prop:n,onChange:i,defaultProp:a??"",caller:xP});return E.jsx(WNt,{scope:r,baseId:Nc(),value:f,onValueChange:d,orientation:s,dir:u,activationMode:l,children:E.jsx(lr.div,{dir:u,"data-orientation":s,...c,ref:t})})});Mve.displayName=xP;var Dve="TabsList",jve=C.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,a=n7(Dve,r),s=Lve(r);return E.jsx(Rre,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:n,children:E.jsx(lr.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});jve.displayName=Dve;var $ve="TabsTrigger",Fve=C.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=e,s=n7($ve,r),o=Lve(r),l=zve(s.baseId,n),c=Vve(s.baseId,n),u=n===s.value;return E.jsx(Lre,{asChild:!0,...o,focusable:!i,active:u,children:E.jsx(lr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:t,onMouseDown:_t(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?s.onValueChange(n):f.preventDefault()}),onKeyDown:_t(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(n)}),onFocus:_t(e.onFocus,()=>{const f=s.activationMode!=="manual";!u&&!i&&f&&s.onValueChange(n)})})})});Fve.displayName=$ve;var Bve="TabsContent",Uve=C.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...s}=e,o=n7(Bve,r),l=zve(o.baseId,n),c=Vve(o.baseId,n),u=n===o.value,f=C.useRef(u);return C.useEffect(()=>{const d=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(d)},[]),E.jsx(Hc,{present:i||u,children:({present:d})=>E.jsx(lr.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:d&&a})})});Uve.displayName=Bve;function zve(e,t){return`${e}-trigger-${t}`}function Vve(e,t){return`${e}-content-${t}`}var HNt=Mve,Wve=jve,Hve=Fve,Gve=Uve;const GNt=HNt,qve=C.forwardRef(({className:e,...t},r)=>E.jsx(Wve,{ref:r,className:Ft("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qve.displayName=Wve.displayName;const iT=C.forwardRef(({className:e,...t},r)=>E.jsx(Hve,{ref:r,className:Ft("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));iT.displayName=Hve.displayName;const aT=C.forwardRef(({className:e,...t},r)=>E.jsx(Gve,{ref:r,className:Ft("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));aT.displayName=Gve.displayName;const qNt=()=>{const{categories:e,budgetLimits:t,updateLimit:r,settings:n}=yd(),[i,a]=C.useState(t),[s,o]=C.useState(!1);C.useEffect(()=>{a(t)},[t]);const l=(u,f)=>{a(d=>({...d,[u]:f?parseFloat(f):""})),o(!1)},c=()=>{e.forEach(u=>{r(u,i[u]?parseFloat(i[u]):0)}),o(!0),setTimeout(()=>o(!1),2e3)};return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("div",{}),E.jsxs(Er,{onClick:c,className:"gap-2",children:[E.jsx(lAe,{className:"h-4 w-4"}),s?"Saved!":"Save Changes"]})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(u=>{var f;return E.jsxs(wn,{className:"group hover:border-primary/50 transition-colors",children:[E.jsxs(fs,{className:"flex flex-row items-center gap-4 pb-2",children:[E.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:E.jsx(fx,{className:"h-5 w-5"})}),E.jsx(Fs,{className:"text-lg font-bold",children:u})]}),E.jsxs($n,{className:"space-y-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsxs(Fa,{htmlFor:`limit-${u}`,children:["Monthly Limit (",((f=n==null?void 0:n.currency)==null?void 0:f.symbol)||"$",")"]}),E.jsx(Bs,{id:`limit-${u}`,type:"number",min:"0",placeholder:"0.00",value:i[u]!==void 0?i[u]:"",onChange:d=>l(u,d.target.value)})]}),E.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[E.jsx(jte,{className:"h-3 w-3"}),"Set to 0 to disable warnings"]})]})]},u)})})]})},KNt=()=>{const{settings:e,updateSettings:t,availableCurrencies:r}=yd(),n=i=>{const a=r.find(s=>s.code===i);a&&t({currency:{code:a.code,symbol:a.symbol,locale:a.locale}})};return E.jsx("div",{className:"space-y-6",children:E.jsxs(wn,{children:[E.jsx(fs,{children:E.jsxs(Fs,{className:"flex items-center gap-2",children:[E.jsx(qEe,{className:"h-5 w-5 text-primary"}),"Regional Settings"]})}),E.jsx($n,{className:"space-y-4",children:E.jsxs("div",{className:"grid gap-2",children:[E.jsx(Fa,{htmlFor:"currency",children:"Currency & Locale"}),E.jsxs(tme,{value:e.currency.code,onValueChange:n,children:[E.jsx(hB,{id:"currency",children:E.jsx(rme,{placeholder:"Select currency"})}),E.jsx(pB,{children:r.map(i=>E.jsx(mB,{value:i.code,children:E.jsxs("span",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-muted-foreground w-6 text-center font-mono",children:i.symbol}),i.name," (",i.code,")"]})},i.code))})]}),E.jsx("p",{className:"text-xs text-muted-foreground",children:"This will update formatting for all amounts across the application."})]})})]})})},YNt=["Food & Dining","Transportation","Housing","Entertainment","Health","Shopping","Salary","Education","Travel","Utilities"],XNt=()=>{const{categoriesRaw:e,addCategory:t,deleteCategory:r,expenses:n}=yd(),[i,a]=C.useState(""),[s,o]=C.useState(!1),[l,c]=C.useState(null),u=e.map(p=>p.name.toLowerCase()),f=YNt.filter(p=>!u.includes(p.toLowerCase())),d=(p=i)=>{const y=typeof p=="string"?p:i;y.trim()&&(t(y.trim()),a(""))},h=p=>{if(n.some(g=>g.category===p.name)){alert(`Cannot delete '${p.name}' because it is used in existing expenses.`);return}c(p),o(!0)},m=()=>{l&&(r(l.id),c(null),o(!1))};return E.jsxs("div",{className:"space-y-6",children:[E.jsxs(wn,{children:[E.jsxs(fs,{children:[E.jsxs(Fs,{className:"flex items-center gap-2",children:[E.jsx(E6,{className:"h-5 w-5 text-primary"}),"Manage Categories"]}),E.jsx(zc,{children:"Add or remove categories for your expenses."})]}),E.jsxs($n,{className:"space-y-6",children:[E.jsxs("div",{className:"flex gap-2",children:[E.jsxs("div",{className:"grid gap-2 flex-1",children:[E.jsx(Fa,{htmlFor:"new-category",className:"sr-only",children:"New Category"}),E.jsx(Bs,{id:"new-category",placeholder:"Enter category name...",value:i,onChange:p=>a(p.target.value),onKeyDown:p=>p.key==="Enter"&&d()})]}),E.jsxs(Er,{onClick:()=>d(),children:[E.jsx(pb,{className:"h-4 w-4 mr-2"}),"Add"]})]}),f.length>0&&E.jsxs("div",{className:"space-y-3",children:[E.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Suggested Categories"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(p=>E.jsxs(Er,{variant:"outline",size:"sm",className:"h-8 rounded-full border-slate-700 bg-slate-800/30 hover:bg-cyan-500/10 hover:border-cyan-500/50 hover:text-cyan-400 transition-all text-[11px]",onClick:()=>d(p),children:[E.jsx(pb,{className:"h-3 w-3 mr-1"}),p]},p))})]}),E.jsxs("div",{className:"pt-4 border-t border-slate-800",children:[E.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4",children:"Your Categories"}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:e&&e.map(p=>E.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors group",children:[E.jsx("span",{className:"font-medium",children:p.name}),E.jsx(Er,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>h(p),children:E.jsx(A6,{className:"h-4 w-4"})})]},p.id))})]})]})]}),E.jsx(m0e,{open:s,onOpenChange:o,children:E.jsxs(cB,{children:[E.jsx(uB,{children:E.jsx(fB,{children:"Delete Category"})}),E.jsxs("div",{className:"py-4",children:[E.jsxs("p",{children:["Are you sure you want to delete"," ",E.jsx("strong",{children:l==null?void 0:l.name}),"?"]}),E.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This action cannot be undone."})]}),E.jsxs(y0e,{children:[E.jsx(avt,{asChild:!0,children:E.jsx(Er,{variant:"outline",children:"Cancel"})}),E.jsx(Er,{variant:"destructive",onClick:m,children:"Delete"})]})]})})]})},ZNt=()=>E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Settings"}),E.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your preferences and application data."})]}),E.jsxs(GNt,{defaultValue:"general",className:"space-y-4",children:[E.jsxs(qve,{children:[E.jsxs(iT,{value:"general",className:"flex items-center gap-2",children:[E.jsx(Hte,{className:"h-4 w-4"}),"General"]}),E.jsxs(iT,{value:"categories",className:"flex items-center gap-2",children:[E.jsx(XEe,{className:"h-4 w-4"}),"Categories"]}),E.jsxs(iT,{value:"budget",className:"flex items-center gap-2",children:[E.jsx(yC,{className:"h-4 w-4"}),"Budget & Limits"]})]}),E.jsx(aT,{value:"general",className:"space-y-4",children:E.jsx(KNt,{})}),E.jsx(aT,{value:"categories",className:"space-y-4",children:E.jsx(XNt,{})}),E.jsx(aT,{value:"budget",className:"space-y-4",children:E.jsx(qNt,{})})]})]});var Kve=["PageUp","PageDown"],Yve=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Xve={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},N1="Slider",[mj,JNt,QNt]=wC(N1),[Zve]=Hu(N1,[QNt]),[e4t,bP]=Zve(N1),Jve=C.forwardRef((e,t)=>{const{name:r,min:n=0,max:i=100,step:a=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:u,onValueChange:f=()=>{},onValueCommit:d=()=>{},inverted:h=!1,form:m,...p}=e,y=C.useRef(new Set),g=C.useRef(0),v=s==="horizontal"?t4t:r4t,[x=[],b]=Kh({prop:u,defaultProp:c,onChange:P=>{var V;(V=[...y.current][g.current])==null||V.focus(),f(P)}}),S=C.useRef(x);function T(P){const N=o4t(x,P);M(P,N)}function A(P){M(P,g.current)}function O(){const P=S.current[g.current];x[g.current]!==P&&d(x)}function M(P,N,{commit:V}={commit:!1}){const B=f4t(a),G=d4t(Math.round((P-n)/a)*a+n,B),Z=O5(G,[n,i]);b((J=[])=>{const Y=a4t(J,Z,N);if(u4t(Y,l*a)){g.current=Y.indexOf(Z);const U=String(Y)!==String(J);return U&&V&&d(Y),U?Y:J}else return J})}return E.jsx(e4t,{scope:e.__scopeSlider,name:r,disabled:o,min:n,max:i,valueIndexToChangeRef:g,thumbs:y.current,values:x,orientation:s,form:m,children:E.jsx(mj.Provider,{scope:e.__scopeSlider,children:E.jsx(mj.Slot,{scope:e.__scopeSlider,children:E.jsx(v,{"aria-disabled":o,"data-disabled":o?"":void 0,...p,ref:t,onPointerDown:_t(p.onPointerDown,()=>{o||(S.current=x)}),min:n,max:i,inverted:h,onSlideStart:o?void 0:T,onSlideMove:o?void 0:A,onSlideEnd:o?void 0:O,onHomeKeyDown:()=>!o&&M(n,0,{commit:!0}),onEndKeyDown:()=>!o&&M(i,x.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:N})=>{if(!o){const G=Kve.includes(P.key)||P.shiftKey&&Yve.includes(P.key)?10:1,Z=g.current,J=x[Z],Y=a*G*N;M(J+Y,Z,{commit:!0})}}})})})})});Jve.displayName=N1;var[Qve,e1e]=Zve(N1,{startEdge:"left",endEdge:"right",size:"width",direction:1}),t4t=C.forwardRef((e,t)=>{const{min:r,max:n,dir:i,inverted:a,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,[f,d]=C.useState(null),h=Mr(t,v=>d(v)),m=C.useRef(void 0),p=Z_(i),y=p==="ltr",g=y&&!a||!y&&a;function w(v){const x=m.current||f.getBoundingClientRect(),b=[0,x.width],T=i7(b,g?[r,n]:[n,r]);return m.current=x,T(v-x.left)}return E.jsx(Qve,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:E.jsx(t1e,{dir:p,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const x=w(v.clientX);s==null||s(x)},onSlideMove:v=>{const x=w(v.clientX);o==null||o(x)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:v=>{const b=Xve[g?"from-left":"from-right"].includes(v.key);c==null||c({event:v,direction:b?-1:1})}})})}),r4t=C.forwardRef((e,t)=>{const{min:r,max:n,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...c}=e,u=C.useRef(null),f=Mr(t,u),d=C.useRef(void 0),h=!i;function m(p){const y=d.current||u.current.getBoundingClientRect(),g=[0,y.height],v=i7(g,h?[n,r]:[r,n]);return d.current=y,v(p-y.top)}return E.jsx(Qve,{scope:e.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:E.jsx(t1e,{"data-orientation":"vertical",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const y=m(p.clientY);a==null||a(y)},onSlideMove:p=>{const y=m(p.clientY);s==null||s(y)},onSlideEnd:()=>{d.current=void 0,o==null||o()},onStepKeyDown:p=>{const g=Xve[h?"from-bottom":"from-top"].includes(p.key);l==null||l({event:p,direction:g?-1:1})}})})}),t1e=C.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...c}=e,u=bP(N1,r);return E.jsx(lr.span,{...c,ref:t,onKeyDown:_t(e.onKeyDown,f=>{f.key==="Home"?(s(f),f.preventDefault()):f.key==="End"?(o(f),f.preventDefault()):Kve.concat(Yve).includes(f.key)&&(l(f),f.preventDefault())}),onPointerDown:_t(e.onPointerDown,f=>{const d=f.target;d.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(d)?d.focus():n(f)}),onPointerMove:_t(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&i(f)}),onPointerUp:_t(e.onPointerUp,f=>{const d=f.target;d.hasPointerCapture(f.pointerId)&&(d.releasePointerCapture(f.pointerId),a(f))})})}),r1e="SliderTrack",n1e=C.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=bP(r1e,r);return E.jsx(lr.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});n1e.displayName=r1e;var gj="SliderRange",i1e=C.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=bP(gj,r),a=e1e(gj,r),s=C.useRef(null),o=Mr(t,s),l=i.values.length,c=i.values.map(d=>o1e(d,i.min,i.max)),u=l>1?Math.min(...c):0,f=100-Math.max(...c);return E.jsx(lr.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:o,style:{...e.style,[a.startEdge]:u+"%",[a.endEdge]:f+"%"}})});i1e.displayName=gj;var yj="SliderThumb",a1e=C.forwardRef((e,t)=>{const r=JNt(e.__scopeSlider),[n,i]=C.useState(null),a=Mr(t,o=>i(o)),s=C.useMemo(()=>n?r().findIndex(o=>o.ref.current===n):-1,[r,n]);return E.jsx(n4t,{...e,ref:a,index:s})}),n4t=C.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:i,...a}=e,s=bP(yj,r),o=e1e(yj,r),[l,c]=C.useState(null),u=Mr(t,w=>c(w)),f=l?s.form||!!l.closest("form"):!0,d=vre(l),h=s.values[n],m=h===void 0?0:o1e(h,s.min,s.max),p=s4t(n,s.values.length),y=d==null?void 0:d[o.size],g=y?l4t(y,m,o.direction):0;return C.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),E.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${g}px)`},children:[E.jsx(mj.ItemSlot,{scope:e.__scopeSlider,children:E.jsx(lr.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":s.min,"aria-valuenow":h,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:u,style:h===void 0?{display:"none"}:e.style,onFocus:_t(e.onFocus,()=>{s.valueIndexToChangeRef.current=n})})}),f&&E.jsx(s1e,{name:i??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:h},n)]})});a1e.displayName=yj;var i4t="RadioBubbleInput",s1e=C.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const i=C.useRef(null),a=Mr(i,n),s=v0e(t);return C.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&u){const f=new Event("input",{bubbles:!0});u.call(o,t),o.dispatchEvent(f)}},[s,t]),E.jsx(lr.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});s1e.displayName=i4t;function a4t(e=[],t,r){const n=[...e];return n[r]=t,n.sort((i,a)=>i-a)}function o1e(e,t,r){const a=100/(r-t)*(e-t);return O5(a,[0,100])}function s4t(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function o4t(e,t){if(e.length===1)return 0;const r=e.map(i=>Math.abs(i-t)),n=Math.min(...r);return r.indexOf(n)}function l4t(e,t,r){const n=e/2,a=i7([0,50],[0,n]);return(n-a(t)*r)*r}function c4t(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function u4t(e,t){if(t>0){const r=c4t(e);return Math.min(...r)>=t}return!0}function i7(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function f4t(e){return(String(e).split(".")[1]||"").length}function d4t(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var l1e=Jve,h4t=n1e,p4t=i1e,m4t=a1e;const c1e=C.forwardRef(({className:e,...t},r)=>E.jsxs(l1e,{ref:r,className:Ft("relative flex w-full touch-none select-none items-center",e),...t,children:[E.jsx(h4t,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:E.jsx(p4t,{className:"absolute h-full bg-primary"})}),E.jsx(m4t,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));c1e.displayName=l1e.displayName;const g4t=async e=>{const{goals:t,expenses:r,categories:n,reductionRate:i}=e,a=await Y$(),s=`You are the SpendMind AI Financial Advisor. 
  Your goal is to analyze the user's finances and provide a high-quality, prioritized action plan.
  
  You must return ONLY a JSON object with the following structure:
  {
    "recommendations": [
      {
        "id": "uuid",
        "priority": "high" | "medium" | "low",
        "type": "warning" | "success" | "optimization",
        "title": "Short descriptive title",
        "message": "Detailed explanation of the insight",
        "action": "Specific, actionable step to take",
        "color": "tailwind-color-classes" 
      }
    ],
    "totalPotentialSavings": number
  }

  Color guidelines (Tailwind classes):
  - high/warning: "text-red-500 bg-red-500/10 border-red-500/20"
  - medium/optimization: "text-amber-500 bg-amber-500/10 border-amber-500/20"
  - low/success: "text-emerald-500 bg-emerald-500/10 border-emerald-500/20"
  - indigo (generic): "text-indigo-500 bg-indigo-500/10 border-indigo-500/20"
  `,o=`
  Financial Goals: ${JSON.stringify(t)}
  Recent Expenses (Summary): ${JSON.stringify(r.slice(0,20))}
  Categories: ${JSON.stringify(n)}
  Spending Reduction Target: ${i}%
  
  Analyze the current spending patterns against the goals and reduction target. 
  Identify risks, calculate potential savings, and provide specific optimization steps.
  Be precise with numbers. Keep the tone professional but encouraging.
  `;try{const u=(await a.invoke([new Bc(s),new ms(o)])).content.match(/\{[\s\S]*\}/);if(u)return JSON.parse(u[0]);throw new Error("Failed to parse AI response as JSON")}catch(l){throw console.error("AI Advisor: Analysis failed",l),l}},y4t=(e,t,r,n,i)=>{const a=[];let s=0;const o=t.reduce((h,m)=>h+m.amount,0),c=Math.max(0,5e3-o),u=r.map(h=>({name:h,amount:t.filter(m=>m.category===h).reduce((m,p)=>m+p.amount,0)})).sort((h,m)=>m.amount-h.amount),d=u.slice(0,3).reduce((h,m)=>h+m.amount,0)*(i/100);if(s+=d,e.forEach(h=>{const m=parseInt(h.months)||12,p=h.amount/m,y=c+d;y<p?a.push({id:crypto.randomUUID(),priority:"high",type:"warning",title:`Goal At Risk: ${h.title}`,message:`You need ${Math.round(p)}/mo but represent only ${Math.round(y)} potential savings.`,action:`Reduce spending in ${u[0].name} by an additional 10%`,color:"text-red-500 bg-red-500/10 border-red-500/20"}):a.push({id:crypto.randomUUID(),priority:"low",type:"success",title:`On Track: ${h.title}`,message:"With your current plan, you will reach this goal on time!",action:`Set up auto-deposit of ${Math.round(p)}`,color:"text-emerald-500 bg-emerald-500/10 border-emerald-500/20"})}),u.length>0){const h=u[0];a.push({id:crypto.randomUUID(),priority:"medium",type:"optimization",title:`Optimize: ${h.name}`,message:`${h.name} is your highest expense (${Math.round(h.amount)}).`,action:`Apply the ${i}% reduction target here to save ${Math.round(h.amount*(i/100))}/mo`,color:"text-amber-500 bg-amber-500/10 border-amber-500/20"})}return{recommendations:a,totalPotentialSavings:s}},v4t=()=>{const{expenses:e,categories:t,budgetLimits:r,formatCurrency:n,goals:i,addGoal:a,deleteGoal:s}=yd(),[o,l]=C.useState({title:"",amount:"",months:"12"}),[c,u]=C.useState(10),[f,d]=C.useState(null),[h,m]=C.useState(!1),p=g=>{g.preventDefault(),!(!o.title||!o.amount)&&(a(o),l({title:"",amount:"",months:"12"}))},y=async()=>{m(!0);try{const g=await g4t({goals:i,expenses:e,categories:t,reductionRate:c});d(g)}catch(g){console.error("AI Analysis failed:",g);const w=y4t(i,e,t,r,c);d(w)}finally{m(!1)}};return E.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10",children:[E.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:E.jsxs("div",{children:[E.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-foreground flex items-center gap-2",children:[E.jsx(kU,{className:"h-8 w-8 text-indigo-500"}),"AI Financial Advisor"]}),E.jsx("p",{className:"text-muted-foreground mt-1",children:"Advanced analytics to optimize your savings strategy."})]})}),E.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[E.jsxs("div",{className:"xl:col-span-1 space-y-6",children:[E.jsxs(wn,{className:"border-l-4 border-l-emerald-500 shadow-sm",children:[E.jsxs(fs,{children:[E.jsxs(Fs,{className:"flex items-center gap-2 text-lg",children:[E.jsx(qte,{className:"h-5 w-5 text-emerald-500"}),"Set Financial Goals"]}),E.jsx(zc,{children:"Define clear targets for the AI to analyze."})]}),E.jsxs($n,{children:[E.jsxs("form",{onSubmit:p,className:"space-y-4",children:[E.jsxs("div",{className:"grid gap-2",children:[E.jsx(Fa,{children:"Goal Title"}),E.jsx(Bs,{placeholder:"e.g. Dream Vacation",value:o.title,onChange:g=>l({...o,title:g.target.value})})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"grid gap-2",children:[E.jsx(Fa,{children:"Target Amount"}),E.jsx(Bs,{type:"number",placeholder:"5000",value:o.amount,onChange:g=>l({...o,amount:g.target.value})})]}),E.jsxs("div",{className:"grid gap-2",children:[E.jsx(Fa,{children:"Timeline (Mo)"}),E.jsx(Bs,{type:"number",placeholder:"12",value:o.months,onChange:g=>l({...o,months:g.target.value})})]})]}),E.jsx(Er,{type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-700",children:"Add Goal"})]}),E.jsxs("div",{className:"mt-6 space-y-3",children:[E.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Active Goals"}),i.length===0&&E.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No goals active."}),i.map(g=>E.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg border bg-card/40 hover:bg-card/60 transition-colors group",children:[E.jsxs("div",{children:[E.jsx("div",{className:"font-semibold text-sm",children:g.title}),E.jsxs("div",{className:"text-xs text-muted-foreground",children:[n(g.amount)," by"," ",new Date(new Date().setMonth(new Date().getMonth()+parseInt(g.months))).toLocaleDateString(void 0,{month:"short",year:"numeric"})]})]}),E.jsx(Er,{variant:"ghost",size:"icon",onClick:()=>s(g.id),className:"h-7 w-7 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},g.id))]})]})]}),E.jsxs(wn,{className:"border-l-4 border-l-indigo-500 shadow-sm",children:[E.jsxs(fs,{children:[E.jsxs(Fs,{className:"flex items-center gap-2 text-lg",children:[E.jsx(CU,{className:"h-5 w-5 text-indigo-500"}),"Strategy Settings"]}),E.jsx(zc,{children:"Adjust aggressiveness of savings."})]}),E.jsxs($n,{className:"space-y-6",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx(Fa,{children:"Spending Reduction Target"}),E.jsxs("span",{className:"text-sm font-bold text-indigo-500 bg-indigo-500/10 px-2 py-0.5 rounded",children:[c,"%"]})]}),E.jsx(c1e,{defaultValue:[10],max:50,step:1,value:[c],onValueChange:g=>u(g[0]),className:"py-4"}),E.jsx("p",{className:"text-xs text-muted-foreground",children:"Target reduction for variable expenses to free up cash for goals."})]}),E.jsx(Er,{onClick:y,disabled:h,className:"w-full",size:"lg",children:h?"Analyzing...":"Run AI Analysis"})]})]})]}),E.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[!f&&!h&&E.jsxs(wn,{className:"h-full flex flex-col items-center justify-center p-12 border-dashed",children:[E.jsx("div",{className:"bg-primary/5 p-6 rounded-full mb-4",children:E.jsx(kU,{className:"h-12 w-12 text-primary/40"})}),E.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Ready to Analyze"}),E.jsx("p",{className:"text-muted-foreground text-center max-w-sm mt-2",children:'Add your financial goals and adjust your strategy settings, then click "Run AI Analysis" to generate personalized insights.'})]}),h&&E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsx("div",{className:"h-32 bg-primary/5 rounded-xl animate-pulse"}),E.jsx("div",{className:"h-32 bg-primary/5 rounded-xl animate-pulse"})]}),E.jsx("div",{className:"h-64 bg-primary/5 rounded-xl animate-pulse"})]}),f&&!h&&E.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsx(wn,{className:"bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border-indigo-500/20",children:E.jsxs($n,{className:"pt-6",children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Potential Monthly Savings"}),E.jsx("h3",{className:"text-3xl font-bold text-indigo-500 mt-2",children:n(f.totalPotentialSavings)})]}),E.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-lg",children:E.jsx(sAe,{className:"h-6 w-6 text-indigo-500"})})]}),E.jsxs("p",{className:"text-xs text-muted-foreground mt-4",children:["Based on ",c,"% reduction in top categories"]})]})}),E.jsx(wn,{className:"bg-card",children:E.jsxs($n,{className:"pt-6",children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Recommendations"}),E.jsx("h3",{className:"text-3xl font-bold text-foreground mt-2",children:f.recommendations.length})]}),E.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:E.jsx(ZEe,{className:"h-6 w-6 text-primary"})})]}),E.jsxs("div",{className:"flex gap-2 mt-4",children:[E.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-500/10 text-red-500",children:[f.recommendations.filter(g=>g.priority==="high").length," ","High"]}),E.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-500/10 text-amber-500",children:[f.recommendations.filter(g=>g.priority==="medium").length," ","Med"]})]})]})})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[E.jsx(w4t,{className:"h-5 w-5 text-indigo-500"}),"Personalized Action Plan"]}),f.recommendations.sort(g=>g.priority==="high"?-1:1).map(g=>E.jsx(wn,{className:`border-l-4 ${g.priority==="high"?"border-l-red-500":g.priority==="medium"?"border-l-amber-500":"border-l-emerald-500"}`,children:E.jsx($n,{className:"pt-6",children:E.jsxs("div",{className:"flex gap-4 items-start",children:[E.jsxs("div",{className:`p-2 rounded-full shrink-0 ${g.color.split(" ")[1]}`,children:[" ",g.type==="warning"&&E.jsx(jte,{className:`h-6 w-6 ${g.color.split(" ")[0]}`}),g.type==="optimization"&&E.jsx(CU,{className:`h-6 w-6 ${g.color.split(" ")[0]}`}),g.type==="success"&&E.jsx($te,{className:`h-6 w-6 ${g.color.split(" ")[0]}`})]}),E.jsxs("div",{className:"flex-1 space-y-1",children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsx("h4",{className:"font-bold text-lg",children:g.title}),E.jsxs("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded ${g.color}`,children:[g.priority," Priority"]})]}),E.jsx("p",{className:"text-muted-foreground",children:g.message}),E.jsxs("div",{className:"mt-4 bg-secondary/50 rounded-lg p-3 flex items-start gap-3",children:[E.jsx(DEe,{className:"h-4 w-4 text-primary mt-0.5"}),E.jsxs("div",{className:"text-sm",children:[E.jsxs("span",{className:"font-semibold text-foreground",children:["Action:"," "]}),E.jsx("span",{className:"text-muted-foreground",children:g.action})]})]})]})]})})},g.id))]})]})]})]})]})},w4t=({className:e})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[E.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"}),E.jsx("path",{d:"M5 3v4"}),E.jsx("path",{d:"M9 5h4"}),E.jsx("path",{d:"M19 19v4"}),E.jsx("path",{d:"M15 21h4"})]}),x4t=()=>{const[e,t]=C.useState(!1),r={free:[{name:"Expense Tracking",included:!0},{name:"Basic Analytics",included:!0},{name:"Monthly Budgets",included:!0},{name:"5 OCR Scans/mo",included:!0},{name:"AI Financial Advisor",included:!1},{name:"Export to CSV/PDF",included:!1},{name:"Unlimited History",included:!1}],pro:[{name:"Expense Tracking",included:!0},{name:"Advanced Analytics",included:!0},{name:"Unlimited Budgets",included:!0},{name:"Unlimited OCR Scans",included:!0},{name:"AI Financial Advisor",included:!0},{name:"Export to CSV/PDF",included:!0},{name:"Unlimited History",included:!0}]};return E.jsxs("div",{className:"space-y-8 pb-10",children:[E.jsxs("div",{className:"text-center space-y-4",children:[E.jsx("h1",{className:"text-4xl font-bold tracking-tight text-foreground",children:"Upgrade your Financial Journey"}),E.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Unlock the full potential of Spend Mind with our Pro plan. Get AI insights, unlimited scans, and more."}),E.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[E.jsx("span",{className:`text-sm font-medium ${e?"text-muted-foreground":"text-foreground"}`,children:"Monthly"}),E.jsx("button",{onClick:()=>t(!e),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background ${e?"bg-cyan-500":"bg-slate-600"}`,children:E.jsx("span",{className:`${e?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})}),E.jsxs("span",{className:`text-sm font-medium ${e?"text-foreground":"text-muted-foreground"}`,children:["Yearly ",E.jsx("span",{className:"text-xs text-green-500 font-bold",children:"(Save 20%)"})]})]})]}),E.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[E.jsx(yu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:E.jsxs(wn,{className:"h-full border-border bg-card/50 backdrop-blur-sm relative overflow-hidden",children:[E.jsxs(fs,{children:[E.jsxs(Fs,{className:"flex items-center gap-2 text-2xl",children:[E.jsx(fAe,{className:"w-6 h-6 text-slate-400"}),"Free"]}),E.jsx(zc,{children:"Essential features for beginners"}),E.jsxs("div",{className:"mt-4",children:[E.jsx("span",{className:"text-4xl font-bold",children:"$0"}),E.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]}),E.jsx($n,{children:E.jsx("ul",{className:"space-y-3",children:r.free.map((n,i)=>E.jsxs("li",{className:"flex items-center gap-3",children:[n.included?E.jsx(hb,{className:"w-5 h-5 text-green-500 shrink-0"}):E.jsx(mb,{className:"w-5 h-5 text-slate-500 shrink-0"}),E.jsx("span",{className:n.included?"text-foreground":"text-muted-foreground",children:n.name})]},i))})}),E.jsx(hv,{children:E.jsx(Er,{variant:"outline",className:"w-full",disabled:!0,children:"Current Plan"})})]})}),E.jsxs(yu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"relative",children:[E.jsx("div",{className:"absolute -inset-[1px] rounded-xl bg-gradient-to-r from-cyan-400 to-purple-600 opacity-75 blur-sm"}),E.jsxs(wn,{className:"h-full border-transparent bg-slate-950 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-bl from-cyan-500 to-purple-600 text-white text-xs font-bold px-3 py-1 rounded-bl-xl",children:"RECOMMENDED"}),E.jsxs(fs,{children:[E.jsxs(Fs,{className:"flex items-center gap-2 text-2xl text-white",children:[E.jsx(zEe,{className:"w-6 h-6 text-yellow-400"}),"Pro"]}),E.jsx(zc,{className:"text-slate-300",children:"Power tools for serious tracking"}),E.jsxs("div",{className:"mt-4 text-white",children:[E.jsx("span",{className:"text-4xl font-bold",children:e?"$99":"$9.99"}),E.jsxs("span",{className:"text-slate-400",children:["/",e?"year":"month"]})]})]}),E.jsx($n,{children:E.jsx("ul",{className:"space-y-3",children:r.pro.map((n,i)=>E.jsxs("li",{className:"flex items-center gap-3",children:[E.jsx(hb,{className:"w-5 h-5 text-cyan-400 shrink-0"}),E.jsx("span",{className:"text-white",children:n.name})]},i))})}),E.jsx(hv,{children:E.jsxs(Er,{className:"w-full bg-gradient-to-r from-cyan-500 to-purple-600 hover:from-cyan-600 hover:to-purple-700 text-white border-0",children:[E.jsx(gAe,{className:"w-4 h-4 mr-2 fill-current"}),"Upgrade to Pro"]})})]})]})]})]})};function b4t(){return E.jsx(W_e,{basename:"/Spend-Mind",children:E.jsx(IEe,{children:E.jsxs(x_e,{children:[!1,E.jsxs(To,{path:"/auth",element:E.jsx(KVe,{}),children:[E.jsx(To,{path:"login",element:E.jsx(tWe,{})}),E.jsx(To,{path:"signup",element:E.jsx(rWe,{})})]}),E.jsxs(To,{path:"/",element:E.jsx(qVe,{}),children:[E.jsx(To,{index:!0,element:E.jsx($yt,{})}),E.jsx(To,{path:"expenses",element:E.jsx(fCt,{})}),E.jsx(To,{path:"budgets",element:E.jsx(dCt,{})}),E.jsx(To,{path:"reports",element:E.jsx(zNt,{})}),E.jsx(To,{path:"ai-advisor",element:E.jsx(v4t,{})}),E.jsx(To,{path:"settings",element:E.jsx(ZNt,{})}),E.jsx(To,{path:"subscription",element:E.jsx(x4t,{})})]}),E.jsx(To,{path:"*",element:E.jsx(v6,{to:"/",replace:!0})})]})})})}typeof window<"u"&&(window.global=window,window.process={env:{}});T3.createRoot(document.getElementById("root")).render(E.jsx(he.StrictMode,{children:E.jsx(nTe,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:E.jsx(b4t,{})})}));export{sn as _,bS as c,Hr as g};
